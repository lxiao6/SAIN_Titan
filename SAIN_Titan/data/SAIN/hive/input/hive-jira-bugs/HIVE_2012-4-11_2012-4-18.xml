<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:20:36 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2012-4-11+AND+created+%3C%3D+2012-4-18+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="17" total="17"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2944] dummy issue for testing arc</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2944</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12550463">HIVE-2944</key>
            <summary>dummy issue for testing arc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2012 02:14:18 +0000</created>
                <updated>Wed, 11 Apr 2012 02:20:14 +0000</updated>
                                                                            <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13251257" author="phabricator@reviews.facebook.net" created="Wed, 11 Apr 2012 02:20:14 +0000"  >&lt;p&gt;jsichi requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2944&quot; title=&quot;dummy issue for testing arc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2944&quot;&gt;HIVE-2944&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; dummy issue for testing arc&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2944&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2944&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Update README&lt;/p&gt;



&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2733&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2733&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  README.txt&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6243/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6243/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522194" name="ASF.LICENSE.NOT.GRANTED--HIVE-2944.D2733.1.patch" size="342" author="phabricator@reviews.facebook.net" created="Wed, 11 Apr 2012 02:20:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 Apr 2012 02:20:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2945] Hive Client is hanging since MRApp Master doesnt exist after the task is finished </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2945</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Submit a hive query which uses mapred to give the result(Say join query)&lt;br/&gt;
If we submit a job to resourceManager process. it will create a MRAppMaster process to excute this task .&lt;br/&gt;
MRAppMaster will create YarnChild process to excute Map task or reduce task. &lt;br/&gt;
after task is finished,resourceManager will kill MRAppMaster and YarnChild process.&lt;br/&gt;
When the hive client is about to get the progress from MRAppMaster ,the task is already finished ,so MRAppMaster process don&apos;t exist. so the client will try to connect it for ever.&lt;br/&gt;
that&apos;s why hive client hangs.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12550471">HIVE-2945</key>
            <summary>Hive Client is hanging since MRApp Master doesnt exist after the task is finished </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kristamswathi">Kristam Subba Swathi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2012 05:35:54 +0000</created>
                <updated>Wed, 11 Apr 2012 14:21:16 +0000</updated>
                                                                            <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13251616" author="appodictic" created="Wed, 11 Apr 2012 14:21:16 +0000"  >&lt;p&gt;I am not sure anyone has tried hive in the Mapred.NEXT setup yet. I do not know enough about the infrastructure to comment definitively , but it sounds like it would be nice if the processes hung around for a few moments after completion so Hive client could check in to them. Strange though because you would not expect a hive job to hang around long then a typical map/reduce job.&lt;/p&gt;

&lt;p&gt;It would be great if you can give a stack trace and find what point in the hive code is hanging.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 Apr 2012 14:21:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124242</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2946] Hive metastore does not have any log messages while shutting itself down. </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2946</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When hive metastore is started, the event is logged with good amount of information. But when it is stopped ( using a kill) command, no information is being written to the logs. It will be good if we can add a shutdown event to the HiveMetastore class. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12550590">HIVE-2946</key>
            <summary>Hive metastore does not have any log messages while shutting itself down. </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="avandana">Vandana Ayyalasomayajula</assignee>
                                    <reporter username="avandana">Vandana Ayyalasomayajula</reporter>
                        <labels>
                            <label>metastore</label>
                    </labels>
                <created>Wed, 11 Apr 2012 21:40:14 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:49 +0000</updated>
                            <resolved>Tue, 17 Apr 2012 23:31:01 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13251970" author="phabricator@reviews.facebook.net" created="Wed, 11 Apr 2012 21:57:16 +0000"  >&lt;p&gt;avandana requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; title=&quot;Hive metastore does not have any log messages while shutting itself down. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2946&quot;&gt;&lt;del&gt;HIVE-2946&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive metastore does not have any log messages while shutting itself down.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2946&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Added shutdown hook to log message while shutting down metastore.&lt;/p&gt;

&lt;p&gt;  When hive metastore is started, the event is logged with good amount of information. But when it is stopped ( using a kill) command, no information is being written to the logs. It will be good if we can add a shutdown event to the HiveMetastore class.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2745&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2745&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6273/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6273/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13252985" author="phabricator@reviews.facebook.net" created="Thu, 12 Apr 2012 23:59:16 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; title=&quot;Hive metastore does not have any log messages while shutting itself down. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2946&quot;&gt;&lt;del&gt;HIVE-2946&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive metastore does not have any log messages while shutting itself down.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java:2956 Just like for start message you can also add&lt;br/&gt;
  if (cli.isVerbose()) &lt;/p&gt;
{
  System.err.println(msg);
  }

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2745&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2745&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13253016" author="phabricator@reviews.facebook.net" created="Fri, 13 Apr 2012 00:31:14 +0000"  >&lt;p&gt;avandana requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; title=&quot;Hive metastore does not have any log messages while shutting itself down. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2946&quot;&gt;&lt;del&gt;HIVE-2946&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive metastore does not have any log messages while shutting itself down.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2946&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Addressed Ashutosh&apos;s comments.&lt;/p&gt;

&lt;p&gt;  When hive metastore is started, the event is logged with good amount of information. But when it is stopped ( using a kill) command, no information is being written to the logs. It will be good if we can add a shutdown event to the HiveMetastore class.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2787&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2787&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6315/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6315/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13256054" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 23:24:14 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; title=&quot;Hive metastore does not have any log messages while shutting itself down. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2946&quot;&gt;&lt;del&gt;HIVE-2946&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive metastore does not have any log messages while shutting itself down.&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit soon.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2787&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2787&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13256059" author="ashutoshc" created="Tue, 17 Apr 2012 23:31:01 +0000"  >&lt;p&gt;Committed to trunk and 0.9 Thanks, Vandana!&lt;/p&gt;</comment>
                            <comment id="13256060" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 23:36:14 +0000"  >&lt;p&gt;avandana has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; title=&quot;Hive metastore does not have any log messages while shutting itself down. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2946&quot;&gt;&lt;del&gt;HIVE-2946&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive metastore does not have any log messages while shutting itself down.&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by hashutosh.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2787&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2787&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1327323&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1327323&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13256245" author="hudson" created="Wed, 18 Apr 2012 06:44:24 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1380 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1380/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1380/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; title=&quot;Hive metastore does not have any log messages while shutting itself down. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2946&quot;&gt;&lt;del&gt;HIVE-2946&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive metastore does not have any log messages while shutting&lt;br/&gt;
itself down.&lt;br/&gt;
(Vandana Kasavajjala via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2946&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Addressed Ashutosh&apos;s comments.&lt;/p&gt;

&lt;p&gt;When hive metastore is started, the event is logged with good amount of&lt;br/&gt;
information. But when it is stopped ( using a kill) command, no information is&lt;br/&gt;
being written to the logs. It will be good if we can add a shutdown event to the&lt;br/&gt;
HiveMetastore class.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2787&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2787&lt;/a&gt; (Revision 1327323)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327323&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327323&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265290" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:32 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548210" author="hudson" created="Wed, 9 Jan 2013 10:24:49 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; title=&quot;Hive metastore does not have any log messages while shutting itself down. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2946&quot;&gt;&lt;del&gt;HIVE-2946&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive metastore does not have any log messages while shutting&lt;br/&gt;
itself down.&lt;br/&gt;
(Vandana Kasavajjala via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2946&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2946&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Addressed Ashutosh&apos;s comments.&lt;/p&gt;

&lt;p&gt;When hive metastore is started, the event is logged with good amount of&lt;br/&gt;
information. But when it is stopped ( using a kill) command, no information is&lt;br/&gt;
being written to the logs. It will be good if we can add a shutdown event to the&lt;br/&gt;
HiveMetastore class.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2787&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2787&lt;/a&gt; (Revision 1327323)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327323&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327323&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522327" name="ASF.LICENSE.NOT.GRANTED--HIVE-2946.D2745.1.patch" size="795" author="phabricator@reviews.facebook.net" created="Wed, 11 Apr 2012 21:57:17 +0000"/>
                            <attachment id="12522509" name="ASF.LICENSE.NOT.GRANTED--HIVE-2946.D2787.1.patch" size="1366" author="phabricator@reviews.facebook.net" created="Fri, 13 Apr 2012 00:31:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 Apr 2012 21:57:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2947] Arc test -- IGNORE</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2947</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12550598">HIVE-2947</key>
            <summary>Arc test -- IGNORE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2012 22:12:42 +0000</created>
                <updated>Sat, 6 Dec 2014 05:23:26 +0000</updated>
                            <resolved>Sat, 6 Dec 2014 05:19:43 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2948] HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2948</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Because its munging hdfs paths and not OS paths.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12550614">HIVE-2948</key>
            <summary>HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Apr 2012 01:09:54 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:55 +0000</updated>
                            <resolved>Fri, 13 Apr 2012 04:46:32 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13252120" author="phabricator@reviews.facebook.net" created="Thu, 12 Apr 2012 01:14:16 +0000"  >&lt;p&gt;ashutoshc requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; title=&quot;HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2948&quot;&gt;&lt;del&gt;HIVE-2948&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2948&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Simple patch which replaces File.separator to Path.SEPARATOR since separator for hdfs path is Path.SEPARATOR not java&apos;s File.SEPARATOR&lt;/p&gt;

&lt;p&gt;  Because its munging hdfs paths and not OS paths.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2763&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2763&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6291/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6291/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13253080" author="ashutoshc" created="Fri, 13 Apr 2012 03:31:56 +0000"  >&lt;p&gt;All the tests passed.&lt;/p&gt;</comment>
                            <comment id="13253099" author="ashutoshc" created="Fri, 13 Apr 2012 04:34:09 +0000"  >&lt;p&gt;Ready for review.&lt;/p&gt;</comment>
                            <comment id="13253104" author="phabricator@reviews.facebook.net" created="Fri, 13 Apr 2012 04:41:30 +0000"  >&lt;p&gt;kevinwilfong has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; title=&quot;HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2948&quot;&gt;&lt;del&gt;HIVE-2948&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2763&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2763&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13253106" author="ashutoshc" created="Fri, 13 Apr 2012 04:46:33 +0000"  >&lt;p&gt;Thanks, Kevin for the review.. Committed to trunk. &lt;/p&gt;</comment>
                            <comment id="13253109" author="phabricator@reviews.facebook.net" created="Fri, 13 Apr 2012 04:55:20 +0000"  >&lt;p&gt;ashutoshc has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; title=&quot;HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2948&quot;&gt;&lt;del&gt;HIVE-2948&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by hashutosh.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2763&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2763&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1325615&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1325615&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13253357" author="hudson" created="Fri, 13 Apr 2012 13:13:25 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1371 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1371/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; title=&quot;HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2948&quot;&gt;&lt;del&gt;HIVE-2948&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveFileFormatUtils should use Path.SEPARATOR instead of&lt;br/&gt;
File.Separator&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2948&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Simple patch which replaces File.separator to Path.SEPARATOR since separator for&lt;br/&gt;
hdfs path is Path.SEPARATOR not java&apos;s File.SEPARATOR&lt;/p&gt;

&lt;p&gt;Because its munging hdfs paths and not OS paths.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, kevinwilfong&lt;/p&gt;

&lt;p&gt;Reviewed By: kevinwilfong&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2763&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2763&lt;/a&gt; (Revision 1325615)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325615&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325615&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265298" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:35 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548234" author="hudson" created="Wed, 9 Jan 2013 10:24:55 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; title=&quot;HiveFileFormatUtils should use Path.SEPARATOR instead of File.Separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2948&quot;&gt;&lt;del&gt;HIVE-2948&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveFileFormatUtils should use Path.SEPARATOR instead of&lt;br/&gt;
File.Separator&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2948&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Simple patch which replaces File.separator to Path.SEPARATOR since separator for&lt;br/&gt;
hdfs path is Path.SEPARATOR not java&apos;s File.SEPARATOR&lt;/p&gt;

&lt;p&gt;Because its munging hdfs paths and not OS paths.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, kevinwilfong&lt;/p&gt;

&lt;p&gt;Reviewed By: kevinwilfong&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2763&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2763&lt;/a&gt; (Revision 1325615)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325615&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325615&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522363" name="ASF.LICENSE.NOT.GRANTED--HIVE-2948.D2763.1.patch" size="2141" author="phabricator@reviews.facebook.net" created="Thu, 12 Apr 2012 01:14:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Apr 2012 01:14:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235478</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09ygn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2949] bug with describe and reserved keyword</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2949</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;there seems to an issue with the describe statement and using reserved keywords for tablenames.&lt;/p&gt;

&lt;p&gt;Specifically, describe does not seem to work on a table called &apos;user&apos; even though it&apos;s escaped in the query.&lt;/p&gt;

&lt;p&gt;So this works:&lt;br/&gt;
show partitions `user`;&lt;/p&gt;

&lt;p&gt;But this does not work:&lt;br/&gt;
describe `user`;&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;</description>
                <environment></environment>
        <key id="12550668">HIVE-2949</key>
            <summary>bug with describe and reserved keyword</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="faal">Fabian Alenius</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Apr 2012 12:07:11 +0000</created>
                <updated>Tue, 27 Jan 2015 15:51:07 +0000</updated>
                            <resolved>Tue, 27 Jan 2015 15:50:43 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Parser</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13879942" author="dzanter" created="Thu, 23 Jan 2014 14:22:32 +0000"  >&lt;p&gt;Same issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6187&quot; title=&quot;Add test to verify that DESCRIBE TABLE works with quoted table names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6187&quot;&gt;&lt;del&gt;HIVE-6187&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13879948" author="dzanter" created="Thu, 23 Jan 2014 14:25:52 +0000"  >&lt;p&gt;Allowing backtick will fix this as well.&lt;/p&gt;</comment>
                            <comment id="14293155" author="lefty@hortonworks.com" created="Tue, 27 Jan 2015 08:08:23 +0000"  >&lt;p&gt;According to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt;&apos;s comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6187&quot; title=&quot;Add test to verify that DESCRIBE TABLE works with quoted table names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6187&quot;&gt;&lt;del&gt;HIVE-6187&lt;/del&gt;&lt;/a&gt; backticks worked for DESCRIBE in trunk on 13/Jan/2014 so that means the fix was included in Hive 0.13.0, released 21/Apr/2014.&lt;/p&gt;

&lt;p&gt;It may have been fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6013&quot; title=&quot;Supporting Quoted Identifiers in Column Names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6013&quot;&gt;&lt;del&gt;HIVE-6013&lt;/del&gt;&lt;/a&gt; (Supporting Quoted Identifiers in Column Names), committed to trunk 19/Dec/2013.&lt;/p&gt;</comment>
                            <comment id="14293707" author="ashutoshc" created="Tue, 27 Jan 2015 15:50:43 +0000"  >&lt;p&gt;Fixed via &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6013&quot; title=&quot;Supporting Quoted Identifiers in Column Names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6013&quot;&gt;&lt;del&gt;HIVE-6013&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12688361">HIVE-6187</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12684131">HIVE-6013</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jan 2014 14:22:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2950] Hive should store the full table schema in partition storage descriptors</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2950</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive tables have a schema, which is copied into the partition storage descriptor when adding a partition. Currently only columns stored in the table storage descriptor are copied - columns that are reported by the serde are not copied. Instead of copying the table storage descriptor columns into the partition columns, the full table schema should be copied.&lt;/p&gt;


&lt;p&gt;DETAILS&lt;/p&gt;

&lt;p&gt;This is a little long but is necessary to show 3 things: current behavior when explicitly listing columns, behavior with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2941&quot; title=&quot;Hive should expand nested structs when setting the table schema from thrift structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2941&quot;&gt;&lt;del&gt;HIVE-2941&lt;/del&gt;&lt;/a&gt; patched in and serde reported columns, and finally the behavior with this patch (full table schema copied into the partition storage descriptor).&lt;/p&gt;


&lt;p&gt;Here&apos;s an example of what currently happens. Note the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the two manually-defined fields defined for the table are listed in the table storage descriptor.&lt;/li&gt;
	&lt;li&gt;both fields are present in the partition storage descriptor&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This works great because users who query for a partition can look at its storage descriptor and get the schema.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; create external table foo_test (name string, age &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) partitioned by (part_dt string);
hive&amp;gt; describe extended foo_test;
OK
name	string	
age	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;	
part_dt	string	
	 	 
Detailed Table Information	Table(tableName:foo_test, dbName:travis_test, owner:travis, createTime:1334256062, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[FieldSchema(name:name, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;), FieldSchema(name:age, type:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;), FieldSchema(name:part_dt, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)], location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/warehouse/travis_test.db/foo_test, inputFormat:org.apache.hadoop.mapred.TextInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, numBuckets:-1, serdeInfo:SerDeInfo(name:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), partitionKeys:[FieldSchema(name:part_dt, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)], parameters:{EXTERNAL=TRUE, transient_lastDdlTime=1334256062}, viewOriginalText:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, viewExpandedText:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, tableType:EXTERNAL_TABLE)	
&lt;/span&gt;Time taken: 0.082 seconds

hive&amp;gt; alter table foo_test add partition (part_dt = &lt;span class=&quot;code-quote&quot;&gt;&apos;20120331T000000Z&apos;&lt;/span&gt;) location &lt;span class=&quot;code-quote&quot;&gt;&apos;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/foo/2012/03/31/00&apos;&lt;/span&gt;;
&lt;/span&gt;hive&amp;gt; describe extended foo_test partition (part_dt = &lt;span class=&quot;code-quote&quot;&gt;&apos;20120331T000000Z&apos;&lt;/span&gt;);
OK
name	string	
age	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;	
part_dt	string	
	 	 
Detailed Partition Information	Partition(values:[20120331T000000Z], dbName:travis_test, tableName:foo_test, createTime:1334256131, lastAccessTime:0, sd:StorageDescriptor(cols:[FieldSchema(name:name, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;), FieldSchema(name:age, type:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;), FieldSchema(name:part_dt, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)], location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/foo/2012/03/31/00, inputFormat:org.apache.hadoop.mapred.TextInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, numBuckets:-1, serdeInfo:SerDeInfo(name:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), parameters:{transient_lastDdlTime=1334256131})	&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;




&lt;p&gt;CURRENT BEHAVIOR WITH &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2941&quot; title=&quot;Hive should expand nested structs when setting the table schema from thrift structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2941&quot;&gt;&lt;del&gt;HIVE-2941&lt;/del&gt;&lt;/a&gt; PATCHED IN&lt;/p&gt;

&lt;p&gt;Now let&apos;s examine what happens when creating a table when the serde reports the schema. Notice the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The table storage descriptor contains an empty list of columns. However, the table schema is available from the serde reflecting on the serialization class.&lt;/li&gt;
	&lt;li&gt;The partition storage descriptor does contain a single &quot;part_dt&quot; column that was copied from the table partition keys. The actual data columns are not present.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; create external table travis_test.person_test partitioned by (part_dt string) row format serde &lt;span class=&quot;code-quote&quot;&gt;&quot;com.twitter.elephantbird.hive.serde.ThriftSerDe&quot;&lt;/span&gt; with serdeproperties (&lt;span class=&quot;code-quote&quot;&gt;&quot;serialization.class&quot;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.twitter.elephantbird.examples.thrift.Person&quot;&lt;/span&gt;) stored as inputformat &lt;span class=&quot;code-quote&quot;&gt;&quot;com.twitter.elephantbird.mapred.input.HiveMultiInputFormat&quot;&lt;/span&gt; outputformat &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&quot;&lt;/span&gt;;
OK
Time taken: 0.08 seconds
hive&amp;gt; describe extended person_test;
OK
name	struct&amp;lt;first_name:string,last_name:string&amp;gt;	from deserializer
id	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;	from deserializer
email	string	from deserializer
phones	array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;	from deserializer
part_dt	string	
	 	 
Detailed Table Information	Table(tableName:person_test, dbName:travis_test, owner:travis, createTime:1334256942, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[], location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/warehouse/travis_test.db/person_test, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, numBuckets:-1, serdeInfo:SerDeInfo(name:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), partitionKeys:[FieldSchema(name:part_dt, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)], parameters:{EXTERNAL=TRUE, transient_lastDdlTime=1334256942}, viewOriginalText:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, viewExpandedText:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, tableType:EXTERNAL_TABLE)	
&lt;/span&gt;Time taken: 0.147 seconds
hive&amp;gt; alter table person_test add partition (part_dt = &lt;span class=&quot;code-quote&quot;&gt;&apos;20120331T000000Z&apos;&lt;/span&gt;) location &lt;span class=&quot;code-quote&quot;&gt;&apos;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/foo/2012/03/31/00&apos;&lt;/span&gt;; 
&lt;/span&gt;OK
Time taken: 0.149 seconds
hive&amp;gt; describe extended person_test partition (part_dt = &lt;span class=&quot;code-quote&quot;&gt;&apos;20120331T000000Z&apos;&lt;/span&gt;);
OK
part_dt	string	
	 	 
Detailed Partition Information	Partition(values:[20120331T000000Z], dbName:travis_test, tableName:person_test, createTime:1334257029, lastAccessTime:0, sd:StorageDescriptor(cols:[FieldSchema(name:part_dt, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)], location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/foo/2012/03/31/00, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, numBuckets:-1, serdeInfo:SerDeInfo(name:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), parameters:{transient_lastDdlTime=1334257029})	
&lt;/span&gt;Time taken: 0.106 seconds
hive&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;PROPOSED BEHAVIOR&lt;/p&gt;


&lt;p&gt;I believe the correct thing to do is copy the full table schema (serde-reported columns + partition keys) into the partition storage descriptor. Notice the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Table storage descriptor does not contain any columns, because they are reported by the serde.&lt;/li&gt;
	&lt;li&gt;Partition storage descriptor now contains both the serde-reported schema, and full table schema.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; create external table travis_test.person_test partitioned by (part_dt string) row format serde &lt;span class=&quot;code-quote&quot;&gt;&quot;com.twitter.elephantbird.hive.serde.ThriftSerDe&quot;&lt;/span&gt; with serdeproperties (&lt;span class=&quot;code-quote&quot;&gt;&quot;serialization.class&quot;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.twitter.elephantbird.examples.thrift.Person&quot;&lt;/span&gt;) stored as inputformat &lt;span class=&quot;code-quote&quot;&gt;&quot;com.twitter.elephantbird.mapred.input.HiveMultiInputFormat&quot;&lt;/span&gt; outputformat &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&quot;&lt;/span&gt;;
OK
Time taken: 0.076 seconds
hive&amp;gt; describe extended person_test;                                                                                                                                     OK                                                                                                                                                                       name    struct&amp;lt;first_name:string,last_name:string&amp;gt;      from deserializer
id	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;	from deserializer
email	string	from deserializer
phones	array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;	from deserializer
part_dt	string	
	 	 
Detailed Table Information	Table(tableName:person_test, dbName:travis_test, owner:travis, createTime:1334257489, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[], location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/warehouse/travis_test.db/person_test, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, numBuckets:-1, serdeInfo:SerDeInfo(name:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), partitionKeys:[FieldSchema(name:part_dt, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)], parameters:{EXTERNAL=TRUE, transient_lastDdlTime=1334257489}, viewOriginalText:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, viewExpandedText:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, tableType:EXTERNAL_TABLE)	
&lt;/span&gt;Time taken: 0.155 seconds
hive&amp;gt; alter table person_test add partition (part_dt = &lt;span class=&quot;code-quote&quot;&gt;&apos;20120331T000000Z&apos;&lt;/span&gt;) location &lt;span class=&quot;code-quote&quot;&gt;&apos;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/foo/2012/03/31/00&apos;&lt;/span&gt;;
&lt;/span&gt;OK                                                                                                                                                                       Time taken: 0.296 seconds                                        
hive&amp;gt; describe extended person_test partition (part_dt = &lt;span class=&quot;code-quote&quot;&gt;&apos;20120331T000000Z&apos;&lt;/span&gt;);                                                                                            OK                                                                                                                                                                       name    struct&amp;lt;first_name:string,last_name:string&amp;gt;      from deserializer
id	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;	from deserializer
email	string	from deserializer
phones	array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;	from deserializer
part_dt	string	
	 	 
Detailed Partition Information	Partition(values:[20120331T000000Z], dbName:travis_test, tableName:person_test, createTime:1334257504, lastAccessTime:0, sd:StorageDescriptor(cols:[FieldSchema(name:name, type:struct&amp;lt;first_name:string,last_name:string&amp;gt;, comment:from deserializer), FieldSchema(name:id, type:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, comment:from deserializer), FieldSchema(name:email, type:string, comment:from deserializer), FieldSchema(name:phones, type:array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;, comment:from deserializer), FieldSchema(name:part_dt, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)], location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//foo.com/foo/2012/03/31/00, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, numBuckets:-1, serdeInfo:SerDeInfo(name:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), parameters:{transient_lastDdlTime=1334257504})	
&lt;/span&gt;Time taken: 0.133 seconds
hive&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12550726">HIVE-2950</key>
            <summary>Hive should store the full table schema in partition storage descriptors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="traviscrawford">Travis Crawford</assignee>
                                    <reporter username="traviscrawford">Travis Crawford</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Apr 2012 19:09:56 +0000</created>
                <updated>Tue, 17 Jul 2012 17:08:45 +0000</updated>
                            <resolved>Tue, 17 Jul 2012 17:08:44 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13252754" author="phabricator@reviews.facebook.net" created="Thu, 12 Apr 2012 19:19:17 +0000"  >&lt;p&gt;travis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2950&quot; title=&quot;Hive should store the full table schema in partition storage descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2950&quot;&gt;&lt;del&gt;HIVE-2950&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive should store the full table schema in partition storage descriptors&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  When adding a partition, copy the full table schema into the partition storage descriptor. The table storage descriptor may not contain the full schema when using a serde that reports its schema. This change makes partitions with serde-reported schema behave the same as partitions without a serde-reported schem.&lt;/p&gt;

&lt;p&gt;  Hive tables have a schema, which is copied into the partition storage descriptor when adding a partition. Currently only columns stored in the table storage descriptor are copied - columns that are reported by the serde are not copied. Instead of copying the table storage descriptor columns into the partition columns, the full table schema should be copied.&lt;/p&gt;

&lt;p&gt;  DETAILS&lt;/p&gt;

&lt;p&gt;  This is a little long but is necessary to show 3 things: current behavior when explicitly listing columns, behavior with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2941&quot; title=&quot;Hive should expand nested structs when setting the table schema from thrift structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2941&quot;&gt;&lt;del&gt;HIVE-2941&lt;/del&gt;&lt;/a&gt; patched in and serde reported columns, and finally the behavior with this patch (full table schema copied into the partition storage descriptor).&lt;/p&gt;

&lt;p&gt;  Here&apos;s an example of what currently happens. Note the following:&lt;/p&gt;

&lt;p&gt;  	the two manually-defined fields defined for the table are listed in the table storage descriptor.&lt;br/&gt;
  	both fields are present in the partition storage descriptor&lt;/p&gt;

&lt;p&gt;  This works great because users who query for a partition can look at its storage descriptor and get the schema.&lt;/p&gt;

&lt;p&gt;  hive&amp;gt; create external table foo_test (name string, age int) partitioned by (part_dt string);&lt;br/&gt;
  hive&amp;gt; describe extended foo_test;&lt;br/&gt;
  OK&lt;br/&gt;
  name	string&lt;br/&gt;
  age	int&lt;br/&gt;
  part_dt	string&lt;/p&gt;

&lt;p&gt;  Detailed Table Information	Table(tableName:foo_test, dbName:travis_test, owner:travis, createTime:1334256062, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:&lt;span class=&quot;error&quot;&gt;&amp;#91;FieldSchema(name:name, type:string, comment:null), FieldSchema(name:age, type:int, comment:null), FieldSchema(name:part_dt, type:string, comment:null)&amp;#93;&lt;/span&gt;, location:hdfs://foo.com/warehouse/travis_test.db/foo_test, inputFormat:org.apache.hadoop.mapred.TextInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:&lt;/p&gt;
{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), partitionKeys:&lt;span class=&quot;error&quot;&gt;&amp;#91;FieldSchema(name:part_dt, type:string, comment:null)&amp;#93;&lt;/span&gt;, parameters:{EXTERNAL=TRUE, transient_lastDdlTime=1334256062}, viewOriginalText:null, viewExpandedText:null, tableType:EXTERNAL_TABLE)&lt;br/&gt;
  Time taken: 0.082 seconds&lt;br/&gt;
&lt;br/&gt;
  hive&amp;gt; alter table foo_test add partition (part_dt = &apos;20120331T000000Z&apos;) location &apos;hdfs://foo.com/foo/2012/03/31/00&apos;;&lt;br/&gt;
  hive&amp;gt; describe extended foo_test partition (part_dt = &apos;20120331T000000Z&apos;);&lt;br/&gt;
  OK&lt;br/&gt;
  name	string&lt;br/&gt;
  age	int&lt;br/&gt;
  part_dt	string&lt;br/&gt;
&lt;br/&gt;
  Detailed Partition Information	Partition(values:&lt;span class=&quot;error&quot;&gt;&amp;#91;20120331T000000Z&amp;#93;&lt;/span&gt;, dbName:travis_test, tableName:foo_test, createTime:1334256131, lastAccessTime:0, sd:StorageDescriptor(cols:&lt;span class=&quot;error&quot;&gt;&amp;#91;FieldSchema(name:name, type:string, comment:null), FieldSchema(name:age, type:int, comment:null), FieldSchema(name:part_dt, type:string, comment:null)&amp;#93;&lt;/span&gt;, location:hdfs://foo.com/foo/2012/03/31/00, inputFormat:org.apache.hadoop.mapred.TextInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:{serialization.format=1}
&lt;p&gt;), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), parameters:&lt;/p&gt;
{transient_lastDdlTime=1334256131}
&lt;p&gt;)&lt;/p&gt;

&lt;p&gt;  CURRENT BEHAVIOR WITH &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2941&quot; title=&quot;Hive should expand nested structs when setting the table schema from thrift structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2941&quot;&gt;&lt;del&gt;HIVE-2941&lt;/del&gt;&lt;/a&gt; PATCHED IN&lt;/p&gt;

&lt;p&gt;  Now let&apos;s examine what happens when creating a table when the serde reports the schema. Notice the following:&lt;/p&gt;

&lt;p&gt;  	The table storage descriptor contains an empty list of columns. However, the table schema is available from the serde reflecting on the serialization class.&lt;br/&gt;
  	The partition storage descriptor does contain a single &quot;part_dt&quot; column that was copied from the table partition keys. The actual data columns are not present.&lt;/p&gt;

&lt;p&gt;  hive&amp;gt; create external table travis_test.person_test partitioned by (part_dt string) row format serde &quot;com.twitter.elephantbird.hive.serde.ThriftSerDe&quot; with serdeproperties (&quot;serialization.class&quot;=&quot;com.twitter.elephantbird.examples.thrift.Person&quot;) stored as inputformat &quot;com.twitter.elephantbird.mapred.input.HiveMultiInputFormat&quot; outputformat &quot;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&quot;;&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.08 seconds&lt;br/&gt;
  hive&amp;gt; describe extended person_test;&lt;br/&gt;
  OK&lt;br/&gt;
  name	struct&amp;lt;first_name:string,last_name:string&amp;gt;	from deserializer&lt;br/&gt;
  id	int	from deserializer&lt;br/&gt;
  email	string	from deserializer&lt;br/&gt;
  phones	array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:int&amp;gt;&amp;gt;&amp;gt;	from deserializer&lt;br/&gt;
  part_dt	string&lt;/p&gt;

&lt;p&gt;  Detailed Table Information	Table(tableName:person_test, dbName:travis_test, owner:travis, createTime:1334256942, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[], location:hdfs://foo.com/warehouse/travis_test.db/person_test, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:&lt;/p&gt;
{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), partitionKeys:&lt;span class=&quot;error&quot;&gt;&amp;#91;FieldSchema(name:part_dt, type:string, comment:null)&amp;#93;&lt;/span&gt;, parameters:{EXTERNAL=TRUE, transient_lastDdlTime=1334256942}, viewOriginalText:null, viewExpandedText:null, tableType:EXTERNAL_TABLE)&lt;br/&gt;
  Time taken: 0.147 seconds&lt;br/&gt;
  hive&amp;gt; alter table person_test add partition (part_dt = &apos;20120331T000000Z&apos;) location &apos;hdfs://foo.com/foo/2012/03/31/00&apos;;&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.149 seconds&lt;br/&gt;
  hive&amp;gt; describe extended person_test partition (part_dt = &apos;20120331T000000Z&apos;);&lt;br/&gt;
  OK&lt;br/&gt;
  part_dt	string&lt;br/&gt;
&lt;br/&gt;
  Detailed Partition Information	Partition(values:&lt;span class=&quot;error&quot;&gt;&amp;#91;20120331T000000Z&amp;#93;&lt;/span&gt;, dbName:travis_test, tableName:person_test, createTime:1334257029, lastAccessTime:0, sd:StorageDescriptor(cols:&lt;span class=&quot;error&quot;&gt;&amp;#91;FieldSchema(name:part_dt, type:string, comment:null)&amp;#93;&lt;/span&gt;, location:hdfs://foo.com/foo/2012/03/31/00, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format=1}
&lt;p&gt;), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), parameters:&lt;/p&gt;
{transient_lastDdlTime=1334257029}
&lt;p&gt;)&lt;br/&gt;
  Time taken: 0.106 seconds&lt;br/&gt;
  hive&amp;gt;&lt;/p&gt;

&lt;p&gt;  PROPOSED BEHAVIOR&lt;/p&gt;

&lt;p&gt;  I believe the correct thing to do is copy the full table schema (serde-reported columns + partition keys) into the partition storage descriptor. Notice the following:&lt;/p&gt;

&lt;p&gt;  	Table storage descriptor does not contain any columns, because they are reported by the serde.&lt;br/&gt;
  	Partition storage descriptor now contains both the serde-reported schema, and full table schema.&lt;/p&gt;

&lt;p&gt;  hive&amp;gt; create external table travis_test.person_test partitioned by (part_dt string) row format serde &quot;com.twitter.elephantbird.hive.serde.ThriftSerDe&quot; with serdeproperties (&quot;serialization.class&quot;=&quot;com.twitter.elephantbird.examples.thrift.Person&quot;) stored as inputformat &quot;com.twitter.elephantbird.mapred.input.HiveMultiInputFormat&quot; outputformat &quot;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&quot;;&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.076 seconds&lt;br/&gt;
  hive&amp;gt; describe extended person_test;                                                                                                                                     OK                                                                                                                                                                       name    struct&amp;lt;first_name:string,last_name:string&amp;gt;      from deserializer&lt;br/&gt;
  id	int	from deserializer&lt;br/&gt;
  email	string	from deserializer&lt;br/&gt;
  phones	array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:int&amp;gt;&amp;gt;&amp;gt;	from deserializer&lt;br/&gt;
  part_dt	string&lt;/p&gt;

&lt;p&gt;  Detailed Table Information	Table(tableName:person_test, dbName:travis_test, owner:travis, createTime:1334257489, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[], location:hdfs://foo.com/warehouse/travis_test.db/person_test, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:&lt;/p&gt;
{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format=1}
&lt;p&gt;), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), partitionKeys:&lt;span class=&quot;error&quot;&gt;&amp;#91;FieldSchema(name:part_dt, type:string, comment:null)&amp;#93;&lt;/span&gt;, parameters:&lt;/p&gt;
{EXTERNAL=TRUE, transient_lastDdlTime=1334257489}
&lt;p&gt;, viewOriginalText:null, viewExpandedText:null, tableType:EXTERNAL_TABLE)&lt;br/&gt;
  Time taken: 0.155 seconds&lt;br/&gt;
  hive&amp;gt; alter table person_test add partition (part_dt = &apos;20120331T000000Z&apos;) location &apos;hdfs://foo.com/foo/2012/03/31/00&apos;;&lt;br/&gt;
  OK                                                                                                                                                                       Time taken: 0.296 seconds&lt;br/&gt;
  hive&amp;gt; describe extended person_test partition (part_dt = &apos;20120331T000000Z&apos;);                                                                                            OK                                                                                                                                                                       name    struct&amp;lt;first_name:string,last_name:string&amp;gt;      from deserializer&lt;br/&gt;
  id	int	from deserializer&lt;br/&gt;
  email	string	from deserializer&lt;br/&gt;
  phones	array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:int&amp;gt;&amp;gt;&amp;gt;	from deserializer&lt;br/&gt;
  part_dt	string&lt;/p&gt;

&lt;p&gt;  Detailed Partition Information	Partition(values:&lt;span class=&quot;error&quot;&gt;&amp;#91;20120331T000000Z&amp;#93;&lt;/span&gt;, dbName:travis_test, tableName:person_test, createTime:1334257504, lastAccessTime:0, sd:StorageDescriptor(cols:&lt;span class=&quot;error&quot;&gt;&amp;#91;FieldSchema(name:name, type:struct&amp;lt;first_name:string,last_name:string&amp;gt;, comment:from deserializer), FieldSchema(name:id, type:int, comment:from deserializer), FieldSchema(name:email, type:string, comment:from deserializer), FieldSchema(name:phones, type:array&amp;lt;struct&amp;lt;number:string,type:struct&amp;lt;value:int&amp;gt;&amp;gt;&amp;gt;, comment:from deserializer), FieldSchema(name:part_dt, type:string, comment:null)&amp;#93;&lt;/span&gt;, location:hdfs://foo.com/foo/2012/03/31/00, inputFormat:com.twitter.elephantbird.mapred.input.HiveMultiInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:com.twitter.elephantbird.hive.serde.ThriftSerDe, parameters:&lt;/p&gt;
{serialization.class=com.twitter.elephantbird.examples.thrift.Person, serialization.format
 =1}
&lt;p&gt;), bucketCols:[], sortCols:[], parameters:{}, primaryRegionName:, secondaryRegions:[]), parameters:&lt;/p&gt;
{transient_lastDdlTime=1334257504}
&lt;p&gt;)&lt;br/&gt;
  Time taken: 0.133 seconds&lt;br/&gt;
  hive&amp;gt;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  empty&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2769&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2769&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6297/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6297/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13260064" author="traviscrawford" created="Mon, 23 Apr 2012 23:02:43 +0000"  >&lt;p&gt;Would it be possible for someone to take a look at this patch?&lt;/p&gt;</comment>
                            <comment id="13291338" author="traviscrawford" created="Thu, 7 Jun 2012 21:43:18 +0000"  >&lt;p&gt;Updated the branch against trunk and reran the tests.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://travis.ci.cloudbees.com/job/HIVE-2950_partition_full_schema/1/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://travis.ci.cloudbees.com/job/HIVE-2950_partition_full_schema/1/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There were some test failures in CI so I ran these locally and they passed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test -Dtestcase=TestCliDriver -Dqfile=create_view_partitioned.q
ant clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test -Dtestcase=TestNegativeCliDriver -Dqfile=create_or_replace_view1.q
ant clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test -Dtestcase=TestNegativeCliDriver -Dqfile=create_or_replace_view2.q
ant clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test -Dtestcase=TestHiveServerSessions
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13293218" author="ashutoshc" created="Tue, 12 Jun 2012 00:16:39 +0000"  >&lt;p&gt;@Travis,&lt;br/&gt;
Can you upload the latest patch at jira. Unfortunately, Phabricator doesn&apos;t let you download a patch file.&lt;/p&gt;</comment>
                            <comment id="13293227" author="traviscrawford" created="Tue, 12 Jun 2012 00:33:54 +0000"  >&lt;p&gt;The patch is actually the same - the one attached to Jira is up-to-date.&lt;/p&gt;</comment>
                            <comment id="13404357" author="traviscrawford" created="Sat, 30 Jun 2012 01:23:04 +0000"  >&lt;p&gt;Status update:&lt;/p&gt;

&lt;p&gt;Looking into this a bit more, I think we can avoid storing the cols in the metastore if we simply allow partitions to report cols from the serde. Something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;FieldSchema&amp;gt; getCols() {
-    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; tPartition.getSd().getCols();
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (SerDeUtils.shouldGetColsFromSerDe(table.getSerializationLib())) {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; table.getCols();
+    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; tPartition.getSd().getCols();
+    }
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For thrift/protobuf this would work perfectly, since you want all records to have the newest schema, and let thrift/protobuf deal with figuring out missing values, unknown fields, etc.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13405317" author="ashutoshc" created="Mon, 2 Jul 2012 20:45:45 +0000"  >&lt;p&gt;Travis,&lt;br/&gt;
I liked your first patch better then this one. Semantics is that when you add partition, you store &lt;b&gt;current&lt;/b&gt; table&apos;s schema in Partition&apos;s storage descriptor (which is what your first patch is doing). Your second approach will return the table schema for Partition at the read time, by which time table&apos;s schema might have changed. I will test and commit your first patch. &lt;/p&gt;</comment>
                            <comment id="13405332" author="traviscrawford" created="Mon, 2 Jul 2012 21:25:47 +0000"  >&lt;p&gt;In some cases (storing thrift/protobufs) reporting the read-time schema is preferable to the write-time schema. For example, let&apos;s say you&apos;re storing thrift structs and add a new optional field with default value. In that case all your old records would be automatically upgraded if using the read-time field reporting.&lt;/p&gt;

&lt;p&gt;I played around with this over the weekend and think it could look something like this. If the partition storage descriptor has a serde that you should get the cols from, then do that. Otherwise, use the fields stored in the metastore. Since this is per-partition you could have some partitions using serde-reported fields, and other partitions using hard-coded ones.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;FieldSchema&amp;gt; getCols() {
-    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; tPartition.getSd().getCols();
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;FieldSchema&amp;gt; getCols() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; HiveException {
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (SerDeUtils.shouldGetColsFromSerDe(
+        tPartition.getSd().getSerdeInfo().getSerializationLib())) {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Hive.getFieldsFromDeserializer(table.getTableName(), getDeserializer());
+    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; tPartition.getSd().getCols();
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thoughts? I still think the original patch (copy table columns into partition storage descriptor at write time) is an improvement, but this dynamic approach would be awesome. Some of our schemas are pretty large so this would save a lot of metastore space &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13416365" author="traviscrawford" created="Tue, 17 Jul 2012 17:08:45 +0000"  >&lt;p&gt;After looking at this further, this change is not actually needed.&lt;/p&gt;

&lt;p&gt;The confusion arises from Hive having two sets of classes to represent the main objects (tables, partitions, ...). If you use metastore.api classes the fields are not available unless stored in the metastore. However, if using the ql.metadata classes, Partition copies the table fields to the partition if they&apos;re empty. This works great for thrift-based tables.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12550432">HIVE-2941</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12560824">HIVE-3144</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12596524">HCATALOG-443</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12522472" name="ASF.LICENSE.NOT.GRANTED--HIVE-2950.D2769.1.patch" size="1141" author="phabricator@reviews.facebook.net" created="Thu, 12 Apr 2012 19:19:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Apr 2012 19:19:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2951] Hive map-join throws error !!</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2951</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I get this below message. What does this mean ? What is really leading for this issue ? what should i do to resolve this ? i use joins in the query as if ( A left outer join B left outer join C lefit out join D ) . whereas A is the Big table.&lt;/p&gt;

&lt;p&gt;FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapredLocalTask &lt;br/&gt;
ATTEMPT: Execute BackupTask: org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;


&lt;p&gt;I set manual properties :&lt;br/&gt;
----------------------------&lt;br/&gt;
set hive.mapjoin.localtask.max.memory.usage = 0.9; &lt;br/&gt;
set hive.auto.convert.join = true; &lt;br/&gt;
set hive.smalltable.filesize = 30000000; &lt;/p&gt;

&lt;p&gt;the default configuration is  :&lt;br/&gt;
----------------------------------&lt;br/&gt;
mapred.child.java.opts :        -Xmx2400m -XX:+UseConcMarkSweepGC -XX: +UseParNewGC -XX:+CMSParallelRemarkEnabled -X:-UseAdaptiveSizePolicy - XX:+DisableExplicitGC &lt;/p&gt;</description>
                <environment></environment>
        <key id="12550799">HIVE-2951</key>
            <summary>Hive map-join throws error !!</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nagon">nago n</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Apr 2012 08:39:38 +0000</created>
                <updated>Mon, 16 Apr 2012 19:47:03 +0000</updated>
                            <resolved>Mon, 16 Apr 2012 19:47:03 +0000</resolved>
                                    <version>0.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13254976" author="cwsteinbach" created="Mon, 16 Apr 2012 19:47:03 +0000"  >&lt;p&gt;Questions like this should be directed to the user mailing list (user@hive.apache.org).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Apr 2012 19:47:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124247</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2952] escape1.q and escape2.q failing in trunk</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2952</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;escape1.q and escape2.q have started failing in at least the Mac OS, but they succeed in Linux&lt;/p&gt;

&lt;p&gt;The last time I saw them succeed in Mac was on 4/11 night&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OSX Lion&lt;/p&gt;</environment>
        <key id="12550888">HIVE-2952</key>
            <summary>escape1.q and escape2.q failing in trunk</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Apr 2012 22:13:14 +0000</created>
                <updated>Fri, 29 Jun 2012 16:58:04 +0000</updated>
                            <resolved>Fri, 29 Jun 2012 16:58:04 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13253803" author="kevinwilfong" created="Fri, 13 Apr 2012 22:21:28 +0000"  >&lt;p&gt;I must have been mistaken about the date, I reverted to a revision before 4/11 and I still see the tests failing.  Either that or there is something persistent causing the issue.&lt;/p&gt;</comment>
                            <comment id="13253904" author="kevinwilfong" created="Sat, 14 Apr 2012 00:17:21 +0000"  >&lt;p&gt;For me, it fails while trying to process the partition part=a with the exception&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; org.apache.hadoop.hive.ql.metadata.HiveException: Unable to rename output from: pfile:/Users/kevinwilfong/Documents/old_hive/build/ql/scratchdir/hive_2012-04-13_17-01-55_592_712696764807580029/_task_tmp.-ext-10002/part=a/_tmp.000000_0 to: pfile:/Users/kevinwilfong/Documents/old_hive/build/ql/scratchdir/hive_2012-04-13_17-01-55_592_712696764807580029/_tmp.-ext-10002/part=a/000000_0&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.FileSinkOperator$FSPaths.commit(FileSinkOperator.java:202)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.FileSinkOperator$FSPaths.access$300(FileSinkOperator.java:99)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.FileSinkOperator.closeOp(FileSinkOperator.java:720)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:557)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:193)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:358)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:307)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:176)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Caused by: java.io.FileNotFoundException: File &lt;a href=&quot;file:/Users/kevinwilfong/Documents/old_hive/build/ql/scratchdir/hive_2012-04-13_17-01-55_592_712696764807580029/_task_tmp.-ext-10002/part=a/_tmp.000000_0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/Users/kevinwilfong/Documents/old_hive/build/ql/scratchdir/hive_2012-04-13_17-01-55_592_712696764807580029/_task_tmp.-ext-10002/part=a/_tmp.000000_0&lt;/a&gt; does not exist.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:361)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:192)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:142)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.RawLocalFileSystem.rename(RawLocalFileSystem.java:253)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.ChecksumFileSystem.rename(ChecksumFileSystem.java:406)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.FilterFileSystem.rename(FilterFileSystem.java:138)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.ProxyFileSystem.rename(ProxyFileSystem.java:159)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.fs.FilterFileSystem.rename(FilterFileSystem.java:138)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.FileSinkOperator$FSPaths.commit(FileSinkOperator.java:196)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	... 11 more&lt;/p&gt;

&lt;p&gt;This is the first lower case letter that is processed, and all capital letters are processed.&lt;/p&gt;

&lt;p&gt;FWIW I noticed that Mac is not case sensitive for directory names, but Linux is, so this may be a clue&lt;/p&gt;</comment>
                            <comment id="13283868" author="appodictic" created="Sat, 26 May 2012 01:39:01 +0000"  >&lt;p&gt;Is this the only test failing. It may be worth fixing if this is the only show stopper on mac but if there is others it might be something WONT FIX since hive expects a case sensitive file system.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 May 2012 01:39:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235752</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2953] ReflectionStructObjectInspector support for getters and setters</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2953</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be great if ReflectionStructObjectInspector could also support using getters, not just fields.&lt;/p&gt;

&lt;p&gt;Additionally, it would be also nice to be able to limit it to only use public fields/getters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12551031">HIVE-2953</key>
            <summary>ReflectionStructObjectInspector support for getters and setters</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jakajancar">Jaka Jancar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Apr 2012 09:31:03 +0000</created>
                <updated>Tue, 17 Apr 2012 12:48:18 +0000</updated>
                                            <version>0.8.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13255515" author="jakajancar" created="Tue, 17 Apr 2012 12:48:18 +0000"  >&lt;p&gt;I might have a go at this myself. Does anyone see any problems with doing this?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lm7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124249</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2954] The statement fails when a column part of an ORDER BY is not specified in the SELECT.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2954</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Given the following table:&lt;/p&gt;

&lt;p&gt;CREATE TABLE `DBCSTB32` (`aaa` DOUBLE,`bbb` STRING,`ccc` STRING,`ddd` DOUBLE) ROW FORMAT&lt;br/&gt;
DELIMITED FIELDS TERMINATED BY &apos;\001&apos; STORED AS TEXTFILE;&lt;/p&gt;

&lt;p&gt;The following statement fails:&lt;/p&gt;

&lt;p&gt; select TXT_1`aaa`, TXT_1.`bbb` &lt;br/&gt;
   from `DBCSTB32` TXT_1 &lt;br/&gt;
  order by TXT_1.`bbb` asc, TXT_1.`aaa` asc, TXT_1.`ccc` asc&lt;/p&gt;

&lt;p&gt;ERROR: java.sql.SQLException: Query returned non-zero code: 10, cause: FAILED: Error in&lt;br/&gt;
       semantic analysis: Line 1:104 Invalid column reference &apos;`ccc`&apos;&lt;/p&gt;

&lt;p&gt;Adding `ccc` to the selected list of columns fixes the problem.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12551070">HIVE-2954</key>
            <summary>The statement fails when a column part of an ORDER BY is not specified in the SELECT.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="mcazzari">Mauro Cazzari</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Apr 2012 14:31:11 +0000</created>
                <updated>Tue, 24 Jun 2014 18:35:47 +0000</updated>
                                            <version>0.8.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13257289" author="phabricator@reviews.facebook.net" created="Thu, 19 Apr 2012 06:17:40 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2954&quot; title=&quot;The statement fails when a column part of an ORDER BY is not specified in the SELECT.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2954&quot;&gt;HIVE-2954&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; The statement fails when a column part of an ORDER BY is not specified in the SELECT.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1110 The statement fails when a column part of an ORDER BY is not specified in the SELECT&lt;/p&gt;

&lt;p&gt;  Given the following table:&lt;/p&gt;

&lt;p&gt;  CREATE TABLE `DBCSTB32` (`aaa` DOUBLE,`bbb` STRING,`ccc` STRING,`ddd` DOUBLE) ROW FORMAT&lt;br/&gt;
  DELIMITED FIELDS TERMINATED BY &apos;\001&apos; STORED AS TEXTFILE;&lt;/p&gt;

&lt;p&gt;  The following statement fails:&lt;/p&gt;

&lt;p&gt;   select TXT_1`aaa`, TXT_1.`bbb`&lt;br/&gt;
     from `DBCSTB32` TXT_1&lt;br/&gt;
    order by TXT_1.`bbb` asc, TXT_1.`aaa` asc, TXT_1.`ccc` asc&lt;/p&gt;

&lt;p&gt;  ERROR: java.sql.SQLException: Query returned non-zero code: 10, cause: FAILED: Error in&lt;br/&gt;
         semantic analysis: Line 1:104 Invalid column reference &apos;`ccc`&apos;&lt;/p&gt;

&lt;p&gt;  Adding `ccc` to the selected list of columns fixes the problem.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2889&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2889&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnInfo.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/orderby_not_selected.q&lt;br/&gt;
  ql/src/test/results/clientpositive/orderby_not_selected.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6597/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6597/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13260104" author="phabricator@reviews.facebook.net" created="Tue, 24 Apr 2012 00:10:30 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2954&quot; title=&quot;The statement fails when a column part of an ORDER BY is not specified in the SELECT.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2954&quot;&gt;HIVE-2954&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; The statement fails when a column part of an ORDER BY is not specified in the SELECT.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  1. Moved clustern3.q, clustern4.q to clientpositive from clientnegative&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2889&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2889&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnInfo.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/RowResolver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/clustern3.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/clustern3.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/clustern4.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/clustern4.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/orderby_not_selected.q&lt;br/&gt;
  ql/src/test/results/clientnegative/clustern3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/clustern4.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/clustern3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/clustern4.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/orderby_not_selected.q.out&lt;/p&gt;</comment>
                            <comment id="13626238" author="phabricator@reviews.facebook.net" created="Tue, 9 Apr 2013 05:14:14 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2954&quot; title=&quot;The statement fails when a column part of an ORDER BY is not specified in the SELECT.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2954&quot;&gt;HIVE-2954&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; The statement fails when a column part of an ORDER BY is not specified in the SELECT.&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk &amp;amp; fixed some fails&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2889&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2889&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2889?vs=9381&amp;amp;id=31461#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2889?vs=9381&amp;amp;id=31461#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnInfo.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/orderby_not_selected.q&lt;br/&gt;
  ql/src/test/results/clientpositive/orderby_not_selected.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="14041776" author="navis" created="Tue, 24 Jun 2014 06:46:53 +0000"  >&lt;p&gt;Running preliminary test&lt;/p&gt;</comment>
                            <comment id="14042490" author="hiveqa" created="Tue, 24 Jun 2014 18:35:47 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652148/HIVE-2954.4.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652148/HIVE-2954.4.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 34 failed/errored test(s), 5655 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join0
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join15
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cluster
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ctas
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_decimal_6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_global_limit
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join0
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_limit_pushdown
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapreduce5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapreduce6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_clusterby
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_print_header
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_regex_col
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_case_column_pruning
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_sentences
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udtf_json_tuple
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udtf_parse_url_tuple
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_between_in
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorization_div0
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorization_limit
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorization_part_project
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_timestamp_funcs
org.apache.hadoop.hive.cli.TestCompareCliDriver.testCompareCliDriver_vectorized_math_funcs
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver_udf_row_sequence
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mrr
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union3
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_truncate_column_buckets
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/578/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/578/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/578/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/578/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-578/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-578/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 34 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652148&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12659018">HIVE-4904</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12647714">HIVE-4564</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12599240">HIVE-3269</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12523305" name="ASF.LICENSE.NOT.GRANTED--HIVE-2954.D2889.1.patch" size="15107" author="phabricator@reviews.facebook.net" created="Thu, 19 Apr 2012 06:17:41 +0000"/>
                            <attachment id="12523896" name="ASF.LICENSE.NOT.GRANTED--HIVE-2954.D2889.2.patch" size="23942" author="phabricator@reviews.facebook.net" created="Tue, 24 Apr 2012 00:10:31 +0000"/>
                            <attachment id="12652148" name="HIVE-2954.4.patch.txt" size="15489" author="navis" created="Tue, 24 Jun 2014 06:46:28 +0000"/>
                            <attachment id="12577709" name="HIVE-2954.D2889.3.patch" size="18058" author="phabricator@reviews.facebook.net" created="Tue, 9 Apr 2013 05:14:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Apr 2012 06:17:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235934</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2955] Queries consists of metadata-only-query returns always empty value</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2955</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For partitioned table, simple query on partition column returns always null or empty value, for example,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table emppart(empno &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, ename string) partitioned by (deptno &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
.. load partitions..

select distinct deptno from emppart; &lt;span class=&quot;code-comment&quot;&gt;// empty
&lt;/span&gt;select min(deptno), max(deptno) from emppart;  &lt;span class=&quot;code-comment&quot;&gt;// NULL and NULL&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12551169">HIVE-2955</key>
            <summary>Queries consists of metadata-only-query returns always empty value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 05:31:41 +0000</created>
                <updated>Sun, 5 Jan 2014 13:01:32 +0000</updated>
                            <resolved>Fri, 22 Jun 2012 04:27:09 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13255333" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 05:49:26 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2955&quot; title=&quot;Queries consists of metadata-only-query returns always empty value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2955&quot;&gt;&lt;del&gt;HIVE-2955&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Queries consists of metadata-only-query returns always empty value&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1108 Queries consists of metadata-only-query returns always empty value&lt;/p&gt;

&lt;p&gt;  For partitioned table, simple query on partition column returns always null or empty value, for example,&lt;/p&gt;

&lt;p&gt;  create table emppart(empno int, ename string) partitioned by (deptno int);&lt;br/&gt;
  .. load partitions..&lt;/p&gt;

&lt;p&gt;  select distinct deptno from emppart; // empty&lt;br/&gt;
  select min(deptno), max(deptno) from emppart;  // NULL and NULL&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2817&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2817&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MetadataOnlyOptimizer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/metadataonly1.q&lt;br/&gt;
  ql/src/test/results/clientpositive/metadataonly1.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6411/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6411/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13256103" author="navis" created="Wed, 18 Apr 2012 00:28:25 +0000"  >&lt;p&gt;passed all tests&lt;/p&gt;</comment>
                            <comment id="13293990" author="namit" created="Tue, 12 Jun 2012 23:09:08 +0000"  >&lt;p&gt;minor comments on phabricator.&lt;/p&gt;

&lt;p&gt;The diff is not applying cleanly.&lt;/p&gt;</comment>
                            <comment id="13398903" author="namit" created="Thu, 21 Jun 2012 21:50:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Running tests&lt;/p&gt;</comment>
                            <comment id="13399107" author="namit" created="Fri, 22 Jun 2012 04:27:09 +0000"  >&lt;p&gt;Committed. Thanks Navis&lt;/p&gt;</comment>
                            <comment id="13399537" author="hudson" created="Fri, 22 Jun 2012 19:31:40 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1504 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1504/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1504/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2955&quot; title=&quot;Queries consists of metadata-only-query returns always empty value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2955&quot;&gt;&lt;del&gt;HIVE-2955&lt;/del&gt;&lt;/a&gt; Queries consists of metadata-only-query returns always empty value&lt;br/&gt;
(Navis via namit) (Revision 1352771)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1352771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1352771&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MetadataOnlyOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/metadataonly1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/metadataonly1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399566" author="cwsteinbach" created="Fri, 22 Jun 2012 20:20:41 +0000"  >&lt;p&gt;@Namit: Please remember to set the fix version field when you mark a ticket as resolved. Thanks.&lt;/p&gt;</comment>
                            <comment id="13548169" author="hudson" created="Wed, 9 Jan 2013 10:24:40 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2955&quot; title=&quot;Queries consists of metadata-only-query returns always empty value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2955&quot;&gt;&lt;del&gt;HIVE-2955&lt;/del&gt;&lt;/a&gt; Queries consists of metadata-only-query returns always empty value&lt;br/&gt;
(Navis via namit) (Revision 1352771)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1352771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1352771&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MetadataOnlyOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/metadataonly1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/metadataonly1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550096" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:22 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12643660">HIVE-4386</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12559929">HIVE-3108</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12643660">HIVE-4386</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12522909" name="ASF.LICENSE.NOT.GRANTED--HIVE-2955.D2817.1.patch" size="8271" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 05:49:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Apr 2012 05:49:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2956] [hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2956</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For example, &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; select distinct deptno, sum(deptno) from emp;
FAILED: Hive Internal Error: java.lang.NullPointerException(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
java.lang.NullPointerException
	at org.apache.hadoop.hive.ql.plan.ExprNodeGenericFuncDesc.newInstance(ExprNodeGenericFuncDesc.java:214)
	at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.getXpathOrFuncExprNodeDesc(TypeCheckProcFactory.java:767)
	at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.process(TypeCheckProcFactory.java:888)
	at org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:89)
	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.dispatch(DefaultGraphWalker.java:88)
	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.walk(DefaultGraphWalker.java:125)
	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.startWalking(DefaultGraphWalker.java:102)
	at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory.genExprNode(TypeCheckProcFactory.java:165)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:7755)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:7713)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genGroupByPlanMapGroupByOperator(SemanticAnalyzer.java:2793)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genGroupByPlanMapAggr1MR(SemanticAnalyzer.java:3651)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genBodyPlan(SemanticAnalyzer.java:6125)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:6762)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:7531)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:250)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Trivial.. but people always reports this confused by esoteric custom function names.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12551171">HIVE-2956</key>
            <summary>[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 06:03:22 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:34 +0000</updated>
                            <resolved>Wed, 9 May 2012 16:32:23 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13255349" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 06:07:15 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1109 Provide error message when using UDAF in the place of UDF instead of throwing NPE&lt;/p&gt;

&lt;p&gt;  For example,&lt;/p&gt;

&lt;p&gt;  hive&amp;gt; select distinct deptno, sum(deptno) from emp;&lt;br/&gt;
  FAILED: Hive Internal Error: java.lang.NullPointerException(null)&lt;br/&gt;
  java.lang.NullPointerException&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.plan.ExprNodeGenericFuncDesc.newInstance(ExprNodeGenericFuncDesc.java:214)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.getXpathOrFuncExprNodeDesc(TypeCheckProcFactory.java:767)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.process(TypeCheckProcFactory.java:888)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:89)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.dispatch(DefaultGraphWalker.java:88)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.walk(DefaultGraphWalker.java:125)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.startWalking(DefaultGraphWalker.java:102)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory.genExprNode(TypeCheckProcFactory.java:165)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:7755)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:7713)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genGroupByPlanMapGroupByOperator(SemanticAnalyzer.java:2793)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genGroupByPlanMapAggr1MR(SemanticAnalyzer.java:3651)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genBodyPlan(SemanticAnalyzer.java:6125)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:6762)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:7531)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:250)&lt;/p&gt;

&lt;p&gt;  Trivial.. but people always reports this confused by esoteric custom function names.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6417/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6417/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13256104" author="navis" created="Wed, 18 Apr 2012 00:29:00 +0000"  >&lt;p&gt;Passed all tests&lt;/p&gt;</comment>
                            <comment id="13268577" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 17:52:46 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;/p&gt;

&lt;p&gt;  Could you add a test case for this?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java:134 This message seems wrong/incomplete.  Maybe I&apos;m missing something, but I didn&apos;t think they were supported in group by clauses.  They are certainly supported in select clauses though, amongst others.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269316" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 00:12:48 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java:134 I wrote &apos;with group by clause&apos; not &apos;in group by clause&apos; but also realized aggregation can be used without group by clause. I&apos;ll change the message.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269319" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 00:56:46 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  1. Fixed error message&lt;br/&gt;
  2. Added test cases (udaf_invalid_place.q, udtf_invalid_place.q)&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udaf_invalid_place.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udtf_invalid_place.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udaf_invalid_place.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_invalid_place.q.out&lt;/p&gt;</comment>
                            <comment id="13269818" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 17:52:45 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;/p&gt;

&lt;p&gt;  I&apos;m sorry, you&apos;re right, I misread the error message, partly because I misunderstood the problem your patch was trying to solve.&lt;/p&gt;

&lt;p&gt;  I would argue that Hive should support this syntax, if not now, then eventually.  It is supported by MySQL for instance.&lt;/p&gt;

&lt;p&gt;  However, until this is supported, a proper error message is preferable to an NPE.  The problem appears to be a combination of applying distinct and a UDAF to the same column.  It seems to me that a better error message would be something that indicates that.  It is not the location of sum(key) that is causing the problem, but the fact that distinct key is also in the select clause.  If you could also add a &quot;yet&quot; in there to suggest that this will be supported in the future, that would also be good.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13270132" author="phabricator@reviews.facebook.net" created="Tue, 8 May 2012 01:59:49 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;/p&gt;

&lt;p&gt;  Didn&apos;t know that the SQL is valid. I&apos;ll append &apos;not yet&apos; to the message.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13270141" author="phabricator@reviews.facebook.net" created="Tue, 8 May 2012 02:25:47 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  1. Fixed error message&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udaf_invalid_place.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udtf_invalid_place.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udaf_invalid_place.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_invalid_place.q.out&lt;/p&gt;</comment>
                            <comment id="13270601" author="phabricator@reviews.facebook.net" created="Tue, 8 May 2012 16:49:45 +0000"  >&lt;p&gt;kevinwilfong has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Running tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2823&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1109&lt;/p&gt;</comment>
                            <comment id="13271556" author="kevinwilfong" created="Wed, 9 May 2012 16:32:23 +0000"  >&lt;p&gt;Committed, thanks Navis.&lt;/p&gt;</comment>
                            <comment id="13272032" author="hudson" created="Thu, 10 May 2012 02:00:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1421 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1421/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1421/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE (navis via kevinwilfong) (Revision 1336284)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1336284&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1336284&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udaf_invalid_place.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_invalid_place.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udaf_invalid_place.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_invalid_place.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548167" author="hudson" created="Wed, 9 Jan 2013 10:24:40 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2956&quot; title=&quot;[hive] Provide error message when using UDAF in the place of UDF instead of throwing NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2956&quot;&gt;&lt;del&gt;HIVE-2956&lt;/del&gt;&lt;/a&gt; Provide error message when using UDAF in the place of UDF instead of throwing NPE (navis via kevinwilfong) (Revision 1336284)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1336284&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1336284&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udaf_invalid_place.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_invalid_place.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udaf_invalid_place.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_invalid_place.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550148" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:34 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522912" name="ASF.LICENSE.NOT.GRANTED--HIVE-2956.D2823.1.patch" size="1583" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 06:07:16 +0000"/>
                            <attachment id="12525793" name="ASF.LICENSE.NOT.GRANTED--HIVE-2956.D2823.2.patch" size="2942" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 00:56:47 +0000"/>
                            <attachment id="12525942" name="ASF.LICENSE.NOT.GRANTED--HIVE-2956.D2823.3.patch" size="3030" author="phabricator@reviews.facebook.net" created="Tue, 8 May 2012 02:25:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Apr 2012 06:07:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236035</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ukf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2957] Hive JDBC doesn&apos;t support TIMESTAMP column</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2957</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Steps to replicate:&lt;br/&gt;
1. Create a table with at least one column of type TIMESTAMP&lt;br/&gt;
2. Do a DatabaseMetaData.getColumns () such that this TIMESTAMP column is part of the resultset.&lt;br/&gt;
3. When you iterate over the TIMESTAMP column it would fail, throwing the below exception:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.sql.SQLException: Unrecognized column type: timestamp&lt;br/&gt;
	at org.apache.hadoop.hive.jdbc.Utils.hiveTypeToSqlType(Utils.java:56)&lt;br/&gt;
	at org.apache.hadoop.hive.jdbc.JdbcColumn.getSqlType(JdbcColumn.java:62)&lt;br/&gt;
	at org.apache.hadoop.hive.jdbc.HiveDatabaseMetaData$2.next(HiveDatabaseMetaData.java:244)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12551228">HIVE-2957</key>
            <summary>Hive JDBC doesn&apos;t support TIMESTAMP column</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rding">Richard Ding</assignee>
                                    <reporter username="bharathganesh">Bharath Ganesh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 14:25:07 +0000</created>
                <updated>Sun, 6 Sep 2015 15:22:49 +0000</updated>
                            <resolved>Thu, 13 Sep 2012 17:51:11 +0000</resolved>
                                    <version>0.8.1</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13256493" author="bharathganesh" created="Wed, 18 Apr 2012 12:44:03 +0000"  >&lt;p&gt;Added support for TIMESTAMP column on the JDBC driver. I am not 100% sure of the precision and scale. Please do verify. I tested the sanity and I am able to retrieve a column upto nano-second precision.&lt;/p&gt;</comment>
                            <comment id="13256711" author="ashutoshc" created="Wed, 18 Apr 2012 17:15:44 +0000"  >&lt;p&gt;Patch needs a test case.&lt;/p&gt;</comment>
                            <comment id="13258522" author="ashutoshc" created="Fri, 20 Apr 2012 19:42:33 +0000"  >&lt;p&gt;Unlinking from 0.9&lt;/p&gt;</comment>
                            <comment id="13259036" author="tamtam180" created="Sun, 22 Apr 2012 08:12:23 +0000"  >&lt;p&gt;I updated the patch.&lt;br/&gt;
I added testcase and fixed the some issues which I found on running the test.&lt;/p&gt;</comment>
                            <comment id="13259040" author="tamtam180" created="Sun, 22 Apr 2012 08:20:08 +0000"  >&lt;p&gt;Hi Bharath,&lt;br/&gt;
As I wrote in above comment, I updated your patch and fixed some issue.&lt;br/&gt;
If you don&apos;t mind, could you review my patch?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13259049" author="bharathganesh" created="Sun, 22 Apr 2012 08:54:23 +0000"  >&lt;p&gt;Looks fine to me. Thanks.&lt;/p&gt;</comment>
                            <comment id="13398302" author="cwsteinbach" created="Thu, 21 Jun 2012 08:58:53 +0000"  >&lt;p&gt;@Richard: Please post a review request on reviews.apache.org. Thanks.&lt;/p&gt;</comment>
                            <comment id="13398980" author="rding" created="Thu, 21 Jun 2012 23:10:04 +0000"  >&lt;p&gt;Rebase patch on trunk.&lt;/p&gt;</comment>
                            <comment id="13446404" author="rding" created="Fri, 31 Aug 2012 21:37:51 +0000"  >&lt;p&gt;Review request is posted: &lt;a href=&quot;https://reviews.apache.org/r/5504/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/5504/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13452464" author="cwsteinbach" created="Mon, 10 Sep 2012 21:33:06 +0000"  >&lt;p&gt;@Richard: I added a couple comments on reviewboard. I&apos;d like to get this committed soon, so please let me know if you have time to work on this. Thanks.&lt;/p&gt;</comment>
                            <comment id="13452620" author="rding" created="Tue, 11 Sep 2012 00:47:17 +0000"  >&lt;p&gt;@Carl: thanks for the review comments. Attach a new patch addressing these comments.&lt;/p&gt;</comment>
                            <comment id="13454643" author="cwsteinbach" created="Thu, 13 Sep 2012 05:05:09 +0000"  >&lt;p&gt;Thanks for making the changes Richard.&lt;/p&gt;

&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13455065" author="cwsteinbach" created="Thu, 13 Sep 2012 17:51:11 +0000"  >&lt;p&gt;Committed to trunk. Thanks Richard!&lt;/p&gt;</comment>
                            <comment id="13455628" author="hudson" created="Fri, 14 Sep 2012 07:13:31 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1669 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1669/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1669/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2957&quot; title=&quot;Hive JDBC doesn&amp;#39;t support TIMESTAMP column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2957&quot;&gt;&lt;del&gt;HIVE-2957&lt;/del&gt;&lt;/a&gt;. Hive JDBC doesn&apos;t support TIMESTAMP column (Richard Ding via cws) (Revision 1384433)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1384433&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1384433&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/datatypes.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveBaseResultSet.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HivePreparedStatement.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSetMetaData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcColumn.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/Utils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548174" author="hudson" created="Wed, 9 Jan 2013 10:24:41 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2957&quot; title=&quot;Hive JDBC doesn&amp;#39;t support TIMESTAMP column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2957&quot;&gt;&lt;del&gt;HIVE-2957&lt;/del&gt;&lt;/a&gt;. Hive JDBC doesn&apos;t support TIMESTAMP column (Richard Ding via cws) (Revision 1384433)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1384433&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1384433&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/datatypes.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveBaseResultSet.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HivePreparedStatement.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSetMetaData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcColumn.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/Utils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550101" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:23 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12862107">HIVE-11748</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12523671" name="HIVE-2957.2.patch.txt" size="7159" author="tamtam180" created="Sun, 22 Apr 2012 08:12:22 +0000"/>
                            <attachment id="12532964" name="HIVE-2957.3.patch" size="6814" author="rding" created="Thu, 21 Jun 2012 23:10:04 +0000"/>
                            <attachment id="12544567" name="HIVE-2957.4.patch" size="7585" author="rding" created="Tue, 11 Sep 2012 00:47:17 +0000"/>
                            <attachment id="12523182" name="HIVE-2957.patch" size="2299" author="bharathganesh" created="Wed, 18 Apr 2012 12:44:03 +0000"/>
                            <attachment id="12544533" name="JDBC_ResultSet_Conversion_Chart.png" size="135782" author="cwsteinbach" created="Mon, 10 Sep 2012 21:29:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Apr 2012 17:15:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02u2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14474</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2958] GROUP BY causing ClassCastException [LazyDioInteger cannot be cast LazyInteger]</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2958</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1634&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1634&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The following work fine:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE EXTERNAL TABLE tim_hbase_occurrence ( 
  id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
  scientific_name string,
  data_resource_id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;
) STORED BY &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos;&lt;/span&gt; WITH SERDEPROPERTIES (
  &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.columns.mapping&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;:key#b,v:scientific_name#s,v:data_resource_id#b&quot;&lt;/span&gt;
) TBLPROPERTIES(
  &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.table.name&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;mini_occurrences&quot;&lt;/span&gt;, 
  &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.table.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.storage.type&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;binary&quot;&lt;/span&gt;
);
SELECT * FROM tim_hbase_occurrence LIMIT 3;
SELECT * FROM tim_hbase_occurrence WHERE data_resource_id=1081 LIMIT 3;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the following fails:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT data_resource_id, count(*) FROM tim_hbase_occurrence GROUP BY data_resource_id;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The error given:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;0 TS
2012-04-17 16:58:45,693 INFO org.apache.hadoop.hive.ql.exec.MapOperator: Initialization Done 7 MAP
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator: Processing alias tim_hbase_occurrence &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//c1n2.gbif.org/user/hive/warehouse/tim_hbase_occurrence
&lt;/span&gt;2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator: 7 forwarding 1 rows
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.TableScanOperator: 0 forwarding 1 rows
2012-04-17 16:58:45,716 INFO org.apache.hadoop.hive.ql.exec.SelectOperator: 1 forwarding 1 rows
2012-04-17 16:58:45,723 FATAL ExecMapper: org.apache.hadoop.hive.ql.metadata.HiveException: Hive &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing row {&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:1444,&lt;span class=&quot;code-quote&quot;&gt;&quot;scientific_name&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;data_resource_id&quot;&lt;/span&gt;:1081}
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:548)
	at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
	at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:396)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)
	at org.apache.hadoop.mapred.Child.main(Child.java:264)
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.hadoop.hive.serde2.lazy.LazyInteger
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:737)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
	at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
	at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:83)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:529)
	... 9 more
Caused by: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.hadoop.hive.serde2.lazy.LazyInteger
	at org.apache.hadoop.hive.serde2.lazy.objectinspector.primitive.LazyIntObjectInspector.copyObject(LazyIntObjectInspector.java:43)
	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.copyToStandardObject(ObjectInspectorUtils.java:239)
	at org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:150)
	at org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:142)
	at org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.copyKey(KeyWrapperFactory.java:119)
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processHashAggr(GroupByOperator.java:750)
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:722)
	... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;HBase 0.90.4, Hive 0.90 snapshot (trunk) built today&lt;/p&gt;</environment>
        <key id="12551238">HIVE-2958</key>
            <summary>GROUP BY causing ClassCastException [LazyDioInteger cannot be cast LazyInteger]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="timrobertson100">Tim Robertson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 15:02:38 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:41 +0000</updated>
                            <resolved>Fri, 20 Apr 2012 00:51:15 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13256102" author="phabricator@reviews.facebook.net" created="Wed, 18 Apr 2012 00:28:14 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2958&quot; title=&quot;GROUP BY causing ClassCastException [LazyDioInteger cannot be cast LazyInteger]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2958&quot;&gt;&lt;del&gt;HIVE-2958&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; GROUP BY causing ClassCastException &lt;span class=&quot;error&quot;&gt;&amp;#91;LazyDioInteger cannot be cast LazyInteger&amp;#93;&lt;/span&gt;&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1111 GROUP BY causing ClassCastException &lt;span class=&quot;error&quot;&gt;&amp;#91;LazyDioInteger cannot be cast LazyInteger&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;  This relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1634&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1634&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;  The following work fine:&lt;/p&gt;

&lt;p&gt;  CREATE EXTERNAL TABLE tim_hbase_occurrence (&lt;br/&gt;
    id int,&lt;br/&gt;
    scientific_name string,&lt;br/&gt;
    data_resource_id int&lt;br/&gt;
  ) STORED BY &apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos; WITH SERDEPROPERTIES (&lt;br/&gt;
    &quot;hbase.columns.mapping&quot; = &quot;:key#b,v:scientific_name#s,v:data_resource_id#b&quot;&lt;br/&gt;
  ) TBLPROPERTIES(&lt;br/&gt;
    &quot;hbase.table.name&quot; = &quot;mini_occurrences&quot;,&lt;br/&gt;
    &quot;hbase.table.default.storage.type&quot; = &quot;binary&quot;&lt;br/&gt;
  );&lt;br/&gt;
  SELECT * FROM tim_hbase_occurrence LIMIT 3;&lt;br/&gt;
  SELECT * FROM tim_hbase_occurrence WHERE data_resource_id=1081 LIMIT 3;&lt;/p&gt;

&lt;p&gt;  However, the following fails:&lt;/p&gt;

&lt;p&gt;  SELECT data_resource_id, count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; FROM tim_hbase_occurrence GROUP BY data_resource_id;&lt;/p&gt;

&lt;p&gt;  The error given:&lt;/p&gt;

&lt;p&gt;  0 TS&lt;br/&gt;
  2012-04-17 16:58:45,693 INFO org.apache.hadoop.hive.ql.exec.MapOperator: Initialization Done 7 MAP&lt;br/&gt;
  2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator: Processing alias tim_hbase_occurrence for file hdfs://c1n2.gbif.org/user/hive/warehouse/tim_hbase_occurrence&lt;br/&gt;
  2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator: 7 forwarding 1 rows&lt;br/&gt;
  2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.TableScanOperator: 0 forwarding 1 rows&lt;br/&gt;
  2012-04-17 16:58:45,716 INFO org.apache.hadoop.hive.ql.exec.SelectOperator: 1 forwarding 1 rows&lt;br/&gt;
  2012-04-17 16:58:45,723 FATAL ExecMapper: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;id&quot;:1444,&quot;scientific_name&quot;:null,&quot;data_resource_id&quot;:1081}
&lt;p&gt;  	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:548)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)&lt;br/&gt;
  	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)&lt;br/&gt;
  	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)&lt;br/&gt;
  	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)&lt;br/&gt;
  	at org.apache.hadoop.mapred.Child$4.run(Child.java:270)&lt;br/&gt;
  	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
  	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
  	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)&lt;br/&gt;
  	at org.apache.hadoop.mapred.Child.main(Child.java:264)&lt;br/&gt;
  Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be cast to org.apache.hadoop.hive.serde2.lazy.LazyInteger&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:737)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:83)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:529)&lt;br/&gt;
  	... 9 more&lt;br/&gt;
  Caused by: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be cast to org.apache.hadoop.hive.serde2.lazy.LazyInteger&lt;br/&gt;
  	at org.apache.hadoop.hive.serde2.lazy.objectinspector.primitive.LazyIntObjectInspector.copyObject(LazyIntObjectInspector.java:43)&lt;br/&gt;
  	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.copyToStandardObject(ObjectInspectorUtils.java:239)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:150)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:142)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.copyKey(KeyWrapperFactory.java:119)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processHashAggr(GroupByOperator.java:750)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:722)&lt;br/&gt;
  	... 18 more&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2871&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/test/queries/hbase_binary_external_table_queries.q&lt;br/&gt;
  hbase-handler/src/test/results/hbase_binary_external_table_queries.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioBoolean.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioByte.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioDouble.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioFloat.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioInteger.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioLong.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioShort.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6507/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6507/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13256250" author="timrobertson100" created="Wed, 18 Apr 2012 06:56:32 +0000"  >&lt;p&gt;Thanks Navis for such a quick turnaround!  I have applied the patch and confirm it works on our cluster (with HBase 0.90.4), but can&apos;t comment on the implications of the changes.&lt;/p&gt;</comment>
                            <comment id="13257098" author="navis" created="Wed, 18 Apr 2012 23:50:27 +0000"  >&lt;p&gt;Passed all tests&lt;/p&gt;</comment>
                            <comment id="13257950" author="phabricator@reviews.facebook.net" created="Fri, 20 Apr 2012 00:42:40 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2958&quot; title=&quot;GROUP BY causing ClassCastException [LazyDioInteger cannot be cast LazyInteger]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2958&quot;&gt;&lt;del&gt;HIVE-2958&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; GROUP BY causing ClassCastException &lt;span class=&quot;error&quot;&gt;&amp;#91;LazyDioInteger cannot be cast LazyInteger&amp;#93;&lt;/span&gt;&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2871&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1111&lt;/p&gt;</comment>
                            <comment id="13257956" author="ashutoshc" created="Fri, 20 Apr 2012 00:51:15 +0000"  >&lt;p&gt;Committed to trunk and 0.9. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13257957" author="phabricator@reviews.facebook.net" created="Fri, 20 Apr 2012 00:56:38 +0000"  >&lt;p&gt;navis has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2958&quot; title=&quot;GROUP BY causing ClassCastException [LazyDioInteger cannot be cast LazyInteger]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2958&quot;&gt;&lt;del&gt;HIVE-2958&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; GROUP BY causing ClassCastException &lt;span class=&quot;error&quot;&gt;&amp;#91;LazyDioInteger cannot be cast LazyInteger&amp;#93;&lt;/span&gt;&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by hashutosh.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2871&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1328157&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1328157&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13258037" author="hudson" created="Fri, 20 Apr 2012 06:00:17 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1384 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1384/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1384/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2958&quot; title=&quot;GROUP BY causing ClassCastException [LazyDioInteger cannot be cast LazyInteger]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2958&quot;&gt;&lt;del&gt;HIVE-2958&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; GROUP BY causing ClassCastException [LazyDioInteger cannot be&lt;br/&gt;
cast LazyInteger]&lt;br/&gt;
(Navis Ryu via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
DPAL-1111 GROUP BY causing ClassCastException [LazyDioInteger cannot be cast&lt;br/&gt;
LazyInteger]&lt;/p&gt;

&lt;p&gt;This relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1634&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1634&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The following work fine:&lt;/p&gt;

&lt;p&gt;CREATE EXTERNAL TABLE tim_hbase_occurrence (&lt;br/&gt;
  id int,&lt;br/&gt;
  scientific_name string,&lt;br/&gt;
  data_resource_id int&lt;br/&gt;
) STORED BY &apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos; WITH&lt;br/&gt;
SERDEPROPERTIES (&lt;br/&gt;
  &quot;hbase.columns.mapping&quot; = &quot;:key#b,v:scientific_name#s,v:data_resource_id#b&quot;&lt;br/&gt;
) TBLPROPERTIES(&lt;br/&gt;
  &quot;hbase.table.name&quot; = &quot;mini_occurrences&quot;,&lt;br/&gt;
  &quot;hbase.table.default.storage.type&quot; = &quot;binary&quot;&lt;br/&gt;
);&lt;br/&gt;
SELECT * FROM tim_hbase_occurrence LIMIT 3;&lt;br/&gt;
SELECT * FROM tim_hbase_occurrence WHERE data_resource_id=1081 LIMIT 3;&lt;/p&gt;

&lt;p&gt;However, the following fails:&lt;/p&gt;

&lt;p&gt;SELECT data_resource_id, count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; FROM tim_hbase_occurrence GROUP BY&lt;br/&gt;
data_resource_id;&lt;/p&gt;

&lt;p&gt;The error given:&lt;/p&gt;

&lt;p&gt;0 TS&lt;br/&gt;
2012-04-17 16:58:45,693 INFO org.apache.hadoop.hive.ql.exec.MapOperator:&lt;br/&gt;
Initialization Done 7 MAP&lt;br/&gt;
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator:&lt;br/&gt;
Processing alias tim_hbase_occurrence for file&lt;br/&gt;
hdfs://c1n2.gbif.org/user/hive/warehouse/tim_hbase_occurrence&lt;br/&gt;
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator: 7&lt;br/&gt;
forwarding 1 rows&lt;br/&gt;
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.TableScanOperator: 0&lt;br/&gt;
forwarding 1 rows&lt;br/&gt;
2012-04-17 16:58:45,716 INFO org.apache.hadoop.hive.ql.exec.SelectOperator: 1&lt;br/&gt;
forwarding 1 rows&lt;br/&gt;
2012-04-17 16:58:45,723 FATAL ExecMapper:&lt;br/&gt;
org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while&lt;br/&gt;
processing row &lt;/p&gt;
{&quot;id&quot;:1444,&quot;scientific_name&quot;:null,&quot;data_resource_id&quot;:1081}
&lt;p&gt;	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:548)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:270)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:264)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException:&lt;br/&gt;
java.lang.ClassCastException:&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be cast to&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazy.LazyInteger&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:737)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:83)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:529)&lt;br/&gt;
	... 9 more&lt;br/&gt;
Caused by: java.lang.ClassCastException:&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be cast to&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazy.LazyInteger&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazy.objectinspector.primitive.LazyIntObjectInspector.copyObject(LazyIntObjectInspector.java:43)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.copyToStandardObject(ObjectInspectorUtils.java:239)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:150)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:142)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.copyKey(KeyWrapperFactory.java:119)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.GroupByOperator.processHashAggr(GroupByOperator.java:750)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:722)&lt;br/&gt;
	... 18 more&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2871&lt;/a&gt; (Revision 1328157)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328157&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328157&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_external_table_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_external_table_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioBoolean.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioByte.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioDouble.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioFloat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioInteger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioLong.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioShort.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265273" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:27 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548171" author="hudson" created="Wed, 9 Jan 2013 10:24:41 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2958&quot; title=&quot;GROUP BY causing ClassCastException [LazyDioInteger cannot be cast LazyInteger]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2958&quot;&gt;&lt;del&gt;HIVE-2958&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; GROUP BY causing ClassCastException [LazyDioInteger cannot be&lt;br/&gt;
cast LazyInteger]&lt;br/&gt;
(Navis Ryu via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
DPAL-1111 GROUP BY causing ClassCastException [LazyDioInteger cannot be cast&lt;br/&gt;
LazyInteger]&lt;/p&gt;

&lt;p&gt;This relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1634&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1634&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The following work fine:&lt;/p&gt;

&lt;p&gt;CREATE EXTERNAL TABLE tim_hbase_occurrence (&lt;br/&gt;
  id int,&lt;br/&gt;
  scientific_name string,&lt;br/&gt;
  data_resource_id int&lt;br/&gt;
) STORED BY &apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos; WITH&lt;br/&gt;
SERDEPROPERTIES (&lt;br/&gt;
  &quot;hbase.columns.mapping&quot; = &quot;:key#b,v:scientific_name#s,v:data_resource_id#b&quot;&lt;br/&gt;
) TBLPROPERTIES(&lt;br/&gt;
  &quot;hbase.table.name&quot; = &quot;mini_occurrences&quot;,&lt;br/&gt;
  &quot;hbase.table.default.storage.type&quot; = &quot;binary&quot;&lt;br/&gt;
);&lt;br/&gt;
SELECT * FROM tim_hbase_occurrence LIMIT 3;&lt;br/&gt;
SELECT * FROM tim_hbase_occurrence WHERE data_resource_id=1081 LIMIT 3;&lt;/p&gt;

&lt;p&gt;However, the following fails:&lt;/p&gt;

&lt;p&gt;SELECT data_resource_id, count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; FROM tim_hbase_occurrence GROUP BY&lt;br/&gt;
data_resource_id;&lt;/p&gt;

&lt;p&gt;The error given:&lt;/p&gt;

&lt;p&gt;0 TS&lt;br/&gt;
2012-04-17 16:58:45,693 INFO org.apache.hadoop.hive.ql.exec.MapOperator:&lt;br/&gt;
Initialization Done 7 MAP&lt;br/&gt;
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator:&lt;br/&gt;
Processing alias tim_hbase_occurrence for file&lt;br/&gt;
hdfs://c1n2.gbif.org/user/hive/warehouse/tim_hbase_occurrence&lt;br/&gt;
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.MapOperator: 7&lt;br/&gt;
forwarding 1 rows&lt;br/&gt;
2012-04-17 16:58:45,714 INFO org.apache.hadoop.hive.ql.exec.TableScanOperator: 0&lt;br/&gt;
forwarding 1 rows&lt;br/&gt;
2012-04-17 16:58:45,716 INFO org.apache.hadoop.hive.ql.exec.SelectOperator: 1&lt;br/&gt;
forwarding 1 rows&lt;br/&gt;
2012-04-17 16:58:45,723 FATAL ExecMapper:&lt;br/&gt;
org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while&lt;br/&gt;
processing row &lt;/p&gt;
{&quot;id&quot;:1444,&quot;scientific_name&quot;:null,&quot;data_resource_id&quot;:1081}
&lt;p&gt;	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:548)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:270)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:264)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException:&lt;br/&gt;
java.lang.ClassCastException:&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be cast to&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazy.LazyInteger&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:737)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:83)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:529)&lt;br/&gt;
	... 9 more&lt;br/&gt;
Caused by: java.lang.ClassCastException:&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazydio.LazyDioInteger cannot be cast to&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazy.LazyInteger&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.serde2.lazy.objectinspector.primitive.LazyIntObjectInspector.copyObject(LazyIntObjectInspector.java:43)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.copyToStandardObject(ObjectInspectorUtils.java:239)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:150)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.deepCopyElements(KeyWrapperFactory.java:142)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.KeyWrapperFactory$ListKeyWrapper.copyKey(KeyWrapperFactory.java:119)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.GroupByOperator.processHashAggr(GroupByOperator.java:750)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:722)&lt;br/&gt;
	... 18 more&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2871&lt;/a&gt; (Revision 1328157)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328157&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328157&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_external_table_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_external_table_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioBoolean.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioByte.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioDouble.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioFloat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioInteger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioLong.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazydio/LazyDioShort.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12523058" name="ASF.LICENSE.NOT.GRANTED--HIVE-2958.D2871.1.patch" size="11425" author="phabricator@reviews.facebook.net" created="Wed, 18 Apr 2012 00:28:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Apr 2012 00:28:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236102</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d3mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2959] TestRemoteHiveMetaStoreIpAddress always uses the same port</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2959</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TestRemoteHiveMetaStoreIpAddress always uses the same port, meaning that if another process happens to be using that port, the tests cannot succeed.&lt;/p&gt;

&lt;p&gt;There seems to be a standard way of finding a free port using Java&apos;s ServerSocket class, this should be used instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12551272">HIVE-2959</key>
            <summary>TestRemoteHiveMetaStoreIpAddress always uses the same port</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 17:42:21 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:51 +0000</updated>
                            <resolved>Wed, 18 Apr 2012 17:34:22 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13255763" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 17:47:16 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; title=&quot;TestRemoteHiveMetaStoreIpAddress always uses the same port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2959&quot;&gt;&lt;del&gt;HIVE-2959&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; TestRemoteHiveMetaStoreIpAddress always uses the same port&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2959&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  TestRemoteHiveMetaStoreIpAddress now uses the standard way of finding a free port using Java&apos;s ServerSocket class.&lt;/p&gt;

&lt;p&gt;  TestRemoteHiveMetaStoreIpAddress always uses the same port, meaning that if another process happens to be using that port, the tests cannot succeed.&lt;/p&gt;

&lt;p&gt;  There seems to be a standard way of finding a free port using Java&apos;s ServerSocket class, this should be used instead.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2841&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6435/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6435/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13256088" author="phabricator@reviews.facebook.net" created="Wed, 18 Apr 2012 00:06:20 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; title=&quot;TestRemoteHiveMetaStoreIpAddress always uses the same port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2959&quot;&gt;&lt;del&gt;HIVE-2959&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; TestRemoteHiveMetaStoreIpAddress always uses the same port&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2841&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13256731" author="ashutoshc" created="Wed, 18 Apr 2012 17:34:22 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Kevin!&lt;/p&gt;</comment>
                            <comment id="13256734" author="phabricator@reviews.facebook.net" created="Wed, 18 Apr 2012 17:36:37 +0000"  >&lt;p&gt;kevinwilfong has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; title=&quot;TestRemoteHiveMetaStoreIpAddress always uses the same port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2959&quot;&gt;&lt;del&gt;HIVE-2959&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; TestRemoteHiveMetaStoreIpAddress always uses the same port&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by hashutosh.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2841&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1327591&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1327591&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13257148" author="hudson" created="Thu, 19 Apr 2012 01:35:49 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1382 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1382/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1382/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; title=&quot;TestRemoteHiveMetaStoreIpAddress always uses the same port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2959&quot;&gt;&lt;del&gt;HIVE-2959&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; TestRemoteHiveMetaStoreIpAddress always uses the same port&lt;br/&gt;
(Kevin Wilfong via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2959&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TestRemoteHiveMetaStoreIpAddress now uses the standard way of finding a free&lt;br/&gt;
port using Java&apos;s ServerSocket class.&lt;/p&gt;

&lt;p&gt;TestRemoteHiveMetaStoreIpAddress always uses the same port, meaning that if&lt;br/&gt;
another process happens to be using that port, the tests cannot succeed.&lt;/p&gt;

&lt;p&gt;There seems to be a standard way of finding a free port using Java&apos;s&lt;br/&gt;
ServerSocket class, this should be used instead.&lt;/p&gt;

&lt;p&gt;Test Plan: Ran TestRemoteHiveMetaStoreIpAddress and&lt;br/&gt;
TestRemoteUGIHiveMetaStoreIpAddress, the two tests which would be affected by&lt;br/&gt;
this change.  I verified they passed and did not use port 39083.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, njain, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2841&lt;/a&gt; (Revision 1327591)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327591&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327591&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548189" author="hudson" created="Wed, 9 Jan 2013 10:24:45 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; title=&quot;TestRemoteHiveMetaStoreIpAddress always uses the same port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2959&quot;&gt;&lt;del&gt;HIVE-2959&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; TestRemoteHiveMetaStoreIpAddress always uses the same port&lt;br/&gt;
(Kevin Wilfong via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2959&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TestRemoteHiveMetaStoreIpAddress now uses the standard way of finding a free&lt;br/&gt;
port using Java&apos;s ServerSocket class.&lt;/p&gt;

&lt;p&gt;TestRemoteHiveMetaStoreIpAddress always uses the same port, meaning that if&lt;br/&gt;
another process happens to be using that port, the tests cannot succeed.&lt;/p&gt;

&lt;p&gt;There seems to be a standard way of finding a free port using Java&apos;s&lt;br/&gt;
ServerSocket class, this should be used instead.&lt;/p&gt;

&lt;p&gt;Test Plan: Ran TestRemoteHiveMetaStoreIpAddress and&lt;br/&gt;
TestRemoteUGIHiveMetaStoreIpAddress, the two tests which would be affected by&lt;br/&gt;
this change.  I verified they passed and did not use port 39083.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, njain, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2841&lt;/a&gt; (Revision 1327591)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327591&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327591&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550219" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:51 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522988" name="ASF.LICENSE.NOT.GRANTED--HIVE-2959.D2841.1.patch" size="2579" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 17:47:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Apr 2012 17:47:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236136</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2960] Stop testing concat of partitions containing control characters.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2960</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We have been, for a short while, testing to make sure that concatenation commands work with partitions that contain ASCII control characters.  This happened to work up until recently due to a happy coincidence in the way the Hive object&apos;s HiveConf was updated.  Namely, it was updated often enough that it got configs set by the user, but not so often that it got the value for hive.query.string.  With some recent changes, it now needs to be updated more often, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2918&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2918&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This breaks the process of launching a job to merge partitions that contain ASCII control characters.  The job conf is constructed using the updated Hive conf containing the value of hive.query.string which contains ASCII control characters.  When the job conf is converted to XML it fails because these characters are illegal.  Given that any query has, even prior to this change, failed when that query contained ASCII control characters, and hence these partitions cannot be queried directly, it seems reasonable to no longer support concatenating them either (which this change will allow for).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12551327">HIVE-2960</key>
            <summary>Stop testing concat of partitions containing control characters.</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 23:50:24 +0000</created>
                <updated>Thu, 10 Jan 2013 19:54:12 +0000</updated>
                            <resolved>Tue, 24 Apr 2012 23:21:18 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13256076" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 23:54:14 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2960&quot; title=&quot;Stop testing concat of partitions containing control characters.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2960&quot;&gt;&lt;del&gt;HIVE-2960&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Stop testing concat of partitions containing control characters.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2960&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2960&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Remove the testcases for concatenating partitions containing control characters.&lt;/p&gt;

&lt;p&gt;  We have been, for a short while, testing to make sure that concatenation commands work with partitions that contain ASCII control characters.  This happened to work up until recently due to a happy coincidence in the way the Hive object&apos;s HiveConf was updated.  Namely, it was updated often enough that it got configs set by the user, but not so often that it got the value for hive.query.string.  With some recent changes, it now needs to be updated more often, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2918&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2918&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  This breaks the process of launching a job to merge partitions that contain ASCII control characters.  The job conf is constructed using the updated Hive conf containing the value of hive.query.string which contains ASCII control characters.  When the job conf is converted to XML it fails because these characters are illegal.  Given that any query has, even prior to this change, failed when that query contained ASCII control characters, and hence these partitions cannot be queried directly, it seems reasonable to no longer support concatenating them either (which this change will allow for).&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2865&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2865&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/escape2.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/escape2.q&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6501/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6501/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13256078" author="kevinwilfong" created="Tue, 17 Apr 2012 23:55:12 +0000"  >&lt;p&gt;Attached escape2.q.out because the diff for some reason thought it was a binary file.&lt;/p&gt;</comment>
                            <comment id="13261128" author="namit" created="Tue, 24 Apr 2012 23:21:18 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13261343" author="hudson" created="Wed, 25 Apr 2012 06:28:30 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1395 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1395/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1395/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2960&quot; title=&quot;Stop testing concat of partitions containing control characters.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2960&quot;&gt;&lt;del&gt;HIVE-2960&lt;/del&gt;&lt;/a&gt; Stop testing concat of partitions containing control characters.&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1330057)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1330057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1330057&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/escape2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/escape2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548160" author="hudson" created="Wed, 9 Jan 2013 10:24:38 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2960&quot; title=&quot;Stop testing concat of partitions containing control characters.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2960&quot;&gt;&lt;del&gt;HIVE-2960&lt;/del&gt;&lt;/a&gt; Stop testing concat of partitions containing control characters.&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1330057)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1330057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1330057&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/escape2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/escape2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550311" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:12 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12523053" name="ASF.LICENSE.NOT.GRANTED--HIVE-2960.D2865.1.patch" size="2947" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 23:54:15 +0000"/>
                            <attachment id="12523054" name="escape2.q.out" size="832019" author="kevinwilfong" created="Tue, 17 Apr 2012 23:54:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Apr 2012 23:54:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236191</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
