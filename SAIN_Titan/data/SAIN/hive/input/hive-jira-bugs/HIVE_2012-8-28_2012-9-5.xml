<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:21:39 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2012-8-28+AND+created+%3C%3D+2012-9-5+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="18" total="18"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-3411] Filter predicates on outer join overlapped on single alias is not handled properly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3411</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, join predicates on outer join are evaluated in join operator (or HashSink for MapJoin) and the result value is tagged to end of each values(as a boolean), which is used for joining values. But when predicates are overlapped on single alias, all the predicates are evaluated with AND conjunction, which makes invalid result. &lt;/p&gt;

&lt;p&gt;For example with table a with values,&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;100 40
100 50
100 60
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Query below has overlapped predicates on alias b, which is making all the values on b are tagged with true(filtered)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select * from a right outer join a b on (a.key=b.key AND a.value=50 AND b.value=50) left outer join a c on (b.key=c.key AND b.value=60 AND c.value=60);

NULL	NULL	100	40	NULL	NULL
NULL	NULL	100	50	NULL	NULL
NULL	NULL	100	60	NULL	NULL

-- Join predicate
Join Operator
  condition map:
       Right Outer Join0 to 1
       Left Outer Join1 to 2
  condition expressions:
    0 {VALUE._col0} {VALUE._col1}
    1 {VALUE._col0} {VALUE._col1}
    2 {VALUE._col0} {VALUE._col1}
  filter predicates:
    0 
    1 {(VALUE._col1 = 50)} {(VALUE._col1 = 60)}
    2 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but this should be &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;NULL	NULL	100	40	NULL	NULL
100	50	100	50	NULL	NULL
NULL	NULL	100	60	100	60
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;ubuntu 10.10&lt;/p&gt;</environment>
        <key id="12605168">HIVE-3411</key>
            <summary>Filter predicates on outer join overlapped on single alias is not handled properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Aug 2012 02:59:06 +0000</created>
                <updated>Thu, 2 May 2013 02:30:02 +0000</updated>
                            <resolved>Tue, 25 Sep 2012 17:32:30 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13448550" author="navis" created="Wed, 5 Sep 2012 07:42:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D5169&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5169&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13448563" author="navis" created="Wed, 5 Sep 2012 08:03:07 +0000"  >&lt;p&gt;A boolean tag for filter result is replaced with a byte tag, limiting number of aliases for single join to max 8. &lt;br/&gt;
I&apos;m not yet decided whether to extended the limit or to throw exception at compile time.&lt;/p&gt;</comment>
                            <comment id="13460246" author="namit" created="Fri, 21 Sep 2012 05:52:28 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13460248" author="namit" created="Fri, 21 Sep 2012 05:55:30 +0000"  >&lt;p&gt;Do you want to abandon this and get &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3381&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-3381&lt;/a&gt; instead ?&lt;/p&gt;</comment>
                            <comment id="13460301" author="navis" created="Fri, 21 Sep 2012 07:08:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3381&quot; title=&quot;Result of outer join is not valid&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3381&quot;&gt;&lt;del&gt;HIVE-3381&lt;/del&gt;&lt;/a&gt; depends on this (and contains this) and it seemed better to be processed separately. &lt;/p&gt;</comment>
                            <comment id="13460325" author="navis" created="Fri, 21 Sep 2012 07:43:49 +0000"  >&lt;p&gt;Addressed comments&lt;/p&gt;</comment>
                            <comment id="13460413" author="namit" created="Fri, 21 Sep 2012 10:45:11 +0000"  >&lt;p&gt;comments&lt;/p&gt;</comment>
                            <comment id="13461629" author="phabricator@reviews.facebook.net" created="Mon, 24 Sep 2012 06:43:07 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3411&quot; title=&quot;Filter predicates on outer join overlapped on single alias is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3411&quot;&gt;&lt;del&gt;HIVE-3411&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Filter predicates on outer join overlapped on single alias is not handled properly&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/QBJoinTree.java:56 I mean cadinality of &apos;*&apos;. I&apos;ll change it.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5169&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5169&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13461646" author="phabricator@reviews.facebook.net" created="Mon, 24 Sep 2012 07:44:07 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3411&quot; title=&quot;Filter predicates on outer join overlapped on single alias is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3411&quot;&gt;&lt;del&gt;HIVE-3411&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Filter predicates on outer join overlapped on single alias is not handled properly&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Fixed comments&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5169&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5169&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/AbstractMapJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/CommonJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HashTableSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinUtil.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/SMBMapJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/SkewJoinHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/QBJoinTree.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/HashTableSinkDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/JoinDesc.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/join_filters_overlap.q&lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join29.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/join_filters_overlap.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13461650" author="namit" created="Mon, 24 Sep 2012 08:03:24 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13461652" author="namit" created="Mon, 24 Sep 2012 08:04:12 +0000"  >&lt;p&gt;Can you refresh ?&lt;br/&gt;
It is not applying cleanly.&lt;/p&gt;</comment>
                            <comment id="13461657" author="phabricator@reviews.facebook.net" created="Mon, 24 Sep 2012 08:07:07 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3411&quot; title=&quot;Filter predicates on outer join overlapped on single alias is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3411&quot;&gt;&lt;del&gt;HIVE-3411&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Filter predicates on outer join overlapped on single alias is not handled properly&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5169&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5169&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1835&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13461675" author="phabricator@reviews.facebook.net" created="Mon, 24 Sep 2012 08:43:07 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3411&quot; title=&quot;Filter predicates on outer join overlapped on single alias is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3411&quot;&gt;&lt;del&gt;HIVE-3411&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Filter predicates on outer join overlapped on single alias is not handled properly&quot;.&lt;/p&gt;

&lt;p&gt;  can you refresh ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5169&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5169&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1835&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13462278" author="phabricator@reviews.facebook.net" created="Tue, 25 Sep 2012 00:05:07 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3411&quot; title=&quot;Filter predicates on outer join overlapped on single alias is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3411&quot;&gt;&lt;del&gt;HIVE-3411&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Filter predicates on outer join overlapped on single alias is not handled properly&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5169&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5169&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/AbstractMapJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/CommonJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HashTableSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinUtil.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/SMBMapJoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/SkewJoinHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/QBJoinTree.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/HashTableSinkDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/JoinDesc.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/join_filters_overlap.q&lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join29.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/join_filters_overlap.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13462427" author="namit" created="Tue, 25 Sep 2012 04:05:22 +0000"  >&lt;p&gt;+1&lt;br/&gt;
running tests&lt;/p&gt;</comment>
                            <comment id="13463012" author="namit" created="Tue, 25 Sep 2012 17:32:30 +0000"  >&lt;p&gt;Committed. Thanks Navis&lt;/p&gt;</comment>
                            <comment id="13463496" author="hudson" created="Wed, 26 Sep 2012 03:48:08 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1697 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1697/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1697/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3411&quot; title=&quot;Filter predicates on outer join overlapped on single alias is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3411&quot;&gt;&lt;del&gt;HIVE-3411&lt;/del&gt;&lt;/a&gt; Filter predicates on outer join overlapped on single alias is not handled properly&lt;br/&gt;
(Navis via namit) (Revision 1390010)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1390010&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1390010&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/AbstractMapJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/CommonJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HashTableSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinUtil.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SMBMapJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SkewJoinHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QBJoinTree.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HashTableSinkDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/JoinDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/join_filters_overlap.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/auto_join29.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join_filters_overlap.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/louter_join_ppr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/outer_join_ppr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/router_join_ppr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union22.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join1.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join2.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join3.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join4.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join5.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join6.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join7.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join8.q.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548015" author="hudson" created="Wed, 9 Jan 2013 10:23:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3411&quot; title=&quot;Filter predicates on outer join overlapped on single alias is not handled properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3411&quot;&gt;&lt;del&gt;HIVE-3411&lt;/del&gt;&lt;/a&gt; Filter predicates on outer join overlapped on single alias is not handled properly&lt;br/&gt;
(Navis via namit) (Revision 1390010)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1390010&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1390010&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/AbstractMapJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/CommonJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HashTableSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinUtil.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SMBMapJoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SkewJoinHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QBJoinTree.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HashTableSinkDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/JoinDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/join_filters_overlap.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/auto_join29.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join_filters_overlap.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/louter_join_ppr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/outer_join_ppr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/router_join_ppr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union22.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join1.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join2.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join3.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join4.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join5.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join6.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join7.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/join8.q.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550159" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:36 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12603394">HIVE-3381</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12638014">HIVE-4206</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12543824" name="HIVE-3411.1.patch.txt" size="92667" author="navis" created="Wed, 5 Sep 2012 07:43:41 +0000"/>
                            <attachment id="12545122" name="HIVE-3411.2.patch.txt" size="136137" author="navis" created="Fri, 14 Sep 2012 08:19:03 +0000"/>
                            <attachment id="12546261" name="HIVE-3411.D5169.5.patch" size="91262" author="phabricator@reviews.facebook.net" created="Mon, 24 Sep 2012 07:44:07 +0000"/>
                            <attachment id="12546414" name="HIVE-3411.D5169.6.patch" size="91262" author="phabricator@reviews.facebook.net" created="Tue, 25 Sep 2012 00:05:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Sep 2012 05:52:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259236</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3412] Fix TestCliDriver.repair on Hadoop 0.23.3, 3.0.0, and 2.2.0-alpha</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3412</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TestCliDriver.repair fails on the following Hadoop versions:&lt;br/&gt;
0.23.3, 3.0.0, 2.2.0-alpha&lt;/p&gt;

&lt;p&gt;repair.q fails with &quot;dfs -mkdir&quot;:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; mkdir: `../build/ql/test/data/warehouse/repairtable/p1=a/p2=a&apos;: No such file or directory&lt;/p&gt;

&lt;p&gt;The problem is, after fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8551&quot; title=&quot;fs -mkdir creates parent directories without the -p option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8551&quot;&gt;&lt;del&gt;HADOOP-8551&lt;/del&gt;&lt;/a&gt;, which changes the hdfs Shell syntax for mkdir:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-8551&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;all &quot;dfs -mkdir&quot; commands should provide &quot;-p&quot; in order to execute without error.&lt;/p&gt;

&lt;p&gt;This is an intentional change in HDFS. And &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8551&quot; title=&quot;fs -mkdir creates parent directories without the -p option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8551&quot;&gt;&lt;del&gt;HADOOP-8551&lt;/del&gt;&lt;/a&gt; will be included in 0.23.3, 3.0.0, 2.2.0-alpha versions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605317">HIVE-3412</key>
            <summary>Fix TestCliDriver.repair on Hadoop 0.23.3, 3.0.0, and 2.2.0-alpha</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Aug 2012 00:28:31 +0000</created>
                <updated>Thu, 10 Jan 2013 19:54:16 +0000</updated>
                            <resolved>Tue, 4 Sep 2012 08:06:30 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13443694" author="zhenxiao" created="Wed, 29 Aug 2012 00:32:38 +0000"  >&lt;p&gt;Review Request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D4989&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4989&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13443907" author="cwsteinbach" created="Wed, 29 Aug 2012 08:31:41 +0000"  >&lt;p&gt;@Zhenxiao: Please see my comments on phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13444301" author="zhenxiao" created="Wed, 29 Aug 2012 18:31:13 +0000"  >&lt;p&gt;@Carl: thanks for the review. I addressed the comments and resubmitted patch at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D4989&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4989&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13445736" author="cwsteinbach" created="Fri, 31 Aug 2012 07:13:23 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13447550" author="cwsteinbach" created="Tue, 4 Sep 2012 08:06:30 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13448017" author="hudson" created="Tue, 4 Sep 2012 20:25:38 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1646 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1646/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1646/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3412&quot; title=&quot;Fix TestCliDriver.repair on Hadoop 0.23.3, 3.0.0, and 2.2.0-alpha&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3412&quot;&gt;&lt;del&gt;HIVE-3412&lt;/del&gt;&lt;/a&gt;. Fix TestCliDriver.repair on Hadoop 0.23.3, 3.0.0, and 2.2.0-alpha (Zhenxiao Luo via cws) (Revision 1380479)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380479&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380479&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/repair.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/repair_hadoop23.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/repair.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/repair_hadoop23.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548016" author="hudson" created="Wed, 9 Jan 2013 10:23:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3412&quot; title=&quot;Fix TestCliDriver.repair on Hadoop 0.23.3, 3.0.0, and 2.2.0-alpha&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3412&quot;&gt;&lt;del&gt;HIVE-3412&lt;/del&gt;&lt;/a&gt;. Fix TestCliDriver.repair on Hadoop 0.23.3, 3.0.0, and 2.2.0-alpha (Zhenxiao Luo via cws) (Revision 1380479)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380479&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380479&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/repair.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/repair_hadoop23.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/repair.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/repair_hadoop23.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550329" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:16 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12542872" name="HIVE-3412.1.patch.txt" size="5083" author="zhenxiao" created="Wed, 29 Aug 2012 00:33:13 +0000"/>
                            <attachment id="12542960" name="HIVE-3412.2.patch.txt" size="6903" author="zhenxiao" created="Wed, 29 Aug 2012 18:30:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Aug 2012 08:31:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242361</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02u3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14478</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3413] Fix pdk.PluginTest on hadoop23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3413</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When running Hive test on Hadoop0.23, pdk.PluginTest is failing:&lt;/p&gt;

&lt;p&gt;test:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hive.pdk.PluginTest&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_172375530.txt&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Total MapReduce jobs = 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Launching Job 1 out of 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Number of reduce tasks determined at compile time: 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; In order to change the average load for a reducer (in bytes):&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; In order to limit the maximum number of reducers:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   set hive.exec.reducers.max=&amp;lt;number&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; In order to set a constant number of reducers:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   set mapred.reduce.tasks=&amp;lt;number&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Execution log at: /tmp/cloudera/cloudera_20120828184545_6deeb166-7dd4-40d3-9ff7-c5d5277aee39.log&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:123)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:85)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:78)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapred.JobClient.init(JobClient.java:487)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapred.JobClient.&amp;lt;init&amp;gt;(JobClient.java:466)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:424)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:688)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.util.RunJar.main(RunJar.java:200)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Job Submission failed with exception &apos;java.io.IOException(Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.)&apos;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Execution failed with exit status: 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Obtaining error information&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task failed!&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task ID:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   Stage-1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Logs:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; /tmp/cloudera/hive.log&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask]&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 33.9 sec&lt;/p&gt;

&lt;p&gt;With details in ./build/builtins/TEST-org.apache.hive.pdk.PluginTest.txt:&lt;/p&gt;


&lt;p&gt;Testsuite: org.apache.hive.pdk.PluginTest&lt;br/&gt;
Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 33.9 sec&lt;br/&gt;
------------- Standard Error -----------------&lt;br/&gt;
GLOBAL SETUP:  Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/onerow&lt;br/&gt;
Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/iris&lt;br/&gt;
org.apache.hive.builtins.UDAFUnionMap TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_840355011.txt&lt;br/&gt;
GLOBAL TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_252250000.txt&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 6.874 seconds&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.512 seconds&lt;br/&gt;
------------- ---------------- ---------------&lt;/p&gt;

&lt;p&gt;Testcase: SELECT size(UNION_MAP(MAP(sepal_width, sepal_length))) FROM iris took 4.428 sec&lt;br/&gt;
    FAILED&lt;br/&gt;
expected:&amp;lt;&lt;span class=&quot;error&quot;&gt;&amp;#91;23&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;[&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_172375530.txt&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks determined at compile time: 1&lt;br/&gt;
In order to change the average load for a reducer (in bytes):&lt;br/&gt;
  set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to limit the maximum number of reducers:&lt;br/&gt;
  set hive.exec.reducers.max=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to set a constant number of reducers:&lt;br/&gt;
  set mapred.reduce.tasks=&amp;lt;number&amp;gt;&lt;br/&gt;
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;br/&gt;
Execution log at: /tmp/cloudera/cloudera_20120828184545_6deeb166-7dd4-40d3-9ff7-c5d5277aee39.log&lt;br/&gt;
java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.&lt;br/&gt;
    at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:123)&lt;br/&gt;
    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:85)&lt;br/&gt;
    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:78)&lt;br/&gt;
    at org.apache.hadoop.mapred.JobClient.init(JobClient.java:487)&lt;br/&gt;
    at org.apache.hadoop.mapred.JobClient.&amp;lt;init&amp;gt;(JobClient.java:466)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:424)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:688)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    at org.apache.hadoop.util.RunJar.main(RunJar.java:200)&lt;br/&gt;
Job Submission failed with exception &apos;java.io.IOException(Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.)&apos;&lt;br/&gt;
Execution failed with exit status: 1&lt;br/&gt;
Obtaining error information&lt;/p&gt;

&lt;p&gt;Task failed!&lt;br/&gt;
Task ID:&lt;br/&gt;
  Stage-1&lt;/p&gt;

&lt;p&gt;Logs:&lt;/p&gt;

&lt;p&gt;/tmp/cloudera/hive.log&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605327">HIVE-3413</key>
            <summary>Fix pdk.PluginTest on hadoop23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Aug 2012 02:11:56 +0000</created>
                <updated>Thu, 10 Jan 2013 19:52:59 +0000</updated>
                            <resolved>Tue, 4 Sep 2012 08:01:34 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13443753" author="zhenxiao" created="Wed, 29 Aug 2012 02:16:45 +0000"  >&lt;p&gt;There are two problems with this bug:&lt;/p&gt;

&lt;p&gt;#1. Missing Dependency:&lt;br/&gt;
The compile and test classpath in pdk/scripts/build-plugin.xml is based on build/ivy/lib/default, the following dependencies are missing when building hive-exec*.jar:&lt;/p&gt;

&lt;p&gt;hadoop-mapreduce-client-jobclient&lt;br/&gt;
hadoop-minicluster&lt;/p&gt;

&lt;p&gt;This dependency should be added to ql/ivy.xml, which is the place for hive-exec dependencies.&lt;/p&gt;

&lt;p&gt;Note that hadoop-mapreduce-client-jobclient dependency should be updated by just changing the jar placement. putting the jar in build/ivy/lib/test/ would not be included in pdk PluginTest classpath.&lt;/p&gt;

&lt;p&gt;#2. After fixing #1, the following log4j warning message appears in the output stream, which fails the testcase(pdk PluginTest diffs expected output with the output stream):&lt;/p&gt;

&lt;p&gt;test:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hive.pdk.PluginTest&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2012-08-28 19:05:20,679 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2012-08-28 19:05:20,680 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2]3&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 42.318 sec&lt;/p&gt;


&lt;p&gt;And the details in: ./build/builtins/TEST-org.apache.hive.pdk.PluginTest.txt&lt;/p&gt;

&lt;p&gt;Testsuite: org.apache.hive.pdk.PluginTest&lt;br/&gt;
Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 42.318 sec&lt;br/&gt;
------------- Standard Error -----------------&lt;br/&gt;
GLOBAL SETUP:  Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/onerow&lt;br/&gt;
Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/iris&lt;br/&gt;
org.apache.hive.builtins.UDAFUnionMap TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281905_427044653.txt&lt;br/&gt;
GLOBAL TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281905_95794698.txt&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 6.585 seconds&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.415 seconds&lt;br/&gt;
------------- ---------------- ---------------&lt;/p&gt;

&lt;p&gt;Testcase: SELECT size(UNION_MAP(MAP(sepal_width, sepal_length))) FROM iris took 9.435 sec&lt;br/&gt;
    FAILED&lt;br/&gt;
expected:&amp;lt;2[]3&amp;gt; but was:&amp;lt;2[012-08-28 19:05:20,464 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.HiveConf (HiveConf.java:&amp;lt;clinit&amp;gt;(75)) - hive-site.xml not found on CLASSPATH&lt;br/&gt;
2012-08-28 19:05:20,679 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.&lt;br/&gt;
2012-08-28 19:05:20,680 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.&lt;br/&gt;
2]3&amp;gt;&lt;br/&gt;
junit.framework.ComparisonFailure: expected:&amp;lt;2[]3&amp;gt; but was:&amp;lt;2[012-08-28 19:05:20,464 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.HiveConf (HiveConf.java:&amp;lt;clinit&amp;gt;(75)) - hive-site.xml not found on CLASSPATH&lt;br/&gt;
2012-08-28 19:05:20,679 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.&lt;br/&gt;
2012-08-28 19:05:20,680 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.&lt;br/&gt;
2]3&amp;gt;&lt;br/&gt;
    at org.apache.hive.pdk.PluginTest.runTest(PluginTest.java:59)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;/p&gt;

&lt;p&gt;This warning is printed to console, since it happens before hive configure its log4j(which happens in HiveConf.java static initialization), and hadoop&apos;s default log4j configuration is INFA,console. This does not happen on previous branches, since on hadoop0.23, there are code execution path change, and these warnings just appeared when running hive on hadoop0.23.&lt;/p&gt;

&lt;p&gt;My proposed solution is to configure hadoop log4j, so that its warning message are printed to the log file, instead of printing on the console, log4j.properties file is added, which configure hadoop log4j to be DEBUG,DRFA.&lt;/p&gt;

&lt;p&gt;A new log4j.properties file is added, not using hive-log4j.properties, because:&lt;/p&gt;

&lt;p&gt;##1 this is for hadoop log4j configuration, not for hive log4j configuration(which configuration file named hive-log4j.properties), it might be possible for us to have different configuration for each&lt;/p&gt;

&lt;p&gt;##2 hadoop defaults to find the configuration named log4j.properties(there is no such named file existed in hive configuration data)&lt;/p&gt;

&lt;p&gt;I still take log file named hive.log, not hadoop.log, since these warning info are actually from running hive.&lt;/p&gt;

&lt;p&gt;To make the pdk test running OK, without a full hive installation, I put the new log4j.properties file in pdk test directory.&lt;/p&gt;</comment>
                            <comment id="13443764" author="zhenxiao" created="Wed, 29 Aug 2012 02:40:15 +0000"  >&lt;p&gt;review request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5001&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13443765" author="zhenxiao" created="Wed, 29 Aug 2012 02:41:22 +0000"  >&lt;p&gt;A quick note, to build hive on hadoop23:&lt;br/&gt;
$ant very-clean package.-Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23&lt;/p&gt;

&lt;p&gt;And run test:&lt;br/&gt;
$ant test -Dhadoop.version=0.23.1.-Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23&lt;/p&gt;</comment>
                            <comment id="13443923" author="cwsteinbach" created="Wed, 29 Aug 2012 09:08:31 +0000"  >&lt;p&gt;@Zhenxiao: Please see my comments on phabricator.&lt;/p&gt;</comment>
                            <comment id="13444353" author="zhenxiao" created="Wed, 29 Aug 2012 19:46:17 +0000"  >&lt;p&gt;There is an error in my Jira ticket comment, actually, not necessary to put these dependencies in compile-&amp;gt;default&lt;/p&gt;

&lt;p&gt;pdk/scripts/build-plugin.xml has the following line(line 125):&lt;br/&gt;
  &amp;lt;fileset dir=&quot;${build.ivy.lib.dir}/test&quot; includes=&quot;&lt;b&gt;.jar&quot; excludes=&quot;hive&lt;/b&gt;.jar&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;which makes the build/ivy/lib/test directory also included in its test running classpath.&lt;br/&gt;
As Carl pointed, putting the dependency in compile-&amp;gt;default will break 0.20 build. It should be put into hadoop0.23.test&lt;/p&gt;

&lt;p&gt;@Carl: my updated patch is submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5001&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13445520" author="zhenxiao" created="Fri, 31 Aug 2012 00:42:30 +0000"  >&lt;p&gt;the missing hadoop-minicluster dependency should not go into ql/ivy.xml.&lt;br/&gt;
It should be in hadoop23.test, putting into build/ivy/lib/test&lt;br/&gt;
pdk plugin test is triggered via builtin/build.xml&lt;br/&gt;
add the dependency in builtin/ivy.xml, and also update builtin/build.xml,&lt;br/&gt;
so that ivy-retrieve-test dependency is added to target test&lt;/p&gt;

&lt;p&gt;Updated patch submitted for review at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5001&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13445728" author="cwsteinbach" created="Fri, 31 Aug 2012 06:46:14 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13447548" author="cwsteinbach" created="Tue, 4 Sep 2012 08:01:34 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13447695" author="hudson" created="Tue, 4 Sep 2012 13:55:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1645 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1645/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1645/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3413&quot; title=&quot;Fix pdk.PluginTest on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3413&quot;&gt;&lt;del&gt;HIVE-3413&lt;/del&gt;&lt;/a&gt;. Fix pdk.PluginTest on hadoop23 (Zhenxiao Luo via cws) (Revision 1380478)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf/log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548037" author="hudson" created="Wed, 9 Jan 2013 10:24:09 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3413&quot; title=&quot;Fix pdk.PluginTest on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3413&quot;&gt;&lt;del&gt;HIVE-3413&lt;/del&gt;&lt;/a&gt;. Fix pdk.PluginTest on hadoop23 (Zhenxiao Luo via cws) (Revision 1380478)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf/log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13549998" author="ashutoshc" created="Thu, 10 Jan 2013 19:52:59 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12606303">HIVE-3435</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12542888" name="HIVE-3413.1.patch.txt" size="5463" author="zhenxiao" created="Wed, 29 Aug 2012 02:41:36 +0000"/>
                            <attachment id="12542970" name="HIVE-3413.2.patch.txt" size="4987" author="zhenxiao" created="Wed, 29 Aug 2012 19:46:33 +0000"/>
                            <attachment id="12543209" name="HIVE-3413.3.patch.txt" size="5565" author="zhenxiao" created="Fri, 31 Aug 2012 00:44:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Aug 2012 09:08:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242362</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02u3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3414] Exception cast issue in HiveMetaStore.java</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3414</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;(This is reading the 0.8 code)&lt;/p&gt;

&lt;p&gt;Faulty way of checking for types in HiveMetaStore.java, under the HMSHandler.rename_partition method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1914 } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) { 
1915 &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;(e &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; RuntimeException); 
1916 &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; (RuntimeException)e; 
1917 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Leads to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.ClassCastException: org.apache.hadoop.hive.metastore.api.InvalidOperationException cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to java.lang.RuntimeException
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.rename_partition(HiveMetaStore.java:1916)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.alter_partition(HiveMetaStore.java:1884)
        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.alter_partition(HiveMetaStoreClient.java:818)
        at org.apache.hadoop.hive.ql.metadata.Hive.alterPartition(Hive.java:427)
        at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:1464)
        ... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When a genuine exception occurs when processing the alter_partition method.&lt;/p&gt;

&lt;p&gt;Why do we cast here and not re-throw in a wrapped fashion?&lt;/p&gt;

&lt;p&gt;On trunk the similar statements now exist just in createDefaultDB and get_database methods.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605330">HIVE-3414</key>
            <summary>Exception cast issue in HiveMetaStore.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qwertymaniac">Harsh J</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Aug 2012 03:47:38 +0000</created>
                <updated>Mon, 17 Sep 2012 09:28:40 +0000</updated>
                                            <version>0.8.1</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13456904" author="robinus2" created="Mon, 17 Sep 2012 09:28:40 +0000"  >&lt;p&gt;This might also occur during &quot;LOAD DATA&quot; commands:&lt;/p&gt;

&lt;p&gt;Failed with exception java.lang.ClassCastException: org.apache.hadoop.hive.metastore.api.InvalidOperationException cannot be cast to java.lang.RuntimeException&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MoveTask&lt;br/&gt;
Oops, exit with status 9&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Sep 2012 09:28:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3415] Reference new dependencies in LICENSE and NOTICE files</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3415</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12605354">HIVE-3415</key>
            <summary>Reference new dependencies in LICENSE and NOTICE files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Aug 2012 09:46:39 +0000</created>
                <updated>Sat, 6 Dec 2014 05:23:26 +0000</updated>
                                                                            <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124489</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3416] Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3416</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TestAvroSerdeUtils determinSchemaCanReadSchemaFromHDFS is failing when running hive on hadoop23:&lt;/p&gt;

&lt;p&gt;$ant very-clean package -Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23&lt;/p&gt;

&lt;p&gt;$ant test -Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23 -Dtestcase=TestAvroSerdeUtils&lt;/p&gt;


&lt;p&gt; &amp;lt;testcase classname=&quot;org.apache.hadoop.hive.serde2.avro.TestAvroSerdeUtils&quot; name=&quot;determineSchemaCanReadSchemaFromHDFS&quot; time=&quot;0.21&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;error message=&quot;org/apache/hadoop/net/StaticMapping&quot; type=&quot;java.lang.NoClassDefFoundError&quot;&amp;gt;java.lang.NoClassDefFoundError: org/apache/hadoop/net/StaticMapping&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:534)&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:489)&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:360)&lt;br/&gt;
    at org.apache.hadoop.hive.serde2.avro.TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS(TestAvroSerdeUtils.java:187)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)&lt;br/&gt;
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)&lt;br/&gt;
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)&lt;br/&gt;
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)&lt;br/&gt;
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)&lt;br/&gt;
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)&lt;br/&gt;
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)&lt;br/&gt;
    at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.net.StaticMapping&lt;br/&gt;
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)&lt;br/&gt;
    at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)&lt;br/&gt;
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)&lt;br/&gt;
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)&lt;br/&gt;
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)&lt;br/&gt;
    ... 25 more&lt;br/&gt;
&amp;lt;/error&amp;gt;&lt;br/&gt;
  &amp;lt;/testcase&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605436">HIVE-3416</key>
            <summary>Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Aug 2012 21:16:18 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:14 +0000</updated>
                            <resolved>Tue, 4 Sep 2012 08:46:23 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13444429" author="zhenxiao" created="Wed, 29 Aug 2012 21:25:04 +0000"  >&lt;p&gt;The problem is, TestAvroSerdeUtils has a dependency on hadoop-hdfs-&lt;b&gt;&lt;del&gt;tests.jar in calling MiniDFSCluster.java, which has a dependency on hadoop-common&lt;/del&gt;&lt;/b&gt;-tests.jar in calling StaticMapping.java.&lt;/p&gt;

&lt;p&gt;These two dependency is not specified in serde/ivy.xml, and not included in hadoop23.test:&lt;br/&gt;
hadoop-hdfs-*-tests.jar&lt;br/&gt;
hadoop-common-*-tests.jar&lt;/p&gt;

&lt;p&gt;Just adding hadoop-hdfs-&lt;b&gt;&lt;del&gt;tests.jar does not implicitly add hadoop-common&lt;/del&gt;&lt;/b&gt;-tests.jar, I propose to add both dependencies, and also updated serde/ivy.xml first line in defining xml schema for maven, so that m:classifier could be used.&lt;/p&gt;

&lt;p&gt;Also, in build-common.xml, the following lines are in test.classpath definition:&lt;br/&gt;
      &amp;lt;fileset dir=&quot;${build.ivy.lib.dir}/hadoop0.${hadoop.mr.rev}.shim&quot; includes=&quot;*.jar&quot; erroronmissingdir=&quot;false&quot; /&amp;gt;&lt;br/&gt;
      &amp;lt;pathelement location=&quot;${build.classes}&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;      &amp;lt;!-- we strip out hadoop jars present in places other than the hadoop shimmed dir--&amp;gt;&lt;br/&gt;
      &amp;lt;fileset dir=&quot;${hive.root}/build/ivy/lib/test&quot; includes=&quot;*.jar&quot; erroronmissingdir=&quot;false&quot;&lt;br/&gt;
               excludes=&quot;*&lt;b&gt;/hive_&lt;/b&gt;.jar,*&lt;b&gt;/hive-&lt;/b&gt;.jar,*&lt;b&gt;/hadoop-&lt;/b&gt;.jar&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;fileset dir=&quot;${hive.root}/build/ivy/lib/default&quot; includes=&quot;*.jar&quot; erroronmissingdir=&quot;false&quot;&lt;br/&gt;
               excludes=&quot;*&lt;b&gt;/hive_&lt;/b&gt;.jar,*&lt;b&gt;/hive-&lt;/b&gt;.jar,*&lt;b&gt;/hadoop-&lt;/b&gt;.jar&quot; /&amp;gt;&lt;/p&gt;


&lt;p&gt;Which excludes all the hadoop-*jars in build/ivy/lib/test directory from the test.classpath.&lt;/p&gt;

&lt;p&gt;So, adding the dependencies in serde/ivy.xml does not work. We need to add them in shims/ivy.xml, which is included in the test.classpath.&lt;/p&gt;</comment>
                            <comment id="13444430" author="zhenxiao" created="Wed, 29 Aug 2012 21:29:31 +0000"  >&lt;p&gt;Review request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5025&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As stated in the previous comment, dependencies are added in shims/ivy.xml, so that they are included in test.classpath. They are also added in serde/ivy.xml, so that we have the note that serde has these dependencies.&lt;/p&gt;</comment>
                            <comment id="13447561" author="cwsteinbach" created="Tue, 4 Sep 2012 08:39:02 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13447565" author="cwsteinbach" created="Tue, 4 Sep 2012 08:46:23 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13448016" author="hudson" created="Tue, 4 Sep 2012 20:25:38 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1646 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1646/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1646/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3416&quot; title=&quot;Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3416&quot;&gt;&lt;del&gt;HIVE-3416&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&lt;br/&gt;
(Zhenxiao Luo via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3416&quot; title=&quot;Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3416&quot;&gt;&lt;del&gt;HIVE-3416&lt;/del&gt;&lt;/a&gt;: Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&lt;/p&gt;

&lt;p&gt;TestAvroSerdeUtils determinSchemaCanReadSchemaFromHDFS is failing when running hive on hadoop23:&lt;/p&gt;

&lt;p&gt;$ant very-clean package -Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23&lt;/p&gt;

&lt;p&gt;$ant test -Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23 -Dtestcase=TestAvroSerdeUtils&lt;/p&gt;

&lt;p&gt; &amp;lt;testcase classname=&quot;org.apache.hadoop.hive.serde2.avro.TestAvroSerdeUtils&quot; name=&quot;determineSchemaCanReadSchemaFromHDFS&quot; time=&quot;0.21&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;error message=&quot;org/apache/hadoop/net/StaticMapping&quot; type=&quot;java.lang.NoClassDefFoundError&quot;&amp;gt;java.lang.NoClassDefFoundError: org/apache/hadoop/net/StaticMapping&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:534)&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:489)&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:360)&lt;br/&gt;
    at org.apache.hadoop.hive.serde2.avro.TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS(TestAvroSerdeUtils.java:187)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)&lt;br/&gt;
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)&lt;br/&gt;
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)&lt;br/&gt;
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)&lt;br/&gt;
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)&lt;br/&gt;
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)&lt;br/&gt;
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)&lt;br/&gt;
    at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.net.StaticMapping&lt;br/&gt;
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)&lt;br/&gt;
    at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)&lt;br/&gt;
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)&lt;br/&gt;
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)&lt;br/&gt;
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)&lt;br/&gt;
    ... 25 more&lt;br/&gt;
&amp;lt;/error&amp;gt;&lt;br/&gt;
  &amp;lt;/testcase&amp;gt;&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D5025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5025&lt;/a&gt; (Revision 1380490)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380490&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380490&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548036" author="hudson" created="Wed, 9 Jan 2013 10:24:09 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3416&quot; title=&quot;Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3416&quot;&gt;&lt;del&gt;HIVE-3416&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&lt;br/&gt;
(Zhenxiao Luo via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3416&quot; title=&quot;Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3416&quot;&gt;&lt;del&gt;HIVE-3416&lt;/del&gt;&lt;/a&gt;: Fix TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS when running Hive on hadoop23&lt;/p&gt;

&lt;p&gt;TestAvroSerdeUtils determinSchemaCanReadSchemaFromHDFS is failing when running hive on hadoop23:&lt;/p&gt;

&lt;p&gt;$ant very-clean package -Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23&lt;/p&gt;

&lt;p&gt;$ant test -Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23 -Dtestcase=TestAvroSerdeUtils&lt;/p&gt;

&lt;p&gt; &amp;lt;testcase classname=&quot;org.apache.hadoop.hive.serde2.avro.TestAvroSerdeUtils&quot; name=&quot;determineSchemaCanReadSchemaFromHDFS&quot; time=&quot;0.21&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;error message=&quot;org/apache/hadoop/net/StaticMapping&quot; type=&quot;java.lang.NoClassDefFoundError&quot;&amp;gt;java.lang.NoClassDefFoundError: org/apache/hadoop/net/StaticMapping&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:534)&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:489)&lt;br/&gt;
    at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:360)&lt;br/&gt;
    at org.apache.hadoop.hive.serde2.avro.TestAvroSerdeUtils.determineSchemaCanReadSchemaFromHDFS(TestAvroSerdeUtils.java:187)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)&lt;br/&gt;
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)&lt;br/&gt;
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)&lt;br/&gt;
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)&lt;br/&gt;
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)&lt;br/&gt;
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)&lt;br/&gt;
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)&lt;br/&gt;
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)&lt;br/&gt;
    at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.net.StaticMapping&lt;br/&gt;
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)&lt;br/&gt;
    at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)&lt;br/&gt;
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)&lt;br/&gt;
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)&lt;br/&gt;
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)&lt;br/&gt;
    ... 25 more&lt;br/&gt;
&amp;lt;/error&amp;gt;&lt;br/&gt;
  &amp;lt;/testcase&amp;gt;&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D5025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5025&lt;/a&gt; (Revision 1380490)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380490&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380490&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550065" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:14 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12542991" name="HIVE-3416.1.patch.txt" size="2269" author="zhenxiao" created="Wed, 29 Aug 2012 21:29:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Sep 2012 08:39:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242359</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02u3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14476</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3417] mulit inserts when the from statement is a subquery,this is a bug</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3417</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;vi mulit-insert.sql&lt;br/&gt;
create table src (key string, value string);&lt;br/&gt;
load data local inpath &apos;./in1.txt&apos; overwrite into table src;&lt;br/&gt;
drop table if exists test1;&lt;br/&gt;
drop table if exists test2;&lt;br/&gt;
create table test1 (key string, value string) partitioned by (dt string);&lt;br/&gt;
create table test2 (key string, value string) partitioned by (dt string);&lt;br/&gt;
select * from src;&lt;br/&gt;
from (select * from src&lt;br/&gt;
      where key is not null&lt;br/&gt;
  ) --there is a bug here &lt;br/&gt;
insert overwrite table test1 PARTITION (dt=&apos;1&apos;) select key ,value where key=&apos;48&apos;&lt;br/&gt;
insert overwrite table test2 PARTITION (dt=&apos;2&apos;) select key, value where key=&apos;100&apos;;&lt;br/&gt;
select * from test1;&lt;br/&gt;
select * from test2;&lt;/p&gt;

&lt;p&gt;test1 and test2 shoud both have a single line of context.But it&apos;s not .&lt;/p&gt;

&lt;p&gt;Has a Solution:&lt;br/&gt;
when set hive.ppd.remove.duplicatefilters=false;&lt;br/&gt;
this&apos;s not such bug.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Linux 3.0.0-14-generic #23-Ubuntu SMP Mon Nov 21 20:34:47 UTC 2011 i686 i686 i386 GNU/Linux&lt;br/&gt;
java version &quot;1.6.0_25&quot;&lt;br/&gt;
hadoop-0.20.2-cdh3u0&lt;br/&gt;
hive-0.8.1&lt;/p&gt;</environment>
        <key id="12605457">HIVE-3417</key>
            <summary>mulit inserts when the from statement is a subquery,this is a bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="caofangkun">caofangkun</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Aug 2012 01:23:25 +0000</created>
                <updated>Thu, 30 Aug 2012 07:32:14 +0000</updated>
                                            <version>0.8.1</version>
                                                    <component>Query Processor</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13444756" author="clarkyzl" created="Thu, 30 Aug 2012 07:32:14 +0000"  >&lt;p&gt;I think this bug was involved by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1538&quot; title=&quot;FilterOperator is applied twice with ppd on.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1538&quot;&gt;&lt;del&gt;HIVE-1538&lt;/del&gt;&lt;/a&gt; for the optimizer prunes the wrong filters. And I think we can modify the optimizer to make it work in good manners.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Aug 2012 07:32:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259239</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3418] Exception while running a MR from hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3418</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;br/&gt;
java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row (tag=0) {&quot;key&quot;:{},&quot;value&quot;:&lt;/p&gt;
{&quot;_col0&quot;:&quot;16481&quot;,&quot;_col1&quot;:&quot;200&quot;,&quot;_col2&quot;:&quot;413&quot;,&quot;_col3&quot;:&quot;510&quot;,&quot;_col4&quot;:&quot;703&quot;,&quot;_col5&quot;:&quot;8/18/2012&quot;,&quot;_col6&quot;:&quot;xxxxxx&quot;,&quot;_col7&quot;:null,&quot;_col8&quot;:&quot;English - United States&quot;,&quot;_col9&quot;:&quot;1.0&quot;,&quot;_col10&quot;:&quot;USD&quot;,&quot;_col11&quot;:&quot;kjsdhhdfk&quot;,&quot;_col12&quot;:&quot;xcv&quot;,&quot;_col13&quot;:&quot;sdfasdf&quot;,&quot;_col14&quot;:&quot;329&quot;,&quot;_col15&quot;:&quot;Phrase&quot;,&quot;_col16&quot;:&quot;&quot;,&quot;_col17&quot;:&quot;Search&quot;,&quot;_col18&quot;:&quot;X20&quot;,&quot;_col19&quot;:&quot;ferewer&quot;,&quot;_col20&quot;:&quot;0.0&quot;,&quot;_col21&quot;:&quot;&quot;,&quot;_col22&quot;:&quot;0.0&quot;,&quot;_col23&quot;:&quot;0&quot;,&quot;_col24&quot;:&quot;0&quot;,&quot;_col25&quot;:&quot;1&quot;,&quot;_col26&quot;:&quot;Text ad&quot;,&quot;_col27&quot;:&quot;0.0&quot;,&quot;_col28&quot;:&quot;Cost per Click&quot;,&quot;_col29&quot;:&quot;&quot;,&quot;_col30&quot;:&quot;Broad&quot;,&quot;_col31&quot;:&quot;phone&quot;,&quot;_col32&quot;:&quot;9&quot;,&quot;_col33&quot;:&quot;3&quot;,&quot;_col34&quot;:&quot;2&quot;,&quot;_col35&quot;:&quot;2&quot;,&quot;_col36&quot;:&quot;9&quot;,&quot;_col37&quot;:&quot;3&quot;,&quot;_col38&quot;:&quot;2&quot;,&quot;_col39&quot;:&quot;2&quot;,&quot;_col40&quot;:&quot;329&quot;,&quot;_col41&quot;:&quot;2012-08-29 19:19:49&quot;,&quot;_col42&quot;:&quot;700&quot;,&quot;_col43&quot;:&quot;daily&quot;,&quot;_col44&quot;:&quot;2012&quot;,&quot;_col45&quot;:&quot;8&quot;,&quot;_col46&quot;:&quot;18&quot;}
&lt;p&gt;,&quot;alias&quot;:0} at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:268) at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420) at org.apache.hadoop.mapred.Child$4.run(Child.java:255) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083) at org.apache.hadoop.mapred.Child.main(Child.java:249) Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row (tag=0) {&quot;key&quot;:{},&quot;value&quot;:&lt;/p&gt;
{&quot;_col0&quot;:&quot;16481&quot;,&quot;_col1&quot;:&quot;200&quot;,&quot;_col2&quot;:&quot;413&quot;,&quot;_col3&quot;:&quot;510&quot;,&quot;_col4&quot;:&quot;703&quot;,&quot;_col5&quot;:&quot;8/18/2012&quot;,&quot;_col6&quot;:&quot;xxxxxx&quot;,&quot;_col7&quot;:null,&quot;_col8&quot;:&quot;English - United States&quot;,&quot;_col9&quot;:&quot;1.0&quot;,&quot;_col10&quot;:&quot;USD&quot;,&quot;_col11&quot;:&quot;kjsdhhdfk&quot;,&quot;_col12&quot;:&quot;xcv&quot;,&quot;_col13&quot;:&quot;sdfasdf&quot;,&quot;_col14&quot;:&quot;329&quot;,&quot;_col15&quot;:&quot;Phrase&quot;,&quot;_col16&quot;:&quot;&quot;,&quot;_col17&quot;:&quot;Search&quot;,&quot;_col18&quot;:&quot;X20&quot;,&quot;_col19&quot;:&quot;ferewer&quot;,&quot;_col20&quot;:&quot;0.0&quot;,&quot;_col21&quot;:&quot;&quot;,&quot;_col22&quot;:&quot;0.0&quot;,&quot;_col23&quot;:&quot;0&quot;,&quot;_col24&quot;:&quot;0&quot;,&quot;_col25&quot;:&quot;1&quot;,&quot;_col26&quot;:&quot;Text ad&quot;,&quot;_col27&quot;:&quot;0.0&quot;,&quot;_col28&quot;:&quot;Cost per Click&quot;,&quot;_col29&quot;:&quot;&quot;,&quot;_col30&quot;:&quot;Broad&quot;,&quot;_col31&quot;:&quot;phone&quot;,&quot;_col32&quot;:&quot;9&quot;,&quot;_col33&quot;:&quot;3&quot;,&quot;_col34&quot;:&quot;2&quot;,&quot;_col35&quot;:&quot;2&quot;,&quot;_col36&quot;:&quot;9&quot;,&quot;_col37&quot;:&quot;3&quot;,&quot;_col38&quot;:&quot;2&quot;,&quot;_col39&quot;:&quot;2&quot;,&quot;_col40&quot;:&quot;329&quot;,&quot;_col41&quot;:&quot;2012-08-29 19:19:49&quot;,&quot;_col42&quot;:&quot;700&quot;,&quot;_col43&quot;:&quot;daily&quot;,&quot;_col44&quot;:&quot;2012&quot;,&quot;_col45&quot;:&quot;8&quot;,&quot;_col46&quot;:&quot;18&quot;}
&lt;p&gt;,&quot;alias&quot;:0} at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:256) ... 7 more Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /tmp/hive-hadoop/hive_2012-08-29_19-19-33_185_8477163109273214/_task_tmp.-ext-10000/accountid=700/gr=daily/year=2012/month=8/day=18/_tmp.000000_0 could only be replicated to 0 nodes, instead of 1 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1556) at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696) at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) at org.apache.hadoop.hive.ql.exec.FileSinkOperator.processOp(FileSinkOperator.java:603) at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471) at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762) at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84) at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471) at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762) at org.apache.hadoop.hive.ql.exec.ExtractOperator.processOp(ExtractOperator.java:45) at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471) at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:247) ... 7 more Caused by: org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /tmp/hive-hadoop/hive_2012-08-29_19-19-33_185_8477163109273214/_task_tmp.-ext-10000/accountid=700/gr=daily/year=2012/month=8/day=18/_tmp.000000_0 could only be replicated to 0 nodes, instead of 1 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1556) at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696) at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) at org.apache.hadoop.ipc.Client.call(Client.java:1066) at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225) at $Proxy2.addBlock(Unknown Source) at sun.reflect.GeneratedMethodAccessor20.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82) at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59) at $Proxy2.addBlock(Unknown Source) at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3507) at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3370) at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2700(DFSClient.java:2586) at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2826)&lt;/p&gt;</description>
                <environment>&lt;p&gt;This exception was intermittent and do not appear always, I was not able to boil down the actual reason on why this is appearing.&lt;br/&gt;
hive: 0.8.1 &lt;br/&gt;
OS: CentOS 5.8&lt;br/&gt;
hadoop: 1.0&lt;br/&gt;
hive metastore: mysql 5.17&lt;/p&gt;</environment>
        <key id="12605465">HIVE-3418</key>
            <summary>Exception while running a MR from hive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shashankagarwal1706">Shashank Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Aug 2012 03:27:36 +0000</created>
                <updated>Thu, 30 Aug 2012 04:09:04 +0000</updated>
                                            <version>0.8.1</version>
                                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13444658" author="shashankagarwal1706" created="Thu, 30 Aug 2012 04:09:04 +0000"  >&lt;p&gt;I received it again. now, it has gone beyond the intermittent nature. Am I doing something wrong. I had never received it earlier, but started seeing it on decent amount of load on the system.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>252698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d3d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74321</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3419] drop partition does not work for non-equality oprator.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3419</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Drop partition query failes when below query is executed with postgres as metastore.Whereas when derby is used, drop partition query is pased.&lt;/p&gt;

&lt;p&gt;create table ptestfilter (a string, b int) partitioned by (c string);&lt;br/&gt;
alter table ptestfilter1 add partition (c=&apos;1&apos;);&lt;br/&gt;
alter table ptestfilter1 add partition (c=&apos;2&apos;);&lt;br/&gt;
&quot;alter table ptestfilter1 drop partition (c!=&apos;2&apos;);&quot;--&amp;gt; failed&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hive -0.9.1&lt;br/&gt;
postgres-9.0.7 as metastore.&lt;/p&gt;</environment>
        <key id="12605645">HIVE-3419</key>
            <summary>drop partition does not work for non-equality oprator.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rohithsharma">Rohith Sharma K S</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2012 06:42:41 +0000</created>
                <updated>Sat, 1 Sep 2012 00:50:58 +0000</updated>
                                            <version>0.9.1</version>
                    <version>0.10.0</version>
                                                    <component>Metastore</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13445726" author="rohithsharma" created="Fri, 31 Aug 2012 06:45:31 +0000"  >&lt;p&gt;JDO throws NullPointerException for above partitions.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-08-31 12:13:26,466 DEBUG metastore.ObjectStore (ObjectStore.java:listMPartitionsByFilter(1680)) - Executing listMPartitionsByFilter
2012-08-31 12:13:26,474 DEBUG metastore.ObjectStore (ObjectStore.java:makeQueryFilterString(1636)) - jdoFilter =  partitionName.substring(partitionName.indexOf(&quot;c=&quot;)+2) != hive_filter_param_0
2012-08-31 12:13:26,475 DEBUG metastore.ObjectStore (ObjectStore.java:listMPartitionsByFilter(1701)) - Filter specified is c &amp;lt;&amp;gt; &apos;2&apos;, JDOQL filter is table.tableName == t1 &amp;amp;&amp;amp; table.database.name == t2 &amp;amp;&amp;amp; ( partitionName.substring(partitionName.indexOf(&quot;c=&quot;)+2) != hive_filter_param_0 )
2012-08-31 12:13:26,478 ERROR ql.Driver (SessionState.java:printError(400)) - FAILED: Error in semantic analysis: Partition not found c &amp;lt;&amp;gt; &apos;2&apos;
org.apache.hadoop.hive.ql.parse.SemanticException: Partition not found c &amp;lt;&amp;gt; &apos;2&apos;
	at org.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer.addTableDropPartsOutputs(DDLSemanticAnalyzer.java:2249)
	at org.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer.analyzeAlterTableDropParts(DDLSemanticAnalyzer.java:1818)
	at org.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer.analyzeInternal(DDLSemanticAnalyzer.java:300)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:244)
...
...
...
Caused by: java.lang.NullPointerException
	at org.datanucleus.store.mapped.mapping.MappingHelper.getMappingIndices(MappingHelper.java:35)
	at org.datanucleus.store.mapped.expression.StatementText.applyParametersToStatement(StatementText.java:194)
	at org.datanucleus.store.rdbms.query.RDBMSQueryUtils.getPreparedStatementForQuery(RDBMSQueryUtils.java:233)
	at org.datanucleus.store.rdbms.query.legacy.SQLEvaluator.evaluate(SQLEvaluator.java:115)
	at org.datanucleus.store.rdbms.query.legacy.JDOQLQuery.performExecute(JDOQLQuery.java:288)
	at org.datanucleus.store.query.Query.executeQuery(Query.java:1657)
	at org.datanucleus.store.rdbms.query.legacy.JDOQLQuery.executeQuery(JDOQLQuery.java:245)
	at org.datanucleus.store.query.Query.executeWithMap(Query.java:1526)
	at org.datanucleus.jdo.JDOQuery.executeWithMap(JDOQuery.java:334)
	at org.apache.hadoop.hive.metastore.ObjectStore.listMPartitionsByFilter(ObjectStore.java:1711)
	at org.apache.hadoop.hive.metastore.ObjectStore.getPartitionsByFilter(ObjectStore.java:1586)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13445818" author="rohithsharma" created="Fri, 31 Aug 2012 10:14:48 +0000"  >&lt;p&gt;I think it looks like problem with datanuclues.I found another issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2609&quot; title=&quot;NPE when pruning partitions by thrift method get_partitions_by_filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2609&quot;&gt;HIVE-2609&lt;/a&gt; with same cause for the problem.&lt;/p&gt;</comment>
                            <comment id="13446541" author="appodictic" created="Sat, 1 Sep 2012 00:50:58 +0000"  >&lt;p&gt;I am somewhat scared to let people drop by non-quality. It seems like potential &apos;rm -rf&apos; situation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 1 Sep 2012 00:50:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3420] Inefficiency in hbase handler when process query including rowkey range scan</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3420</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When query hive with hbase rowkey range, hive map tasks do not leverage startrow, endrow information in tablesplit. For example, if the rowkeys fit into 5 hbase files, then where will be 5 map tasks. Ideally, each task will process 1 file. But in current implementation, each task processes 5 files repeatedly. The behavior not only waste network bandwidth, but also worse the lock contention in HBase block cache as each task have to access the same block. The problem code is in HiveHBaseTableInputFormat.convertFilte as below:&lt;br/&gt;
&#8230;&#8230;&lt;br/&gt;
    if (tableSplit != null) &lt;/p&gt;
{
      tableSplit = new TableSplit(
        tableSplit.getTableName(),
        startRow,
        stopRow,
        tableSplit.getRegionLocation());
    }
&lt;p&gt;    scan.setStartRow(startRow);&lt;br/&gt;
    scan.setStopRow(stopRow);&lt;br/&gt;
&#8230;&#8230;&lt;br/&gt;
As tableSplit already include startRow, endRow information of file, the better implementation will be:&lt;/p&gt;

&lt;p&gt;        &#8230;&#8230;&lt;br/&gt;
        byte[] splitStart = startRow;&lt;br/&gt;
        byte[] splitStop = stopRow;&lt;br/&gt;
    if (tableSplit != null) {&lt;/p&gt;

&lt;p&gt;           if(tableSplit.getStartRow() != null)&lt;/p&gt;
{
                        splitStart = startRow.length == 0 ||
          Bytes.compareTo(tableSplit.getStartRow(), startRow) &amp;gt;= 0 ?
            tableSplit.getStartRow() : startRow;
                }
&lt;p&gt;                if(tableSplit.getEndRow() != null)&lt;/p&gt;
{
                        splitStop = (stopRow.length == 0 ||
          Bytes.compareTo(tableSplit.getEndRow(), stopRow) &amp;lt;= 0) &amp;amp;&amp;amp;
          tableSplit.getEndRow().length &amp;gt; 0 ?
            tableSplit.getEndRow() : stopRow;
                }
&lt;p&gt;                       &lt;br/&gt;
      tableSplit = new TableSplit(&lt;br/&gt;
        tableSplit.getTableName(),&lt;br/&gt;
        splitStart,&lt;br/&gt;
        splitStop,&lt;br/&gt;
        tableSplit.getRegionLocation());&lt;br/&gt;
    }&lt;br/&gt;
    scan.setStartRow(splitStart);&lt;br/&gt;
    scan.setStopRow(splitStop);&lt;br/&gt;
        &#8230;&#8230;&lt;br/&gt;
In my test, the changed code will improve performance more than 30%.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hive-0.9.0 + HBase-0.94.1&lt;/p&gt;</environment>
        <key id="12605650">HIVE-3420</key>
            <summary>Inefficiency in hbase handler when process query including rowkey range scan</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="gang">Gang Deng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2012 07:10:55 +0000</created>
                <updated>Sun, 11 Oct 2015 07:22:57 +0000</updated>
                            <resolved>Sun, 22 Sep 2013 08:17:06 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="13482075" author="lianhuiwang" created="Tue, 23 Oct 2012 03:12:21 +0000"  >&lt;p&gt;@Gong Deng&lt;br/&gt;
yes,i agree with you.in InputFormat getRecordReader()&lt;br/&gt;
tableSplit = convertFilter(jobConf, scan, tableSplit, iKey,&lt;br/&gt;
      getStorageFormatOfKey(columnsMapping.get(iKey).mappingSpec,&lt;br/&gt;
      jobConf.get(HBaseSerDe.HBASE_TABLE_DEFAULT_STORAGE_TYPE, &quot;string&quot;)));&lt;br/&gt;
it have done&lt;br/&gt;
tableSplit = new TableSplit(&lt;br/&gt;
        tableSplit.getTableName(),&lt;br/&gt;
        startRow,&lt;br/&gt;
        stopRow,&lt;br/&gt;
        tableSplit.getRegionLocation(),&lt;br/&gt;
	tableSplit.getConf());&lt;br/&gt;
also in getplits(),a tableSplit lead to a regionLocation task.now that splits have not any effect. &lt;br/&gt;
so startRow,stopRow in tableSplit is inside the region row ranges in tableSplit.&lt;/p&gt;

&lt;p&gt;IMO,the convertFilter() logic code used in many places.for example:&lt;br/&gt;
HBaseStorageHandler.decomposePredicate()&lt;br/&gt;
HiveHBaseTableInputFormat.getSplits()&lt;br/&gt;
HiveHBaseTableInputFormat.getRecordReader()&lt;/p&gt;

&lt;p&gt;i think there need one place to use it. in HBaseStorageHandler.decomposePredicate().and that can store row key ranges.&lt;br/&gt;
and then HiveHBaseTableInputFormat.getSplits(),HiveHBaseTableInputFormat.getRecordReader() according to table&apos;s regioninfo split the key ranges tasks.&lt;/p&gt;

&lt;p&gt;other have ideas?thx.&lt;/p&gt;
</comment>
                            <comment id="13529641" author="navis" created="Wed, 12 Dec 2012 05:52:37 +0000"  >&lt;p&gt;@Gang Deng &lt;br/&gt;
This is pretty important issue. I&apos;ll make a patch for a review.&lt;/p&gt;</comment>
                            <comment id="13529688" author="phabricator@reviews.facebook.net" created="Wed, 12 Dec 2012 07:05:20 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3420&quot; title=&quot;Inefficiency in hbase handler when process query including rowkey range scan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3420&quot;&gt;&lt;del&gt;HIVE-3420&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Inefficiency in hbase handler when process query including rowkey range scan&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1943 Inefficiency in hbase handler when process query including rowkey range scan&lt;/p&gt;

&lt;p&gt;  When query hive with hbase rowkey range, hive map tasks do not leverage startrow, endrow information in tablesplit. For example, if the rowkeys fit into 5 hbase files, then where will be 5 map tasks. Ideally, each task will process 1 file. But in current implementation, each task processes 5 files repeatedly. The behavior not only waste network bandwidth, but also worse the lock contention in HBase block cache as each task have to access the same block. The problem code is in HiveHBaseTableInputFormat.convertFilte as below:&lt;br/&gt;
  &#8230;&#8230;&lt;br/&gt;
      if (tableSplit != null)&lt;/p&gt;
  {
        tableSplit = new TableSplit(
          tableSplit.getTableName(),
          startRow,
          stopRow,
          tableSplit.getRegionLocation());
      }
&lt;p&gt;      scan.setStartRow(startRow);&lt;br/&gt;
      scan.setStopRow(stopRow);&lt;br/&gt;
  &#8230;&#8230;&lt;br/&gt;
  As tableSplit already include startRow, endRow information of file, the better implementation will be:&lt;/p&gt;

&lt;p&gt;          &#8230;&#8230;&lt;br/&gt;
          byte[] splitStart = startRow;&lt;br/&gt;
          byte[] splitStop = stopRow;&lt;br/&gt;
      if (tableSplit != null) {&lt;/p&gt;

&lt;p&gt;             if(tableSplit.getStartRow() != null)&lt;/p&gt;
  {
                          splitStart = startRow.length == 0 ||
            Bytes.compareTo(tableSplit.getStartRow(), startRow) &amp;gt;= 0 ?
              tableSplit.getStartRow() : startRow;
                  }
&lt;p&gt;                  if(tableSplit.getEndRow() != null)&lt;/p&gt;
  {
                          splitStop = (stopRow.length == 0 ||
            Bytes.compareTo(tableSplit.getEndRow(), stopRow) &amp;lt;= 0) &amp;amp;&amp;amp;
            tableSplit.getEndRow().length &amp;gt; 0 ?
              tableSplit.getEndRow() : stopRow;
                  }

&lt;p&gt;        tableSplit = new TableSplit(&lt;br/&gt;
          tableSplit.getTableName(),&lt;br/&gt;
          splitStart,&lt;br/&gt;
          splitStop,&lt;br/&gt;
          tableSplit.getRegionLocation());&lt;br/&gt;
      }&lt;br/&gt;
      scan.setStartRow(splitStart);&lt;br/&gt;
      scan.setStopRow(splitStop);&lt;br/&gt;
          &#8230;&#8230;&lt;br/&gt;
  In my test, the changed code will improve performance more than 30%.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/17415/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/17415/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13685109" author="navis" created="Mon, 17 Jun 2013 08:59:09 +0000"  >&lt;p&gt;For a table with two region, executed simple query with PPD-able predicates,&lt;br/&gt;
input rows (without patch) : 2,472 rows &lt;br/&gt;
input rows (with patch) : 1,236 rows&lt;/p&gt;

&lt;p&gt;For large hbase table, it can make a big difference.&lt;/p&gt;</comment>
                            <comment id="13773917" author="phabricator@reviews.facebook.net" created="Sat, 21 Sep 2013 22:12:52 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3420&quot; title=&quot;Inefficiency in hbase handler when process query including rowkey range scan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3420&quot;&gt;&lt;del&gt;HIVE-3420&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Inefficiency in hbase handler when process query including rowkey range scan&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1943&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;/p&gt;</comment>
                            <comment id="13773988" author="ashutoshc" created="Sun, 22 Sep 2013 08:17:06 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13773996" author="hudson" created="Sun, 22 Sep 2013 09:43:54 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2350 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2350/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2350/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3420&quot; title=&quot;Inefficiency in hbase handler when process query including rowkey range scan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3420&quot;&gt;&lt;del&gt;HIVE-3420&lt;/del&gt;&lt;/a&gt; : Inefficiency in hbase handler when process query including rowkey range scan (Navis via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1525329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1525329&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13774003" author="hudson" created="Sun, 22 Sep 2013 11:38:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hive-trunk-hadoop1-ptest #179 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/179/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/179/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3420&quot; title=&quot;Inefficiency in hbase handler when process query including rowkey range scan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3420&quot;&gt;&lt;del&gt;HIVE-3420&lt;/del&gt;&lt;/a&gt; : Inefficiency in hbase handler when process query including rowkey range scan (Navis via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1525329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1525329&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13774096" author="hudson" created="Sun, 22 Sep 2013 21:32:56 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2 #451 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/451/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/451/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3420&quot; title=&quot;Inefficiency in hbase handler when process query including rowkey range scan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3420&quot;&gt;&lt;del&gt;HIVE-3420&lt;/del&gt;&lt;/a&gt; : Inefficiency in hbase handler when process query including rowkey range scan (Navis via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1525329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1525329&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12639670">HIVE-4247</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12857415">HIVE-11609</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12560520" name="HIVE-3420.D7311.1.patch" size="4748" author="phabricator@reviews.facebook.net" created="Wed, 12 Dec 2012 07:05:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Oct 2012 03:12:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240708</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i014tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4552</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3421] Column Level Top K Values Statistics</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3421</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Compute (estimate) top k values statistics for each column, and put the most skewed column into skewed info, if user hasn&apos;t specified skew.&lt;/p&gt;

&lt;p&gt;This feature depends on ListBucketing (create table skewed on) &lt;a href=&quot;https://cwiki.apache.org/Hive/listbucketing.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/Hive/listbucketing.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;All column topk can be added to skewed info, if in the future skewed info supports multiple independent columns.&lt;/p&gt;

&lt;p&gt;The TopK algorithm is based on this paper:&lt;br/&gt;
&lt;a href=&quot;http://www.cs.ucsb.edu/research/tech_reports/reports/2005-23.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.cs.ucsb.edu/research/tech_reports/reports/2005-23.pdf&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605771">HIVE-3421</key>
            <summary>Column Level Top K Values Statistics</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="farlue">Feng Lu</assignee>
                                    <reporter username="farlue">Feng Lu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2012 18:58:41 +0000</created>
                <updated>Tue, 7 Oct 2014 04:28:07 +0000</updated>
                                                                                <due></due>
                            <votes>6</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13446261" author="farlue" created="Fri, 31 Aug 2012 19:05:56 +0000"  >&lt;p&gt;Patch attached. Review is available at &lt;a href=&quot;https://reviews.facebook.net/D5073&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5073&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13450448" author="namit" created="Fri, 7 Sep 2012 08:08:41 +0000"  >&lt;p&gt;Can you add a wiki explaining the user behavior ?&lt;/p&gt;

&lt;p&gt;I mean, when the parameters are set, what is stored in the metastore ?&lt;br/&gt;
How does it impact when the data is already skewed due to list bucketing ?&lt;/p&gt;</comment>
                            <comment id="13450449" author="namit" created="Fri, 7 Sep 2012 08:08:49 +0000"  >&lt;p&gt;comments&lt;/p&gt;</comment>
                            <comment id="13450801" author="farlue" created="Fri, 7 Sep 2012 17:21:34 +0000"  >&lt;p&gt;@Namit wiki page is available: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Top+K+Stats&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Top+K+Stats&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13454785" author="namit" created="Thu, 13 Sep 2012 10:10:34 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13762679" author="clarkyzl" created="Tue, 10 Sep 2013 03:16:19 +0000"  >&lt;p&gt;Would any committers review this? IMHO, It looks cool.&lt;/p&gt;</comment>
                            <comment id="14106624" author="sjtufighter" created="Fri, 22 Aug 2014 08:18:18 +0000"  >&lt;p&gt;this is very useful!!!  I  am  waiting  the  coming  version&lt;/p&gt;</comment>
                            <comment id="14161455" author="lefty@hortonworks.com" created="Tue, 7 Oct 2014 04:28:07 +0000"  >&lt;p&gt;It&apos;s already documented in the wiki, with a link from the Statistics doc:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Top+K+Stats&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Column Level Top K Statistics &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/StatsDev#StatsDev-Scope&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Statistics in Hive &amp;#8211; Scope &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It was hidden under &quot;How to Contribute&quot; so I&apos;ve just moved it into DesignDocs (In Progress).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543746" name="HIVE-3421.patch.1.txt" size="193099" author="farlue" created="Tue, 4 Sep 2012 21:29:10 +0000"/>
                            <attachment id="12543953" name="HIVE-3421.patch.2.txt" size="201307" author="farlue" created="Thu, 6 Sep 2012 00:45:25 +0000"/>
                            <attachment id="12543982" name="HIVE-3421.patch.3.txt" size="201570" author="farlue" created="Thu, 6 Sep 2012 04:36:45 +0000"/>
                            <attachment id="12544079" name="HIVE-3421.patch.4.txt" size="207229" author="farlue" created="Thu, 6 Sep 2012 17:33:08 +0000"/>
                            <attachment id="12544173" name="HIVE-3421.patch.5.txt" size="207670" author="farlue" created="Fri, 7 Sep 2012 06:27:35 +0000"/>
                            <attachment id="12544174" name="HIVE-3421.patch.6.txt" size="207826" author="farlue" created="Fri, 7 Sep 2012 06:27:46 +0000"/>
                            <attachment id="12544247" name="HIVE-3421.patch.7.txt" size="208216" author="farlue" created="Fri, 7 Sep 2012 17:29:29 +0000"/>
                            <attachment id="12544305" name="HIVE-3421.patch.8.txt" size="262893" author="farlue" created="Fri, 7 Sep 2012 21:54:55 +0000"/>
                            <attachment id="12549173" name="HIVE-3421.patch.9.txt" size="271463" author="farlue" created="Mon, 15 Oct 2012 17:36:42 +0000"/>
                            <attachment id="12543324" name="HIVE-3421.patch.txt" size="192759" author="farlue" created="Fri, 31 Aug 2012 19:05:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Sep 2012 08:08:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248770</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09ztz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3422] Support partial partition specifications in when enabling/disabling protections in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3422</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently if you have a table t with partition columns c1 and c2 the following command works:&lt;br/&gt;
ALTER TABLE t PARTITION (c1 = &apos;x&apos;, c2 = &apos;y&apos;) ENABLE NO_DROP;&lt;/p&gt;

&lt;p&gt;The following does not:&lt;br/&gt;
ALTER TABLE t PARTITION (c1 = &apos;x&apos;) ENABLE NO_DROP;&lt;/p&gt;

&lt;p&gt;We would like all existing partitions for which c1 = &apos;x&apos; to have NO_DROP enabled when a user runs the above command&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605818">HIVE-3422</key>
            <summary>Support partial partition specifications in when enabling/disabling protections in Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeanxu">Jean Xu</assignee>
                                    <reporter username="jeanxu">Jean Xu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2012 23:51:11 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:25 +0000</updated>
                            <resolved>Sun, 16 Sep 2012 17:17:44 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13449923" author="jeanxu" created="Thu, 6 Sep 2012 18:38:27 +0000"  >&lt;p&gt;Phabricator diff: &lt;a href=&quot;https://reviews.facebook.net/D5241&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5241&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13454638" author="namit" created="Thu, 13 Sep 2012 05:01:10 +0000"  >&lt;p&gt;Comments in phabricator.&lt;/p&gt;</comment>
                            <comment id="13455124" author="jeanxu" created="Thu, 13 Sep 2012 18:42:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D5241&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5241&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13455576" author="namit" created="Fri, 14 Sep 2012 05:02:42 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13456324" author="namit" created="Sat, 15 Sep 2012 05:20:43 +0000"  >&lt;p&gt;minor comments&lt;/p&gt;</comment>
                            <comment id="13456327" author="jeanxu" created="Sat, 15 Sep 2012 05:42:18 +0000"  >&lt;p&gt;  &lt;a href=&quot;https://reviews.facebook.net/D5241&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5241&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13456427" author="namit" created="Sat, 15 Sep 2012 15:26:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;running tests&lt;/p&gt;</comment>
                            <comment id="13456609" author="namit" created="Sun, 16 Sep 2012 17:17:44 +0000"  >&lt;p&gt;Committed. Thanks Jean&lt;/p&gt;</comment>
                            <comment id="13457087" author="hudson" created="Mon, 17 Sep 2012 15:33:53 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1674 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1674/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1674/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3422&quot; title=&quot;Support partial partition specifications in when enabling/disabling protections in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3422&quot;&gt;&lt;del&gt;HIVE-3422&lt;/del&gt;&lt;/a&gt; Support partial partition specifications in when enabling/disabling protections in Hive&lt;br/&gt;
(Jean Xu via namit) (Revision 1385320)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1385320&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1385320&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/AlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/RawStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/DummyRawStoreForJdoConnection.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_invalidspec.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_nodrop.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_nodrop_table.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_offline.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/alter_partition_protect_mode.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_invalidspec.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_nodrop.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_nodrop_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_offline.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_partition_protect_mode.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548035" author="hudson" created="Wed, 9 Jan 2013 10:24:08 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3422&quot; title=&quot;Support partial partition specifications in when enabling/disabling protections in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3422&quot;&gt;&lt;del&gt;HIVE-3422&lt;/del&gt;&lt;/a&gt; Support partial partition specifications in when enabling/disabling protections in Hive&lt;br/&gt;
(Jean Xu via namit) (Revision 1385320)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1385320&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1385320&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/AlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/RawStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/DummyRawStoreForJdoConnection.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_invalidspec.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_nodrop.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_nodrop_table.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/alter_partition_offline.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/alter_partition_protect_mode.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_invalidspec.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_nodrop.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_nodrop_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_partition_offline.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_partition_protect_mode.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550109" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:25 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Sep 2012 05:01:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124492</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>For alter table with partial partition spec, DDLSemanticAnalyzer will call table.getPartitions&lt;br/&gt;
to get all the partitions and insert them to outputs. DDLTask::alterTable will get all the partitions for&lt;br/&gt;
ALTERPROTECTMODE, and alter the mode for all the partitions.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3423] merge_dynamic_partition.q is failing when running hive on real cluster</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3423</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;merge_dynamic_partition (and a number of other qfiles) is failing when running the current hive on a real cluster:&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: java.lang.NoClassDefFoundError: org/apache/commons/compress/compressors/gzip/GzipCompressorOutputStream&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:161)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:268)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:262)&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/compress/compressors/gzip/GzipCompressorOutputStream&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.FileSinkOperator.getDynPartDirectory(FileSinkOperator.java:644)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.FileSinkOperator.getDynOutPaths(FileSinkOperator.java:613)&lt;br/&gt;
	at &lt;/p&gt;</description>
                <environment></environment>
        <key id="12605832">HIVE-3423</key>
            <summary>merge_dynamic_partition.q is failing when running hive on real cluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Sep 2012 01:11:32 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:48 +0000</updated>
                            <resolved>Sun, 2 Sep 2012 16:20:55 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13446572" author="zhenxiao" created="Sat, 1 Sep 2012 01:26:40 +0000"  >&lt;p&gt;This is a dependency problem,&lt;/p&gt;

&lt;p&gt;in common/src/java/org/apache/hadoop/hive/common/FileUtils.java:&lt;/p&gt;

&lt;p&gt;FileUtils.java, tar() is using GzipCompressorOutputStream, and import this class in the header.&lt;/p&gt;

&lt;p&gt;When FileSinkOperator.java is calling FileUtils.makePartName(dpColNames, row) in its getDynPartDirectory() function, this NoClassDefFoundError is triggered.&lt;/p&gt;

&lt;p&gt;This is because, both tar() and makePartName() are static functions in FileUtils.java.&lt;/p&gt;

&lt;p&gt;when one static member of a class is referenced, the JVM has to initialize all static members, including static methods, and part of initializing static methods involves making sure that all of the dependencies are available.&lt;/p&gt;

&lt;p&gt;so, when makePartName() is called from FileSinkOperator.getDynPartDirectory(), tar() is initialized, and JVM tries to resolve the GzipCompressorOutputStream dependency.&lt;/p&gt;

&lt;p&gt;GzipCompressorOutputStream is from commons-compress*.jar. This dependency is added to common/ivy.xml, but not included in hive-exec.jar.&lt;/p&gt;

&lt;p&gt;When running on one machine, it is passed, sine commons-compress*.jar is resolved by ivy, and it is in build/ivy/lib/default.&lt;/p&gt;

&lt;p&gt;But when running in a real cluster, commons-compress*.jar is not included in all mapper/reducers classpath. So, this NoClassDefFoundError would be triggered.&lt;/p&gt;

&lt;p&gt;My proposed solution is to add commons-compress*.jar into hive-exec.jar.&lt;/p&gt;</comment>
                            <comment id="13446574" author="zhenxiao" created="Sat, 1 Sep 2012 01:55:03 +0000"  >&lt;p&gt;Review Request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5103&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13446744" author="appodictic" created="Sat, 1 Sep 2012 15:51:29 +0000"  >&lt;p&gt;This approach is fine. Do you think we can simple redo FileUtils so it is not a final class and we remove the static methods? Or is it that case that we have to include commons-compress in hive-exec regardless? &lt;/p&gt;</comment>
                            <comment id="13446871" author="zhenxiao" created="Sun, 2 Sep 2012 03:43:25 +0000"  >&lt;p&gt;@Edward: I just found that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3295&quot; title=&quot;HIVE-3128 introduced bug causing dynamic partitioning to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3295&quot;&gt;&lt;del&gt;HIVE-3295&lt;/del&gt;&lt;/a&gt; already fixes the bug by a redo of FileUtils. This is definitely better than adding commons-compress into hive-exec. Thanks a lot for your guide. How about I take &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3295&quot; title=&quot;HIVE-3128 introduced bug causing dynamic partitioning to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3295&quot;&gt;&lt;del&gt;HIVE-3295&lt;/del&gt;&lt;/a&gt;&apos;s patch, and mark this as duplicate?&lt;/p&gt;</comment>
                            <comment id="13550210" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:48 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12600090">HIVE-3295</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12560540">HIVE-3128</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12543391" name="HIVE-3423.1.patch.txt" size="1284" author="zhenxiao" created="Sat, 1 Sep 2012 01:55:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 1 Sep 2012 15:51:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>252695</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d2vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3424] Error by upgrading a Hive 0.7.0 database to 0.8.0 (008-HIVE-2246.mysql.sql) </title>
                <link>https://issues.apache.org/jira/browse/HIVE-3424</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+----------------------------------------+ 
| Inserted table columns into COLUMNS_V2 | 
+----------------------------------------+ 
| Inserted table columns into COLUMNS_V2 | 
+----------------------------------------+ 
+--------------------------+ 
| Completed migrating idxs | 
+--------------------------+ 
| Completed migrating idxs | 
+--------------------------+ 
ERROR 1025 (HY000) at line 250 in file: &lt;span class=&quot;code-quote&quot;&gt;&apos;008-HIVE-2246.mysql.sql&apos;&lt;/span&gt;: Error on rename of &lt;span class=&quot;code-quote&quot;&gt;&apos;./metastore/COLUMNS_OLD&apos;&lt;/span&gt; to &lt;span class=&quot;code-quote&quot;&gt;&apos;./metastore/#sql2-14e6-6eb&apos;&lt;/span&gt; (errno: 152)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12605961">HIVE-3424</key>
            <summary>Error by upgrading a Hive 0.7.0 database to 0.8.0 (008-HIVE-2246.mysql.sql) </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alo.alt">Alexander Alten-Lorenz</assignee>
                                    <reporter username="alo.alt">Alexander Alten-Lorenz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Sep 2012 06:45:39 +0000</created>
                <updated>Thu, 10 Jan 2013 19:52:56 +0000</updated>
                            <resolved>Tue, 4 Sep 2012 08:27:21 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13447140" author="alo.alt" created="Mon, 3 Sep 2012 06:46:22 +0000"  >&lt;p&gt;please assign to me, thanks&lt;/p&gt;</comment>
                            <comment id="13447141" author="cwsteinbach" created="Mon, 3 Sep 2012 06:54:14 +0000"  >&lt;p&gt;@Alex: Please submit a review request for this on either reviewboard or phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13447461" author="cwsteinbach" created="Tue, 4 Sep 2012 02:39:30 +0000"  >&lt;p&gt;+1. Will commit.&lt;/p&gt;</comment>
                            <comment id="13447462" author="cwsteinbach" created="Tue, 4 Sep 2012 02:45:10 +0000"  >&lt;p&gt;Code review from Alex: &lt;a href=&quot;https://reviews.apache.org/r/6894/diff/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6894/diff/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13447558" author="cwsteinbach" created="Tue, 4 Sep 2012 08:27:21 +0000"  >&lt;p&gt;Committed to trunk. Thanks Alexander!&lt;/p&gt;</comment>
                            <comment id="13448015" author="hudson" created="Tue, 4 Sep 2012 20:25:37 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1646 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1646/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1646/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3424&quot; title=&quot;Error by upgrading a Hive 0.7.0 database to 0.8.0 (008-HIVE-2246.mysql.sql) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3424&quot;&gt;&lt;del&gt;HIVE-3424&lt;/del&gt;&lt;/a&gt;. Error by upgrading a Hive 0.7.0 database to 0.8.0 (008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.mysql.sql) (Alexander Alten-Lorenz via cws) (Revision 1380483)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380483&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380483&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548045" author="hudson" created="Wed, 9 Jan 2013 10:24:10 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3424&quot; title=&quot;Error by upgrading a Hive 0.7.0 database to 0.8.0 (008-HIVE-2246.mysql.sql) &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3424&quot;&gt;&lt;del&gt;HIVE-3424&lt;/del&gt;&lt;/a&gt;. Error by upgrading a Hive 0.7.0 database to 0.8.0 (008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.mysql.sql) (Alexander Alten-Lorenz via cws) (Revision 1380483)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380483&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380483&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13549985" author="ashutoshc" created="Thu, 10 Jan 2013 19:52:56 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543516" name="HIVE-3424.patch" size="969" author="alo.alt" created="Mon, 3 Sep 2012 06:48:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 3 Sep 2012 06:54:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242360</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02u3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14477</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3425] NPE exception in Tests escape1 and escape2.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3425</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Tests are executed with Postgres as metastore. These 2 test&lt;br/&gt;
testCliDriver_escape1 and &lt;br/&gt;
testCliDriver_escape2 fails throwing NPE.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hive-0.9.1 + &lt;br/&gt;
Postgres as metastore.&lt;/p&gt;</environment>
        <key id="12605968">HIVE-3425</key>
            <summary>NPE exception in Tests escape1 and escape2.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rohithsharma">Rohith Sharma K S</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Sep 2012 09:43:54 +0000</created>
                <updated>Mon, 3 Sep 2012 09:47:29 +0000</updated>
                                            <version>0.9.1</version>
                    <version>0.10.0</version>
                                                    <component>Metastore</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13447185" author="rohithsharma" created="Mon, 3 Sep 2012 09:47:29 +0000"  >&lt;p&gt;Exception trace is as follows&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-09-03 15:11:15,903 ERROR exec.Task (SessionState.java:printError(400)) - Failed with exception java.lang.NullPointerException
org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.NullPointerException
	at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:1460)
	at org.apache.hadoop.hive.ql.metadata.Hive.loadPartition(Hive.java:1158)
	at org.apache.hadoop.hive.ql.metadata.Hive.loadDynamicPartitions(Hive.java:1232)
	at org.apache.hadoop.hive.ql.exec.MoveTask.execute(MoveTask.java:269)
	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:135)
	at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)
	at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1329)
	at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1121)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:954)
	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:258)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:215)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:406)
	at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:689)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:557)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
Caused by: java.lang.NullPointerException
	at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:301)
	at org.datanucleus.store.rdbms.scostore.RDBMSMapEntrySetStore.size(RDBMSMapEntrySetStore.java:126)
	at org.datanucleus.sco.backed.Map.size(Map.java:532)
	at org.datanucleus.store.mapped.mapping.MapMapping.postInsert(MapMapping.java:131)
	at org.datanucleus.store.rdbms.request.InsertRequest.execute(InsertRequest.java:515)
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertTable(RDBMSPersistenceHandler.java:146)
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertObject(RDBMSPersistenceHandler.java:121)
	at org.datanucleus.jdo.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3275)
	at org.datanucleus.jdo.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:3249)
	at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1428)
	at org.datanucleus.store.mapped.mapping.PersistableMapping.setObjectAsValue(PersistableMapping.java:664)
	at org.datanucleus.store.mapped.mapping.PersistableMapping.setObject(PersistableMapping.java:423)
	at org.datanucleus.store.rdbms.fieldmanager.ParameterSetter.storeObjectField(ParameterSetter.java:197)
	at org.datanucleus.state.AbstractStateManager.providedObjectField(AbstractStateManager.java:1023)
	at org.apache.hadoop.hive.metastore.model.MPartition.jdoProvideField(MPartition.java)
	at org.apache.hadoop.hive.metastore.model.MPartition.jdoProvideFields(MPartition.java)
	at org.datanucleus.jdo.state.JDOStateManagerImpl.provideFields(JDOStateManagerImpl.java:2803)
	at org.datanucleus.store.rdbms.request.InsertRequest.execute(InsertRequest.java:294)
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertTable(RDBMSPersistenceHandler.java:146)
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertObject(RDBMSPersistenceHandler.java:121)
	at org.datanucleus.jdo.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3275)
	at org.datanucleus.jdo.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:3249)
	at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1428)
	at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1236)
	at org.datanucleus.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:655)
	at org.datanucleus.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:680)
	at org.apache.hadoop.hive.metastore.ObjectStore.addPartition(ObjectStore.java:1056)
	at sun.reflect.GeneratedMethodAccessor51.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.hive.metastore.RetryingRawStore.invoke(RetryingRawStore.java:111)
	at $Proxy7.addPartition(Unknown Source)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.append_partition_common(HiveMetaStore.java:1101)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.append_partition(HiveMetaStore.java:1128)
	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.appendPartition(HiveMetaStoreClient.java:363)
	at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:1428)
	... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259242</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3426] union with same source should be optimized</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3426</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12606027">HIVE-3426</key>
            <summary>union with same source should be optimized</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Sep 2012 05:37:43 +0000</created>
                <updated>Mon, 14 Jan 2013 22:09:50 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13447496" author="namit" created="Tue, 4 Sep 2012 05:45:41 +0000"  >&lt;p&gt;Consider a query like:&lt;/p&gt;


&lt;p&gt;insert overwrite table tst_output partition (ds=&apos;1&apos;)&lt;br/&gt;
select key, keyVal, agg&lt;br/&gt;
from&lt;br/&gt;
  (&lt;br/&gt;
    select key, &apos;238&apos; as keyVal, count(1) as agg from srcpart&lt;br/&gt;
    where ds = &apos;2008-04-08&apos; and hr = &apos;11&apos; and key = 238&lt;br/&gt;
    group by key&lt;/p&gt;

&lt;p&gt;union all&lt;/p&gt;

&lt;p&gt;    select key, &apos;165&apos; as keyVal, count(1) as agg from srcpart&lt;br/&gt;
    where ds = &apos;2008-04-08&apos; and hr = &apos;11&apos; and key = 165&lt;br/&gt;
    group by key&lt;/p&gt;

&lt;p&gt;union all&lt;/p&gt;

&lt;p&gt;    select key, &apos;409&apos; as keyVal, count(1) as agg from srcpart&lt;br/&gt;
    where ds = &apos;2008-04-08&apos; and hr = &apos;12&apos; and key = 409&lt;br/&gt;
    group by key&lt;/p&gt;

&lt;p&gt;union all&lt;/p&gt;

&lt;p&gt;    select key, &apos;484&apos; as keyVal, count(1) as agg from srcpart&lt;br/&gt;
    where ds = &apos;2008-04-08&apos; and hr = &apos;12&apos; and key = 484&lt;br/&gt;
    group by key&lt;br/&gt;
) subq;&lt;/p&gt;



&lt;p&gt;It requires different map-reduce jobs for each sub-query.&lt;br/&gt;
Since the same base table is being queried, ideally it should be a single map-reduce job.&lt;br/&gt;
Atleast a single scan should be performed on ds=2008-04-08/hr=11 and hr=12 respectively.&lt;br/&gt;
The query plan should be like a query plan with different branches for the table scan. &lt;/p&gt;</comment>
                            <comment id="13466419" author="zhenxiao" created="Sun, 30 Sep 2012 05:37:54 +0000"  >&lt;p&gt;TS &amp;#8211; FIL &amp;#8211; SEL&lt;br/&gt;
                \&lt;br/&gt;
                 \&lt;br/&gt;
                  UNION&lt;br/&gt;
                 /&lt;br/&gt;
                /&lt;br/&gt;
TS &amp;#8211; TIL &amp;#8211; SEL&lt;/p&gt;

&lt;p&gt;Needs to be updated into:&lt;/p&gt;

&lt;p&gt;TS --FIL &amp;#8211; SEL&lt;/p&gt;

&lt;p&gt;And, the FIL condition needs to be updated,&lt;/p&gt;

&lt;p&gt;eg.&lt;/p&gt;

&lt;p&gt;select key from srcpart where key = 484&lt;br/&gt;
union all&lt;br/&gt;
select key from srcpart where key = 409&lt;/p&gt;

&lt;p&gt;should be updated into:&lt;/p&gt;

&lt;p&gt;select key from srcpart where key = 484 OR key = 409&lt;/p&gt;
</comment>
                            <comment id="13466544" author="namit" created="Sun, 30 Sep 2012 18:30:51 +0000"  >&lt;p&gt;Yes, but what about the case when there is an group by in the sub-query ?&lt;/p&gt;</comment>
                            <comment id="13551621" author="ashutoshc" created="Fri, 11 Jan 2013 23:17:05 +0000"  >&lt;p&gt;What Zhenxiao is proposing a good first step. Lets try to optimize that query first and worry about GBY in subquery later.&lt;/p&gt;</comment>
                            <comment id="13551701" author="shreepadma" created="Sat, 12 Jan 2013 00:31:25 +0000"  >&lt;p&gt;Yup, let&apos;s try to optimize the simple case first. Optimizing subqueries with GBY can be the next step. &lt;/p&gt;</comment>
                            <comment id="13553184" author="ashutoshc" created="Mon, 14 Jan 2013 22:09:50 +0000"  >&lt;p&gt;I wonder if &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3276&quot; title=&quot;optimize union sub-queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3276&quot;&gt;&lt;del&gt;HIVE-3276&lt;/del&gt;&lt;/a&gt; already covers the simple case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 30 Sep 2012 05:37:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3427] Newly added test testCliDriver_metadata_export_drop is consistently failing on trunk</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3427</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I think its a new test which was added via &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3068&quot; title=&quot;Add ability to export table metadata as JSON on table drop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3068&quot;&gt;&lt;del&gt;HIVE-3068&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12606133">HIVE-3427</key>
            <summary>Newly added test testCliDriver_metadata_export_drop is consistently failing on trunk</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Sep 2012 18:47:48 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:01 +0000</updated>
                            <resolved>Fri, 7 Sep 2012 03:43:19 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13447931" author="ashutoshc" created="Tue, 4 Sep 2012 18:49:21 +0000"  >&lt;p&gt;Apache hudson builds are consistently failing on this test starting from &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1640/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1640/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13447963" author="appodictic" created="Tue, 4 Sep 2012 19:16:54 +0000"  >&lt;p&gt;Is this something specific to hadoop 0.21? Testing seems fine locally.&lt;/p&gt;</comment>
                            <comment id="13447982" author="ashutoshc" created="Tue, 4 Sep 2012 19:28:35 +0000"  >&lt;p&gt;it really is hadoop-0.20.1 (yeah.. I know its confusing) which is the default config if you checkout hive and run tests. Error seems to be related to following log message which is there in the bottom of that build page.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mkdir: cannot create directory ../build/ql/test/data/exports/: File exists
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;May be its related to how test is run and doesn&apos;t reproduce if you run test in isolation, but when run all the tests together. We have had such situations earlier. I also saw this failure when I ran the full test-suite with exact this mkdir error log in default hive/hadoop config.&lt;/p&gt;</comment>
                            <comment id="13447986" author="appodictic" created="Tue, 4 Sep 2012 19:33:44 +0000"  >&lt;p&gt;I do not have the source code with me ATM. I am guessing the issue is that some other test creates ../build/ql/test/data/exports and does not clean it up. In that case we should enforce the rule that each unit test should clean up it&apos;s own mess. If the issue is hive itself is trying to create this dir multiple times I would like to understand that.&lt;/p&gt;</comment>
                            <comment id="13448881" author="ashutoshc" created="Wed, 5 Sep 2012 16:55:06 +0000"  >&lt;p&gt;This is holding off apache builds from going green &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1647/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1647/testReport/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13449290" author="navis" created="Thu, 6 Sep 2012 00:09:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D5193&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5193&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The test missed semicolon in last line, which cleans-up the directory.&lt;/p&gt;</comment>
                            <comment id="13449398" author="ashutoshc" created="Thu, 6 Sep 2012 04:08:18 +0000"  >&lt;p&gt;Navis,&lt;br/&gt;
Nice catch, but I am not sure if this will fix the issue. Since test fails while doing mkdir and not rmr. Looks like dir already exists before that tests begin to run (perhaps created by some other test, which didnt do rmr of it). We can either hunt down that offending test which is not rmr&apos;ng the dir and update it or we can name this dir with some unique name, like exports_3068 so thats make it unlikely that dir already exist by the time this test runs. &lt;br/&gt;
I am also running the full-suite with your current patch to test whether that fixes the build or not.&lt;/p&gt;</comment>
                            <comment id="13449461" author="navis" created="Thu, 6 Sep 2012 06:39:04 +0000"  >&lt;p&gt;@Ashutosh,&lt;br/&gt;
You are right. &quot;build/ql/test/data/exports&quot; directory is used by many tests(exim~, etc.). &lt;br/&gt;
How about changing test directory &quot;build/ql/test/data/exports&quot; to &quot;build/ql/test/data/exports/&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3428&quot; title=&quot;Fix log4j configuration errors when running hive on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3428&quot;&gt;&lt;del&gt;HIVE-3428&lt;/del&gt;&lt;/a&gt;&quot; or something?&lt;/p&gt;</comment>
                            <comment id="13449486" author="navis" created="Thu, 6 Sep 2012 07:17:55 +0000"  >&lt;p&gt;reproduce : ant package test -Dtestcase=TestCliDriver -Dqfile=exim_00_nonpart_empty.q,metadata_export_drop.q&lt;/p&gt;

&lt;p&gt;Changed directory and test passed.&lt;/p&gt;</comment>
                            <comment id="13449636" author="appodictic" created="Thu, 6 Sep 2012 13:21:09 +0000"  >&lt;p&gt;As a follow up the economic tests should clean themselves up since that is the real issue here.&lt;/p&gt;</comment>
                            <comment id="13449637" author="appodictic" created="Thu, 6 Sep 2012 13:21:46 +0000"  >&lt;p&gt;*exim tests&lt;/p&gt;</comment>
                            <comment id="13449751" author="ashutoshc" created="Thu, 6 Sep 2012 15:46:19 +0000"  >&lt;p&gt;Navis,&lt;br/&gt;
Current patch fixes the problem. +1 will commit if tests pass. Thanks for your time for this one.&lt;/p&gt;

&lt;p&gt;Ed,&lt;br/&gt;
Totally agree. Mind creating a new jira for it.&lt;/p&gt;</comment>
                            <comment id="13450307" author="ashutoshc" created="Fri, 7 Sep 2012 03:43:19 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13450499" author="hudson" created="Fri, 7 Sep 2012 09:59:43 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1653 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1653/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1653/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3427&quot; title=&quot;Newly added test testCliDriver_metadata_export_drop is consistently failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3427&quot;&gt;&lt;del&gt;HIVE-3427&lt;/del&gt;&lt;/a&gt; : Newly added test testCliDriver_metadata_export_drop is consistently failing on trunk (Navis via Ashutosh Chauhan) (Revision 1381851)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381851&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381851&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/metadata_export_drop.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548046" author="hudson" created="Wed, 9 Jan 2013 10:24:11 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3427&quot; title=&quot;Newly added test testCliDriver_metadata_export_drop is consistently failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3427&quot;&gt;&lt;del&gt;HIVE-3427&lt;/del&gt;&lt;/a&gt; : Newly added test testCliDriver_metadata_export_drop is consistently failing on trunk (Navis via Ashutosh Chauhan) (Revision 1381851)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381851&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381851&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/metadata_export_drop.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550004" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:01 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543945" name="HIVE-3427.1.patch.txt" size="623" author="navis" created="Thu, 6 Sep 2012 00:14:37 +0000"/>
                            <attachment id="12544003" name="HIVE-3427.2.patch.txt" size="965" author="navis" created="Thu, 6 Sep 2012 07:17:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Sep 2012 19:16:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lnq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3428] Fix log4j configuration errors when running hive on hadoop23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3428</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are log4j configuration errors when running hive on hadoop23, some of them may fail testcases, since the following log4j error message could printed to console, or to output file, which diffs from the expected output:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; log4j:ERROR Could not find value for key log4j.appender.NullAppender&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; log4j:ERROR Could not instantiate appender named &quot;NullAppender&quot;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 12/09/04 11:34:42 WARN conf.HiveConf: hive-site.xml not found on CLASSPATH&lt;/p&gt;</description>
                <environment></environment>
        <key id="12606175">HIVE-3428</key>
            <summary>Fix log4j configuration errors when running hive on hadoop23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Sep 2012 22:55:54 +0000</created>
                <updated>Thu, 16 May 2013 21:10:21 +0000</updated>
                            <resolved>Wed, 27 Feb 2013 07:22:16 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13448158" author="zhenxiao" created="Tue, 4 Sep 2012 23:05:30 +0000"  >&lt;p&gt;Problems in the current log4j configuration:&lt;/p&gt;

&lt;p&gt;1. When hive is running MapReduce job using hadoop(which locates in testutils/hadoop), hadoop is configured using HADOOP_CONF_DIR. While, currently, HADOOP_CONF_DIR is not set properly(not set at all except for pdk scripts).&lt;/p&gt;

&lt;p&gt;2. hadoop is by default doing log4j initialization by reading log4j.properties in its HADOOP_CONF_DIR. We do have a hive-log4j.properties, which is used to initialize hive log4j, but no such log4j.properties exited for hadoop.&lt;/p&gt;

&lt;p&gt;3. In the current hive-log4j.properties file, there is no log4j.appender.NullAppender defined, which could produce the following log4j error message:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; log4j:ERROR Could not find value for key log4j.appender.NullAppender&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; log4j:ERROR Could not instantiate appender named &quot;NullAppender&quot;.&lt;/p&gt;

&lt;p&gt;4. The current log4j Event Counter Appender is initialized with an deprecated value, which would produce the following warning message:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;/p&gt;</comment>
                            <comment id="13448187" author="zhenxiao" created="Tue, 4 Sep 2012 23:22:51 +0000"  >&lt;p&gt;Review Request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5133&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13451692" author="cwsteinbach" created="Sun, 9 Sep 2012 22:49:52 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13451694" author="cwsteinbach" created="Sun, 9 Sep 2012 22:57:21 +0000"  >&lt;p&gt;This patch seems to break lots of stuff on 0.21.&lt;/p&gt;

&lt;p&gt;@Zhenxiao: Did you try running any tests on trunk with the standard configuration (i.e. using Hadoop 0.21)?&lt;/p&gt;</comment>
                            <comment id="13452456" author="zhenxiao" created="Mon, 10 Sep 2012 21:15:18 +0000"  >&lt;p&gt;Updated patch submitted for review at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5133&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13452577" author="cwsteinbach" created="Mon, 10 Sep 2012 23:39:09 +0000"  >&lt;p&gt;More comments on phabricator.&lt;/p&gt;</comment>
                            <comment id="13453659" author="zhenxiao" created="Wed, 12 Sep 2012 02:52:11 +0000"  >&lt;p&gt;Updated patch, review request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5133&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13455342" author="zhenxiao" created="Thu, 13 Sep 2012 21:43:21 +0000"  >&lt;p&gt;Updated patch. comments addressed. review request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5133&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13458309" author="cwsteinbach" created="Tue, 18 Sep 2012 23:58:52 +0000"  >&lt;p&gt;@Zhenxiao: please see my comments on phabricator.&lt;/p&gt;</comment>
                            <comment id="13458344" author="zhenxiao" created="Wed, 19 Sep 2012 01:26:59 +0000"  >&lt;p&gt;@Carl:&lt;br/&gt;
Thanks for the comments. I updated my patch at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5133&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13498550" author="ashutoshc" created="Fri, 16 Nov 2012 02:31:09 +0000"  >&lt;p&gt;Patch doesn&apos;t apply cleanly. Zhenxiao, can you please refresh the patch?&lt;/p&gt;</comment>
                            <comment id="13542594" author="hagleitn" created="Thu, 3 Jan 2013 00:25:02 +0000"  >&lt;p&gt;Patch doesn&apos;t seem to provide configuration for hadoop.mr.rev=20S (hadoop 1-line). More importantly, if the only difference between the files is the Hadoop&apos;s deprecated EventCounter, it seems better to create a shim class for that. This way there&apos;s only one conf file and hive will pick the right file from the classpath at runtime.&lt;/p&gt;</comment>
                            <comment id="13542598" author="hagleitn" created="Thu, 3 Jan 2013 00:28:22 +0000"  >&lt;p&gt;Proposed shim for EventCounter class. Does not contain NullAppender or HADOOP_CONF variable.&lt;/p&gt;</comment>
                            <comment id="13553395" author="zhenxiao" created="Tue, 15 Jan 2013 01:45:43 +0000"  >&lt;p&gt;Hi Gunther, would you please add a review request at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/&lt;/a&gt;&lt;br/&gt;
It is easy to review there.&lt;/p&gt;</comment>
                            <comment id="13584033" author="hagleitn" created="Fri, 22 Feb 2013 07:04:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhenxiao&quot; class=&quot;user-hover&quot; rel=&quot;zhenxiao&quot;&gt;Zhenxiao Luo&lt;/a&gt;: Sorry for the delay: &lt;a href=&quot;https://reviews.facebook.net/D8805&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8805&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13587425" author="ashutoshc" created="Tue, 26 Feb 2013 19:25:43 +0000"  >&lt;p&gt;+1 Running tests.&lt;/p&gt;</comment>
                            <comment id="13588080" author="ashutoshc" created="Wed, 27 Feb 2013 07:22:16 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Gunther!&lt;/p&gt;</comment>
                            <comment id="13588405" author="hudson" created="Wed, 27 Feb 2013 15:01:27 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1989 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1989/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1989/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3428&quot; title=&quot;Fix log4j configuration errors when running hive on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3428&quot;&gt;&lt;del&gt;HIVE-3428&lt;/del&gt;&lt;/a&gt; : Fix log4j configuration errors when running hive on hadoop23 (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1450645)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1450645&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1450645&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/conf/hive-log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/conf/hive-log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/conf/log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/conf/hive-exec-log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HiveEventCounter.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/ShimLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623029" author="hudson" created="Thu, 4 Apr 2013 23:39:53 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #138 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3428&quot; title=&quot;Fix log4j configuration errors when running hive on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3428&quot;&gt;&lt;del&gt;HIVE-3428&lt;/del&gt;&lt;/a&gt; : Fix log4j configuration errors when running hive on hadoop23 (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1450645)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1450645&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1450645&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/conf/hive-log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/conf/hive-log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/conf/log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/conf/hive-exec-log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HiveEventCounter.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/ShimLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12633478">HIVE-4049</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12627108">HIVE-3886</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12570947" name="HIVE-3428.1.D8805.patch" size="6715" author="hagleitn" created="Tue, 26 Feb 2013 08:25:39 +0000"/>
                            <attachment id="12543771" name="HIVE-3428.1.patch.txt" size="5184" author="zhenxiao" created="Tue, 4 Sep 2012 23:23:08 +0000"/>
                            <attachment id="12544531" name="HIVE-3428.2.patch.txt" size="9406" author="zhenxiao" created="Mon, 10 Sep 2012 21:16:53 +0000"/>
                            <attachment id="12544757" name="HIVE-3428.3.patch.txt" size="36283" author="zhenxiao" created="Wed, 12 Sep 2012 02:51:31 +0000"/>
                            <attachment id="12545060" name="HIVE-3428.4.patch.txt" size="36323" author="zhenxiao" created="Thu, 13 Sep 2012 21:43:41 +0000"/>
                            <attachment id="12545649" name="HIVE-3428.5.patch.txt" size="36906" author="zhenxiao" created="Wed, 19 Sep 2012 01:27:15 +0000"/>
                            <attachment id="12545656" name="HIVE-3428.6.patch.txt" size="37284" author="zhenxiao" created="Wed, 19 Sep 2012 03:01:02 +0000"/>
                            <attachment id="12563003" name="HIVE-3428_SHIM_EVENT_COUNTER.patch" size="7139" author="hagleitn" created="Thu, 3 Jan 2013 00:28:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 9 Sep 2012 22:49:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258114</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kmyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
