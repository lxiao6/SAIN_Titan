<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:18:56 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-8-28+AND+created+%3C%3D+2011-9-7+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="13" total="13"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2416] Multiple distinct function to support hive.groupby.skewindata optimization</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2416</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently when multiple distinct function is used, hive.groupby.skewindata optimization parameter shall be set false, or else an exception is raised:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error in semantic analysis: DISTINCT on different columns not supported with skew in data
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Skew groupby should support multiple distinct function&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520519">HIVE-2416</key>
            <summary>Multiple distinct function to support hive.groupby.skewindata optimization</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="tedxu">Ted Xu</assignee>
                                    <reporter username="tedxu">Ted Xu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Aug 2011 05:34:46 +0000</created>
                <updated>Mon, 24 Oct 2011 20:26:02 +0000</updated>
                                                                                <due></due>
                            <votes>3</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13092703" author="amareshwari" created="Mon, 29 Aug 2011 08:46:06 +0000"  >&lt;p&gt;Will look into. Can you create a review board entry for the patch?&lt;/p&gt;</comment>
                            <comment id="13099725" author="tedxu" created="Thu, 8 Sep 2011 03:08:19 +0000"  >&lt;p&gt;Thank you Amareshwari, sorry for reply late.&lt;br/&gt;
The RB entry is created at &lt;a href=&quot;https://reviews.apache.org/r/1741/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1741/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13099875" author="amareshwari" created="Thu, 8 Sep 2011 04:47:16 +0000"  >&lt;p&gt;Can you update bugs field in the review board entry so that the updates will be seen here? Thanks. &lt;/p&gt;</comment>
                            <comment id="13099914" author="jiraposter@reviews.apache.org" created="Thu, 8 Sep 2011 04:53:10 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1741/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1741/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-08 04:52:29.083703)&lt;/p&gt;


&lt;p&gt;Review request for hive and Amareshwari Sriramadasu.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Update BUGs field to link JIRA&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Currently when multiple distinct function is used, hive.groupby.skewindata optimization parameter shall be set false, or else an exception is raised:&lt;/p&gt;

&lt;p&gt;Error in semantic analysis: DISTINCT on different columns not supported with skew in data&lt;/p&gt;

&lt;p&gt;Skew groupby should support multiple distinct function&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2416&quot; title=&quot;Multiple distinct function to support hive.groupby.skewindata optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2416&quot;&gt;HIVE-2416&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2416&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2416&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ReduceSinkOperator.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ReduceSinkOperator.java&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ReduceSinkDesc.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ReduceSinkDesc.java&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientnegative/groupby2_map_skew_multi_distinct.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientnegative/groupby2_map_skew_multi_distinct.q&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientnegative/groupby3_multi_distinct.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientnegative/groupby3_multi_distinct.q&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_multi_distinct.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_multi_distinct.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientnegative/groupby2_map_skew_multi_distinct.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientnegative/groupby2_map_skew_multi_distinct.q.out&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientnegative/groupby3_map_skew_multi_distinct.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientnegative/groupby3_map_skew_multi_distinct.q.out&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientnegative/groupby3_multi_distinct.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientnegative/groupby3_multi_distinct.q.out&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby2.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby2.q.out&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby2_map_skew.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby2_map_skew.q.out&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby2_map_skew_multi_distinct.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby2_map_skew_multi_distinct.q.out&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby3.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby3.q.out&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby3_map_skew.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby3_map_skew.q.out&lt;/a&gt; 1162620 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/nullgroup4.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/nullgroup4.q.out&lt;/a&gt; 1162620 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1741/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1741/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;All UT passed&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;
</comment>
                            <comment id="13134447" author="namit" created="Mon, 24 Oct 2011 20:25:49 +0000"  >&lt;p&gt;Can you update the patch ?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12424731">HIVE-474</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12492044" name="multi_distinct_skew.patch" size="61992" author="tedxu" created="Mon, 29 Aug 2011 08:38:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Aug 2011 08:46:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2417] Merging of compressed rcfiles fails to write the valuebuffer part correctly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2417</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The blockmerge task does not create proper rc files when merging compressed rc files as the valuebuffer writing is incorrect.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520545">HIVE-2417</key>
            <summary>Merging of compressed rcfiles fails to write the valuebuffer part correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="n_krishna_kumar">Krishna Kumar</assignee>
                                    <reporter username="n_krishna_kumar">Krishna Kumar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Aug 2011 10:21:41 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:58 +0000</updated>
                            <resolved>Thu, 1 Sep 2011 21:18:05 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13092747" author="n_krishna_kumar" created="Mon, 29 Aug 2011 10:23:34 +0000"  >&lt;p&gt;Test added&lt;/p&gt;</comment>
                            <comment id="13094287" author="he yongqiang" created="Wed, 31 Aug 2011 03:47:14 +0000"  >&lt;p&gt;Good catch, this is a regression introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2396&quot; title=&quot;RCFileReader Buffer Reuse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2396&quot;&gt;&lt;del&gt;HIVE-2396&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Can you make the testcase more easy to reproduce the problem? I mean if without the change in this diff, should get an error or incorrect results when running with that testcase. &lt;/p&gt;

&lt;p&gt;1. remove this &quot;+set mapred.output.compression.codec=org.apache.hadoop.io.compress.BZip2Codec;&quot;,&lt;br/&gt;
2. tgt_rc_merge_test only contains one file, so the &apos;alter table tgt_rc_merge_test concatenate;&apos; will basically do nothing. Can you make sure this table at least contains 2 files? You can upload 2 gzip compressed rcfile if there is not.&lt;/p&gt;

</comment>
                            <comment id="13094294" author="n_krishna_kumar" created="Wed, 31 Aug 2011 04:10:51 +0000"  >&lt;p&gt;Yes, the test is designed to produce the error when run without the change. Are you finding that that&apos;s not the case? I get an EOFException while running the same steps in my development environment (i.e., not as a unit test).&lt;/p&gt;

&lt;p&gt;1. This is needed so that the rcfiles in the target table are compressed with Bzip2. Do you mean that we should be using Default compression codec instead? Fine with me but why is that important?&lt;/p&gt;

&lt;p&gt;2. tgt does contain more than one file.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;before alter&amp;#93;&lt;/span&gt;&lt;br/&gt;
+POSTHOOK: query: show table extended like `tgt_rc_merge_test`&lt;br/&gt;
...&lt;br/&gt;
+totalNumberFiles:2&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;after alter&amp;#93;&lt;/span&gt;&lt;br/&gt;
+POSTHOOK: query: show table extended like `tgt_rc_merge_test`&lt;br/&gt;
...&lt;br/&gt;
+totalNumberFiles:1&lt;/p&gt;

&lt;p&gt;The &apos;create&apos; adds one file, and the insert adds another file. &lt;span class=&quot;error&quot;&gt;&amp;#91;OT: Does it make sense append a block merge task after an non-overwrite insert? Dunno...&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13094297" author="he yongqiang" created="Wed, 31 Aug 2011 04:33:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;The &apos;create&apos; adds one file, and the insert adds another file.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;sorry, i thought you are doing an &quot;insert overwrite &quot;, can u do 2 inserts? &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is needed so that the rcfiles in the target table are compressed with Bzip2. Do you mean that we should be using Default compression codec instead? Fine with me but why is that important?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. i mean if you remove this line and keep the line &quot;set hive.exec.compress.output = true;&quot;. The output will be compressed using DefaultCodec. The reason is that BZip2 may not installed for all hive users/dev.&lt;/p&gt;</comment>
                            <comment id="13094298" author="he yongqiang" created="Wed, 31 Aug 2011 04:34:20 +0000"  >&lt;p&gt;by &quot;2 inserts&quot;, i mean remove the &quot;load&quot; command, and use 2 inserts to pop the data. &lt;/p&gt;</comment>
                            <comment id="13094306" author="n_krishna_kumar" created="Wed, 31 Aug 2011 05:01:32 +0000"  >&lt;p&gt;Test changed after review comments&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;default codec instead of bzip2&lt;/li&gt;
	&lt;li&gt;Create + 2 inserts instead of CTAS + 1 insert&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13094963" author="he yongqiang" created="Wed, 31 Aug 2011 22:33:16 +0000"  >&lt;p&gt;+1, will commit after tests pass&lt;/p&gt;</comment>
                            <comment id="13095608" author="he yongqiang" created="Thu, 1 Sep 2011 21:18:00 +0000"  >&lt;p&gt;Committed, thanks Krishna Kumar!&lt;/p&gt;</comment>
                            <comment id="13095920" author="hudson" created="Fri, 2 Sep 2011 11:28:06 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #928 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/928/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/928/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2417&quot; title=&quot;Merging of compressed rcfiles fails to write the valuebuffer part correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2417&quot;&gt;&lt;del&gt;HIVE-2417&lt;/del&gt;&lt;/a&gt;: Merging of compressed rcfiles fails to write the valuebuffer part correctly (Krishna Kumar via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1164278&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1164278&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/create_merge_compressed.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/create_merge_compressed.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12492052" name="HIVE-2417.v0.patch" size="13891" author="n_krishna_kumar" created="Mon, 29 Aug 2011 10:23:34 +0000"/>
                            <attachment id="12492414" name="HIVE-2417.v1.patch" size="14500" author="n_krishna_kumar" created="Wed, 31 Aug 2011 05:01:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 31 Aug 2011 03:47:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2418] replace or translate function in hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2418</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;replace or translate function in hive&lt;/p&gt;</description>
                <environment>&lt;p&gt;hive-0.7.0&lt;/p&gt;</environment>
        <key id="12520547">HIVE-2418</key>
            <summary>replace or translate function in hive</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrover">Mark Grover</assignee>
                                    <reporter username="kranthikiran">kranthikiran</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Mon, 29 Aug 2011 10:36:20 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:47 +0000</updated>
                            <resolved>Wed, 6 Jun 2012 15:14:35 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <timeoriginalestimate seconds="345600">96h</timeoriginalestimate>
                            <timeestimate seconds="345600">96h</timeestimate>
                                        <comments>
                            <comment id="13283849" author="appodictic" created="Sat, 26 May 2012 00:34:10 +0000"  >&lt;p&gt;What would the function do more details are needed.&lt;/p&gt;</comment>
                            <comment id="13283855" author="fwiffo" created="Sat, 26 May 2012 00:42:11 +0000"  >&lt;p&gt;Perhaps they meant a function similar to Postgres&apos;s translate function:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.postgresql.org/docs/9.1/interactive/functions-string.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.postgresql.org/docs/9.1/interactive/functions-string.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13283861" author="appodictic" created="Sat, 26 May 2012 01:12:58 +0000"  >&lt;p&gt;This would be a nice issue to tackle for someone looking to break into hive. &lt;/p&gt;</comment>
                            <comment id="13283862" author="mgrover" created="Sat, 26 May 2012 01:15:43 +0000"  >&lt;p&gt;Edward, I would be happy to work on this. Not sure how to assign this to myself but if you could do that, that would be much appreciated. Thanks!&lt;/p&gt;</comment>
                            <comment id="13284049" author="ashutoshc" created="Sat, 26 May 2012 19:21:49 +0000"  >&lt;p&gt;Mark,&lt;br/&gt;
Assigned to you. Hack away!&lt;/p&gt;</comment>
                            <comment id="13288319" author="mgrover" created="Mon, 4 Jun 2012 02:40:15 +0000"  >&lt;p&gt;The code and test .q files are ready but I am having some trouble generating the .q.out files for the tests.&lt;/p&gt;

&lt;p&gt;As a matter of fact, I am not even able to run the existing unit tests successfully. I believe it&apos;s because of the fact the source tables that these tests access e.g. &quot;src&quot; are not available. Do I have to edit some configuration or run some init script before I can run the test?&lt;br/&gt;
The command I am using to run my test is something like (this runs an existing test and fails): &lt;br/&gt;
ant -lib testlibs clean-test test -Dtestcase=TestCliDriver -Dqfile=udf_concat_ws.q&lt;/p&gt;

&lt;p&gt;with an exception:&lt;/p&gt;

&lt;p&gt;2012-06-03 19:33:21,399 ERROR exec.Task (SessionState.java:printError(400)) - Execution failed with exit status: 127&lt;br/&gt;
2012-06-03 19:33:21,400 ERROR exec.Task (SessionState.java:printError(400)) - Obtaining error information&lt;br/&gt;
2012-06-03 19:33:21,401 ERROR exec.Task (SessionState.java:printError(400)) -&lt;br/&gt;
Task failed!&lt;br/&gt;
Task ID:&lt;br/&gt;
  Stage-1&lt;/p&gt;

&lt;p&gt;Logs:&lt;/p&gt;

&lt;p&gt;2012-06-03 19:33:21,401 ERROR exec.Task (SessionState.java:printError(400)) - /home/mgrover/hive_install/src/trunk/build/ql/tmp//hive.log&lt;br/&gt;
2012-06-03 19:33:21,402 ERROR exec.ExecDriver (MapRedTask.java:execute(286)) - Execution failed with exit status: 127&lt;br/&gt;
2012-06-03 19:33:21,594 ERROR ql.Driver (SessionState.java:printError(400)) - FAILED: Execution Error, return code 127 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;Any thoughts?&lt;/p&gt;</comment>
                            <comment id="13288320" author="mgrover" created="Mon, 4 Jun 2012 02:48:16 +0000"  >&lt;p&gt;Here is what I have so far. It&apos;s missing the .q.out files since I haven&apos;t been able to run the tests yet but I am posting it so folks can start the review.&lt;/p&gt;</comment>
                            <comment id="13288321" author="mgrover" created="Mon, 4 Jun 2012 02:50:30 +0000"  >&lt;p&gt;Here is what I have so far. It&apos;s missing the .q.out files since I haven&apos;t been able to run the tests yet but I am posting it so folks can start the review.&lt;/p&gt;</comment>
                            <comment id="13288329" author="appodictic" created="Mon, 4 Jun 2012 03:26:37 +0000"  >&lt;p&gt;127 might mean hive is not able to find java aka ... no JAVA_HOME is set. Code looks great so far. You do not need so many negative tests, tests take a long time to run. 1 or 0 is more then enough.&lt;/p&gt;

&lt;p&gt;Nice job so far.&lt;/p&gt;</comment>
                            <comment id="13288339" author="mgrover" created="Mon, 4 Jun 2012 04:49:48 +0000"  >&lt;p&gt;Thanks, Ed. That fixed the issue!&lt;/p&gt;</comment>
                            <comment id="13288341" author="mgrover" created="Mon, 4 Jun 2012 04:51:10 +0000"  >&lt;p&gt;A new version of the patch with a minor bug fix related to complex argument being passed as a parameter.&lt;br/&gt;
This has only 1 negative test.&lt;/p&gt;</comment>
                            <comment id="13288342" author="mgrover" created="Mon, 4 Jun 2012 04:51:34 +0000"  >&lt;p&gt;A new version of the patch with a minor bug fix related to complex argument being passed as a parameter.&lt;br/&gt;
This has 3 negative tests.&lt;/p&gt;</comment>
                            <comment id="13288344" author="mgrover" created="Mon, 4 Jun 2012 04:52:55 +0000"  >&lt;p&gt;I uploaded 2 v2 patches. One has 3 negative tests, the only has 1. Take your pick on which one you&apos;d like to deploy.&lt;/p&gt;</comment>
                            <comment id="13289059" author="appodictic" created="Tue, 5 Jun 2012 01:27:54 +0000"  >&lt;p&gt;Mark all looks good. 2 exceptions you need to remove the @author tag and follow the hive style rules mainly 2 spaces for an indent not tabs. There should be en eclipse style template to help with this.&lt;/p&gt;</comment>
                            <comment id="13289113" author="mgrover" created="Tue, 5 Jun 2012 03:21:26 +0000"  >&lt;p&gt;New version of the patch with minor changes related to formatting and checkstyle.&lt;/p&gt;

&lt;p&gt;With only one negative test.&lt;/p&gt;</comment>
                            <comment id="13289114" author="mgrover" created="Tue, 5 Jun 2012 03:21:44 +0000"  >&lt;p&gt;New version of the patch with minor changes related to formatting and checkstyle.&lt;/p&gt;

&lt;p&gt;With three negative tests&lt;/p&gt;</comment>
                            <comment id="13289115" author="mgrover" created="Tue, 5 Jun 2012 03:22:29 +0000"  >&lt;p&gt;Thanks for reviewing, Ed. I have taken out the @author tag and fixed the indentation. Made some minor checkstyle related fixes too. Please let me know if there is anything else.&lt;/p&gt;</comment>
                            <comment id="13289533" author="appodictic" created="Tue, 5 Jun 2012 17:01:36 +0000"  >&lt;p&gt;@Mark sorry to make you go through a couple iterations because I did only did partial reviews. One last question/comment.&lt;/p&gt;

&lt;p&gt;Hive tries to avoid allocating new objects each evaluate if possible.&lt;/p&gt;

&lt;p&gt;I notice in your process input method.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+  private String processInput(Text input) {
+    StringBuilder resultBuilder = new StringBuilder();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then later.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    String resultString = resultBuilder.toString();
+    return resultString;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is possible to change your return type to TEXT and declare the StringBuilder and result object outside the method, then each call to evaluate can clear these objects?&lt;/p&gt;

&lt;p&gt;If you do not believe coding the feature this way will create less temporary objects/garbage just say &apos;no&apos;, and I will commit as is.&lt;/p&gt;

&lt;p&gt;Also you need only provide the version with the single negative test if you commit a new version.  &lt;/p&gt;
</comment>
                            <comment id="13289914" author="mgrover" created="Wed, 6 Jun 2012 02:46:36 +0000"  >&lt;p&gt;No worries, Ed. I thought about that too. However, StringBuilder doesn&apos;t have a clear() so in order to clear it (in a non-hacky way), we have to re-create it. Alternatively, if we use Text as the return type of processInput() and get rid of the StringBuilder object, we will have to call Text.append() to append new code points to the result. Text.append() takes a byte[] as parameter. However, all the ways I can think of right now to convert a char[] (containing the code point) to byte[] (for appending to the Text object) involve creating an immutable String object as an intermediary which kind of defeats the purpose of moving away from the StringBuilder object.&lt;/p&gt;

&lt;p&gt;Given this information, I think it&apos;s best if we keep the StringBuilder creation and the code the way it is. Thanks!&lt;/p&gt;</comment>
                            <comment id="13289925" author="appodictic" created="Wed, 6 Jun 2012 03:27:21 +0000"  >&lt;p&gt;+1 will commit if test pass.&lt;/p&gt;</comment>
                            <comment id="13290195" author="appodictic" created="Wed, 6 Jun 2012 15:06:34 +0000"  >&lt;p&gt;Removed negative test cases.&lt;/p&gt;</comment>
                            <comment id="13290555" author="hudson" created="Wed, 6 Jun 2012 23:00:22 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1469 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1469/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1469/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2418&quot; title=&quot;replace or translate function in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2418&quot;&gt;&lt;del&gt;HIVE-2418&lt;/del&gt;&lt;/a&gt; Translate/Replace UDF (Mark Grover via egc) (Revision 1346933)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ecapriolo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1346933&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1346933&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFTranslate.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_translate.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_translate.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13291448" author="mgrover" created="Fri, 8 Jun 2012 00:26:18 +0000"  >&lt;p&gt;Seems like this failure is not related to the check-in and it was still committed (I see it on svn). So, I guess all is well? Also, I was thinking of documenting this UDF on the Hive UDF wiki page and putting a note saying it&apos;s available starting Hive 0.10. Is that OK? Or, is the convention to wait until the release is out and then document it? (If I can still remember to do so&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;</comment>
                            <comment id="13291465" author="appodictic" created="Fri, 8 Jun 2012 00:47:50 +0000"  >&lt;p&gt;@Mark yes. If anything is failing the last thing committed &quot;fails&quot; You are more then welcome to document anything you like in the wiki. You can put a caveat about the version if you like.&lt;/p&gt;</comment>
                            <comment id="13291473" author="mgrover" created="Fri, 8 Jun 2012 01:02:51 +0000"  >&lt;p&gt;Thanks, Ed. Looks like Lars Francke beat me to it (love your dedication to documentation, Lars!). So, it&apos;s now appropriately documented at &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13547960" author="hudson" created="Wed, 9 Jan 2013 10:23:45 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2418&quot; title=&quot;replace or translate function in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2418&quot;&gt;&lt;del&gt;HIVE-2418&lt;/del&gt;&lt;/a&gt; Translate/Replace UDF (Mark Grover via egc) (Revision 1346933)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ecapriolo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1346933&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1346933&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFTranslate.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_translate.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_translate.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550204" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:47 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12531110" name="hive-2418.1.patch.txt" size="26538" author="appodictic" created="Wed, 6 Jun 2012 15:06:34 +0000"/>
                            <attachment id="12530717" name="udf_translate_v1.patch" size="16929" author="mgrover" created="Mon, 4 Jun 2012 02:50:30 +0000"/>
                            <attachment id="12530722" name="udf_translate_v2_with_1_negative_test.patch" size="26394" author="mgrover" created="Mon, 4 Jun 2012 04:51:10 +0000"/>
                            <attachment id="12530723" name="udf_translate_v2_with_3_negative_tests.patch" size="27175" author="mgrover" created="Mon, 4 Jun 2012 04:51:34 +0000"/>
                            <attachment id="12530892" name="udf_translate_v3_with_1_negative_test.patch" size="26975" author="mgrover" created="Tue, 5 Jun 2012 03:21:25 +0000"/>
                            <attachment id="12530893" name="udf_translate_v3_with_3_negative_tests.patch" size="27756" author="mgrover" created="Tue, 5 Jun 2012 03:21:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 May 2012 00:34:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42127</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ufr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>replace or translate function </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2419] CREATE TABLE AS SELECT should create warehouse directory</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2419</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If you run a CTAS statement on a fresh Hive install without a warehouse directory (as is the case with Amazon EMR), it runs the query but errors out at the end:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;hive&amp;gt; create table foo as select * from t_message limit 1;&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
...&lt;br/&gt;
Ended Job = job_201108301753_0001&lt;br/&gt;
Moving data to: hdfs://ip-10-202-22-194.ec2.internal:9000/mnt/hive_07_1/warehouse/foo&lt;br/&gt;
Failed with exception Unable to rename: hdfs://ip-10-202-22-194.ec2.internal:9000/mnt/var/lib/hive_07_1/tmp/scratch/hive_2011-08-30_18-04-36_809_6130923980133666976/-ext-10001 to: hdfs://ip-10-202-22-194.ec2.internal:9000/mnt/hive_07_1/warehouse/foo&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MoveTask&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is different behavior from a simple CREATE TABLE, which creates the warehouse directory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520783">HIVE-2419</key>
            <summary>CREATE TABLE AS SELECT should create warehouse directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="electrum">David Phillips</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2011 18:25:04 +0000</created>
                <updated>Tue, 15 Oct 2013 20:48:21 +0000</updated>
                                                                                <due></due>
                            <votes>2</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13437957" author="clarkyzl" created="Mon, 20 Aug 2012 15:51:18 +0000"  >&lt;p&gt;This is an annoying problem, especially for new hive users. We have fixed the problem in our internal version of hive by simply create the hive.metastore.warehouse.dir during the semantic analysis phase.&lt;/p&gt;</comment>
                            <comment id="13795317" author="yhuai" created="Tue, 15 Oct 2013 15:40:23 +0000"  >&lt;p&gt;Seems MoveTask.moveFile(Path, Path, boolean) throws this exception when it trying to rename the path.&lt;/p&gt;</comment>
                            <comment id="13795361" author="ashutoshc" created="Tue, 15 Oct 2013 16:43:55 +0000"  >&lt;p&gt;Instead of SemanticAnalyzer, HiveMetaStore should be the one creating WH dir when its starting up. We don&apos;t wh dir to be owned by first user happening to run query, rather WH dir should be owned by user running metastore service. &lt;br/&gt;
Metastore already has a logic to create default db (if not exists) while its initializing, we need very similar logic for creating wh dir during same initialization.&lt;/p&gt;
</comment>
                            <comment id="13795383" author="appodictic" created="Tue, 15 Oct 2013 17:05:27 +0000"  >&lt;p&gt;What if /user/hive does not exist?&lt;br/&gt;
What if /user does not exist?&lt;/p&gt;

&lt;p&gt;Maybe it is better to let people make the directories themselves. Or simply have a pre-flight startup check in init scripts or a java main.&lt;/p&gt;</comment>
                            <comment id="13795615" author="electrum" created="Tue, 15 Oct 2013 20:48:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appodictic&quot; class=&quot;user-hover&quot; rel=&quot;appodictic&quot;&gt;Edward Capriolo&lt;/a&gt;, those are valid concerns but are orthogonal to the point of this issue: address the asymmetry between &lt;tt&gt;CREATE TABLE&lt;/tt&gt; and &lt;tt&gt;CREATE TABLE AS SELECT&lt;/tt&gt;, where the former creates the directory but the latter does not.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12541603" name="HIVE-2419.1.patch" size="1556" author="clarkyzl" created="Mon, 20 Aug 2012 15:51:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Aug 2012 15:51:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2420] partition pruner expr is not populated due to some bug in ppd</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2420</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12520838">HIVE-2420</key>
            <summary>partition pruner expr is not populated due to some bug in ppd</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2011 21:31:34 +0000</created>
                <updated>Wed, 14 Sep 2011 19:57:50 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13094115" author="he yongqiang" created="Tue, 30 Aug 2011 21:33:48 +0000"  >&lt;p&gt;Amareshwari, can you help take a look?&lt;/p&gt;

&lt;p&gt;there is .q file in the diff. and the query in that .q file should be converted to a sort merge join. But it is not, i think this is because after ppd, the partition pruner expr is not correctly populated. &lt;/p&gt;</comment>
                            <comment id="13094276" author="he yongqiang" created="Wed, 31 Aug 2011 03:25:50 +0000"  >&lt;p&gt;Amareshwari, please feel free to reassign to me if u do not have time on it. Thanks!&lt;/p&gt;</comment>
                            <comment id="13095410" author="amareshwari" created="Thu, 1 Sep 2011 16:54:04 +0000"  >&lt;p&gt;Will not be able to look into it this week. Will try and do in the next week.&lt;/p&gt;</comment>
                            <comment id="13098251" author="he yongqiang" created="Tue, 6 Sep 2011 18:36:30 +0000"  >&lt;p&gt;This is pretty important. it will block us testing and deploying the open source trunk.&lt;/p&gt;</comment>
                            <comment id="13098603" author="amareshwari" created="Wed, 7 Sep 2011 05:32:44 +0000"  >&lt;p&gt;Reassigning, as I may not get time this week too.&lt;/p&gt;</comment>
                            <comment id="13099132" author="he yongqiang" created="Wed, 7 Sep 2011 17:39:58 +0000"  >&lt;p&gt;i think a quick fix may be just revert the diff of dedup filters. what do u think?&lt;/p&gt;</comment>
                            <comment id="13099924" author="amareshwari" created="Thu, 8 Sep 2011 04:56:05 +0000"  >&lt;p&gt;If that is the case, we can as well set hive.ppd.remove.duplicatefilters to false.&lt;/p&gt;</comment>
                            <comment id="13099939" author="jvs" created="Thu, 8 Sep 2011 05:01:12 +0000"  >&lt;p&gt;Yongqiang, didn&apos;t we already temporarily set that to false in our own config due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2344&quot; title=&quot;filter is removed due to regression of HIVE-1538&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2344&quot;&gt;&lt;del&gt;HIVE-2344&lt;/del&gt;&lt;/a&gt;?  That has since been fixed, but if there are other problems, we can keep it disabled until all are resolved.&lt;/p&gt;</comment>
                            <comment id="13104835" author="he yongqiang" created="Wed, 14 Sep 2011 19:57:50 +0000"  >&lt;p&gt;awesome, will first try the config setting. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12492371" name="HIVE-2420.reproduce.diff" size="5895" author="he yongqiang" created="Tue, 30 Aug 2011 21:32:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Sep 2011 16:54:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2421] partition variables are treated as strings during union queries, regardless of declared type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2421</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following will recreate the error, using a file &quot;foo.txt&quot; containing an integer per line:&lt;/p&gt;

&lt;p&gt;&amp;gt; create table foo (x int) partitioned by (y int);&lt;br/&gt;
&amp;gt; load data local inpath &apos;foo.txt&apos; into table foo partition (y=1);&lt;br/&gt;
&amp;gt; select * from (select y, x from foo union all select 1 as y, x from foo) a;&lt;/p&gt;

&lt;p&gt;Generates &quot;FAILED: Error in semantic analysis: Schema of both sides of union should match: Column y is of type string on first table and type int on second table&quot;&lt;/p&gt;

&lt;p&gt;Describing the bug as minor as the problem can easily be bypassed by using casts.&lt;/p&gt;

&lt;p&gt;cheers,&lt;br/&gt;
-jw&lt;/p&gt;</description>
                <environment>&lt;p&gt;cloudera Hive 0.7.1/Hadoop-0.20 stack (cdh3u1)&lt;/p&gt;</environment>
        <key id="12520844">HIVE-2421</key>
            <summary>partition variables are treated as strings during union queries, regardless of declared type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jwarren">James Warren</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2011 22:04:12 +0000</created>
                <updated>Tue, 30 Aug 2011 22:04:12 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2422] remove the intermediate dir when the hive query finish </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2422</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;right now if one hive query got compiled to 2 mr jobs, and the first job&apos;s output feed the second job. When the query finish, the first job&apos;s output should be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520862">HIVE-2422</key>
            <summary>remove the intermediate dir when the hive query finish </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Aug 2011 00:32:04 +0000</created>
                <updated>Sat, 23 Jun 2012 21:27:14 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13160067" author="priyadarshini.r" created="Wed, 30 Nov 2011 14:21:38 +0000"  >&lt;p&gt;I have executed this query.&lt;/p&gt;

&lt;p&gt;select a.rollNo,b.rollNo from student a join student b on a.rollNo=b.rollNo group by a.rollNo,b.rollNo;&lt;/p&gt;

&lt;p&gt;The above query has spawned 2 MR jobs.&lt;br/&gt;
After the execution of the query, org.apache.hadoop.hive.ql.Context.clear() method is deleting the ScratchDir of the query.&lt;/p&gt;</comment>
                            <comment id="13400063" author="anurag.tangri" created="Sat, 23 Jun 2012 21:27:14 +0000"  >&lt;p&gt;Looks like scratch did is not being cleaned at lot of locations. Another such location:&lt;/p&gt;

&lt;p&gt;1. ExecDriver.java&apos;s execute() function.&lt;/p&gt;

&lt;p&gt;Here, if it is created before launching a job and there is error in job launch, it is not cleaned in exception before returning :&lt;/p&gt;



&lt;p&gt;    try {&lt;br/&gt;
      if (ctx == null) &lt;/p&gt;
{
        ctx = new Context(job);
        ctxCreated = true;
      }

&lt;p&gt;      emptyScratchDirStr = ctx.getMRTmpFileURI();&lt;br/&gt;
      emptyScratchDir = new Path(emptyScratchDirStr);&lt;br/&gt;
      FileSystem fs = emptyScratchDir.getFileSystem(job);&lt;br/&gt;
      fs.mkdirs(emptyScratchDir);&lt;br/&gt;
    } catch (IOException e) &lt;/p&gt;
{
      e.printStackTrace();
      console.printError(&quot;Error launching map-reduce job&quot;, &quot;\n&quot;
          + org.apache.hadoop.util.StringUtils.stringifyException(e));
      return 5;
    }


&lt;p&gt;Here, ctx.clear() needs to be called in exception.&lt;/p&gt;

&lt;p&gt;-Anurag Tangri&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Nov 2011 14:21:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35778</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2423] Add a One Row per Column-View or \G option to command line output</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2423</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The hive client desperately needs better table output.  I think having a query option to send output one column per line with the column name would desperately help looking at wide table data.  Here I&apos;m thinking of the \G option from the MySQL client.&lt;/p&gt;

&lt;p&gt;So essentially the command line would get a new query ending token &apos;\G&apos;&lt;/p&gt;

&lt;p&gt;Which would change the output to:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;
									&lt;ul&gt;
										&lt;li&gt;
										&lt;ul&gt;
											&lt;li&gt;
											&lt;ul&gt;
												&lt;li&gt;
												&lt;ul&gt;
													&lt;li&gt;Row: 1 *******************&lt;br/&gt;
  Column_A: Value 1&lt;br/&gt;
  Column_B: Value 2&lt;br/&gt;
 Column_CD: 34565434&lt;/li&gt;
													&lt;li&gt;Row: 2 *******************&lt;br/&gt;
....&lt;/li&gt;
												&lt;/ul&gt;
												&lt;/li&gt;
											&lt;/ul&gt;
											&lt;/li&gt;
										&lt;/ul&gt;
										&lt;/li&gt;
									&lt;/ul&gt;
									&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Right aligning the column names, with a single space before starting the value of that column from the output table row. &lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12520939">HIVE-2423</key>
            <summary>Add a One Row per Column-View or \G option to command line output</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mcpeterson">Jake Peterson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Aug 2011 16:22:58 +0000</created>
                <updated>Tue, 13 Sep 2011 21:09:31 +0000</updated>
                                            <version>0.8.0</version>
                    <version>0.9.0</version>
                                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2424] Don&apos;t expose thrift, commons and json classes in the hive exec jar </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2424</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The hive exec jar includes exploded thrift, json, and commons lang classes. These may conflict with the user&apos;s classpath. This could be fixed by jar jaring or using shade. A mechanism that allowed a user to substitute alternative versions w/o recompiling might be a useful intermediate step (though will require the user substitute alternative versions that work w/ Hive).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521115">HIVE-2424</key>
            <summary>Don&apos;t expose thrift, commons and json classes in the hive exec jar </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eli">Eli Collins</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Sep 2011 21:36:14 +0000</created>
                <updated>Thu, 2 May 2013 02:30:58 +0000</updated>
                                                                            <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13096245" author="cwsteinbach" created="Fri, 2 Sep 2011 19:53:01 +0000"  >&lt;p&gt;Looks like we could use jarjar: &lt;a href=&quot;http://code.google.com/p/jarjar/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/jarjar/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13260886" author="traviscrawford" created="Tue, 24 Apr 2012 19:52:35 +0000"  >&lt;p&gt;Looking at &lt;a href=&quot;http://svn.apache.org/viewvc/hive/trunk/ql/build.xml?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ql/build.xml&lt;/a&gt; we see the jar target extracts thrift (and commons-lang, json, javaewah), then bundles them into &lt;tt&gt;hive-exec.jar&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;What&apos;s the reason for treating these four jars differently, bundling them inside hive-exec? They&apos;re already available in the lib directory like other dependencies.&lt;/p&gt;

&lt;p&gt;Any objections to making a patch that stops bundling these 3rd-party jars inside hive-exec? This would require users to add the jars to their classpath, which they&apos;re likely already doing as they&apos;re included in the lib directory with other necessary dependencies. I don&apos;t believe making this fat jar is necessary (or I don&apos;t understand the use-case).&lt;/p&gt;

&lt;p&gt;If this sounds good I can post the patch.&lt;/p&gt;</comment>
                            <comment id="13262265" author="eli2" created="Thu, 26 Apr 2012 00:09:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;This would require users to add the jars to their classpath, which they&apos;re likely already doing as they&apos;re included in the lib directory with other necessary dependencies.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Does the lib directory get bundled up and shipped with hive-exec? I assumed the motivation for the fat-jar was:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;You only have to submit hive-exec&lt;/li&gt;
	&lt;li&gt;Can&apos;t assume the same classes with the proper versions are in the MR classpath&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13262280" author="traviscrawford" created="Thu, 26 Apr 2012 00:26:51 +0000"  >&lt;p&gt;The whole lib directory is not automatically added as dependencies for worker tasks. These jars are available locally though when contacting the HiveMetaStore, which I believe is the only time thrift is required (since worker tasks get their work units from the job conf; they do not contact the HiveMetaStore at runtime).&lt;/p&gt;

&lt;p&gt;This is causing some major build issues for us, so I&apos;ll take a look at what happens when non-Hive classes are removed from hive-exec.&lt;/p&gt;</comment>
                            <comment id="13262291" author="appodictic" created="Thu, 26 Apr 2012 00:55:50 +0000"  >&lt;p&gt;I feel we are going to need them. I believe originally this was done because libjars was inconsistent between hadoop version. However I do not think you can not take them out. Hive needs these things to work. If you took them out from the hive-exec build and provided them with libjars you would still end up with a conflict when adding your jars. (I could be wrong) &lt;/p&gt;</comment>
                            <comment id="13262298" author="cwsteinbach" created="Thu, 26 Apr 2012 00:59:20 +0000"  >&lt;p&gt;There&apos;s a Thrift dependency on the MR classpath because we use Thrift to serialize the query plan. As for the other dependencies, json and commons-lang are both required by a bunch of UDFs, and javaewah is required by the UDFs that generate bitmap indexes.&lt;/p&gt;

&lt;p&gt;I don&apos;t think there&apos;s going to be much support for splitting these out into separate JARs because it increases the chances of jobs failing due to unsatisfied dependencies.&lt;/p&gt;

&lt;p&gt;@Travis: Any chance you&apos;d be willing to investigate the JarJar approach?&lt;/p&gt;</comment>
                            <comment id="13262743" author="traviscrawford" created="Thu, 26 Apr 2012 17:00:37 +0000"  >&lt;p&gt;I think the root of the issue is hive-exec contains Hive classes that are available in no other jar, plus the repackaged 3rd-party jars. This works great for Hive itself, but presents integration issues if users need a different 3rd-party dependency for some reason. In an ideal world everyone would use the same library versions, but since that&apos;s not always possible users may find themselves in a situation where they need to change a library version.&lt;/p&gt;

&lt;p&gt;hive-exec.jar contains all of the following Hive sub projects:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hive-common&lt;/li&gt;
	&lt;li&gt;hive-ql&lt;/li&gt;
	&lt;li&gt;hive-serde&lt;/li&gt;
	&lt;li&gt;hive-shims&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What are your thoughts on publishing these four jars as stand-alone artifacts, in addition to hive-exec. Since its strictly additive no existing behavior would be affected. It would allow users writing tools on top of Hive to depend on just the Hive classes, freeing them to construct their classpath as appropriate for their site.&lt;/p&gt;</comment>
                            <comment id="13262898" author="traviscrawford" created="Thu, 26 Apr 2012 19:25:32 +0000"  >&lt;p&gt;To make the discussion a bit more concrete, I went ahead and experimented with publishing subproject jars in addition to the existing fat jar.&lt;/p&gt;

&lt;p&gt;Check out the following branch where I created a new &quot;exec&quot; subproject that produces hive-exec.jar, and where &quot;ql&quot; produces a hive-ql.jar like other sub projects.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/traviscrawford/hive/compare/HIVE-2424_thin_jars&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/traviscrawford/hive/compare/HIVE-2424_thin_jars&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What do y&apos;all think about this approach? It would let existing stuff continue working as-is, while making all Hive classes available for those that for whatever reason need to do something fancy.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13263210" author="cwsteinbach" created="Thu, 26 Apr 2012 22:38:35 +0000"  >&lt;p&gt;The downside of the thin jar approach is that the distribution now contains one more (redundant) JAR file, and developers have to maintain two new build files. There will also inevitably be questions from users about the differences between the hive-exec and hive-ql JARs. Using JarJar or Shade avoids these problems. Is there some reason why it doesn&apos;t satisfy your use case?&lt;/p&gt;</comment>
                            <comment id="13263224" author="traviscrawford" created="Thu, 26 Apr 2012 22:59:46 +0000"  >&lt;p&gt;Possibly jarjar/shade will solve the problem - I&apos;m not familiar with how they work and will take a look.&lt;/p&gt;

&lt;p&gt;Your point to user confusion about the new jars is definitely valid. Its a trade-off though, since there&apos;s existing confusion about how to work around hive-exec. Likely most users will just install a release and not be bothered by these additional jars. Developers integrating with Hive would likely benefit from being able to construct a custom classpath.&lt;/p&gt;

&lt;p&gt;The posted approach does add an extra sub project &amp;amp; build files, but maintenance overhead is pretty small since mostly they inherit &lt;tt&gt;build-common.xml&lt;/tt&gt; functionality. Perhaps I could offset the additional overhead by simplifying the maven-related tasks in &lt;tt&gt;build.xml&lt;/tt&gt;? There&apos;s some repetitiveness that could be simplified with macros &amp;amp; other minor restructuring.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at jarjar and see if that easily solves this issue.&lt;/p&gt;</comment>
                            <comment id="13263238" author="traviscrawford" created="Thu, 26 Apr 2012 23:14:55 +0000"  >&lt;p&gt;Looking at JarJar it aims to solve exactly the issue being discussed here:&lt;/p&gt;

&lt;p&gt;&quot;You can avoid problems where your library depends on a specific version of a library, which may conflict with the dependencies of another library.&quot;&lt;/p&gt;

&lt;p&gt;However, it does have some consequences:&lt;/p&gt;

&lt;p&gt;&quot;Jar Jar Links includes an Ant task that extends the built-in jar task. The normal zipfileset element is used to embed jar files. A new rule element is added which uses wildcards patterns to rename the embedded class files. Bytecode transformation (via ASM) is used to change references to the renamed classes, and special handling is provided for moving resource files and transforming string literals.&quot;&lt;/p&gt;

&lt;p&gt;So the basic idea is avoiding class version conflicts through renaming. This is potentially problematic for classes outside the jarjar that are not aware of the class renames.&lt;/p&gt;

&lt;p&gt;I can investigate this further but my initial reaction to the jarjar approach is that it sounds good if you&apos;re creating an entirely self-contained jar, but not as an element of a multi-jar classpath. For example, this approach seems totally appropriate for a fully self-contained JDBC jar that users can give to their favorite GUI app, where UDFs are installed server-side. For a Hadoop job that may depend on the bundled contents (UDF that makes a thrift call) this approach seems problematic because thrift would be renamed and therefore unavailable outside the jarjar, forcing users to resubmit the bundled jars under their original name.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12554977">HIVE-3017</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12556494">HIVE-3040</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12639004">HIVE-4229</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Sep 2011 19:53:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42123</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2425] Print the counters SLOTS_MILLIS_MAPS and SLOTS_MILLIS_REDUCES to the Hive CLI output.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2425</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12521129">HIVE-2425</key>
            <summary>Print the counters SLOTS_MILLIS_MAPS and SLOTS_MILLIS_REDUCES to the Hive CLI output.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Sep 2011 01:22:20 +0000</created>
                <updated>Wed, 7 Dec 2011 23:39:37 +0000</updated>
                            <resolved>Wed, 7 Dec 2011 23:39:37 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13095707" author="jiraposter@reviews.apache.org" created="Fri, 2 Sep 2011 01:34:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1697/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1697/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I print the new stats out where we are already printing out the other map reduce stats for each job.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2425&quot; title=&quot;Print the counters SLOTS_MILLIS_MAPS and SLOTS_MILLIS_REDUCES to the Hive CLI output.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2425&quot;&gt;&lt;del&gt;HIVE-2425&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2425&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2425&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/MapRedStats.java 1164320 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 1164320 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1697/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1697/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I ran a query in local mode and verified the stats were not printed.&lt;br/&gt;
I ran a map only query and verified only the map time was printed.&lt;br/&gt;
I ran a query involving multiple jobs involving both map only and map and reduce, and verified that the appropriate stats were printed for each.&lt;/p&gt;

&lt;p&gt;In all cases, I verified the query completed successfully.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13164838" author="kevinwilfong" created="Wed, 7 Dec 2011 23:39:37 +0000"  >&lt;p&gt;This is no longer necessary given the restructuring of MapRedStats.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12492696" name="HIVE-2425.1.patch.txt" size="3541" author="kevinwilfong" created="Fri, 2 Sep 2011 01:32:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Sep 2011 01:34:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123883</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2426] Test that views with joins work properly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2426</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With the testcase&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;drop table invites;
drop table invites2;
create table invites (foo int, bar string) partitioned by (ds string);
create table invites2 (foo int, bar string) partitioned by (ds string);

set hive.mapred.mode=strict;

-- test join views: see HIVE-1989

create view v as select invites.bar, invites2.foo, invites2.ds from invites join invites2 on invites.ds=invites2.ds;

explain select * from v where ds=&apos;2011-09-01&apos;;

drop view v;
drop table invites;
drop table invites2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should not have the partition pruner complain about invites.ds not having a predicate because the predicate invites2.ds=&apos;2011-09-01&apos; will be inferred with the ppd transitivity optimization&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521147">HIVE-2426</key>
            <summary>Test that views with joins work properly</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="charleschen">Charles Chen</assignee>
                                    <reporter username="charleschen">Charles Chen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Sep 2011 05:43:41 +0000</created>
                <updated>Thu, 2 May 2013 02:29:44 +0000</updated>
                            <resolved>Wed, 7 Sep 2011 18:14:51 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13095791" author="jiraposter@reviews.apache.org" created="Fri, 2 Sep 2011 05:59:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1702/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1702/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2426&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2426&quot; title=&quot;Test that views with joins work properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2426&quot;&gt;&lt;del&gt;HIVE-2426&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2426&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/UnparseTranslator.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/UnparseTranslator.java&lt;/a&gt; 1163905 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/join_view.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/join_view.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join_view.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join_view.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1702/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1702/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13098498" author="jvs" created="Wed, 7 Sep 2011 00:22:11 +0000"  >&lt;p&gt;Made a few minor improvements to the overlap handling code and comments.&lt;/p&gt;</comment>
                            <comment id="13098500" author="jiraposter@reviews.apache.org" created="Wed, 7 Sep 2011 00:25:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1732/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1732/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2426&quot; title=&quot;Test that views with joins work properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2426&quot;&gt;&lt;del&gt;HIVE-2426&lt;/del&gt;&lt;/a&gt; patch 3&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2426&quot; title=&quot;Test that views with joins work properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2426&quot;&gt;&lt;del&gt;HIVE-2426&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2426&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/UnparseTranslator.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/UnparseTranslator.java&lt;/a&gt; 1165909 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/join_view.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/join_view.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join_view.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join_view.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1732/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1732/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;
</comment>
                            <comment id="13099165" author="jvs" created="Wed, 7 Sep 2011 18:14:51 +0000"  >&lt;p&gt;+1, passed tests, committed to trunk.  Thanks Charles!&lt;/p&gt;</comment>
                            <comment id="13099674" author="hudson" created="Thu, 8 Sep 2011 00:09:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #940 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/940/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/940/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2426&quot; title=&quot;Test that views with joins work properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2426&quot;&gt;&lt;del&gt;HIVE-2426&lt;/del&gt;&lt;/a&gt;. Test that views with joins work properly.&lt;br/&gt;
(Charles Chen via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1166293&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1166293&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/UnparseTranslator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/join_view.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join_view.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12498567">HIVE-1989</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12493251" name="HIVE-2426.3.patch" size="9545" author="jvs" created="Wed, 7 Sep 2011 00:22:11 +0000"/>
                            <attachment id="12492718" name="HIVE-2426v2.patch" size="8211" author="charleschen" created="Fri, 2 Sep 2011 05:59:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Sep 2011 05:59:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62004</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123884</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2427] Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2427</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a bigint is implicitly cast to a double (when a bigint is involved in an equality expression with a string or double as part of a join condition, or when a bigint column is to be combined with a string or double column as part of a union) precision may be lost, resulting in unexpected behavior. Until we fix the underlying issue we should throw an error in strict mode, and a warning in nonstrict mode alerting the user about this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521209">HIVE-2427</key>
            <summary>Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Sep 2011 16:48:00 +0000</created>
                <updated>Tue, 17 Jul 2012 07:46:53 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13096127" author="jiraposter@reviews.apache.org" created="Fri, 2 Sep 2011 16:57:10 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added checks before the type conversions for both joins and unions to either throw an error or a warning depending if a bigint was going to be converted to a double.&lt;/p&gt;

&lt;p&gt;I also added a new variable hive.mapred.bigint.comparison.mode, which is set to either strict or nonstrict to indicate whether an error or a warning should be given when a bigint is converted to a double.  This is instead of the original implementation which used the variable hive.mapred.mode.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2427&quot;&gt;HIVE-2427&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2427&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1164293 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1164293 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1164293 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/filter_join_breaktask2.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/filter_join_breaktask2.q.out 1164293 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1705/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added several more tests to demonstrate the errors.&lt;/p&gt;

&lt;p&gt;I also modified a unit test in which a join was being done which involved a comparison between a string and a bigint.  I set hive.mapred.bigint.comparison.mode to nonstrict, so the only change was the new warning appeared in the output.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13098211" author="jiraposter@reviews.apache.org" created="Tue, 6 Sep 2011 17:43:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-06 17:41:24.308161)&lt;/p&gt;


&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added the new property to hive-default.xml&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added checks before the type conversions for both joins and unions to either throw an error or a warning depending if a bigint was going to be converted to a double.&lt;/p&gt;

&lt;p&gt;I also added a new variable hive.mapred.bigint.comparison.mode, which is set to either strict or nonstrict to indicate whether an error or a warning should be given when a bigint is converted to a double.  This is instead of the original implementation which used the variable hive.mapred.mode.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2427&quot;&gt;HIVE-2427&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2427&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/test/results/clientnegative/compare_string_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/filter_join_breaktask2.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/filter_join_breaktask2.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1164293 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1164293 &lt;br/&gt;
  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1164293 &lt;br/&gt;
  trunk/conf/hive-default.xml 1164293 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1705/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added several more tests to demonstrate the errors.&lt;/p&gt;

&lt;p&gt;I also modified a unit test in which a join was being done which involved a comparison between a string and a bigint.  I set hive.mapred.bigint.comparison.mode to nonstrict, so the only change was the new warning appeared in the output.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13098526" author="jiraposter@reviews.apache.org" created="Wed, 7 Sep 2011 01:34:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-07 01:33:36.605379)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and Siying Dong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added checks before the type conversions for both joins and unions to either throw an error or a warning depending if a bigint was going to be converted to a double.&lt;/p&gt;

&lt;p&gt;I also added a new variable hive.mapred.bigint.comparison.mode, which is set to either strict or nonstrict to indicate whether an error or a warning should be given when a bigint is converted to a double.  This is instead of the original implementation which used the variable hive.mapred.mode.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2427&quot;&gt;HIVE-2427&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2427&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/test/results/clientnegative/compare_string_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/filter_join_breaktask2.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/filter_join_breaktask2.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out 1164293 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q 1164293 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1164293 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1164293 &lt;br/&gt;
  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1164293 &lt;br/&gt;
  trunk/conf/hive-default.xml 1164293 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1705/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added several more tests to demonstrate the errors.&lt;/p&gt;

&lt;p&gt;I also modified a unit test in which a join was being done which involved a comparison between a string and a bigint.  I set hive.mapred.bigint.comparison.mode to nonstrict, so the only change was the new warning appeared in the output.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13144278" author="jiraposter@reviews.apache.org" created="Fri, 4 Nov 2011 19:49:51 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-04 19:48:37.718693)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;It&apos;s been a while, so I ran svn up and fixed the conflicts.&lt;/p&gt;

&lt;p&gt;I ran the tests and verified they passed.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added checks before the type conversions for both joins and unions to either throw an error or a warning depending if a bigint was going to be converted to a double.&lt;/p&gt;

&lt;p&gt;I also added a new variable hive.mapred.bigint.comparison.mode, which is set to either strict or nonstrict to indicate whether an error or a warning should be given when a bigint is converted to a double.  This is instead of the original implementation which used the variable hive.mapred.mode.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2427&quot;&gt;HIVE-2427&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2427&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1197375 &lt;br/&gt;
  trunk/conf/hive-default.xml 1197375 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1197375 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1197375 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java 1197375 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q 1197375 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q 1197375 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_join.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/filter_join_breaktask2.q 1197375 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out 1197375 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out 1197375 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint_join.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/filter_join_breaktask2.q.out 1197375 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1705/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1705/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added several more tests to demonstrate the errors.&lt;/p&gt;

&lt;p&gt;I also modified a unit test in which a join was being done which involved a comparison between a string and a bigint.  I set hive.mapred.bigint.comparison.mode to nonstrict, so the only change was the new warning appeared in the output.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13224976" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 03:57:06 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2427&quot;&gt;HIVE-2427&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2427&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  (Ran svn up to avoid merge conflicts and moved review to Phabricator)&lt;/p&gt;

&lt;p&gt;  I added checks before the type conversions for both joins and unions to either throw an error or a warning depending if a bigint was going to be converted to a double.&lt;/p&gt;

&lt;p&gt;  I also added a new variable hive.mapred.bigint.comparison.mode, which is set to either strict or nonstrict to indicate whether an error or a warning should be given when a bigint is converted to a double. This is instead of the original implementation which used the variable hive.mapred.mode.&lt;/p&gt;

&lt;p&gt;  When a bigint is implicitly cast to a double (when a bigint is involved in an equality expression with a string or double as part of a join condition, or when a bigint column is to be combined with a string or double column as part of a union) precision may be lost, resulting in unexpected behavior. Until we fix the underlying issue we should throw an error in strict mode, and a warning in nonstrict mode alerting the user about this.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2181&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientnegative/compare_string_bigint.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/compare_string_bigint_union.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/compare_string_bigint_join.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/compare_double_bigint_union.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/compare_double_bigint_join.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/compare_double_bigint.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/filter_join_breaktask2.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/compare_double_bigint_union.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/compare_string_bigint_join.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/compare_double_bigint.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/compare_double_bigint_join.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/compare_string_bigint.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/compare_string_bigint_union.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/filter_join_breaktask2.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4779/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4779/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13261033" author="phabricator@reviews.facebook.net" created="Tue, 24 Apr 2012 21:26:03 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2427&quot;&gt;HIVE-2427&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:5180 This piece of code seems to be repeated - can you make a function&lt;br/&gt;
  out of it, and reuse it.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java:198 same as above&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2181&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517522" name="ASF.LICENSE.NOT.GRANTED--HIVE-2427.D2181.1.patch" size="23981" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 03:57:07 +0000"/>
                            <attachment id="12492773" name="HIVE-2427.1.patch.txt" size="25245" author="kevinwilfong" created="Fri, 2 Sep 2011 16:57:04 +0000"/>
                            <attachment id="12493183" name="HIVE-2427.2.patch.txt" size="26218" author="kevinwilfong" created="Tue, 6 Sep 2011 17:42:21 +0000"/>
                            <attachment id="12502515" name="HIVE-2427.3.patch.txt" size="23297" author="kevinwilfong" created="Fri, 4 Nov 2011 19:49:11 +0000"/>
                            <attachment id="12534033" name="HIVE-2427.5.patch.txt" size="19059" author="kevinwilfong" created="Fri, 29 Jun 2012 20:27:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Sep 2011 16:57:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42121</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08od3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2428] ADD ARCHIVE has no effect when query runs in local mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2428</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When you ADD ARCHIVE a file and the query runs in local mode, the file is not available at all.&lt;/p&gt;

&lt;p&gt;For example running the commands&lt;/p&gt;

&lt;p&gt;echo &apos;#!/bin/bash\nls -l 1&amp;gt;&amp;amp;2;read&apos; &amp;gt; foo.sh&lt;/p&gt;

&lt;p&gt;hive -e &apos;ADD FILE foo.sh; ADD ARCHIVE /tmp/mapreduce_test.zip; SELECT TRANSFORM&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; USING &quot;sh foo.sh&quot; FROM src&apos;&lt;/p&gt;

&lt;p&gt;when the query is allowed to run in local mode, only information for foo.sh is returned.&lt;/p&gt;

&lt;p&gt;However, if the query is not allowed to run in local mode, information for both foo.sh and mapreduce_test.zip is returned.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521514">HIVE-2428</key>
            <summary>ADD ARCHIVE has no effect when query runs in local mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Sep 2011 23:52:50 +0000</created>
                <updated>Tue, 9 Jul 2013 01:31:26 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13098488" author="jiraposter@reviews.apache.org" created="Tue, 6 Sep 2011 23:59:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1731/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1731/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Scott Chen and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added the -archives flag to the command run when a map reduce task is run locally.  It runs essentially exactly as it does for the -files flag.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2428&quot; title=&quot;ADD ARCHIVE has no effect when query runs in local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2428&quot;&gt;HIVE-2428&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2428&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2428&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 1164711 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1731/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1731/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I run the unit test queries to verify nothing was broken.&lt;/p&gt;

&lt;p&gt;I also ran the query specified in the issues description and verified that information was returned for both files and archives in both local and non-local mode.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13222850" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 01:07:55 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2428&quot; title=&quot;ADD ARCHIVE has no effect when query runs in local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2428&quot;&gt;HIVE-2428&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ADD ARCHIVE has no effect when query runs in local mode&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2428&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2428&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Added the -archives flag to the command run when a map reduce task is run locally. It runs essentially exactly as it does for the -files flag.  This fixes the issue, I have added a test to verify that.&lt;/p&gt;

&lt;p&gt;  When you ADD ARCHIVE a file and the query runs in local mode, the file is not available at all.&lt;/p&gt;

&lt;p&gt;  For example running the commands&lt;/p&gt;

&lt;p&gt;  echo &apos;#!/bin/bash\nls -l 1&amp;gt;&amp;amp;2;read&apos; &amp;gt; foo.sh&lt;/p&gt;

&lt;p&gt;  hive -e &apos;ADD FILE foo.sh; ADD ARCHIVE /tmp/mapreduce_test.zip; SELECT TRANSFORM USING &quot;sh foo.sh&quot; FROM src&apos;&lt;/p&gt;

&lt;p&gt;  when the query is allowed to run in local mode, only information for foo.sh is returned.&lt;/p&gt;

&lt;p&gt;  However, if the query is not allowed to run in local mode, information for both foo.sh and mapreduce_test.zip is returned.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2121&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  data/files/add_archive_local.zip&lt;br/&gt;
  data/scripts/add_archive_local_script&lt;br/&gt;
  ql/src/test/results/clientpositive/add_archive_local.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/add_archive_local.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4599/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4599/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13222852" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 01:11:55 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2428&quot; title=&quot;ADD ARCHIVE has no effect when query runs in local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2428&quot;&gt;HIVE-2428&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ADD ARCHIVE has no effect when query runs in local mode&quot;.&lt;/p&gt;

&lt;p&gt;  Attached the zip file used by the test to the JIRA.&lt;/p&gt;

&lt;p&gt;  Before this fix was committed, add_archive_local.zip would not appear in the output when the test q file is run.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2121&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2121&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13496727" author="phabricator@reviews.facebook.net" created="Wed, 14 Nov 2012 01:14:11 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2428&quot; title=&quot;ADD ARCHIVE has no effect when query runs in local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2428&quot;&gt;HIVE-2428&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ADD ARCHIVE has no effect when query runs in local mode&quot;.&lt;br/&gt;
Reviewers: JIRA, njain, ashutoshc&lt;/p&gt;

&lt;p&gt;  Modified add_archive_local_script to make it deterministic.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2121&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  data/files/add_archive_local.zip&lt;br/&gt;
  data/scripts/add_archive_local_script&lt;br/&gt;
  ql/src/test/results/clientpositive/add_archive_local.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/add_archive_local.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, ashutoshc, kevinwilfong&lt;/p&gt;</comment>
                            <comment id="13702751" author="appodictic" created="Tue, 9 Jul 2013 01:28:12 +0000"  >&lt;p&gt;+1 will commit if tests pass&lt;/p&gt;</comment>
                            <comment id="13702754" author="appodictic" created="Tue, 9 Jul 2013 01:31:12 +0000"  >&lt;p&gt;Can you please rebase? Tx&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517175" name="ASF.LICENSE.NOT.GRANTED--HIVE-2428.D2121.1.patch" size="3578" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 01:07:57 +0000"/>
                            <attachment id="12493250" name="HIVE-2428.1.patch.txt" size="2069" author="kevinwilfong" created="Tue, 6 Sep 2011 23:58:25 +0000"/>
                            <attachment id="12553420" name="HIVE-2428.D2121.2.patch" size="3544" author="phabricator@reviews.facebook.net" created="Wed, 14 Nov 2012 01:14:11 +0000"/>
                            <attachment id="12517176" name="add_archive_local.zip" size="520" author="kevinwilfong" created="Tue, 6 Mar 2012 01:08:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Sep 2011 23:59:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35777</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k3jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>115390</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
