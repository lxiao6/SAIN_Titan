<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:14:44 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-12-1+AND+created+%3C%3D+2009-12-8+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="16" total="16"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-958] support ALTER PARTITION</title>
                <link>https://issues.apache.org/jira/browse/HIVE-958</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;alter table &amp;lt;table_name&amp;gt; ...&lt;/p&gt;

&lt;p&gt;should be enhanced to also support:&lt;/p&gt;

&lt;p&gt;alter table &amp;lt;table_name&amp;gt; partition &amp;lt;partition_name&amp;gt; ...&lt;/p&gt;


&lt;p&gt;Only 1 partition can be specified at a time&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442022">HIVE-958</key>
            <summary>support ALTER PARTITION</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2009 02:08:14 +0000</created>
                <updated>Mon, 8 Sep 2014 08:32:35 +0000</updated>
                            <resolved>Mon, 8 Sep 2014 08:32:20 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14125302" author="lars_francke" created="Mon, 8 Sep 2014 08:32:20 +0000"  >&lt;p&gt;This has been fixed in the meantime&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Sep 2014 08:32:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-959] Hive to use new interfaces in Hadoop 0.20</title>
                <link>https://issues.apache.org/jira/browse/HIVE-959</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hadoop 0.20 has a lot of new interfaces including MapReduce etc.Hive should move to the new interface.&lt;/p&gt;

&lt;p&gt;Hive won&apos;t be compatible with earlier hadoop versions after this change, so we might want to wait till hive 0.5 is branched out first.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442058">HIVE-959</key>
            <summary>Hive to use new interfaces in Hadoop 0.20</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2009 06:52:54 +0000</created>
                <updated>Tue, 15 Dec 2009 15:57:38 +0000</updated>
                                            <version>0.5.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12784251" author="appodictic" created="Tue, 1 Dec 2009 14:51:00 +0000"  >&lt;p&gt;I am guessing that extracting everything into shims would be rather difficult?&lt;/p&gt;</comment>
                            <comment id="12790412" author="namit" created="Mon, 14 Dec 2009 22:24:20 +0000"  >&lt;p&gt;But should hive compatibility with older versions of hadoop be maintained ?&lt;/p&gt;</comment>
                            <comment id="12790413" author="namit" created="Mon, 14 Dec 2009 22:24:44 +0000"  >&lt;p&gt;I think this got into &apos;Patch Available&apos; by mistake&lt;/p&gt;</comment>
                            <comment id="12790782" author="appodictic" created="Tue, 15 Dec 2009 15:57:38 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;But should hive compatibility with older versions of hadoop be maintained ? &lt;/p&gt;

&lt;p&gt;I think definitely a big yes. I do not think we should abandon older versions of Hadoop for the newest version, which is not even 100% complete yet. By 100% I mean not everything in the mapred packages have been fully ported to the mapreduce packages yet e.g. Is MultiFileInput format committed yet?&lt;/p&gt;

&lt;p&gt;Currently 18.3 is still considered the stable branch. I do not think we should abandon it for 0.20. Hopefully we should be able to auto detect the version and either build shims or patch the source pre-compile, or branch. &lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Dec 2009 14:51:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08n5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Modified:Index: Hive/contrib/src/java/org/apache/hadoop/hive/contrib/fileformat/base64/Base64TextInputFormat.java&lt;br/&gt;
===================================================================&lt;br/&gt;
--- Hive/contrib/src/java/org/apache/hadoop/hive/contrib/fileformat/base64/Base64TextInputFormat.java	&#65288;&#29256;&#26412; 890273&#65289;&lt;br/&gt;
+++ Hive/contrib/src/java/org/apache/hadoop/hive/contrib/fileformat/base64/Base64TextInputFormat.java	&#65288;&#24037;&#20316;&#21103;&#26412;&#65289;&lt;br/&gt;
@@ -21,155 +21,167 @@&lt;br/&gt;
&amp;nbsp;import java.io.IOException;&lt;br/&gt;
&amp;nbsp;import java.io.UnsupportedEncodingException;&lt;br/&gt;
&amp;nbsp;import java.util.Arrays;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+import org.apache.commons.codec.binary.Base64;&lt;br/&gt;
+import org.apache.hadoop.conf.Configurable;&lt;br/&gt;
+import org.apache.hadoop.conf.Configuration;&lt;br/&gt;
&amp;nbsp;import org.apache.hadoop.hive.shims.ShimLoader;&lt;br/&gt;
&amp;nbsp;import org.apache.hadoop.io.BytesWritable;&lt;br/&gt;
&amp;nbsp;import org.apache.hadoop.io.LongWritable;&lt;br/&gt;
&amp;nbsp;import org.apache.hadoop.io.Text;&lt;br/&gt;
-import org.apache.hadoop.mapred.FileSplit;&lt;br/&gt;
-import org.apache.hadoop.mapred.InputFormat;&lt;br/&gt;
-import org.apache.hadoop.mapred.InputSplit;&lt;br/&gt;
-import org.apache.hadoop.mapred.JobConf;&lt;br/&gt;
-import org.apache.hadoop.mapred.JobConfigurable;&lt;br/&gt;
-import org.apache.hadoop.mapred.LineRecordReader;&lt;br/&gt;
-import org.apache.hadoop.mapred.RecordReader;&lt;br/&gt;
-import org.apache.hadoop.mapred.Reporter;&lt;br/&gt;
-import org.apache.hadoop.mapred.TextInputFormat;&lt;br/&gt;
-import org.apache.commons.codec.binary.Base64;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.InputFormat;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.InputSplit;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.JobContext;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.RecordReader;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.TaskAttemptContext;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.lib.input.FileSplit;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.lib.input.LineRecordReader;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;/**&lt;br/&gt;
&amp;nbsp;&amp;nbsp;* FileInputFormat for base64 encoded text files.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;* &lt;br/&gt;
- * Each line is a base64-encoded record.&lt;br/&gt;
- * The key is a LongWritable which is the offset.&lt;br/&gt;
- * The value is a BytesWritable containing the base64-decoded bytes.&lt;br/&gt;
+ * Each line is a base64-encoded record. The key is a LongWritable which is the offset. The value is a BytesWritable containing the base64-decoded&lt;br/&gt;
+ * bytes.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;* &lt;br/&gt;
- * This class accepts a configurable parameter:&lt;br/&gt;
- * &amp;quot;base64.text.input.format.signature&amp;quot;&lt;br/&gt;
+ * This class accepts a configurable parameter: &amp;quot;base64.text.input.format.signature&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;* &lt;br/&gt;
- * The UTF-8 encoded signature will be compared with the beginning&lt;br/&gt;
- * of each decoded bytes.  If they don&amp;#39;t match, the record is discarded.&lt;br/&gt;
- * If they match, the signature is stripped off the data.&lt;br/&gt;
+ * The UTF-8 encoded signature will be compared with the beginning of each decoded bytes. If they don&amp;#39;t match, the record is discarded. If they match,&lt;br/&gt;
+ * the signature is stripped off the data.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
-public class Base64TextInputFormat&lt;br/&gt;
-  implements InputFormat&amp;lt;LongWritable, BytesWritable&amp;gt;, JobConfigurable {&lt;br/&gt;
-  &lt;br/&gt;
-  &lt;br/&gt;
-  public static class Base64LineRecordReader&lt;br/&gt;
-    implements RecordReader&amp;lt;LongWritable, BytesWritable&amp;gt;, JobConfigurable {&lt;br/&gt;
+public class Base64TextInputFormat extends InputFormat&amp;lt;LongWritable, BytesWritable&amp;gt; implements Configurable {&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    LineRecordReader reader;&lt;br/&gt;
-    Text text;&lt;br/&gt;
+	public static class Base64LineRecordReader extends RecordReader&amp;lt;LongWritable, BytesWritable&amp;gt; implements Configurable {&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    public Base64LineRecordReader(LineRecordReader reader) {&lt;br/&gt;
-      this.reader = reader;&lt;br/&gt;
-      text = reader.createValue();&lt;br/&gt;
-    }&lt;br/&gt;
-    &lt;br/&gt;
-    @Override&lt;br/&gt;
-    public void close() throws IOException {&lt;br/&gt;
-      reader.close();&lt;br/&gt;
-    }&lt;br/&gt;
+		LineRecordReader reader;&lt;br/&gt;
+		Text text;&lt;br/&gt;
+		BytesWritable value;&lt;br/&gt;
+		Configuration job;&lt;br/&gt;
+		&lt;br/&gt;
+		public Base64LineRecordReader(LineRecordReader reader) {&lt;br/&gt;
+			this.reader = reader;&lt;br/&gt;
+			text = reader.getCurrentValue();&lt;br/&gt;
+		}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    @Override&lt;br/&gt;
-    public LongWritable createKey() {&lt;br/&gt;
-      return reader.createKey();&lt;br/&gt;
-    }&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public void close() throws IOException {&lt;br/&gt;
+			reader.close();&lt;br/&gt;
+		}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    @Override&lt;br/&gt;
-    public BytesWritable createValue() {&lt;br/&gt;
-      return new BytesWritable();&lt;br/&gt;
-    }&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public LongWritable getCurrentKey() {&lt;br/&gt;
+			return reader.getCurrentKey();&lt;br/&gt;
+		}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    @Override&lt;br/&gt;
-    public long getPos() throws IOException {&lt;br/&gt;
-      return reader.getPos();&lt;br/&gt;
-    }&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public BytesWritable getCurrentValue() {&lt;br/&gt;
+			return new BytesWritable();&lt;br/&gt;
+		}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    @Override&lt;br/&gt;
-    public float getProgress() throws IOException {&lt;br/&gt;
-      return reader.getProgress();&lt;br/&gt;
-    }&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public float getProgress() throws IOException {&lt;br/&gt;
+			return reader.getProgress();&lt;br/&gt;
+		}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    @Override&lt;br/&gt;
-    public boolean next(LongWritable key, BytesWritable value)&lt;br/&gt;
-        throws IOException {&lt;br/&gt;
-      while (reader.next(key, text)) {&lt;br/&gt;
-        // text -&amp;gt; byte[] -&amp;gt; value&lt;br/&gt;
-        byte[] textBytes = text.getBytes();&lt;br/&gt;
-        int length = text.getLength();&lt;br/&gt;
-        &lt;br/&gt;
-        // Trim additional bytes&lt;br/&gt;
-        if (length != textBytes.length) {&lt;br/&gt;
-          textBytes = Arrays.copyOf(textBytes, length);&lt;br/&gt;
-        }&lt;br/&gt;
-        byte[] binaryData = base64.decode(textBytes);&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public boolean nextKeyValue() throws IOException {&lt;br/&gt;
+			value = new BytesWritable();&lt;br/&gt;
+			while (reader.nextKeyValue()) {&lt;br/&gt;
+				// text -&amp;gt; byte[] -&amp;gt; value&lt;br/&gt;
+				byte[] textBytes = text.getBytes();&lt;br/&gt;
+				int length = text.getLength();&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-        // compare data header with signature&lt;br/&gt;
-        int i;&lt;br/&gt;
-        for (i = 0; i &amp;lt; binaryData.length &amp;amp;&amp;amp; i &amp;lt; signature.length &amp;amp;&amp;amp;&lt;br/&gt;
-                        binaryData[i] == signature[i]; ++i);&lt;br/&gt;
+				// Trim additional bytes&lt;br/&gt;
+				if (length != textBytes.length) {&lt;br/&gt;
+					textBytes = Arrays.copyOf(textBytes, length);&lt;br/&gt;
+				}&lt;br/&gt;
+				byte[] binaryData = base64.decode(textBytes);&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-        // return the row only if it&amp;#39;s not corrupted&lt;br/&gt;
-        if (i == signature.length) {&lt;br/&gt;
-          value.set(binaryData, signature.length,&lt;br/&gt;
-                    binaryData.length - signature.length);&lt;br/&gt;
-          return true;&lt;br/&gt;
-        }&lt;br/&gt;
-      }&lt;br/&gt;
-      // no more data&lt;br/&gt;
-      return false;&lt;br/&gt;
-    }&lt;br/&gt;
-    &lt;br/&gt;
-    private byte[] signature;&lt;br/&gt;
-    private Base64 base64 = new Base64();&lt;br/&gt;
+				// compare data header with signature&lt;br/&gt;
+				int i;&lt;br/&gt;
+				for (i = 0; i &amp;lt; binaryData.length &amp;amp;&amp;amp; i &amp;lt; signature.length &amp;amp;&amp;amp; binaryData[i] == signature[i]; ++i);&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-    @Override&lt;br/&gt;
-    public void configure(JobConf job) {&lt;br/&gt;
-      try {&lt;br/&gt;
-        String signatureString = job.get(&amp;quot;base64.text.input.format.signature&amp;quot;);&lt;br/&gt;
-        if (signatureString != null) {&lt;br/&gt;
-          signature = signatureString.getBytes(&amp;quot;UTF-8&amp;quot;);&lt;br/&gt;
-        } else {&lt;br/&gt;
-          signature = new byte[0];&lt;br/&gt;
-        }&lt;br/&gt;
-      } catch (UnsupportedEncodingException e) {&lt;br/&gt;
-        e.printStackTrace();&lt;br/&gt;
-      }      &lt;br/&gt;
-    }&lt;br/&gt;
-  }&lt;br/&gt;
-  &lt;br/&gt;
-  TextInputFormat format;&lt;br/&gt;
-  JobConf job;&lt;br/&gt;
-  &lt;br/&gt;
-  public Base64TextInputFormat() {&lt;br/&gt;
-    format = new TextInputFormat();&lt;br/&gt;
-  }&lt;br/&gt;
-  &lt;br/&gt;
-  @Override&lt;br/&gt;
-  public void configure(JobConf job) {&lt;br/&gt;
-    this.job = job;&lt;br/&gt;
-    format.configure(job);&lt;br/&gt;
-  }&lt;br/&gt;
-  &lt;br/&gt;
-  public RecordReader&amp;lt;LongWritable, BytesWritable&amp;gt; getRecordReader(&lt;br/&gt;
-      InputSplit genericSplit, JobConf job,&lt;br/&gt;
-      Reporter reporter) throws IOException {&lt;br/&gt;
-    reporter.setStatus(genericSplit.toString());&lt;br/&gt;
-    Base64LineRecordReader reader = new Base64LineRecordReader(&lt;br/&gt;
-        new LineRecordReader(job, (FileSplit) genericSplit));&lt;br/&gt;
-    reader.configure(job);&lt;br/&gt;
-    return reader;&lt;br/&gt;
-  }&lt;br/&gt;
+				// return the row only if it&amp;#39;s not corrupted&lt;br/&gt;
+				if (i == signature.length) {&lt;br/&gt;
+					value.set(binaryData, signature.length, binaryData.length - signature.length);&lt;br/&gt;
+					return true;&lt;br/&gt;
+				}&lt;br/&gt;
+			}&lt;br/&gt;
+			// no more data&lt;br/&gt;
+			return false;&lt;br/&gt;
+		}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-  @Override&lt;br/&gt;
-  public InputSplit[] getSplits(JobConf job, int numSplits) throws IOException {&lt;br/&gt;
-    return format.getSplits(job, numSplits);&lt;br/&gt;
-  }&lt;br/&gt;
+		private byte[] signature;&lt;br/&gt;
+		private Base64 base64 = new Base64();&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
-  // Cannot put @Override here because hadoop 0.18+ removed this method.&lt;br/&gt;
-  public void validateInput(JobConf job) throws IOException {&lt;br/&gt;
-    ShimLoader.getHadoopShims().inputFormatValidateInput(format, job);&lt;br/&gt;
-  }&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public void setConf(Configuration job) {&lt;br/&gt;
+			this.job = job;&lt;br/&gt;
+			try {&lt;br/&gt;
+				String signatureString = job.get(&amp;quot;base64.text.input.format.signature&amp;quot;);&lt;br/&gt;
+				if (signatureString != null) {&lt;br/&gt;
+					signature = signatureString.getBytes(&amp;quot;UTF-8&amp;quot;);&lt;br/&gt;
+				} else {&lt;br/&gt;
+					signature = new byte[0];&lt;br/&gt;
+				}&lt;br/&gt;
+			} catch (UnsupportedEncodingException e) {&lt;br/&gt;
+				e.printStackTrace();&lt;br/&gt;
+			}&lt;br/&gt;
+		}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public void initialize(InputSplit split, TaskAttemptContext context) throws IOException, InterruptedException {&lt;br/&gt;
+			// TODO Auto-generated method stub&lt;br/&gt;
+		}&lt;br/&gt;
+&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public Configuration getConf() {&lt;br/&gt;
+			// TODO Auto-generated method stub&lt;br/&gt;
+			return job;&lt;br/&gt;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	TextInputFormat format;&lt;br/&gt;
+	Configuration job;&lt;br/&gt;
+&lt;br/&gt;
+	public Base64TextInputFormat() {&lt;br/&gt;
+		format = new TextInputFormat();&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public void setConf(Configuration job) {&lt;br/&gt;
+		this.job = job;&lt;br/&gt;
+		if (format instanceof Configurable) {&lt;br/&gt;
+			((Configurable) format).setConf(job);&lt;br/&gt;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public RecordReader&amp;lt;LongWritable, BytesWritable&amp;gt; createRecordReader(InputSplit genericSplit, TaskAttemptContext context)&lt;br/&gt;
+			throws IOException, InterruptedException {&lt;br/&gt;
+		LineRecordReader lineReader = new LineRecordReader();&lt;br/&gt;
+		lineReader.initialize((FileSplit) genericSplit, context);&lt;br/&gt;
+		Base64LineRecordReader reader = new Base64LineRecordReader(lineReader);&lt;br/&gt;
+		reader.initialize(genericSplit, context);&lt;br/&gt;
+		reader.setConf(job);&lt;br/&gt;
+		return reader;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public List&amp;lt;InputSplit&amp;gt; getSplits(JobContext context) throws IOException, InterruptedException {&lt;br/&gt;
+		return format.getSplits(context);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public Configuration getConf() {&lt;br/&gt;
+		// TODO Auto-generated method stub&lt;br/&gt;
+		return job;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	// Cannot put @Override here because hadoop 0.18+ removed this method.&lt;br/&gt;
+	public void validateInput(Configuration job) throws IOException {&lt;br/&gt;
+		ShimLoader.getHadoopShims().inputFormatValidateInput(format, job);&lt;br/&gt;
+	}&lt;br/&gt;
&amp;nbsp;}&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[HIVE-960] Lateral View optimizations</title>
                <link>https://issues.apache.org/jira/browse/HIVE-960</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Had a offline discussion with Paul yesterday.&lt;/p&gt;


&lt;p&gt;This is a followup on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-935&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-935&lt;/a&gt;&lt;br/&gt;
Say, the query is &lt;/p&gt;

&lt;p&gt;select .. from T LATERAL VIEW explode(c2_list) as c2 LATERAL VIEW explode(c3_list) as c3&lt;/p&gt;


&lt;p&gt;If we follow the suggestion from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-935&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-935&lt;/a&gt;, &lt;br/&gt;
(Lateral View Join operator will always have 2 inputs - the inputs will not be merged like join),&lt;br/&gt;
the explode operator for c3_list will be called once for each input on c2, which can be expensive.&lt;/p&gt;

&lt;p&gt;Instead, if we merge the inputs and let LATERAL VIEW have 3 inputs, we will be invoking explode&lt;br/&gt;
operator for c3_list once for each row.&lt;/p&gt;

&lt;p&gt;So, merging should be performed when the right side lateral views are not referencing anything from the&lt;br/&gt;
left side lateral views.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442122">HIVE-960</key>
            <summary>Lateral View optimizations</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                            <label>optimization</label>
                    </labels>
                <created>Tue, 1 Dec 2009 18:15:03 +0000</created>
                <updated>Thu, 2 May 2013 02:29:20 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12440836">HIVE-935</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12440836">HIVE-935</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-961] Bug in Groupby causing type cast exception</title>
                <link>https://issues.apache.org/jira/browse/HIVE-961</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12442145">HIVE-961</key>
            <summary>Bug in Groupby causing type cast exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2009 20:57:13 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:52 +0000</updated>
                            <resolved>Tue, 1 Dec 2009 23:55:25 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12784486" author="namit" created="Tue, 1 Dec 2009 22:38:35 +0000"  >&lt;p&gt;Had a offline review with Yongqiang - looks good&lt;br/&gt;
+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12784545" author="namit" created="Tue, 1 Dec 2009 23:55:25 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426587" name="hive-961.patch" size="3885" author="he yongqiang" created="Tue, 1 Dec 2009 22:15:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Dec 2009 22:38:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73190</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-962] &quot;show functions&quot; does not work with unquoted string</title>
                <link>https://issues.apache.org/jira/browse/HIVE-962</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the function name is provided without quotation marks, we should also show the function correctly.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; show functions substr;
OK
Time taken: 0.168 seconds
hive&amp;gt; show functions &lt;span class=&quot;code-quote&quot;&gt;&apos;substr&apos;&lt;/span&gt;;
OK
substr
Time taken: 0.164 seconds
hive&amp;gt; describe function substr;
OK
substr(str, pos[, len]) - returns the substring of str that starts at pos and is of length len
Time taken: 0.188 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12442154">HIVE-962</key>
            <summary>&quot;show functions&quot; does not work with unquoted string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2009 22:29:30 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:48 +0000</updated>
                            <resolved>Fri, 4 Dec 2009 22:33:46 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12785733" author="pauly" created="Fri, 4 Dec 2009 03:46:05 +0000"  >&lt;ul&gt;
	&lt;li&gt;Added support for show functions &amp;lt;function name&amp;gt;; (without quotes)&lt;/li&gt;
	&lt;li&gt;Added support describe function &apos;&amp;lt;function name&amp;gt;&apos; (with quotes) =&amp;gt; should this be added?&lt;/li&gt;
	&lt;li&gt;Created tests to verify above changes&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12785785" author="zshao" created="Fri, 4 Dec 2009 06:46:01 +0000"  >&lt;p&gt;Can you &quot;svn add&quot; the tests?&lt;/p&gt;</comment>
                            <comment id="12786090" author="pauly" created="Fri, 4 Dec 2009 19:21:46 +0000"  >&lt;ul&gt;
	&lt;li&gt;Missing test files added in diff&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12786204" author="zshao" created="Fri, 4 Dec 2009 22:33:46 +0000"  >&lt;p&gt;Committed. Thanks Paul!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426867" name="HIVE-962.1.patch" size="1538" author="pauly" created="Fri, 4 Dec 2009 03:46:05 +0000"/>
                            <attachment id="12426945" name="HIVE-962.2.patch" size="3047" author="pauly" created="Fri, 4 Dec 2009 19:21:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Dec 2009 03:46:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73189</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-962&quot; title=&quot;&amp;quot;show functions&amp;quot; does not work with unquoted string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-962&quot;&gt;&lt;strike&gt;HIVE-962&lt;/strike&gt;&lt;/a&gt; &amp;quot;show functions&amp;quot; should work with unquoted string. (Paul Yang via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-963] no out of memory errors for skewed join</title>
                <link>https://issues.apache.org/jira/browse/HIVE-963</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, in case of skew, hive runs out of memory.&lt;br/&gt;
A simpler fix would be to use JDBM to store data and use that.&lt;/p&gt;

&lt;p&gt;It can be configurable and JDBM should only be triggered if the number of values for a given key exceed a given number.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442169">HIVE-963</key>
            <summary>no out of memory errors for skewed join</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2009 02:02:54 +0000</created>
                <updated>Thu, 2 May 2013 02:29:21 +0000</updated>
                            <resolved>Tue, 29 Dec 2009 06:41:39 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12784626" author="nzhang" created="Wed, 2 Dec 2009 04:44:52 +0000"  >&lt;p&gt;I think we can define a class implementing the Map interface as a wrapper of HashMap and JDBM HTree, so that map-side join can also use this class rather than using JDBM unconditionally. It is also easier if we decided to replace JDBM with a simpler and more efficient persistent hash implementation.&lt;/p&gt;</comment>
                            <comment id="12784665" author="namit" created="Wed, 2 Dec 2009 06:53:16 +0000"  >&lt;p&gt;We can also extend JDBM to spill only when needed.&lt;br/&gt;
+1 to the idea of having a separate class &lt;/p&gt;</comment>
                            <comment id="12785443" author="nzhang" created="Thu, 3 Dec 2009 18:51:46 +0000"  >&lt;p&gt;Yongqiang, have you started this JIRA. If not, do you mind I taking over this JIRA? There is a task that was blocked by this JIRA. &lt;/p&gt;</comment>
                            <comment id="12785447" author="he yongqiang" created="Thu, 3 Dec 2009 18:55:31 +0000"  >&lt;p&gt;no, i haven&apos;t start working on it. Please feel free to take over.&lt;/p&gt;</comment>
                            <comment id="12785659" author="rsm" created="Fri, 4 Dec 2009 00:07:06 +0000"  >&lt;p&gt;its better (performance-wise) to extend jdbm instead of copying over records from the hashmap to jdbm if some threshold is exceeded.&lt;/p&gt;</comment>
                            <comment id="12785663" author="nzhang" created="Fri, 4 Dec 2009 00:19:30 +0000"  >&lt;p&gt;We don&apos;t need to copy hashmap to jdbm. We&apos;ll keep data in HashMap and only put new data in JDBM if overflow. That&apos;s easier than modifying JDBM to enable cache w/o writing to disk as well. &lt;/p&gt;</comment>
                            <comment id="12785680" author="rsm" created="Fri, 4 Dec 2009 00:40:00 +0000"  >&lt;p&gt;wont we have to allocate some memory to jdbm as well? Will we have enough memory for both the hashmap and jdbm?&lt;/p&gt;</comment>
                            <comment id="12785684" author="namit" created="Fri, 4 Dec 2009 00:49:14 +0000"  >&lt;p&gt;In JDBM, the cache can be disabled very easily&lt;/p&gt;</comment>
                            <comment id="12785687" author="rsm" created="Fri, 4 Dec 2009 00:58:07 +0000"  >&lt;p&gt;Actually, after thinking about this a little more, we dont need a hashmap or jdbm for skewed joins. We run out of memory in the reducer when data is skewed. And in the reducer, data is already sorted. &lt;/p&gt;

&lt;p&gt;So, we just need to read the first table&apos;s data into an array and when we run out of memory, just dump the remaining data into a tmp file. Then, while streaming through the second table, we first join with the data in memory and then swap the contents of the tmp file for the rest of the join. We could optimize by reading in several tuples from the second table into memory instead of processing one tuple at a time.&lt;/p&gt;

&lt;p&gt;does that make sense?&lt;/p&gt;</comment>
                            <comment id="12785689" author="nzhang" created="Fri, 4 Dec 2009 00:59:49 +0000"  >&lt;p&gt;Yes, in our application cache in JDBM can be disabled. The memory footprint for JDBM should be minimum, which will be needed anyway if we add cache layer to JDBM directly.&lt;/p&gt;</comment>
                            <comment id="12785691" author="namit" created="Fri, 4 Dec 2009 01:05:27 +0000"  >&lt;p&gt;Yes, that makes sense. I think 2 discussions are happening on this jira - in general it is a good idea to have a cache on top of JDBM, and not write every row to a file.&lt;br/&gt;
That should speed up the mapper considerably for map-joins.&lt;/p&gt;

&lt;p&gt;However, for a join happening on the reducer, JDBM seems too heavy weight to use.&lt;/p&gt;</comment>
                            <comment id="12785692" author="nzhang" created="Fri, 4 Dec 2009 01:06:01 +0000"  >&lt;p&gt;@ragu, I think what you proposed is the similar to what Zheng proposed to implement a lightweight persistent hash table rather than using JDBM. I think that can be done in the second stage (the next JIRA?). We can replace the JDBM in the wrapper by the lightweight persistent hash table. &lt;/p&gt;

&lt;p&gt;Basically we need the hash table in the case of joinning of multiple tables, where the key is the table tag. Of couse hash map can be avoided by using list of arrays, if we know the table tags are always small integers. &lt;/p&gt;</comment>
                            <comment id="12785798" author="nzhang" created="Fri, 4 Dec 2009 07:22:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-963&quot; title=&quot;no out of memory errors for skewed join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-963&quot;&gt;&lt;del&gt;HIVE-963&lt;/del&gt;&lt;/a&gt;.patch is attached. This patch &lt;br/&gt;
 1) introduced a new file HashMapWrapper.java &lt;br/&gt;
 2) changed JoinOperator, CommonJoinOperator, and MapJoinOperator to use HashMapWrapper.&lt;br/&gt;
 3) modified JDBM files to add support to disable cache and accepting File as the input parameter to record manager. &lt;/p&gt;</comment>
                            <comment id="12786100" author="nzhang" created="Fri, 4 Dec 2009 19:35:49 +0000"  >&lt;p&gt;Found some issues in the case of CommonJoin. The # of keys here is small but the value is too large. So this implementation won&apos;t help much. It will help for the MapJoin case. Please ignore this patch for now. &lt;/p&gt;</comment>
                            <comment id="12791217" author="nzhang" created="Wed, 16 Dec 2009 05:51:26 +0000"  >&lt;p&gt;Uploading patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-963&quot; title=&quot;no out of memory errors for skewed join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-963&quot;&gt;&lt;del&gt;HIVE-963&lt;/del&gt;&lt;/a&gt;.patch. This patch include:&lt;/p&gt;

&lt;p&gt;1) Introducing a new class ArrayListWrapper that implements a simple persistent ArrayList interface (subset). It tries to solve two issues: OutOfMemoryException and data loading and iteration performance. It only supports add() and a fast iterator iterface through fist() and next(). So no Iterator class is created. Preliminary experiments shows a 10x faster in data load. &lt;br/&gt;
2) Changed MapJoinOperator, CommonJoinOperator to use ArrayListWrapper.&lt;br/&gt;
3) add a new unit test TestArrayListWrapper.&lt;br/&gt;
4) misc. simple factoring and code cleanup in HashMapWrapper.&lt;/p&gt;</comment>
                            <comment id="12791219" author="nzhang" created="Wed, 16 Dec 2009 05:54:57 +0000"  >&lt;p&gt;deleted the old &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-963&quot; title=&quot;no out of memory errors for skewed join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-963&quot;&gt;&lt;del&gt;HIVE-963&lt;/del&gt;&lt;/a&gt;.patch. The current &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-963&quot; title=&quot;no out of memory errors for skewed join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-963&quot;&gt;&lt;del&gt;HIVE-963&lt;/del&gt;&lt;/a&gt;.patch is the new one with all the changes mentioned above. It is ready for review. &lt;/p&gt;</comment>
                            <comment id="12791228" author="namit" created="Wed, 16 Dec 2009 06:22:39 +0000"  >&lt;p&gt;I have take a look and get back to you&lt;/p&gt;</comment>
                            <comment id="12791231" author="namit" created="Wed, 16 Dec 2009 06:33:46 +0000"  >&lt;p&gt;looks good - 1 minor comment.&lt;br/&gt;
Dont you need to clean up the temp files at the beginning of each group.&lt;/p&gt;

&lt;p&gt;    for ( ArrayListWrapper alw: storage.values() )&lt;br/&gt;
      alw.clear(); // clean up the temp files                                                &lt;br/&gt;
    storage.clear();&lt;/p&gt;

&lt;p&gt;Isn&apos;t this needed in startGroup() also ?&lt;/p&gt;

</comment>
                            <comment id="12791238" author="nzhang" created="Wed, 16 Dec 2009 07:02:49 +0000"  >&lt;p&gt;good point. Actually I had that code in startGroup() before but it introduced a bug when one of ArrayListWrapper is a dummyObj, in which case we don&apos;t want to clear it. I agree that if it is not dummyObj, alw should be cleared (or should be reused). &lt;/p&gt;</comment>
                            <comment id="12791434" author="namit" created="Wed, 16 Dec 2009 16:22:46 +0000"  >&lt;p&gt;Also, can you add a test or convert an existing one with join.size = 1, so that the persistent code is executed&lt;/p&gt;</comment>
                            <comment id="12794237" author="nzhang" created="Wed, 23 Dec 2009 21:55:30 +0000"  >&lt;p&gt;Uploading a new patch. Changes include:&lt;/p&gt;

&lt;p&gt; 1) change ArrayListWrapper to RowContainer.&lt;br/&gt;
 2) In RowContainer, the input shoudl always be a list of object, which should be come with a SerDe and ObjectInspector to spill out to disk.&lt;br/&gt;
 3) added in the joinDesc to indicate the tableDesc of the inputs to the join operator.&lt;br/&gt;
 4) added a union test join40.q to test the case when the block size is 1 where spill will actually happen. &lt;/p&gt;</comment>
                            <comment id="12794940" author="namit" created="Mon, 28 Dec 2009 21:39:44 +0000"  >&lt;p&gt;1. Can you remove Row.java&lt;br/&gt;
2. Can you also do some refactoring  - move RowContainer/MapJoinObjectKey and MapJoinObjectValue in a separate directory in exec (joinUtilities or something like that?)&lt;/p&gt;
</comment>
                            <comment id="12794971" author="nzhang" created="Tue, 29 Dec 2009 00:14:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-963&quot; title=&quot;no out of memory errors for skewed join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-963&quot;&gt;&lt;del&gt;HIVE-963&lt;/del&gt;&lt;/a&gt;_3.patch contains the changes suggested by Namit previous comments.&lt;/p&gt;</comment>
                            <comment id="12794985" author="namit" created="Tue, 29 Dec 2009 01:22:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12795019" author="namit" created="Tue, 29 Dec 2009 06:41:39 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12427946">HIVE-562</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12428132" name="HIVE-963.patch" size="28372" author="nzhang" created="Wed, 16 Dec 2009 05:51:26 +0000"/>
                            <attachment id="12428875" name="HIVE-963_2.patch" size="186657" author="nzhang" created="Wed, 23 Dec 2009 21:55:30 +0000"/>
                            <attachment id="12429046" name="HIVE-963_3.patch" size="228914" author="nzhang" created="Tue, 29 Dec 2009 00:14:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Dec 2009 04:44:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lco7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-964] handle skewed keys for a join in a separate job</title>
                <link>https://issues.apache.org/jira/browse/HIVE-964</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The skewed keys can be written to a temporary table or file, and a followup conditional task can be used to perform the join on those keys.&lt;br/&gt;
As a first step, JDBM can be used for those keys&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442170">HIVE-964</key>
            <summary>handle skewed keys for a join in a separate job</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2009 02:06:04 +0000</created>
                <updated>Mon, 23 Jul 2018 12:58:11 +0000</updated>
                            <resolved>Sat, 16 Jan 2010 06:42:34 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12789586" author="he yongqiang" created="Fri, 11 Dec 2009 22:44:18 +0000"  >&lt;p&gt;Here is the idea, according to offline discussions with Namit and Ning.&lt;/p&gt;

&lt;p&gt;1. Number of mr jobs to handle skew keys is the number of table minus 1 (we can stream the last table, so big keys in the last table will not be a problem).&lt;br/&gt;
2. At runtime in Join, we output big keys in one table into one corresponding directories, and all same keys in other tables into different dirs(one for each table).&lt;br/&gt;
The directories will look like:&lt;br/&gt;
dir-T1-bigkeys(containing big keys in T1), dir-T2-keys(containing keys which is big in T1),dir-T3-keys(containing keys which is big in T1), ...&lt;br/&gt;
dir-T1-keys(containing keys which is big in T2), dir-T2-bigkeys(containing big keys in T2),dir-T3-keys(containing keys which is big in T2), ...&lt;br/&gt;
dir-T1-keys(containing keys which is big in T3), dir-T2-keys(containing big keys in T3),dir-T3-bigkeys(containing keys which is big in T3), ...&lt;br/&gt;
.....&lt;br/&gt;
3. For each table, we launch one mapjoin job, taking the directory containing big keys in this table and corresponding dirs in other tables as input. (Actally one job for one row in the above.)&lt;/p&gt;

&lt;p&gt;This strategy can help to make the plan fix at compile time. &lt;/p&gt;</comment>
                            <comment id="12789602" author="namit" created="Fri, 11 Dec 2009 23:13:38 +0000"  >&lt;p&gt;Sounds good - btw, after this discussion, I don&apos;t think using JDBM is feasible.&lt;br/&gt;
All the directories listed above are hdfs directories.&lt;/p&gt;</comment>
                            <comment id="12792316" author="he yongqiang" created="Fri, 18 Dec 2009 03:23:13 +0000"  >&lt;p&gt;first version for comments.&lt;/p&gt;</comment>
                            <comment id="12795236" author="he yongqiang" created="Wed, 30 Dec 2009 05:03:41 +0000"  >&lt;p&gt;Attache a new patch. &lt;br/&gt;
Changes include:&lt;br/&gt;
1) update patch against trunk code.&lt;br/&gt;
2) According to an offline discussion with Namit, Ning, and Ashish. This patch uses the original groupKey in reducer as the dummy join key for follow-up map joins. The previous patch just uses java&apos;s UUID and a random number generator to generate the dummy join keys.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-963&quot; title=&quot;no out of memory errors for skewed join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-963&quot;&gt;&lt;del&gt;HIVE-963&lt;/del&gt;&lt;/a&gt; introduced a RowContainer to handle skew join keys, it will serialize the value parts into a local file in case of OOM. Right now this patch just gets value object from RowContainer and serialize it to HDFS. The bad thing is that, if a row is already serialized into local file, it will need to deserialize to object and then reserialize to HDFS. It will need to serialize this object twice and also a deserialize.  &lt;br/&gt;
It will be better if we can directly read RowContainer&apos;s local file and write to HDFS. This will need  to let the RowContainer to serialize the key part together with the join values. (Right now RowContainer will only serialize join values.) It will be better if we can enable this only when skew join is enabled. I suggest to do this in a follow up jira because the changes for handling skew join is already very complicated (Some comments to make the code more easy to understand: 1) &apos;tag&apos; is get differently in mapper side and reducer side, thus they are different in MapJoinOp and JoinOp 2) join&apos;s tag order is reordered in JoinReorder, but the operator tree is not changed. 3) map join actually does not use tag order array, but the tag order array is used in MapJoinOp&apos;s parent CommonJoinOp.).&lt;/p&gt;
</comment>
                            <comment id="12795421" author="nzhang" created="Wed, 30 Dec 2009 20:05:41 +0000"  >&lt;p&gt;Some comments so far: &lt;/p&gt;

&lt;p&gt;1) GenMRSkewJoinProcessor.skewJoinEnabled() checks whether the join is any form of outer join or not. Talked with Namit and this check seems unnecessary. The reason map join doesn&apos;t work with outer join is that the small table contains all keys (not only those that contains a match). In this case, we know exactly the keys will match if they are non-empty. So we can handle Outer Joins as well.&lt;/p&gt;

&lt;p&gt;2) can you add some unit tests for outer joins if the above is changed?&lt;/p&gt;</comment>
                            <comment id="12798159" author="he yongqiang" created="Fri, 8 Jan 2010 20:12:47 +0000"  >&lt;p&gt;Had an offline discussion with Namit and Ning days ago. some notes: &lt;br/&gt;
1) &lt;br/&gt;
we can let it not support outer join right now because we need run time evaluation (not just flush data out) . Runtime join evaluate is used to see if a partial join is empty and what will be the final results.  for example: &quot;SELECT * FROM T1 src1 LEFT OUTER JOIN T2 src2 ON src1.key+1 = src2.key RIGHT OUTER JOIN T2 src3 ON src2.key = src3.key;&quot;. Results of &quot;src1 LEFT OUTER JOIN T2 src2 ON src1.key+1 = src2.key&quot; is empty. So it is actually EMPTY right outer join src3.&lt;/p&gt;

&lt;p&gt;2)&lt;br/&gt;
Right now after hive-963 in, once a key appears more than &quot;hive.join.cache.size&quot;, data is actually written to local disk by row container. &lt;br/&gt;
We need to let row container to use hadoop fileformat in order to write data to hdfs for another mr job more easily.&lt;/p&gt;</comment>
                            <comment id="12798164" author="he yongqiang" created="Fri, 8 Jan 2010 20:19:45 +0000"  >&lt;p&gt;CHANGES:&lt;br/&gt;
1) let row container use hadoop fileformat&lt;br/&gt;
2) let row container directly upload file to dfs&lt;br/&gt;
3) added logic to handle reducer failure (we should not see results of a failure reducer) .&lt;br/&gt;
4) write one file per skew key and combinefileinputformat.&lt;/p&gt;</comment>
                            <comment id="12798165" author="he yongqiang" created="Fri, 8 Jan 2010 20:21:11 +0000"  >&lt;p&gt;hive-964-2010-01-08.patch is just for review, will update patch to trunk code after 0.5.&lt;/p&gt;</comment>
                            <comment id="12798578" author="namit" created="Mon, 11 Jan 2010 05:53:59 +0000"  >&lt;p&gt;Did not take a look in great detail, but some high level comments:&lt;/p&gt;

&lt;p&gt;1. Changes in ExecDriver are not needed&lt;br/&gt;
2. Skew Join should be a optimization step - I remember initially we had thought about it and said it might be easy to do it at the end,&lt;br/&gt;
    but it makes more sense to plug it in the optimization phase. It can be the last optimization step, and we can assume that map join&lt;br/&gt;
    conversions etc. have been done.&lt;br/&gt;
3. Condtitional Task: needs some rework. Since execute is not getting called recursively, same thing should happen for initialize.&lt;br/&gt;
   It would be great if we can fold it in execute though - not sure how.&lt;br/&gt;
4. The numbers of jobs etc. should be correct - conditional task is not a single job, but &apos;n&apos;.&lt;/p&gt;</comment>
                            <comment id="12798582" author="namit" created="Mon, 11 Jan 2010 06:05:19 +0000"  >&lt;p&gt; if (alias == numAliases - 1 &amp;amp;&amp;amp; !(this.handleSkewJoin &amp;amp;&amp;amp;&lt;br/&gt;
this.skewJoinKeyContext.skewKeyInCurrentGroup)) {&lt;/p&gt;

&lt;p&gt;JoinOperator.java:&lt;/p&gt;

&lt;p&gt;Do you need the change ? Why do we need to handle skew for the last key ?&lt;/p&gt;

&lt;p&gt;Can we move the changes for skew join in a new file ?&lt;/p&gt;</comment>
                            <comment id="12798583" author="namit" created="Mon, 11 Jan 2010 06:10:08 +0000"  >&lt;p&gt;Instead of making Driver aware of conditional task - can we change the code structure ?&lt;br/&gt;
Pass a context to execute()/initialize() if needed.&lt;/p&gt;

&lt;p&gt;The current tasks would ignore the context. But the conditional task would add the resulting tasks in the queue which will be &lt;br/&gt;
passed in the context.&lt;/p&gt;</comment>
                            <comment id="12798742" author="he yongqiang" created="Mon, 11 Jan 2010 17:44:50 +0000"  >&lt;blockquote&gt;
&lt;p&gt;if (alias == numAliases - 1 &amp;amp;&amp;amp; !(this.handleSkewJoin &amp;amp;&amp;amp;&lt;br/&gt;
this.skewJoinKeyContext.skewKeyInCurrentGroup)) {&lt;br/&gt;
JoinOperator.java:&lt;/p&gt;

&lt;p&gt;Do you need the change ? Why do we need to handle skew for the last key ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;this change is not needed right now. It is a mistake by last patch. In last patch, joinOp directly write skew keys into hdfs and there is no copy in storage once data is written into hdfs. since right we first use local disk to store data and upload to hdfs at last, we can remove this change.&lt;/p&gt;

&lt;p&gt;will work on other comments.  Thanks for the detailed comments!&lt;/p&gt;</comment>
                            <comment id="12800067" author="he yongqiang" created="Thu, 14 Jan 2010 01:20:36 +0000"  >&lt;p&gt;hive-964-2010-01-13-2.patch is not the final patch, and just for early review. Still got one testcase failure. &lt;/p&gt;</comment>
                            <comment id="12800305" author="namit" created="Thu, 14 Jan 2010 19:03:18 +0000"  >&lt;p&gt;1. ConditionalTask.java: 80            if(DriverContext.isLaunchable(child))&lt;br/&gt;
   Shouldnt this be a assert instead ?&lt;/p&gt;

&lt;p&gt;2. SkewJoinResolver: shouldnt it check for HIVESKEWJOINKEY and get out if not set.&lt;/p&gt;

&lt;p&gt;3. ExplainPlan should also show subtasks of conditional tasks at the top stage&lt;/p&gt;

&lt;p&gt;4. Seems like after the skew join conditional task, the dependency between the original join and the old children will&lt;br/&gt;
   still be kept - it can be removed.&lt;/p&gt;

&lt;p&gt;5. Last alias/tag for join does not need a conditional task - the last is the last one in the order.&lt;/p&gt;

&lt;p&gt;6. Instead of serializing/deserializing mapredWork, it might be a good idea to add a clone to mapredWork - it can be done&lt;br/&gt;
   in a followup patch also.&lt;/p&gt;

&lt;p&gt;7. GenMRSkewJoinProcessor.java:253 wont localPlan always be null&lt;/p&gt;

&lt;p&gt;8. Can there be a fetchWork in the conditional task ?&lt;/p&gt;

&lt;p&gt;9. processSkewJoin: do you think it would be cleaner if you break it up into multiple functions ?&lt;/p&gt;</comment>
                            <comment id="12800445" author="nzhang" created="Fri, 15 Jan 2010 00:11:40 +0000"  >&lt;p&gt;Some more comments:&lt;/p&gt;

&lt;p&gt;1) RowContainer.java:134 and 207 can you define a enum in HiveConf and use that instead of the string here?&lt;br/&gt;
2) RowConainer.java:147 the if condition should always be true due to the assertion in line 144. So if should be removed. Also in setSerDe dummyRow doesn&apos;t need to be set here since it will be passed by the caller (e.g., CommonJoinOperator) who construct the dummy row and passed by add(). Please take a look at add() line 165.&lt;br/&gt;
3) please move variable declarations in 171-177 to the beginning of the class where most variables are declared and add a brief comment on each of them.&lt;br/&gt;
4) the firstCalled boolean should be cleared at add() otherwise the following situation may give wrong results: add, first, add, next, next. &lt;br/&gt;
5) in first(), the closeWriter(), closeReader() are called for each first(), this may cause bad performance when the RowContainer is iterated many times and there is no &lt;br/&gt;
6) InputFormat in line 204. It could be very expensive if the RowContainer is iterated many times&lt;br/&gt;
7) Can you rename the variable originalReadBlock to firstBlock, which is easier to understand.. &lt;br/&gt;
8) in nextBlock Writable val is a new instance of serde for every new block, can we reuse the serde?&lt;br/&gt;
9) key is inserted for each row as the first element before spillBlock and after nextBlock. This is too expensive given the row is an ArrayList. Zheng suggested to use UnionStructObjectInspector to handle key and value separately. &lt;/p&gt;</comment>
                            <comment id="12800587" author="he yongqiang" created="Fri, 15 Jan 2010 06:47:59 +0000"  >&lt;p&gt;Incorporated comments, and attached the patch.&lt;br/&gt;
Thanks for the detailed comments Namit and Ning.&lt;/p&gt;
</comment>
                            <comment id="12800811" author="namit" created="Fri, 15 Jan 2010 18:19:44 +0000"  >&lt;p&gt;A subtask of a conditional task cannot be a root stage.&lt;br/&gt;
Change &quot;is constitued of&quot; by &quot;consists of&quot;&lt;br/&gt;
The output of child tasks of condition tasks is	emitted twice (they should not be emitted while&lt;br/&gt;
displaying conditional task).&lt;/p&gt;

&lt;p&gt;Also, can you file follow-up jiras ?&lt;/p&gt;

&lt;p&gt;Otherwise, it is OK for me.&lt;/p&gt;

&lt;p&gt;Ning, can you also take a look again and approve it.&lt;/p&gt;</comment>
                            <comment id="12800867" author="he yongqiang" created="Fri, 15 Jan 2010 19:35:36 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The output of child tasks of condition tasks is emitted twice (they should not be emitted while&lt;br/&gt;
displaying conditional task). &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is controlled by conditional work, do u think it is really good to remove them from conditional work?&lt;/p&gt;</comment>
                            <comment id="12800874" author="namit" created="Fri, 15 Jan 2010 19:41:53 +0000"  >&lt;p&gt;Dont you think it is useless to output the info. twice ?&lt;/p&gt;</comment>
                            <comment id="12800883" author="nzhang" created="Fri, 15 Jan 2010 19:51:53 +0000"  >&lt;p&gt;the current patch does not contain the UnionStructObjectInspector change. Yongqiang is redoing that changes now.&lt;/p&gt;</comment>
                            <comment id="12800987" author="namit" created="Fri, 15 Jan 2010 23:05:32 +0000"  >&lt;p&gt;@yongqiang/Ning.&lt;/p&gt;

&lt;p&gt;Do you think we can do these things in follow-up jiras - conditional task output in explain and union struct object inspector ?&lt;/p&gt;

&lt;p&gt;If we want to merge John&apos;s patch also by Tuesday, we should get this in.&lt;/p&gt;
</comment>
                            <comment id="12800990" author="he yongqiang" created="Fri, 15 Jan 2010 23:09:46 +0000"  >&lt;p&gt;These are finished and passed all tests. Will upload a new patch soon. Just can&apos;t find my right patch now ... &lt;/p&gt;</comment>
                            <comment id="12801018" author="namit" created="Sat, 16 Jan 2010 00:03:09 +0000"  >&lt;p&gt;Can you file follow up patches - I will try to merge this&lt;/p&gt;</comment>
                            <comment id="12801056" author="nzhang" created="Sat, 16 Jan 2010 01:45:25 +0000"  >&lt;p&gt;the lastest patch (hive-964-... 15-4.patch) looks fine to me. Namit this is the patch Yongqiang is ready to merge.&lt;/p&gt;</comment>
                            <comment id="12801059" author="he yongqiang" created="Sat, 16 Jan 2010 01:47:57 +0000"  >&lt;p&gt;Also i just filed new followup jira hive-1058. &lt;br/&gt;
Namit and Ning, pls feel free to file new jiras.&lt;/p&gt;</comment>
                            <comment id="12801060" author="namit" created="Sat, 16 Jan 2010 01:52:03 +0000"  >&lt;p&gt;I am running tests right now&lt;/p&gt;</comment>
                            <comment id="12801077" author="namit" created="Sat, 16 Jan 2010 02:41:16 +0000"  >&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I owner -I transient_lastDdlTime /data/us\&lt;br/&gt;
ers/njain/hive_commit1/hive_commit1/build/ql/test/logs/clientnegative/load_wrong_fileformat_rc_seq.q.out /data/users/njain/hive_commit\&lt;br/&gt;
1/hive_commit1/ql/src/test/results/clientnegative/load_wrong_fileformat_rc_seq.q.out&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 11d10&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; POSTHOOK: Output: default@t1&lt;/p&gt;


&lt;p&gt;Got a diff in NegativeCliDriver&lt;/p&gt;

&lt;p&gt;Also, I got a timeout while running TestCliDriver - can you increase the timeout interval time ?&lt;/p&gt;</comment>
                            <comment id="12801081" author="he yongqiang" created="Sat, 16 Jan 2010 02:57:48 +0000"  >&lt;p&gt;Hi Namit, can you resolve that diff manually? I just tried that testcase, but I did not get the diff.&lt;br/&gt;
Also can we increase the interval time in another jira? Right now I often got wrong patch file, so i do not want to risk getting a wrong diff again.&lt;/p&gt;</comment>
                            <comment id="12801087" author="namit" created="Sat, 16 Jan 2010 03:44:05 +0000"  >&lt;p&gt;ok, will do&lt;/p&gt;</comment>
                            <comment id="12801114" author="namit" created="Sat, 16 Jan 2010 06:42:34 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                            <comment id="12801981" author="jvs" created="Mon, 18 Jan 2010 22:47:10 +0000"  >&lt;p&gt;Regarding the &quot;Output: default@t1&quot; diff:&lt;/p&gt;

&lt;p&gt;I noticed something similar while I was developing negative tests for CREATE VIEW.  I think the problem is that if the same object name (like &quot;t1&quot;) is used in more than one negative test script, then you&apos;ll get different results for DROP TABLE depending on whether the test is run by itself vs as part of a suite. The problem is that negative tests don&apos;t get a chance to clean up after themselves, so the execution of the pre-drop in the next test is going to depend on whether a previous test ran leaving behind objects.&lt;/p&gt;

&lt;p&gt;I worked around it by changing my scripts to use unique object names.&lt;/p&gt;

&lt;p&gt;A less brittle approach (which I&apos;ve used on similar test frameworks in the past) is to automate the &quot;pre-drop&quot; logic to make it generic at the beginning of each test.  The test framework scans the catalog and issues a DROP for each existing object (in silent mode).  This also means test authors can skip writing both pre-drop and post-drop (regardless of whether it is a positive or negative test), which is nice.&lt;/p&gt;</comment>
                            <comment id="12802114" author="namit" created="Tue, 19 Jan 2010 06:34:31 +0000"  >&lt;p&gt;I just did a grep in the negative tests directory.&lt;br/&gt;
There are only 28 negative create table statements and 3 create functions.&lt;/p&gt;

&lt;p&gt;A simpler approach might be change these tests to use the same name -  and at the beginning of each test, just drop all of them.&lt;br/&gt;
Kind of like &quot;pre-drop&quot; that John is suggesting. Instead of making it scan the catalog, we can just drop tables: T1, T2, ... Tn and so on,&lt;br/&gt;
assuming all tests follow the same naming convention. The drop can be added in QTestUtil or NegavtiveCliDriver&lt;/p&gt;
</comment>
                            <comment id="14069997" author="sjtufighter" created="Tue, 22 Jul 2014 08:25:12 +0000"  >&lt;p&gt;if the two join tables  have the same big skew key on one value (for example ,select *  from  table A join B  on  A.id=b.id,  both table A  and B  have  a lot of  keys on id=1,  in  this  case ,map join  will OOM),  how  to fix this  case?  Will  it  rollback  to common  join ? &lt;/p&gt;</comment>
                            <comment id="14480862" author="apivovarov" created="Mon, 6 Apr 2015 03:00:58 +0000"  >&lt;p&gt;The fix adds new field to JoinDesc.java&lt;br/&gt;
private tableDesc keyTableDesc;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hive/commit/e4f997f52bb79012d9d94bd6105e86ebea3e29cf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/commit/e4f997f52bb79012d9d94bd6105e86ebea3e29cf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;MapJoinDesc which extends JoinDesc already had similar field&lt;br/&gt;
private tableDesc keyTblDesc;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hive/blob/e4f997f52bb79012d9d94bd6105e86ebea3e29cf/ql/src/java/org/apache/hadoop/hive/ql/plan/mapJoinDesc.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/e4f997f52bb79012d9d94bd6105e86ebea3e29cf/ql/src/java/org/apache/hadoop/hive/ql/plan/mapJoinDesc.java&lt;/a&gt;  (line 42)&lt;/p&gt;

&lt;p&gt;should MapJoinDesc use parent get/set KeyTableDesc() instead of having its own keyTblDesc field?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13173800">HIVE-20222</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12786932">HIVE-10159</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12427946">HIVE-562</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12428393" name="hive-964-2009-12-17.txt" size="60596" author="he yongqiang" created="Fri, 18 Dec 2009 03:23:13 +0000"/>
                            <attachment id="12429036" name="hive-964-2009-12-28-2.patch" size="635459" author="he yongqiang" created="Mon, 28 Dec 2009 22:49:47 +0000"/>
                            <attachment id="12429120" name="hive-964-2009-12-29-4.patch" size="654301" author="he yongqiang" created="Wed, 30 Dec 2009 05:03:41 +0000"/>
                            <attachment id="12429779" name="hive-964-2010-01-08.patch" size="300106" author="he yongqiang" created="Fri, 8 Jan 2010 20:19:45 +0000"/>
                            <attachment id="12430208" name="hive-964-2010-01-13-2.patch" size="225881" author="he yongqiang" created="Thu, 14 Jan 2010 01:20:36 +0000"/>
                            <attachment id="12430375" name="hive-964-2010-01-14-3.patch" size="2368593" author="he yongqiang" created="Fri, 15 Jan 2010 07:54:05 +0000"/>
                            <attachment id="12430463" name="hive-964-2010-01-15-4.patch" size="2352309" author="he yongqiang" created="Fri, 15 Jan 2010 23:26:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Dec 2009 22:44:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73187</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-965] optimize skewed joins</title>
                <link>https://issues.apache.org/jira/browse/HIVE-965</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;As a followup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-964&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-964&lt;/a&gt;, the joins for the skewed keys can be performed by using techniques similar to &lt;a href=&quot;http://wiki.apache.org/pig/PigSkewedJoinSpec&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/pig/PigSkewedJoinSpec&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442171">HIVE-965</key>
            <summary>optimize skewed joins</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                            <label>optimization</label>
                    </labels>
                <created>Wed, 2 Dec 2009 02:07:44 +0000</created>
                <updated>Thu, 2 May 2013 02:29:21 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13553226" author="ashutoshc" created="Mon, 14 Jan 2013 22:50:46 +0000"  >&lt;p&gt;Is this still relevant after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3086&quot; title=&quot;Skewed Join Optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3086&quot;&gt;&lt;del&gt;HIVE-3086&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12427946">HIVE-562</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Jan 2013 22:50:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08n5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48349</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-966] Hive command line should output log messages in 24-hour format</title>
                <link>https://issues.apache.org/jira/browse/HIVE-966</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12442180">HIVE-966</key>
            <summary>Hive command line should output log messages in 24-hour format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2009 04:46:33 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:16 +0000</updated>
                            <resolved>Fri, 4 Dec 2009 00:58:14 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12784651" author="namit" created="Wed, 2 Dec 2009 06:28:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good&lt;/p&gt;</comment>
                            <comment id="12785688" author="namit" created="Fri, 4 Dec 2009 00:58:14 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426628" name="HIVE-966.1.patch" size="672" author="zshao" created="Wed, 2 Dec 2009 04:48:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Dec 2009 06:28:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122706</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-967] Implement &quot;show create table&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-967</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;SHOW CREATE TABLE would be very useful in cases where you are trying to figure out the partitioning and/or bucketing scheme for a table. Perhaps this could be implemented by having new tables automatically SET PROPERTIES (create_command=&apos;raw text of the create statement&apos;)?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442255">HIVE-967</key>
            <summary>Implement &quot;show create table&quot;</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="farlue">Feng Lu</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2009 19:50:39 +0000</created>
                <updated>Tue, 1 Sep 2015 02:19:46 +0000</updated>
                            <resolved>Tue, 16 Oct 2012 17:41:00 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>16</watches>
                                                                <comments>
                            <comment id="12785138" author="namit" created="Thu, 3 Dec 2009 02:03:30 +0000"  >&lt;p&gt;It should also contain all DDL changes after the table is created. I mean, if a alter was performed on the table, the CREATE TABLE should&lt;br/&gt;
reflect that&lt;/p&gt;</comment>
                            <comment id="12974980" author="appodictic" created="Fri, 24 Dec 2010 22:25:54 +0000"  >&lt;p&gt;@Carl. Are you still working on this. I have a working show create table that talks to the metastore but have not created and DML for it yet.&lt;/p&gt;</comment>
                            <comment id="12975077" author="cwsteinbach" created="Sat, 25 Dec 2010 21:44:48 +0000"  >&lt;p&gt;@Ed: Sounds good, reassigning this to you.&lt;/p&gt;</comment>
                            <comment id="12997862" author="appodictic" created="Tue, 22 Feb 2011 15:47:10 +0000"  >&lt;p&gt;Not a patch on hive-trunk. but a program that can read the metastore and generate some descent show creates&lt;/p&gt;</comment>
                            <comment id="12997963" author="jayr" created="Tue, 22 Feb 2011 18:50:14 +0000"  >&lt;p&gt;Jar of Ed&apos;s Show Create Table utility&lt;/p&gt;</comment>
                            <comment id="13415666" author="farlue" created="Mon, 16 Jul 2012 21:31:52 +0000"  >&lt;p&gt;Implemented Show CreateTable query.&lt;/p&gt;</comment>
                            <comment id="13415668" author="farlue" created="Mon, 16 Jul 2012 21:32:45 +0000"  >&lt;p&gt;Review is available at &lt;a href=&quot;https://reviews.facebook.net/D4161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4161&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="13415806" author="cwsteinbach" created="Tue, 17 Jul 2012 00:10:54 +0000"  >&lt;p&gt;@Feng: I left some review comments on phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13415888" author="namit" created="Tue, 17 Jul 2012 04:21:21 +0000"  >&lt;p&gt;@Feng, some more comments from me&lt;/p&gt;</comment>
                            <comment id="13426201" author="farlue" created="Tue, 31 Jul 2012 23:05:35 +0000"  >&lt;p&gt;Uploading the patch for the current differential.&lt;/p&gt;</comment>
                            <comment id="13430429" author="farlue" created="Tue, 7 Aug 2012 16:56:53 +0000"  >&lt;p&gt;The diff is updated and a current patch is attached here.&lt;/p&gt;</comment>
                            <comment id="13435302" author="kevinwilfong" created="Wed, 15 Aug 2012 17:07:55 +0000"  >&lt;p&gt;Made a couple comments on the diff.&lt;/p&gt;</comment>
                            <comment id="13435360" author="farlue" created="Wed, 15 Aug 2012 18:12:24 +0000"  >&lt;p&gt;A new patch is uploaded&lt;/p&gt;</comment>
                            <comment id="13441618" author="kevinwilfong" created="Fri, 24 Aug 2012 23:43:49 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13441623" author="kevinwilfong" created="Fri, 24 Aug 2012 23:47:04 +0000"  >&lt;p&gt;patch doesn&apos;t apply cleanly, could you update?&lt;/p&gt;</comment>
                            <comment id="13442119" author="farlue" created="Sun, 26 Aug 2012 16:11:47 +0000"  >&lt;p&gt;@Kevin, I did an update and some other code change. Please see the review page for details. &lt;/p&gt;</comment>
                            <comment id="13446519" author="kevinwilfong" created="Sat, 1 Sep 2012 00:18:45 +0000"  >&lt;p&gt;Thanks for updating, running tests.&lt;/p&gt;</comment>
                            <comment id="13453441" author="slider" created="Tue, 11 Sep 2012 21:37:35 +0000"  >&lt;p&gt;I&apos;m having trouble with Fabricator login, so here&apos;s my comment on a piece of the code:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; createTab_stmt = &lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE VIEW &quot;&lt;/span&gt; + tableName + &lt;span class=&quot;code-quote&quot;&gt;&quot; AS &quot;&lt;/span&gt; + tbl.getViewOriginalText();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Shouldn&apos;t getViewExpandedText be used instead? Because views are supposed to be &quot;frozen at the time the view is created.&quot; &lt;/p&gt;</comment>
                            <comment id="13455087" author="kevinwilfong" created="Thu, 13 Sep 2012 18:06:58 +0000"  >&lt;p&gt;I don&apos;t know what you mean by &quot;frozen at the time the view is created&quot;.  A view is just an alias for a subquery, and in both cases the query text is stored in the metastore, and hence frozen.&lt;/p&gt;</comment>
                            <comment id="13455158" author="slider" created="Thu, 13 Sep 2012 19:20:09 +0000"  >&lt;p&gt;@Kevin, &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/ViewDev#ViewDev-StoredViewDefinition&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/ViewDev#ViewDev-StoredViewDefinition&lt;/a&gt; explains &quot;frozen at the time the view is created&quot; better than I can.&lt;/p&gt;

&lt;p&gt;Here is the scenario I have in mind:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Create a view v as select * from t, where t is a table with columns a and b. Hence, select * from v will return a and b.&lt;/li&gt;
	&lt;li&gt;Add a new column c to t. Per the view dev wiki page above, select * from v will still return just a and b.&lt;/li&gt;
	&lt;li&gt;Do show create table on v and save the output.&lt;/li&gt;
	&lt;li&gt;Drop v. (Maybe this is done intentionally, accidentally, or maliciously by someone else.)&lt;/li&gt;
	&lt;li&gt;Run the saved output to re-create v.&lt;/li&gt;
	&lt;li&gt;Now, should select * from v return just a and b, or should it return a, b, and c? This is basically the issue I&apos;m trying to point out. I think &quot;a and b&quot; looks like the better answer, which will mean using getViewExpandedText in show create table.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13455168" author="kevinwilfong" created="Thu, 13 Sep 2012 19:34:00 +0000"  >&lt;p&gt;Thanks Steven, I understand now.  You&apos;re right.&lt;/p&gt;

&lt;p&gt;Feng if you&apos;re still working on this can you update it as Steven suggested.&lt;/p&gt;</comment>
                            <comment id="13456518" author="farlue" created="Sun, 16 Sep 2012 01:40:20 +0000"  >&lt;p&gt;@Kevin, I don&apos;t have access to a linux machine these few days, but I can update this later.&lt;/p&gt;</comment>
                            <comment id="13476515" author="kevinwilfong" created="Mon, 15 Oct 2012 22:16:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13477201" author="kevinwilfong" created="Tue, 16 Oct 2012 17:41:00 +0000"  >&lt;p&gt;Committed, thanks Feng.&lt;/p&gt;</comment>
                            <comment id="13477711" author="hudson" created="Wed, 17 Oct 2012 08:03:03 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1742 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1742/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1742/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-967&quot; title=&quot;Implement &amp;quot;show create table&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-967&quot;&gt;&lt;del&gt;HIVE-967&lt;/del&gt;&lt;/a&gt;. Implement &quot;show create table&quot; (Feng Lu via kevinwilfong) (Revision 1398896)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1398896&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1398896&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ShowCreateTableDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_create_table_does_not_exist.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_create_table_index.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_alter.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_db_table.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_delimited.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_partitioned.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_serde.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_view.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_create_table_does_not_exist.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_create_table_index.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_alter.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_db_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_delimited.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_serde.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_view.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547954" author="hudson" created="Wed, 9 Jan 2013 10:23:44 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-967&quot; title=&quot;Implement &amp;quot;show create table&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-967&quot;&gt;&lt;del&gt;HIVE-967&lt;/del&gt;&lt;/a&gt;. Implement &quot;show create table&quot; (Feng Lu via kevinwilfong) (Revision 1398896)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1398896&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1398896&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ShowCreateTableDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_create_table_does_not_exist.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_create_table_index.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_alter.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_db_table.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_delimited.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_partitioned.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_serde.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_create_table_view.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_create_table_does_not_exist.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_create_table_index.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_alter.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_db_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_delimited.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_serde.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_create_table_view.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550188" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:43 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12457032">HIVE-1187</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12651032">HIVE-4659</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12860873">HIVE-11706</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12638170">HIVE-4210</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12543877">HIVE-2816</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12538629" name="HIVE-967.2.patch.txt" size="44170" author="farlue" created="Tue, 31 Jul 2012 23:05:35 +0000"/>
                            <attachment id="12539670" name="HIVE-967.3.patch.txt" size="50575" author="farlue" created="Tue, 7 Aug 2012 16:56:53 +0000"/>
                            <attachment id="12541100" name="HIVE-967.4.patch.txt" size="50575" author="farlue" created="Wed, 15 Aug 2012 18:12:24 +0000"/>
                            <attachment id="12542453" name="HIVE-967.5.patch.txt" size="51280" author="farlue" created="Sun, 26 Aug 2012 16:09:33 +0000"/>
                            <attachment id="12549172" name="HIVE-967.6.patch.txt" size="51282" author="farlue" created="Mon, 15 Oct 2012 17:36:23 +0000"/>
                            <attachment id="12536730" name="HIVE-967.patch.txt" size="34971" author="farlue" created="Mon, 16 Jul 2012 21:31:52 +0000"/>
                            <attachment id="12471650" name="HiveShowCreateTable.jar" size="7122" author="jayr" created="Tue, 22 Feb 2011 18:50:14 +0000"/>
                            <attachment id="12471628" name="show_create.txt" size="13373" author="appodictic" created="Tue, 22 Feb 2011 15:47:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Dec 2009 02:03:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09zu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56247</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-968] map join may lead to very large files</title>
                <link>https://issues.apache.org/jira/browse/HIVE-968</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the table under consideration is a very large file, it may lead to very large files on the mappers. &lt;br/&gt;
The job may never complete, and the files will never be cleaned from the tmp directory. &lt;br/&gt;
It would be great if the table can be placed in the distributed cache, but minimally the following should be added:&lt;/p&gt;

&lt;p&gt;If the table (source) being joined leads to a very big file, it should just throw an error.&lt;br/&gt;
New configuration parameters can be added to limit the number of rows or for the size of the table.&lt;br/&gt;
The mapper should not be tried 4 times, but it should fail immediately.&lt;/p&gt;

&lt;p&gt;I cant think of any better way for the mapper to communicate with the client, but for it to write in some well known&lt;br/&gt;
hdfs file - the client can read the file periodically (while polling), and if sees an error can just kill the job, but with&lt;br/&gt;
appropriate error messages indicating to the client why the job died.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442301">HIVE-968</key>
            <summary>map join may lead to very large files</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2009 02:46:57 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:03 +0000</updated>
                            <resolved>Thu, 10 Dec 2009 05:50:05 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12786126" author="nzhang" created="Fri, 4 Dec 2009 20:10:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-968&quot; title=&quot;map join may lead to very large files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-968&quot;&gt;&lt;del&gt;HIVE-968&lt;/del&gt;&lt;/a&gt;.patch solves the issue of leaving tmp file created by the mapjoin undeleted when the job is killed. It also introduced a HashMapWrapper class to use main memory HashMap when the number of keys are within a certain threshold. New data are put to persistent JDBM only when the number of entries are larger than the threshold. It should improve mapjoin performance significantly. &lt;/p&gt;</comment>
                            <comment id="12786154" author="namit" created="Fri, 4 Dec 2009 20:51:06 +0000"  >&lt;p&gt;Can you regenerate the patch ?&lt;/p&gt;</comment>
                            <comment id="12786274" author="nzhang" created="Sat, 5 Dec 2009 00:50:27 +0000"  >&lt;p&gt;The new &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-968&quot; title=&quot;map join may lead to very large files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-968&quot;&gt;&lt;del&gt;HIVE-968&lt;/del&gt;&lt;/a&gt;_2.patch solves the compilation issue. &lt;/p&gt;</comment>
                            <comment id="12786296" author="namit" created="Sat, 5 Dec 2009 01:43:40 +0000"  >&lt;p&gt;Overall looks good, but I had a couple of concerns:&lt;/p&gt;

&lt;p&gt;1. &lt;/p&gt;

&lt;p&gt;285 		// commit every 100 rows to prevent Out-of-memory exception 					&lt;br/&gt;
286 		if ( (res.size() % 100 == 0) &amp;amp;&amp;amp; recman != null ) &lt;/p&gt;
{ 					
287 		recman.commit(); 					
288 		}

&lt;p&gt;Instead of committing every 100 rows in HTree, now we are committing always - wont it have a performance issue ?&lt;/p&gt;

&lt;p&gt;2. Although we have a new cache on top, but we are loosing the MRU property. It should be implemented in the wrapper.&lt;/p&gt;</comment>
                            <comment id="12786304" author="nzhang" created="Sat, 5 Dec 2009 01:56:27 +0000"  >&lt;p&gt;I tested the performance of committing always and per 100 updates, there is no difference I can notice. So that&apos;s why I removed this. &lt;/p&gt;

&lt;p&gt;For MRU I&apos;m not sure whether it will lead to better performance or not. The use case in MapJoin is the data is sequentially read, so every entry is read once for each tuple in the LHS. So there is MRU seems useless. &lt;/p&gt;</comment>
                            <comment id="12786306" author="namit" created="Sat, 5 Dec 2009 01:59:48 +0000"  >&lt;p&gt;OK for 1.&lt;/p&gt;


&lt;p&gt;I dont think removing MRU is a good idea. Data is not read sequentially - that depends on the larger table being read by the mapper.&lt;br/&gt;
It includes random reads.&lt;/p&gt;</comment>
                            <comment id="12786340" author="nzhang" created="Sat, 5 Dec 2009 04:58:51 +0000"  >&lt;p&gt;That&apos;s true. But even though the hash table is randomly accessed, I&apos;m not sure if MRU will help with performance here. This wrapper is meant to provide a simple wrapper for the HashMap data structure. MRU added cost to memory consumption as well as CPU cost. I&apos;m assuming most case it will fall into the case where the threshold is not reached. In that case MRU is not useful and wasting resources. &lt;/p&gt;</comment>
                            <comment id="12786356" author="namit" created="Sat, 5 Dec 2009 07:28:52 +0000"  >&lt;p&gt;I agree it will increase memory consumption (but should be very small - probably one pointer per entry). &lt;br/&gt;
But still, In general, MRU seems like a good idea. &lt;/p&gt;

&lt;p&gt;Of course, it depends on the data - so in absence of statistics, it is difficult to come up with the right answer.&lt;br/&gt;
But, I would still err in favor of MRU&lt;/p&gt;</comment>
                            <comment id="12787869" author="nzhang" created="Wed, 9 Dec 2009 01:52:53 +0000"  >&lt;p&gt;Attaching a new version &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-968&quot; title=&quot;map join may lead to very large files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-968&quot;&gt;&lt;del&gt;HIVE-968&lt;/del&gt;&lt;/a&gt;_3.patch. Changes from the last version:&lt;br/&gt;
 1) two more new files MRU.java and DCLLItem.java implementing an efficient MRU cache replacement policy. &lt;br/&gt;
 2) updated HashMapWrapper to use MRU&lt;br/&gt;
 3) a unit test for HashMapWrapper&lt;/p&gt;</comment>
                            <comment id="12788193" author="namit" created="Wed, 9 Dec 2009 18:07:35 +0000"  >&lt;p&gt;1. some System.out.println&apos;s are present in HashMapWrapper.&lt;br/&gt;
2. MapJoinOperator.java: not sure if o.setObj() would work for the persistent case.&lt;br/&gt;
3. HashMapWrapper.java: not sure about the logic in put&lt;/p&gt;</comment>
                            <comment id="12788402" author="nzhang" created="Thu, 10 Dec 2009 00:01:32 +0000"  >&lt;p&gt;Discussed with Namit offline. Below are the updates:&lt;br/&gt;
1) The System.out.println() is for printing out some debugging info when assertion failed. I&apos;ll change it to use LOG.error().&lt;br/&gt;
2) o.setObj() works because whenever an object is got from get, it is guaranteed to be in main memory cache. So setObj will set the object in MRUItem which change the HashMap value. It is an performance optimization and I will add more comments in the code.  &lt;br/&gt;
3) there is one issue in the put() code path when key is not in main memory but in persistent hash. fixed that and added a unit test for that case.&lt;br/&gt;
4) changed the JDBM TransactionManager to delete log file if NO_TRANSACTION is set. &lt;/p&gt;

&lt;p&gt;Will upload the patch shortly after the uni tests finish. &lt;/p&gt;</comment>
                            <comment id="12788413" author="nzhang" created="Thu, 10 Dec 2009 00:19:31 +0000"  >&lt;p&gt;Uploading patch containing the above changes. &lt;/p&gt;</comment>
                            <comment id="12788424" author="namit" created="Thu, 10 Dec 2009 00:50:43 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12788526" author="namit" created="Thu, 10 Dec 2009 05:50:05 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426957" name="HIVE-968.patch" size="13763" author="nzhang" created="Fri, 4 Dec 2009 20:10:16 +0000"/>
                            <attachment id="12427006" name="HIVE-968_2.patch" size="22676" author="nzhang" created="Sat, 5 Dec 2009 00:50:27 +0000"/>
                            <attachment id="12427409" name="HIVE-968_3.patch" size="39991" author="nzhang" created="Wed, 9 Dec 2009 01:52:53 +0000"/>
                            <attachment id="12427538" name="HIVE-968_4.patch" size="46118" author="nzhang" created="Thu, 10 Dec 2009 00:19:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Dec 2009 20:10:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73185</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-969] choose the largest table for join as the table to be streamed</title>
                <link>https://issues.apache.org/jira/browse/HIVE-969</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In absence of statistics, the join order is random. This creates a problem for the users since mostly they dont care about the size of the tables&lt;br/&gt;
So, instead of choosing the join order randomly, we can make the largest table as the table to be streamed if the user did not specify any hints.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442366">HIVE-969</key>
            <summary>choose the largest table for join as the table to be streamed</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2009 19:15:33 +0000</created>
                <updated>Thu, 3 Dec 2009 22:54:28 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12785515" author="hammer" created="Thu, 3 Dec 2009 20:49:55 +0000"  >&lt;p&gt;In the absence of statistics, how will you know which table is largest?&lt;/p&gt;</comment>
                            <comment id="12785526" author="namit" created="Thu, 3 Dec 2009 21:13:42 +0000"  >&lt;p&gt;What I meant to say was that, we will use table size only as the criteria.&lt;/p&gt;

&lt;p&gt;So, if the user is joining T1 and T2, and there is a selective filter on T2, we&lt;br/&gt;
will base our decision only on the total size of T1 and T2, and not any other criteria.&lt;/p&gt;</comment>
                            <comment id="12785554" author="hammer" created="Thu, 3 Dec 2009 21:55:55 +0000"  >&lt;p&gt;My question still stands. Are you planning on implementing a statistics collection process to capture table size in the metastore for this issue?&lt;/p&gt;</comment>
                            <comment id="12785600" author="namit" created="Thu, 3 Dec 2009 22:54:28 +0000"  >&lt;p&gt;No, I was thinking of getting the size by directly making a hadoop call, or getting it from the FileSystem API - &lt;br/&gt;
we can change metastore once we have the complete plan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Dec 2009 20:49:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08n5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-970] mapjoin should be disabled if the size is too large</title>
                <link>https://issues.apache.org/jira/browse/HIVE-970</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Based on a detailed discussion with Ning, we were thinking of the following.&lt;/p&gt;

&lt;p&gt;Add a configurable parameter, which sets the limit on the usage of mapjoin.&lt;br/&gt;
Assume that only the following can increase the size of the table:&lt;/p&gt;

&lt;p&gt;UDTF, Transforms, Union, Join&lt;/p&gt;

&lt;p&gt;(Although UDF and UDAF can also increase the total size by increasing the size of the row, that is not likely to happen in the common case).&lt;/p&gt;


&lt;p&gt;So, the map join hint will only be honored if none of the above are present at the source and the size of the table is less than the limit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442389">HIVE-970</key>
            <summary>mapjoin should be disabled if the size is too large</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2009 21:29:06 +0000</created>
                <updated>Thu, 7 Jan 2010 19:32:59 +0000</updated>
                            <resolved>Thu, 7 Jan 2010 19:32:59 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12790399" author="namit" created="Mon, 14 Dec 2009 22:08:42 +0000"  >&lt;p&gt;I think we should disable Transforms from the list above&lt;/p&gt;</comment>
                            <comment id="12797749" author="nzhang" created="Thu, 7 Jan 2010 19:21:53 +0000"  >&lt;p&gt;Namit, is this JIRA subsumed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-988&quot; title=&quot;mapjoin should throw an error if the input is too large&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-988&quot;&gt;&lt;del&gt;HIVE-988&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="12797752" author="namit" created="Thu, 7 Jan 2010 19:24:05 +0000"  >&lt;p&gt;Yes, you can close this as a duplicate&lt;/p&gt;</comment>
                            <comment id="12797760" author="nzhang" created="Thu, 7 Jan 2010 19:32:59 +0000"  >&lt;p&gt;duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-988&quot; title=&quot;mapjoin should throw an error if the input is too large&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-988&quot;&gt;&lt;del&gt;HIVE-988&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Jan 2010 19:21:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122708</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-971] allow more tables in union all </title>
                <link>https://issues.apache.org/jira/browse/HIVE-971</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We used to union more than 128 tables in hive, which did not work. But it is a useful feature to support query aggregating multi fct tables.&lt;br/&gt;
(not sue if it is fixed already, pls. close the task if it is not true any longer)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442424">HIVE-971</key>
            <summary>allow more tables in union all </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hliu">Hao Liu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Dec 2009 07:42:52 +0000</created>
                <updated>Mon, 7 Mar 2011 19:44:05 +0000</updated>
                            <resolved>Mon, 7 Mar 2011 19:44:05 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12786004" author="namit" created="Fri, 4 Dec 2009 17:14:02 +0000"  >&lt;p&gt;We fixed a bunch of bugs for the same issue a few months back. Did you try it out ?&lt;/p&gt;</comment>
                            <comment id="12789854" author="hliu" created="Sun, 13 Dec 2009 08:05:22 +0000"  >&lt;p&gt;Try it again and It works, thanks! &lt;/p&gt;</comment>
                            <comment id="12789855" author="hliu" created="Sun, 13 Dec 2009 08:06:29 +0000"  >&lt;p&gt;fixed already.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Dec 2009 17:14:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122709</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-972] Support views</title>
                <link>https://issues.apache.org/jira/browse/HIVE-972</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive currently does not support views. &lt;br/&gt;
It would be a very nice feature to have.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442500">HIVE-972</key>
            <summary>Support views</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Dec 2009 19:51:45 +0000</created>
                <updated>Thu, 25 Oct 2018 02:52:09 +0000</updated>
                            <resolved>Wed, 20 Jan 2010 05:32:55 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Metastore</component>
                    <component>Query Processor</component>
                    <component>Views</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12786751" author="hammer" created="Mon, 7 Dec 2009 01:42:18 +0000"  >&lt;p&gt;What sort of views? &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-29&quot; title=&quot;Add functionality similar to SCOPE&amp;#39;s &amp;quot;virtual&amp;quot; views to Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-29&quot;&gt;HIVE-29&lt;/a&gt; discusses the &quot;virtual&quot; views used in SCOPE that I would find quite valuable.&lt;/p&gt;

&lt;p&gt;In previous discussions with Ashish about priorities, he mentioned that statistics collection (e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-33&quot; title=&quot;[Hive]: Add optimizer statistics in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-33&quot;&gt;&lt;del&gt;HIVE-33&lt;/del&gt;&lt;/a&gt;) was more feasible and important than materialized views. Has there been a change in priority, or is this ticket just a place to gather discussions?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12786772" author="namit" created="Mon, 7 Dec 2009 03:58:54 +0000"  >&lt;p&gt;These are standard sql views, which is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-29&lt;/a&gt;.&lt;br/&gt;
Most probably, both of them will end up sharing the same underlying implementation.&lt;/p&gt;

&lt;p&gt;The view will not be materialized. That might be added later.&lt;/p&gt;</comment>
                            <comment id="12793452" author="jvs" created="Tue, 22 Dec 2009 01:11:32 +0000"  >&lt;p&gt;Wiki page for planning out this feature is here; comments welcome:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/ViewDev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/ViewDev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12793711" author="athusoo" created="Tue, 22 Dec 2009 18:24:59 +0000"  >&lt;p&gt;Pretty comprehensive writeup &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Here are my comments:&lt;/p&gt;

&lt;p&gt;1. It may be better to just go with a flat model to keep things simple. Also whenever we do materialized views in future you do have an object that is part table and part view and you may just need the flat model anyway at that point. The primary reason though to go with the flat model would be simplicity and less severe schema migration of the metastore schema.&lt;/p&gt;

&lt;p&gt;2. For dependency tracking there is already code in hive that uses pre execution hooks to track lineage. That could easily be used to extract view dependencies (table level dependencies) when you create the view metadata. Raghu also had done some work on column lineage and perhaps that can be used to capture column lineage.&lt;/p&gt;

&lt;p&gt;I think for the first cut we should just go with table dependencies and leave column stuff for later. We should have the lenient dependency invalidation scheme (perhaps for both drops and alters) because at least that way users can inspect view definitions and then fix them later. Accordingly then we would need a flag to mark an invalidated view and maybe some way of looking at that list. I think we can punt the cascade option for now as that seems to be an optimization in the user workflow and could be added later. Thoughts? The restrict though is probably more useful. We could have that be the default in the strict mode (Hive has a strict mode which disallows queries on partitioned tables in case a where clause on the partition column was not specified),&lt;/p&gt;

&lt;p&gt;Not sure on what we should do about temporary functions but if we use views to transform our internal logs to another schema (nectar imps -&amp;gt; context) then we may need it.&lt;/p&gt;

&lt;p&gt;3. I am not sure if supporting limit is important but I can see good use of order by when we do materialized views. The sorted property could be helpful there and would be good to capture. We already capture those for tables.&lt;/p&gt;

&lt;p&gt;4. I think fast path should work seemlessly, once the fast path with filters is done, no?&lt;/p&gt;

&lt;p&gt;5. I think we can punt view modification for now if we support ways of inspecting the view sql for folks.&lt;/p&gt;</comment>
                            <comment id="12793746" author="prasadc" created="Tue, 22 Dec 2009 19:29:05 +0000"  >&lt;p&gt;.. continuing discussion from hive-users@&lt;/p&gt;

&lt;p&gt;1.&lt;br/&gt;
regarding metadata:&lt;br/&gt;
Are you saying that If a view is created on a partitioned table, it would inherit the base table&apos;s partition columns as regular columns? (this will be a common usecase when inserts into multiple partitions is supported) Even if we are not supporting partitions right now, we need to think of the way we would model metadata for partitioned views (not necessarily materialized views) so that the changes made right now will not conflict too much with the future changes.&lt;/p&gt;

&lt;p&gt;I like the flat model as the inheritance model is too much of a overkill and not really suited in this case. But I would rather put the view-def into &apos;StorageDescriptor&apos; class. This would work well when partitioned views are supported since &apos;Partition&apos; class will inherit the view definition and the future view schema can evolve while freezing the schema of partitions created earlier.&lt;/p&gt;

&lt;p&gt;The type of the &apos;view-def&apos; column has to be a CLOB but I am not sure of performance implications of having a CLOB column in a very large table. If it is not advisable then it may be useful to put this CLOB (or view metadata in a separate class and link to StorageDescriptor)&lt;/p&gt;

&lt;p&gt;2.&lt;br/&gt;
&amp;gt; In SQL:200n, a view definition is supposed to be frozen at the time it is created, so that if the view is defined as select * from t, where t is a table with two columns a and b, then later requests to select * from the view should return just columns a and b, even if a new column c is later added to the table. This is implemented correctly by most DBMS products.&lt;/p&gt;

&lt;p&gt;Do you know the reasoning behind this? This would make changing the base table schema very hard and if I am not mistaken Facebook&apos;s base table schemas change (mostly addition of new columns) more than ocasionally and it will be an administrative nightmare to change all the dependent views. IMO, &apos;&lt;b&gt;&apos; should represent all columns and if a view creator does not want to inherit changes to base table schema then she can specify the exact columns instead of &apos;&lt;/b&gt;&apos;.&lt;/p&gt;

&lt;p&gt;3.&lt;br/&gt;
I like DependencyParticipant idea. We could use simple inheritance strategy where the dependent table contains (table/view id, used_name_of_dependent_obj, obj_id, obj_type)&lt;/p&gt;

&lt;p&gt;4. +1 to Leniant Dependency Invalidation but there should be a command to preview the invalid views.&lt;/p&gt;</comment>
                            <comment id="12793750" author="prasadc" created="Tue, 22 Dec 2009 19:33:05 +0000"  >&lt;p&gt;Sorry, the bold formatting was unintentional and a side effect of saying &apos;&amp;#42;&apos;. It should have read this way&lt;/p&gt;


&lt;p&gt;IMO, &apos;&amp;#42;&apos; should represent all columns and if a view creator does not want to inherit changes to base table schema then she can specify the exact columns instead of &apos;&amp;#42;&apos;.&lt;/p&gt;</comment>
                            <comment id="12793770" author="jvs" created="Tue, 22 Dec 2009 20:22:05 +0000"  >&lt;p&gt;Prasad, regarding select *:  the static expansion semantics are standard and work the same way in all of the major DBMS&apos;s (Oracle, MySQL, SQL Server, etc).  The reasoning is that views are often used as insulation layers, so that changes to the underlying schema are only exposed in a controlled fashion (i.e. an application may start tracking some new internal piece of info about a person which is not appropriate to expose via the views accessed by a UI.  In systems that support GRANT, privileges are often granted on only a view, not the underlying table, so dynamically expanding a view could leak information.  The counterarguments you make are certainly valid, but since the rules have already been set and agreed on by the big guys for a long time in this area, probably best to follow them to minimize surprises for users accustomed to the standard behavior.&lt;/p&gt;</comment>
                            <comment id="12793799" author="namit" created="Tue, 22 Dec 2009 21:41:21 +0000"  >&lt;p&gt;I think we can go with Lenient Dependency Invalidation - which means that the view gets invalid if any DDL happens on the underlying table.&lt;br/&gt;
Column level dependencies can be ignored as of now. The view depends on persistent objects (other tables and views).&lt;/p&gt;

&lt;p&gt;We should support:&lt;/p&gt;

&lt;p&gt;alter view &amp;lt;viewname&amp;gt; compile;&lt;/p&gt;

&lt;p&gt;The views can be automatically compiled when referenced in a query, but may lead to unexpected results for select &apos;*&apos;. So, in the first cut,&lt;br/&gt;
we can ask the user to explicitly validate the view.&lt;/p&gt;

&lt;p&gt;Other issue is regarding the error messages. If the query is equivalent to: select ... from (view-def-select);&lt;br/&gt;
will the error positions be correct ?&lt;/p&gt;</comment>
                            <comment id="12793806" author="jvs" created="Tue, 22 Dec 2009 21:56:20 +0000"  >&lt;p&gt;Prasad, regarding partitioned views, I&apos;ll talk to you about it when I&apos;m in the office to make sure I understand the cases you&apos;re thinking of.&lt;/p&gt;</comment>
                            <comment id="12793811" author="prasadc" created="Tue, 22 Dec 2009 22:14:42 +0000"  >&lt;p&gt;@john, i will be in office on all work days next week and tomorrow as well.&lt;/p&gt;</comment>
                            <comment id="12793882" author="prasadc" created="Wed, 23 Dec 2009 01:46:34 +0000"  >&lt;p&gt;mainly i don&apos;t understand how &apos;show partitions&apos; will work on views, or whether it should work at all. if it is not supported then following issues will make it difficult to use views&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&apos;show partitions&apos; is a very useful function for downstream processes that are waiting on availability on a particular partition.&lt;/li&gt;
	&lt;li&gt;Partition keys are also useful metadata information for users browsing views&lt;/li&gt;
	&lt;li&gt;In a &apos;strict&apos; mode where a predicate on a partition key is required for any partitioned table, a user has to know what column the predicate should be applied which then will be translated to base tables&apos; partition columns.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12793888" author="namit" created="Wed, 23 Dec 2009 01:54:51 +0000"  >&lt;p&gt;If we are allowing partitioned views, show partitions should work.&lt;/p&gt;

&lt;p&gt;I am not sure but we need some syntax where the view partition columns can be specified at the time the view is being created.&lt;/p&gt;</comment>
                            <comment id="12793907" author="jvs" created="Wed, 23 Dec 2009 03:02:45 +0000"  >&lt;p&gt;Namit, Prasad, I&apos;m starting to understand.  I suppose we could try to derive partition columns from the underlying tables (it&apos;s a similar problem to deriving view updatability), but that could be difficult to get right in all cases, so allowing the user to specify it explicitly makes sense.  Let&apos;s discuss on Monday.&lt;/p&gt;</comment>
                            <comment id="12793908" author="jvs" created="Wed, 23 Dec 2009 03:05:12 +0000"  >&lt;p&gt;Namit, alter view &amp;lt;viewname&amp;gt; compile is a good solution to the select * problem, since assuming we save the original view definition untouched (in addition to the expanded one), we can re-expand the *&apos;s at that time.  So a user will only have to recompile a view by name to see the new columns (without having to know its definition).&lt;/p&gt;

&lt;p&gt;Regarding error messages, I&apos;ll think about what can be done.  In general, AST rewrites make reporting parse positions difficult, but maybe we can do it with respect to the view subtree and provide that SQL in the error message as context.&lt;/p&gt;</comment>
                            <comment id="12795461" author="jvs" created="Wed, 30 Dec 2009 22:01:51 +0000"  >&lt;p&gt;I have updated the wiki page based on feedback from a design review meeting.  Look for &quot;Update 30-Dec-2009&quot; in affected sections.&lt;/p&gt;</comment>
                            <comment id="12797847" author="jvs" created="Fri, 8 Jan 2010 00:26:51 +0000"  >&lt;p&gt;For view expansion, I&apos;ve found a parser-based shortcut which I&apos;ve described in an update to the wiki page under the &quot;Stored View Definition&quot; section.  This allows me to avoid adding full-blown AST unparse support.&lt;/p&gt;

&lt;p&gt;AST unparse support is useful, but it adds a large maintenance burden to the parser, so we can defer that until there&apos;s a burning need for it.&lt;/p&gt;</comment>
                            <comment id="12798207" author="jvs" created="Fri, 8 Jan 2010 22:22:52 +0000"  >&lt;p&gt;For error message debuggability, I&apos;m introducting an ASTNodeOrigin concept; when we expand a view&apos;s definition and splice it into a referencing query, we tag each node with information about its origin, so that if we encounter an error during semantic analysis, we can provide full context (similar to the .h inclusion chain in a C++ compiler error).  It&apos;s a bit verbose, but without it, debugging could be difficult.  Here&apos;s an example:&lt;/p&gt;

&lt;p&gt;CREATE TABLE table1 (key int, value int);&lt;br/&gt;
CREATE VIEW view1 AS SELECT * FROM table1;&lt;br/&gt;
CREATE VIEW view2 AS SELECT * FROM view1 xxx;&lt;br/&gt;
ALTER TABLE table1 REPLACE COLUMNS (key int);&lt;br/&gt;
SELECT * FROM view2 yyy;&lt;br/&gt;
Error in semantic analysis: line 1:32 Invalid Column Reference `value` in definition of VIEW view1 [&lt;br/&gt;
SELECT `table1`.`key`, `table1`.`value` FROM table1&lt;br/&gt;
] used as xxx at line 1:39 in definition of VIEW view2 [&lt;br/&gt;
SELECT `xxx`.`key`, `xxx`.`value` FROM view1 xxx&lt;br/&gt;
] used as yyy at line 2:14&lt;/p&gt;</comment>
                            <comment id="12798209" author="jvs" created="Fri, 8 Jan 2010 22:26:34 +0000"  >&lt;p&gt;Regarding referencing a temporary function from a view:  I guess we could just allow it, and leave it up to the user to reregister the function in a new Hive instance before referencing the view.  If they forget, they&apos;ll get an exception like the one above, at which point they can register the function and try again.  Kind of clunky, but the ability to make use of UDF&apos;s in views may be valuable.&lt;/p&gt;

&lt;p&gt;Opinions?&lt;/p&gt;</comment>
                            <comment id="12800053" author="jvs" created="Thu, 14 Jan 2010 00:50:47 +0000"  >&lt;p&gt;This is a work-in-progress patch to allow for preliminary review; it&apos;s not intended for commit.&lt;/p&gt;</comment>
                            <comment id="12800089" author="zshao" created="Thu, 14 Jan 2010 02:42:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Regarding referencing a temporary function from a view: I guess we could just allow it, and leave it up to the user to reregister the function in a new Hive instance before referencing the view. If they forget, they&apos;ll get an exception like the one above, at which point they can register the function and try again. Kind of clunky, but the ability to make use of UDF&apos;s in views may be valuable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am OK with that. We can reiterate that later without paying any development overhead.&lt;/p&gt;</comment>
                            <comment id="12800334" author="jvs" created="Thu, 14 Jan 2010 20:15:33 +0000"  >&lt;p&gt;Some notes for reviewers:&lt;/p&gt;

&lt;p&gt;(1) The reason I&apos;m adding quoting for all identifiers (not just * expansion) during unparse has to do with persistence.  Suppose today you create a table named units, and you create a view select x from units.  Then tomorrow, you get a new version of hive in which units has become a reserved word.  When we reparse the stored view definition, we&apos;ll get a parse error; to avoid this, we store it as select `x` from `units` instead (regardless of whether you quoted the identifiers in the initial CREATE VIEW statement).  The same goes for references to other kinds of objects, so I&apos;m attempting to future-proof it by doing it for functions as well (even though today those aren&apos;t persistent); there seem to be some existing inconsistencies with function name unescaping and lowercasing which I&apos;m working through for the real patch submission.&lt;/p&gt;

&lt;p&gt;(2) For regenerating thrift code, I used the archived r760184 version of thrift linked at &lt;a href=&quot;http://developers.facebook.com/thrift&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://developers.facebook.com/thrift&lt;/a&gt;.  This gave the minimum number of diffs from the existing generated code when compared with various other thrift versions I could find (but still a few spurious ones).  After regeneration, I reverted files unrelated to my change.  At some point, we should probably create a separate patch which brings our thrift generated code up to date with more recent versions.&lt;/p&gt;

&lt;p&gt;(3) I ended up putting the view text attributes on the Table class in the metastore, rather than StorageDescriptor as proposed by Prasad.  In the future, if we need to track view definitions associated with partitions, adding one more attribute to Partition should do the job.&lt;/p&gt;

&lt;p&gt;(4) I&apos;m not entirely sure what kind of metadata we want to store for view serde, inputFormat, outputFormat, location, since this physical information isn&apos;t really relevant until we do view materialization.  Take a look at the create_view.q.out DESCRIBE EXTENDED output to see what&apos;s currently getting stored, and give me your feedback if you think changes are needed.&lt;/p&gt;
</comment>
                            <comment id="12800346" author="prasadc" created="Thu, 14 Jan 2010 20:30:55 +0000"  >&lt;p&gt;regd (3)&lt;br/&gt;
is storagedescritor needed at all for a view?&lt;/p&gt;</comment>
                            <comment id="12800347" author="jvs" created="Thu, 14 Jan 2010 20:37:47 +0000"  >&lt;p&gt;@Prasad:  Since we went with the flat catalog model, a view is just an MTable instance, so it inherits the SD attribute.  If it&apos;s possible to set this attribute to null, I could do that.&lt;/p&gt;</comment>
                            <comment id="12800356" author="prasadc" created="Thu, 14 Jan 2010 21:10:24 +0000"  >&lt;p&gt;I think I set a property in JDO ORM file to make it check for non-null SD. It shouldn&apos;t be that difficult to change that. How does a &apos;describe&apos; command get the columns of a view?&lt;/p&gt;</comment>
                            <comment id="12800363" author="jvs" created="Thu, 14 Jan 2010 21:27:37 +0000"  >&lt;p&gt;@Prasad:  DESCRIBE gets the columns of a view the same way as for a table (I store them as part of CREATE VIEW), so actually we do need to keep the StorageDescriptor there for holding the column descriptors.  It&apos;s the SerDeInfo attribute of the StorageDescriptor, along with others mentioned above, that are not relevant for a view.&lt;/p&gt;</comment>
                            <comment id="12800369" author="prasadc" created="Thu, 14 Jan 2010 21:36:38 +0000"  >&lt;p&gt;Then looks like we do have to keep SD so what is the advantage of putting additional columns in Table instead of SD? I just feel that code and schema needs to be duplicated down the road. It is not a big deal but still why?&lt;/p&gt;

&lt;p&gt;I suppose the unnecessary attributes of SD can just be default values for views. Not sure much can be done there.&lt;/p&gt;</comment>
                            <comment id="12800376" author="jvs" created="Thu, 14 Jan 2010 21:51:13 +0000"  >&lt;p&gt;Here&apos;s my rationale:&lt;/p&gt;

&lt;p&gt;(1) A view is a logical object, so by default, its definition fits naturally at the logical level (table) rather than the physical level (storage descriptor).&lt;/p&gt;

&lt;p&gt;(2) For a view object, we need both original text and expanded text.  However, if we end up needing it per partition later for &quot;very smart&quot; materialized views, we&apos;ll only need the expanded text (the original text is only needed for user friendly DESCRIBE and for recompiling the view).  So we would just add one new attribute on partition (not storage descriptor).&lt;/p&gt;

&lt;p&gt;(3) Most storage descriptors (describing partitions of tables) have nothing to do with views at all.  So adding a new attribute there is just deadweight unless we actually get to &quot;very smart&quot; materialized views.&lt;/p&gt;

&lt;p&gt;By &quot;very smart&quot;, I mean that we&apos;ll be able to avoid rematerializing old partitions when the view definition changes.  This is the only reason I can think of why we would ever end up needing a view definition per partition (so that we can compare the old and new view definitions and see if one is derivable from the other).  It seems like that is unlikely to happen very soon.  Is there some other case where we&apos;d need it?&lt;/p&gt;</comment>
                            <comment id="12800382" author="prasadc" created="Thu, 14 Jan 2010 21:59:51 +0000"  >
&lt;p&gt;I thought view definitions are supposed to be frozen when a view is created. Isn&apos;t that true of partitions as well? so why would an older partition need to be regenerated automatically when a view definition changes? or is the &apos;frozen definition&apos; part doesn&apos;t apply to materialized views?&lt;/p&gt;

&lt;p&gt;Also the &quot;dead-weight&quot; doesn&apos;t matter since null valued columns add very little overhead in mysql.&lt;/p&gt;

&lt;p&gt;But I agree with 1 and 2 so let&apos;s keep the way you have them in the patch.&lt;/p&gt;</comment>
                            <comment id="12800402" author="jvs" created="Thu, 14 Jan 2010 22:38:47 +0000"  >&lt;p&gt;OK, good.  &lt;/p&gt;

&lt;p&gt;To clarify:  the column descriptor metadata is what gets frozen when a view is defined, not any data associated with it.  When the view (whether virtual or materialized) is redefined, then its column descriptors may change as well.  For a materialized view, we would have a choice between discarding its existing partitions (implying they would need to be rematerialized according to the new view definition) versus attempting to preserve them, transforming their contents on the fly in order to match the updated view definition.  For example, if the effect of the view redefinition was to delete one of the columns, then we could just project this column away when reading from the old partitions.  This is purely theoretical until we have a design for materialized views (including how they support partitioning).&lt;/p&gt;</comment>
                            <comment id="12800406" author="jvs" created="Thu, 14 Jan 2010 22:56:53 +0000"  >&lt;p&gt;One other point for reviewers:&lt;/p&gt;

&lt;p&gt;If you do CREATE VIEW v(x,y) AS SELECT a+1,b+2 FROM t&lt;/p&gt;

&lt;p&gt;then we&apos;ll store the expanded view def as SELECT `_c0` AS `x`,`_c1` AS `y` FROM (SELECT `t`.`a`+1,`t`.`b`+2 FROM `t`) `v`&lt;/p&gt;

&lt;p&gt;As a result, if hive ever changes its convention for generating anonymous expression names (_c0, _c1, ...), such stored view definitions will break.&lt;/p&gt;

&lt;p&gt;The only way I can think of to avoid this is to implement SQL:200n&apos;s column-alias-by-position construct , e.g.&lt;/p&gt;

&lt;p&gt;(SELECT `t`.`a`+1,`t`.`b`+2 FROM `t`) AS `v`(`x`,`y`)&lt;/p&gt;

&lt;p&gt;(similar to what was done for LATERAL VIEW).&lt;/p&gt;</comment>
                            <comment id="12800631" author="jvs" created="Fri, 15 Jan 2010 09:22:12 +0000"  >&lt;p&gt;Here is the real patch intended for submission.&lt;/p&gt;</comment>
                            <comment id="12801064" author="zshao" created="Sat, 16 Jan 2010 01:58:25 +0000"  >&lt;p&gt;We had a group code-review with John and here are the notes.&lt;/p&gt;

&lt;p&gt;1. TODO: File a follow-up JIRA for the behavior for underlying table column type change.&lt;br/&gt;
Currently we do store the column type of the view in the metastore but that&apos;s not always true - we use the underlying table&apos;s column type when the view is accessed.&lt;/p&gt;

&lt;p&gt;2. DDL unparse: we use antlr TokenRewriteStream to rewrite the original stream for &quot;*&quot; expansion.&lt;/p&gt;

&lt;p&gt;3. Error message. Recursively expanded as the comment above mentioned.&lt;/p&gt;

&lt;p&gt;4. TODO: We are using BLOB type in jdo. We need to test it out with mysql.&lt;/p&gt;

&lt;p&gt;5. TODO: Metadata change: We store &quot;view&quot; definitions in the same metadata table that we store &quot;table&quot; definitions.&lt;br/&gt;
Shall we add a field &quot;table type&quot; so we know whether it&apos;s a table, external table, view, or materialized view in the future.&lt;br/&gt;
We should clean up the additional useless fields in &quot;view&quot; - the test output shows that we are storing some garbage information for views.&lt;/p&gt;

&lt;p&gt;6. TODO: Clean up thrift and define the version of thrift that we should use. Check with Raghu and Ning.&lt;/p&gt;

&lt;p&gt;7. We add extra &quot;select&quot; with internal names like &quot;_col0&quot; etc in the view definition.&lt;/p&gt;

&lt;p&gt;8. TODO: We should add a test for using views with UDTF&lt;/p&gt;

&lt;p&gt;9. TODO: Add a test for a large view definition (in terms of the length of the view definition).&lt;/p&gt;

&lt;p&gt;10. isViews() should assert the other field is null&lt;/p&gt;

&lt;p&gt;11. createViewDesc: In DDLTask, there is some code populating derivedSchema from originalSchema. Shall we move that logic to compile time, so that we only need to pass derivedSchema.&lt;/p&gt;</comment>
                            <comment id="12801132" author="zshao" created="Sat, 16 Jan 2010 09:05:26 +0000"  >&lt;p&gt;Another question is metastore database upgrade and backward compatibility.&lt;/p&gt;

&lt;p&gt;How do the user upgrade the metastore database (since we added columns to existing tables)?&lt;/p&gt;

&lt;p&gt;Will the new metastore database be compatible with old metastore code?&lt;/p&gt;</comment>
                            <comment id="12801267" author="prasadc" created="Sat, 16 Jan 2010 20:24:55 +0000"  >&lt;p&gt;12. Block alter_table, alter_partition queries in metastore server side code rather than the ql or client side code.&lt;/p&gt;

&lt;p&gt;Zheng, AFAIK backward compatibility (i.e. older code acting against latest schema) should not be a problem. schema upgrade should happen automatically if users haven&apos;t changed or modified datanuclues/jpox parameters in hive-default.xml.&lt;/p&gt;</comment>
                            <comment id="12801302" author="zshao" created="Sun, 17 Jan 2010 00:23:26 +0000"  >&lt;p&gt;Good to know we have backward compatibility!&lt;/p&gt;

&lt;p&gt;BTW, John, all these items can be done in a follow-up transaction if needed. Let&apos;s first resolve the conflicts with trunk and see if we can get this in before code clean-up and refactoring.&lt;/p&gt;</comment>
                            <comment id="12801980" author="jvs" created="Mon, 18 Jan 2010 22:39:14 +0000"  >&lt;p&gt;@Zheng:  I just did a dry run of re-applying the patch on svn head, and there were no code conflicts.  However, I wasn&apos;t able to re-run tests for the same reason as the current Hudson failures on head, so I guess we need to wait for that to get fixed.&lt;/p&gt;</comment>
                            <comment id="12802041" author="zshao" created="Tue, 19 Jan 2010 02:20:33 +0000"  >&lt;p&gt;@John, what are the test errors that you are getting? We should fix that as soon as possible.&lt;/p&gt;</comment>
                            <comment id="12802117" author="zshao" created="Tue, 19 Jan 2010 06:52:39 +0000"  >&lt;p&gt;Namit just committed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1066&quot; title=&quot;TestContribCliDriver failure in serde_typedbytes.q, serde_typedbytes2.q, and serde_typedbytes3.q&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1066&quot;&gt;&lt;del&gt;HIVE-1066&lt;/del&gt;&lt;/a&gt; which should fix the test errors.&lt;br/&gt;
Can you re-run the tests?&lt;/p&gt;</comment>
                            <comment id="12802417" author="jvs" created="Tue, 19 Jan 2010 18:55:53 +0000"  >&lt;p&gt;Re-running tests now.&lt;/p&gt;</comment>
                            <comment id="12802549" author="jvs" created="Tue, 19 Jan 2010 23:57:42 +0000"  >&lt;p&gt;I have a patch which addresses items 8/9/10/11/12.  Is it OK if I run that through tests and submit it, then address 1/5/6 in followup JIRA issues?  They are easier to work on independent of the main patch.&lt;/p&gt;</comment>
                            <comment id="12802553" author="zshao" created="Tue, 19 Jan 2010 23:59:57 +0000"  >&lt;p&gt;Good to me. Please upload the new patch.&lt;/p&gt;</comment>
                            <comment id="12802559" author="jvs" created="Wed, 20 Jan 2010 00:08:50 +0000"  >&lt;p&gt;Here&apos;s the new patch (.3).  Also adds a couple of testcases for exercising EXPLAIN with CREATE VIEW and with SELECT from view.&lt;/p&gt;</comment>
                            <comment id="12802608" author="zshao" created="Wed, 20 Jan 2010 01:36:05 +0000"  >&lt;p&gt;John, the last point, can you do &quot;4&quot;? We definitely need to test it out with mysql.&lt;/p&gt;</comment>
                            <comment id="12802622" author="jvs" created="Wed, 20 Jan 2010 02:11:44 +0000"  >&lt;p&gt;Yes, will do.&lt;/p&gt;</comment>
                            <comment id="12802656" author="jvs" created="Wed, 20 Jan 2010 04:40:50 +0000"  >&lt;p&gt;I set up a MySQL metastore configuration, then created a table and view successfully. Browsing the resulting MySQL database, it looks like JDO chose MEDIUMTEXT for the type of the lob attributes. MEDIUMTEXT allows up to 2^24 bytes (16MB), which should be good enough for even very large views.&lt;/p&gt;

&lt;p&gt;Also, all tests are passing when I apply the .3 patch to svn head, so it&apos;s ready for commit. &lt;/p&gt;</comment>
                            <comment id="12802659" author="zshao" created="Wed, 20 Jan 2010 04:45:25 +0000"  >&lt;p&gt;Thanks John! I will test and commit it now.&lt;br/&gt;
Please open an follow-up issue and let&apos;s discuss the rest of things there.&lt;/p&gt;</comment>
                            <comment id="12802679" author="zshao" created="Wed, 20 Jan 2010 05:32:55 +0000"  >&lt;p&gt;Committed. Thanks John! Please open a follow-up issue and let&apos;s get the rest of the TODO items done!&lt;/p&gt;</comment>
                            <comment id="12802688" author="hammer" created="Wed, 20 Jan 2010 06:01:40 +0000"  >&lt;p&gt;Was there a documentation update for this feature? I didn&apos;t notice a wiki change go by, but I may have missed it.&lt;/p&gt;</comment>
                            <comment id="12802689" author="zshao" created="Wed, 20 Jan 2010 06:05:46 +0000"  >&lt;p&gt;I guess not yet. A good place to put it is &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/LanguageManual/DDL&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/LanguageManual/DDL&lt;/a&gt;. We should mention it&apos;s available from 0.6.&lt;/p&gt;</comment>
                            <comment id="12802713" author="jvs" created="Wed, 20 Jan 2010 07:02:57 +0000"  >&lt;p&gt;The wiki page describing the development so far is here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/ViewDev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/ViewDev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll go ahead and update the LanguageManual and other relevant pages to describe the support that will be available starting with 0.6.&lt;/p&gt;</comment>
                            <comment id="12803053" author="jvs" created="Wed, 20 Jan 2010 23:31:20 +0000"  >&lt;p&gt;I&apos;ve created these followup issues and marked them as related:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1067&quot; title=&quot;CREATE VIEW followup:  impose casts on view result columns if underlying column types change&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1067&quot;&gt;HIVE-1067&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1068&quot; title=&quot;CREATE VIEW followup:  add a &amp;quot;table type&amp;quot; enum attribute in metastore&amp;#39;s MTable, and also null out irrelevant attributes for MTable instances which describe views&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1068&quot;&gt;&lt;del&gt;HIVE-1068&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1069&quot; title=&quot;CREATE VIEW followup:  find and document current expected version of thrift, and regenerate code to match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1069&quot;&gt;&lt;del&gt;HIVE-1069&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1070&quot; title=&quot;CREATE VIEW followup:  add support for column-aliasing on subselect and use it when storing view definition with column renaming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1070&quot;&gt;HIVE-1070&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1073&quot; title=&quot;CREATE VIEW followup:  track view dependency information in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1073&quot;&gt;HIVE-1073&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1074&quot; title=&quot;CREATE VIEW followup:  DROP CASCADE/RESTRICT support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1074&quot;&gt;HIVE-1074&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1076&quot; title=&quot;CreateTime is reset to 0 when a partition is overwritten&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1076&quot;&gt;&lt;del&gt;HIVE-1076&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1077&quot; title=&quot;CREATE VIEW followup:  track object invalidation in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1077&quot;&gt;HIVE-1077&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1078&quot; title=&quot;CREATE VIEW followup:  CREATE OR REPLACE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1078&quot;&gt;&lt;del&gt;HIVE-1078&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1079&quot; title=&quot;CREATE VIEW followup:  derive dependencies on underlying base table partitions from view definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1079&quot;&gt;HIVE-1079&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12803129" author="jvs" created="Thu, 21 Jan 2010 02:12:02 +0000"  >&lt;p&gt;For the wiki, I&apos;ve updated the LanguageManual pages, and will follow on with updates in the various tutorials.&lt;/p&gt;</comment>
                            <comment id="12806157" author="jvs" created="Thu, 28 Jan 2010 23:46:47 +0000"  >&lt;p&gt;Metastore upgrade instructions are here (they assume &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1068&quot; title=&quot;CREATE VIEW followup:  add a &amp;quot;table type&amp;quot; enum attribute in metastore&amp;#39;s MTable, and also null out irrelevant attributes for MTable instances which describe views&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1068&quot;&gt;&lt;del&gt;HIVE-1068&lt;/del&gt;&lt;/a&gt; will be accepted):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/ViewDev#Metastore_Upgrades&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/ViewDev#Metastore_Upgrades&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There may be a more appropriate location for them in the wiki; once we have figured that out, we should link it from the release notes.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12444056">HIVE-1010</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12455841">HIVE-1145</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455843">HIVE-1146</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455838">HIVE-1144</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12467637">HIVE-1427</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12408169">HIVE-29</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13193180">SPARK-25797</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455022">HIVE-1124</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458597">HIVE-1218</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455835">HIVE-1143</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446137">HIVE-1067</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446143">HIVE-1070</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446148">HIVE-1073</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446149">HIVE-1074</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446159">HIVE-1077</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446161">HIVE-1079</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458714">HIVE-1224</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446139">HIVE-1068</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446140">HIVE-1069</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446160">HIVE-1078</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12430201" name="HIVE-972.1.patch" size="123030" author="jvs" created="Thu, 14 Jan 2010 00:50:47 +0000"/>
                            <attachment id="12430380" name="HIVE-972.2.patch" size="152056" author="jvs" created="Fri, 15 Jan 2010 09:22:12 +0000"/>
                            <attachment id="12430821" name="HIVE-972.3.patch" size="211816" author="jvs" created="Wed, 20 Jan 2010 00:08:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Dec 2009 01:42:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-973] nested types not supported in custom scripts</title>
                <link>https://issues.apache.org/jira/browse/HIVE-973</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;SELECT transform&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; USING &apos;cat&apos; AS (col array&amp;lt;bigint&amp;gt;) FROM T&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442661">HIVE-973</key>
            <summary>nested types not supported in custom scripts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2009 21:18:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:52 +0000</updated>
                            <resolved>Wed, 9 Dec 2009 18:55:41 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12787119" author="namit" created="Mon, 7 Dec 2009 21:19:21 +0000"  >&lt;p&gt;The above query dies with a null pointer exception&lt;/p&gt;</comment>
                            <comment id="12787314" author="zshao" created="Tue, 8 Dec 2009 04:50:27 +0000"  >&lt;p&gt;Shall we have some data in the test case?&lt;br/&gt;
Currently the test case returns an empty set, which means some code paths are not executed.&lt;/p&gt;</comment>
                            <comment id="12787334" author="namit" created="Tue, 8 Dec 2009 06:12:39 +0000"  >&lt;p&gt;Actually, the bug is happening at compile time&lt;/p&gt;</comment>
                            <comment id="12788236" author="zshao" created="Wed, 9 Dec 2009 18:55:41 +0000"  >&lt;p&gt;Committed. Thanks Namit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427231" name="hive.973.1.patch" size="4473" author="namit" created="Mon, 7 Dec 2009 21:29:40 +0000"/>
                            <attachment id="12427390" name="hive.973.2.patch" size="7870" author="namit" created="Tue, 8 Dec 2009 22:34:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Dec 2009 04:50:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122711</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-973&quot; title=&quot;nested types not supported in custom scripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-973&quot;&gt;&lt;strike&gt;HIVE-973&lt;/strike&gt;&lt;/a&gt;. Support nested types in custom scripts. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
