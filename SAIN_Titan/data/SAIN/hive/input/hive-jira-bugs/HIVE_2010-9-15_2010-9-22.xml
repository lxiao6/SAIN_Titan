<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:16:40 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2010-9-15+AND+created+%3C%3D+2010-9-22+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="28" total="28"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-1636] Implement &quot;SHOW TABLES {FROM | IN} db_name&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1636</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Make it possible to list the tables in a specific database using the following syntax borrowed from MySQL:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SHOW TABLES [{FROM|IN} db_name]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See &lt;a href=&quot;http://dev.mysql.com/doc/refman/5.0/en/show-tables.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.0/en/show-tables.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474135">HIVE-1636</key>
            <summary>Implement &quot;SHOW TABLES {FROM | IN} db_name&quot;</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="natty">Jonathan Natkins</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 01:49:43 +0000</created>
                <updated>Sat, 17 Dec 2011 00:01:05 +0000</updated>
                            <resolved>Wed, 26 Jan 2011 01:20:39 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12981982" author="cwsteinbach" created="Sat, 15 Jan 2011 00:10:10 +0000"  >&lt;p&gt;Review: &lt;a href=&quot;https://reviews.apache.org/r/323/diff/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/323/diff/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12981983" author="cwsteinbach" created="Sat, 15 Jan 2011 00:11:23 +0000"  >&lt;p&gt;@Jonathan: This patch needs a testcase. I recommend extending what already exists in show_tables.q and database.q&lt;/p&gt;</comment>
                            <comment id="12984025" author="natty" created="Thu, 20 Jan 2011 05:05:58 +0000"  >&lt;p&gt;Adding tests&lt;/p&gt;</comment>
                            <comment id="12984039" author="natty" created="Thu, 20 Jan 2011 06:33:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/323/diff/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/323/diff/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12984115" author="cwsteinbach" created="Thu, 20 Jan 2011 09:51:37 +0000"  >&lt;p&gt;I left some comments on reviewboard. Thanks.&lt;/p&gt;</comment>
                            <comment id="12986270" author="natty" created="Tue, 25 Jan 2011 08:04:36 +0000"  >&lt;p&gt;This new patch addresses the code review comments&lt;/p&gt;</comment>
                            <comment id="12986278" author="cwsteinbach" created="Tue, 25 Jan 2011 08:30:37 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12986803" author="cwsteinbach" created="Wed, 26 Jan 2011 01:20:39 +0000"  >&lt;p&gt;Committed. Thanks Jonathan!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12431185">HIVE-675</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12468423" name="HIVE-1636.1.patch.txt" size="5556" author="natty" created="Fri, 14 Jan 2011 22:50:49 +0000"/>
                            <attachment id="12468830" name="HIVE-1636.2.patch.txt" size="18706" author="natty" created="Thu, 20 Jan 2011 05:05:58 +0000"/>
                            <attachment id="12469257" name="HIVE-1636.3.patch" size="23228" author="natty" created="Tue, 25 Jan 2011 08:03:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Jan 2011 05:05:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123261</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1637] String partitions that are equal to &quot;&quot; or start with spaces or contains periods or asterisks cause errors</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1637</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a string partition is equal to &quot;&quot; (the empty string) or starts with a space or contains periods or asterisks joins on that table or selecting one field from that table will cause errors.  You can, however, still perform partition specific queries without a problem.&lt;/p&gt;


&lt;p&gt;    &amp;gt; select UT from researchaddress limit 10;&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks is set to 0 since there&apos;s no reduce operator&lt;br/&gt;
Cannot run job locally: Input Size (= 134217728) is larger than hive.exec.mode.local.auto.inputbytes.max (= 134217728)&lt;br/&gt;
java.lang.IllegalArgumentException: Can not create a Path from an empty string&lt;br/&gt;
	at org.apache.hadoop.fs.Path.checkPathArg(Path.java:82)&lt;br/&gt;
	at org.apache.hadoop.fs.Path.&amp;lt;init&amp;gt;(Path.java:90)&lt;br/&gt;
	at org.apache.hadoop.mapred.FileInputFormat.addInputPaths(FileInputFormat.java:296)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecDriver.addInputPaths(ExecDriver.java:1182)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:569)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:120)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:108)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:55)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.TaskRunner.run(TaskRunner.java:47)&lt;br/&gt;
Job Submission failed with exception &apos;java.lang.IllegalArgumentException(Can not create a Path from an empty string)&apos;&lt;/p&gt;


&lt;p&gt;And attempting to rename a table with such a partition causes:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; alter table researchaddress rename to researchaddress2;&lt;br/&gt;
Invalid alter operation: Old partition location  is invalid. (hdfs://ourwebsite.org:54310/user/hive/warehouse/researchaddress/nu=0 DENMARK)&lt;/p&gt;
</description>
                <environment>&lt;p&gt;java 1.6&lt;/p&gt;</environment>
        <key id="12474189">HIVE-1637</key>
            <summary>String partitions that are equal to &quot;&quot; or start with spaces or contains periods or asterisks cause errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ravivmg">Raviv M-G</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 16:35:46 +0000</created>
                <updated>Thu, 16 Sep 2010 15:33:50 +0000</updated>
                                            <version>0.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>partitions</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1638] convert commonly used udfs to generic udfs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1638</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Copying a mail from Joy:&lt;/p&gt;


&lt;p&gt;i did a little bit of profiling of a simple hive group by query today. i was surprised to see that one of the most expensive functions were in converting the equals udf (i had some simple string filters) to generic udfs. (primitiveobjectinspectorconverter.textconverter)&lt;/p&gt;

&lt;p&gt;am i correct in thinking that the fix is to simply port some of the most popular udfs (string equality/comparison etc.) to generic udsf?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474194">HIVE-1638</key>
            <summary>convert commonly used udfs to generic udfs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sdong">Siying Dong</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 17:26:18 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:48 +0000</updated>
                            <resolved>Tue, 19 Oct 2010 05:18:32 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12916056" author="sdong" created="Wed, 29 Sep 2010 07:08:10 +0000"  >&lt;p&gt;Write GenericUDF functions for logical and, or, not, comparison operation equal, not equal, greater, less, not greater, not less. Remove respective UDFs. Make other codes changes to turn to use the new functions.&lt;/p&gt;

&lt;p&gt;I ran some sample queries and didn&apos;t find performance regression in any of those queries.&lt;/p&gt;

&lt;p&gt;Then I measure improvement against some normal queries whose performance this change is expected to improve (basically queries with some filters, especially string comparison).&lt;/p&gt;

&lt;p&gt;Sample queries were executed against `source_table`, which has the same data-set as a production table. `source_table` is a table with 422 files, total size 127,881,234,652 bytes. Compressed using RCFormat. It has 18 non-partition columns. ds is the partition column.Partition &lt;/p&gt;

&lt;p&gt;ds=&apos;2010-09-23&apos; has about 5600M rows. Values of column `group` in most rows are &quot;wizard_generate_new&quot; (`group`=&quot;wizard_generate_new&quot; is not very selective). f_c is a column whose &lt;/p&gt;

&lt;p&gt;values are widely spread. &apos;5015&apos;, &apos;4960&apos;, &apos;2100&apos;, &apos;2144&apos; and &apos;1451&apos; are some values that have thousands of rows (f_c=&apos;xx&apos; is very selective). Split size was set to a value so that 87 mappers were used for all the queries.&lt;/p&gt;

&lt;p&gt;query1:&lt;br/&gt;
select count(1) from source_table where f_c=&apos;5015&apos; and `group`=&apos;wizard_generate_new&apos; and ds=&apos;2010-09-23&apos;&lt;/p&gt;

&lt;p&gt;query2:&lt;br/&gt;
select count(1) from source_table where ds=&apos;2010-09-23&apos; and `group`=&apos;wizard_generate_new&apos; and f_c=&apos;5015&apos;&lt;/p&gt;

&lt;p&gt;query3:&lt;br/&gt;
select f_c, count(1) from source_table where ds=&apos;2010-09-23&apos; and (f_c=&apos;5015&apos; or f_c=&apos;4960&apos;or f_c=&apos;2100&apos;or f_c=&apos;2144&apos;or f_c=&apos;1451&apos;) and `group`=&apos;wizard_generate_new&apos; group by f_c&lt;/p&gt;

&lt;p&gt;query4:&lt;br/&gt;
insert overwrite table temp_result select * from source_table where (f_c=&apos;5015&apos; or f_c=&apos;4960&apos;or f_c=&apos;2100&apos;or f_c=&apos;2144&apos;or f_c=&apos;1451&apos;) and `group`=&apos;wizard_generate_new&apos; and &lt;/p&gt;

&lt;p&gt;ds=&apos;2010-09-23&apos;&lt;/p&gt;

&lt;p&gt;We measured CPU costs. We compare CPU Cycles reported by MapReduced framework and CPU time reported by hmon service:&lt;/p&gt;

&lt;p&gt;	Map CPU Cycle (MapRed Framework)		Total CPU Time (hmon)		&lt;br/&gt;
	Old CPU Cycle	New CPU Cycle	Increase	Old CPU time	New CPU Time	Increase&lt;br/&gt;
Query 1	12,052,635	6,987,915	42.0%		45,875	23,022	49.8%&lt;br/&gt;
Query 2	12,164,920	10,678,800	12.2%		46,759	42,186	9.8%&lt;br/&gt;
Query 3	27,258,930	21,609,840	20.7%		116,113	93,484	19.5%&lt;br/&gt;
Query 4	30,604,180	20,912,570	31.7%		115,883	79,492	31.4%&lt;/p&gt;
</comment>
                            <comment id="12916058" author="sdong" created="Wed, 29 Sep 2010 07:13:44 +0000"  >&lt;p&gt;Forgot to say, the performance improvement doesn&apos;t seem to come from where Joydeep expected. Most improvements seem to come from not converting the second parameter if the return value can be determined only from the first parameter, which we can&apos;t do in old UDF functions with UDFBridge wrapper. &lt;/p&gt;</comment>
                            <comment id="12916208" author="namit" created="Wed, 29 Sep 2010 17:21:40 +0000"  >&lt;p&gt;great results - I will review the patch&lt;/p&gt;</comment>
                            <comment id="12916231" author="vrodionov" created="Wed, 29 Sep 2010 18:38:17 +0000"  >&lt;p&gt;Correct me if I am wrong, new queries take 23, 42, 93, 79 seconds? What is a wall-to-wall execution time for these queries?&lt;/p&gt;</comment>
                            <comment id="12916244" author="sdong" created="Wed, 29 Sep 2010 19:20:50 +0000"  >&lt;p&gt;I should have made it clearer.&lt;/p&gt;

&lt;p&gt;&quot;CPU Cycle (MapRed Framework)&quot; is the &quot;CPU_MILLISECONDS&quot; reported in &quot;Map-Reduce Framework&quot; section of job page.&lt;/p&gt;

&lt;p&gt;&quot;Total CPU Time (hmon)&quot; is not the query execution time. It is the average time the query takes the cluster. It aggregates resource usage this job takes on each machine and normalized by the total resource of the cluster (this one specifically should be number of cores). It also includes reducer&apos;s costs. It&apos;s trend should be very similar to the first one, just another source.&lt;/p&gt;
</comment>
                            <comment id="12916254" author="vrodionov" created="Wed, 29 Sep 2010 19:39:35 +0000"  >&lt;p&gt;OK, thanks for clarification. A couple questions more: &lt;/p&gt;

&lt;p&gt;1. How large is your cluster?&lt;br/&gt;
2. Is it typical simple query latency in Hive - hours?&lt;/p&gt;</comment>
                            <comment id="12916256" author="nzhang" created="Wed, 29 Sep 2010 19:42:01 +0000"  >&lt;p&gt;Siying, great work!&lt;/p&gt;

&lt;p&gt;Also can you do an optimization for the case when the parameters are constants (e.g., the 2nd parameter of f_c=&apos;5015&apos;). The objectInspector doesn&apos;t have the information of whether the input parameter is constant or not, but I think if you check in evaluate() whether the parameter is the same &lt;b&gt;object&lt;/b&gt; between the 1st and 2nd row, you can conclude the parameter is a constant. This can save a lot in object constructions. &lt;/p&gt;</comment>
                            <comment id="12916274" author="sdong" created="Wed, 29 Sep 2010 20:06:20 +0000"  >&lt;p&gt;Vladimir, it is a small test cluster with around 8 machines and each of them have 8 cores. The query latency is not hours. Input split size determines the number of mappers and influence query latency. The input split size is configurable through some parameters. For default size in our production cluster, those sample queries usually take minutes to finish.&lt;/p&gt;

&lt;p&gt;In the queries above, I set the split size to be a number that mapper usually take between 10-20 minutes, which is kind of ideal size for non-interactive queries. It doesn&apos;t represent any production query.&lt;/p&gt;</comment>
                            <comment id="12916278" author="sdong" created="Wed, 29 Sep 2010 20:12:53 +0000"  >&lt;p&gt;Sorry. It&apos;s around 30 machines and each of them 8 cores.&lt;/p&gt;</comment>
                            <comment id="12916284" author="sdong" created="Wed, 29 Sep 2010 20:39:35 +0000"  >&lt;p&gt;Ning, which object do you refer to? The parameters typed DeferredObject passed in seem to be different one and calling get() gets org.apache.hadoop.io.Text which already seems to be late.&lt;/p&gt;</comment>
                            <comment id="12916293" author="sdong" created="Wed, 29 Sep 2010 22:49:29 +0000"  >&lt;p&gt;Always use Text to do string comparisons. See latency slightly improved.&lt;br/&gt;
Change names of some variables.&lt;br/&gt;
Fix a bug in boolean equal or greater than.&lt;/p&gt;</comment>
                            <comment id="12922242" author="sdong" created="Mon, 18 Oct 2010 20:35:58 +0000"  >&lt;p&gt;Some updates:&lt;br/&gt;
1. When comparing two strings, use Java String if neither of the operands is &quot;prefer writable&quot;&lt;br/&gt;
2. Add Long and Byte into special case of comparisons&lt;br/&gt;
3. fix small comment mistake&lt;/p&gt;</comment>
                            <comment id="12922250" author="namit" created="Mon, 18 Oct 2010 20:50:14 +0000"  >&lt;p&gt;I will take a look &lt;/p&gt;</comment>
                            <comment id="12922256" author="namit" created="Mon, 18 Oct 2010 20:59:39 +0000"  >&lt;p&gt;GenericUDFBaseCompare is missing from the latest patch&lt;/p&gt;</comment>
                            <comment id="12922274" author="sdong" created="Mon, 18 Oct 2010 21:25:23 +0000"  >&lt;p&gt;One file is missing in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1638&quot; title=&quot;convert commonly used udfs to generic udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1638&quot;&gt;&lt;del&gt;HIVE-1638&lt;/del&gt;&lt;/a&gt;.3.patch&lt;/p&gt;</comment>
                            <comment id="12922284" author="namit" created="Mon, 18 Oct 2010 21:41:41 +0000"  >&lt;p&gt;    } else if (TypeInfoUtils.getTypeInfoFromObjectInspector(arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;).equals(&lt;br/&gt;
        TypeInfoFactory.byteTypeInfo) &amp;amp;&amp;amp;&lt;br/&gt;
        TypeInfoUtils.getTypeInfoFromObjectInspector(arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;).equals(&lt;br/&gt;
          TypeInfoFactory.byteTypeInfo)) &lt;/p&gt;
{
        compareType = CompareType.COMPARE_LONG;
        byoi0 = (ByteObjectInspector) arguments[0];
        byoi1 = (ByteObjectInspector) arguments[1];
    }


&lt;p&gt;It should be COMPARE_BYTE instead&lt;/p&gt;</comment>
                            <comment id="12922289" author="namit" created="Mon, 18 Oct 2010 21:49:15 +0000"  >&lt;p&gt;otherwise it looks OK&lt;/p&gt;</comment>
                            <comment id="12922294" author="sdong" created="Mon, 18 Oct 2010 21:54:46 +0000"  >&lt;p&gt;fix the bug that Namit pointed out.&lt;/p&gt;</comment>
                            <comment id="12922354" author="namit" created="Mon, 18 Oct 2010 23:30:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12922377" author="sdong" created="Tue, 19 Oct 2010 00:16:02 +0000"  >&lt;p&gt;Minor fix in comment and desc.&lt;/p&gt;</comment>
                            <comment id="12922442" author="namit" created="Tue, 19 Oct 2010 05:18:32 +0000"  >&lt;p&gt;Committed. Thanks Siying&lt;/p&gt;</comment>
                            <comment id="12922635" author="namit" created="Tue, 19 Oct 2010 17:39:28 +0000"  >&lt;p&gt;Forgot to mention, I had merged I saw your last comment.&lt;br/&gt;
So, the checked in patch is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1638&quot; title=&quot;convert commonly used udfs to generic udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1638&quot;&gt;&lt;del&gt;HIVE-1638&lt;/del&gt;&lt;/a&gt;.5.patch&lt;/p&gt;

&lt;p&gt;If you want the remaining changes, can you file a follow up jira with the patch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455904" name="HIVE-1638.1.patch" size="71972" author="sdong" created="Wed, 29 Sep 2010 07:08:10 +0000"/>
                            <attachment id="12455951" name="HIVE-1638.2.patch" size="74207" author="sdong" created="Wed, 29 Sep 2010 22:49:29 +0000"/>
                            <attachment id="12457475" name="HIVE-1638.3.patch" size="70071" author="sdong" created="Mon, 18 Oct 2010 20:35:58 +0000"/>
                            <attachment id="12457484" name="HIVE-1638.4.patch" size="77555" author="sdong" created="Mon, 18 Oct 2010 21:25:23 +0000"/>
                            <attachment id="12457487" name="HIVE-1638.5.patch" size="77555" author="sdong" created="Mon, 18 Oct 2010 21:54:46 +0000"/>
                            <attachment id="12457506" name="HIVE-1638.6.patch" size="77582" author="sdong" created="Tue, 19 Oct 2010 00:16:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Sep 2010 07:08:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123263</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1639] ExecDriver.addInputPaths() error if partition name contains a comma</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1639</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The ExecDriver.addInputPaths() calls FileInputFormat.addPaths(), which takes a comma-separated string representing a set of paths. If the path name of a input file contains a comma, this code throw an exception: java.lang.IllegalArgumentException: Can not create a Path from an empty string.&lt;/p&gt;

&lt;p&gt;Instead of calling FileInputFormat.addPaths(), ExecDriver.addInputPaths should iterate all paths and call FileInputFormat.addInputPath. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12474206">HIVE-1639</key>
            <summary>ExecDriver.addInputPaths() error if partition name contains a comma</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 19:13:42 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:47 +0000</updated>
                            <resolved>Thu, 16 Sep 2010 16:53:12 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12909903" author="namit" created="Wed, 15 Sep 2010 21:44:46 +0000"  >&lt;p&gt;Can you add a testcase ?&lt;/p&gt;</comment>
                            <comment id="12909954" author="nzhang" created="Thu, 16 Sep 2010 00:02:48 +0000"  >&lt;p&gt;Added a test case.&lt;/p&gt;</comment>
                            <comment id="12909956" author="namit" created="Thu, 16 Sep 2010 00:11:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12910222" author="namit" created="Thu, 16 Sep 2010 16:53:12 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454723" name="HIVE-1639.2.patch" size="38789" author="nzhang" created="Thu, 16 Sep 2010 00:02:48 +0000"/>
                            <attachment id="12454703" name="HIVE-1639.patch" size="1767" author="nzhang" created="Wed, 15 Sep 2010 21:02:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Sep 2010 21:44:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1640] hive-exec.jar contains JSON classes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1640</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;JSON classes are bundled in the hive-exec.jar artifact, among others (commons-lang, thrift).  This causes conflicts for any application that must rely on a different version of JSON, and other bundled libraries.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474207">HIVE-1640</key>
            <summary>hive-exec.jar contains JSON classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jganoff">Jordan Ganoff</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 19:16:49 +0000</created>
                <updated>Fri, 23 Feb 2018 16:26:14 +0000</updated>
                                            <version>0.5.0</version>
                                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13042793" author="cboyden" created="Thu, 2 Jun 2011 14:34:43 +0000"  >&lt;p&gt;A couple of thoughts to resolve this:&lt;/p&gt;

&lt;p&gt;1) Change the namespace of the included (json, commons-lang, etc...) classes that are used by Hive&lt;br/&gt;
2) Create 2 versions of Hive-Exec (One with embedded projects, one that relies on external jars)&lt;/p&gt;

&lt;p&gt;Why are these projects embedded? Is it to reduce the number of dependencies the JDBC driver requires?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13140541">HIVE-18785</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12410447">HIVE-163</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Jun 2011 14:34:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123266</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1641] add map joined table to distributed cache</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1641</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, the mappers directly read the map-joined table from HDFS, which makes it difficult to scale.&lt;br/&gt;
We end up getting lots of timeouts once the number of mappers are beyond a few thousand, due to &lt;br/&gt;
concurrent mappers.&lt;/p&gt;

&lt;p&gt;It would be good idea to put the mapped file into distributed cache and read from there instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474218">HIVE-1641</key>
            <summary>add map joined table to distributed cache</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liyin">Liyin Tang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 21:59:41 +0000</created>
                <updated>Sat, 17 Dec 2011 00:01:17 +0000</updated>
                            <resolved>Tue, 26 Oct 2010 18:29:58 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                            <comments>
                            <comment id="12914332" author="liyin" created="Fri, 24 Sep 2010 05:23:11 +0000"  >&lt;p&gt;Right now, the local work is only for processing small tables for map join operation. Also one MapredTask can at most have one map join operation. Because if one map join followed by anther map join, they will be split into 2 tasks. So one MapredTask can at most one local work to do. &lt;/p&gt;

&lt;p&gt;One feasible solution is to create a new type of task, named MapredLocalTask, which is to do some MapredLocalWork (local work). If one MapredTask has a local work to do, then create a new MapredLocal Task for this local work, let the current MapredTask depends on this new generated Task, and let this new generated task depends on the parent tasks of the current task.&lt;/p&gt;

&lt;p&gt;In this new MapredLocalTask, it does the local work only once and generate the mapped file(JDBM file). Next step is to put the new generated mapped file into distributed cache. All the mappers will &lt;br/&gt;
read this file from the distributed cache and construct the in memory hash table based on this file.&lt;/p&gt;

&lt;p&gt;Any comments are so welcome&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12918374" author="liyin" created="Wed, 6 Oct 2010 01:29:29 +0000"  >&lt;p&gt;The previously assumption is not always true. There might be multiple map join operations in one local work. &lt;/p&gt;

&lt;p&gt;No matter how many map join operators in one Map Red Task, for each map join operator, there will be one parent operator from big table branch and other operators from small table branches.&lt;br/&gt;
For big table branch, just leave it alone.&lt;/p&gt;

&lt;p&gt;For small table branch, create a new JDBMSinkOperator to replace the current MapJoin Operator. Now the local work has no common operators shared with the MapredWork.  &lt;br/&gt;
And create a JDBMDummyOperator to replace original parent operator for the MapJoinOperator. &lt;br/&gt;
This JDBMDummyOperator will help MapJoinOperator generate correctly input object inspector during the run time.&lt;/p&gt;

&lt;p&gt;In the execution time, the LocalTask will process all the local work and generate the JDBM file for each small tables. &lt;br/&gt;
When the MapRedTask starts to process the first row for MapJoinOperator, it will load the JDBM file to generate the in-memory hash table.&lt;/p&gt;

&lt;p&gt;If in the local mode, the JDBM files will be just stored in local directory. If not, the jdbm files will be added into Distributed Cache.&lt;/p&gt;

&lt;p&gt;This patch is just tested on Local Mode. I will submit another patch after testing against the clusters.&lt;/p&gt;</comment>
                            <comment id="12918760" author="liyin" created="Thu, 7 Oct 2010 01:45:26 +0000"  >&lt;p&gt;New Patch for distributed cache&lt;/p&gt;</comment>
                            <comment id="12918764" author="he yongqiang" created="Thu, 7 Oct 2010 02:10:41 +0000"  >&lt;p&gt;There are 2 patches with the same name. Can you delete the older one? And when uploading a patch, pls rename the patch to hive-jiranumber.patchnumberordate.patch.&lt;/p&gt;</comment>
                            <comment id="12919089" author="liyin" created="Thu, 7 Oct 2010 22:42:33 +0000"  >
&lt;p&gt;This new patch includes adding jdbm files to distributed cache and load it back from the cached file.&lt;/p&gt;

&lt;p&gt;This patch has been tested in the Test cluster for all the map join test case ( join25.q &amp;#8211; join39.q). &lt;br/&gt;
All the testing results match with the expected results. &lt;/p&gt;</comment>
                            <comment id="12919090" author="liyin" created="Thu, 7 Oct 2010 22:42:35 +0000"  >
&lt;p&gt;This new patch includes adding jdbm files to distributed cache and load it back from the cached file.&lt;/p&gt;

&lt;p&gt;This patch has been tested in the Test cluster for all the map join test case ( join25.q &amp;#8211; join39.q). &lt;br/&gt;
All the testing results match with the expected results. &lt;/p&gt;</comment>
                            <comment id="12919091" author="liyin" created="Thu, 7 Oct 2010 22:43:38 +0000"  >&lt;p&gt;I have submitted a new patch on jira.&lt;br/&gt;
This new patch includes adding jdbm files to distributed cache and load it back from the cached file.&lt;/p&gt;

&lt;p&gt;This patch has been tested in the Test cluster for all the map join test case ( join25.q &amp;#8211; join39.q). &lt;br/&gt;
All the testing results match with the expected results. &lt;/p&gt;</comment>
                            <comment id="12919408" author="namit" created="Fri, 8 Oct 2010 23:01:46 +0000"  >&lt;p&gt;As discussed offline, need to move the task from local to a mapreduce task&lt;/p&gt;</comment>
                            <comment id="12922241" author="namit" created="Mon, 18 Oct 2010 20:35:25 +0000"  >&lt;p&gt;Diff at &lt;a href=&quot;https://review.cloudera.org/r/1037/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://review.cloudera.org/r/1037/&lt;/a&gt; for review&lt;/p&gt;</comment>
                            <comment id="12922808" author="he yongqiang" created="Wed, 20 Oct 2010 01:02:13 +0000"  >&lt;p&gt;Had several reviews on the patch offline with Namit, Joy and Liying.&lt;br/&gt;
Will go through the diff again, and commit it. &lt;/p&gt;</comment>
                            <comment id="12923168" author="he yongqiang" created="Wed, 20 Oct 2010 21:04:47 +0000"  >&lt;p&gt;Some tests are failing because of plan change.&lt;/p&gt;

&lt;p&gt;Can you refresh the diff?&lt;/p&gt;


&lt;p&gt;And some more minor comments, you can fix them in the following up jiras or in your next patch (some of them are just few lines of change).&lt;br/&gt;
1. &lt;br/&gt;
NOTSKIPBIGTABLE is defined in both AbstractMapJoinOperator and CommonJoinOperator. And let&apos;s not use &apos;static&apos;.&lt;/p&gt;

&lt;p&gt;2.&lt;br/&gt;
In MapJoinObjectKey, metadataTag is always -1, and we serialize and deserialize it for each key. We can avoid it by simply assume that metadataTag is -1.&lt;/p&gt;

&lt;p&gt;3.&lt;br/&gt;
In JDBMSinkOperator, &lt;/p&gt;

&lt;p&gt;if (hashTable.cacheSize() &amp;gt; 0) {&lt;br/&gt;
  o.setObj(res);&lt;br/&gt;
  needNewKey = false;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;has no effect. &lt;/p&gt;

&lt;p&gt;Even hashTable.cacheSize() &amp;gt; 0, and then needNewKey = true&lt;/p&gt;

&lt;p&gt;In the following code,&lt;br/&gt;
if (needNewKey){&lt;br/&gt;
...&lt;br/&gt;
hashTable.put(keyObj, valueObj);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;the keyObj and valueObj is already in hashTable, so the put also has no effect except put the value to the head of MRUList. But at the put time, it is already in the head because of the get()&lt;/p&gt;

&lt;p&gt;So ideally, &lt;/p&gt;

&lt;p&gt;we should put most code into &lt;/p&gt;

&lt;p&gt;if (o == null) {&lt;br/&gt;
....&lt;/p&gt;

&lt;p&gt; if (metadataValueTag&lt;span class=&quot;error&quot;&gt;&amp;#91;tag&amp;#93;&lt;/span&gt; == -1) &lt;/p&gt;
{
 .....
 }

&lt;p&gt; if (needNewKey) &lt;/p&gt;
{ //this is always true here
 
 }
&lt;p&gt;} else {&lt;br/&gt;
	res = o.getObj();&lt;br/&gt;
	res.add(value);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;These maybe beneficial to the client performance, and that will be good since now we are now putting all the process work of small tables at the client. &lt;/p&gt;

&lt;p&gt;4. &lt;br/&gt;
In JDBMSinkOperator&apos;s close(), put hashTable.close(); before uploading jdbm file. That way, JDBM itself may want to do some cleanup work in the close before uploading jdbm file.&lt;/p&gt;

&lt;p&gt;5.&lt;br/&gt;
In JDBMSinkOperator, remove getPersistentFilePath(). there is no referenced to it.&lt;/p&gt;

&lt;p&gt;6.&lt;br/&gt;
In MapjoinOperator&apos;s loadJDBM, remove line &quot;int alias;&quot;&lt;br/&gt;
In loadJDBM(), remove code:&lt;br/&gt;
&quot;&lt;br/&gt;
for(int i = 0;i&amp;lt;localFiles.length; i++){&lt;br/&gt;
  Path path = localFiles&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;;&lt;br/&gt;
}&lt;br/&gt;
&quot;&lt;br/&gt;
7. &lt;br/&gt;
Instead of resolving the file name mapping at runtime. should do it at compile time. Need to open a follow up jira for this.&lt;/p&gt;

&lt;p&gt;8.&lt;br/&gt;
In MapredLocalTask, remove line:&lt;br/&gt;
&quot;&lt;br/&gt;
private MapOperator mo;&lt;br/&gt;
private File jdbmFile;&lt;br/&gt;
&quot;&lt;br/&gt;
Maybe we should print some progress information in startForward(). That way, client will not think it is not responsible.&lt;/p&gt;



&lt;p&gt;AWESOME work! Can you open the follow up jiras for the offline review comments?&lt;/p&gt;</comment>
                            <comment id="12924811" author="he yongqiang" created="Tue, 26 Oct 2010 01:41:48 +0000"  >&lt;p&gt;Liyin, i saw some diff from your recent patch? Can you refresh again, and i will test and commit it today.&lt;/p&gt;

&lt;p&gt;And let&apos;s optimize the jdbm in the next jira. &lt;/p&gt;</comment>
                            <comment id="12924812" author="namit" created="Tue, 26 Oct 2010 01:43:49 +0000"  >&lt;p&gt;Let us try to get it in, there are some other big patches waiting and it will be difficult for you to maintain this&lt;/p&gt;</comment>
                            <comment id="12925035" author="liyin" created="Tue, 26 Oct 2010 16:58:13 +0000"  >&lt;p&gt;The patch without jdbm is also ready.&lt;br/&gt;
 shall I submit that patch?&lt;/p&gt;</comment>
                            <comment id="12925077" author="he yongqiang" created="Tue, 26 Oct 2010 18:29:58 +0000"  >&lt;p&gt;I just committed! Thanks Liyin!&lt;/p&gt;</comment>
                            <comment id="12925641" author="liyin" created="Thu, 28 Oct 2010 01:28:14 +0000"  >&lt;p&gt;new diff about removing some print and log statements&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12477581">HIVE-1722</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12477582">HIVE-1723</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12457460" name="Hive-1641(3).txt" size="805881" author="liyin" created="Mon, 18 Oct 2010 16:36:29 +0000"/>
                            <attachment id="12457580" name="Hive-1641(4).patch" size="874243" author="liyin" created="Tue, 19 Oct 2010 17:57:33 +0000"/>
                            <attachment id="12457591" name="Hive-1641(5).patch" size="876076" author="liyin" created="Tue, 19 Oct 2010 20:21:26 +0000"/>
                            <attachment id="12458217" name="Hive-1641(6).patch" size="2829" author="liyin" created="Thu, 28 Oct 2010 01:28:14 +0000"/>
                            <attachment id="12456644" name="Hive-1641.patch" size="198526" author="liyin" created="Thu, 7 Oct 2010 22:43:51 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12477667">HIVE-1730</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Sep 2010 05:23:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Split the MapJoin into 2 stage. In stage 1, generate the JDBM file for each small table. In stage 2, load the JDBM file and do the Join operation in memory</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1642] Convert join queries to map-join based on size of table/row</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1642</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Based on the number of rows and size of each table, Hive should automatically be able to convert a join into map-join.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474219">HIVE-1642</key>
            <summary>Convert join queries to map-join based on size of table/row</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liyin">Liyin Tang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 22:03:09 +0000</created>
                <updated>Sun, 25 Jan 2015 09:37:35 +0000</updated>
                            <resolved>Wed, 17 Nov 2010 17:34:29 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12915626" author="liyin" created="Tue, 28 Sep 2010 05:45:08 +0000"  >&lt;p&gt;Are we talking about dynamically changing execution plan based on the table size?&lt;/p&gt;</comment>
                            <comment id="12915856" author="namit" created="Tue, 28 Sep 2010 17:49:42 +0000"  >&lt;p&gt;yes&lt;/p&gt;</comment>
                            <comment id="12931599" author="liyin" created="Sat, 13 Nov 2010 01:16:04 +0000"  >&lt;p&gt;I just finished converting common join into map join based on the file size.  There are 2 flags to control this optimization.&lt;br/&gt;
1)	set hive.auto.convert.join = true; It means this optimization is enabled. By default right now, this flag is disabled in order not to break any existing test cases. Also I put 25 additional test cases, auto_join0.q - auto_join25.q, which covers this optimization code.&lt;br/&gt;
2)	Set hive.hashtable.max.memory.usage = 0.9;  It means if the memory usage of local task is more than 90% of its heap size, then the local task will abort by itself. The Driver will know the local work fails and it won&apos;t submit the MapJoinTask (a Map Only MapRedTask)  to Hadoop, but instead, it will submit the originally CommonJoinTask to Hadoop to run.&lt;br/&gt;
3)	Set hive.smalltable.filesize = 25000000L;  It means if the summary of the small table file size is less than 25M, then it will run the map join task. If not, just run the originally common join task.&lt;br/&gt;
 The following is the basic flow how it works. For each common join, create a conditional task.&lt;br/&gt;
1)	For each join table, generate a mapjoin task by assuming this table is big table. &lt;br/&gt;
a.	The left side of right outer join must be small table.&lt;br/&gt;
b.	The right side of left outer join must be small table.&lt;br/&gt;
c.	No full outer join can be optimized. &lt;br/&gt;
d.	Eg. A left outer join B right outer join C. Only C can be big table table.&lt;br/&gt;
e.	Eg. A right outer join B left outer join C. Only B can be big table table.&lt;br/&gt;
f.	Eg. A left outer join B left outer join C. Only A can be big table table.&lt;br/&gt;
g.	Eg. A right outer join B right outer join C. Both B and C can be big table table.&lt;br/&gt;
2)	Put all these generated map join tasks into conditional task and set the mapping between big table&apos;s alias with the corresponding map join task.&lt;br/&gt;
3)	During the execution time, the resolver will read the input file size. If the input file size of small table is less than a threshold, than run the converted map join task. &lt;br/&gt;
4)	Set each map join task with a backup task. The backup task is the originally common join task.&lt;br/&gt;
This mapping relationship is set during execution time.&lt;br/&gt;
5)	If the map join task return abnormally, launch the backup task.&lt;/p&gt;
</comment>
                            <comment id="12931620" author="namit" created="Sat, 13 Nov 2010 03:29:13 +0000"  >&lt;p&gt;great work Liyin - I will take a look&lt;/p&gt;</comment>
                            <comment id="12931674" author="yuzhihong@gmail.com" created="Sat, 13 Nov 2010 13:22:37 +0000"  >&lt;p&gt;For this example:&lt;br/&gt;
d. Eg. A left outer join B right outer join C&lt;/p&gt;

&lt;p&gt;why must A be small table ?&lt;/p&gt;</comment>
                            <comment id="12931676" author="yuzhihong@gmail.com" created="Sat, 13 Nov 2010 13:28:20 +0000"  >&lt;p&gt;Do the new test cases cover backup task ?&lt;br/&gt;
If so, do we know the percentage of test cases where backup task is executed ?&lt;/p&gt;</comment>
                            <comment id="12931705" author="liyin" created="Sat, 13 Nov 2010 17:54:08 +0000"  >&lt;p&gt;In the case: A left outer join B right outer join C, A must be small table.&lt;/p&gt;

&lt;p&gt;I have a test case: auto_join25.q to test the backup test. There are several query in this test case.&lt;/p&gt;

&lt;p&gt;The idea is just set the  hive.hashtable.max.memory.usage = 0.00001. It means if the local task uses more than 0.00001% of memory, it will abort. Obviously, all local tasks will always fail in this task case. So the back up will run after the local task failed.&lt;/p&gt;

</comment>
                            <comment id="12931991" author="namit" created="Mon, 15 Nov 2010 06:20:41 +0000"  >&lt;p&gt;1. All the new parameters in HiveConf.java need to be added in hive-default.xml along with comments&lt;br/&gt;
2. Have you run all the tests with hive.auto.convert.join - all the diffs should only be in plan - no results&lt;br/&gt;
   change&lt;br/&gt;
3. DriverContext.java: comments for backup* fields&lt;br/&gt;
   I think the logic can be simplified with having a backupTask in Task itself&lt;br/&gt;
4. System.out.println in Driver.java&lt;br/&gt;
5. Backup task not generic&lt;br/&gt;
6. ExecMaper: undoes isLogInforEnabled - optimization put by Siying&lt;br/&gt;
7. ExplainTask: Where is backup ask being printed&lt;br/&gt;
8. Why do you need to make so many classes Serializable&lt;br/&gt;
9. I dont see any explain plan in the new tests&lt;/p&gt;

&lt;p&gt;I was thinking about it	- I think you can do this all backup task business much	easier.&lt;br/&gt;
No need	for any	special	casing - every task has	a backup task (currently, only valid&lt;br/&gt;
for joins, but nothing special from a task point of view).&lt;/p&gt;

&lt;p&gt;The change is needed in ConditionalTask execute - If a conditional task	consists&lt;br/&gt;
of task	1, 2 and 3 - and 1 is getting executed,	we remove 2 and	3 from the children&lt;br/&gt;
of 2 and 3 respectively	as if they never existed. This does not	work, if there is&lt;br/&gt;
1 followed by 1.1, 2 followed by 2.2, etc.. all the common child X (which is the case&lt;br/&gt;
in your	scenario) - we should fix that.	Instead	of removing only the immediate child&apos;s&lt;br/&gt;
parent - we check if the child had any remaining parents, if not, we recurse. This&lt;br/&gt;
way, the conditional task can containa a tree -	you dont need grand-child/mapred local&lt;br/&gt;
task (all that special logic) all over.&lt;/p&gt;


&lt;p&gt;I will continue to review more&lt;/p&gt;</comment>
                            <comment id="12931992" author="namit" created="Mon, 15 Nov 2010 06:46:32 +0000"  >&lt;p&gt;Can you add more comments for the use of the new TaskWalker ?&lt;br/&gt;
Also, since it is specific to Tasks, should it be in the lib directory, or should&lt;br/&gt;
it be moved to exec ?&lt;/p&gt;</comment>
                            <comment id="12931995" author="liyin" created="Mon, 15 Nov 2010 07:05:25 +0000"  >&lt;p&gt;Thanks for reviewing.&lt;/p&gt;

&lt;p&gt;1. I will add these parameters in the config xml file.&lt;/p&gt;

&lt;p&gt;2. By default hive.auto.convert.join = false right now, all the existing test cases won&apos;t be affected&lt;/p&gt;

&lt;p&gt;3. I am also thinking about putting the backup task into task directly, which is the simplest way to implement this. My only concern is that it will take more than time de/serializing the task. &lt;/p&gt;

&lt;p&gt;4. I will remove this the print statement.&lt;br/&gt;
5. The same as point 3.&lt;br/&gt;
6. I will fix it, some svn synchronization problem.&lt;/p&gt;

&lt;p&gt;7. Right now the back up task is generated during the execution time. That&apos;s why it is not easy to work with explain task. But if we put backup task into task directly, we can solve this problem. Also we should set the backup task during the compile time instead of execution time. The only cost is the task serialization time.&lt;/p&gt;

&lt;p&gt;8. Because we need to reuse the code of MapJoinProcessor, which uses join tree and row resolver to generate the new map join operator. So each time when generating a new map join operator, we need a deep copy of join tree and op context. Several classes need to be Serializable.&lt;/p&gt;

&lt;p&gt;9. I generated these test cases output by set the hive.auto.convert.join = false first, then reset the flag as true. So I can compare whether the result is correct or not. &lt;br/&gt;
Since right now, the join result is correct, I can add explain into test case.&lt;/p&gt;

&lt;p&gt;10.I will fix the conditional task to make it more generic.&lt;/p&gt;</comment>
                            <comment id="12932112" author="namit" created="Mon, 15 Nov 2010 17:04:19 +0000"  >&lt;p&gt;Let us talk about it - I dont think Tasks need to be serialized - we should ad backup tasks at compile time itself&lt;/p&gt;</comment>
                            <comment id="12932132" author="liyin" created="Mon, 15 Nov 2010 18:15:21 +0000"  >&lt;p&gt;There are 2 kinds of backup. 1) task level 2) branch level. I think the way you mentioned above is the branch level. The conditional task maintains a tree, if one branch fails, then try another branch. &lt;br/&gt;
I think, both of them is fine right now. But the branch level is more complicated to implement, because the back up task may not be a single task but a tree of tasks. The design goal is to replace one branch of task with another branch.&lt;/p&gt;

&lt;p&gt;I think the problem right now is that there 2 tasks involved in MapJoin. Image that, 3 months ago, there is no map join local task. It will be very easy to implement this. Once the mapjoin task fails, we replace with the backup task. It is the task level backup. &lt;/p&gt;

&lt;p&gt;The problem is we split the map join task into 2 tasks.  But we can still logically argue that the local task is PART of the map reduce task.  Actually, they do come from the same task. That&apos;s why if it is the local task, we look ahead one more task. &lt;/p&gt;

&lt;p&gt;In the future, we may have more this kinds of situation, splitting one task into multiple tasks. Then we may need a loop here. Say if this task is split from other tasks, keep looking ahead.&lt;/p&gt;

&lt;p&gt;Any other thoughts.&lt;/p&gt;</comment>
                            <comment id="12932168" author="namit" created="Mon, 15 Nov 2010 19:57:47 +0000"  >&lt;p&gt;TaskGraphWalker:&lt;/p&gt;

&lt;p&gt;      if(!(nd instanceof Task))&lt;/p&gt;
{
        throw new SemanticException(&quot;Task Graph Walker only walk fro Task Graph&quot;);
      }

&lt;p&gt;spelling mistake:&lt;/p&gt;

&lt;p&gt;        taskListInConditionalTask = ((ConditionalTask) nd).getListTasks();&lt;br/&gt;
        for(Task&amp;lt;? extends Serializable&amp;gt; tsk: taskListInConditionalTask){&lt;br/&gt;
          List&amp;lt;Task&amp;lt;? extends Serializable&amp;gt;&amp;gt; childTask = tsk.getChildTasks();&lt;br/&gt;
          if(childTask != null)&lt;/p&gt;
{
            nextTaskSet.addAll(tsk.getChildTasks());
          }
&lt;p&gt;        }&lt;/p&gt;

&lt;p&gt;Maybe I am missing something: dont we need to add listTasks of conditional tasks also to the nextTaskSet ?&lt;/p&gt;

&lt;p&gt;This is correct - but can you add more comments ??&lt;/p&gt;



&lt;p&gt;CommonJoinResolver:&lt;br/&gt;
Do we go here even if it is not possible to convert ?&lt;br/&gt;
check the size of smallTableSet with total number of tables&lt;/p&gt;



&lt;p&gt;MapJoinProcessor:&lt;/p&gt;

&lt;p&gt;  public MapJoinOperator generateMapJoniOperator(ParseContext pctx, JoinOperator op,&lt;/p&gt;

&lt;p&gt;spelling&lt;/p&gt;</comment>
                            <comment id="12932214" author="namit" created="Mon, 15 Nov 2010 21:55:06 +0000"  >&lt;p&gt;come more minor comments:&lt;/p&gt;

&lt;p&gt;1203           //Qualify the path against the filesystem. The user configured path might co?&lt;br/&gt;
ntain default port which is skipped&lt;br/&gt;
1204	    //in the file status. This makes sure that all paths which goes into PathToP?&lt;br/&gt;
artitionInfo are always listed status&lt;br/&gt;
1205	    //filepath.&lt;br/&gt;
1206	    newPath = fs.makeQualified(newPath);&lt;/p&gt;


&lt;p&gt;ExecDriver: is the above intentional ?&lt;/p&gt;


&lt;p&gt;MapJoinProcessor:&lt;br/&gt;
  public static String genMapJoinLocalWork(MapredWork newWork, MapJoinOperator mapJoinOp,&lt;/p&gt;

&lt;p&gt;Make it private &amp;#8211; add more comments&lt;br/&gt;
Add more comments to the new functions&lt;/p&gt;

&lt;p&gt;      // keep record all the input path for this alias&lt;br/&gt;
      HashSet&amp;lt;String&amp;gt; pathSet = new HashSet&amp;lt;String&amp;gt;();&lt;br/&gt;
      for (Map.Entry&amp;lt;String, ArrayList&amp;lt;String&amp;gt;&amp;gt; entry2 : pathToAliases.entrySet()) {&lt;br/&gt;
        String path = entry2.getKey();&lt;br/&gt;
        ArrayList&amp;lt;String&amp;gt; list = entry2.getValue();&lt;br/&gt;
        if (list.contains(alias)) {&lt;br/&gt;
          // add to path set&lt;br/&gt;
          if (!pathSet.contains(path)) &lt;/p&gt;
{
            pathSet.add(path);
          }
&lt;p&gt;          // remove this alias from the alias list&lt;br/&gt;
          list.remove(alias);&lt;br/&gt;
        }&lt;br/&gt;
      }&lt;/p&gt;


&lt;p&gt;Don&apos;t you need to remove the entry from pathToAliases if list becomes empty.&lt;/p&gt;</comment>
                            <comment id="12932531" author="liyin" created="Tue, 16 Nov 2010 16:49:56 +0000"  >&lt;p&gt;Thanks for the comments. &lt;br/&gt;
I have updated the patch according to the review comments.&lt;/p&gt;
</comment>
                            <comment id="12932573" author="liyin" created="Tue, 16 Nov 2010 18:15:28 +0000"  >&lt;p&gt;This patch formats the output of local task.&lt;/p&gt;</comment>
                            <comment id="12932666" author="namit" created="Tue, 16 Nov 2010 21:45:18 +0000"  >&lt;p&gt;hive-default.xml&lt;/p&gt;

&lt;p&gt;477 &amp;lt;property&amp;gt;&lt;br/&gt;
478	  &amp;lt;name&amp;gt;hive.mapjoin.hashtable.threshold&amp;lt;/name&amp;gt;&lt;br/&gt;
479	  &amp;lt;value&amp;gt;100000&amp;lt;/value&amp;gt;&lt;br/&gt;
480	  &amp;lt;description&amp;gt;the threshold for the mapjoin hashtable&amp;lt;/description&amp;gt;&lt;br/&gt;
481	&amp;lt;/property&amp;gt;&lt;br/&gt;
482&lt;br/&gt;
483	&amp;lt;property&amp;gt;&lt;br/&gt;
484	  &amp;lt;name&amp;gt;hive.mapjoin.hashtable.loadfactor&amp;lt;/name&amp;gt;&lt;br/&gt;
485	  &amp;lt;value&amp;gt;0.75&amp;lt;/value&amp;gt;&lt;br/&gt;
486	  &amp;lt;description&amp;gt;the load factor for the mapjoin hashtable&amp;lt;/description&amp;gt;&lt;br/&gt;
487	&amp;lt;/property&amp;gt;&lt;br/&gt;
488&lt;br/&gt;
489	&amp;lt;property&amp;gt;&lt;br/&gt;
490	  &amp;lt;name&amp;gt;hive.mapjoin.smalltable.filesize&amp;lt;/name&amp;gt;&lt;br/&gt;
491	  &amp;lt;value&amp;gt;25000000&amp;lt;/value&amp;gt;&lt;br/&gt;
492	  &amp;lt;description&amp;gt;The threshold for the input file size of the small tables; if the file size is smaller than this threshold, it will try to concert the common join into map join&amp;lt;/description&amp;gt;&lt;br/&gt;
493	&amp;lt;/property&amp;gt;&lt;br/&gt;
494&lt;br/&gt;
495	&amp;lt;property&amp;gt;&lt;br/&gt;
496	  &amp;lt;name&amp;gt;hive.mapjoin.localtask.max.memory.usage&amp;lt;/name&amp;gt;&lt;br/&gt;
497	  &amp;lt;value&amp;gt;0.90&amp;lt;/value&amp;gt;&lt;br/&gt;
498	  &amp;lt;description&amp;gt;The max memory usage of the local task for map join&amp;lt;/description&amp;gt;&lt;br/&gt;
499	&amp;lt;/property&amp;gt;&lt;br/&gt;
500&lt;/p&gt;


&lt;p&gt;Add more comments for the 1,2 and 4 properties.&lt;br/&gt;
spelling mistake in the third: concert -&amp;gt; convert&lt;/p&gt;


&lt;p&gt;Uncheckout DriverContext.java&lt;/p&gt;


&lt;p&gt;Why should backup task be obtained from the resolver ?&lt;br/&gt;
It can be created at task creation time itself ?&lt;/p&gt;</comment>
                            <comment id="12932690" author="liyin" created="Tue, 16 Nov 2010 22:23:09 +0000"  >&lt;p&gt;Add more descriptions to the configuration files.&lt;br/&gt;
Revert the DriverContext.&lt;/p&gt;</comment>
                            <comment id="12932691" author="liyin" created="Tue, 16 Nov 2010 22:24:12 +0000"  >&lt;p&gt;Add more detailed description on configuration xml file&lt;br/&gt;
Revert the DriverContext.java, since there should be no change on this file.&lt;/p&gt;</comment>
                            <comment id="12932720" author="liyin" created="Tue, 16 Nov 2010 23:56:53 +0000"  >&lt;p&gt;Remove the getBackupTask interface from all the Conditional Resolver&lt;/p&gt;</comment>
                            <comment id="12932741" author="namit" created="Wed, 17 Nov 2010 00:54:37 +0000"  >&lt;p&gt;ConditionalResolverCommonJoin&lt;/p&gt;

&lt;p&gt;    // generate file size to alias mapping; but connot set file size as key,&lt;br/&gt;
    // using 2 list to keep mapping&lt;/p&gt;

&lt;p&gt;spelling (connot)&lt;/p&gt;</comment>
                            <comment id="12932744" author="namit" created="Wed, 17 Nov 2010 00:59:40 +0000"  >&lt;p&gt;ConditionalResolverCommonJoin&lt;/p&gt;

&lt;p&gt;      // Iterate the sorted_set to get big/small table file size&lt;br/&gt;
      for (int index = 0; index &amp;lt; sortedList.size(); index++) {&lt;br/&gt;
        Long key = sortedList.get(index);&lt;br/&gt;
        int i = fileSizeList.indexOf(key);&lt;br/&gt;
        String alias = aliasList.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;/p&gt;

&lt;p&gt;        if (index != (size - 1)) &lt;/p&gt;
{
          smallTablesFileSizeSum += key.longValue();
        }
&lt;p&gt; else &lt;/p&gt;
{
          bigTableFileSize += key.longValue();
          bigTableFileAlias = alias;
        }
&lt;p&gt;      }&lt;/p&gt;


&lt;p&gt;The lines:&lt;/p&gt;

&lt;p&gt;        int i = fileSizeList.indexOf(key);&lt;br/&gt;
        String alias = aliasList.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;/p&gt;

&lt;p&gt;are only needed in the &apos;else&apos; block&lt;/p&gt;</comment>
                            <comment id="12932749" author="liyin" created="Wed, 17 Nov 2010 01:01:50 +0000"  >&lt;p&gt;In Task.java&lt;/p&gt;

&lt;p&gt;public void replaceWithConditionalTask(ConditionalTask cndTsk, PhysicalContext physicalContext) {&lt;br/&gt;
// take care of parent tasks&lt;br/&gt;
....&lt;br/&gt;
...&lt;br/&gt;
// take care of children tasks&lt;br/&gt;
List&amp;lt;Task&amp;lt;? extends Serializable&amp;gt;&amp;gt; oldChildTasks = this.getChildTasks();&lt;br/&gt;
    if (oldChildTasks != null) {&lt;br/&gt;
      for (Task&amp;lt;? extends Serializable&amp;gt; tsk : cndTsk.getListTasks()) {&lt;br/&gt;
        if (tsk.equals(this)) &lt;/p&gt;
{
          // avoid redundantly add this task again 
          continue;
        }
&lt;p&gt;        for (Task&amp;lt;? extends Serializable&amp;gt; oldChild : oldChildTasks) &lt;/p&gt;
{
          tsk.addDependentTask(oldChild);
        }
&lt;p&gt;      }&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="12932759" author="liyin" created="Wed, 17 Nov 2010 01:21:37 +0000"  >&lt;p&gt;some minor changes in ConditionalResolverCommonJoin.java&lt;/p&gt;</comment>
                            <comment id="12932778" author="liyin" created="Wed, 17 Nov 2010 02:10:37 +0000"  >&lt;p&gt;After discussing, we think the function: replaceWithConditionalTask is not such general to be put int the Task Class.&lt;br/&gt;
So we move this function back to the CommonJoinResolver Class.&lt;/p&gt;
</comment>
                            <comment id="12932781" author="liyin" created="Wed, 17 Nov 2010 02:20:18 +0000"  >&lt;p&gt;When the local task runs out of memory, do NOT  print any thing out and just return from this process.&lt;br/&gt;
Because calling l4j to print will make it worse.&lt;/p&gt;

&lt;p&gt;Sorry for so many minor changes in this afternoon.&lt;/p&gt;
</comment>
                            <comment id="12932843" author="namit" created="Wed, 17 Nov 2010 06:54:16 +0000"  >&lt;p&gt;+1 running tests&lt;/p&gt;</comment>
                            <comment id="12933042" author="namit" created="Wed, 17 Nov 2010 17:34:29 +0000"  >&lt;p&gt;Committed. Thanks Liyin&lt;/p&gt;</comment>
                            <comment id="14093773" author="lefty@hortonworks.com" created="Tue, 12 Aug 2014 05:55:06 +0000"  >&lt;p&gt;For the record (and searchability):  This added several configuration parameters in HiveConf.java for 0.7.0.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hive.smalltable.filesize&lt;/li&gt;
	&lt;li&gt;hive.auto.convert.join&lt;/li&gt;
	&lt;li&gt;hive.hashtable.initialCapacity&lt;/li&gt;
	&lt;li&gt;hive.hashtable.loadfactor&lt;/li&gt;
	&lt;li&gt;hive.hashtable.max.memory.usage&lt;br/&gt;
(&lt;em&gt;later renamed&lt;/em&gt; hive.mapjoin.localtask.max.memory.usage)&lt;/li&gt;
	&lt;li&gt;hive.hashtable.scale&lt;br/&gt;
(&lt;em&gt;later renamed&lt;/em&gt; hive.mapjoin.check.memory.rows)&lt;/li&gt;
	&lt;li&gt;hive.debug.localtask&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The patch gave parameter descriptions in hive-default.xml but three of them had wrong names, not counting the two that were renamed later:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hive.mapjoin.hashtable.initialCapacity (vs. hive.hashtable.initialCapacity)&lt;/li&gt;
	&lt;li&gt;hive.mapjoin.hashtable.loadfactor (vs. hive.hashtable.loadfactor)&lt;/li&gt;
	&lt;li&gt;hive.mapjoin.smalltable.filesize (vs. hive.smalltable.filesize)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14291024" author="lefty@hortonworks.com" created="Sun, 25 Jan 2015 09:37:35 +0000"  >&lt;p&gt;Doc done:  The wiki documents all the configuration parameters created in this issue (some of them renamed).&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.smalltable.filesizeorhive.mapjoin.smalltable.filesize&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.smalltable.filesize or hive.mapjoin.smalltable.filesize &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.auto.convert.join&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.auto.convert.join &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.hashtable.initialCapacity&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.hashtable.initialCapacity &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.hashtable.loadfactor&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.hashtable.loadfactor &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.mapjoin.localtask.max.memory.usage&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.mapjoin.localtask.max.memory.usage &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.mapjoin.check.memory.rows&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.mapjoin.check.memory.rows &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.debug.localtask&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.debug.localtask &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A description is still needed for &lt;b&gt;hive.debug.localtask&lt;/b&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12459759" name="hive-1642_10.patch" size="785631" author="liyin" created="Wed, 17 Nov 2010 02:10:36 +0000"/>
                            <attachment id="12459760" name="hive-1642_11.patch" size="785497" author="liyin" created="Wed, 17 Nov 2010 02:20:18 +0000"/>
                            <attachment id="12459734" name="hive-1642_5.patch" size="787454" author="liyin" created="Tue, 16 Nov 2010 22:24:11 +0000"/>
                            <attachment id="12459746" name="hive-1642_6.patch" size="785735" author="liyin" created="Tue, 16 Nov 2010 23:56:53 +0000"/>
                            <attachment id="12459753" name="hive-1642_7.patch" size="785807" author="liyin" created="Wed, 17 Nov 2010 01:01:50 +0000"/>
                            <attachment id="12459755" name="hive-1642_9.patch" size="785857" author="liyin" created="Wed, 17 Nov 2010 01:21:37 +0000"/>
                            <attachment id="12459510" name="hive_1642_1.patch" size="444382" author="liyin" created="Sat, 13 Nov 2010 01:21:38 +0000"/>
                            <attachment id="12459711" name="hive_1642_2.patch" size="788883" author="liyin" created="Tue, 16 Nov 2010 16:49:56 +0000"/>
                            <attachment id="12459715" name="hive_1642_4.patch" size="787834" author="liyin" created="Tue, 16 Nov 2010 18:15:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Sep 2010 05:45:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123268</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1643] support range scans and non-key columns in HBase filter pushdown</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1643</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1226&quot; title=&quot;support filter pushdown against non-native tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1226&quot;&gt;&lt;del&gt;HIVE-1226&lt;/del&gt;&lt;/a&gt; added support for WHERE rowkey=3.  We would like to support WHERE rowkey BETWEEN 10 and 20, as well as predicates on non-rowkeys (plus conjunctions etc).  Non-rowkey conditions can&apos;t be used to filter out entire ranges, but they can be used to push the per-row filter processing as far down as possible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474221">HIVE-1643</key>
            <summary>support range scans and non-key columns in HBase filter pushdown</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="bharathv">bharath v</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 15 Sep 2010 22:16:36 +0000</created>
                <updated>Tue, 16 Jun 2015 20:56:49 +0000</updated>
                                            <version>0.9.0</version>
                                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>22</watches>
                                                                                                            <comments>
                            <comment id="12977472" author="jvs" created="Tue, 4 Jan 2011 21:44:24 +0000"  >&lt;p&gt;Notes for working on this:&lt;/p&gt;

&lt;p&gt;Background is in&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/FilterPushdownDev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/FilterPushdownDev&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;In HiveHBaseTableInputFormat, newIndexPredicateAnalyzer needs to add additional operators (and stop restricting the allowed column names).  And then convertFilter needs to set up corresponding HBase filter conditions based on the predicates it finds.  Note that for inequality conditions on the key, it&apos;s necessary to muck with startRow/stopRow (not just the filter evaluator).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;See also the comment in HBaseStorageHandler.decomposePredicate.  Currently, it can only accept a single predicate.  If you want to be able to support AND of multiple predicates (using HBase&apos;s FilterList) then this will need to be relaxed.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Beware of the fact that until &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1538&quot; title=&quot;FilterOperator is applied twice with ppd on.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1538&quot;&gt;&lt;del&gt;HIVE-1538&lt;/del&gt;&lt;/a&gt; gets committed, it is more difficult to make sure that the HBase-level filtering is working as expected.  The reason is that without &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1538&quot; title=&quot;FilterOperator is applied twice with ppd on.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1538&quot;&gt;&lt;del&gt;HIVE-1538&lt;/del&gt;&lt;/a&gt;, a second copy of the filter gets applied within Hive (regardless of how the filter was decomposed when it was pushed down to HBase).  So even if HBase doesn&apos;t filter out everything you&apos;re expecting it to, you won&apos;t notice in the results since Hive will do the filtering again.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13089927" author="vaggarw" created="Wed, 24 Aug 2011 01:07:30 +0000"  >&lt;p&gt;I would like to work on this if it not being worked on actively as of now.&lt;/p&gt;</comment>
                            <comment id="13112784" author="otis" created="Thu, 22 Sep 2011 18:19:03 +0000"  >&lt;p&gt;Vaibhav - judging from the lack of response since you asked about this a month ago, you should push forward with this, yes!&lt;/p&gt;</comment>
                            <comment id="13112791" author="vaggarw" created="Thu, 22 Sep 2011 18:25:04 +0000"  >&lt;p&gt;I have been looking into this since last 3 days.&lt;/p&gt;

&lt;p&gt;I would ideally like to break this into:&lt;/p&gt;

&lt;p&gt;1. Add support for range query on primary key&lt;br/&gt;
2. Add support for filter pushdown on non primary key columns&lt;/p&gt;

&lt;p&gt;I will try to submit a patch for 1. soon.&lt;/p&gt;</comment>
                            <comment id="13115018" author="prattrs" created="Mon, 26 Sep 2011 23:07:39 +0000"  >&lt;p&gt;I&apos;ve been working on this issue myself the last few days, and I was hoping we could compare notes.  I&#8217;m developing against the hive release we currently have deployed (hive-0.7.0-cdh3u0), so I&#8217;m not sure if a patch would make sense.  But basically, here&#8217;s the gist:&lt;/p&gt;

&lt;p&gt;HBaseStorageHandler.java:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Strike the implementation of HivePredicateStorageHanlder, and implement HiveStorageHandler instead.  We&#8217;ll still be passed a copy of the filter expression if we wish to optimize, but Hive will still do the filtering over top of us (which is fine).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;HiveHBaseTableInputFormat.java:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Change the IndexPredicateAnalyzer configuration to include a few more operations that are relevant to range scans (e.g. &amp;gt;=, &amp;lt;=, &amp;lt;, &amp;gt;).&lt;/li&gt;
	&lt;li&gt;Continue to set the start and stop row basically as before in convertFilter, while doing the right thing for range scans.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;My main concern with this approach is that the IndexPredicateAnalyzer might not be doing what I think.  For example, if I write odd where clauses like &#8220;key &amp;gt;= b and (key &amp;lt; c or true)&#8221; is it smart enough to discard that vacuous second part?  Also, there are HBase-specific edge cases to think about (e.g. if we get &#8220;key &amp;gt;= d and key &amp;lt;= b&#8221; then we shouldn&#8217;t set any startRow or stopRow). &lt;/p&gt;

&lt;p&gt;Does this sound like the right track?&lt;/p&gt;</comment>
                            <comment id="13115996" author="jvs" created="Tue, 27 Sep 2011 23:06:26 +0000"  >&lt;p&gt;Sandy, it would be great if you and Vaibhav can push this one through together.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what you mean by &quot;striking&quot; HiveStoragePredicateHandler. Its purpose is to allow handlers to tell Hive which portion of the predicate got pushed down, and which part needs to be handled by Hive during per-row evaluation.  This helps reduce the mapper work, so we do not want to lose that.&lt;/p&gt;

&lt;p&gt;IndexPredicateAnalyzer currently only handles conjunction (AND), so for your example, it would only extract the condition for &quot;key &amp;gt;= b&quot; (and leave the right-hand side of the AND to be evaluated by Hive).  Vacuous cases would be better handled generically inside of Hive&apos;s optimizer (as part of constant folding), rather than specifically in index predicate analysis.&lt;/p&gt;

&lt;p&gt;Note that for non-key columns, youll need to change newIndexPredicateAnalyzer to not call clearAllowedColumnNames.&lt;/p&gt;

&lt;p&gt;Also watch out for the comment &quot;We&apos;ll need to handle this better later when we support more interesting predicates&quot; in HBaseStorageHandler.decomposePredicate.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13117547" author="prattrs" created="Thu, 29 Sep 2011 19:11:48 +0000"  >&lt;p&gt;John,&lt;/p&gt;

&lt;p&gt;Thanks for the feedback.  My reasoning about implementing HiveStorageHandler instead of HiveStoragePredicateHandler is that is seems a bit safer.  With HiveStorageHandler, we still have the predicate passed to us during getSplits, allowing us to optimize, but we&apos;re not &quot;on the hook&quot; to sort out pathological queries and do the right thing.  However, based on your feedback, I&apos;ve added HiveStoragePredicateHandler back in and tried to filter out anything weird in decomposePredicate.&lt;/p&gt;

&lt;p&gt;I&apos;m testing a patch which allows a single equals predicate or a single or double ended range scan against the rowkey.  I&apos;ll let you all know how it goes.  As I mentioned before, I&apos;m running CDH3u0 in all my environments, so that&apos;s what it will be easiest for me to test against.  The HBase integration package looks largely the same on trunk, so hopefully that won&apos;t be a problem.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Sandy&lt;/p&gt;
</comment>
                            <comment id="13117550" author="prattrs" created="Thu, 29 Sep 2011 19:15:18 +0000"  >&lt;p&gt;A patch I am currently testing, which allows a single equals predicate on the rowkey or a single or double ended range scan to be passed to the HBase layer.&lt;/p&gt;</comment>
                            <comment id="13126073" author="prattrs" created="Wed, 12 Oct 2011 19:31:21 +0000"  >&lt;p&gt;After testing a bit, it looks like calling convertFilter in getRecordReader is causing incorrect results in group by / count queries.  I believe this is because the scan range is getting reset for each map, and then three identical result sets are getting merged.&lt;/p&gt;</comment>
                            <comment id="13173389" author="ashutoshc" created="Tue, 20 Dec 2011 18:34:52 +0000"  >&lt;p&gt;Hey Vaibhav / Sandy,&lt;br/&gt;
Did you guys pursue this any further ?&lt;/p&gt;</comment>
                            <comment id="13173496" author="prattrs" created="Tue, 20 Dec 2011 20:47:30 +0000"  >&lt;p&gt;I have a serde that I&apos;ve deployed for my internal customers, in which this bug if fixed.  I made some fairly wide-reaching changes to the published hbase-serde though.  For example, I made it read-only, and changed the treatment of fields to be by Java reflection rather than parsed out of the DDL strings (that is, you translate your HBase row to Hive by providing a reflectable row-reader class that the API calls).&lt;/p&gt;

&lt;p&gt;So far, things are going pretty well and users seem happy.  I&apos;m in the process of getting my manger&apos;s consent to put it up on Google Code or something for others to use.  But I feel like it&apos;s too far diverged from mainline to submit back as a patch.  Stay tuned.&lt;/p&gt;
</comment>
                            <comment id="13197583" author="ashutoshc" created="Wed, 1 Feb 2012 05:00:19 +0000"  >&lt;p&gt;I created a subtask for this (range scans for key of string type) and added patch over there. Comments and suggestions welcome. &lt;/p&gt;</comment>
                            <comment id="13197584" author="ashutoshc" created="Wed, 1 Feb 2012 05:00:37 +0000"  >&lt;p&gt;Forgot to mention &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13236093" author="ashutoshc" created="Thu, 22 Mar 2012 22:07:20 +0000"  >&lt;p&gt;Just a quick update:&lt;br/&gt;
Work on filter pushdown on primary key range scans have been completed via &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1634&quot; title=&quot;Allow access to Primitive types stored in binary format in HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1634&quot;&gt;&lt;del&gt;HIVE-1634&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2815&quot; title=&quot;Filter pushdown in hbase for keys stored in binary format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2815&quot;&gt;&lt;del&gt;HIVE-2815&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2819&quot; title=&quot;Closed range scans on hbase keys &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2819&quot;&gt;&lt;del&gt;HIVE-2819&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Note that filters are still &lt;b&gt;not&lt;/b&gt; pushed for non-primary keys. I don&apos;t plan to work on that in immediate future, but would be to help out if any one else is planning for it. &lt;/p&gt;</comment>
                            <comment id="13399241" author="bharathv" created="Fri, 22 Jun 2012 09:48:19 +0000"  >&lt;p&gt;This patch converts &lt;b&gt;non row-key&lt;/b&gt; predicates into corresponding hbase filters and adds them to scan objects to save network IO. Current trunk does filtering after TableScan operator.Tested it by observing reduction in number of rows processed by TableScanOperator. &lt;/p&gt;</comment>
                            <comment id="13405327" author="ashutoshc" created="Mon, 2 Jul 2012 21:05:30 +0000"  >&lt;p&gt;@Bharath,&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Can you create a phabricator review request for this? &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;There are no test cases in your patch. Would you mind adding few?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can first create a review request so that I continue the review. In the meanwhile you can work on tests.&lt;/p&gt;</comment>
                            <comment id="13407249" author="bharathv" created="Thu, 5 Jul 2012 16:32:47 +0000"  >&lt;p&gt;@Ashutosh I created a phabricator review for it! Im using it for the first time, please let me know if your didn&apos;t get it! I&apos;ll add testcases in the subsequent revisions of the patch! &lt;/p&gt;</comment>
                            <comment id="13407316" author="bharathv" created="Thu, 5 Jul 2012 17:38:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3999&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3999&lt;/a&gt; - link for review&lt;/p&gt;</comment>
                            <comment id="13423699" author="ashutoshc" created="Fri, 27 Jul 2012 06:24:57 +0000"  >&lt;p&gt;This patch will only push a list of ANDed filters like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from tt where col1 &amp;lt; 23 and col2 &amp;gt; 34 and col3 = 5 and col4 = 29 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is this correct? What about filters on OR conditions and nested filters. Do you plan to add support for those ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from tt where col1 &amp;lt; 23 or (col2 &amp;lt; 2 and col3 = 5) or (col4 = 6 and (col5 = 3 or col6 = 7));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13424317" author="bharathv" created="Sat, 28 Jul 2012 10:49:53 +0000"  >&lt;p&gt;Currently the IndexPredicateAnalyzer.analyzePredicate() accepts only pure conjunctions (not sure why, can you please explain)! I haven&apos;t modified that functionality as I thought it might effect other packages (especially ql.index). Thats the reason only ANDs are getting pushed. &lt;/p&gt;</comment>
                            <comment id="13424386" author="ashutoshc" created="Sat, 28 Jul 2012 17:27:28 +0000"  >&lt;p&gt;IndexPredicateAnalyzer was originally written for analysis of index predicates (as name suggests). Since, it matched the use case here for hbase handler, we used it here too. But, its not required that we keep using it. We can write a new PredicateAnalyzer (may be extending from IndexPA) which can also process ORs in some way if we want to. Or, else you can accept any combination of filter conditions (i.e., do not use PA at all) and construct appropriate filter list for HBase.&lt;/p&gt;</comment>
                            <comment id="13426368" author="bharathv" created="Wed, 1 Aug 2012 08:07:48 +0000"  >&lt;p&gt;The problem becomes easy if all the columns are binary. Then we can build nested FilterLists recursively (since a FilterList can contain another FilterList). However the problem comes when some of the columns are not binary. For eg In the query&lt;/p&gt;

&lt;p&gt;select * from tt where col1 &amp;lt; 23 or (col2 &amp;lt; 2 and col3 = 5) or (col4 = 6 or (col5 = 3 or col6 &amp;gt; 7));&lt;/p&gt;

&lt;p&gt;col6 is not binary, then we cannot put a Filter with (col6 &amp;gt; 7). Then how to determine the set of conditions that can be pushed? (In the above example , we cannot push whole (col4 = 6 or (col5 = 3 or col6 &amp;gt; 7)) . I&apos;ve gone through the source of IPA and I feel it does the same. I takes only perfect ANDs so that they can be pushed as a whole. Any thoughts?&lt;/p&gt;</comment>
                            <comment id="13426381" author="bharathv" created="Wed, 1 Aug 2012 08:47:27 +0000"  >&lt;p&gt;One way to deal with this is to just create the HBase filters for these predicates and keep the FilterOperator as it is on the original (whole) predicate. This saves network IO. Any other suggestions?&lt;/p&gt;</comment>
                            <comment id="13433981" author="bharathv" created="Tue, 14 Aug 2012 07:56:47 +0000"  >&lt;p&gt;New patch attached. Works also for nested predicates! Implemented new methods for analyzing predicates rather than depending on IPA ! These methods work more accurately for HBase specific filter pushdowns! Added some test cases too !&lt;/p&gt;</comment>
                            <comment id="13447278" author="bharathv" created="Mon, 3 Sep 2012 13:50:06 +0000"  >&lt;p&gt;Can someone review this? &lt;a href=&quot;https://reviews.apache.org/r/6605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6605/&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13482080" author="lianhuiwang" created="Tue, 23 Oct 2012 03:30:43 +0000"  >&lt;p&gt;Ashutosh Chauhan &lt;br/&gt;
Is this correct? What about filters on OR conditions and nested filters. Do you plan to add support for those ?&lt;br/&gt;
select * from tt where col1 &amp;lt; 23 or (col2 &amp;lt; 2 and col3 = 5) or (col4 = 6 and (col5 = 3 or col6 = 7));&lt;/p&gt;

&lt;p&gt;i think there should need range analyze.&lt;br/&gt;
in mysql, sql optimizer include the range analyze on partition and index.&lt;br/&gt;
binary tree represent conditions ranges.&lt;br/&gt;
but there are some difficulties in task split.&lt;br/&gt;
because maybe there are many small ranges in one table region. so maybe merge multi small ranges in one region and use rowkeyFilter.&lt;br/&gt;
that can reduce one region&apos;s visits.&lt;/p&gt;
</comment>
                            <comment id="13547925" author="hudson" created="Wed, 9 Jan 2013 10:23:36 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for&lt;br/&gt;
keys of type string&lt;br/&gt;
(Ashutosh Chauhan via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2771&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This patch adds support for key range scans pushdown to hbase for keys of type&lt;br/&gt;
string. With this patch filter pushdowns of following types are supported:&lt;br/&gt;
a) Point lookups for keys of any types.&lt;br/&gt;
b) Range scans for keys of type string. &lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
Added hbase_ppd_key_range.q which is modeled after hbase_pushdown.q&lt;/p&gt;

&lt;p&gt;This is a subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1643&quot; title=&quot;support range scans and non-key columns in HBase filter pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1643&quot;&gt;HIVE-1643&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, jsichi, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;CC: jsichi, ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt; (Revision 1297675)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1297675&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1297675&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_ppd_key_range.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_ppd_key_range.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13972168" author="ccondit" created="Thu, 17 Apr 2014 01:00:04 +0000"  >&lt;p&gt;Is this issue still being worked? Would love to see this in 0.13...&lt;/p&gt;</comment>
                            <comment id="13973241" author="prattrs" created="Thu, 17 Apr 2014 18:28:03 +0000"  >&lt;p&gt;Craig, I&apos;ve been running my patch for this issue in production for at least a year now, and it seems to work well enough.  I have an item on my plate to contribute the source, but it will have to wait until I have an opening in my schedule.  Because the HBase handler is a pluggable SerDe, and my implementation strays a bit from the one in Hive, I&apos;ll probably stick it on Github or something and post a pointer here.&lt;/p&gt;</comment>
                            <comment id="14009061" author="ashutoshc" created="Mon, 26 May 2014 20:08:16 +0000"  >&lt;p&gt;Sorry for letting it go stale. It would be good to get this in. If someone can rebase the patch, I will take a look.&lt;/p&gt;</comment>
                            <comment id="14009938" author="ccondit" created="Tue, 27 May 2014 17:34:47 +0000"  >&lt;p&gt;The patch as-is has a few issues...&lt;/p&gt;

&lt;p&gt;First, at least in Hive 0.12, it interacts badly when multiple tables are joined. I&apos;ve seen cases where it was clear that Hive was attempting to push down predicates for the wrong table, leading to NullPointerExceptions when the column is looked up and not found since the HBase storage handler assumes that any predicate that it receives will be for a valid column. I suspect this must be a bug in the query optimizer, but have not been able to determine exactly where.&lt;/p&gt;

&lt;p&gt;Second, the fallback behavior when a complex query predicate is passed down is to punt on the entire expression, even if it could be partially evaluated (for example rowkey &amp;gt;= &apos;A&apos; AND rowkey &amp;lt; &apos;B&apos; AND (&lt;span class=&quot;error&quot;&gt;&amp;#91;complex bit&amp;#93;&lt;/span&gt;)). This leads to unexpected full table scans in HBase. At the very least, the code should try really hard to at least handle the rowkey parts if possible. This can happen unexpectedly, if a single term uses an operator that the storage handler does not have a case for.&lt;/p&gt;

&lt;p&gt;Third, even if the predicate pushdown works, this often results in secondary issues when interacting with HBase. In a case where no rowkey expression exists, it&apos;s possible to run very high CPU usage on HBase to evaluate the filters, and even get HBase RPC timeouts if enough rows are filtered out to result in no data being returned quickly enough. It would be nice to be able to control (somehow) which expressions the code tries to push down.&lt;/p&gt;

&lt;p&gt;At our location, we didn&apos;t even try to port the patch to Hive 0.13 when we upgraded, mainly due to issues #2 and #3. Fortunately, CTEs have allowed us to ensure that only rowkey predicates get pushed down like so:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;with a as (select ... from hbase_table where rowkey &amp;gt;= &apos;start&apos; and rowkey &amp;lt; &apos;end&apos;) do select * from a where ...;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It might be more useful for Hive-HBase integration to focus on ensuring that rowkey predicates are always pushed down (except for things like OR/NOT expressions, etc.) rather than trying to push down other types of expressions.&lt;/p&gt;
</comment>
                            <comment id="14588759" author="ran p" created="Tue, 16 Jun 2015 20:56:49 +0000"  >&lt;p&gt;I understand that pushing down the expression to hbase is complicated especially when working with multiple tables. But is it possible to add a hinting mechanism?&lt;br/&gt;
We can added to each &quot;from table&quot; a hint for startRow and stopRow for the scan, and when HiveHBaseTableInputFormat scan the table it will added the startRow &amp;amp; stopRow. And for the first Part we will leave the user the possibility to optimize specific table scan.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12543736">HIVE-2815</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12458718">HIVE-1226</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12720393">HIVE-7207</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12533024" name="HIVE-1643.patch" size="14588" author="bharathv" created="Fri, 22 Jun 2012 09:49:28 +0000"/>
                            <attachment id="12540852" name="Hive-1643.2.patch" size="25933" author="bharathv" created="Tue, 14 Aug 2012 07:54:56 +0000"/>
                            <attachment id="12497043" name="hbase_handler.patch" size="13449" author="prattrs" created="Thu, 29 Sep 2011 19:15:18 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12540675">HIVE-2771</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Aug 2011 01:07:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4005</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i014wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1644] use filter pushdown for automatically accessing indexes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1644</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1226&quot; title=&quot;support filter pushdown against non-native tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1226&quot;&gt;&lt;del&gt;HIVE-1226&lt;/del&gt;&lt;/a&gt; provides utilities for analyzing filters which have been pushed down to a table scan.  The next step is to use these for selecting available indexes and generating access plans for those indexes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474222">HIVE-1644</key>
            <summary>use filter pushdown for automatically accessing indexes</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmelick">Russell Melick</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 22:20:03 +0000</created>
                <updated>Thu, 2 May 2013 02:29:38 +0000</updated>
                            <resolved>Mon, 2 May 2011 19:10:53 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Indexing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12926003" author="jvs" created="Thu, 28 Oct 2010 23:46:17 +0000"  >&lt;p&gt;Assigning to Russell as placeholder for HMC team.&lt;/p&gt;</comment>
                            <comment id="12995109" author="rmelick" created="Wed, 16 Feb 2011 01:29:51 +0000"  >&lt;p&gt;I&apos;m having trouble joining the operator trees together.  Within&lt;br/&gt;
org.apache.hadoop.hive.ql.optimizer.index.IndexWhereProcessor,&lt;br/&gt;
I&apos;m working within rewriteForIndex(...).  I added a unit test called&lt;br/&gt;
index_opt_where.q, which is what I&apos;ll be using for examples.&lt;/p&gt;

&lt;p&gt;After line 139, I have 2 parseContexts: 1 is the original parse context&lt;br/&gt;
of the normal query &lt;/p&gt;

&lt;p&gt;(SELECT * FROM src WHERE key=86 ORDER BY key), &lt;/p&gt;

&lt;p&gt;and the other is the parseContext of the reentrant query used to&lt;br/&gt;
generate the temporary table.&lt;/p&gt;

&lt;p&gt;(INSERT OVERWRITE DIRECTORY &quot;/tmp/index_result_where1&quot; SELECT&lt;br/&gt;
`&lt;em&gt;bucketname` ,  `_offsets` FROM default&lt;/em&gt;&lt;em&gt;src_src_index&lt;/em&gt;_ WHERE key=86)&lt;/p&gt;

&lt;p&gt;I don&apos;t really know how to join the operator trees from these&lt;br/&gt;
parseContexts together.  I tried just setting the topOps of the original&lt;br/&gt;
query to include the topOps of the reentrant query.  I ran into null&lt;br/&gt;
pointer exceptions when it went to optimize using other Transforms.&lt;/p&gt;

&lt;p&gt;I then tried add the topOps of the original query as the child of the&lt;br/&gt;
very bottom child node of the reentrant query, and then setting that&lt;br/&gt;
combined operator tree as the topOp of the original parseContext.  That&lt;br/&gt;
gave me trouble.  For some reason, the IndexWhereProcessor.process(...)&lt;br/&gt;
method is called twice, and the second time, it would try to use the&lt;br/&gt;
reentrant topOp table name (default__src_src_index...) to lookup the&lt;br/&gt;
tblScan operator, but the new topOp only had src as a TableScan. The new&lt;br/&gt;
topOp was the reentrant query, and that doesn&apos;t scan it default__src...&lt;br/&gt;
table, it creates it.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch, in hopes that it will reasonably easy to see what&lt;br/&gt;
I&apos;m talking about.  There are lot of hacks in it (it always uses&lt;br/&gt;
indexOptimizing as an Optimization, and the query reconstruction is&lt;br/&gt;
bad), but it&apos;s stuff I didn&apos;t want to worry about until I could get it&lt;br/&gt;
working.&lt;/p&gt;</comment>
                            <comment id="12996042" author="jvs" created="Thu, 17 Feb 2011 20:19:39 +0000"  >&lt;p&gt;You&apos;re pretty close with the first method; if I uncomment it and add one line, I can get it as far as execution:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    pctx.getTopOps().putAll(indexQueryPctx.getTopOps());
    pctx.getTopToTable().putAll(indexQueryPctx.getTopToTable());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But then I get an execution-time exception; still looking into that.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] java.io.IOException: cannot find dir = pfile:/Users/jsichi/open/hive-trunk/build/ql/test/data/warehouse/src/kv1.txt in pathToPartitionInfo: [pfile:/Users/jsichi/open/hive-trunk/build/ql/test/data/warehouse/default__src_src_index__]
    [junit] 	at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getPartitionDescFromPathRecursively(HiveFileFormatUtils.java:288)
    [junit] 	at org.apache.hadoop.hive.ql.index.compact.HiveCompactIndexInputFormat.doGetSplits(HiveCompactIndexInputFormat.java:45)
    [junit] 	at org.apache.hadoop.hive.ql.index.compact.HiveCompactIndexInputFormat.getSplits(HiveCompactIndexInputFormat.java:99)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12996182" author="jvs" created="Fri, 18 Feb 2011 00:55:53 +0000"  >&lt;p&gt;After looking into this some more, it seems like there are some problems with the approach.  Trying to splice in an INSERT statement directly into the SELECT plan is going to run into trouble since we would normally do extra processing work to move the INSERT results (which first get written to an intermediate dir for atomicity) to the correct location.&lt;/p&gt;

&lt;p&gt;So either we need to make some changes with the current approach (by using a fetchless query and figuring out the remaining parsecontext merge issues, maybe getting some help from Persistent Systems since they have figured out a lot of complicated splicing), or we need to keep it as INSERT, but instead of trying to splice the operator trees together, we do the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fully compile the INSERT statement all the way into a task list (instead of stopping at the operator tree)&lt;/li&gt;
	&lt;li&gt;add this task list in front of the root tasks for the main select&lt;/li&gt;
	&lt;li&gt;leave the parse context and operator tree for the main select alone (other than sticking in the index inputformat information)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is a little clumsy, but keeps the analysis for the two statements isolated, and would more closely mimic the way the manual approach works.&lt;/p&gt;</comment>
                            <comment id="12996227" author="jvs" created="Fri, 18 Feb 2011 03:06:38 +0000"  >&lt;p&gt;Stop the press; ignore that last comment.  I hacked something up to use the full INSERT compilation, and got that working, but hit the same execution-time error as previously.&lt;/p&gt;

&lt;p&gt;Then I realized that this is because I was running through with the full test case, and there&apos;s a problem with the test case itself:  it contains the manual-mode steps (including explicitly setting HiveCompactIndexInputFormat), and that doesn&apos;t play well with the automatic usage.&lt;/p&gt;

&lt;p&gt;So then I stripped the test case down to just the automatic usage, and it actually seems to be doing something reasonable with the change I mentioned previously.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    pctx.getTopOps().putAll(indexQueryPctx.getTopOps());
    pctx.getTopToTable().putAll(indexQueryPctx.getTopToTable());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Try this test case:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE INDEX src_index ON TABLE src(key) as &apos;COMPACT&apos; WITH DEFERRED REBUILD;
ALTER INDEX src_index ON src REBUILD;

SET hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;

SELECT * FROM src WHERE key=86 ORDER BY key;

DROP INDEX src_index on src;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you change the SELECT to EXPLAIN, the plan looks reasonable.  Of course the execution won&apos;t actually use the index filtering until Jeffery&apos;s change is rolled in.&lt;/p&gt;

&lt;p&gt;So give that a try.&lt;/p&gt;</comment>
                            <comment id="12998147" author="rmelick" created="Wed, 23 Feb 2011 04:06:10 +0000"  >&lt;p&gt;Includes modification of MapReduce tasks to use index input format and broken temp file name.&lt;/p&gt;</comment>
                            <comment id="12998148" author="rmelick" created="Wed, 23 Feb 2011 04:06:25 +0000"  >&lt;p&gt;Like we said, writing the index query to the temp file is broken in patch 2.  I tried to look into the approach you mentioned above: using the already generated tmp file resulting from the SELECT query.&lt;/p&gt;

&lt;p&gt;I set a breakpoint in &lt;tt&gt;org.apache.hadoop.hive.ql.optimizer.GenMapRedUtils.splitTasks&lt;/tt&gt; when executing index_opt_where.q to examine the temp file name, but that method was never executed.  Do you know why?  Even looking through that method, it appears that we only know the directory of the temp file (with &lt;tt&gt;String taskTmpDir = baseCtx.getMRTmpFileURI();&lt;/tt&gt;, and we never know the actual file name. Without the actual name, we cannot set the input config correctly. Is this the right place to be looking?&lt;/p&gt;</comment>
                            <comment id="12998155" author="rmelick" created="Wed, 23 Feb 2011 04:41:09 +0000"  >&lt;p&gt;We also spoke about changing the re-entrant query construction to live within the IndexHandler class.  Unfortunately, the Index object can only give us access to the Handler&apos;s name as a string, not an instance of it (IndexWhereProcessor.rewriteForIndex).  I looked through the codebase some to figure out how classes are loaded from strings, and found several examples of using Class.forName(...).  Any suggestions here?&lt;/p&gt;</comment>
                            <comment id="12998211" author="jvs" created="Wed, 23 Feb 2011 07:33:54 +0000"  >&lt;p&gt;For loading index handlers, see HiveUtils.getIndexHandler.&lt;/p&gt;

&lt;p&gt;For the splitTasks, we&apos;ll have to take a closer look.&lt;/p&gt;</comment>
                            <comment id="12999206" author="rmelick" created="Fri, 25 Feb 2011 03:49:29 +0000"  >&lt;p&gt;Make sure we update the admin configuration page (&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/AdminManual/Configuration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/AdminManual/Configuration&lt;/a&gt;) with the new default autoindex property.&lt;/p&gt;</comment>
                            <comment id="12999254" author="jvs" created="Fri, 25 Feb 2011 07:42:18 +0000"  >&lt;p&gt;I got a boatload of conflicts trying to apply &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.2.patch, and it looks like all kinds of unrelated changes crept into there.&lt;/p&gt;</comment>
                            <comment id="12999531" author="rmelick" created="Fri, 25 Feb 2011 20:22:18 +0000"  >&lt;p&gt;Much cleaner patch, which includes moving the re-entrant QL generation into the IndexHandler.  Still nothing to figure out the tmp file name.&lt;/p&gt;</comment>
                            <comment id="12999664" author="jvs" created="Sat, 26 Feb 2011 00:22:40 +0000"  >&lt;p&gt;I got stuck too trying to figure out the temp file stuff, so here is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.4.patch, which contains the &quot;fully compile the INSERT statement&quot; approach I mentioned above (working at the Task level rather than the Operator level, similar to REBUILD).  It runs through index_opt_where_simple.q fine, and the plan looks reasonable, although I think we still need to add an explicit task dependency.&lt;/p&gt;

&lt;p&gt;The back-pointer to SemanticAnalyzer is a hack; that would need to be cleaned up to instead encapsulate the necessary information interchange inside of ParseContext.  And we still need to deal with automatic generation and cleanup of the temp file directory.&lt;/p&gt;</comment>
                            <comment id="13001208" author="he yongqiang" created="Wed, 2 Mar 2011 00:27:39 +0000"  >&lt;p&gt;did a quick look at the &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.4.patch itself. &lt;/p&gt;

&lt;p&gt;some comments:&lt;br/&gt;
1) add testcase for combinehiveinputformat&lt;br/&gt;
2) in the new testcase, the newly added conf &quot;hive.optimize.autoindex&quot; is not used?&lt;br/&gt;
3) I think there already is an api in Hive.java for getting all indexes on a table, No? Please double check.. If not, rename getIndexesOnTable to getIndexes&lt;br/&gt;
4) in GenMRTableScan1.java, it is not good to hardcode the inputformat name. why not just use indexClassName?&lt;br/&gt;
5) in ExecDriver.java, it is also not good here to hardcode the conf name &quot;hive.index.compact.file&quot;, because bitmap index may want to use a different name. So maybe should pass these work to some index type specific class&lt;br/&gt;
6) in the generateIndexQuery, the temp directory is not a random, so could conflict with others (in the same query), and the dir path should not be generated there, should be generated in the optimizer which can have global control. And if i think &quot;insert overwrite directory &apos;full_path_to_a_dir&apos; select ..&quot; would fail if the full_path_to_a_dir does not exist (or its parent does not exist). please check here&lt;br/&gt;
7) In the genereateIndexQuery, what is this used for?&lt;br/&gt;
+    ParseContext indexQueryPctx = RewriteParseContextGenerator.generateOperatorTree(pctx.getConf(), qlCommand);&lt;/p&gt;


&lt;p&gt;And today the index optimizer is before the breaking task tree. So the index scan task is generated before the task for original table scan. so it is very hard to hook them together. The only i can think is to remember the op id for the original table scan, and do another process to hook them together after breaking task tree. But i think it is too hack.&lt;/p&gt;

&lt;p&gt;Maybe a better way to do it is in the physical optimizer. In physical optimizer, hive presents a task tree. and the optimizer can go through each task, and do the same thing (since each task has the same operator tree). And it will be much easier for managing task dependency. And i think most code will be the same. And for complex queries, this approach will be cleaner.&lt;/p&gt;</comment>
                            <comment id="13001218" author="jvs" created="Wed, 2 Mar 2011 00:57:53 +0000"  >&lt;p&gt;Yongqiang, could you reference where exactly in physical optimization code you&apos;re thinking of?&lt;/p&gt;

&lt;p&gt;Also, do you mean move the entire index optimization there, or only the part about creation of the task dependency?&lt;/p&gt;</comment>
                            <comment id="13001565" author="he yongqiang" created="Wed, 2 Mar 2011 19:26:25 +0000"  >&lt;p&gt;take a look at one physical optimizer, it is pretty straightforward. I think the entire index optimization can be moves there (no big changes needed). &lt;/p&gt;</comment>
                            <comment id="13001584" author="he yongqiang" created="Wed, 2 Mar 2011 19:59:46 +0000"  >&lt;p&gt;Take SkewJoinResolver as an example, in its resolve method, it adds all root tasks to be iterated by the optimizer. (topNodes.addAll(pctx.rootTasks)&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Adding all root task should be good now, but you can add all tasks, and in the second step, look at the table scan operator in the current task, if all table scan ops are not top table scan ops, then skip this task.&lt;/p&gt;

&lt;p&gt;And in the dispatcher, the dispatch is in process of current task. It creates a rule R1 ( the same optimizer coder you have now.) And adds the reducer operator tree to iterate (you may want to add the mapper operator tree.). &lt;/p&gt;

&lt;p&gt;Please let me know if you have any questions. &lt;/p&gt;</comment>
                            <comment id="13001618" author="jvs" created="Wed, 2 Mar 2011 20:43:44 +0000"  >&lt;p&gt;Yongqiang, thanks for the pointer.  Guys, give that a try.  My original thinking for doing it during logical optimization was that it&apos;s similar to the storage handler logic I had added previously, but if you can get it working here, physical optimization makes sense as the place for indexing.&lt;/p&gt;</comment>
                            <comment id="13003080" author="rmelick" created="Sun, 6 Mar 2011 01:09:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.5.path&lt;/p&gt;

&lt;p&gt;I have moved the processing into the PhysicalOptimizer and refactored some of the code into IndexWhereTaskDispatcher.  It follows the patterns of SkewJoinResolver more closely.&lt;/p&gt;

&lt;p&gt;However, this will not run.  In IndexWhereProcessor.rewriteForIndex(...) &lt;span class=&quot;error&quot;&gt;&amp;#91;line 110&amp;#93;&lt;/span&gt;, we call back to the IndexHandler like before.  But, for some reason, the parseContext we&apos;re getting from the physicalContext in IndexWhereResolver does not have a link back to a SemanticAnalyzer.  Any ideas?&lt;/p&gt;

&lt;p&gt;I do think that this is correctly making the tasks dependent though.&lt;/p&gt;</comment>
                            <comment id="13003081" author="jvs" created="Sun, 6 Mar 2011 01:26:45 +0000"  >&lt;p&gt;@Russell:  that would be because of this line in SemanticAnalyzer:&lt;/p&gt;

&lt;p&gt;    PhysicalContext physicalContext = new PhysicalContext(conf,&lt;br/&gt;
        getParseContext(), ctx, rootTasks, fetchTask);&lt;/p&gt;

&lt;p&gt;Note that getParseContext() is creating a new ParseContext instead of reusing one.  You can fix this by moving the setSemanticAnalyzer(this) call into getParseContext.&lt;/p&gt;

&lt;p&gt;(Also note that the setSemanticAnalyzer thing was just a janky way to see something working; we need to come up with a better mechanism.)&lt;/p&gt;
</comment>
                            <comment id="13003091" author="rmelick" created="Sun, 6 Mar 2011 03:54:03 +0000"  >&lt;p&gt;New patch fixes the NPE by linking the SemanticAnalyzer into the parseContext per John&apos;s comment.&lt;/p&gt;

&lt;p&gt;Also updated unit test to turn off automatic indexing so it doesn&apos;t crash when manually using index.  Should probably check somewhere in the code instead.&lt;/p&gt;</comment>
                            <comment id="13003645" author="jvs" created="Mon, 7 Mar 2011 22:04:03 +0000"  >&lt;p&gt;I&apos;m not sure about those task dependencies...the EXPLAIN output looks wonky.&lt;/p&gt;</comment>
                            <comment id="13004395" author="rmelick" created="Wed, 9 Mar 2011 06:41:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1744&quot; title=&quot;Remove empty query test files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1744&quot;&gt;HIVE-1744&lt;/a&gt;.7.patch:&lt;/p&gt;

&lt;p&gt;@Yongqiang, I fixed the problems in GenMRTableScal1.java, and think I have dealt with most of your comments.  I&apos;m confused about what you mean with the combinehiveinputformat.&lt;/p&gt;

&lt;p&gt;@John, I made a first attempt at factoring SemanticAnalyzer calls into the ParseContext, but would appreciate your input.  This patch will also fail the unit test index_opt_where_simple.q as it stands.  However, if you remove the lines that attempt to use manual indexing, it succeeds.  The test that succeeds looks like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INDEX&lt;/span&gt; src_index &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; src(&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;COMPACT&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;DEFERRED&lt;/span&gt; REBUILD;
&lt;span class=&quot;code-keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INDEX&lt;/span&gt; src_index &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; src REBUILD;

&lt;span class=&quot;code-keyword&quot;&gt;SET&lt;/span&gt; hive.&lt;span class=&quot;code-keyword&quot;&gt;optimize&lt;/span&gt;.autoindex=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;EXPLAIN&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; src &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;=86 &lt;span class=&quot;code-keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; src &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;=86 &lt;span class=&quot;code-keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;;

&lt;span class=&quot;code-keyword&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INDEX&lt;/span&gt; src_index &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; src;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It appears as if our regular expression that identifies WHERE clauses by looking for FIL operators (filters) may not be specific enough.  I think the remaining errors might be caused by trying to generate index queries for both the {{&lt;/p&gt;
{SELECT ... FROM src}
&lt;p&gt;}} (as desired), and the {{&lt;/p&gt;
{SELECT ... FROM default__src_src_index__}
&lt;p&gt;}} that we generated, which is a problem.&lt;/p&gt;</comment>
                            <comment id="13004887" author="jvs" created="Thu, 10 Mar 2011 00:07:56 +0000"  >&lt;p&gt;The test is failing because you forgot to add&lt;/p&gt;

&lt;p&gt;SET hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;&lt;/p&gt;

&lt;p&gt;before running the autoindex portion.&lt;/p&gt;

&lt;p&gt;The ParseContext change looks OK to me if no one else comes up with anything better during review.&lt;/p&gt;

&lt;p&gt;I think what Yongqiang&apos;s combinehiveinputformat comment meant was that you should run the autoindex portion twice; once with&lt;/p&gt;

&lt;p&gt;SET hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;&lt;/p&gt;

&lt;p&gt;and again with&lt;/p&gt;

&lt;p&gt;SET hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;&lt;/p&gt;

&lt;p&gt;to verify that both work as expected.&lt;/p&gt;</comment>
                            <comment id="13008304" author="rmelick" created="Fri, 18 Mar 2011 03:17:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.8.patch&lt;/p&gt;

&lt;p&gt;Fixed unit tests per John and Yonqiang.  Cleaned up comments.  Ready for review.  I still have a few questions that are probably best answered in the review:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;When we have multiple indexes, and we get different tasks lists from querying each index, what should we do?  Right now we use all tasks (IndexWhereProcessor.java:57)&lt;/li&gt;
	&lt;li&gt;Is it possible to improve the regex we use so that it only matches WHERE clauses?  Right now we use FIL to get to the WHERE (IndexWhereTaskDispatcher.java:141)&lt;/li&gt;
	&lt;li&gt;What comparison operators should we support?  Right now it&apos;s only &amp;lt;, &amp;gt;, and =.  We don&apos;t have &amp;lt;= or &amp;gt;= (CompactIndexHandler.java:272)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Should I put this into the reviewboard?&lt;/p&gt;</comment>
                            <comment id="13008323" author="jvs" created="Fri, 18 Mar 2011 04:21:03 +0000"  >&lt;p&gt;Russell, the plan still looks wrong.  It shows two stage 1&apos;s, with a dependency from one to the other.  The stage numbers should be unique, so probably this is due to the way we merge the two queries?&lt;/p&gt;</comment>
                            <comment id="13009039" author="rmelick" created="Mon, 21 Mar 2011 06:47:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.9.patch&lt;/p&gt;

&lt;p&gt;Added task relabeling to the addDependentTask method in Task.java.  It still seems like we&apos;re generating our re-entrant index query twice.  Yonqiang, I think we end up calling IndexWhereTaskDispatcher.dispatch twice as often as we want, which causes us to process the operator tree twice.&lt;/p&gt;</comment>
                            <comment id="13009261" author="he yongqiang" created="Mon, 21 Mar 2011 18:25:04 +0000"  >&lt;p&gt;a few comments:&lt;br/&gt;
rename work.getInputFormatFile to work.getIndexInputFile() or IndexIntermediateFile. and remove LOG from IndexWhereResolver&lt;/p&gt;

&lt;p&gt;IndexWhereTaskDispatcher:&lt;br/&gt;
findTableScanOps in IndexWhereTaskDispatcher is empty.&lt;br/&gt;
indexesOnTable in IndexWhereTaskDispatcher should be mapper&amp;lt;table, list&amp;lt;index&amp;gt;&amp;gt; because there could be more than one table scanned in one task.&lt;br/&gt;
In getIndexes, use -1 instead of 1024&lt;/p&gt;

&lt;p&gt;The reason of duplicate plan is because today&apos;s hive apply filter twice, you can verify that by a simple &quot;explain select key from src where key=86;&quot;. This is to be fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1538&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1538&lt;/a&gt;. So i guess what you can process the task only one time by remembering it in the IndexWhereProcCtx. &lt;br/&gt;
And i noticed that the patch added all new tasks as root tasks, but keep the child task (the old root task) remain in root task. That may cause problem. So i guess the old task can just be removed from root task once a new parent task is added to root task.&lt;/p&gt;</comment>
                            <comment id="13010014" author="rmelick" created="Wed, 23 Mar 2011 06:27:40 +0000"  >&lt;p&gt;Yongqiang, I think I fixed the double processing by using a different regular expression.  I use FIL%SEL% instead of just FIL%.  I have also fixed the other comments.  After you look over it, I think it&apos;s ready for a reviewboard.&lt;/p&gt;</comment>
                            <comment id="13010285" author="he yongqiang" created="Wed, 23 Mar 2011 18:49:19 +0000"  >&lt;p&gt;Hi Russell,&lt;/p&gt;

&lt;p&gt;FIL%SEL% maybe not not good enough, how about a TBL%FIL?&lt;/p&gt;

&lt;p&gt;Also just had an offline talk with Namit. Namit proposed some very good ideas for this task:&lt;/p&gt;

&lt;p&gt;1. check index exists or not. For a query on partitioned tables, index optimizer should try to find out indexes do exists on all partitions which the original task is scanning.  This information can be found in ParseContext&apos;s OpToPartList.&lt;/p&gt;

&lt;p&gt;2. add more parameters to config whether to use the index or not. (like if the filter is a &amp;gt;, not use the index. size of inputs is bigger than some value, not use index)&lt;/p&gt;

&lt;p&gt;3. In case the index is not good (like even after scanning the index, it still needs to scan the whole base table), just do not use it, and go back to scan the whole base table. This can be done by adding a conditional task and a backup task. And how to detecting the index is good or not can be done by monitoring the index job&apos;s number of input records and number of output records, and compare them. let&apos;s say that if the ratio is &amp;gt;50, do not use the index. Kill the index job, and go back to scanning the whole base table. 3) can be done in a followup jira if you want.&lt;/p&gt;
</comment>
                            <comment id="13010401" author="namit" created="Wed, 23 Mar 2011 20:33:56 +0000"  >&lt;p&gt;Also, can you add another check - only use the index if the size of the input is greater than a certain&lt;br/&gt;
size (5G - make it configurable). This can be a check per index type - bitmap indices can have a similar&lt;br/&gt;
check.&lt;/p&gt;

&lt;p&gt;As Yongqiang said, 3. can be a follow-up task.&lt;/p&gt;</comment>
                            <comment id="13012387" author="rmelick" created="Tue, 29 Mar 2011 08:36:18 +0000"  >&lt;ul&gt;
	&lt;li&gt;I don&apos;t think that my method of relabeling the tasks works correctly (renumberTasks(...) in Task.java).  It also seems like the labels do not affect the run-time execution.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I haven&apos;t had a chance to write a unit test that uses partitions on an index, so I haven&apos;t really looked at how the code will perform (IndexWhereProcessor:66). I&apos;m not really sure how indexes change once there are partitions. Is index_compact_2.q a reasonable starting place for a partitioned index test?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Using the TS%FIL instead of FIL%SEL seems to work nicely, as it gives easy access to the table scan operator.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I created the followup &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2081&quot; title=&quot;Prevent automatic indexing from creating worse queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2081&quot;&gt;HIVE-2081&lt;/a&gt; ticket for #3 from above.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13014394" author="rmelick" created="Fri, 1 Apr 2011 04:54:12 +0000"  >&lt;p&gt;I&apos;m having trouble getting the partitions from an Index.  I do not know how to get back to the index table, so I cannot use getPartCols()&lt;/p&gt;

&lt;p&gt;I would like to do something like this, but I don&apos;t know how to get the indexTable.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Index index : indexes.get(part.getTable())) {
        Table indexTable;
        indexTable = ???
        List&amp;lt;FieldSchema&amp;gt; indexPartitions = indexTable.getPartCols();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FieldSchema col : part.getCols()) {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (! indexPartitions.contains(col)) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
          }
        }
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13014398" author="he yongqiang" created="Fri, 1 Apr 2011 05:16:07 +0000"  >&lt;p&gt;You have the list of partitions for the original table, and you just need to found out those partition names exists or not on the index table. So with &quot;getParitionByName()&quot; (pls check the code to find out the exact name) should work. &lt;/p&gt;</comment>
                            <comment id="13014799" author="jvs" created="Fri, 1 Apr 2011 19:25:10 +0000"  >&lt;p&gt;@Russell:  index.getIndexTableName(), and then do additional metastore lookups to retrieve whatever you need.&lt;/p&gt;</comment>
                            <comment id="13016701" author="rmelick" created="Thu, 7 Apr 2011 05:27:54 +0000"  >&lt;p&gt;Includes check to make sure that all partitions in the query exist on the index table.&lt;/p&gt;

&lt;p&gt;Review board available at &lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13016702" author="jiraposter@reviews.apache.org" created="Thu, 7 Apr 2011 05:28:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_opt_where.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_opt_where_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_opt_where_simple.q PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;br/&gt;
  conf/hive-default.xml c42197f &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Russell&lt;/p&gt;
</comment>
                            <comment id="13017163" author="jvs" created="Thu, 7 Apr 2011 21:40:40 +0000"  >&lt;p&gt;I added comments in review board.&lt;/p&gt;</comment>
                            <comment id="13017164" author="jiraposter@reviews.apache.org" created="Thu, 7 Apr 2011 21:41:06 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review399&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review399&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment748&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment748&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    For consistency with my review in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1694&quot; title=&quot;Accelerate GROUP BY execution using indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1694&quot;&gt;&lt;del&gt;HIVE-1694&lt;/del&gt;&lt;/a&gt;, I suggest hive.optimize.index.filter as the name for this configuration parameter.&lt;/p&gt;

&lt;p&gt;    (In &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1694&quot; title=&quot;Accelerate GROUP BY execution using indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1694&quot;&gt;&lt;del&gt;HIVE-1694&lt;/del&gt;&lt;/a&gt; I suggested hive.optimize.index.groupby, and we want it to be possible to enable/disable them independently)&lt;/p&gt;




&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment749&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment749&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    In line with the previous comment, suggest hive.optimize.index.filter.compact.minSize/maxSize.&lt;/p&gt;

&lt;p&gt;    Namit&apos;s suggestion for minSize was 5G.&lt;/p&gt;

&lt;p&gt;    I think the default for maxSize should be infinity (I can&apos;t think of a case where we want it in effect by default).&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment750&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment750&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1803&quot; title=&quot;Implement bitmap indexing in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1803&quot;&gt;&lt;del&gt;HIVE-1803&lt;/del&gt;&lt;/a&gt; is changing this to hive.index.blockfilter.file.  Assuming that gets committed first, we should use that, since it&apos;s generic rather than tied to the index type.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment751&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    What are the units here?  Also, don&apos;t use colon after parameter name.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment752&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment752&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The non-functional changes in this file are gonna conflict with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1803&quot; title=&quot;Implement bitmap indexing in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1803&quot;&gt;&lt;del&gt;HIVE-1803&lt;/del&gt;&lt;/a&gt;, so get rid of them.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment755&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment755&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Use HiveUtils.unparseIdentifier for quoting table names in generated SQL.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment756&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment756&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Isn&apos;t it incorrect to set properties on the original table scan here since this is only tentative?&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment757&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment757&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Likewise, modifying inputs is incorrect before we have a definite plan.&lt;/p&gt;

&lt;p&gt;    Some more work on the new HiveIndexHandler interface method is required for resolving this plus the residuals.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment753&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment753&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    If searchConditions.size() == 0, it means we didn&apos;t find anything which could be handled by the index.  In that case, we should bail out immediately and not try to do anything more with this index.&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment759&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment759&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We collect the residual here, but we don&apos;t do anything with it.  Don&apos;t we need to pass it back so that Hive can decide what to leave in the Filter operator?&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment760&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment760&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The list actually contains index objects, not index table names.  Also typo: &quot;is exists&quot;&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment761&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment761&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Only cast once.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment764&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment764&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Indentation is wrong here.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment763&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment763&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    In my review for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1694&quot; title=&quot;Accelerate GROUP BY execution using indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1694&quot;&gt;&lt;del&gt;HIVE-1694&lt;/del&gt;&lt;/a&gt;, I noted that we should not be swallowing exceptions.  I think some of this code was copied from there.  If we can&apos;t access the metastore during optimization, it should be treated as a fatal error.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment765&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment765&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The plan still looks wrong (there are two Stage-0&apos;s, one for the index scan, one for the final fetch), so the relabeling is still not quite working correctly.&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment766&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment766&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    no space after !&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment767&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment767&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Suggested rename for method:  arePartitionsCoveredByIndex&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment768&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This checks that the metadata matches.  But it does not actually check that the index partitions exist.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment769&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment769&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is that true?  Why couldn&apos;t index be used to optimize a map-only task?&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment770&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment770&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    As noted above, we DO want to fail here.&lt;/p&gt;



&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment772&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Could you add more tests for cases where automatic indexing should decide not to kick in:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;index can&apos;t be used because of min/max size config&lt;/li&gt;
	&lt;li&gt;index can&apos;t be used because predicate isn&apos;t supported&lt;/li&gt;
	&lt;li&gt;index can&apos;t be used columns aren&apos;t covered&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Also:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;case where multiple indexes apply and we pick one (currently arbitrarily, but make sure it&apos;s at least deterministic so that test doesn&apos;t become flaky)&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where_partitioned.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment771&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Could you add a test which shows the index NOT being used in the case where required partitions haven&apos;t been built yet?&lt;/p&gt;




&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment773&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment773&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Here&apos;s the duplicate Stage-0 I referred to in the code.&lt;/p&gt;



&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-07 05:27:22, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-07 05:27:22)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where_simple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml c42197f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13020231" author="jiraposter@reviews.apache.org" created="Fri, 15 Apr 2011 08:08:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-04-15 08:08:14.640798)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.13.patch&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;br/&gt;
  conf/hive-default.xml c42197f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_opt_where.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_opt_where_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_opt_where_simple.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Russell&lt;/p&gt;
</comment>
                            <comment id="13020233" author="jiraposter@reviews.apache.org" created="Fri, 15 Apr 2011 08:20:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review472&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review472&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment953&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment953&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I would have liked to just make a copy of pctx before I called rewriteForIndex(...) for every index, and then just use whichever of those corresponded to the index rewrite we chose.  However, the pctx did not seem to have an easy way to copy it.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment957&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment957&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Do we need to propagate the residual predicate any further?&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment955&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment955&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m kind of confused about how to check the actual table and not the metadata.  When we call indexTable.getPartitionKeys() and part.getTable.getPartitionKeys(), that method calls getPartitionKeys() on the underlying Thrift Tables.  Is there a way besides getPartitionKeys() that we should be using?&lt;/p&gt;



&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment956&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment956&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I have not yet added the additional unit tests&lt;/p&gt;



&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment954&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment954&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I fixed the labeling for this case, but would it make sense to label our stages differently for indexing?  We only relabel correctly as long as we&apos;re overwriting the highest numbered stage, since we only relabel a single task.  Or, should it relabel all tasks in the whole plan?  We only have easy access to the context.currentTask when we iterate through in IndexWhereProcessor (line 153)&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Russell&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-15 08:08:14, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-15 08:08:14)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml c42197f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where_simple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13020234" author="rmelick" created="Fri, 15 Apr 2011 08:21:59 +0000"  >&lt;p&gt;I have several questions on the review board.  I also fixed the minor issues, but have not yet created the new unit tests.&lt;/p&gt;</comment>
                            <comment id="13020422" author="jiraposter@reviews.apache.org" created="Fri, 15 Apr 2011 20:34:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review482&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review482&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment982&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment982&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    A few comments here.&lt;/p&gt;

&lt;p&gt;    1) Rather than passing in the entire table scan object and letting the handler set properties on it, I think we should just have the handler pass back the necessary information (input format and intermediate file).&lt;/p&gt;

&lt;p&gt;    2) The generateIndexQuery method&apos;s parameter list is growing.  For plugin interfaces, a good pattern we&apos;ve been using in other places is to introduce a new context class (say HiveIndexQueryContext) with getters and setters for the information to be communicated in both directions.  Then the caller instantiates one of these and passes in an instance.  The plugin reads and writes to the context.  On return, the caller gets the modified information out.  The main benefit is that in the future, if we need to pass more information, we just add new members to the context class, and none of the existing plugin implementations break.&lt;/p&gt;

&lt;p&gt;    In this case, you could also put the context objects in a map (instead of having to keep multiple maps indexQueryTasks/additionalInputs etc).&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment983&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment983&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Just put it as a TODO for now; create the followup JIRA issue and reference it in the TODO.&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment990&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment990&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Look in Hive.java; there are methods like&lt;/p&gt;

&lt;p&gt;    public List&amp;lt;Partition&amp;gt; getPartitionsByNames(Table tbl, List&amp;lt;String&amp;gt; partNames)&lt;/p&gt;

&lt;p&gt;    which look up the actual partitions for a table from the metastore.  You can pass in indexTable.&lt;/p&gt;




&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment991&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment991&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Hmm...what if we could avoid relabeling altogether?  If you look in Driver.java, there&apos;s a method compile which calls TaskFactory.resetId().  This is what causes us to start back over from 0.&lt;/p&gt;

&lt;p&gt;    If you add an optional parameter resetTaskIds=true, and then pass false for the Driver instance used for compiling the reentrant query, that might do it.&lt;/p&gt;





&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-15 08:08:14, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-15 08:08:14)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml c42197f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_opt_where_simple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13020423" author="jvs" created="Fri, 15 Apr 2011 20:35:12 +0000"  >&lt;p&gt;Responses added in review board.&lt;/p&gt;</comment>
                            <comment id="13020560" author="jiraposter@reviews.apache.org" created="Sat, 16 Apr 2011 06:06:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-04-16 06:04:26.681814)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.14.patch&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;br/&gt;
  conf/hive-default.xml c42197f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java 14015d0 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Russell&lt;/p&gt;
</comment>
                            <comment id="13020561" author="rmelick" created="Sat, 16 Apr 2011 06:11:12 +0000"  >&lt;p&gt;Include new unit tests.  Also asked a few more questions on the review board.&lt;/p&gt;</comment>
                            <comment id="13020562" author="jiraposter@reviews.apache.org" created="Sat, 16 Apr 2011 06:12:06 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review492&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review492&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment998&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment998&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Still need to change hive.index.compact.file to hive.index.blockfilter.file , but hopefully bitmap gets committed soon.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment997&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment997&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m not sure the way I&apos;m doing it currently will work with partitions.  I don&apos;t take them into account when generating the index query.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1000&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    see later comment about why this abort needs to be skipped for anything to run.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment999&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment999&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This doesn&apos;t seem to work (it always returns false here).  This checks whether the partitions equal each other, which I don&apos;t think can happen since they&apos;re on different tables.  What information in a partition do I need to be checking?&lt;/p&gt;



&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment995&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment995&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is there a multiple column table?  Or, what&apos;s the best way to create a multi-column table and populate it with data?  I can&apos;t figure out a good way to query the value column, so the src table seems less than ideal.&lt;/p&gt;



&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment996&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment996&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    How do unbuilt partitions work?  I didn&apos;t see any way to delay the building, so I don&apos;t know how to have an index with unbuilt partitions.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Russell&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-16 06:04:26, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-16 06:04:26)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml c42197f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java 14015d0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13021184" author="jiraposter@reviews.apache.org" created="Mon, 18 Apr 2011 19:25:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review494&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review494&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;conf/hive-default.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1019&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1019&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    BTW, these property names should be all-lowercase.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1022&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1022&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    When you add an overload, add Javadoc as well (including the new param&apos;s meaning).&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1020&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1020&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Could you explain the usage interaction better (along the lines of what I explained in my review comment)?&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1021&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1021&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    You&apos;re right.  Either we need to treat them as index columns (so that the predicates on them will automatically be collected by the predicate analyzer), or we need to explicitly generate corresponding equality predicates based on the partition values which have already been identified by partition pruning.&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1024&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1024&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    From an efficiency perspective, you certainly don&apos;t want to be doing this over and over inside the outer for loop; just do it once first outside.&lt;/p&gt;

&lt;p&gt;    Also, for a table with a huge number of partitions, fetching all of them is a bad idea; it&apos;s better to selectively query the partitions of interest (but batching them if possible).&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1023&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1023&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This doesn&apos;t work because the Partition class does not override the default Java equals method (which is based on object identity rather than value), and different metastore queries return different object instances for the same underlying entity.&lt;/p&gt;



&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1025&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t understand what you mean?  src has two columns, key and value.&lt;/p&gt;



&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1026&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1026&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    From the index design doc, there&apos;s an optional PARTITION clause when rebuilding an index which allows you to build just one specific partition, leaving the others unbuilt.  I think there are some examples in the unit tests.&lt;/p&gt;

&lt;p&gt;    ALTER INDEX index_name ON table_name [ PARTITION (...) ] REBUILD&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-16 06:04:26, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-16 06:04:26)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml c42197f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java 14015d0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13021190" author="jiraposter@reviews.apache.org" created="Mon, 18 Apr 2011 19:31:06 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review495&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review495&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1027&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Oh, and reading your original comment more carefully:  yeah, they are two separate entities (one for the table partition, and one for the index partition), so even if the equals method were tied to metastore object identity, it still wouldn&apos;t work.&lt;/p&gt;

&lt;p&gt;    The getSpec() method on the Partition class is what gives you the actual key/value pairs for the partition, suitable for comparison.&lt;/p&gt;



&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-16 06:04:26, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-16 06:04:26)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java a21f589 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml c42197f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java 14015d0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 6437385 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 937a7b3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java f0aca84 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_opt_where_simple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13021191" author="jvs" created="Mon, 18 Apr 2011 19:31:52 +0000"  >&lt;p&gt;Responses added in review board.&lt;/p&gt;</comment>
                            <comment id="13023096" author="jiraposter@reviews.apache.org" created="Fri, 22 Apr 2011 03:51:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-04-22 03:50:54.602032)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.15.patch&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 2cdaeb6 &lt;br/&gt;
  conf/hive-default.xml 79ea477 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 69ee03b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 374e123 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java c41bb32 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Russell&lt;/p&gt;
</comment>
                            <comment id="13023098" author="jiraposter@reviews.apache.org" created="Fri, 22 Apr 2011 03:53:06 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review528&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review528&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1094&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1094&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    When we run a query on a non-partitioned table, we get a single partition in queryPartitions of the whole table (with an empty partSpec).  Then, when we add the partition columns to the list of indexed column, we end up adding all the columns in the src table, instead of just the partitioned ones.  If we make sure the partSpec isn&apos;t empty, this doesn&apos;t happen.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1095&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1095&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We need to cast the work in this task to MapredWork in order to get the input size out (line 176).  I&apos;m not sure if this is the best place to do that checking.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1096&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1096&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    See above comment about MapredWork&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Russell&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-22 03:50:54, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-22 03:50:54)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 2cdaeb6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 79ea477 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 69ee03b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 374e123 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java c41bb32 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13023099" author="rmelick" created="Fri, 22 Apr 2011 03:53:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.15.patch&lt;/p&gt;

&lt;p&gt;Few remaining comments on reviewboard.&lt;/p&gt;</comment>
                            <comment id="13023362" author="jvs" created="Fri, 22 Apr 2011 19:57:53 +0000"  >&lt;p&gt;Looks good, I added a few minor comments and requests for followup creation.&lt;/p&gt;</comment>
                            <comment id="13023365" author="jiraposter@reviews.apache.org" created="Fri, 22 Apr 2011 19:58:06 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review530&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review530&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1106&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1106&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Create a followup task for dealing with jobs which access multiple tables.  For that, we need to associate the index formats/files with specific tables, and that requires modifying the way the index input format works.&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1105&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1105&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Create a followup task for displaying these in the plan (to indicate that a table scan&apos;s input is being filtered by the intermediate file).  We only want to do that when they are non-null (to avoid upsetting all the existing test reference files).&lt;/p&gt;





&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1099&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1099&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    spacing&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1100&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1100&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    spacing&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1102&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1102&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    spacing&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1101&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1101&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    When logging errors being propagated, use the two-arg version of the method and pass e as the second arg.  Same thing in a few other places.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1103&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    curly bracket placement&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1104&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1104&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    create a followup for this one&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1098&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1098&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is not an error, just a condition that prevents usage of the index, so it should be logged as info rather than error.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-22 03:50:54, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-22 03:50:54)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 2cdaeb6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 79ea477 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 69ee03b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 374e123 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java c41bb32 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13023513" author="jiraposter@reviews.apache.org" created="Sat, 23 Apr 2011 06:43:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-04-23 06:41:49.007802)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.16.patch&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 2cdaeb6 &lt;br/&gt;
  conf/hive-default.xml 79ea477 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 69ee03b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 374e123 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java c41bb32 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_test_if_used.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_test_if_used.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Russell&lt;/p&gt;
</comment>
                            <comment id="13023514" author="jiraposter@reviews.apache.org" created="Sat, 23 Apr 2011 06:47:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review533&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1110&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1110&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I thought this might what caused the original table to be used, instead of the stale index.  By adding the index table, we keep the original table around.  However, clearing the inputs before adding the index table didn&apos;t change anything.&lt;/p&gt;



&lt;p&gt;ql/src/test/results/clientpositive/index_auto_test_if_used.q.out&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1109&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1109&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We shouldn&apos;t be seeing this output.  We&apos;re still generating the right plan, but something is wrong when we run it.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Russell&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-23 06:41:49, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-23 06:41:49)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 2cdaeb6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 79ea477 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 69ee03b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1f01446 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 374e123 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java c41bb32 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_test_if_used.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_test_if_used.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13023515" author="rmelick" created="Sat, 23 Apr 2011 06:48:23 +0000"  >&lt;p&gt;Patch 16&lt;/p&gt;

&lt;p&gt;One last problem.  It doesn&apos;t appear the index is actually used.  I tried looking a little bit at the hadoop logs, but I don&apos;t really know what I&apos;m looking for.  I left a comment on the reviewboard.&lt;/p&gt;</comment>
                            <comment id="13025388" author="jvs" created="Tue, 26 Apr 2011 19:14:40 +0000"  >&lt;p&gt;Yeah, when I look in build/ql/tmp/hive.log after running index_auto_test_if_used.q, I see&lt;/p&gt;

&lt;p&gt;-jobconf hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat&lt;/p&gt;

&lt;p&gt;in the parameters to the spawned job.  So it looks like you haven&apos;t got the plumbing all the way through to the end?&lt;/p&gt;

&lt;p&gt;Also, the patch is going to need to be rebased since the commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1803&quot; title=&quot;Implement bitmap indexing in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1803&quot;&gt;&lt;del&gt;HIVE-1803&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13026789" author="jiraposter@reviews.apache.org" created="Fri, 29 Apr 2011 00:02:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-04-29 00:01:06.921150)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.17.patch&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java f77f46c &lt;br/&gt;
  conf/hive-default.xml 6bd615e &lt;br/&gt;
  eclipse-templates/.classpath 8d2dc52 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 24e16e4 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java f90d64f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 374e123 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 2207ac4 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_test_if_used.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_test_if_used.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Russell&lt;/p&gt;
</comment>
                            <comment id="13026790" author="jiraposter@reviews.apache.org" created="Fri, 29 Apr 2011 00:04:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/#review610&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#review610&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1253&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1253&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This does not work because the GenMRTableScan1.process() does not get called on these objects after we set these, as far as I can tell.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/558/#comment1254&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/#comment1254&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    At this point, the inputFormat for this work is actually null.  I do not know which work I need to change the inputFormat for, and I can&apos;t think of an easy way to get to other work.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Russell&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-29 00:01:06, Russell Melick wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-29 00:01:06)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java f77f46c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 6bd615e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;eclipse-templates/.classpath 8d2dc52 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 24e16e4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java c02d90b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java f90d64f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 6162676 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 374e123 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 2207ac4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 73391e9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_test_if_used.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_test_if_used.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Russell&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13026791" author="rmelick" created="Fri, 29 Apr 2011 00:06:03 +0000"  >&lt;p&gt;patch 17&lt;/p&gt;

&lt;p&gt;Updated to include &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1803&quot; title=&quot;Implement bitmap indexing in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1803&quot;&gt;&lt;del&gt;HIVE-1803&lt;/del&gt;&lt;/a&gt;.  Still cannot figure out why I cannot set the inputFormat, but I think the real reason is I cannot find the correct MapredWork.  The one I am setting it on begins with inputFormat=null.  Left a comment on the reviewboard in IndexWhereProcessor.&lt;/p&gt;</comment>
                            <comment id="13026813" author="jvs" created="Fri, 29 Apr 2011 02:28:46 +0000"  >&lt;p&gt;OK, I dug into this and found out what&apos;s going on.&lt;/p&gt;

&lt;p&gt;As you mentioned in the conf call, the order of operations in SemanticAnalyzer.genMapRedTasks is such that physical optimization happens after GenMRTableScan1.  So the code in GenMRTableScan1 is totally irrelevant and can be removed.&lt;/p&gt;

&lt;p&gt;You are setting the input format and intermediate file on the correct work object already inside of IndexWhereProcessor.&lt;/p&gt;

&lt;p&gt;What&apos;s going wrong is that the test is using MapRedTask instead of its superclass ExecDriver.  And MapRedTask is missing the code to propagate the attributes from the work into the job conf.  So we need to make this code from ExecDriver into a helper method setInputAttributes:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    if (work.getInputformat() != null) {
      HiveConf.setVar(job, HiveConf.ConfVars.HIVEINPUTFORMAT, work.getInputformat());
    }
    if (work.getIndexIntermediateFile() != null) {
      job.set(&quot;hive.index.compact.file&quot;, work.getIndexIntermediateFile());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then invoke setInputAttributes from within MapRedTask.execute, just before the &quot;// enable assertion&quot; comment.&lt;/p&gt;

&lt;p&gt;When I do this, then I can see the correct input format and intermediate file being set on the spawned job.  (Speaking of the intermediate file, can we get rid of /tmp/index_banana?  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The test passes with or without this change, indicating there could still be some other problem (since the point of the test is to demonstrate different behavior when the index is being used).  However, I&apos;m not sure about the test itself since it is now using a range condition where before it was using an equality condition, and block-level indexing means a block could contain the extra values as long as a single value (47 in this case) is hit by the index.  But you&apos;re using text files for some reason, and I still don&apos;t know exactly how the &quot;blocks&quot; work there.&lt;/p&gt;</comment>
                            <comment id="13026844" author="rmelick" created="Fri, 29 Apr 2011 05:05:21 +0000"  >&lt;p&gt;patch 18&lt;/p&gt;

&lt;p&gt;I moved that logic into a helper method, but I&apos;m not seeing the settings being changed in build/ql/tmp/hive.log&lt;/p&gt;

&lt;p&gt;When I have the unit test use a predicate like key=86 instead of key &amp;gt; 45 AND key &amp;lt; 55, I see the following error&lt;br/&gt;
{{{&lt;br/&gt;
  java.lang.IllegalArgumentException: Can not create a Path from an empty string&lt;br/&gt;
	at org.apache.hadoop.fs.Path.checkPathArg(Path.java:82)&lt;br/&gt;
	at org.apache.hadoop.fs.Path.&amp;lt;init&amp;gt;(Path.java:90)&lt;br/&gt;
	at org.apache.hadoop.util.StringUtils.stringToPath(StringUtils.java:224)&lt;br/&gt;
	at org.apache.hadoop.mapred.FileInputFormat.setInputPaths(FileInputFormat.java:282)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.index.HiveIndexedInputFormat.getSplits(HiveIndexedInputFormat.java:123)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:810)&lt;br/&gt;
...&lt;br/&gt;
}}}&lt;/p&gt;

&lt;p&gt;It seems like this is causing a problem when there are no blocks to return.&lt;/p&gt;</comment>
                            <comment id="13026855" author="jvs" created="Fri, 29 Apr 2011 05:31:03 +0000"  >&lt;p&gt;hive.log:  did you look at the very last job in the log after the run?  That is the one that uses the index.&lt;/p&gt;

&lt;p&gt;If you&apos;re seeing it using HiveIndexedInputFormat in the crash, that means that it &lt;b&gt;is&lt;/b&gt; using the index, right?  Progress!&lt;/p&gt;

&lt;p&gt;As for the crash itself, sounds like a corner case for empty results.  Does the same thing happen for manual index usage?&lt;/p&gt;
</comment>
                            <comment id="13027112" author="rmelick" created="Fri, 29 Apr 2011 18:15:15 +0000"  >&lt;p&gt;I&apos;ve attached the hive.log I get from running&lt;/p&gt;

&lt;p&gt;{{{&lt;br/&gt;
ant test -Dtestcase=TestCliDriver -Dqfile=index_auto_test_if_used.q&lt;br/&gt;
}}}&lt;/p&gt;

&lt;p&gt;I still am only seeing input formats of org.apache.hadoop.hive.ql.io.HiveInputFormat and org.apache.hadoop.hive.ql.io.CombineHiveInputFormat&lt;/p&gt;


&lt;p&gt;But, the good news (I guess) is that the splits exception also happens when using the index manually&lt;/p&gt;</comment>
                            <comment id="13027141" author="jvs" created="Fri, 29 Apr 2011 19:00:02 +0000"  >&lt;p&gt;Oh, I see...the reason it didn&apos;t work for you is that your setInputAttributes method is working on the job object.  For MapRedTask, it needs to work on the conf object instead.  So make it take an input parameter and pass in job from ExecDriver, and conf from MapRedTask.&lt;/p&gt;

&lt;p&gt;Since the splits exception happens for both manual/auto, we don&apos;t need to try to address it as part of this JIRA, so you can open a followup for that.  But it means you won&apos;t be able to check in a meaningful test case, so better if you have a fix.  When newInputPaths.toString() == &quot;&quot;, you could try calling FileInputFormat.setInputPaths(job, new Path&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;).  I&apos;m not sure whether that will work.&lt;/p&gt;</comment>
                            <comment id="13027283" author="rmelick" created="Sat, 30 Apr 2011 03:54:27 +0000"  >&lt;p&gt;I can send it back out of the index handler, and that seems to function correctly.&lt;br/&gt;
{{{&lt;br/&gt;
      if (newInputPaths.length() == 0) &lt;/p&gt;
{
        return super.getSplits(job, numSplits);
      }
&lt;p&gt; else &lt;/p&gt;
{
        FileInputFormat.setInputPaths(job, newInputPaths.toString());
      }
&lt;p&gt;}}}&lt;br/&gt;
But, this means that we won&apos;t use the index to get the splits, so I don&apos;t think our test will work anymore.  It will return results from the base table.  This feels like the correct behavior in the long term, even though it breaks the test.&lt;/p&gt;</comment>
                            <comment id="13027286" author="jvs" created="Sat, 30 Apr 2011 04:00:14 +0000"  >&lt;p&gt;The correct behavior is to not do any work at all (it would be sad to scan the whole table when the index already told us there is nothing there).  Setting an empty array of paths didn&apos;t work?&lt;/p&gt;

&lt;p&gt;I believe in some cases for other kinds of execution, we create an empty file and scan that.  I forget where the code for that lives.&lt;/p&gt;</comment>
                            <comment id="13027294" author="rmelick" created="Sat, 30 Apr 2011 05:51:19 +0000"  >&lt;p&gt;Unfortunately, having an empty array gives out of bounds exceptions.&lt;/p&gt;

&lt;p&gt;{{&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 0&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.FileInputFormat.setInputPaths(FileInputFormat.java:309)&lt;br/&gt;
}}&lt;/p&gt;

&lt;p&gt;I tried looking through the code at other places we call setInputPaths. In a few places, we create a directory by calling&lt;/p&gt;

&lt;p&gt;{{&lt;br/&gt;
Path dir = new Path(System.getProperty(&quot;test.data.dir&quot;, &quot;.&quot;));&lt;br/&gt;
FileInputFormat.setInputPaths(job, dir);&lt;br/&gt;
}} &lt;/p&gt;


&lt;p&gt;I tried using this, but unfortunately, this also gives an exception.&lt;br/&gt;
{{&lt;br/&gt;
java.io.IOException: cannot find dir = &lt;a href=&quot;file:/Users/rmelick/hive/ql/mapred&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/Users/rmelick/hive/ql/mapred&lt;/a&gt; in pathToPartitionInfo: &lt;span class=&quot;error&quot;&gt;&amp;#91;pfile:/Users/rmelick/hive/build/ql/test/data/warehouse/temp&amp;#93;&lt;/span&gt;&lt;br/&gt;
}}&lt;/p&gt;

&lt;p&gt;The ql/mapred directory does not exist on my computer, but I also tried changing it to just hive/ql, and it also failed with the same exception.  I&apos;m not sure if TestFlatFileInputFormat:146 is creating the temp file like you were thinking.  I haven&apos;t tried doing it like that.&lt;/p&gt;</comment>
                            <comment id="13027298" author="jvs" created="Sat, 30 Apr 2011 07:28:52 +0000"  >&lt;p&gt;Seems to me we should get your patch committed without the automated test case; for now we&apos;ll just have to verify index usage by checking the log.  And open a followup for dealing with the empty result case.&lt;/p&gt;

&lt;p&gt;So can you prepare the final patch for me to review and commit?&lt;/p&gt;</comment>
                            <comment id="13027489" author="jiraposter@reviews.apache.org" created="Sun, 1 May 2011 19:20:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-01 19:20:02.130293)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.12.patch&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; title=&quot;use filter pushdown for automatically accessing indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1644&quot;&gt;&lt;del&gt;HIVE-1644&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java d28dad0 &lt;br/&gt;
  conf/hive-default.xml 89b5236 &lt;br/&gt;
  eclipse-templates/.classpath 8d2dc52 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java ca337a8 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 24e16e4 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 953cc4c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/AbstractIndexHandler.java dd0186d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexHandler.java 411b78f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexQueryContext.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java f90d64f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java 50db44c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/IndexWhereResolver.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/PhysicalOptimizer.java 0ae9fa2 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcCtx.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java 092484a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 404d1fa &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 0462749 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_file_format.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_multiple.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_auto_unused.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/558/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Russell&lt;/p&gt;
</comment>
                            <comment id="13027490" author="rmelick" created="Sun, 1 May 2011 19:20:54 +0000"  >&lt;p&gt;Patch 19 ready for review.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/558/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13027559" author="jvs" created="Mon, 2 May 2011 06:04:02 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13027779" author="jvs" created="Mon, 2 May 2011 19:10:53 +0000"  >&lt;p&gt;Committed.  Thanks Russell and Jeffrey!&lt;/p&gt;</comment>
                            <comment id="13419996" author="mahsa" created="Sun, 22 Jul 2012 00:27:19 +0000"  >&lt;p&gt;Can the same approach be applied to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2845&quot; title=&quot;Add support for index joins in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2845&quot;&gt;HIVE-2845&lt;/a&gt;? I have already tried it, but the output is empty. Is there a major difference that causes this to happen?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12505858">HIVE-2138</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458718">HIVE-1226</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12502671">HIVE-2081</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12504427">HIVE-2115</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12505028">HIVE-2129</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12505029">HIVE-2130</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12500846">HIVE-2036</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12505027">HIVE-2128</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12471141" name="HIVE-1644.1.patch" size="35302" author="rmelick" created="Wed, 16 Feb 2011 01:29:51 +0000"/>
                            <attachment id="12474374" name="HIVE-1644.10.patch" size="65696" author="rmelick" created="Wed, 23 Mar 2011 06:27:40 +0000"/>
                            <attachment id="12474859" name="HIVE-1644.11.patch" size="70367" author="rmelick" created="Tue, 29 Mar 2011 08:36:18 +0000"/>
                            <attachment id="12475666" name="HIVE-1644.12.patch" size="85182" author="rmelick" created="Thu, 7 Apr 2011 05:27:54 +0000"/>
                            <attachment id="12476437" name="HIVE-1644.13.patch" size="87366" author="rmelick" created="Fri, 15 Apr 2011 08:21:59 +0000"/>
                            <attachment id="12476517" name="HIVE-1644.14.patch" size="155646" author="rmelick" created="Sat, 16 Apr 2011 06:11:12 +0000"/>
                            <attachment id="12477076" name="HIVE-1644.15.patch" size="134302" author="rmelick" created="Fri, 22 Apr 2011 03:53:26 +0000"/>
                            <attachment id="12477194" name="HIVE-1644.16.patch" size="147828" author="rmelick" created="Sat, 23 Apr 2011 06:48:22 +0000"/>
                            <attachment id="12477716" name="HIVE-1644.17.patch" size="149415" author="rmelick" created="Fri, 29 Apr 2011 00:06:03 +0000"/>
                            <attachment id="12477728" name="HIVE-1644.18.patch" size="147683" author="rmelick" created="Fri, 29 Apr 2011 05:05:21 +0000"/>
                            <attachment id="12477912" name="HIVE-1644.19.patch" size="138156" author="rmelick" created="Sun, 1 May 2011 19:20:54 +0000"/>
                            <attachment id="12471687" name="HIVE-1644.2.patch" size="273914" author="rmelick" created="Wed, 23 Feb 2011 04:06:09 +0000"/>
                            <attachment id="12471965" name="HIVE-1644.3.patch" size="48662" author="rmelick" created="Fri, 25 Feb 2011 20:22:18 +0000"/>
                            <attachment id="12471999" name="HIVE-1644.4.patch" size="49985" author="jvs" created="Sat, 26 Feb 2011 00:15:53 +0000"/>
                            <attachment id="12472765" name="HIVE-1644.5.patch" size="54917" author="rmelick" created="Sun, 6 Mar 2011 01:09:15 +0000"/>
                            <attachment id="12472767" name="HIVE-1644.6.patch" size="62685" author="rmelick" created="Sun, 6 Mar 2011 03:54:03 +0000"/>
                            <attachment id="12473105" name="HIVE-1644.7.patch" size="60260" author="rmelick" created="Wed, 9 Mar 2011 06:41:25 +0000"/>
                            <attachment id="12473968" name="HIVE-1644.8.patch" size="70525" author="rmelick" created="Fri, 18 Mar 2011 03:17:35 +0000"/>
                            <attachment id="12474157" name="HIVE-1644.9.patch" size="72186" author="rmelick" created="Mon, 21 Mar 2011 06:47:31 +0000"/>
                            <attachment id="12477830" name="hive.log" size="736817" author="rmelick" created="Fri, 29 Apr 2011 18:15:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Feb 2011 01:29:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63987</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i010en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3831</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Enables automatic use of Compact indexes by setting hive.optimize.autoindex=true</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1645] ability to specify parent directory for zookeeper lock manager</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1645</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For concurrency support, it would be desirable if all the locks were created under a common parent, so that zookeeper can be used&lt;br/&gt;
for different purposes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474239">HIVE-1645</key>
            <summary>ability to specify parent directory for zookeeper lock manager</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Sep 2010 01:13:50 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:38 +0000</updated>
                            <resolved>Thu, 16 Sep 2010 18:24:12 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12909982" author="namit" created="Thu, 16 Sep 2010 01:16:21 +0000"  >&lt;p&gt;Added a new configuration parameter &apos;hive.zookeeper.namespace&apos; under which all the locks will be created if zookeeper is being used as the lock maanger&lt;/p&gt;</comment>
                            <comment id="12909992" author="he yongqiang" created="Thu, 16 Sep 2010 02:24:03 +0000"  >&lt;p&gt;+1, running tests.&lt;/p&gt;</comment>
                            <comment id="12910254" author="he yongqiang" created="Thu, 16 Sep 2010 18:24:12 +0000"  >&lt;p&gt;I just committed! Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454728" name="hive.1645.1.patch" size="8260" author="namit" created="Thu, 16 Sep 2010 01:15:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Sep 2010 02:24:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1646] Hive 0.5 Build Crashing</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1646</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I&apos;ve tried this on a variety of configurations. Operating Systems SLES 10 SP2, SLES 11, RHEL 5.4 on a variety of machines using both ANT 1.8.1 and ANT 1.7.1 and SUN JDK 1.6.14. I&apos;ve tried building this by going to the Hive Release page and download hive-0.5.0-src and using that. I&apos;ve tried building by obtaining the branch tag release using svn checkout &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/tags/release-0.5.0/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/tags/release-0.5.0/&lt;/a&gt; hive-0.5.0-dev. Always the same thing:&lt;/p&gt;

&lt;p&gt;When I run the Hive 0.5 build it runs for just under 2 hours and then crashes with the following message (tail end of ant.log):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- -&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff /home/hive/hive-0.5.0-build/hive-0.5.0-dev/build/ql/test/logs/negative/wrong_distinct2.q.out /home/hive/hive-0.5.0-build/hive-0.5.0-dev/ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Done query: wrong_distinct2.q&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 31, Failures: 0, Errors: 0, Time elapsed: 90.974 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hive.ql.tool.TestLineageInfo&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.525 sec&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;BUILD FAILED&lt;br/&gt;
/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:151: The following error occurred while executing this line:&lt;br/&gt;
/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:91: The following error occurred while executing this line:&lt;br/&gt;
/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build-common.xml:327: Tests failed!&lt;/p&gt;

&lt;p&gt;Total time: 94 minutes 43 seconds&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;My build script is very simplistic :&lt;/p&gt;

&lt;p&gt;#!/bin/sh&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Set Build Dependencies&lt;br/&gt;
set PATH=$PATH:/home/hive/Java-Versions/jdk1.6.0_14/bin/&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;export JAVA_HOME=/home/hive/Java-Versions/jdk1.6.0_14&lt;br/&gt;
export BUILD_DIR=/home/hive/hive-0.5.0-build&lt;br/&gt;
export ANT_HOME=$BUILD_DIR/apache-ant-1.8.1&lt;br/&gt;
export HIVE_INSTALL=$BUILD_DIR/hive-0.5.0-dev/&lt;br/&gt;
export PATH=$PATH:$ANT_HOME/bin&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Run Build and Unit Test&lt;br/&gt;
cd $HIVE_INSTALL&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;ant clean test tar -logfile ant.log&lt;/p&gt;</description>
                <environment>&lt;p&gt;SLES 10 SP2, SLES 11, RHEL 5.4, ANT 1.8.1 and ANT 1.7.1, SUN JDK 1.6.14&lt;/p&gt;</environment>
        <key id="12474303">HIVE-1646</key>
            <summary>Hive 0.5 Build Crashing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wattsteve">Stephen Watt</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Sep 2010 18:00:28 +0000</created>
                <updated>Fri, 29 Oct 2010 22:50:00 +0000</updated>
                            <resolved>Fri, 29 Oct 2010 22:50:00 +0000</resolved>
                                    <version>0.5.0</version>
                                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12910266" author="slider" created="Thu, 16 Sep 2010 18:59:00 +0000"  >&lt;p&gt;A suggestion: Search through your ant test output to look for nonzero values of &quot;Failures:&quot; or &quot;Errors:&quot;. That will tell you which test class(es) failed. Suppose you find that TestCliDriver failed. Then look at the file TEST-org.apache.hadoop.hive.cli.TestCliDriver.xml to identify which specific test case(s) failed. (I don&apos;t remember the exact location of the file, but you can find it somewhere under build.)&lt;/p&gt;

&lt;p&gt;Not sure if this is related, but when I ran ant test on trunk on my Mac OS X, 2 test cases failed because they called sed, and OS X&apos;s sed behaved differently than Linux&apos;s sed. I had to change the test cases a little for them to pass (not committed yet).&lt;/p&gt;</comment>
                            <comment id="12910278" author="wattsteve" created="Thu, 16 Sep 2010 19:29:20 +0000"  >&lt;p&gt;@Steven thanks for the comment. When a build is successful I would it expect it to complete, and then provide a report of which test cases failed. You can then use that to debug each test case individually in eclipse. This is at least the way it works with the Hadoop build. With this Hive build, it appears the actual build is crashing as it never gets to the point where the build completes and it provides the ant build report. I would expect for an official Hive release for the build to at least complete without crashing, even if there are one or two test cases that fail. &lt;/p&gt;

&lt;p&gt;Does your build on OS/X actually complete and you see the build report? i.e.  You are not seeing this failure message?&lt;br/&gt;
/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:151: The following error occurred while executing this line:&lt;br/&gt;
/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:91: The following error occurred while executing this line:&lt;br/&gt;
/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build-common.xml:327: Tests failed!&lt;/p&gt;</comment>
                            <comment id="12910285" author="slider" created="Thu, 16 Sep 2010 19:58:16 +0000"  >&lt;p&gt;I ran ant package and ant test as 2 separate commands. The former succeeded, the latter failed. The last few output lines of my ant test are:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Done query: wrong_distinct2.q&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 31, Failures: 0, Errors: 0, Time elapsed: 340.872 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hive.ql.tool.TestLineageInfo&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.498 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hive.ql.udf.TestUDFDateAdd&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.264 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hive.ql.udf.TestUDFDateDiff&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.214 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hive.ql.udf.TestUDFDateSub&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.147 sec&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
/Users/swong/dev/svn/asf/hadoop/hive/trunk/build.xml:168: The following error occurred while executing this line:&lt;br/&gt;
/Users/swong/dev/svn/asf/hadoop/hive/trunk/build.xml:105: The following error occurred while executing this line:&lt;br/&gt;
/Users/swong/dev/svn/asf/hadoop/hive/trunk/build-common.xml:446: Tests failed!&lt;/p&gt;

&lt;p&gt;Total time: 190 minutes 53 seconds&lt;/p&gt;</comment>
                            <comment id="12910335" author="wattsteve" created="Thu, 16 Sep 2010 21:46:59 +0000"  >&lt;p&gt;@Steven Many thanks for taking the time to reproduce the error ! I greatly appreciate it.&lt;/p&gt;

&lt;p&gt;I ran the ant targets individually and like yourself, the &quot;package&quot; and &quot;tar&quot; targets works just fine for me also. I am also seeing the failure occurring in the &quot;test&quot; target. I did a bit more digging and ran the dependency targets for &quot;test&quot; (clean-test and jar) and they completed successfully as well. This leaves me to believe that the build failure is occurring with the &amp;lt;iterate target=&quot;test&quot;/&amp;gt; command below:&lt;/p&gt;

&lt;p&gt;  &amp;lt;target name=&quot;test&quot;&lt;br/&gt;
          depends=&quot;clean-test,jar&quot;&lt;br/&gt;
          description=&quot;Run tests&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;iterate target=&quot;test&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;iterate-cpp target=&quot;test&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;/target&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12910400" author="slider" created="Thu, 16 Sep 2010 23:52:08 +0000"  >&lt;p&gt;@Stephen I just looked at the saved output of my past ant runs. It hardly took any time. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Ant test will fail if any test case fails.&lt;/p&gt;</comment>
                            <comment id="12916336" author="wattsteve" created="Thu, 30 Sep 2010 01:22:32 +0000"  >&lt;p&gt;I finally have this working. Apparently, the src tree from the Release TAR is what does not build. i.e. the tarball you get from &quot;Hive Downloads&quot;. If you go ahead and do an svn checkout of &quot;http://svn.apache.org/repos/asf/hadoop/hive/tags/release-0.5.0/&quot; it will build. For the record, I was using ANT 1.8.1 and SUN JDK 1.6.14 &lt;/p&gt;

&lt;p&gt;I&apos;m going to leave this open as there is still an issue as the Tarball is clearly different to the tagged release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Sep 2010 18:59:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72796</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123271</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1647] Incorrect initialization of thread local variable inside IOContext ( implementation is not threadsafe ) </title>
                <link>https://issues.apache.org/jira/browse/HIVE-1647</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Bug in org.apache.hadoop.hive.ql.io.IOContext&lt;br/&gt;
in relation to initialization of thread local variable.&lt;/p&gt;

&lt;p&gt;public class IOContext {&lt;/p&gt;

&lt;p&gt;  private static ThreadLocal&amp;lt;IOContext&amp;gt; threadLocal = new ThreadLocal&amp;lt;IOContext&amp;gt;(){ };&lt;/p&gt;

&lt;p&gt;  static {&lt;br/&gt;
    if (threadLocal.get() == null) &lt;/p&gt;
{
      threadLocal.set(new IOContext());
    }
&lt;p&gt;  }&lt;/p&gt;

&lt;p&gt;In a multi-threaded environment, the thread that gets to load the class first for the JVM (assuming threads share the classloader),&lt;br/&gt;
gets to initialize itself correctly by executing the code in the static block. Once the class is loaded, &lt;br/&gt;
any subsequent threads would  have their respective threadlocal variable as null.  Since IOContext&lt;br/&gt;
is set during initialization of HiveRecordReader, In a scenario where multiple threads get to acquire&lt;br/&gt;
 an instance of HiveRecordReader, it would result in a NPE for all but the first thread that gets to load the class in the VM.&lt;/p&gt;

&lt;p&gt;Is the above scenario of multiple threads initializing HiveRecordReader a typical one ?  or we could just provide the following fix...&lt;/p&gt;

&lt;p&gt;  private static ThreadLocal&amp;lt;IOContext&amp;gt; threadLocal = new ThreadLocal&amp;lt;IOContext&amp;gt;(){&lt;br/&gt;
    protected synchronized IOContext initialValue() &lt;/p&gt;
{
      return new IOContext();
    }
&lt;p&gt;  &lt;br/&gt;
  };&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474306">HIVE-1647</key>
            <summary>Incorrect initialization of thread local variable inside IOContext ( implementation is not threadsafe ) </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liyin">Liyin Tang</assignee>
                                    <reporter username="ramang">Raman Grover</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Sep 2010 18:31:28 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:26 +0000</updated>
                            <resolved>Tue, 9 Nov 2010 21:19:55 +0000</resolved>
                                    <version>0.6.0</version>
                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="12910259" author="he yongqiang" created="Thu, 16 Sep 2010 18:38:50 +0000"  >&lt;p&gt;It&apos;s good to have the fix you proposed. Can you post a patch?&lt;/p&gt;</comment>
                            <comment id="12916676" author="he yongqiang" created="Thu, 30 Sep 2010 21:28:22 +0000"  >&lt;p&gt;+1 running tests&lt;/p&gt;</comment>
                            <comment id="12916712" author="he yongqiang" created="Thu, 30 Sep 2010 22:10:09 +0000"  >&lt;p&gt;The test is still running, but there are a lot of diffs. Can you take a look? Examples like join_map_ppr.q, input_part10.q&lt;/p&gt;

&lt;p&gt;You can use &apos; ant test -Dtestcase=TestCliDriver -Dqfile=join_map_ppr.q,input_part10.q &apos; to reproduce.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455938" name="HIVE-1647.patch" size="793" author="liyin" created="Wed, 29 Sep 2010 19:05:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Sep 2010 18:38:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This problem is fixed in Hive-1754</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1648] Automatically gathering statistics when reading a table/partition</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1648</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt; introduces a new command &apos;ANALYZE TABLE T COMPUTE STATISTICS&apos; to gathering stats. This requires additional scan of the data. Stats gathering can be piggy-backed on TableScanOperator whenever a table/partition is scanned (given not LIMIT operator). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12474333">HIVE-1648</key>
            <summary>Automatically gathering statistics when reading a table/partition</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12407019">HIVE-33</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="paulbutler">Paul Butler</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Sep 2010 22:25:35 +0000</created>
                <updated>Thu, 2 Feb 2012 22:37:11 +0000</updated>
                                                                            <component>Statistics</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="12928706" author="namit" created="Fri, 5 Nov 2010 17:53:35 +0000"  >&lt;p&gt;Paul, do you have an apache account ?&lt;br/&gt;
Can you send it to me - I will add you as a hive contributor.&lt;/p&gt;

&lt;p&gt;Also, can you &apos;Submit Patch&apos; when you add a patch - this way everyone knows that the patch is ready for review&lt;/p&gt;</comment>
                            <comment id="12928709" author="namit" created="Fri, 5 Nov 2010 17:55:37 +0000"  >&lt;p&gt;Can you regenerate the patch - it conflicted with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1750&quot; title=&quot;Remove Partition Filtering Conditions when Possible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1750&quot;&gt;&lt;del&gt;HIVE-1750&lt;/del&gt;&lt;/a&gt; and may need some cleanup.&lt;/p&gt;</comment>
                            <comment id="12928733" author="namit" created="Fri, 5 Nov 2010 18:31:32 +0000"  >&lt;p&gt;getOuterQueryLimit is not used correctly.&lt;/p&gt;

&lt;p&gt;qb maintains a mapping of limit per destination&lt;/p&gt;

&lt;p&gt;      case HiveParser.TOK_LIMIT:&lt;br/&gt;
        qbp.setDestLimit(ctx_1.dest, new Integer(ast.getChild(0).getText()));&lt;br/&gt;
        break;&lt;/p&gt;



&lt;p&gt;Since you are browsing the input tables, you dont care about the destination.&lt;br/&gt;
Go over:&lt;/p&gt;

&lt;p&gt;private final HashMap&amp;lt;String, Integer&amp;gt; destToLimit;&lt;/p&gt;

&lt;p&gt;in QBParseInfo.&lt;/p&gt;

&lt;p&gt;If that is not-empty, do not gather stats&lt;/p&gt;</comment>
                            <comment id="12928737" author="namit" created="Fri, 5 Nov 2010 18:32:24 +0000"  >&lt;p&gt;Also, add tests for all the cases above.&lt;/p&gt;

&lt;p&gt;You should be able to compare the plan via a explain extended&lt;/p&gt;</comment>
                            <comment id="12928804" author="jvs" created="Fri, 5 Nov 2010 20:14:19 +0000"  >&lt;p&gt;Obtained Paul Butler&apos;s account name from the JIRA change history...I&apos;ll add him as contributor.&lt;/p&gt;</comment>
                            <comment id="12928836" author="paulbutler" created="Fri, 5 Nov 2010 21:50:33 +0000"  >&lt;p&gt;Attached a new patch which applies on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1750&quot; title=&quot;Remove Partition Filtering Conditions when Possible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1750&quot;&gt;&lt;del&gt;HIVE-1750&lt;/del&gt;&lt;/a&gt;. Also fixed the limits as suggested. Working on unit tests now.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Paul&lt;/p&gt;</comment>
                            <comment id="12930321" author="namit" created="Tue, 9 Nov 2010 22:25:26 +0000"  >&lt;p&gt;Paul, any updates on the unit tests ?&lt;/p&gt;</comment>
                            <comment id="12930326" author="paulbutler" created="Tue, 9 Nov 2010 22:33:22 +0000"  >&lt;p&gt;I get a bunch of tests failing when I build the latest trunk, even without applying my patch. I&apos;m trying to figure out what&apos;s wrong with those first.&lt;/p&gt;</comment>
                            <comment id="12933916" author="paulbutler" created="Fri, 19 Nov 2010 18:57:54 +0000"  >&lt;p&gt;Added unit tests and fixed some issues with partitions.&lt;/p&gt;</comment>
                            <comment id="12934619" author="namit" created="Mon, 22 Nov 2010 22:02:02 +0000"  >&lt;p&gt;I haven&apos;t taken a look at the code, but here are the comments for the tests&lt;/p&gt;


&lt;p&gt;Instead of:&lt;/p&gt;


&lt;p&gt;desc extended &amp;lt;table_name&amp;gt; in the tests,&lt;br/&gt;
please use&lt;br/&gt;
show table extended like `&amp;lt;table_name&amp;gt;`;&lt;/p&gt;


&lt;p&gt;This will dump stats in a new line and can be easily compared.&lt;br/&gt;
The non-deterministic stats are ignored.&lt;/p&gt;


&lt;p&gt;Add a test for limit in the sub-query.&lt;/p&gt;

&lt;p&gt;Dont select from existing tables: src/src1 for your stats tests.&lt;br/&gt;
Create new tables and then set hive.stats.autogather.read to true.&lt;br/&gt;
This was, you are sure that the remaining tests will not be affected.&lt;/p&gt;

&lt;p&gt;Add another test for 3-way join where the join keys are not the same: something like:&lt;/p&gt;

&lt;p&gt;select .. from A join B on A.key1 = B.key1 join C on B.key2 = C.key2 where ....&lt;/p&gt;</comment>
                            <comment id="12934682" author="namit" created="Tue, 23 Nov 2010 01:06:21 +0000"  >&lt;p&gt;In SemanticAnalyzer:addStatsTask:&lt;/p&gt;

&lt;p&gt; } else {&lt;br/&gt;
6177	              List&amp;lt;Node&amp;gt; children = (List&amp;lt;Node&amp;gt;) op.getChildren();&lt;br/&gt;
6178	              if (children != null) {&lt;br/&gt;
6179	                for (Node child : children) &lt;/p&gt;
{
6180	                  opsToProcess.add((Operator&amp;lt;? extends Serializable&amp;gt;) child);
6181	                }
&lt;p&gt;6182	              }&lt;/p&gt;


&lt;p&gt;why is the above code block needed ? TableScan can only be at the top.&lt;/p&gt;


&lt;p&gt;Also, can you check for Conditional Tasks in addition to MapRedTask ?&lt;/p&gt;</comment>
                            <comment id="12934683" author="namit" created="Tue, 23 Nov 2010 01:08:31 +0000"  >&lt;p&gt;Otherwise, it looks OK&lt;/p&gt;</comment>
                            <comment id="12935551" author="paulbutler" created="Wed, 24 Nov 2010 22:40:47 +0000"  >&lt;p&gt;Namit, it looks like show table extended like `&amp;lt;table_name&amp;gt;`; doesn&apos;t print the number of rows. Unless there&apos;s a way to make it do that, I&apos;ll have to stick with desc extended.&lt;/p&gt;

&lt;p&gt;I sent you an email for clarification on the ConditionalTasks also.&lt;/p&gt;</comment>
                            <comment id="12966354" author="paulbutler" created="Thu, 2 Dec 2010 23:54:30 +0000"  >&lt;p&gt;Changes made. Note that subqueries are not piggybacked, but tests are there to make sure they still run when hive.stats.autogather=true.&lt;/p&gt;</comment>
                            <comment id="12966660" author="namit" created="Fri, 3 Dec 2010 20:28:06 +0000"  >&lt;p&gt;I dont see any new tests&lt;/p&gt;</comment>
                            <comment id="12966690" author="paulbutler" created="Fri, 3 Dec 2010 22:00:17 +0000"  >&lt;p&gt;The three-way join test was added to piggyback_join.q.out. No other new tests were added.&lt;/p&gt;

&lt;p&gt;I also changed the tests to create new tables and use SHOW TABLE EXTENDED, which I modified to print numRows if available.&lt;/p&gt;</comment>
                            <comment id="12968474" author="he yongqiang" created="Mon, 6 Dec 2010 23:10:33 +0000"  >&lt;p&gt;Converted paul&apos;s patch to svn based. No changes other than that.&lt;/p&gt;</comment>
                            <comment id="12968841" author="namit" created="Tue, 7 Dec 2010 17:46:29 +0000"  >&lt;p&gt;@Yongqiang, you have missed the test changes in the patch - can you add them also ?&lt;/p&gt;</comment>
                            <comment id="12968854" author="he yongqiang" created="Tue, 7 Dec 2010 18:12:59 +0000"  >&lt;p&gt;Actually the git patch can not be applied cleanly.  Paul, can you upload a new patch using svn?&lt;/p&gt;</comment>
                            <comment id="12969878" author="paulbutler" created="Thu, 9 Dec 2010 19:15:25 +0000"  >&lt;p&gt;Added an SVN patch (5) that applies to latest.&lt;/p&gt;</comment>
                            <comment id="12970009" author="namit" created="Thu, 9 Dec 2010 23:30:48 +0000"  >&lt;p&gt;1. QBParseInfo: add setDestToLimit() for symmetry()&lt;br/&gt;
2. I am not sure any of your tests are working - set hive.stats.autogather = false&lt;br/&gt;
before you create the tables for which you want the stats to be populated while reading.&lt;/p&gt;

&lt;p&gt;Clearly, this is the reason why piggyback_part.q is working.&lt;/p&gt;

&lt;p&gt;2. piggyback_join.q&lt;/p&gt;

&lt;p&gt;End:&lt;/p&gt;


&lt;p&gt;show table extended like piggy_table3;&lt;br/&gt;
drop table piggy_table;&lt;/p&gt;


&lt;p&gt;Add:&lt;/p&gt;

&lt;p&gt;show table extended like piggy_table1;&lt;br/&gt;
show table extended like piggy_table2;&lt;/p&gt;


&lt;p&gt;Also, add a test where you are joining:&lt;/p&gt;

&lt;p&gt;piggyback_table1 a join&lt;br/&gt;
piggyback_table2 b on a.key = b.key join&lt;br/&gt;
piggyback_table3 c b.key = c.key&lt;/p&gt;

&lt;p&gt;and then show table extended all the 3 tables.&lt;/p&gt;

&lt;p&gt;3. piggyback_limit.q&lt;br/&gt;
add:&lt;/p&gt;

&lt;p&gt;show table extended like piggy_table1;&lt;/p&gt;


&lt;p&gt;before the end.&lt;br/&gt;
It should have no stats&lt;/p&gt;

&lt;p&gt;4. piggbyback_subq.q and _union.q are wrong - you need to create new tables,&lt;br/&gt;
and then show table extended them at the end, just like other tests.&lt;/p&gt;

&lt;p&gt;5.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12513287">HIVE-2274</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12458958" name="HIVE-1648.2.patch" size="24879" author="paulbutler" created="Fri, 5 Nov 2010 21:47:47 +0000"/>
                            <attachment id="12460035" name="HIVE-1648.3.patch" size="70781" author="paulbutler" created="Fri, 19 Nov 2010 18:57:54 +0000"/>
                            <attachment id="12465182" name="HIVE-1648.4.patch" size="101440" author="paulbutler" created="Thu, 2 Dec 2010 23:53:13 +0000"/>
                            <attachment id="12465931" name="HIVE-1648.5.patch" size="97070" author="paulbutler" created="Thu, 9 Dec 2010 19:12:46 +0000"/>
                            <attachment id="12458882" name="HIVE-1648.patch" size="23567" author="paulbutler" created="Fri, 5 Nov 2010 02:50:48 +0000"/>
                            <attachment id="12465632" name="hive-1648.svn.patch" size="13269" author="he yongqiang" created="Mon, 6 Dec 2010 23:10:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Nov 2010 17:53:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00x6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1649] Ability to update counters and status from TRANSFORM scripts</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1649</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hadoop Streaming supports the ability to update counters and status by writing specially coded messages to the script&apos;s stderr stream.&lt;/p&gt;

&lt;p&gt;A streaming process can use the stderr to emit counter information. &lt;tt&gt;reporter:counter:&amp;lt;group&amp;gt;,&amp;lt;counter&amp;gt;,&amp;lt;amount&amp;gt;&lt;/tt&gt; should be sent to stderr to update the counter.&lt;br/&gt;
A streaming process can use the stderr to emit status information. To set a status, &lt;tt&gt;reporter:status:&amp;lt;message&amp;gt;&lt;/tt&gt; should be sent to stderr.&lt;/p&gt;

&lt;p&gt;Hive should support these same features with its TRANSFORM mechanism.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474351">HIVE-1649</key>
            <summary>Ability to update counters and status from TRANSFORM scripts</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="fu2you">Guo Hongjie</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 04:32:03 +0000</created>
                <updated>Sat, 12 Jan 2013 00:04:10 +0000</updated>
                            <resolved>Sat, 12 Jan 2013 00:04:10 +0000</resolved>
                                    <version>0.6.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13549417" author="fu2you" created="Thu, 10 Jan 2013 08:03:38 +0000"  >&lt;p&gt;Port Hadoop streaming&apos;s counters/status reporters to Hive Transforms&lt;/p&gt;</comment>
                            <comment id="13551672" author="cwsteinbach" created="Sat, 12 Jan 2013 00:02:04 +0000"  >&lt;p&gt;@Guo: Can you post a review request on reviewboard or phabricator? Directions explaining how to do this are on the wiki. Thanks.&lt;/p&gt;</comment>
                            <comment id="13551676" author="cwsteinbach" created="Sat, 12 Jan 2013 00:04:05 +0000"  >&lt;p&gt;Resolving this as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-305&quot; title=&quot;Port Hadoop streaming&amp;#39;s counters/status reporters to Hive Transforms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-305&quot;&gt;&lt;del&gt;HIVE-305&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12415507">HIVE-305</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12564136" name="HIVE-1649.1.patch" size="2437" author="fu2you" created="Thu, 10 Jan 2013 08:08:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Jan 2013 08:03:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123273</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1650] TestContribNegativeCliDriver fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1650</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12474357">HIVE-1650</key>
            <summary>TestContribNegativeCliDriver fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 06:12:05 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:46 +0000</updated>
                            <resolved>Fri, 17 Sep 2010 19:07:13 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12910648" author="he yongqiang" created="Fri, 17 Sep 2010 16:15:26 +0000"  >&lt;p&gt;+1, running tests.&lt;/p&gt;</comment>
                            <comment id="12910739" author="he yongqiang" created="Fri, 17 Sep 2010 19:07:13 +0000"  >&lt;p&gt;I just committed! Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454830" name="hive.1650.1.patch" size="685" author="namit" created="Fri, 17 Sep 2010 06:31:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Sep 2010 16:15:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1651] ScriptOperator should not forward any output to downstream operators if an exception is happened</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1651</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ScriptOperator spawns 2 threads for getting the stdout and stderr from the script and then forward the output from stdout to downstream operators. In case of any exceptions to the script (e.g., got killed), the ScriptOperator got an exception and throw it to upstream operators until MapOperator got it and call close(abort). Before the ScriptOperator.close() is called the script output stream can still forward output to downstream operators. We should terminate it immediately.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474430">HIVE-1651</key>
            <summary>ScriptOperator should not forward any output to downstream operators if an exception is happened</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 19:16:41 +0000</created>
                <updated>Mon, 18 Oct 2010 21:54:53 +0000</updated>
                            <resolved>Mon, 18 Oct 2010 21:54:53 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12910747" author="namit" created="Fri, 17 Sep 2010 19:49:42 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12910786" author="jsensarma" created="Fri, 17 Sep 2010 21:11:33 +0000"  >&lt;p&gt;if a hadoop task is being failed - how is it that any side effect files created by hive code running in that task are getting promoted to the final output?&lt;/p&gt;

&lt;p&gt;i think the forwarding is a red-herring. we should not commit output files from a failed task.&lt;/p&gt;</comment>
                            <comment id="12910834" author="nzhang" created="Fri, 17 Sep 2010 22:45:14 +0000"  >&lt;p&gt;@joydeep, the output file will not be committed if an exception occurred and close(abort=true) is called. This bug happened in a short time window after the exception occurred and before the close(abort) is called. Although the file got deleted, the dynamic partition insert already created a directory which later will be considered as an empty partition. &lt;/p&gt;</comment>
                            <comment id="12910837" author="jsensarma" created="Fri, 17 Sep 2010 22:55:12 +0000"  >&lt;p&gt;yeah - but then the directory itself should be created as a tmp directory. and we should promote the directory to it&apos;s final name only when closing successfully.&lt;/p&gt;</comment>
                            <comment id="12913301" author="nzhang" created="Tue, 21 Sep 2010 22:56:27 +0000"  >&lt;p&gt;Discussed with Joydeep offline. The side effects of failed task should be cleaned after the job finished. _tmp* files are already taken care of in the current code base. The only side effect that need to be taken care of is the empty directories created by failed dynamic partition inserts. This issue is addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1655&quot; title=&quot;Adding consistency check at jobClose() when committing dynamic partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1655&quot;&gt;&lt;del&gt;HIVE-1655&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12922168" author="jvs" created="Mon, 18 Oct 2010 17:49:10 +0000"  >&lt;p&gt;Should we close this one as Won&apos;t Fix?&lt;/p&gt;</comment>
                            <comment id="12922295" author="namit" created="Mon, 18 Oct 2010 21:54:53 +0000"  >&lt;p&gt;Closing this for now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454891" name="HIVE-1651.patch" size="4387" author="nzhang" created="Fri, 17 Sep 2010 19:21:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Sep 2010 19:49:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72793</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1652] Delete temporary stats data after some time</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1652</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is a follow-up for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1361&lt;/a&gt;.&lt;br/&gt;
If the client dies after some stats have been published, there is no way to clean that data.&lt;/p&gt;

&lt;p&gt;A simple work-around might be to add current timestamp in the data - and a background process&lt;br/&gt;
to clean up old stats. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12474443">HIVE-1652</key>
            <summary>Delete temporary stats data after some time</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 21:03:35 +0000</created>
                <updated>Thu, 2 May 2013 02:29:33 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12465175">HIVE-1361</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12465175">HIVE-1361</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42408</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08opz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48604</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1653] Ability to enforce correct stats</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1653</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is a follow-up for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1361&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If one of the mappers/reducers cannot publish stats, it may lead to wrong aggregated stats.&lt;br/&gt;
There should be a way to avoid this - at the least, a configuration variable which fails the &lt;br/&gt;
task if stats cannot be published&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474444">HIVE-1653</key>
            <summary>Ability to enforce correct stats</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 21:07:05 +0000</created>
                <updated>Sat, 15 Mar 2014 21:50:57 +0000</updated>
                            <resolved>Thu, 26 Jul 2012 17:41:57 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13413549" author="namit" created="Fri, 13 Jul 2012 07:39:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D4119&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4119&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13418545" author="kevinwilfong" created="Thu, 19 Jul 2012 18:31:08 +0000"  >&lt;p&gt;Commented on the diff.&lt;/p&gt;</comment>
                            <comment id="13418944" author="namit" created="Fri, 20 Jul 2012 05:59:14 +0000"  >&lt;p&gt;comments&lt;/p&gt;</comment>
                            <comment id="13420236" author="namit" created="Sun, 22 Jul 2012 16:43:49 +0000"  >&lt;p&gt;will address comments&lt;/p&gt;</comment>
                            <comment id="13421195" author="namit" created="Tue, 24 Jul 2012 05:33:01 +0000"  >&lt;p&gt;addressed comments, added tests&lt;/p&gt;</comment>
                            <comment id="13421212" author="cwsteinbach" created="Tue, 24 Jul 2012 06:37:10 +0000"  >&lt;p&gt;@Namit: Added a comment on phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13422016" author="namit" created="Wed, 25 Jul 2012 05:35:25 +0000"  >&lt;p&gt;comments&lt;/p&gt;</comment>
                            <comment id="13422486" author="shreepadma" created="Wed, 25 Jul 2012 18:37:23 +0000"  >&lt;p&gt;@Namit: Added comments on phabricator. Thanks!&lt;/p&gt;</comment>
                            <comment id="13422877" author="namit" created="Thu, 26 Jul 2012 03:55:36 +0000"  >&lt;p&gt;Answered&lt;/p&gt;</comment>
                            <comment id="13422882" author="kevinwilfong" created="Thu, 26 Jul 2012 04:08:58 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Will run tests tonight, and commit tomorrow unless there are further comments.&lt;/p&gt;</comment>
                            <comment id="13423277" author="kevinwilfong" created="Thu, 26 Jul 2012 17:41:57 +0000"  >&lt;p&gt;Committed, thanks Namit.&lt;/p&gt;</comment>
                            <comment id="13423661" author="hudson" created="Fri, 27 Jul 2012 04:21:50 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1569 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1569/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1569/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1653&quot; title=&quot;Ability to enforce correct stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1653&quot;&gt;&lt;del&gt;HIVE-1653&lt;/del&gt;&lt;/a&gt;. Ability to enforce correct stats. (njain via kevinwilfong) (Revision 1366103)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1366103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1366103&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/StatsTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FileSinkDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/StatsWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/stats&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/stats/DummyStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/stats/DummyStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_aggregator_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_aggregator_error_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_publisher_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_publisher_error_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/stats_aggregator_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/stats_publisher_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_aggregator_error_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_aggregator_error_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_publisher_error_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_publisher_error_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/stats_aggregator_error_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/stats_publisher_error_1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547964" author="hudson" created="Wed, 9 Jan 2013 10:23:46 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1653&quot; title=&quot;Ability to enforce correct stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1653&quot;&gt;&lt;del&gt;HIVE-1653&lt;/del&gt;&lt;/a&gt;. Ability to enforce correct stats. (njain via kevinwilfong) (Revision 1366103)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1366103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1366103&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/StatsTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FileSinkDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/StatsWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/stats&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/stats/DummyStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/stats/DummyStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_aggregator_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_aggregator_error_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_publisher_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/stats_publisher_error_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/stats_aggregator_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/stats_publisher_error_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_aggregator_error_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_aggregator_error_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_publisher_error_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/stats_publisher_error_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/stats_aggregator_error_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/stats_publisher_error_1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550268" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:02 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="13936318" author="lefty@hortonworks.com" created="Sat, 15 Mar 2014 21:48:04 +0000"  >&lt;p&gt;This adds &lt;b&gt;hive.stats.reliable&lt;/b&gt; to HiveConf.java and hive-default.xml.template (see patch in Facebook reviews, since it isn&apos;t attached here:  &lt;a href=&quot;https://reviews.facebook.net/D4119&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4119&lt;/a&gt;).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12465175">HIVE-1361</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12622858">HIVE-3777</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12465175">HIVE-1361</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Jul 2012 18:31:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1654] select distinct should allow column name regex</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1654</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This works (matching column name foo):&lt;/p&gt;

&lt;p&gt;select `fo.*` from pokes;&lt;/p&gt;

&lt;p&gt;but this&lt;/p&gt;

&lt;p&gt;select distinct `fo.*` from pokes;&lt;/p&gt;

&lt;p&gt;gives&lt;/p&gt;

&lt;p&gt;FAILED: Error in semantic analysis: line 1:16 Invalid Table Alias or Column Reference `fo.*`&lt;/p&gt;

&lt;p&gt;It should work consistently.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474449">HIVE-1654</key>
            <summary>select distinct should allow column name regex</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="pxiong">Pengcheng Xiong</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 22:31:27 +0000</created>
                <updated>Thu, 12 Feb 2015 23:40:38 +0000</updated>
                            <resolved>Mon, 19 Jan 2015 18:12:50 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12913351" author="jvs" created="Wed, 22 Sep 2010 02:10:52 +0000"  >&lt;p&gt;select distinct *&lt;/p&gt;

&lt;p&gt;also chokes.&lt;/p&gt;</comment>
                            <comment id="12913352" author="jvs" created="Wed, 22 Sep 2010 02:11:39 +0000"  >&lt;p&gt;Arvind, this one is a good one to work on together with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1459&quot; title=&quot;wildcards in UDF/UDAF should expand to all columns (rather than no columns)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1459&quot;&gt;HIVE-1459&lt;/a&gt; if you&apos;re up for it.&lt;/p&gt;

&lt;p&gt;I think we should rewrite the tree when we see * and regex, replacing them with the actual column reference list, so that downstream code like DISTINCT doesn&apos;t have to special-case it.&lt;/p&gt;</comment>
                            <comment id="14282787" author="pxiong" created="Mon, 19 Jan 2015 18:10:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jvs&quot; class=&quot;user-hover&quot; rel=&quot;jvs&quot;&gt;John Sichi&lt;/a&gt;, w.r.t. the JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9194&quot; title=&quot;Support select distinct *&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9194&quot;&gt;&lt;del&gt;HIVE-9194&lt;/del&gt;&lt;/a&gt;, shall we close this issue? Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12763334">HIVE-9194</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12763334">HIVE-9194</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Jan 2015 18:10:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1655] Adding consistency check at jobClose() when committing dynamic partitions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1655</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In case of dynamic partition insert, FileSinkOperator generated a directory for a new partition and the files in the directory is named with &apos;_tmp*&apos;. When a task succeed, the file is renamed to remove the &quot;_tmp&quot;, which essentially implement the &quot;commit&quot; semantics. A lot of exceptions could happen (process got killed, machine dies etc.) could left the _tmp files exist in the DP directory. These _tmp files should be deleted (&quot;rolled back&quot;) at successful jobClose(). After the deletion, we should also delete any empty directories.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474454">HIVE-1655</key>
            <summary>Adding consistency check at jobClose() when committing dynamic partitions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 23:20:49 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:27 +0000</updated>
                            <resolved>Wed, 22 Sep 2010 05:22:46 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12910880" author="nzhang" created="Sat, 18 Sep 2010 00:53:56 +0000"  >&lt;p&gt;Actually the _tmp files are taken care of by FSPaths.commit() called at FileSinkOperator.close() and any missed _tmp* files are removed in jobClose() -&amp;gt; Utilities.removeTempOrDuplicateFiles(). The only missing piece is the remove the empty directories at jobClose().&lt;/p&gt;</comment>
                            <comment id="12913317" author="namit" created="Wed, 22 Sep 2010 00:11:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12913402" author="namit" created="Wed, 22 Sep 2010 05:22:45 +0000"  >&lt;p&gt;committed. Thanks Ning&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454933" name="HIVE-1655.patch" size="1214" author="nzhang" created="Sat, 18 Sep 2010 01:33:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Sep 2010 00:11:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123278</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1656] All TestJdbcDriver test cases fail in Eclipse unless a property is added in run config</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1656</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;All TestJdbcDriver test cases fail in Eclipse, unless I add the following property in the TestJdbc run configuration (&quot;Arguments&quot; tab --&amp;gt; &quot;VM arguments&quot; box):&lt;/p&gt;

&lt;p&gt;-Dtest.warehouse.dir=&quot;${workspace_loc:trunk}/build/ql/test/data/warehouse&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474461">HIVE-1656</key>
            <summary>All TestJdbcDriver test cases fail in Eclipse unless a property is added in run config</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slider">Steven K. Wong</assignee>
                                    <reporter username="slider">Steven K. Wong</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Sep 2010 01:49:08 +0000</created>
                <updated>Sat, 17 Dec 2011 00:00:50 +0000</updated>
                            <resolved>Mon, 20 Sep 2010 22:56:10 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12912697" author="slider" created="Mon, 20 Sep 2010 20:34:04 +0000"  >&lt;p&gt;Please review the attached patch.&lt;/p&gt;</comment>
                            <comment id="12912754" author="jvs" created="Mon, 20 Sep 2010 22:45:07 +0000"  >&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="12912756" author="jvs" created="Mon, 20 Sep 2010 22:56:10 +0000"  >&lt;p&gt;Committed.  Thanks Steven!&lt;/p&gt;</comment>
                            <comment id="12913139" author="slider" created="Tue, 21 Sep 2010 18:12:32 +0000"  >&lt;p&gt;Thanks, John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455077" name="HIVE-1656.1.patch" size="1438" author="slider" created="Mon, 20 Sep 2010 20:27:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Sep 2010 22:45:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123279</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1657] join results are displayed wrongly for some complex joins using select *</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1657</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Noticed that the output of the join is displayed wrongly for queries involving more than one table and mixture of left and outer joins, with different join conditions.&lt;/p&gt;

&lt;p&gt;For ex: SELECT * from T1 a RIGHT OUTER JOIN T2 b ON (a.value=b.value) LEFT OUTER JOIN T3 c ON (b.key=c.key);&lt;br/&gt;
displays the table T2 first, then T1 and T3.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474579">HIVE-1657</key>
            <summary>join results are displayed wrongly for some complex joins using select *</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amareshwari">Amareshwari Sriramadasu</assignee>
                                    <reporter username="amareshwari">Amareshwari Sriramadasu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Sep 2010 10:06:37 +0000</created>
                <updated>Sat, 17 Dec 2011 00:01:16 +0000</updated>
                            <resolved>Fri, 29 Oct 2010 21:36:12 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12912425" author="amareshwari" created="Mon, 20 Sep 2010 10:09:13 +0000"  >&lt;p&gt;Here is a usecase:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select * from table1;
12      35
NULL    36
48      40
40      40
NULL    45
100     100

hive&amp;gt; select * from myinput1;
12      35
NULL    40
48      NULL
100     100

hive&amp;gt; SELECT * from table1 a RIGHT OUTER JOIN myinput1 b ON (a.value=b.value) LEFT OUTER JOIN table1 c ON (b.key=c.key);
NULL    40      48      40      NULL    NULL
NULL    40      40      40      NULL    NULL
12      35      12      35      12      35
48      NULL    NULL    NULL    48      40
100     100     100     100     100     100

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12913221" author="jvs" created="Tue, 21 Sep 2010 20:21:29 +0000"  >&lt;p&gt;I&apos;ve confirmed this as a bug by comparing the behavior with MySQL.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mysql&amp;gt; select * from table1;
+------+------+
| k    | v    |
+------+------+
|   12 |   35 | 
| NULL |   36 | 
|   48 |   40 | 
|   40 |   40 | 
| NULL |   45 | 
|  100 |  100 | 
+------+------+
6 rows in set (0.00 sec)

mysql&amp;gt; select * from myinput1;
+------+------+
| k    | v    |
+------+------+
|   12 |   35 | 
| NULL |   40 | 
|   48 | NULL | 
|  100 |  100 | 
+------+------+
4 rows in set (0.00 sec)

mysql&amp;gt; select * from table1 a right outer join myinput1 b on (a.v=b.v) left outer join table1 c on (b.k=c.k);
+------+------+------+------+------+------+
| k    | v    | k    | v    | k    | v    |
+------+------+------+------+------+------+
|   12 |   35 |   12 |   35 |   12 |   35 | 
|   48 |   40 | NULL |   40 | NULL | NULL | 
|   40 |   40 | NULL |   40 | NULL | NULL | 
| NULL | NULL |   48 | NULL |   48 |   40 | 
|  100 |  100 |  100 |  100 |  100 |  100 | 
+------+------+------+------+------+------+
5 rows in set (0.00 sec)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12925782" author="amareshwari" created="Thu, 28 Oct 2010 11:37:41 +0000"  >&lt;p&gt;The problem is in generating &quot;select &amp;#42;&quot; plan. Currently, select &amp;#42; looks at the row resolver of the previous operator and adds all the columns to the output. Instead, it should add them in the order of aliases/table-names specified in the query.&lt;/p&gt;</comment>
                            <comment id="12926200" author="amareshwari" created="Fri, 29 Oct 2010 07:53:01 +0000"  >&lt;p&gt;Here is a patch to add the output columns for select plan in the order of aliases specified in the query.&lt;/p&gt;</comment>
                            <comment id="12926345" author="namit" created="Fri, 29 Oct 2010 16:55:01 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;The changes look good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12926467" author="namit" created="Fri, 29 Oct 2010 21:36:12 +0000"  >&lt;p&gt;Committed. Thanks Amareshwari&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12458315" name="patch-1657.txt" size="13147" author="amareshwari" created="Fri, 29 Oct 2010 07:53:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Sep 2010 20:21:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123280</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1658] Fix describe [extended] column formatting</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1658</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When displaying the column schema, the formatting should follow should be &lt;/p&gt;

&lt;p&gt;name&amp;lt;TAB&amp;gt;type&amp;lt;TAB&amp;gt;comment&amp;lt;NEWLINE&amp;gt;&lt;/p&gt;

&lt;p&gt;to be inline with the previous formatting style for backward compatibility.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474647">HIVE-1658</key>
            <summary>Fix describe [extended] column formatting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiruvel">Thiruvel Thirumoolan</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 01:19:57 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:32 +0000</updated>
                            <resolved>Wed, 13 Oct 2010 04:28:05 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                            <comments>
                            <comment id="12912809" author="pauly" created="Tue, 21 Sep 2010 01:55:40 +0000"  >&lt;p&gt;Actually, this JIRA is more about handling backward compatibility. It&apos;s possible that there things (JDBC? scripts?) that parsed the text output and depended on the old style.&lt;/p&gt;</comment>
                            <comment id="12912846" author="namit" created="Tue, 21 Sep 2010 05:53:04 +0000"  >&lt;p&gt;Thiruvel, this is a show-stopper for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-558&quot; title=&quot;describe extended table/partition output is cryptic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-558&quot;&gt;&lt;del&gt;HIVE-558&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
The schema for describe and describe extended cannot be changed.&lt;/p&gt;

&lt;p&gt;You can add NULLs at the beginning/end, but the number of columns have to be maintained&lt;/p&gt;</comment>
                            <comment id="12913043" author="thiruvel" created="Tue, 21 Sep 2010 15:46:32 +0000"  >&lt;p&gt;ok, will revert back the formatting of the columns (partitions also) and will leave the rest of the changes as is. That would mean the headers also will go away, the formatting doesnt look good with them and tab alone as separator.&lt;/p&gt;</comment>
                            <comment id="12913315" author="pauly" created="Tue, 21 Sep 2010 23:59:41 +0000"  >&lt;p&gt;Maybe another option is to have a pretty qualifier? To get your output, the user would have to type something like &apos;pretty describe &amp;lt;tablename&amp;gt;&apos;. Otherwise everything defaults to normal.&lt;/p&gt;</comment>
                            <comment id="12913662" author="namit" created="Wed, 22 Sep 2010 16:51:33 +0000"  >&lt;p&gt;@Thiruvel, can we keep the new output in the old format.&lt;br/&gt;
I mean, we just have to make sure that the output has 3 columns separated by a delimiter.&lt;/p&gt;

&lt;p&gt;So, if your current output is &apos;x&apos;, you can replace it with:&lt;/p&gt;

&lt;p&gt;&amp;lt;TAB&amp;gt;x&amp;lt;TAB&amp;gt;&lt;/p&gt;

&lt;p&gt;An implicit null at the beginning and end.&lt;/p&gt;

</comment>
                            <comment id="12913668" author="nzhang" created="Wed, 22 Sep 2010 17:10:39 +0000"  >&lt;p&gt;+1 on keeping the old format but add a &quot;pretty operator&quot; as the child of the explain, so that the execution plan for the EXPLAIN is an explain operator (with the old formatting) followed by an optional &quot;pretty operator&quot; taking the output and do further formatting. &lt;/p&gt;</comment>
                            <comment id="12915437" author="nzhang" created="Mon, 27 Sep 2010 19:07:18 +0000"  >&lt;p&gt;Another issue is that now &apos;desc extended&apos; displays table/partition parameters in different lines. Since parameters is using a unordered map implementation, it will give non-deterministic display of those parameters. It will be great if the pretty operator will take care of ordering as well.&lt;/p&gt;</comment>
                            <comment id="12916207" author="namit" created="Wed, 29 Sep 2010 17:19:37 +0000"  >&lt;p&gt;Thiruvel, any updates on this - we need it urgently in order to deploy &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-558&quot; title=&quot;describe extended table/partition output is cryptic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-558&quot;&gt;&lt;del&gt;HIVE-558&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12916513" author="thiruvel" created="Thu, 30 Sep 2010 15:25:08 +0000"  >&lt;p&gt;Sorry folks, was out sick for more than a week. Will upload a patch tomorrow.&lt;/p&gt;</comment>
                            <comment id="12916992" author="thiruvel" created="Fri, 1 Oct 2010 18:27:47 +0000"  >&lt;p&gt;Patch under works.&lt;/p&gt;

&lt;p&gt;Changes:&lt;/p&gt;

&lt;p&gt;1. &apos;describe&apos; &amp;amp; &apos;describe extended&apos; outputs will be the same as pre &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-558&quot; title=&quot;describe extended table/partition output is cryptic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-558&quot;&gt;&lt;del&gt;HIVE-558&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
2. &apos;describe formatted&apos; will use the new format for displaying columns and additional information.&lt;/p&gt;

&lt;p&gt;Will implement the changes similar to how extended is implemented, using a boolean in DescTableDesc to denote the formatted keyword and formatting the output in DDLTask.describeTable.&lt;/p&gt;</comment>
                            <comment id="12917048" author="thiruvel" created="Fri, 1 Oct 2010 21:49:58 +0000"  >&lt;p&gt;Preliminary patch on the above mentioned approach - felt this one to be easier. Comments welcome.&lt;/p&gt;

&lt;p&gt;The code needs to be reorganized and cleaned, but I wanted to upload patch before I sign off for the day. Will proceed with test cases on confirmation of the approach.&lt;/p&gt;</comment>
                            <comment id="12917725" author="he yongqiang" created="Mon, 4 Oct 2010 19:32:11 +0000"  >&lt;p&gt;+1. Looks good. Can you do the final patch?&lt;/p&gt;</comment>
                            <comment id="12917771" author="he yongqiang" created="Mon, 4 Oct 2010 21:25:59 +0000"  >&lt;p&gt;one more thing, if the time information (create time, last access time etc) is 0, can you put some string like &quot;unknown&quot; to the output of desc format?&lt;/p&gt;</comment>
                            <comment id="12919307" author="thiruvel" created="Fri, 8 Oct 2010 15:31:50 +0000"  >&lt;p&gt;Cleaned up the code a little bit, will display UNKNOWN if time is 0. Will upload patch for test output tomm.&lt;/p&gt;</comment>
                            <comment id="12919309" author="thiruvel" created="Fri, 8 Oct 2010 15:32:52 +0000"  >&lt;p&gt;Was writing shell scripts this week that rely on the schema output and there is no straight forward way to differentiate partitions and columns.&lt;/p&gt;

&lt;p&gt;What do folks think on adding another column &quot;flags&quot; that displays &quot;-&quot;/&quot;part&quot;? We can add additional tags too later (sort..) if necessary. If I can&apos;t get to this tomm, will address it through another JIRA.&lt;/p&gt;</comment>
                            <comment id="12920189" author="thiruvel" created="Tue, 12 Oct 2010 13:39:06 +0000"  >&lt;p&gt;The patch is ready and tests are running. Will upload patch when tests complete.&lt;/p&gt;</comment>
                            <comment id="12920346" author="nzhang" created="Tue, 12 Oct 2010 21:03:28 +0000"  >&lt;p&gt;Thanks Thiruvel! I will take a look. Does this patch subsume &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1669&quot; title=&quot;non-deterministic display of storage parameter in test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1669&quot;&gt;&lt;del&gt;HIVE-1669&lt;/del&gt;&lt;/a&gt;? &lt;/p&gt;</comment>
                            <comment id="12920384" author="thiruvel" created="Tue, 12 Oct 2010 22:32:15 +0000"  >&lt;p&gt;Changelog:&lt;/p&gt;

&lt;p&gt;1. Updated code changes attached. Fixed a bug in DDLTask that was in last patch.&lt;br/&gt;
2. Added describe_table.q test to test various desc scenarios.&lt;br/&gt;
3. Updated create_view.q to also include &apos;desc formatted&apos; for views.&lt;br/&gt;
4. hbase_stats.q had a bug and was failing from a fresh checkout too. Have fixed it.&lt;br/&gt;
5. All other changes are updates to test output.&lt;/p&gt;

&lt;p&gt;desc table - This retains the old behavior.&lt;br/&gt;
&amp;lt;field name&amp;gt;&amp;lt;tab&amp;gt;&amp;lt;type&amp;gt;&amp;lt;tab&amp;gt;&amp;lt;comment&amp;gt;&lt;br/&gt;
&amp;lt;field name&amp;gt;&amp;lt;tab&amp;gt;&amp;lt;type&amp;gt;&amp;lt;tab&amp;gt;   # if no comment&lt;/p&gt;</comment>
                            <comment id="12920385" author="thiruvel" created="Tue, 12 Oct 2010 22:33:06 +0000"  >&lt;p&gt;@ Ning: Yes, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1658&quot; title=&quot;Fix describe [extended] column formatting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1658&quot;&gt;&lt;del&gt;HIVE-1658&lt;/del&gt;&lt;/a&gt;_3.patch includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1669&quot; title=&quot;non-deterministic display of storage parameter in test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1669&quot;&gt;&lt;del&gt;HIVE-1669&lt;/del&gt;&lt;/a&gt; changes too.&lt;/p&gt;</comment>
                            <comment id="12920406" author="nzhang" created="Wed, 13 Oct 2010 00:35:37 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="12920433" author="nzhang" created="Wed, 13 Oct 2010 04:28:04 +0000"  >&lt;p&gt;Committed. Thanks Thiruvel!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12456161" name="HIVE-1658-PrelimPatch.patch" size="7020" author="thiruvel" created="Fri, 1 Oct 2010 21:49:58 +0000"/>
                            <attachment id="12456709" name="HIVE-1658_1.patch" size="9981" author="thiruvel" created="Fri, 8 Oct 2010 15:31:50 +0000"/>
                            <attachment id="12457022" name="HIVE-1658_3.patch" size="890671" author="thiruvel" created="Tue, 12 Oct 2010 22:32:15 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12475089">HIVE-1669</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Sep 2010 05:53:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123281</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1659] parse_url_tuple:  a UDTF version of parse_url</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1659</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The UDF parse_url take s a URL, parse it and extract QUERY/PATH etc from it. However it can only extract an atomic value from the URL. If we want to extract multiple piece of information, we need to call the function many times. It is desirable to parse the URL once and extract all needed information and return a tuple in a UDTF. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12474722">HIVE-1659</key>
            <summary>parse_url_tuple:  a UDTF version of parse_url</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 16:46:28 +0000</created>
                <updated>Sat, 17 Dec 2011 00:01:14 +0000</updated>
                            <resolved>Fri, 24 Sep 2010 21:02:06 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12913081" author="nzhang" created="Tue, 21 Sep 2010 17:03:44 +0000"  >&lt;p&gt;parse_url currently support 2 signatures: parse_url(fullurl, &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;QUERY|PATH|HOST|...&amp;#93;&lt;/span&gt;&apos;) and parse_url(fullurl, &apos;QUERY&apos;, &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;ref|sk|...&amp;#93;&lt;/span&gt;&apos;). In parse_url_tuple, the syntax is consolidated as parse_url_tuple(fullurl, &apos;HOST&apos;, &apos;PATH&apos;, &apos;QUERY:ref&apos;, &apos;QUERY:sk&apos;,...). &lt;/p&gt;</comment>
                            <comment id="12914330" author="jxvenus73" created="Fri, 24 Sep 2010 05:13:00 +0000"  >&lt;p&gt;Add new function parse_url_tuple for HIVE.&lt;/p&gt;</comment>
                            <comment id="12914337" author="nzhang" created="Fri, 24 Sep 2010 05:44:30 +0000"  >&lt;p&gt;Xing, the patch was not attached. Can you use the link &quot;Attach file&quot; in the left pane?&lt;/p&gt;</comment>
                            <comment id="12914354" author="jxvenus73" created="Fri, 24 Sep 2010 06:37:05 +0000"  >&lt;p&gt;This patch contains implementation of parse_url_tuple function, as well as a test file and a test output.&lt;/p&gt;</comment>
                            <comment id="12914358" author="nzhang" created="Fri, 24 Sep 2010 06:46:33 +0000"  >&lt;p&gt;Xing, this patch doesn&apos;t apply cleanly with the latest trunk. Can you &apos;svn up&apos; and regenerate the patch. You may need to resolve any conflicts after &apos;svn up&apos;.&lt;/p&gt;</comment>
                            <comment id="12914360" author="nzhang" created="Fri, 24 Sep 2010 06:48:46 +0000"  >&lt;p&gt;Also when you generate the patch, you need to run &apos;svn diff&apos; at the &quot;root&quot; directory of the hive trunk. &lt;/p&gt;</comment>
                            <comment id="12914576" author="jxvenus73" created="Fri, 24 Sep 2010 18:27:13 +0000"  >&lt;p&gt;generate patch after &apos;svn up&apos; and in root directory&lt;/p&gt;</comment>
                            <comment id="12914602" author="nzhang" created="Fri, 24 Sep 2010 19:17:58 +0000"  >&lt;p&gt;Xing, there is a diff in show_functions.q. You need to overwrite the .out file with the addition of the new function. The following command will update the out file. &lt;/p&gt;

&lt;p&gt; ant test -Dtestcase=TestCliDriver -Dqfile=show_functions.q -Doverwrite=true&lt;/p&gt;

&lt;p&gt;Can you regenerate the patch after that?&lt;/p&gt;</comment>
                            <comment id="12914609" author="jxvenus73" created="Fri, 24 Sep 2010 19:30:39 +0000"  >&lt;p&gt;update show_functions.q and &apos;svn up&apos; again. Thanks. Do I need to run all unitests on my machine?&lt;/p&gt;</comment>
                            <comment id="12914645" author="nzhang" created="Fri, 24 Sep 2010 21:02:06 +0000"  >&lt;p&gt;Committed. Thanks Xing!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455468" name="HIVE-1659.patch" size="46665" author="jxvenus73" created="Fri, 24 Sep 2010 06:37:05 +0000"/>
                            <attachment id="12455508" name="HIVE-1659.patch2" size="46454" author="jxvenus73" created="Fri, 24 Sep 2010 18:27:13 +0000"/>
                            <attachment id="12455513" name="HIVE-1659.patch3" size="46927" author="jxvenus73" created="Fri, 24 Sep 2010 19:30:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Sep 2010 05:13:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72789</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123282</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1660] Change get_partitions_ps to pass partition filter to database</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1660</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Support for doing partition pruning by passing the partition filter to the database is added by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1609&quot; title=&quot;Support partition filtering in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1609&quot;&gt;&lt;del&gt;HIVE-1609&lt;/del&gt;&lt;/a&gt;. Changing get_partitions_ps to use this could result in performance improvement  for tables having large number of partitions. A listPartitionNamesByFilter API might be required for implementing this for use from Hive.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474730">HIVE-1660</key>
            <summary>Change get_partitions_ps to pass partition filter to database</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="ajaykidave">Ajay Kidave</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 17:27:44 +0000</created>
                <updated>Sat, 17 Dec 2011 00:01:04 +0000</updated>
                            <resolved>Tue, 19 Oct 2010 18:03:00 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12920797" author="pauly" created="Wed, 13 Oct 2010 22:56:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt;.1.patch is the main patch - it create a listPartitionNamesByFilter() method and fixes get_partitions_ps() and get_partition_names_ps() to use the new filter API&apos;s. In addition, the patch makes an optimization to use a partition name regex for filtering in cases of equality comparisons.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt;_regex.patch was a little experiment to test out the potential speed up from filtering based on a more complete regex of the partition name. For example, for a table partitioned on ds and hr, this patch uses a regex like &apos;ds=2010-10-01/hr=.*&apos; to find all partitions with a ds=&apos;2010-10-01&apos;. For a table with ~5 million partitions and ~15K partitions a day, getting the partitions for a single day took ~1s with this regex patch vs ~10s for the filter patch. Since the table with 5 million partitions was a very unusual case, I didn&apos;t think the speedup was worth the additional complexity.&lt;/p&gt;</comment>
                            <comment id="12920807" author="namit" created="Wed, 13 Oct 2010 23:26:16 +0000"  >&lt;p&gt;I will take a look&lt;/p&gt;</comment>
                            <comment id="12921063" author="namit" created="Thu, 14 Oct 2010 18:20:20 +0000"  >&lt;p&gt;The following tests failed:&lt;/p&gt;

&lt;p&gt;bucket3.q&lt;br/&gt;
stats10.q&lt;br/&gt;
stats2.q&lt;br/&gt;
stats8.q&lt;br/&gt;
union22.q&lt;/p&gt;


&lt;p&gt;reduce_deduplicate.q (in minimr)&lt;/p&gt;


&lt;p&gt;input2.q, input3.q (TestParse)&lt;/p&gt;</comment>
                            <comment id="12921629" author="pauly" created="Sat, 16 Oct 2010 04:13:05 +0000"  >&lt;ul&gt;
	&lt;li&gt;Fixed causes of test failures&lt;/li&gt;
	&lt;li&gt;Fixed bugs with the filter optimization&lt;/li&gt;
	&lt;li&gt;Added additional test cases&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll submit the patch once the full test suite completes.&lt;/p&gt;</comment>
                            <comment id="12921634" author="namit" created="Sat, 16 Oct 2010 05:04:36 +0000"  >&lt;p&gt;Paul, the patch does not apply cleanly. Can you refresh ?&lt;/p&gt;</comment>
                            <comment id="12922404" author="pauly" created="Tue, 19 Oct 2010 01:49:16 +0000"  >&lt;p&gt;Full suite passed on my end&lt;/p&gt;</comment>
                            <comment id="12922405" author="pauly" created="Tue, 19 Oct 2010 01:50:06 +0000"  >&lt;p&gt;Also, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt;.4.patch is the refreshed version.&lt;/p&gt;</comment>
                            <comment id="12922643" author="namit" created="Tue, 19 Oct 2010 18:03:00 +0000"  >&lt;p&gt;Committed. Thanks Paul&lt;/p&gt;</comment>
                            <comment id="12976369" author="jvs" created="Fri, 31 Dec 2010 23:57:35 +0000"  >&lt;p&gt;Namit, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt;.4.patch contains no reference to hbase_pushdown.q.out.  However, your commit did change that file:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1024341&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1024341&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am guessing that the commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1638&quot; title=&quot;convert commonly used udfs to generic udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1638&quot;&gt;&lt;del&gt;HIVE-1638&lt;/del&gt;&lt;/a&gt; (close in time) broke this test, and then you updated the log file as part of this commit.&lt;/p&gt;</comment>
                            <comment id="12976605" author="jvs" created="Mon, 3 Jan 2011 04:33:28 +0000"  >&lt;p&gt;Amendment is in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1874&quot; title=&quot;fix HBase filter pushdown broken by HIVE-1638&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1874&quot;&gt;&lt;del&gt;HIVE-1874&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457102" name="HIVE-1660.1.patch" size="28686" author="pauly" created="Wed, 13 Oct 2010 22:41:12 +0000"/>
                            <attachment id="12457111" name="HIVE-1660.2.patch" size="28538" author="pauly" created="Wed, 13 Oct 2010 23:23:20 +0000"/>
                            <attachment id="12457320" name="HIVE-1660.3.patch" size="36759" author="pauly" created="Sat, 16 Oct 2010 04:13:05 +0000"/>
                            <attachment id="12457424" name="HIVE-1660.4.patch" size="36322" author="pauly" created="Mon, 18 Oct 2010 07:59:05 +0000"/>
                            <attachment id="12457103" name="HIVE-1660_regex.patch" size="31630" author="pauly" created="Wed, 13 Oct 2010 22:43:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Oct 2010 22:56:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1661] Default values for parameters</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1661</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be good to have a default value for some hive parameters:&lt;/p&gt;

&lt;p&gt;say RETENTION to be 30 days.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474755">HIVE-1661</key>
            <summary>Default values for parameters</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sdong">Siying Dong</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 20:48:36 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:46 +0000</updated>
                            <resolved>Thu, 23 Sep 2010 17:09:36 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12913711" author="sdong" created="Wed, 22 Sep 2010 18:40:03 +0000"  >&lt;p&gt;Clear the codes modified by Eclipse&lt;/p&gt;</comment>
                            <comment id="12913726" author="namit" created="Wed, 22 Sep 2010 19:11:57 +0000"  >&lt;p&gt;Yongqiang, can you take a look at this ?&lt;/p&gt;</comment>
                            <comment id="12913791" author="he yongqiang" created="Wed, 22 Sep 2010 21:05:42 +0000"  >&lt;p&gt;+1, looks good.&lt;/p&gt;</comment>
                            <comment id="12914101" author="he yongqiang" created="Thu, 23 Sep 2010 17:09:36 +0000"  >&lt;p&gt;committed! Thanks Siying!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455285" name="HIVE-1661.1.patch" size="17000" author="sdong" created="Wed, 22 Sep 2010 18:34:39 +0000"/>
                            <attachment id="12455287" name="HIVE-1661.2.patch" size="10798" author="sdong" created="Wed, 22 Sep 2010 18:43:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Sep 2010 18:40:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123284</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1662] Add file pruning into Hive.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1662</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;now hive support filename virtual column. &lt;br/&gt;
if a file name filter presents in a query, hive should be able to only add files which passed the filter to input paths.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474757">HIVE-1662</key>
            <summary>Add file pruning into Hive.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 21:29:28 +0000</created>
                <updated>Sun, 31 Dec 2017 09:35:03 +0000</updated>
                                                                                <due></due>
                            <votes>3</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13571178" author="phabricator@reviews.facebook.net" created="Tue, 5 Feb 2013 09:26:12 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1662&quot; title=&quot;Add file pruning into Hive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1662&quot;&gt;HIVE-1662&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add file pruning into Hive.&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;DPAL-1979 Add file pruning based on INPUT_&lt;em&gt;FILE&lt;/em&gt;_NAME&lt;/p&gt;

&lt;p&gt;now hive support filename virtual column.&lt;br/&gt;
if a file name filter presents in a query, hive should be able to only add files which passed the filter to input paths.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/NativeTablePredicateHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/file_pruning.q&lt;br/&gt;
  ql/src/test/results/clientpositive/file_pruning.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/20493/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/20493/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13571989" author="phabricator@reviews.facebook.net" created="Wed, 6 Feb 2013 00:43:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1662&quot; title=&quot;Add file pruning into Hive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1662&quot;&gt;HIVE-1662&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add file pruning into Hive.&quot;.&lt;/p&gt;

&lt;p&gt;  Fixed NPEs&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391?vs=27249&amp;amp;id=27273#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391?vs=27249&amp;amp;id=27273#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/NativeTablePredicateHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/file_pruning.q&lt;br/&gt;
  ql/src/test/results/clientpositive/file_pruning.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13595482" author="jsensarma" created="Thu, 7 Mar 2013 02:58:53 +0000"  >&lt;p&gt;question - Utilities.getInputSummary() doesn&apos;t go through CHIF AFAIK (looking at 0.8 code). will reducer estimation work with this patch?&lt;/p&gt;</comment>
                            <comment id="13595488" author="navis" created="Thu, 7 Mar 2013 03:05:26 +0000"  >&lt;p&gt;Ah, I didn&apos;t considered that. Thanks.&lt;/p&gt;</comment>
                            <comment id="13596902" author="phabricator@reviews.facebook.net" created="Fri, 8 Mar 2013 06:54:12 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1662&quot; title=&quot;Add file pruning into Hive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1662&quot;&gt;HIVE-1662&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add file pruning into Hive.&quot;.&lt;/p&gt;

&lt;p&gt;  Addressed comments&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391?vs=27273&amp;amp;id=29427#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391?vs=27273&amp;amp;id=29427#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/NativeTablePredicateHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/CommonJoinResolver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/file_pruning.q&lt;br/&gt;
  ql/src/test/results/clientpositive/file_pruning.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13596926" author="phabricator@reviews.facebook.net" created="Fri, 8 Mar 2013 07:48:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1662&quot; title=&quot;Add file pruning into Hive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1662&quot;&gt;HIVE-1662&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add file pruning into Hive.&quot;.&lt;/p&gt;

&lt;p&gt;  Added test &amp;amp; removed some noises&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391?vs=29427&amp;amp;id=29433#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391?vs=29427&amp;amp;id=29433#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/NativeTablePredicateHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/CommonJoinResolver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/file_pruning.q&lt;br/&gt;
  ql/src/test/results/clientpositive/file_pruning.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13603487" author="rajatjain" created="Fri, 15 Mar 2013 16:25:31 +0000"  >&lt;p&gt;We are following this patch because we wanted to implement something similar. Is it possible if we can do the pruning much before this step - in GenMapRedUtils.setTaskPlan. This will take care of the reducer estimation as well. Are there any issues with this?&lt;/p&gt;</comment>
                            <comment id="13684563" author="phabricator@reviews.facebook.net" created="Sun, 16 Jun 2013 03:53:21 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1662&quot; title=&quot;Add file pruning into Hive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1662&quot;&gt;HIVE-1662&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add file pruning into Hive.&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391?vs=29433&amp;amp;id=34785#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391?vs=29433&amp;amp;id=34785#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/FilePrunningPredicateHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/AbstractJoinTaskDispatcher.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/file_pruning.q&lt;br/&gt;
  ql/src/test/results/clientpositive/file_pruning.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13733051" author="navis" created="Thu, 8 Aug 2013 01:51:36 +0000"  >&lt;p&gt;Cannot run one test by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13733053" author="phabricator@reviews.facebook.net" created="Thu, 8 Aug 2013 01:54:48 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1662&quot; title=&quot;Add file pruning into Hive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1662&quot;&gt;HIVE-1662&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add file pruning into Hive.&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391?vs=34785&amp;amp;id=37323#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391?vs=34785&amp;amp;id=37323#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/FilePrunningPredicateHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/AbstractJoinTaskDispatcher.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/MapReduceCompiler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/file_pruning.q&lt;br/&gt;
  ql/src/test/results/clientpositive/file_pruning.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13733120" author="appodictic" created="Thu, 8 Aug 2013 04:05:02 +0000"  >&lt;p&gt;+1 will commit in 24 hours.&lt;/p&gt;</comment>
                            <comment id="13733981" author="hiveqa" created="Thu, 8 Aug 2013 21:03:22 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12596758/HIVE-1662.D8391.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12596758/HIVE-1662.D8391.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 292 failed/errored test(s), 2769 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_ppd
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sort_merge_join_desc_6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap_auto
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_quote1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_second
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input11_limit
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_map_ppr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_outer_join4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_select_unquote_or
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_19
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_filter_join_breaktask
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_to_unix_timestamp
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_ppr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join4
org.apache.hadoop.hive.ql.parse.TestParse.testParse_udf1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_lateralview
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_metadataonly1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_11
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_dyn_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_filters_overlap
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join34
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_view
org.apache.hadoop.hive.ql.parse.TestParse.testParse_cast1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_map_ppr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_skew_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_distinct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_join2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_grouping_sets4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_select_unquote_and
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_notequal
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sort_merge_join_desc_5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part0
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nestedvirtual
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join41
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join26
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cluster
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join0
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32_lessSize
org.apache.hadoop.hive.ql.parse.TestParse.testParse_join4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_nullsafe
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonmr_fetch
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input25
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union26
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_implicit_cast1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_transform_ppr2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join0
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_no_hooks
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join28
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynamic_partition_skip_default
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_join3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_6
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input_part1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_date2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_rcfile_null_value
org.apache.hadoop.hive.ql.parse.TestParse.testParse_join8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_subquery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_insert_move_tasks_share_dependencies
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_like
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join21
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_position
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_18
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sort_merge_join_desc_7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup4
org.apache.hadoop.hive.ql.parse.TestParse.testParse_sample1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_minute
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_gby2
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver_dboutput
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_notable_alias2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert2_overwrite_partitions
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_router_join_ppr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join28
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_filter_on_outerjoin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_self_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_set_variable_sub
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_combine2_hadoop20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input42
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join35
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_testxpath4
org.apache.hadoop.hive.ql.parse.TestParse.testParse_join7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_regex_col
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join40
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_union
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_21
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_multi_single_reducer3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup4_multi_distinct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_query_result_fileformat
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cast1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input28
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_smb_mapjoin_14
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_columnstats_partlvl
org.apache.hadoop.hive.ql.parse.TestParse.testParse_subq
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppr_allchildsarenull
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join14_hadoop20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_lower
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_noalias_subq1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_insert
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input2_limit
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input_testxpath2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join27
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_gby
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join38
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_4
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_ppr_multi_distinct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_clusterby
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_pcr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_between
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_wise_fileformat2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin_negative
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_multi_single_reducer2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sort_merge_join_desc_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_const_type
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join39
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join23
org.apache.hadoop.hive.ql.parse.TestParse.testParse_sample7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_having
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_union_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_map_ppr_multi_distinct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_louter_join_ppr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_alter_partition_coltype
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucket_groupby
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_outer_join1
org.apache.hadoop.hive.ql.parse.TestParse.testParse_case_sensitivity
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_insert_gby
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_allcolref_in_udf
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_isnull_isnotnull
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join16
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucket3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join14_hadoop20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sort_merge_join_desc_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_rand_partitionpruner3
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union33
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert1_overwrite_partitions
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subq
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_decimal_udf
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input26
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf9
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver_serde_typedbytes4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union25
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_date
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input24
org.apache.hadoop.hive.ql.parse.TestParse.testParse_union
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join33
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_notable_alias1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppr_pushdown3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_testxpath2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union22
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_14
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_create_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_set_processor_namespaces
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join6
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_num_buckets
org.apache.hadoop.hive.ql.parse.TestParse.testParse_join5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_outer_join2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_bucket_mapjoin_mismatch1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join29
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_empty_dyn_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sort_merge_join_desc_4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_parse_url
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_random
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_hour
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_25
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join19
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input39_hadoop20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_explain_logical
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_select_unquote_not
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables_compact
org.apache.hadoop.hive.ql.parse.TestParse.testParse_join6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union24
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join21
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ctas_colname
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sort_merge_join_desc_3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join7
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_constant_where
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join19
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input23
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_semijoin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_repeated_alias
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_case_sensitivity
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_reduce_deduplicate
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_size
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_gby_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subq2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_vc
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_column_access_stats
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_queries
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucketmapjoin7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_lateral_view_ppd
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_ppr
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketmapjoin9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_outer_join5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_10_trims
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_udf_case
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join16
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_skewjoin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join23
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_udf_col
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/341/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/341/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/341/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/341/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests failed with: TestsFailedException: 292 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13734378" author="phabricator@reviews.facebook.net" created="Fri, 9 Aug 2013 04:16:48 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1662&quot; title=&quot;Add file pruning into Hive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1662&quot;&gt;HIVE-1662&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add file pruning into Hive.&quot;.&lt;/p&gt;

&lt;p&gt;  Fixed test fails&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8391?vs=37323&amp;amp;id=37407#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8391?vs=37323&amp;amp;id=37407#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/FilePrunningPredicateHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/AbstractJoinTaskDispatcher.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/MapReduceCompiler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/file_pruning.q&lt;br/&gt;
  ql/src/test/results/clientpositive/file_pruning.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13734816" author="appodictic" created="Fri, 9 Aug 2013 14:09:50 +0000"  >&lt;p&gt;Will review and hopefully not break the build. &lt;/p&gt;</comment>
                            <comment id="13734847" author="hiveqa" created="Fri, 9 Aug 2013 14:33:42 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12597024/HIVE-1662.D8391.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12597024/HIVE-1662.D8391.7.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 2774 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/361/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/361/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/361/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/361/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13734875" author="appodictic" created="Fri, 9 Aug 2013 15:11:17 +0000"  >&lt;p&gt;Can you change this typo here:&lt;br/&gt;
 HIVEPPDFILESREVOVEFILTER(&quot;hive.optimize.ppd.vc.filename.remove.filter&quot;, false),&lt;/p&gt;

&lt;p&gt;Otherwise +1&lt;/p&gt;
</comment>
                            <comment id="13735739" author="appodictic" created="Sat, 10 Aug 2013 04:25:44 +0000"  >&lt;p&gt;Fixed typo in enum&lt;/p&gt;</comment>
                            <comment id="13735933" author="hiveqa" created="Sat, 10 Aug 2013 14:54:59 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12597252/HIVE-1662.8.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12597252/HIVE-1662.8.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 2775 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_reducers_power_two
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/382/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/382/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/382/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/382/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests failed with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13866428" author="hiveqa" created="Thu, 9 Jan 2014 08:03:12 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12622087/HIVE-1662.9.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12622087/HIVE-1662.9.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 4905 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_file_pruning
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input28
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_metadataonly1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nestedvirtual
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_date
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_date2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_varchar1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_semijoin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/834/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/834/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/834/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/834/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12622087&lt;/p&gt;</comment>
                            <comment id="13868052" author="sershe" created="Fri, 10 Jan 2014 18:03:08 +0000"  >&lt;p&gt;some feedback on RB&lt;/p&gt;</comment>
                            <comment id="13869382" author="lefty@hortonworks.com" created="Mon, 13 Jan 2014 09:36:53 +0000"  >&lt;p&gt;This adds hive.optimize.ppd.vc.filename in HiveConf.java, so documentation should be added in hive-default.xml.template (and the wiki, but that&apos;s not part of the patch).&lt;/p&gt;</comment>
                            <comment id="13869385" author="hiveqa" created="Mon, 13 Jan 2014 09:44:44 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12622577/HIVE-1662.10.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12622577/HIVE-1662.10.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 30 failed/errored test(s), 4918 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join22
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join30
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join31
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_explain_rearrange
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join28
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join29
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join31
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32_lessSize
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join33
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join35
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_star
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_mapjoin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_subquery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_subquery2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_join_union
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonblock_op_deduplicate
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_reduce_deduplicate_exclude_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subq_where_serialization
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_in_having
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_context
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/878/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/878/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/878/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/878/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 30 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12622577&lt;/p&gt;</comment>
                            <comment id="13870067" author="sershe" created="Mon, 13 Jan 2014 22:26:11 +0000"  >&lt;p&gt;Patch looks reasonable to me but tests fail&lt;/p&gt;</comment>
                            <comment id="13870720" author="hiveqa" created="Tue, 14 Jan 2014 13:31:13 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12622758/HIVE-1662.11.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12622758/HIVE-1662.11.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 4925 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_bucketed_table
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/899/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/899/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/899/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/899/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12622758&lt;/p&gt;</comment>
                            <comment id="13920087" author="hiveqa" created="Tue, 4 Mar 2014 21:58:08 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12632450/HIVE-1662.12.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12632450/HIVE-1662.12.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 5240 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1619/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1619/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1619/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1619/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12632450&lt;/p&gt;</comment>
                            <comment id="13932776" author="lefty@hortonworks.com" created="Thu, 13 Mar 2014 01:52:44 +0000"  >&lt;p&gt;&lt;b&gt;hive.optimize.ppd.vc.filename&lt;/b&gt; still needs documentation (release note and hive-default.xml.template, unless this commits after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; in which case HiveConf.java will be changed and the doc goes in the parameter definition).&lt;/p&gt;</comment>
                            <comment id="13932793" author="navis" created="Thu, 13 Mar 2014 02:21:01 +0000"  >&lt;p&gt;I don&apos;t think this ever be committed.&lt;/p&gt;</comment>
                            <comment id="14042757" author="hiveqa" created="Tue, 24 Jun 2014 22:02:48 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652165/HIVE-1662.13.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652165/HIVE-1662.13.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 75 failed/errored test(s), 5670 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_windowing_windowspec
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_join0
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_join1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket4
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_count
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_create_merge_compressed
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_ctas
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_custom_input_output_format
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_disable_merge_for_bucketing
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_enforce_order
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_filter_join_breaktask
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_filter_join_breaktask2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_groupby1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_groupby2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_groupby3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_having
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_insert1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_insert_into1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_insert_into2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_join0
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_join1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_leftsemijoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_limit_pushdown
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_decimal
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapreduce1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapreduce2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_merge1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_merge2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_metadata_only_queries
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mrr
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_analyze
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_ptf
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_sample1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_script_env_var1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_script_env_var2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_script_pipe
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_scriptfile1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_counter
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_counter_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_noscan_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_subquery_exists
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_subquery_in
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_dml
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_fsstat
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_insert_overwrite_local_directory_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join_tests
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_joins_explain
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_schema_evolution
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_union
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform_ppr1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform_ppr2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union4
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union5
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union6
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union7
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union8
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union9
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_15
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/580/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/580/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/580/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/580/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-580/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-580/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 75 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652165&lt;/p&gt;</comment>
                            <comment id="14043068" author="hiveqa" created="Wed, 25 Jun 2014 05:45:03 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652324/HIVE-1662.14.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652324/HIVE-1662.14.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 14 failed/errored test(s), 5655 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_decimal_precision
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_neg_float
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_creation
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input45
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_limit_partition_metadataonly
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_metadataonly1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partInit
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_date
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_date2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_varchar1
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/585/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/585/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/585/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/585/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-585/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-585/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 14 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652324&lt;/p&gt;</comment>
                            <comment id="14043094" author="lefty@hortonworks.com" created="Wed, 25 Jun 2014 06:36:09 +0000"  >&lt;p&gt;Please supply a definition for &lt;b&gt;hive.optimize.ppd.vc.filename&lt;/b&gt; in hive-default.xml.template.  (Or is it an internal parameter that doesn&apos;t need documentation?)&lt;/p&gt;</comment>
                            <comment id="14043241" author="hiveqa" created="Wed, 25 Jun 2014 09:24:40 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652372/HIVE-1662.15.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652372/HIVE-1662.15.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/589/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/589/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/589/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/589/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-589/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-589/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-589/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;conf/hive-default.xml.template&apos;
Reverted &apos;metastore/src/java/org/apache/hadoop/hive/metastore/TServerSocketKeepAlive.java&apos;
Reverted &apos;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&apos;
Reverted &apos;service/src/java/org/apache/hive/service/auth/HiveAuthFactory.java&apos;
Reverted &apos;service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIService.java&apos;
Reverted &apos;service/src/java/org/apache/hive/service/cli/thrift/ThriftHttpCLIService.java&apos;
Reverted &apos;service/src/java/org/apache/hive/service/cli/thrift/ThriftBinaryCLIService.java&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ awk &apos;{print $2}&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-minikdc/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/core/target hcatalog/streaming/target hcatalog/server-extensions/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen contrib/target service/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target
+ svn update

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
External at revision 1605303.

At revision 1605302.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652372&lt;/p&gt;</comment>
                            <comment id="14044342" author="navis" created="Thu, 26 Jun 2014 04:41:23 +0000"  >&lt;p&gt;Rebased to trunk&lt;/p&gt;</comment>
                            <comment id="14044435" author="hiveqa" created="Thu, 26 Jun 2014 07:55:05 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652549/HIVE-1662.16.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652549/HIVE-1662.16.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 47 failed/errored test(s), 5670 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join18
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join18_multi_distinct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join22
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join25
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join27
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join30
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join31
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join_without_localtask
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_explain_rearrange
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input39
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join28
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join29
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join31
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32_lessSize
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join33
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join35
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_star
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_hook
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_mapjoin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_subquery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_subquery2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_join_union
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonblock_op_deduplicate
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_union_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_reduce_deduplicate_exclude_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subq_where_serialization
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_in_having
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_context
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_nested_mapjoin
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_entry_limit
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_size_limit
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/595/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/595/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/595/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/595/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-595/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-595/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 47 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652549&lt;/p&gt;</comment>
                            <comment id="14044493" author="navis" created="Thu, 26 Jun 2014 09:06:44 +0000"  >&lt;p&gt;Wish this is the final patch.&lt;/p&gt;</comment>
                            <comment id="14044963" author="hiveqa" created="Thu, 26 Jun 2014 18:12:42 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652584/HIVE-1662.17.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652584/HIVE-1662.17.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 5655 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_union_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_view
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_entry_limit
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_size_limit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/602/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/602/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/602/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/602/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-602/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-602/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652584&lt;/p&gt;</comment>
                            <comment id="14045656" author="lefty@hortonworks.com" created="Fri, 27 Jun 2014 07:25:17 +0000"  >&lt;p&gt;Or you could put the description of &lt;b&gt;hive.optimize.ppd.vc.filename&lt;/b&gt; in a HiveConf.java comment.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Please supply a definition for hive.optimize.ppd.vc.filename in hive-default.xml.template. (Or is it an internal parameter that doesn&apos;t need documentation?)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14051350" author="hiveqa" created="Thu, 3 Jul 2014 11:39:04 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12653796/HIVE-1662.18.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12653796/HIVE-1662.18.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5673 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/670/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/670/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/670/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/670/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-670/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-670/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12653796&lt;/p&gt;</comment>
                            <comment id="14392639" author="smartzjp" created="Thu, 2 Apr 2015 12:32:02 +0000"  >&lt;p&gt;has any final solution?&lt;/p&gt;</comment>
                            <comment id="16307158" author="alibov" created="Sun, 31 Dec 2017 09:19:14 +0000"  >&lt;p&gt;Anyone working on this? &lt;br/&gt;
It will greatly increase usability for external tables where the data is not generated by Hive.&lt;/p&gt;</comment>
                            <comment id="16307161" author="hiveqa" created="Sun, 31 Dec 2017 09:35:03 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12653796/HIVE-1662.18.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12653796/HIVE-1662.18.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/8391/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/8391/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/8391/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/8391/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-8391/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-8391/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-12-31 09:33:31.708
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-8391/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-12-31 09:33:31.710
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 035eca3 HIVE-18331 : Renew the Kerberos ticket used by Druid Query runner (Slim Bouguerra via Sergey Shelukhin)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 035eca3 HIVE-18331 : Renew the Kerberos ticket used by Druid Query runner (Slim Bouguerra via Sergey Shelukhin)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-12-31 09:33:36.750
+ rm -rf ../yetus
+ mkdir ../yetus
+ cp -R . ../yetus
+ mkdir /data/hiveptest/logs/PreCommit-HIVE-Build-8391/yetus
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: patch failed: common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:631
Falling back to three-way merge...
Applied patch to &apos;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&apos; with conflicts.
error: itests/qtest/testconfiguration.properties: does not exist in index
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/Context.java:37
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/Context.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java:1509
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java:515
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java:2170
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java:36
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java:39
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezTask.java:28
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezTask.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java:62
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java:19
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&apos; with conflicts.
error: ql/src/java/org/apache/hadoop/hive/ql/io/orc/ColumnStatisticsImpl.java: does not exist in index
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStoragePredicateHandler.java:18
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStoragePredicateHandler.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/AbstractJoinTaskDispatcher.java:124
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/AbstractJoinTaskDispatcher.java&apos; cleanly.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java:32
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/plan/MapWork.java:18
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/plan/MapWork.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java:18
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&apos; with conflicts.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java:67
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&apos; cleanly.
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java:1045
Falling back to three-way merge...
Applied patch to &apos;ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&apos; with conflicts.
error: patch failed: ql/src/test/org/apache/hadoop/hive/ql/io/TestSymlinkTextInputFormat.java:37
Falling back to three-way merge...
Applied patch to &apos;ql/src/test/org/apache/hadoop/hive/ql/io/TestSymlinkTextInputFormat.java&apos; with conflicts.
error: patch failed: ql/src/test/results/clientnegative/index_compact_entry_limit.q.out:30
Falling back to three-way merge...
Applied patch to &apos;ql/src/test/results/clientnegative/index_compact_entry_limit.q.out&apos; cleanly.
error: patch failed: ql/src/test/results/clientnegative/index_compact_size_limit.q.out:30
Falling back to three-way merge...
Applied patch to &apos;ql/src/test/results/clientnegative/index_compact_size_limit.q.out&apos; cleanly.
error: src/java/org/apache/hadoop/hive/conf/HiveConf.java: does not exist in index
error: qtest/testconfiguration.properties: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/Context.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/exec/Task.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/exec/Utilities.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/exec/tez/TezTask.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/io/orc/ColumnStatisticsImpl.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/metadata/HiveStoragePredicateHandler.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/optimizer/physical/AbstractJoinTaskDispatcher.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/parse/MapReduceCompiler.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/plan/MapWork.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java: does not exist in index
error: src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java: does not exist in index
error: src/test/org/apache/hadoop/hive/ql/io/TestSymlinkTextInputFormat.java: does not exist in index
error: src/test/results/clientnegative/index_compact_entry_limit.q.out: does not exist in index
error: src/test/results/clientnegative/index_compact_size_limit.q.out: does not exist in index
error: java/org/apache/hadoop/hive/conf/HiveConf.java: does not exist in index
error: testconfiguration.properties: does not exist in index
error: java/org/apache/hadoop/hive/ql/Context.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/exec/Task.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/exec/Utilities.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/exec/tez/TezTask.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/io/orc/ColumnStatisticsImpl.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/metadata/HiveStoragePredicateHandler.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/optimizer/physical/AbstractJoinTaskDispatcher.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/parse/MapReduceCompiler.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/plan/MapWork.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/plan/MapredWork.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java: does not exist in index
error: java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java: does not exist in index
error: test/org/apache/hadoop/hive/ql/io/TestSymlinkTextInputFormat.java: does not exist in index
error: test/results/clientnegative/index_compact_entry_limit.q.out: does not exist in index
error: test/results/clientnegative/index_compact_size_limit.q.out: does not exist in index
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12653796 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12628718">HIVE-3926</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12679346">HIVE-5831</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12441541">HIVE-951</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446279">HIVE-1083</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12622577" name="HIVE-1662.10.patch.txt" size="65099" author="navis" created="Mon, 13 Jan 2014 04:31:45 +0000"/>
                            <attachment id="12622758" name="HIVE-1662.11.patch.txt" size="65838" author="navis" created="Tue, 14 Jan 2014 01:14:44 +0000"/>
                            <attachment id="12632450" name="HIVE-1662.12.patch.txt" size="63031" author="navis" created="Tue, 4 Mar 2014 06:29:16 +0000"/>
                            <attachment id="12652165" name="HIVE-1662.13.patch.txt" size="55227" author="navis" created="Tue, 24 Jun 2014 09:31:52 +0000"/>
                            <attachment id="12652324" name="HIVE-1662.14.patch.txt" size="78780" author="navis" created="Wed, 25 Jun 2014 01:27:11 +0000"/>
                            <attachment id="12652372" name="HIVE-1662.15.patch.txt" size="84475" author="navis" created="Wed, 25 Jun 2014 09:14:50 +0000"/>
                            <attachment id="12652549" name="HIVE-1662.16.patch.txt" size="84350" author="navis" created="Thu, 26 Jun 2014 04:41:23 +0000"/>
                            <attachment id="12652584" name="HIVE-1662.17.patch.txt" size="84385" author="navis" created="Thu, 26 Jun 2014 09:06:44 +0000"/>
                            <attachment id="12653796" name="HIVE-1662.18.patch.txt" size="91499" author="navis" created="Thu, 3 Jul 2014 09:36:19 +0000"/>
                            <attachment id="12597252" name="HIVE-1662.8.patch.txt" size="49302" author="appodictic" created="Sat, 10 Aug 2013 04:25:44 +0000"/>
                            <attachment id="12622087" name="HIVE-1662.9.patch.txt" size="64457" author="navis" created="Thu, 9 Jan 2014 02:18:57 +0000"/>
                            <attachment id="12567982" name="HIVE-1662.D8391.1.patch" size="20127" author="phabricator@reviews.facebook.net" created="Tue, 5 Feb 2013 09:26:12 +0000"/>
                            <attachment id="12568137" name="HIVE-1662.D8391.2.patch" size="20321" author="phabricator@reviews.facebook.net" created="Wed, 6 Feb 2013 00:43:11 +0000"/>
                            <attachment id="12572719" name="HIVE-1662.D8391.3.patch" size="36482" author="phabricator@reviews.facebook.net" created="Fri, 8 Mar 2013 06:54:12 +0000"/>
                            <attachment id="12572725" name="HIVE-1662.D8391.4.patch" size="44738" author="phabricator@reviews.facebook.net" created="Fri, 8 Mar 2013 07:48:11 +0000"/>
                            <attachment id="12588005" name="HIVE-1662.D8391.5.patch" size="47183" author="phabricator@reviews.facebook.net" created="Sun, 16 Jun 2013 03:53:21 +0000"/>
                            <attachment id="12596758" name="HIVE-1662.D8391.6.patch" size="48909" author="phabricator@reviews.facebook.net" created="Thu, 8 Aug 2013 01:54:48 +0000"/>
                            <attachment id="12597024" name="HIVE-1662.D8391.7.patch" size="48441" author="phabricator@reviews.facebook.net" created="Fri, 9 Aug 2013 04:16:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Feb 2013 09:26:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1663] ql/src/java/org/apache/hadoop/hive/ql/parse/SamplePruner.java is empty</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1663</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;we should remove this empty file&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474759">HIVE-1663</key>
            <summary>ql/src/java/org/apache/hadoop/hive/ql/parse/SamplePruner.java is empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 21:46:18 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:53 +0000</updated>
                            <resolved>Mon, 27 Sep 2010 18:42:20 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12915421" author="he yongqiang" created="Mon, 27 Sep 2010 18:42:20 +0000"  >&lt;p&gt;fixed. &lt;/p&gt;</comment>
                            <comment id="12915435" author="he yongqiang" created="Mon, 27 Sep 2010 19:04:21 +0000"  >&lt;p&gt;Sorry that I committed this myself. i can not generate a patch for it (this file is empty). &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
