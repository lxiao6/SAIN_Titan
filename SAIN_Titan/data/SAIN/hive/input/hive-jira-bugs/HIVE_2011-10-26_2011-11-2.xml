<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:19:20 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-10-26+AND+created+%3C%3D+2011-11-2+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="16" total="16"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2527] Consecutive string literals should be combined into a single string literal.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2527</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;C, Python, etc. all support this magical feature.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528795">HIVE-2527</key>
            <summary>Consecutive string literals should be combined into a single string literal.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2011 00:08:53 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:18 +0000</updated>
                            <resolved>Tue, 8 Nov 2011 02:20:24 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13140861" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 02:34:32 +0000"  >&lt;p&gt;jonchang requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  HIVE&lt;/p&gt;

&lt;p&gt;  C, Python, etc. all support this magical feature.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_string.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_string.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/309/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/309/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13141023" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 08:24:32 +0000"  >&lt;p&gt;akramer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_string.q:1 But what about &apos;face&apos;&quot;book&quot;?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141325" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 17:01:32 +0000"  >&lt;p&gt;jonchang has planned changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;/p&gt;

&lt;p&gt;  Will add unittest cases for akramer&apos;s case.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141330" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 17:07:34 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;  More unittest cases.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_string.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_string.q.out&lt;/p&gt;</comment>
                            <comment id="13141414" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 18:11:32 +0000"  >&lt;p&gt;jsichi has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java:289 Might want to use StringBuilder here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141424" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 18:19:32 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;  Use stringbuilder.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_string.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_string.q.out&lt;/p&gt;</comment>
                            <comment id="13141477" author="jvs" created="Tue, 1 Nov 2011 19:17:31 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13141664" author="jvs" created="Tue, 1 Nov 2011 22:03:27 +0000"  >&lt;p&gt;Got all kinds of failures, e.g. this one from dboutput.q in TestContribCliDriver:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUp
dateTime -I lastAccessTime -I [Oo]wner -I CreateTime -I LastAccessTime -I Location -
I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeExceptio
n -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I LOCK_
TIME: -I grantTime -I [.][.][.] [0-9]* more -I job_[0-9]*_[0-9]* -I USING &apos;java -cp 
/data/users/jsichi/open/test-trunk/build/contrib/test/logs/contribclientpositive/dbo
utput.q.out /data/users/jsichi/open/test-trunk/contrib/src/test/results/clientpositi
ve/dboutput.q.out
    [junit] 48c48
    [junit] &amp;lt;   (TOK_QUERY (TOK_FROM (TOK_TABREF (TOK_TABNAME src))) (TOK_INSERT (TO
K_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (TOK_FUNCTION dboutpu
t (TOK_STRINGLITERALSEQUENCE &apos;jdbc:derby:../build/test_dboutput_db;create=true&apos;) (TO
K_STRINGLITERALSEQUENCE &apos;&apos;) (TOK_STRINGLITERALSEQUENCE &apos;&apos;) (TOK_STRINGLITERALSEQUENC
E &apos;CREATE TABLE app_info ( kkey VARCHAR(255) NOT NULL, vvalue VARCHAR(255) NOT NULL,
 UNIQUE(kkey))&apos;))) (TOK_SELEXPR (TOK_FUNCTION dboutput (TOK_STRINGLITERALSEQUENCE &apos;j
dbc:derby:../build/test_dboutput_db&apos;) (TOK_STRINGLITERALSEQUENCE &apos;&apos;) (TOK_STRINGLITE
RALSEQUENCE &apos;&apos;) (TOK_STRINGLITERALSEQUENCE &apos;INSERT INTO app_info (kkey,vvalue) VALUE
S (?,?)&apos;) (TOK_STRINGLITERALSEQUENCE &apos;20&apos;) (TOK_STRINGLITERALSEQUENCE &apos;a&apos;))) (TOK_SE
LEXPR (TOK_FUNCTION dboutput (TOK_STRINGLITERALSEQUENCE &apos;jdbc:derby:../build/test_db
output_db&apos;) (TOK_STRINGLITERALSEQUENCE &apos;&apos;) (TOK_STRINGLITERALSEQUENCE &apos;&apos;) (TOK_STRIN
GLITERALSEQUENCE &apos;INSERT INTO app_info (kkey,vvalue) VALUES (?,?)&apos;) (TOK_STRINGLITER
ALSEQUENCE &apos;20&apos;) (TOK_STRINGLITERALSEQUENCE &apos;b&apos;)))) (TOK_LIMIT 1)))
    [junit] ---
    [junit] &amp;gt;   (TOK_QUERY (TOK_FROM (TOK_TABREF (TOK_TABNAME src))) (TOK_INSERT (TO
K_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (TOK_FUNCTION dboutpu
t &apos;jdbc:derby:../build/test_dboutput_db;create=true&apos; &apos;&apos; &apos;&apos; &apos;CREATE TABLE app_info ( 
kkey VARCHAR(255) NOT NULL, vvalue VARCHAR(255) NOT NULL, UNIQUE(kkey))&apos;)) (TOK_SELE
XPR (TOK_FUNCTION dboutput &apos;jdbc:derby:../build/test_dboutput_db&apos; &apos;&apos; &apos;&apos; &apos;INSERT INTO
 app_info (kkey,vvalue) VALUES (?,?)&apos; &apos;20&apos; &apos;a&apos;)) (TOK_SELEXPR (TOK_FUNCTION dboutput
 &apos;jdbc:derby:../build/test_dboutput_db&apos; &apos;&apos; &apos;&apos; &apos;INSERT INTO app_info (kkey,vvalue) VA
LUES (?,?)&apos; &apos;20&apos; &apos;b&apos;))) (TOK_LIMIT 1)))
    [junit] 129c129
    [junit] &amp;lt;   (TOK_QUERY (TOK_FROM (TOK_TABREF (TOK_TABNAME src))) (TOK_INSERT (TO
K_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (TOK_FUNCTION dboutpu
t (TOK_STRINGLITERALSEQUENCE &apos;jdbc:derby:../build/test_dboutput_db&apos;) (TOK_STRINGLITE
RALSEQUENCE &apos;&apos;) (TOK_STRINGLITERALSEQUENCE &apos;&apos;) (TOK_STRINGLITERALSEQUENCE &apos;INSERT IN
TO app_info (kkey,vvalue) VALUES (?,?)&apos;) (TOK_TABLE_OR_COL key) (TOK_TABLE_OR_COL va
lue)))) (TOK_WHERE (&amp;lt; (TOK_TABLE_OR_COL key) 10))))
    [junit] ---
    [junit] &amp;gt;   (TOK_QUERY (TOK_FROM (TOK_TABREF (TOK_TABNAME src))) (TOK_INSERT (TO
K_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (TOK_FUNCTION dboutpu
t &apos;jdbc:derby:../build/test_dboutput_db&apos; &apos;&apos; &apos;&apos; &apos;INSERT INTO app_info (kkey,vvalue) V
ALUES (?,?)&apos; (TOK_TABLE_OR_COL key) (TOK_TABLE_OR_COL value)))) (TOK_WHERE (&amp;lt; (TOK_T
ABLE_OR_COL key) 10))))
    [junit] Exception: Client execution results failed with error code = 1
    [junit] See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to 
get more logs.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="13141674" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 22:11:32 +0000"  >&lt;p&gt;jsichi has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;/p&gt;

&lt;p&gt;  ant test failed (see JIRA).&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141675" author="jonchang" created="Tue, 1 Nov 2011 22:11:41 +0000"  >&lt;p&gt;This just looks like a complaint about the parse trees changing.  Do you have the full list of failures?&lt;/p&gt;</comment>
                            <comment id="13141689" author="jvs" created="Tue, 1 Nov 2011 22:20:47 +0000"  >&lt;p&gt;I&apos;ll email it to you.  Some of them may be bogus due to side-effects from previous real failures.  But there&apos;s going to be a huge amount of diff from every existing string literal changing, so it might be better to figure out a way to make the rendering come out the same way as before.&lt;/p&gt;</comment>
                            <comment id="13145086" author="phabricator@reviews.facebook.net" created="Sun, 6 Nov 2011 19:37:51 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;  Add both a StringLiteral and a stringLiteralSequence rule to minimize changes to parse trees.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_string.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_string.q.out&lt;/p&gt;</comment>
                            <comment id="13145784" author="jvs" created="Mon, 7 Nov 2011 20:46:08 +0000"  >&lt;p&gt;I&apos;ll rerun tests with latest.&lt;/p&gt;</comment>
                            <comment id="13146039" author="phabricator@reviews.facebook.net" created="Tue, 8 Nov 2011 02:14:51 +0000"  >&lt;p&gt;jsichi has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;/p&gt;

&lt;p&gt;  Tests passed for me this time.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13146040" author="jvs" created="Tue, 8 Nov 2011 02:20:24 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Jonathan!&lt;/p&gt;

&lt;p&gt;Can you reattach the last patch with ASF grant?&lt;/p&gt;</comment>
                            <comment id="13146041" author="phabricator@reviews.facebook.net" created="Tue, 8 Nov 2011 02:24:51 +0000"  >&lt;p&gt;jonchang has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single string literal.&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D147&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1199066&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1199066&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13146138" author="hudson" created="Tue, 8 Nov 2011 08:05:38 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1066 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1066/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1066/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2527&quot; title=&quot;Consecutive string literals should be combined into a single string literal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2527&quot;&gt;&lt;del&gt;HIVE-2527&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Consecutive string literals should be combined into a single&lt;br/&gt;
string literal.&lt;br/&gt;
(Jonathan Chang via jvs)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
HIVE&lt;/p&gt;

&lt;p&gt;C, Python, etc. all support this magical feature.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;Reviewed By: jsichi&lt;/p&gt;

&lt;p&gt;CC: akramer, jonchang, jsichi&lt;/p&gt;

&lt;p&gt;Differential Revision: 147&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199066&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199066&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/literal_string.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/literal_string.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501724" name="ASF.LICENSE.NOT.GRANTED--D147.1.patch" size="7208" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 02:34:33 +0000"/>
                            <attachment id="12501799" name="ASF.LICENSE.NOT.GRANTED--D147.2.patch" size="7734" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 17:07:34 +0000"/>
                            <attachment id="12501806" name="ASF.LICENSE.NOT.GRANTED--D147.3.patch" size="7814" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 18:19:32 +0000"/>
                            <attachment id="12502686" name="ASF.LICENSE.NOT.GRANTED--D147.4.patch" size="7675" author="phabricator@reviews.facebook.net" created="Sun, 6 Nov 2011 19:37:52 +0000"/>
                            <attachment id="12501814" name="D147.3.patch" size="7814" author="jonchang" created="Tue, 1 Nov 2011 19:28:08 +0000"/>
                            <attachment id="12502873" name="D147.4.patch" size="7675" author="jonchang" created="Tue, 8 Nov 2011 02:54:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Nov 2011 02:34:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2528] use guava&apos;s LexicographicalComparator for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2528</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ref:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://guava-libraries.googlecode.com/svn/trunk/guava/src/com/google/common/primitives/UnsignedBytes.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://guava-libraries.googlecode.com/svn/trunk/guava/src/com/google/common/primitives/UnsignedBytes.java&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4012&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4012&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528940">HIVE-2528</key>
            <summary>use guava&apos;s LexicographicalComparator for Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2011 18:35:22 +0000</created>
                <updated>Tue, 17 Apr 2012 11:06:10 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13136210" author="he yongqiang" created="Wed, 26 Oct 2011 18:45:02 +0000"  >&lt;p&gt;seems this is easier to do on hadoop side. that may require no change to hive.&lt;/p&gt;</comment>
                            <comment id="13255471" author="gemini5201314" created="Tue, 17 Apr 2012 11:06:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7761&quot; title=&quot;Improve performance of raw comparisons&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7761&quot;&gt;&lt;del&gt;HADOOP-7761&lt;/del&gt;&lt;/a&gt; has done. maybe it can closed. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Apr 2012 11:06:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48511</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2529] metastore 0.8 upgrade script for PostgreSQL </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2529</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I think you mentioned that this was in the works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529125">HIVE-2529</key>
            <summary>metastore 0.8 upgrade script for PostgreSQL </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2011 19:20:25 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:51 +0000</updated>
                            <resolved>Sun, 6 May 2012 00:48:02 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13144397" author="cwsteinbach" created="Fri, 4 Nov 2011 22:08:14 +0000"  >&lt;p&gt;@John: We don&apos;t officially support Postgres, and this is reflected in the fact that we don&apos;t require people to provide Postgres upgrade scripts when they modify the schema. I think officially supporting Postgres is a good idea, but we should defer this to 0.9.0.&lt;/p&gt;</comment>
                            <comment id="13144409" author="jvs" created="Fri, 4 Nov 2011 22:22:55 +0000"  >&lt;p&gt;Fine with me; but isn&apos;t it a little confusing to have the existing scripts checked in then?  Should they move to contrib?&lt;/p&gt;</comment>
                            <comment id="13144410" author="jvs" created="Fri, 4 Nov 2011 22:23:19 +0000"  >&lt;p&gt;(or should we just change the build to omit them from the release?)&lt;/p&gt;</comment>
                            <comment id="13144419" author="cwsteinbach" created="Fri, 4 Nov 2011 22:34:12 +0000"  >&lt;p&gt;I&apos;m in favor of omitting them from the release. I&apos;ll file a ticket and post a patch.&lt;/p&gt;</comment>
                            <comment id="13268034" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 01:54:45 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; metastore 0.8 upgrade script for PostgreSQL&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt;:  metastore 0.8 upgrade script for PostgreSQL&lt;/p&gt;

&lt;p&gt;  I think you mentioned that this was in the works.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3027&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/scripts/upgrade/postgres/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/008-REVERT-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/hive-schema-0.8.0.postgres.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/hive-schema-0.9.0.postgres.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/upgrade-0.7.0-to-0.8.0.postgres.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/upgrade-0.8.0-to-0.9.0.postgres.sql&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6885/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6885/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13268567" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 17:42:47 +0000"  >&lt;p&gt;zhenxiao has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; metastore 0.8 upgrade script for PostgreSQL&quot;.&lt;/p&gt;

&lt;p&gt;  Manually tested Hive Metastore upgrade from 0.7 to 0.8, and from 0.8 to 0.9&lt;/p&gt;

&lt;p&gt;  Before the upgrade:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;~/Notes/metastore/postgres&amp;#93;&lt;/span&gt;hive&lt;br/&gt;
  Hive history file=/tmp/cloudera/hive_job_log_cloudera_201205041018_1363096543.txt&lt;br/&gt;
  hive&amp;gt; show tables;&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 2.913 seconds&lt;br/&gt;
  hive&amp;gt; create table test3(a string) partitioned by (b int);&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.213 seconds&lt;br/&gt;
  hive&amp;gt; create table test(c array&amp;lt;int&amp;gt;, b int);&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.176 seconds&lt;br/&gt;
  hive&amp;gt; create table test2(key string, value string) partitioned by (ds string) stored as textfile;&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.088 seconds&lt;br/&gt;
  hive&amp;gt; load data local inpath &apos;/home/cloudera/Code/hive/data/files/kv1.txt&apos; into table test2 partition (ds=&apos;2012-02-09&apos;);&lt;br/&gt;
  Copying data from &lt;a href=&quot;file:/home/cloudera/Code/hive/data/files/kv1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/cloudera/Code/hive/data/files/kv1.txt&lt;/a&gt;&lt;br/&gt;
  Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive/data/files/kv1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/cloudera/Code/hive/data/files/kv1.txt&lt;/a&gt;&lt;br/&gt;
  Loading data to table default.test2 partition (ds=2012-02-09)&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.658 seconds&lt;br/&gt;
  hive&amp;gt; create table src(key string);&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.075 seconds&lt;br/&gt;
  hive&amp;gt; create index src_index_8 on table src(key) as &apos;compact&apos; WITH DEFERRED REBUILD IDXPROPERTIES (&quot;prop1&quot;=&quot;val1&quot;, &quot;prop2&quot;=&quot;val2&quot;);&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.23 seconds&lt;br/&gt;
  hive&amp;gt; alter index src_index_8 on src set IDXPROPERTIES (&quot;prop1&quot;=&quot;val1_new&quot;, &quot;prop3&quot;=&quot;val3&quot;);&lt;br/&gt;
  OK&lt;br/&gt;
  Time taken: 0.078 seconds&lt;br/&gt;
  hive&amp;gt; show tables;&lt;br/&gt;
  OK&lt;br/&gt;
  default_&lt;em&gt;src_src_index_8&lt;/em&gt;_&lt;br/&gt;
  src&lt;br/&gt;
  test&lt;br/&gt;
  test2&lt;br/&gt;
  test3&lt;br/&gt;
  Time taken: 0.142 seconds&lt;/p&gt;

&lt;p&gt;  In postgreSQL metastore:&lt;/p&gt;


&lt;p&gt;  metastore=# \dt&lt;br/&gt;
                 List of relations&lt;br/&gt;
   Schema |        Name        | Type  |  Owner&lt;br/&gt;
  -------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;+&lt;/del&gt;---------&lt;br/&gt;
   public | BUCKETING_COLS     | table | cloudera&lt;br/&gt;
   public | COLUMNS            | table | cloudera&lt;br/&gt;
   public | DATABASE_PARAMS    | table | cloudera&lt;br/&gt;
   public | DBS                | table | cloudera&lt;br/&gt;
   public | DB_PRIVS           | table | cloudera&lt;br/&gt;
   public | GLOBAL_PRIVS       | table | cloudera&lt;br/&gt;
   public | IDXS               | table | cloudera&lt;br/&gt;
   public | INDEX_PARAMS       | table | cloudera&lt;br/&gt;
   public | NUCLEUS_TABLES     | table | cloudera&lt;br/&gt;
   public | PARTITIONS         | table | cloudera&lt;br/&gt;
   public | PARTITION_KEYS     | table | cloudera&lt;br/&gt;
   public | PARTITION_KEY_VALS | table | cloudera&lt;br/&gt;
   public | PARTITION_PARAMS   | table | cloudera&lt;br/&gt;
   public | PART_COL_PRIVS     | table | cloudera&lt;br/&gt;
   public | PART_PRIVS         | table | cloudera&lt;br/&gt;
   public | ROLES              | table | cloudera&lt;br/&gt;
   public | ROLE_MAP           | table | cloudera&lt;br/&gt;
   public | SDS                | table | cloudera&lt;br/&gt;
   public | SD_PARAMS          | table | cloudera&lt;br/&gt;
   public | SEQUENCE_TABLE     | table | cloudera&lt;br/&gt;
   public | SERDES             | table | cloudera&lt;br/&gt;
   public | SERDE_PARAMS       | table | cloudera&lt;br/&gt;
   public | SORT_COLS          | table | cloudera&lt;br/&gt;
   public | TABLE_PARAMS       | table | cloudera&lt;br/&gt;
   public | TBLS               | table | cloudera&lt;br/&gt;
   public | TBL_COL_PRIVS      | table | cloudera&lt;br/&gt;
   public | TBL_PRIVS          | table | cloudera&lt;br/&gt;
   public | TYPES              | table | cloudera&lt;br/&gt;
   public | TYPE_FIELDS        | table | cloudera&lt;br/&gt;
  (29 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;TBLS&quot;;&lt;br/&gt;
   TBL_ID | CREATE_TIME | DB_ID | LAST_ACCESS_TIME |  OWNER   | RETENTION | SD_ID |          TBL_NAME          |   TBL_TYPE    | VIEW_EXPANDED_TEXT | VIEW_ORIG&lt;br/&gt;
  INAL_TEXT&lt;br/&gt;
  -------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;--------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;---------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;&lt;ins&gt;&lt;/del&gt;--------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------&lt;br/&gt;
  ----------&lt;br/&gt;
        1 |  1336151986 |     1 |                0 | cloudera |         0 |     1 | test3                      | MANAGED_TABLE |                    |&lt;br/&gt;
        2 |  1336152012 |     1 |                0 | cloudera |         0 |     2 | test                       | MANAGED_TABLE |                    |&lt;br/&gt;
        3 |  1336152016 |     1 |                0 | cloudera |         0 |     3 | test2                      | MANAGED_TABLE |                    |&lt;br/&gt;
        4 |  1336152032 |     1 |                0 | cloudera |         0 |     5 | src                        | MANAGED_TABLE |                    |&lt;br/&gt;
        5 |  1336152039 |     1 |                0 |          |         0 |     6 | default_&lt;em&gt;src_src_index_8&lt;/em&gt;_ | INDEX_TABLE   |                    |&lt;br/&gt;
  (5 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;COLUMNS&quot;;&lt;br/&gt;
   SD_ID | COMMENT | COLUMN_NAME |   TYPE_NAME   | INTEGER_IDX&lt;br/&gt;
  ------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------&lt;br/&gt;
       1 |         | a           | string        |           0&lt;br/&gt;
       2 |         | c           | array&amp;lt;int&amp;gt;    |           0&lt;br/&gt;
       2 |         | b           | int           |           1&lt;br/&gt;
       3 |         | key         | string        |           0&lt;br/&gt;
       3 |         | value       | string        |           1&lt;br/&gt;
       4 |         | key         | string        |           0&lt;br/&gt;
       4 |         | value       | string        |           1&lt;br/&gt;
       5 |         | key         | string        |           0&lt;br/&gt;
       6 |         | key         | string        |           0&lt;br/&gt;
       6 |         | _bucketname | string        |           1&lt;br/&gt;
       6 |         | _offsets    | array&amp;lt;bigint&amp;gt; |           2&lt;br/&gt;
       7 |         | key         | string        |           0&lt;br/&gt;
  (12 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;PARTITIONS&quot;;&lt;br/&gt;
   PART_ID | CREATE_TIME | LAST_ACCESS_TIME |   PART_NAME   | SD_ID | TBL_ID&lt;br/&gt;
  --------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;+&lt;/del&gt;-------&lt;br/&gt;
         1 |  1336152022 |                0 | ds=2012-02-09 |     4 |      3&lt;br/&gt;
  (1 row)&lt;/p&gt;


&lt;p&gt;  metastore=# select * from &quot;IDXS&quot;;&lt;br/&gt;
   INDEX_ID | CREATE_TIME | DEFERRED_REBUILD |                     INDEX_HANDLER_CLASS                     | INDEX_NAME  | INDEX_TBL_ID | LAST_ACCESS_TIME | OR&lt;br/&gt;
  IG_TBL_ID | SD_ID&lt;br/&gt;
  ---------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------------------------------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------&lt;del&gt;+&lt;/del&gt;--&lt;br/&gt;
  ---------&lt;del&gt;+&lt;/del&gt;------&lt;br/&gt;
          1 |  1336152039 | t                | org.apache.hadoop.hive.ql.index.compact.CompactIndexHandler | src_index_8 |            5 |       1336152039 |&lt;br/&gt;
          4 |     7&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;SDS&quot;;&lt;br/&gt;
   SD_ID |               INPUT_FORMAT               | IS_COMPRESSED |                            LOCATION                             | NUM_BUCKETS |&lt;br/&gt;
               OUTPUT_FORMAT                        | SERDE_ID&lt;br/&gt;
  ------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;---------------------------------------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----------&lt;del&gt;+&lt;/del&gt;---------&lt;br/&gt;
  -------------------------------------------------&lt;del&gt;+&lt;/del&gt;---------&lt;br/&gt;
       1 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test3                      |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        1&lt;br/&gt;
       2 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test                       |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        2&lt;br/&gt;
       3 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test2                      |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        3&lt;br/&gt;
       4 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test2/ds=2012-02-09        |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        4&lt;br/&gt;
       5 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/src                        |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        5&lt;br/&gt;
       6 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/default_&lt;em&gt;src_src_index_8&lt;/em&gt;_ |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.IgnoreKeyTextOutputFormat     |        6&lt;br/&gt;
       7 | org.apache.hadoop.mapred.TextInputFormat | f             |                                                                 |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.IgnoreKeyTextOutputFormat     |        7&lt;br/&gt;
  (7 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;PARTITION_KEYS&quot;;&lt;br/&gt;
   TBL_ID | PKEY_COMMENT | PKEY_NAME | PKEY_TYPE | INTEGER_IDX&lt;br/&gt;
  -------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;---------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------&lt;br/&gt;
        1 |              | b         | int       |           0&lt;br/&gt;
        3 |              | ds        | string    |           0&lt;br/&gt;
  (2 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;SERDES&quot;;&lt;br/&gt;
   SERDE_ID | NAME |                        SLIB&lt;br/&gt;
  ---------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------------------------------------------------&lt;br/&gt;
          1 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          2 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          3 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          4 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          5 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          6 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          7 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
  (7 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;BUCKETING_COLS&quot;;&lt;br/&gt;
   SD_ID | BUCKET_COL_NAME | INTEGER_IDX&lt;br/&gt;
  ------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;---------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------&lt;br/&gt;
  (0 rows)&lt;/p&gt;

&lt;p&gt;  Upgrade from hive0.7 to hive0.8:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;~/Code/hive/metastore/scripts/upgrade/postgres&amp;#93;&lt;/span&gt;psql -f upgrade-0.7.0-to-0.8.0.postgres.sql metastore&lt;br/&gt;
                      ?column?&lt;br/&gt;
  ------------------------------------------------&lt;br/&gt;
   Upgrading MetaStore schema from 0.7.0 to 0.8.0&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  SET&lt;br/&gt;
                                      ?column?&lt;br/&gt;
  ---------------------------------------------------------------------------------&lt;br/&gt;
   &amp;lt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;: Dedupe tables column schemas from partitions in the metastore db &amp;gt;&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  CREATE TABLE&lt;br/&gt;
  CREATE TABLE&lt;br/&gt;
  ALTER TABLE&lt;br/&gt;
      ?column?&lt;br/&gt;
  ----------------&lt;br/&gt;
   Tables Created&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  ALTER TABLE&lt;br/&gt;
  ALTER TABLE&lt;br/&gt;
       ?column?&lt;br/&gt;
  -------------------&lt;br/&gt;
   SDS Table Updated&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  INSERT 0 5&lt;br/&gt;
     ?column?&lt;br/&gt;
  ---------------&lt;br/&gt;
   CDS populated&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  UPDATE 5&lt;br/&gt;
  INSERT 0 9&lt;br/&gt;
      ?column?&lt;br/&gt;
  -----------------&lt;br/&gt;
   Tables Migrated&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  CREATE TABLE&lt;br/&gt;
  INSERT 0 1&lt;br/&gt;
  UPDATE 1&lt;br/&gt;
        ?column?&lt;br/&gt;
  ---------------------&lt;br/&gt;
   Partitions Migrated&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  INSERT 0 1&lt;br/&gt;
  UPDATE 1&lt;br/&gt;
  INSERT 0 1&lt;br/&gt;
       ?column?&lt;br/&gt;
  ------------------&lt;br/&gt;
   Indexes Migrated&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  ALTER TABLE&lt;br/&gt;
         ?column?&lt;br/&gt;
  -----------------------&lt;br/&gt;
   Columns Table Renamed&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;                                  ?column?&lt;br/&gt;
  -------------------------------------------------------------------------&lt;br/&gt;
   &amp;lt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2215&quot; title=&quot;Add api for marking / querying set of partitions for events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2215&quot;&gt;&lt;del&gt;HIVE-2215&lt;/del&gt;&lt;/a&gt; Add api for marking querying set of partitions for events &amp;gt;&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  CREATE TABLE&lt;br/&gt;
  CREATE INDEX&lt;br/&gt;
                          ?column?&lt;br/&gt;
  ---------------------------------------------------------&lt;br/&gt;
   Finished upgrading MetaStore schema from 0.7.0 to 0.8.0&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  The postgreSQL metastore after upgrading from 0.7 to 0.8:&lt;/p&gt;

&lt;p&gt;  metastore=# \dt&lt;br/&gt;
                 List of relations&lt;br/&gt;
   Schema |        Name        | Type  |  Owner&lt;br/&gt;
  -------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;+&lt;/del&gt;---------&lt;br/&gt;
   public | BUCKETING_COLS     | table | cloudera&lt;br/&gt;
   public | CDS                | table | cloudera&lt;br/&gt;
   public | COLUMNS_OLD        | table | cloudera&lt;br/&gt;
   public | COLUMNS_V2         | table | cloudera&lt;br/&gt;
   public | DATABASE_PARAMS    | table | cloudera&lt;br/&gt;
   public | DBS                | table | cloudera&lt;br/&gt;
   public | DB_PRIVS           | table | cloudera&lt;br/&gt;
   public | GLOBAL_PRIVS       | table | cloudera&lt;br/&gt;
   public | IDXS               | table | cloudera&lt;br/&gt;
   public | INDEX_PARAMS       | table | cloudera&lt;br/&gt;
   public | NUCLEUS_TABLES     | table | cloudera&lt;br/&gt;
   public | PARTITIONS         | table | cloudera&lt;br/&gt;
   public | PARTITION_EVENTS   | table | cloudera&lt;br/&gt;
   public | PARTITION_KEYS     | table | cloudera&lt;br/&gt;
   public | PARTITION_KEY_VALS | table | cloudera&lt;br/&gt;
   public | PARTITION_PARAMS   | table | cloudera&lt;br/&gt;
   public | PART_COL_PRIVS     | table | cloudera&lt;br/&gt;
   public | PART_PRIVS         | table | cloudera&lt;br/&gt;
   public | ROLES              | table | cloudera&lt;br/&gt;
   public | ROLE_MAP           | table | cloudera&lt;br/&gt;
   public | SDS                | table | cloudera&lt;br/&gt;
   public | SD_PARAMS          | table | cloudera&lt;br/&gt;
   public | SEQUENCE_TABLE     | table | cloudera&lt;br/&gt;
   public | SERDES             | table | cloudera&lt;br/&gt;
   public | SERDE_PARAMS       | table | cloudera&lt;br/&gt;
   public | SORT_COLS          | table | cloudera&lt;br/&gt;
   public | TABLE_PARAMS       | table | cloudera&lt;br/&gt;
   public | TBLS               | table | cloudera&lt;br/&gt;
   public | TBL_COL_PRIVS      | table | cloudera&lt;br/&gt;
   public | TBL_PRIVS          | table | cloudera&lt;br/&gt;
   public | TYPES              | table | cloudera&lt;br/&gt;
   public | TYPE_FIELDS        | table | cloudera&lt;br/&gt;
  (32 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;TBLS&quot;;&lt;br/&gt;
   TBL_ID | CREATE_TIME | DB_ID | LAST_ACCESS_TIME |  OWNER   | RETENTION | SD_ID |          TBL_NAME          |   TBL_TYPE    | VIEW_EXPANDED_TEXT | VIEW_ORIG&lt;br/&gt;
  INAL_TEXT&lt;br/&gt;
  -------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;--------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;---------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;&lt;ins&gt;&lt;/del&gt;--------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------&lt;br/&gt;
  ----------&lt;br/&gt;
        1 |  1336151986 |     1 |                0 | cloudera |         0 |     1 | test3                      | MANAGED_TABLE |                    |&lt;br/&gt;
        2 |  1336152012 |     1 |                0 | cloudera |         0 |     2 | test                       | MANAGED_TABLE |                    |&lt;br/&gt;
        3 |  1336152016 |     1 |                0 | cloudera |         0 |     3 | test2                      | MANAGED_TABLE |                    |&lt;br/&gt;
        4 |  1336152032 |     1 |                0 | cloudera |         0 |     5 | src                        | MANAGED_TABLE |                    |&lt;br/&gt;
        5 |  1336152039 |     1 |                0 |          |         0 |     6 | default_&lt;em&gt;src_src_index_8&lt;/em&gt;_ | INDEX_TABLE   |                    |&lt;br/&gt;
  (5 rows)&lt;/p&gt;


&lt;p&gt;  metastore=# select * from &quot;COLUMNS_V2&quot;;&lt;br/&gt;
   CD_ID | COMMENT | COLUMN_NAME |   TYPE_NAME   | INTEGER_IDX&lt;br/&gt;
  ------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------&lt;br/&gt;
       1 |         | a           | string        |           0&lt;br/&gt;
       2 |         | c           | array&amp;lt;int&amp;gt;    |           0&lt;br/&gt;
       2 |         | b           | int           |           1&lt;br/&gt;
       3 |         | key         | string        |           0&lt;br/&gt;
       3 |         | value       | string        |           1&lt;br/&gt;
       5 |         | key         | string        |           0&lt;br/&gt;
       6 |         | key         | string        |           0&lt;br/&gt;
       6 |         | _bucketname | string        |           1&lt;br/&gt;
       6 |         | _offsets    | array&amp;lt;bigint&amp;gt; |           2&lt;br/&gt;
       7 |         | key         | string        |           0&lt;br/&gt;
  (10 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;COLUMNS_OLD&quot;;&lt;br/&gt;
   SD_ID | COMMENT | COLUMN_NAME |   TYPE_NAME   | INTEGER_IDX&lt;br/&gt;
  ------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------&lt;br/&gt;
       1 |         | a           | string        |           0&lt;br/&gt;
       2 |         | c           | array&amp;lt;int&amp;gt;    |           0&lt;br/&gt;
       2 |         | b           | int           |           1&lt;br/&gt;
       3 |         | key         | string        |           0&lt;br/&gt;
       3 |         | value       | string        |           1&lt;br/&gt;
       4 |         | key         | string        |           0&lt;br/&gt;
       4 |         | value       | string        |           1&lt;br/&gt;
       5 |         | key         | string        |           0&lt;br/&gt;
       6 |         | key         | string        |           0&lt;br/&gt;
       6 |         | _bucketname | string        |           1&lt;br/&gt;
       6 |         | _offsets    | array&amp;lt;bigint&amp;gt; |           2&lt;br/&gt;
       7 |         | key         | string        |           0&lt;br/&gt;
  (12 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;PARTITIONS&quot;;&lt;br/&gt;
   PART_ID | CREATE_TIME | LAST_ACCESS_TIME |   PART_NAME   | SD_ID | TBL_ID&lt;br/&gt;
  --------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----&lt;del&gt;+&lt;/del&gt;-------&lt;br/&gt;
         1 |  1336152022 |                0 | ds=2012-02-09 |     4 |      3&lt;br/&gt;
  (1 row)&lt;/p&gt;


&lt;p&gt;  metastore=# select * from &quot;IDXS&quot;;&lt;br/&gt;
   INDEX_ID | CREATE_TIME | DEFERRED_REBUILD |                     INDEX_HANDLER_CLASS                     | INDEX_NAME  | INDEX_TBL_ID | LAST_ACCESS_TIME | OR&lt;br/&gt;
  IG_TBL_ID | SD_ID&lt;br/&gt;
  ---------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------------------------------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------&lt;del&gt;+&lt;/del&gt;--&lt;br/&gt;
  ---------&lt;del&gt;+&lt;/del&gt;------&lt;br/&gt;
          1 |  1336152039 | t                | org.apache.hadoop.hive.ql.index.compact.CompactIndexHandler | src_index_8 |            5 |       1336152039 |&lt;br/&gt;
          4 |     7&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;SDS&quot;;&lt;br/&gt;
   SD_ID |               INPUT_FORMAT               | IS_COMPRESSED |                            LOCATION                             | NUM_BUCKETS |&lt;br/&gt;
               OUTPUT_FORMAT                        | SERDE_ID | CD_ID&lt;br/&gt;
  ------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;---------------------------------------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-----------&lt;del&gt;+&lt;/del&gt;---------&lt;br/&gt;
  -------------------------------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;--------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------&lt;br/&gt;
       1 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test3                      |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        1 |     1&lt;br/&gt;
       2 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test                       |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        2 |     2&lt;br/&gt;
       3 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test2                      |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        3 |     3&lt;br/&gt;
       5 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/src                        |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        5 |     5&lt;br/&gt;
       6 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/default_&lt;em&gt;src_src_index_8&lt;/em&gt;_ |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.IgnoreKeyTextOutputFormat     |        6 |     6&lt;br/&gt;
       4 | org.apache.hadoop.mapred.TextInputFormat | f             | hdfs://localhost/user/hive/warehouse/test2/ds=2012-02-09        |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |        4 |     3&lt;br/&gt;
       7 | org.apache.hadoop.mapred.TextInputFormat | f             |                                                                 |          -1 | org.apach&lt;br/&gt;
  e.hadoop.hive.ql.io.IgnoreKeyTextOutputFormat     |        7 |     7&lt;br/&gt;
  (7 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;CDS&quot;;&lt;br/&gt;
   CD_ID&lt;br/&gt;
  -------&lt;br/&gt;
       1&lt;br/&gt;
       2&lt;br/&gt;
       3&lt;br/&gt;
       5&lt;br/&gt;
       6&lt;br/&gt;
       7&lt;br/&gt;
  (6 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;PARTITION_KEYS&quot;;&lt;br/&gt;
   TBL_ID | PKEY_COMMENT | PKEY_NAME | PKEY_TYPE | INTEGER_IDX&lt;br/&gt;
  -------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;---------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------&lt;br/&gt;
        1 |              | b         | int       |           0&lt;br/&gt;
        3 |              | ds        | string    |           0&lt;br/&gt;
  (2 rows)&lt;/p&gt;

&lt;p&gt;  metastore=# select * from &quot;SERDES&quot;;&lt;br/&gt;
   SERDE_ID | NAME |                        SLIB&lt;br/&gt;
  ---------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------------------------------------------------&lt;br/&gt;
          1 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          2 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          3 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          4 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          5 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          6 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
          7 |      | org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&lt;br/&gt;
  (7 rows)&lt;/p&gt;

&lt;p&gt;  Upgrading to 0.9 is similar, and there is no schema object change:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;~/Code/hive/metastore/scripts/upgrade/postgres&amp;#93;&lt;/span&gt;psql -f upgrade-0.8.0-to-0.9.0.postgres.sql metastore&lt;br/&gt;
                      ?column?&lt;br/&gt;
  ------------------------------------------------&lt;br/&gt;
   Upgrading MetaStore schema from 0.8.0 to 0.9.0&lt;br/&gt;
  (1 row)&lt;/p&gt;

&lt;p&gt;                          ?column?&lt;br/&gt;
  ---------------------------------------------------------&lt;br/&gt;
   Finished upgrading MetaStore schema from 0.8.0 to 0.9.0&lt;br/&gt;
  (1 row)&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3027&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269092" author="phabricator@reviews.facebook.net" created="Sun, 6 May 2012 00:45:46 +0000"  >&lt;p&gt;cwsteinbach has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; metastore 0.8 upgrade script for PostgreSQL&quot;.&lt;/p&gt;

&lt;p&gt;   +1.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3027&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269093" author="cwsteinbach" created="Sun, 6 May 2012 00:48:02 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13269094" author="phabricator@reviews.facebook.net" created="Sun, 6 May 2012 00:55:45 +0000"  >&lt;p&gt;zhenxiao has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; metastore 0.8 upgrade script for PostgreSQL&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by cws.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3027&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1334537&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1334537&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269142" author="hudson" created="Sun, 6 May 2012 06:41:07 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1414 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1414/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1414/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; metastore 0.8 upgrade script for PostgreSQL&lt;br/&gt;
(Zhenxiao Luo via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt;:  metastore 0.8 upgrade script for PostgreSQL&lt;/p&gt;

&lt;p&gt;I think you mentioned that this was in the works.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D3027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3027&lt;/a&gt; (Revision 1334537)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1334537&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1334537&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/008-REVERT-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/hive-schema-0.8.0.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/hive-schema-0.9.0.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/upgrade-0.7.0-to-0.8.0.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/upgrade-0.8.0-to-0.9.0.postgres.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547862" author="hudson" created="Wed, 9 Jan 2013 10:23:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; metastore 0.8 upgrade script for PostgreSQL&lt;br/&gt;
(Zhenxiao Luo via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2529&quot; title=&quot;metastore 0.8 upgrade script for PostgreSQL &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2529&quot;&gt;&lt;del&gt;HIVE-2529&lt;/del&gt;&lt;/a&gt;:  metastore 0.8 upgrade script for PostgreSQL&lt;/p&gt;

&lt;p&gt;I think you mentioned that this was in the works.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D3027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3027&lt;/a&gt; (Revision 1334537)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1334537&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1334537&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/008-REVERT-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/hive-schema-0.8.0.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/hive-schema-0.9.0.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/upgrade-0.7.0-to-0.8.0.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/upgrade-0.8.0-to-0.9.0.postgres.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550221" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:51 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12522783">HIVE-2442</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12530394">HIVE-2552</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12525551" name="ASF.LICENSE.NOT.GRANTED--HIVE-2529.D3027.1.patch" size="74494" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 01:54:46 +0000"/>
                            <attachment id="12525552" name="HIVE-2529.1.patch.txt" size="74779" author="zhenxiao" created="Fri, 4 May 2012 01:56:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Nov 2011 22:08:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02unr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2530] Implement SHOW TBLPROPERTIES</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2530</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Since table properties can be defined arbitrarily, they should be easy for a user to query from the command-line.&lt;/p&gt;

&lt;p&gt;SHOW TBLPROPERTIES tblname;&lt;br/&gt;
...would show all of them, one per row, key \t value&lt;/p&gt;

&lt;p&gt;SHOW TBLPROPERTIES tblname (&quot;FOOBAR&quot;);&lt;br/&gt;
...would just show the value for the FOOBAR tblproperty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529169">HIVE-2530</key>
            <summary>Implement SHOW TBLPROPERTIES</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="leizhao">Lei Zhao</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2011 23:56:54 +0000</created>
                <updated>Thu, 15 Jun 2017 14:07:51 +0000</updated>
                            <resolved>Tue, 17 Apr 2012 17:23:23 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13137767" author="ashutoshc" created="Fri, 28 Oct 2011 00:01:18 +0000"  >&lt;p&gt;This could already be done via &lt;tt&gt;desc formatted tblname&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="13245646" author="phabricator@reviews.facebook.net" created="Tue, 3 Apr 2012 19:42:22 +0000"  >&lt;p&gt;leizhao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement SHOW TBLPROPERTIES&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2530&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Implemented new feature SHOW TBLPROPERTIES&lt;/p&gt;

&lt;p&gt;  Since table properties can be defined arbitrarily, they should be easy for a user to query from the command-line.&lt;/p&gt;

&lt;p&gt;  SHOW TBLPROPERTIES tblname;&lt;br/&gt;
  ...would show all of them, one per row, key \t value&lt;/p&gt;

&lt;p&gt;  SHOW TBLPROPERTIES tblname (&quot;FOOBAR&quot;);&lt;br/&gt;
  ...would just show the value for the FOOBAR tblproperty.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2589&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/show_tblproperties.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/show_tblproperties.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5907/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5907/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13246499" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 17:25:24 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement SHOW TBLPROPERTIES&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good, just a few comments.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java:370 The Table class already has a getParameters method which does exactly this.  While I agree that the inconsistencies between the uses of the words Parameters and Properties throughout the code is confusing, could you either call that method instead or at least have this method return the result of getParameters(), which would at least help to keep them consistent going forward.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java:55 spelling&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java:2573 Given that when this feature was requested, very specific guidelines were provided for how to format the data (one per row, tabs between property and value) it looks like this is wanted to make it easier to parse the properties from a  query.  Adding this line will make that a little more difficult.&lt;/p&gt;

&lt;p&gt;  In addition, there is a precedent for not adding a line like this in commands like SHOW PARTITIONS and DESCRIBE which list the partitions and columns respectively without a descriptive line like this.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java:2526-2527 I&apos;m guessing you got this from the implementation of DESCRIBE TABLE?&lt;/p&gt;

&lt;p&gt;  The reasoning for having that line there was so that you could describe &quot;the types within the column in the case when the column is an object&quot;&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-62&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-62&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  That shouldn&apos;t apply to this method, so you should be able to assume that the table name is the table name, without this parsing.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java:2533-2542 Could you put this code in the try catch block below.  The stringifyException method prints a stack trace so developers will be able to figure out if the table was null or not.  The catch code looks identical, so this will help remove some duplicate code.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2589&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13246655" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 19:49:19 +0000"  >&lt;p&gt;leizhao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement SHOW TBLPROPERTIES&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Thanks for the feedback! Updated accordingly.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2589&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/show_tblproperties.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/show_tblproperties.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/p&gt;</comment>
                            <comment id="13246712" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 20:43:22 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement SHOW TBLPROPERTIES&quot;.&lt;/p&gt;

&lt;p&gt;  Thanks, Lei.  I just noticed a couple more small things.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java:2532-2534 Thanks for making it one try catch block.  One other thing I noticed is we&apos;re doing this twice, but it looks like doing it at the beginning of the try should be sufficient.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java:38 Could you update this comment, it&apos;s not show tables.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java:42 here too.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java:62-65 The descriptions of these variables looks wrong.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2589&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13246726" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 20:59:21 +0000"  >&lt;p&gt;leizhao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement SHOW TBLPROPERTIES&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Thanks for catching those copy/paste issues!&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2589&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/show_tblproperties.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/show_tblproperties.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/p&gt;</comment>
                            <comment id="13250840" author="phabricator@reviews.facebook.net" created="Tue, 10 Apr 2012 17:22:13 +0000"  >&lt;p&gt;kevinwilfong has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement SHOW TBLPROPERTIES&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2589&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13250843" author="kevinwilfong" created="Tue, 10 Apr 2012 17:23:14 +0000"  >&lt;p&gt;Ashutosh: I agree that the information can already be viewed via a describe formatted command, however, for tables with a large number of properties, or even a large number of columns or large column comments, it becomes difficult for users to quickly find the property they&apos;re looking for.  This will help provide a clean view and ease readability.&lt;/p&gt;</comment>
                            <comment id="13255742" author="kevinwilfong" created="Tue, 17 Apr 2012 17:23:23 +0000"  >&lt;p&gt;Committed, thanks Lei.&lt;/p&gt;</comment>
                            <comment id="13256132" author="hudson" created="Wed, 18 Apr 2012 01:40:43 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1379 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1379/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1379/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt;. Implement SHOW TBLPROPERTIES. (leizhao via kevinwilfong) (Revision 1327189)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327189&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327189&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_tblproperties.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_tblproperties.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265350" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:59 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13286741" author="lars_francke" created="Thu, 31 May 2012 16:55:36 +0000"  >&lt;p&gt;This was &lt;em&gt;not&lt;/em&gt; released with Hive 0.9.0. It wasn&apos;t merged into branch-0.9 so it&apos;ll only come in 0.10 (or 0.9.1 or whatever). I can&apos;t change the Fix version field. Could someone else do that?&lt;/p&gt;</comment>
                            <comment id="13286805" author="ashutoshc" created="Thu, 31 May 2012 18:26:59 +0000"  >&lt;p&gt;Correct. Updated the Fix version for it.&lt;/p&gt;</comment>
                            <comment id="13547881" author="hudson" created="Wed, 9 Jan 2013 10:23:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2530&quot; title=&quot;Implement SHOW TBLPROPERTIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2530&quot;&gt;&lt;del&gt;HIVE-2530&lt;/del&gt;&lt;/a&gt;. Implement SHOW TBLPROPERTIES. (leizhao via kevinwilfong) (Revision 1327189)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327189&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1327189&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ShowTblPropertiesDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/show_tblproperties.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_tblproperties.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13080098">IMPALA-5515</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12521197" name="ASF.LICENSE.NOT.GRANTED--HIVE-2530.D2589.1.patch" size="18234" author="phabricator@reviews.facebook.net" created="Tue, 3 Apr 2012 19:42:23 +0000"/>
                            <attachment id="12521376" name="ASF.LICENSE.NOT.GRANTED--HIVE-2530.D2589.2.patch" size="17149" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 19:49:20 +0000"/>
                            <attachment id="12521388" name="ASF.LICENSE.NOT.GRANTED--HIVE-2530.D2589.3.patch" size="17005" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 20:59:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2011 00:01:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14580</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2531] Allow people to use only issue numbers without &apos;HIVE-&apos; prefix with `arc diff --jira`.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2531</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Allow people to use only issue numbers without &apos;HIVE-&apos; prefix with `arc diff --jira`.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529193">HIVE-2531</key>
            <summary>Allow people to use only issue numbers without &apos;HIVE-&apos; prefix with `arc diff --jira`.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mareksapota_fb">Marek Sapota</assignee>
                                    <reporter username="mareksapota_fb">Marek Sapota</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 04:34:00 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:58 +0000</updated>
                            <resolved>Fri, 28 Oct 2011 21:08:23 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13138749" author="jvs" created="Fri, 28 Oct 2011 21:08:23 +0000"  >&lt;p&gt;+1, committed to trunk.  Thanks Marek!&lt;/p&gt;</comment>
                            <comment id="13139020" author="hudson" created="Sat, 29 Oct 2011 00:40:24 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1041 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1041/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1041/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2531&quot; title=&quot;Allow people to use only issue numbers without &amp;#39;HIVE-&amp;#39; prefix with `arc diff --jira`.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2531&quot;&gt;&lt;del&gt;HIVE-2531&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Allow people to use only issue numbers without &apos;HIVE-&apos; prefix&lt;br/&gt;
with `arc diff --jira`.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: jsichi, JIRA&lt;/p&gt;

&lt;p&gt;Reviewed By: jsichi&lt;/p&gt;

&lt;p&gt;CC: jsichi, mareksapotafb&lt;/p&gt;

&lt;p&gt;Differential Revision: 93&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1190567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1190567&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/.arcconfig&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501361" name="D93.1.patch" size="375" author="mareksapota_fb" created="Fri, 28 Oct 2011 20:26:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2011 21:08:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2532] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2532</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Even if constant oi is returned, these may have stateful/side-effect behavior and hence need to be called each cycle.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529282">HIVE-2532</key>
            <summary>Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 16:46:36 +0000</created>
                <updated>Thu, 2 Aug 2012 11:43:48 +0000</updated>
                            <resolved>Fri, 11 Nov 2011 19:49:19 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13138595" author="jonchang" created="Fri, 28 Oct 2011 18:01:02 +0000"  >&lt;p&gt;I have a patch but don&apos;t have a good testcase yet.  This might be a good time to add a side-effecting UDF.  Any suggestions?&lt;/p&gt;</comment>
                            <comment id="13138599" author="jonchang" created="Fri, 28 Oct 2011 18:03:34 +0000"  >&lt;p&gt;Ooo, how about a counter diff?&lt;/p&gt;</comment>
                            <comment id="13138628" author="jvs" created="Fri, 28 Oct 2011 18:43:36 +0000"  >&lt;p&gt;contrib/src/java/org/apache/hadoop/hive/contrib/udf/UDFRowSequence.java&lt;/p&gt;

&lt;p&gt;(I used this for the existing stateful test cases.)&lt;/p&gt;</comment>
                            <comment id="13139367" author="ikabiljo" created="Sat, 29 Oct 2011 17:06:12 +0000"  >&lt;p&gt;@John: UDFRowSequence should already work, problem is when UDF returns ConstantOI, but has side-effects.&lt;/p&gt;

&lt;p&gt;One (not very useful) pair of UDFs for this could be FB_LOCAL_PROPERTY_SET(key, value) and FB_LOCAL_PROPERTY_GET(key), where FB_LOCAL_PROPERTY_SET returns ConstVoidOI, but has side-effects&lt;/p&gt;</comment>
                            <comment id="13144874" author="phabricator@reviews.facebook.net" created="Sat, 5 Nov 2011 23:54:51 +0000"  >&lt;p&gt;jonchang requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Even if constant oi is returned, these may have stateful/side-effect behavior and hence need to be called each cycle.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_assert_true.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_assert_true.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/519/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/519/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13144875" author="phabricator@reviews.facebook.net" created="Sun, 6 Nov 2011 00:10:51 +0000"  >&lt;p&gt;ikabiljo has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;  Java code looks good, not sure what are .q and .q.out files, so will leave to others to accept &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
  Just a small inline comment.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java:60-61 why don&apos;t convert to javaBooleanObjectInspector, usage is easier?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13144883" author="phabricator@reviews.facebook.net" created="Sun, 6 Nov 2011 01:34:51 +0000"  >&lt;p&gt;jonchang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java:60-61 Boolean is not really much less difficult and someone once told me that the Writables are more efficient.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13146526" author="phabricator@reviews.facebook.net" created="Tue, 8 Nov 2011 20:13:51 +0000"  >&lt;p&gt;jsichi has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;  Try this:&lt;/p&gt;

&lt;p&gt;  SELECT 1+ASSERT_TRUE(x &amp;lt; 2) FROM src LATERAL VIEW EXPLODE(ARRAY(1, 2)) a AS x LIMIT 2;&lt;/p&gt;

&lt;p&gt;  I assume it should hit an exception, but it actually passes.  Guess why?&lt;/p&gt;



&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 FunctionRegistry.isDeterministic always returns false for a stateful UDF, so you don&apos;t need to double-check here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13146562" author="phabricator@reviews.facebook.net" created="Tue, 8 Nov 2011 20:55:51 +0000"  >&lt;p&gt;jonchang has planned changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;  Ugh.  Will fix and add new unittest&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13147519" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 06:51:51 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;  Make deterministic check recursive.  Add unittest to test for this case.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_assert_true.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_assert_true2.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_assert_true.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_assert_true2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;/p&gt;</comment>
                            <comment id="13147988" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 20:33:51 +0000"  >&lt;p&gt;jsichi has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 Note that Java does not short-circuit the &amp;amp;= assignment.&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://stackoverflow.com/questions/3152208/do-and-short-circuit-in-java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/3152208/do-and-short-circuit-in-java&lt;/a&gt;&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java:43 Need Javadoc here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148063" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 22:35:51 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;  jvs&apos; comments.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_assert_true.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_assert_true2.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_assert_true.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_assert_true2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;/p&gt;</comment>
                            <comment id="13148073" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 22:41:51 +0000"  >&lt;p&gt;jonchang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 Really?  Jeebus.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148074" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 22:41:52 +0000"  >&lt;p&gt;jsichi has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 &amp;amp; is eager; &amp;amp;&amp;amp; short-circuits&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148077" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 22:43:51 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;  &amp;amp; -&amp;gt; &amp;amp;&amp;amp;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_assert_true.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_assert_true2.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_assert_true.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_assert_true2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;/p&gt;</comment>
                            <comment id="13148096" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 23:13:51 +0000"  >&lt;p&gt;jsichi has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;  OK I&apos;ll kick off tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148686" author="jvs" created="Fri, 11 Nov 2011 19:36:08 +0000"  >&lt;p&gt;+1, tests passed.  Can you grant ASF rights?&lt;/p&gt;</comment>
                            <comment id="13148687" author="phabricator@reviews.facebook.net" created="Fri, 11 Nov 2011 19:36:51 +0000"  >&lt;p&gt;jsichi has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;  spockwin&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148699" author="phabricator@reviews.facebook.net" created="Fri, 11 Nov 2011 19:48:52 +0000"  >&lt;p&gt;jonchang has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D273&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1201035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1201035&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148702" author="jvs" created="Fri, 11 Nov 2011 19:49:19 +0000"  >&lt;p&gt;Committed to trunk, thanks Jonathan!  Also don&apos;t forget to update the wiki.&lt;/p&gt;</comment>
                            <comment id="13148861" author="hudson" created="Fri, 11 Nov 2011 23:53:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1078 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1078/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1078/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Evaluation of non-deterministic/stateful UDFs should not be&lt;br/&gt;
skipped even if constant oi is returned.&lt;br/&gt;
(Jonathan Chang via jvs)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2532&quot; title=&quot;Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2532&quot;&gt;&lt;del&gt;HIVE-2532&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Even if constant oi is returned, these may have stateful/side-effect behavior&lt;br/&gt;
and hence need to be called each cycle.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;Reviewed By: jsichi&lt;/p&gt;

&lt;p&gt;CC: ikabiljo, jonchang, jsichi&lt;/p&gt;

&lt;p&gt;Differential Revision: 273&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1201035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1201035&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_assert_true.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_assert_true2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_assert_true.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_assert_true2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13427133" author="rohithsharma" created="Thu, 2 Aug 2012 06:18:39 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
I have one doubt on ASSERT_TRUE() funtion. Currently ASSERT_TRUE() is returning NULL.Its PrimitiveType is VOID.Once query is executed in CLI mode, output of query prints NULL in console where as in JDBC client throw an exception(&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3200&quot; title=&quot;Results of the assert_true UDF are not retrieving through ResultSet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3200&quot;&gt;&lt;del&gt;HIVE-3200&lt;/del&gt;&lt;/a&gt;).The serde implimentation for PrimitiveType VOID throw exception.&lt;/p&gt;

&lt;p&gt;Correct me if I am wrong,&lt;br/&gt;
From the user perspective I feel its better to return boolean value i.e TRUE instead of returning NULL. Please give your opinion..&lt;/p&gt;</comment>
                            <comment id="13427197" author="jonchang" created="Thu, 2 Aug 2012 09:27:57 +0000"  >&lt;p&gt;It&apos;s ok by me if you want to return a bool instead.  That being said, things should not crash if things are NULL (I think this was a recent regression and there&apos;s a JIRA open for it).&lt;/p&gt;</comment>
                            <comment id="13427249" author="rohithsharma" created="Thu, 2 Aug 2012 11:43:48 +0000"  >&lt;p&gt;I tested with changing implementation to boolean.All the positive scenario works fine. Whereas , &quot;SELECT 1 + assert_true FROM src&quot;  fails.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-08-02 16:34:31,173 ERROR ql.Driver (SessionState.java:printError(400)) - FAILED: Error in semantic analysis: Line 1:7 Wrong arguments &apos;0&apos;: Unable to find a common class betweentypes int and boolean
org.apache.hadoop.hive.ql.parse.SemanticException: Line 1:7 Wrong arguments &apos;0&apos;: Unable to find a common class betweentypes int and boolean
	at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.process(TypeCheckProcFactory.java:896)
	at org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:89)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With string return type, &quot;SELECT 1 + assert_true FROM src&quot; query execution is successfull.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12502631" name="ASF.LICENSE.NOT.GRANTED--D273.1.patch" size="13719" author="phabricator@reviews.facebook.net" created="Sat, 5 Nov 2011 23:54:52 +0000"/>
                            <attachment id="12503172" name="ASF.LICENSE.NOT.GRANTED--D273.2.patch" size="19003" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 06:51:52 +0000"/>
                            <attachment id="12503293" name="ASF.LICENSE.NOT.GRANTED--D273.3.patch" size="19101" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 22:35:52 +0000"/>
                            <attachment id="12503299" name="ASF.LICENSE.NOT.GRANTED--D273.4.patch" size="19102" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 22:43:52 +0000"/>
                            <attachment id="12503410" name="D273.4.patch" size="19102" author="jonchang" created="Fri, 11 Nov 2011 19:45:03 +0000"/>
                            <attachment id="12503409" name="D273.4.patch" size="19102" author="jonchang" created="Fri, 11 Nov 2011 19:44:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2011 18:43:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2533] test load_fs.q failing</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2533</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12529283">HIVE-2533</key>
            <summary>test load_fs.q failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 16:51:04 +0000</created>
                <updated>Thu, 3 Nov 2011 17:38:36 +0000</updated>
                            <resolved>Thu, 3 Nov 2011 17:38:36 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13138518" author="namit" created="Fri, 28 Oct 2011 16:51:16 +0000"  >&lt;p&gt;It is failing on trunk&lt;/p&gt;</comment>
                            <comment id="13138571" author="ashutoshc" created="Fri, 28 Oct 2011 17:31:29 +0000"  >&lt;p&gt;Tests passes for me on trunk:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ svn up
At revision 1190465.
$ svn info
Path: .
URL: http:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/hive/trunk
&lt;/span&gt;Repository Root: http:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf
&lt;/span&gt;Repository UUID: 13f79535-47bb-0310-9956-ffa450edef68
Revision: 1190465
Node Kind: directory
Schedule: normal
Last Changed Author: jvs
Last Changed Rev: 1189535
Last Changed Date: 2011-10-26 16:33:12 -0700 (Wed, 26 Oct 2011)
$ ant test -Dtestcase=TestCliDriver -Dqfile=load_fs.q
:
:
BUILD SUCCESSFUL
Total time: 4 minutes 15 seconds

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13138620" author="jvs" created="Fri, 28 Oct 2011 18:37:47 +0000"  >&lt;p&gt;This is due to&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-13&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HDFS-13&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;load_fs.q references &apos;/tmp/load2_*&apos;.&lt;/p&gt;

&lt;p&gt;Namit, look in your /tmp directory and you&apos;ll find files with names like &lt;/p&gt;

&lt;p&gt;somehost.facebook.com:9000&lt;/p&gt;

&lt;p&gt;One fix is to just delete those files, but something within FB environment creates them there occasionally, so we may want to come up with a better fix.&lt;/p&gt;</comment>
                            <comment id="13143363" author="namit" created="Thu, 3 Nov 2011 17:38:36 +0000"  >&lt;p&gt;Thanks John, that was the problem&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2011 17:31:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215143</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2534] HiveIndexResult creation fails due to file system issue</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2534</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the file system for temp files differs from the default file system in the conf, HiveIndexResult&apos;s constructor fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529305">HIVE-2534</key>
            <summary>HiveIndexResult creation fails due to file system issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 19:40:52 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:22 +0000</updated>
                            <resolved>Mon, 31 Oct 2011 17:34:02 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13138690" author="jiraposter@reviews.apache.org" created="Fri, 28 Oct 2011 19:47:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2602/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2602/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Yongqiang He and namit jain.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fixes an issue with HiveIndexResult where the constructor would fail if the file system for temp directories differed from the default file system in the conf.&lt;/p&gt;

&lt;p&gt;Instead of getting the file system from the conf, it gets it from the paths.&lt;/p&gt;

&lt;p&gt;Thanks to Yongqiang for identifying the issue and suggesting the fix.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2534&quot; title=&quot;HiveIndexResult creation fails due to file system issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2534&quot;&gt;&lt;del&gt;HIVE-2534&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2534&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2534&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexResult.java 1183507 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2602/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2602/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Verified it fixed a query that was failing.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13138733" author="he yongqiang" created="Fri, 28 Oct 2011 20:47:26 +0000"  >&lt;p&gt;+1, will commit after tests pass&lt;/p&gt;</comment>
                            <comment id="13140350" author="he yongqiang" created="Mon, 31 Oct 2011 17:34:02 +0000"  >&lt;p&gt;committed, thanks Kevin!&lt;/p&gt;</comment>
                            <comment id="13140648" author="hudson" created="Mon, 31 Oct 2011 23:00:07 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1048 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1048/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1048/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2534&quot; title=&quot;HiveIndexResult creation fails due to file system issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2534&quot;&gt;&lt;del&gt;HIVE-2534&lt;/del&gt;&lt;/a&gt;: HiveIndexResult creation fails due to file system issue (Kevin Wilfong via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195580&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195580&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/HiveIndexResult.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501354" name="HIVE-2534.1.patch.txt" size="1626" author="kevinwilfong" created="Fri, 28 Oct 2011 19:45:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2011 19:47:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215165</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123962</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2535] Use sorted nature of compact indexes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2535</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Compact indexes are sorted based on the indexed columns, but we are not using this fact when we access the index.&lt;/p&gt;

&lt;p&gt;To start with, if the index is stored as an RC file, and if the predicate being used to access the index consists of only one non-partition condition using one of the operators &amp;gt;,&amp;gt;=,&amp;lt;,&amp;lt;=,= we could use a binary search (if necessary) to find the block to begin scanning for unfiltered rows, and we could use the result of comparing the value in the column with the constant (this is necessarily the form of a predicate which is optimized using an index) to determine when we have found all the rows which will be unfiltered.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529321">HIVE-2535</key>
            <summary>Use sorted nature of compact indexes</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                            <label>indexing</label>
                            <label>performance</label>
                    </labels>
                <created>Fri, 28 Oct 2011 21:58:26 +0000</created>
                <updated>Wed, 27 Jun 2012 22:09:08 +0000</updated>
                            <resolved>Wed, 16 Nov 2011 04:42:27 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Indexing</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13139052" author="jiraposter@reviews.apache.org" created="Sat, 29 Oct 2011 01:41:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;

&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;

&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;br/&gt;
  trunk/conf/hive-default.xml 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveSortedInputFormat.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;

&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;

&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;

&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13141375" author="namit" created="Tue, 1 Nov 2011 17:37:59 +0000"  >&lt;p&gt;changed to patch available&lt;/p&gt;</comment>
                            <comment id="13141404" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 18:01:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/#review2974&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#review2974&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6684&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6684&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The default can be true&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6692&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6692&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    nit: spelling &lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6685&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    More comments here.&lt;br/&gt;
    It would be useful to describe when is a binary search&lt;br/&gt;
    performed.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6694&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6694&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This should not be hard-coded.&lt;br/&gt;
    If user wanted HiveInputFormat, it should be &lt;br/&gt;
    HiveSortedInputFormat and same for CombineHiveSortedInputFormat.&lt;/p&gt;

&lt;p&gt;    Do we need a new class, or can sorted be a &lt;br/&gt;
    property of input format ? Then, it should automatcally&lt;br/&gt;
    work for both hiveIF and combinehiveIF&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6695&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6695&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    use the term index column instead of non-partition column.&lt;/p&gt;

&lt;p&gt;    Who is using the function findNonPartitionFilterWork.&lt;br/&gt;
    It is not modifying any internal structure, and the &lt;br/&gt;
    return value is not used&lt;/p&gt;




&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6696&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6696&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I am confused - what if the filter contains multiple&lt;br/&gt;
    non partition column predicates ?&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveSortedInputFormat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6698&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6698&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    As mentioned before, it would be good if this also works with CombineHiveIF&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;namit&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-29 01:39:50, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-29 01:39:50)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveBinarySearchRecordReader.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveSortedInputFormat.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13141408" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 18:07:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/#review2987&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#review2987&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveBinarySearchRecordReader.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6699&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6699&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    do you need to override these functions ?&lt;br/&gt;
    They should be same as HiveRR&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;namit&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-29 01:39:50, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-29 01:39:50)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveBinarySearchRecordReader.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveSortedInputFormat.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13141425" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 18:19:33 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/#review2988&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#review2988&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6700&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6700&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    findNonPartitionFilter modifies the conf of the FilterOperator for the index column to mark it as the one on which the data is sorted.&lt;/p&gt;

&lt;p&gt;    See line 239&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2605/#comment6703&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/#comment6703&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    the boolean useSorted used at line 186 in the if statement surrounding the call to this method is set to true iff the number of index columns being filtered on is 1 see line 277.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Kevin&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-29 01:39:50, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-29 01:39:50)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveBinarySearchRecordReader.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveSortedInputFormat.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13141782" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 23:57:31 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-01 23:56:58.062678)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Thanks for the feedback Namit.  This diff should address all of your comments that I haven&apos;t already addressed with my own comments.&lt;/p&gt;

&lt;p&gt;The most notable change in this diff is that the BinarySearchRecordReader can now be used for both HiveInputFormat and CombineHiveInputFormat.  Their respective record readers now inherit from BinarySearchRecordReader, and the CompactIndexHandler sets a variable representing whether or not the BinarySearchRecordReader should attempt to run its optimized search algorithm on the data.  If that variable is not set, the record readers behave exactly as they did before.&lt;/p&gt;

&lt;p&gt;I updated the tests I added and verified they passed.  I also ran the tests most likely to be affected, notably any tests related to indexes, and verified they still passed.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;

&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;

&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;br/&gt;
  trunk/conf/hive-default.xml 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;

&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;

&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;

&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13141788" author="jiraposter@reviews.apache.org" created="Wed, 2 Nov 2011 00:07:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-02 00:07:10.165338)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated hive-defalut.xml with the new default value of hive.index.compact.binary.search&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;

&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;

&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;br/&gt;
  trunk/conf/hive-default.xml 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;

&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;

&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;

&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13143656" author="jiraposter@reviews.apache.org" created="Fri, 4 Nov 2011 00:43:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-04 00:42:51.180303)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;As Namit suggested, I merged HiveBinarySearchRecordReader and HiveContextAwareRecordReader into a single class, as it seemed the binary search is closely tied to the context.&lt;/p&gt;

&lt;p&gt;I also realized while doing this that I could update BucketizedHiveRecordReader to support binary search as well.&lt;/p&gt;

&lt;p&gt;I updated the tests, reran the tests, and also ran tests to verify BucketizedHiveRecordReader was not broken.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;

&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;

&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;br/&gt;
  trunk/conf/hive-default.xml 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;

&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;

&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;

&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13149864" author="jiraposter@reviews.apache.org" created="Mon, 14 Nov 2011 20:10:51 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-14 20:10:27.544678)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This diff is in response to Yongqiang&apos;s comments.&lt;/p&gt;

&lt;p&gt;He pointed out that if the ExprNode in a FilterOperator is a tree, rather than a single operator, the optimizations will not be applied.  This was fixed by marking the FilterOperator, and the ExprNode in the tree, where the index column is compared.  When the FilterOperator needs to execute a comparison, it traverses the tree of ExprNodes until it identifies the marked ExprNode which has the context necessary to perform the comparison.&lt;/p&gt;

&lt;p&gt;There was also an issue where CombineHiveRecordReaders were not always being marked as sorted when they should.  This was fixed by marking them as sorted as part of the initIOContext call, instead of as part of the HiveContextAwareRecordReader constructor.&lt;/p&gt;

&lt;p&gt;Instead of determining if the input format class supports making use of sorted input by string comparison of the class name in the CompactIndexHandler, I check whether or not the class extends HiveInputFormat.  Currently this is sufficient as all of the InputFormats introduced in Hive extend this, and I ensured that all such InputFormats do indeed support making use of sorted input.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The CompactIndexHandler determines if the reentrant query it creates is a candidate for using the fact the index is sorted (it has an appropriate number of non-partition conditions, and the query plan is of the form expected).  It sets the input format to HiveSortedInputFormat, and marks the FilterOperator for the non-partition condition.&lt;/p&gt;

&lt;p&gt;The HiveSortedInputFormat is extends HiveInputFormat, so its splits consist of data from a single file, and its record reader is HiveBinarySearchRecordReader.  HiveBinarySearchRecordReader starts by assuming it is performing a binary search.  It sets the appropriate flags in IOContext, which acts as the means of communication between the FilterOperators and the record reader.  The non-partition FilterOperator is responsible for executing a comparison between the value in the row and column of interest and the constant.  It also provides the type of the generic UDF.  It sets this data in the IOContext.  As long as the binary search continues the FilterOperators do not forward rows to the operators below them.  The record reader uses the comparison and the type of the generic UDF to execute a binary search on the underlying RCFile until it finds the block of interest, or determines that if any block is of interest it is the last one.  The search then proceeds linearly from the beginning of the identified block.  If ever in the binary search a problem occurs, like the comparison fails for some reason, a linear search begins from the beginning of the data which has yet to be eliminated.&lt;/p&gt;

&lt;p&gt;Regardless of whether or not a binary search is performed, the record reader attempts to end the linear search as soon as it can based on the comparison and the type of the generic UDF.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2535&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1183507 &lt;br/&gt;
  trunk/conf/hive-default.xml 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1183507 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1183507 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test to verify the functionality of the HiveBinarySearchRecordReader.&lt;/p&gt;

&lt;p&gt;I also added a .q file to test that this returns the correct results when the underlying index is stored in an RCFile and when it is stored in as a text file, with all of the supported operators.&lt;/p&gt;

&lt;p&gt;I ran the .q files to verify they still pass.&lt;/p&gt;

&lt;p&gt;I ran some queries to verify there was a CPU benefit to doing this.  I saw as much as a 45% reduction in the total CPU used by the map reduce job to scan the index, for a large data set. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13150712" author="he yongqiang" created="Tue, 15 Nov 2011 19:42:06 +0000"  >&lt;p&gt;looks good, running tests&lt;/p&gt;</comment>
                            <comment id="13151017" author="he yongqiang" created="Wed, 16 Nov 2011 04:42:27 +0000"  >&lt;p&gt;committed, thanks Kevin!&lt;/p&gt;</comment>
                            <comment id="13151100" author="hudson" created="Wed, 16 Nov 2011 09:01:16 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1089 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1089/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1089/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2535&quot; title=&quot;Use sorted nature of compact indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2535&quot;&gt;&lt;del&gt;HIVE-2535&lt;/del&gt;&lt;/a&gt;: Use sorted nature of compact indexes (Kevin Wilfong via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1202525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1202525&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/IOContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FilterDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHiveSortedInputFormatUsedHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/io/TestHiveBinarySearchRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/index_compact_binary_search.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501420" name="HIVE-2535.1.patch.txt" size="67469" author="kevinwilfong" created="Sat, 29 Oct 2011 01:41:12 +0000"/>
                            <attachment id="12501879" name="HIVE-2535.2.patch.txt" size="76927" author="kevinwilfong" created="Wed, 2 Nov 2011 00:07:33 +0000"/>
                            <attachment id="12502248" name="HIVE-2535.3.patch.txt" size="87312" author="kevinwilfong" created="Fri, 4 Nov 2011 00:43:50 +0000"/>
                            <attachment id="12503663" name="HIVE-2535.4.patch.txt" size="91282" author="kevinwilfong" created="Mon, 14 Nov 2011 20:11:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Oct 2011 01:41:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i010an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2536] Support scientific notation for Double literals</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2536</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Of the form 1.0e10.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529523">HIVE-2536</key>
            <summary>Support scientific notation for Double literals</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Oct 2011 18:17:50 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:47 +0000</updated>
                            <resolved>Tue, 1 Nov 2011 05:22:00 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13140440" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 18:53:32 +0000"  >&lt;p&gt;jonchang requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;br/&gt;
Reviewers: DUMMY_REVIEWER&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Of the form 1.0e10.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_double.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_double.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/273/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/273/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13140441" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 18:53:34 +0000"  >&lt;p&gt;jonchang requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;br/&gt;
Reviewers: DUMMY_REVIEWER&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Of the form 1.0e10.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_double.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_double.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/273/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/273/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13140442" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 18:55:32 +0000"  >&lt;p&gt;jonchang has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g:2382 I totally don&apos;t know why, but not having this OR clause here (and using the version on the left) will cause all scientific notation to break.  ANTLR bug perhaps?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13140443" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 18:55:32 +0000"  >&lt;p&gt;jonchang has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g:2382 I totally don&apos;t know why, but not having this OR clause here (and using the version on the left) will cause all scientific notation to break.  ANTLR bug perhaps?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13140510" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 20:09:32 +0000"  >&lt;p&gt;jsichi has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g:2382 Interesting.  Before, it was interpreting&lt;/p&gt;

&lt;p&gt;  select 1.0e3&lt;/p&gt;

&lt;p&gt;  the same as&lt;/p&gt;

&lt;p&gt;  select 1.0 e3&lt;/p&gt;

&lt;p&gt;  which fits the pattern&lt;/p&gt;

&lt;p&gt;  select 1.0 mycolumnaliaswhichendswithadigi7&lt;/p&gt;

&lt;p&gt;  Dunno why introducing the choice into the grammar gives the fragment precedence over the column aliasing rule, but since we need it anyway...shipit.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13140511" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 20:09:32 +0000"  >&lt;p&gt;jsichi has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g:2382 Interesting.  Before, it was interpreting&lt;/p&gt;

&lt;p&gt;  select 1.0e3&lt;/p&gt;

&lt;p&gt;  the same as&lt;/p&gt;

&lt;p&gt;  select 1.0 e3&lt;/p&gt;

&lt;p&gt;  which fits the pattern&lt;/p&gt;

&lt;p&gt;  select 1.0 mycolumnaliaswhichendswithadigi7&lt;/p&gt;

&lt;p&gt;  Dunno why introducing the choice into the grammar gives the fragment precedence over the column aliasing rule, but since we need it anyway...shipit.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13140512" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 20:09:33 +0000"  >&lt;p&gt;jsichi has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g:2382 Interesting.  Before, it was interpreting&lt;/p&gt;

&lt;p&gt;  select 1.0e3&lt;/p&gt;

&lt;p&gt;  the same as&lt;/p&gt;

&lt;p&gt;  select 1.0 e3&lt;/p&gt;

&lt;p&gt;  which fits the pattern&lt;/p&gt;

&lt;p&gt;  select 1.0 mycolumnaliaswhichendswithadigi7&lt;/p&gt;

&lt;p&gt;  Dunno why introducing the choice into the grammar gives the fragment precedence over the column aliasing rule, but since we need it anyway...shipit.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13140517" author="jvs" created="Mon, 31 Oct 2011 20:13:09 +0000"  >&lt;p&gt;+1, will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13140944" author="jvs" created="Tue, 1 Nov 2011 05:22:00 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Jonathan!&lt;/p&gt;</comment>
                            <comment id="13140954" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 05:38:32 +0000"  >&lt;p&gt;jonchang has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1195830&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1195830&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13140956" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 05:42:32 +0000"  >&lt;p&gt;jonchang has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1195830&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1195830&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13140995" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 07:30:32 +0000"  >&lt;p&gt;jonchang has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt; Support scientific notation for Double literals&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1195830&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1195830&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141052" author="hudson" created="Tue, 1 Nov 2011 09:44:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1049 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1049/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1049/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt;. Support scientific notation for Double literals&lt;br/&gt;
(Jonathan Chang via jvs)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2536&quot; title=&quot;Support scientific notation for Double literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2536&quot;&gt;&lt;del&gt;HIVE-2536&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Of the form 1.0e10.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: DUMMY_REVIEWER, jsichi&lt;/p&gt;

&lt;p&gt;Reviewed By: jsichi&lt;/p&gt;

&lt;p&gt;CC: JIRA, jonchang, jsichi&lt;/p&gt;

&lt;p&gt;Differential Revision: 129&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195830&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195830&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/literal_double.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/literal_double.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501652" name="ASF.LICENSE.NOT.GRANTED--D129.1.patch" size="3751" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 18:53:34 +0000"/>
                            <attachment id="12501651" name="ASF.LICENSE.NOT.GRANTED--D129.1.patch" size="3751" author="phabricator@reviews.facebook.net" created="Mon, 31 Oct 2011 18:53:33 +0000"/>
                            <attachment id="12501663" name="D129.1.patch" size="3751" author="jonchang" created="Mon, 31 Oct 2011 20:46:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Oct 2011 18:53:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2537] Disallow useless DISTRIBUTE BY/SORT BY/CLUSTER BY in strict mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2537</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This query:&lt;/p&gt;

&lt;p&gt;CREATE TABLE my_tablename AS&lt;br/&gt;
SELECT a, b, c&lt;br/&gt;
FROM somewhere&lt;br/&gt;
CLUSTER BY c;&lt;/p&gt;

&lt;p&gt;...has an unnecessary CLUSTER BY, because the resulting data will be loaded into a non-bucketed table without any enforcement of bucketing. We should disallow this in strict mode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529527">HIVE-2537</key>
            <summary>Disallow useless DISTRIBUTE BY/SORT BY/CLUSTER BY in strict mode</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Oct 2011 18:28:52 +0000</created>
                <updated>Mon, 31 Oct 2011 18:28:52 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2538] Database level authorization can be circumvented by first &quot;using&quot; a database that one has ALL privileges to</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2538</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;You can replicate this bug by recreating my setup, which I describe below:&lt;/p&gt;

&lt;p&gt;I have our &quot;default&quot; database set up to only allow SELECT for user &quot;skrishnan&quot;. But user skrishnan has &quot;ALL&quot; privileges on database &quot;skrishnan&quot;.&lt;/p&gt;

&lt;p&gt;The following works correctly (i.e user shouldn&apos;t be able to create a table in the default database):&lt;/p&gt;

&lt;p&gt;hive&amp;gt; use default;&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.043 seconds&lt;br/&gt;
hive&amp;gt; create table skrishnan_test(i int);&lt;br/&gt;
Authorization failed:No privilege &apos;Create&apos; found for outputs &lt;/p&gt;
{ database:default}
&lt;p&gt;. Use show grant to get more details. (&lt;b&gt;Correct Behavior&lt;/b&gt;)&lt;/p&gt;

&lt;p&gt;However, user skrishnan can indeed create tables in the default database by doing this:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; use skrishnan; &lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.038 seconds&lt;br/&gt;
hive&amp;gt; create table &lt;b&gt;default.skrishnan_test(i int);&lt;/b&gt;&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.34 seconds (&lt;b&gt;Incorrect behavior&lt;/b&gt;)&lt;/p&gt;

&lt;p&gt;That means that the database level authorization is basically circumvented by first using a database that a user has all privileges to. And then using the fully qualified table name (db&amp;#95;name.table&amp;#95;name) for a database that a user doesn&apos;t have permissions to.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529603">HIVE-2538</key>
            <summary>Database level authorization can be circumvented by first &quot;using&quot; a database that one has ALL privileges to</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="skrishnan">Sriram Krishnan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2011 01:16:56 +0000</created>
                <updated>Mon, 26 Nov 2012 21:31:06 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>Authorization</component>
                    <component>Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12543930">HIVE-2818</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0119r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3971</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2539] Enable passing username/password via JDBC</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2539</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Changing the username and/or the password seems to have no effect (also confirmed here: &lt;a href=&quot;https://cwiki.apache.org/Hive/hivejdbcinterface.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/Hive/hivejdbcinterface.html&lt;/a&gt;). &lt;/p&gt;

&lt;p&gt;   Connection con = DriverManager.getConnection(&quot;jdbc:hive://localhost:10000/default&quot;, &quot;&quot;, &quot;&quot;);&lt;/p&gt;

&lt;p&gt;Would be beneficial to pass the username/password via JDBC - and also for the server to honor the username password being passed (may be dependent of that being fixed first).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12529609">HIVE-2539</key>
            <summary>Enable passing username/password via JDBC</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10">Implemented</resolution>
                                        <assignee username="xcqnoah">chunqing xie</assignee>
                                    <reporter username="skrishnan">Sriram Krishnan</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Tue, 1 Nov 2011 01:53:11 +0000</created>
                <updated>Wed, 26 Mar 2014 21:00:41 +0000</updated>
                            <resolved>Wed, 26 Mar 2014 21:00:41 +0000</resolved>
                                    <version>0.7.1</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13205464" author="xcqnoah" created="Fri, 10 Feb 2012 14:09:00 +0000"  >&lt;p&gt;The username and password is processed in HiveConnection.java&lt;/p&gt;</comment>
                            <comment id="13205466" author="xcqnoah" created="Fri, 10 Feb 2012 14:12:48 +0000"  >&lt;p&gt;DriverManager.getConnection() with username/password or without username/password are both tested.&lt;/p&gt;</comment>
                            <comment id="13274610" author="mac.hadoop@gmail.com" created="Mon, 14 May 2012 14:21:11 +0000"  >&lt;p&gt;Why don&apos;t we change thrift and add a login method?&lt;/p&gt;</comment>
                            <comment id="13276529" author="mac.hadoop@gmail.com" created="Wed, 16 May 2012 07:08:19 +0000"  >&lt;p&gt;our solution is enable the login in the thrift RPC and use login when initialize the HiveConnection. Then in HiveServer, we put the username into the SessionState after authentication. &lt;/p&gt;</comment>
                            <comment id="13477518" author="cwsteinbach" created="Wed, 17 Oct 2012 01:19:59 +0000"  >&lt;p&gt;Please post a review request on reviewboard or phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13947632" author="qwertymaniac" created="Wed, 26 Mar 2014 07:42:55 +0000"  >&lt;p&gt;This should no longer be an issue with the new jdbc:hive2 drivers.&lt;/p&gt;</comment>
                            <comment id="13948455" author="prasadm" created="Wed, 26 Mar 2014 20:59:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qwertymaniac&quot; class=&quot;user-hover&quot; rel=&quot;qwertymaniac&quot;&gt;Harsh J&lt;/a&gt; Thanks for bringing that up. HiveServer2 and it&apos;s JDBC driver support multiple authentication mechanisms. &lt;br/&gt;
I will go ahead and close the issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mac.hadoop%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;mac.hadoop@gmail.com&quot;&gt;Mac Fang&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xcqnoah&quot; class=&quot;user-hover&quot; rel=&quot;xcqnoah&quot;&gt;chunqing xie&lt;/a&gt; Just in case, if you are still interested in submitting the patch for old HiveServer, please feel free to reopen the ticket. Thanks!&lt;/p&gt;</comment>
                            <comment id="13948456" author="prasadm" created="Wed, 26 Mar 2014 21:00:41 +0000"  >&lt;p&gt;The JDBC driver for HiveServer2 support user/password authentication via JDBC getConnection() API.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12514106" name="HIVE-2539.PATCH" size="1933" author="xcqnoah" created="Fri, 10 Feb 2012 14:10:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2012 14:09:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2540] LATERAL VIEW with EXPLODE produces ConcurrentModificationException</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2540</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following produces &lt;tt&gt;ConcurrentModificationException&lt;/tt&gt; on the &lt;tt&gt;for&lt;/tt&gt; loop inside EXPLODE:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table foo as select array(1, 2) a from src limit 1;
select a, x.b from foo lateral view explode(a) x as b;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12529703">HIVE-2540</key>
            <summary>LATERAL VIEW with EXPLODE produces ConcurrentModificationException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="electrum">David Phillips</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2011 17:32:28 +0000</created>
                <updated>Wed, 25 Mar 2015 18:42:26 +0000</updated>
                            <resolved>Sun, 27 May 2012 12:08:25 +0000</resolved>
                                    <version>0.7.1</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13141372" author="electrum" created="Tue, 1 Nov 2011 17:34:17 +0000"  >&lt;p&gt;The bug is related to outputting the input array.  For example, both of these work correctly:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select x.b from foo lateral view explode(a) x as b;
select size(a), x.b from foo lateral view explode(a) x as b;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13141373" author="electrum" created="Tue, 1 Nov 2011 17:34:28 +0000"  >&lt;p&gt;This is the exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-01 10:20:06,139 FATAL ExecMapper (ExecMapper.java:map(160)) - org.apache.hadoop.hive.ql.metadata.HiveException: Hive &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing row {&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;:[1,2]}
        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:546)
        at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:358)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:307)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:177)
Caused by: java.util.ConcurrentModificationException
        at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
        at java.util.AbstractList$Itr.next(AbstractList.java:343)
        at org.apache.hadoop.hive.ql.udf.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericUDTFExplode.process(GenericUDTFExplode.java:73)
        at org.apache.hadoop.hive.ql.exec.UDTFOperator.processOp(UDTFOperator.java:98)
        at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)
        at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
        at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)
        at org.apache.hadoop.hive.ql.exec.LateralViewForwardOperator.processOp(LateralViewForwardOperator.java:37)
        at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)
        at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:78)
        at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)
        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:527)
        ... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13145585" author="bejoyks" created="Mon, 7 Nov 2011 16:15:46 +0000"  >&lt;p&gt;The exception is happening when I&apos;m trying to use explode map as well&lt;/p&gt;

&lt;p&gt;DDL&lt;br/&gt;
CREATE EXTERNAL TABLE ver_data&lt;br/&gt;
(&lt;br/&gt;
  key STRING,&lt;br/&gt;
  id STRING,&lt;br/&gt;
  date_time STRING,&lt;br/&gt;
  model STRING,&lt;br/&gt;
  version STRING,&lt;br/&gt;
  sid STRING,&lt;br/&gt;
  message STRING,&lt;br/&gt;
  tags MAP&amp;lt;STRING,STRING&amp;gt;&lt;br/&gt;
);&lt;/p&gt;


&lt;p&gt;HQL Query &lt;br/&gt;
SELECT ver_data.&lt;b&gt;,t1.&lt;/b&gt; FROM ver_data LATERAL VIEW explode(tags) t1 AS param_name,param_value;&lt;/p&gt;

&lt;p&gt;This Query throws a concurrent modification exception on a LinkedHashMap while doing the join. If I modify the query and avoids the map column(&apos;tags&apos;) in the retrieval/join,then the query executes successfully.&lt;/p&gt;

&lt;p&gt;The below modified query executes successfully&lt;br/&gt;
SELECT ver_data.key, ver_data.id, ver_data.date_time, ver_data.model, ver_data.version, ver_data.sid, ver_data.message,&lt;br/&gt;
t1.* FROM ver_data LATERAL VIEW explode(tags) t1 AS param_name,param_value;&lt;/p&gt;

&lt;p&gt;Stack Trace When using Joins on maps with Lateral View&lt;br/&gt;
	2011-11-07 07:18:22,679 FATAL ExecMapper: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;key&quot;:&quot;0000&quot;,&quot;id&quot;:&quot;10001&quot;,...}
&lt;p&gt;	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:546)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:270)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:264)&lt;br/&gt;
Caused by: java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:392)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:391)&lt;/p&gt;
</comment>
                            <comment id="13145602" author="bejoyks" created="Mon, 7 Nov 2011 16:35:21 +0000"  >&lt;p&gt;The map issue on explode was seen on a latest build from hive trunk.&lt;br/&gt;
Maps were supported with LATERAL VIEW explode() with JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1735&quot; title=&quot;Extend Explode UDTF to handle Maps&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1735&quot;&gt;&lt;del&gt;HIVE-1735&lt;/del&gt;&lt;/a&gt; on 0.8 branch.&lt;/p&gt;</comment>
                            <comment id="13253561" author="kamilmroczek" created="Fri, 13 Apr 2012 17:30:18 +0000"  >&lt;p&gt;I am getting the same error.  It seems to work when the array has one element, but as soon as more than one is added this error appears.&lt;/p&gt;</comment>
                            <comment id="13254548" author="phabricator@reviews.facebook.net" created="Mon, 16 Apr 2012 07:16:17 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2540&quot; title=&quot;LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2540&quot;&gt;&lt;del&gt;HIVE-2540&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1095 LATERAL VIEW with EXPLODE produces ConcurrentModificationException&lt;/p&gt;

&lt;p&gt;  The following produces ConcurrentModificationException on the for loop inside EXPLODE:&lt;/p&gt;

&lt;p&gt;  create table foo as select array(1, 2) a from src limit 1;&lt;br/&gt;
  select a, x.b from foo lateral view explode(a) x as b;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2805&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2805&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/LazyHBaseCellMap.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_explode.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udtf_explode.q&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_explode.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udtf_explode.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyArray.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyMap.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6393/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6393/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13260420" author="phabricator@reviews.facebook.net" created="Tue, 24 Apr 2012 10:35:32 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2540&quot; title=&quot;LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2540&quot;&gt;&lt;del&gt;HIVE-2540&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Fixed test fails&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2805&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2805&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/LazyHBaseCellMap.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_explode.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udtf_explode.q&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_explode.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udtf_explode.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyArray.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyMap.java&lt;/p&gt;</comment>
                            <comment id="13262304" author="navis" created="Thu, 26 Apr 2012 01:19:13 +0000"  >&lt;p&gt;passed all tests&lt;/p&gt;</comment>
                            <comment id="13262305" author="phabricator@reviews.facebook.net" created="Thu, 26 Apr 2012 01:19:14 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2540&quot; title=&quot;LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2540&quot;&gt;&lt;del&gt;HIVE-2540&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  1. Removed dummy column in LazyHBaseCellMap (mistake)&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2805&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2805&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_explode.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udtf_explode.q&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_explode.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udtf_explode.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyArray.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyMap.java&lt;/p&gt;</comment>
                            <comment id="13281423" author="namit" created="Wed, 23 May 2012 06:30:57 +0000"  >&lt;p&gt;The test that you added is failing.&lt;/p&gt;</comment>
                            <comment id="13281543" author="navis" created="Wed, 23 May 2012 11:59:33 +0000"  >&lt;p&gt;It passes in my environment. I&apos;ll test again after rebasing on trunk.&lt;/p&gt;</comment>
                            <comment id="13284095" author="navis" created="Sun, 27 May 2012 00:32:47 +0000"  >&lt;p&gt;@Namit Jain&lt;br/&gt;
I cannot find any failure with this patch. Could this be caused by the difference of environment?&lt;/p&gt;</comment>
                            <comment id="13284106" author="namit" created="Sun, 27 May 2012 05:29:08 +0000"  >&lt;p&gt;I will try again.&lt;/p&gt;</comment>
                            <comment id="13284147" author="namit" created="Sun, 27 May 2012 12:08:25 +0000"  >&lt;p&gt;Committed. Thanks Navis&lt;/p&gt;</comment>
                            <comment id="13284255" author="hudson" created="Mon, 28 May 2012 00:18:06 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1453 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1453/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1453/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2540&quot; title=&quot;LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2540&quot;&gt;&lt;del&gt;HIVE-2540&lt;/del&gt;&lt;/a&gt; LATERAL VIEW with EXPLODE produces ConcurrentModificationException&lt;br/&gt;
(Navis via namit) (Revision 1343036)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1343036&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1343036&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_explode.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udtf_explode.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_explode.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udtf_explode.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyArray.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyMap.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13477971" author="hibou" created="Wed, 17 Oct 2012 15:49:28 +0000"  >&lt;p&gt;What is the actual fix version ?&lt;/p&gt;</comment>
                            <comment id="13478509" author="navis" created="Wed, 17 Oct 2012 23:57:20 +0000"  >&lt;p&gt;It&apos;s not on hive-0.9.x. Would be included hive-0.10.0 maybe? &lt;/p&gt;</comment>
                            <comment id="13547856" author="hudson" created="Wed, 9 Jan 2013 10:23:20 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2540&quot; title=&quot;LATERAL VIEW with EXPLODE produces ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2540&quot;&gt;&lt;del&gt;HIVE-2540&lt;/del&gt;&lt;/a&gt; LATERAL VIEW with EXPLODE produces ConcurrentModificationException&lt;br/&gt;
(Navis via namit) (Revision 1343036)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1343036&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1343036&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_explode.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udtf_explode.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_explode.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udtf_explode.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyArray.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyMap.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550173" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:40 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="13976820" author="lars_francke" created="Tue, 22 Apr 2014 14:26:27 +0000"  >&lt;p&gt;We&apos;re still seeing this issue with Hive 0.12 (slightly patched as it&apos;s the one from CDH5):&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2014-04-22 16:18:50,304 WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; org.apache.hadoop.mapred.YarnChild: Exception running child : java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {&amp;quot;product_id&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;	at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.map(ExecMapper.java:175)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:54)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:430)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:342)&lt;br/&gt;
	at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:168)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1548)&lt;br/&gt;
	at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:163)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {&amp;quot;product_id&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:529)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.map(ExecMapper.java:157)&lt;br/&gt;
	... 8 more&lt;br/&gt;
Caused by: java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:859)&lt;br/&gt;
	at java.util.ArrayList$Itr.next(ArrayList.java:831)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.udf.generic.GenericUDTFExplode.process(GenericUDTFExplode.java:92)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.UDTFOperator.processOp(UDTFOperator.java:113)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:504)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:844)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:87)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:504)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:844)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.LateralViewForwardOperator.processOp(LateralViewForwardOperator.java:37)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:504)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:844)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:91)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:504)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:844)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:519)&lt;br/&gt;
	... 9 more&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I haven&apos;t had time to check whether this patch is actually included but I&apos;d expect it to be. Shall I open a new issue?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="12785642">HIVE-10089</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12550318">HIVE-2939</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12522742" name="ASF.LICENSE.NOT.GRANTED--HIVE-2540.D2805.1.patch" size="15901" author="phabricator@reviews.facebook.net" created="Mon, 16 Apr 2012 07:16:18 +0000"/>
                            <attachment id="12523953" name="ASF.LICENSE.NOT.GRANTED--HIVE-2540.D2805.2.patch" size="14971" author="phabricator@reviews.facebook.net" created="Tue, 24 Apr 2012 10:35:34 +0000"/>
                            <attachment id="12524374" name="ASF.LICENSE.NOT.GRANTED--HIVE-2540.D2805.3.patch" size="14428" author="phabricator@reviews.facebook.net" created="Thu, 26 Apr 2012 01:19:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Nov 2011 16:15:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215562</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2541] Improve UDAF support for constant OI and better initialization</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2541</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, GenericUDAFs have only basic support for constant OIs - you can have constant OI as input, and check it in getEvaluator and in init() for mode where input is not partial, and that is all.&lt;br/&gt;
For it to be fully useful, it would be great to have (not sure if this is best as 3 separate tickets, or one):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if output of terminate and terminatePartial is constantOI (or partially constant OI, ie struct with some constant and some non-constant fields), input of merge and next function should receive it as constant OI.&lt;/li&gt;
	&lt;li&gt;add initUDAFArguments(GenericUDAFParameterInfo info) to GenericUDAFEvaluator, that will be always called before init(Mode m, ObjectInspector[] argOIs). That would allow you to access constant OI information in all modes (currently in PARTIAL2 and FINAL modes it is not possible). GenericUDAFEvaluator should have default empty implementation, so that only classes that need that info can access it.&lt;/li&gt;
	&lt;li&gt;currently, when GenericUDAFEvaluator is returned by getEvaluator, all initialization done there (in constructor or elsewhere), is removed by serializing/deserializing it. (ie new instance of evaluator created by calling no args constructor is used). It would be great if fields would not be lost. This can be either achieved by fixing serialization/deserialization to save all fields as well (if that is possible by XMLEncoder), or by serializing/deserializing AbstractGenericUDAFResolver instead of Evaluator, and then calling getEvaluator whenever Evaluator is needed.&lt;/li&gt;
&lt;/ul&gt;


</description>
                <environment></environment>
        <key id="12529756">HIVE-2541</key>
            <summary>Improve UDAF support for constant OI and better initialization</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="ikabiljo">Igor Kabiljo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2011 21:33:42 +0000</created>
                <updated>Tue, 1 Nov 2011 22:01:14 +0000</updated>
                                                                            <component>UDF</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48522</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>udf udaf constantOI</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2542] DROP DATABASE CASCADE does not drop non-native tables. </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2542</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The hive meta store client does not delete the non-native tables during the drop database &amp;lt;dbname&amp;gt; cascade operation. As a result even though the database is deleted the tables still exist. This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-144&quot; title=&quot;DROP DATABASE CASCADE doesn&amp;#39;t drop HBase tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-144&quot;&gt;HCATALOG-144&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;A deeper look at the HiveMetaStoreClient&apos;s &quot;dropDatabase&quot; function, tells us that the function does not utilize the hive meta hooks of the tables in the database for dropping the non-native tables. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12529778">HIVE-2542</key>
            <summary>DROP DATABASE CASCADE does not drop non-native tables. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="avandana">Vandana Ayyalasomayajula</assignee>
                                    <reporter username="avandana">Vandana Ayyalasomayajula</reporter>
                        <labels>
                            <label>handler</label>
                            <label>hive</label>
                            <label>metastore</label>
                            <label>storage</label>
                    </labels>
                <created>Tue, 1 Nov 2011 23:49:49 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:48 +0000</updated>
                            <resolved>Fri, 18 May 2012 15:34:02 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13153202" author="ashutoshc" created="Fri, 18 Nov 2011 22:55:56 +0000"  >&lt;p&gt;Correct way to do this is to improve HiveMetaHook interface. We need to add all the methods corresponding to database in the interface, like preCreateDatabase, preDropDatabase etc. and call them before doing the operations from the client. The way its done in dropTable()/createTable() of the metastoreclient.&lt;/p&gt;</comment>
                            <comment id="13173414" author="ashutoshc" created="Tue, 20 Dec 2011 18:55:04 +0000"  >&lt;p&gt;@Vandana,&lt;br/&gt;
Are you pursuing this any further ?&lt;/p&gt;</comment>
                            <comment id="13173616" author="avandana" created="Tue, 20 Dec 2011 23:31:57 +0000"  >&lt;p&gt;Hey Ashutosh, I have been busy with some other project priorities. I will start working on this in the beginning of next year.  &lt;/p&gt;</comment>
                            <comment id="13190195" author="ashutoshc" created="Fri, 20 Jan 2012 23:25:59 +0000"  >&lt;p&gt;On the second thought, HiveMetaHook is defined per table and not on per db basis. So in dropDatabase() there is no hook to get. Different tables in a db will have different hooks. Approach you have make sense in current design. Can you create a phabricator review request for your patch. I will take a look.&lt;/p&gt;</comment>
                            <comment id="13190202" author="avandana" created="Fri, 20 Jan 2012 23:53:40 +0000"  >&lt;p&gt;I have created a phabricator review request for the patch. &lt;/p&gt;</comment>
                            <comment id="13190234" author="cwsteinbach" created="Sat, 21 Jan 2012 01:02:24 +0000"  >&lt;p&gt;@Vandana: Do you have a link for the review request? Phabricator is supposed to automatically update the JIRA ticket. Did you forget to specify the JIRA ID when you ran arc?&lt;/p&gt;</comment>
                            <comment id="13190245" author="avandana" created="Sat, 21 Jan 2012 01:12:00 +0000"  >&lt;p&gt;Hey Carl, here is the link to the request: &lt;a href=&quot;https://reviews.facebook.net/D1347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1347&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13278447" author="avandana" created="Fri, 18 May 2012 00:28:38 +0000"  >&lt;p&gt;Hey Ashutosh, &lt;br/&gt;
The arc diff does not seem to pick the moves correctly, so in addition to the above patch, you will have to execute the following commands while committing.&lt;/p&gt;

&lt;p&gt;mkdir hbase-handler/src/test/queries/positive&lt;br/&gt;
svn add hbase-handler/src/test/queries/positive&lt;br/&gt;
svn mv hbase-handler/src/test/queries/*.q hbase-handler/src/test/queries/positive/&lt;br/&gt;
svn mv hbase-handler/src/test/queries/*.m hbase-handler/src/test/queries/positive/&lt;br/&gt;
mkdir hbase-handler/src/test/results/positive&lt;br/&gt;
svn add hbase-handler/src/test/results/positive&lt;br/&gt;
svn mv hbase-handler/src/test/results/*.q.out hbase-handler/src/test/results/positive&lt;br/&gt;
svn mv hbase-handler/src/test/results/*.m.out hbase-handler/src/test/results/positive&lt;/p&gt;


&lt;p&gt;ant test -Dtestcase=TestHBaseNegativeCliDriver&lt;br/&gt;
ant test -Dtestcase=TestHBaseCliDriver&lt;/p&gt;

&lt;p&gt;commands run successfully. &lt;/p&gt;</comment>
                            <comment id="13278541" author="ashutoshc" created="Fri, 18 May 2012 02:55:56 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13278870" author="ashutoshc" created="Fri, 18 May 2012 15:34:02 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Vandana !&lt;/p&gt;</comment>
                            <comment id="13278922" author="hudson" created="Fri, 18 May 2012 16:23:49 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1437 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1437/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1437/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2542&quot; title=&quot;DROP DATABASE CASCADE does not drop non-native tables. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2542&quot;&gt;&lt;del&gt;HIVE-2542&lt;/del&gt;&lt;/a&gt; : DROP DATABASE CASCADE does not drop non-native tables ( Vandana Ayyalasomayajula via Ashutosh Chauhan) (Revision 1340130)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340130&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/external_table_ppd.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_external_table_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_map_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_storage_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_bulk.m&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_joins.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_ppd_key_range.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_pushdown.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_stats.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_stats2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/external_table_ppd.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_external_table_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_map_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_storage_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_bulk.m&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_joins.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_ppd_key_range.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_pushdown.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/ppd_key_ranges.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/ppd_key_ranges.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/external_table_ppd.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_external_table_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_map_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_storage_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_bulk.m.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_joins.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_ppd_key_range.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_pushdown.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_stats.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_stats2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/external_table_ppd.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_external_table_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_map_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_storage_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_bulk.m.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_joins.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_ppd_key_range.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_pushdown.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_stats.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_stats2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/ppd_key_ranges.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/ppd_key_ranges.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13279256" author="hudson" created="Fri, 18 May 2012 22:16:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1438 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1438/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1438/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2542&quot; title=&quot;DROP DATABASE CASCADE does not drop non-native tables. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2542&quot;&gt;&lt;del&gt;HIVE-2542&lt;/del&gt;&lt;/a&gt; : Forgot to do svn add for new  files in previous patch. (Revision 1340158)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340158&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340158&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/negative&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/negative/cascade_dbdrop.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/negative&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/negative/cascade_dbdrop.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/templates/TestHBaseNegativeCliDriver.vm&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547859" author="hudson" created="Wed, 9 Jan 2013 10:23:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2542&quot; title=&quot;DROP DATABASE CASCADE does not drop non-native tables. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2542&quot;&gt;&lt;del&gt;HIVE-2542&lt;/del&gt;&lt;/a&gt; : Forgot to do svn add for new  files in previous patch. (Revision 1340158)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2542&quot; title=&quot;DROP DATABASE CASCADE does not drop non-native tables. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2542&quot;&gt;&lt;del&gt;HIVE-2542&lt;/del&gt;&lt;/a&gt; : DROP DATABASE CASCADE does not drop non-native tables ( Vandana Ayyalasomayajula via Ashutosh Chauhan) (Revision 1340130)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340158&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340158&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/negative&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/negative/cascade_dbdrop.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/negative&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/negative/cascade_dbdrop.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/templates/TestHBaseNegativeCliDriver.vm&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1340130&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/external_table_ppd.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_external_table_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_map_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_binary_storage_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_bulk.m&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_joins.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_ppd_key_range.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_pushdown.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_stats.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_stats2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/external_table_ppd.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_external_table_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_map_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_storage_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_bulk.m&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_joins.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_ppd_key_range.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_pushdown.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_queries.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/ppd_key_ranges.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/ppd_key_ranges.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/external_table_ppd.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_external_table_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_map_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_binary_storage_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_bulk.m.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_joins.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_ppd_key_range.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_pushdown.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_stats.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_stats2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/external_table_ppd.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_external_table_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_map_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_storage_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_bulk.m.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_joins.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_ppd_key_range.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_pushdown.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_queries.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_stats.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_stats2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/ppd_key_ranges.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/ppd_key_ranges.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550211" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:48 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12611241">HIVE-3563</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513182" name="HIVE-2542.04.patch" size="145652" author="avandana" created="Fri, 3 Feb 2012 21:45:47 +0000"/>
                            <attachment id="12513203" name="HIVE-2542.05.patch" size="144160" author="avandana" created="Fri, 3 Feb 2012 23:21:58 +0000"/>
                            <attachment id="12513217" name="HIVE-2542.06.patch" size="144097" author="avandana" created="Sat, 4 Feb 2012 00:51:20 +0000"/>
                            <attachment id="12513211" name="HIVE-2542.06.patch" size="144097" author="avandana" created="Sat, 4 Feb 2012 00:23:00 +0000"/>
                            <attachment id="12527960" name="HIVE-2542.07.patch" size="8823" author="avandana" created="Fri, 18 May 2012 00:20:19 +0000"/>
                            <attachment id="12513094" name="Hive-2542.03.patch" size="7382" author="avandana" created="Fri, 3 Feb 2012 02:01:55 +0000"/>
                            <attachment id="12504104" name="Hive-2542.patch" size="11138" author="avandana" created="Thu, 17 Nov 2011 19:30:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Nov 2011 22:55:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
