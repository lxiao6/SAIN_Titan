<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:15:13 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2010-2-2+AND+created+%3C%3D+2010-2-9+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="22" total="22"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-1121] CombinedHiveInputFormat for hadoop 19</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1121</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Creating the jira from the mail from  Roberto Congiu &lt;span class=&quot;error&quot;&gt;&amp;#91;roberto.congiu@openx.org&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12454999">HIVE-1121</key>
            <summary>CombinedHiveInputFormat for hadoop 19</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2010 01:18:08 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:32 +0000</updated>
                            <resolved>Tue, 2 Feb 2010 06:47:10 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12828501" author="namit" created="Tue, 2 Feb 2010 06:47:10 +0000"  >&lt;p&gt;Committed. Thanks Roberto.&lt;/p&gt;</comment>
                            <comment id="12892422" author="nzhang" created="Mon, 26 Jul 2010 19:23:52 +0000"  >&lt;p&gt;This patch does not work if the input files belongs to different partitions. We should not create a split cross partitions. This will introduce grouping errors (see the unit test combine2.q). &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12434476" name="hive-multifile.patch" size="12043" author="namit" created="Tue, 2 Feb 2010 01:18:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 26 Jul 2010 19:23:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73089</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1122] Make ql/metadata/Table and Partition serializable</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1122</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Both Table and Partition are just wrappers of the thrift class TTable and TPartition.&lt;/p&gt;

&lt;p&gt;However, Table and Partition are not serializable, and there are no guarantee in the code to make sure Table is in sync with the field of TTable.&lt;/p&gt;

&lt;p&gt;We should make Table and Partition serializable by only serializing the TTable and TPartition fields, and we should hide the TTable details inside the Table class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455005">HIVE-1122</key>
            <summary>Make ql/metadata/Table and Partition serializable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2010 03:07:41 +0000</created>
                <updated>Mon, 20 Jul 2015 10:16:58 +0000</updated>
                            <resolved>Thu, 11 Feb 2010 02:35:35 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12829996" author="zshao" created="Fri, 5 Feb 2010 08:18:24 +0000"  >&lt;p&gt;Some preview.&lt;/p&gt;</comment>
                            <comment id="12831360" author="zshao" created="Tue, 9 Feb 2010 08:36:19 +0000"  >&lt;p&gt;This patch refactored Table.java and Partition.java to make sure these 2 classes captures all ql operations on the metastore, instead of exposing thrift Table and Partition classes directly to ql.&lt;/p&gt;</comment>
                            <comment id="12831700" author="zshao" created="Tue, 9 Feb 2010 22:11:05 +0000"  >&lt;p&gt;Fixed a test error.&lt;/p&gt;</comment>
                            <comment id="12832347" author="pauly" created="Thu, 11 Feb 2010 01:27:32 +0000"  >&lt;p&gt;Looks good +1&lt;/p&gt;</comment>
                            <comment id="12832349" author="he yongqiang" created="Thu, 11 Feb 2010 01:32:45 +0000"  >&lt;p&gt;Will test and commit&lt;/p&gt;</comment>
                            <comment id="12832365" author="he yongqiang" created="Thu, 11 Feb 2010 02:35:35 +0000"  >&lt;p&gt;Committed. Thanks Zheng!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12446964">HIVE-1117</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12845502">HIVE-11278</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12435268" name="HIVE-1122.4.patch" size="524057" author="zshao" created="Tue, 9 Feb 2010 08:36:19 +0000"/>
                            <attachment id="12435355" name="HIVE-1122.5.patch" size="525006" author="zshao" created="Tue, 9 Feb 2010 22:11:05 +0000"/>
                            <attachment id="12434939" name="HIVE-1122.pre.1.patch" size="18652" author="zshao" created="Fri, 5 Feb 2010 08:18:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Feb 2010 01:27:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122839</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1123] Checkstyle fixes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1123</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Fix checkstyle errors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455013">HIVE-1123</key>
            <summary>Checkstyle fixes</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2010 04:54:00 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:29 +0000</updated>
                            <resolved>Tue, 9 Feb 2010 07:56:25 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12828930" author="cwsteinbach" created="Wed, 3 Feb 2010 03:33:26 +0000"  >&lt;p&gt;Reduces the total number of Checkstyle errors by 50%,  from 4361 to 2137.&lt;/p&gt;</comment>
                            <comment id="12828931" author="zshao" created="Wed, 3 Feb 2010 03:40:02 +0000"  >&lt;p&gt;It seems the maximum line length is 100 or something?&lt;br/&gt;
Is Hadoop common using 80? Why don&apos;t we make it 80?&lt;/p&gt;</comment>
                            <comment id="12828937" author="zshao" created="Wed, 3 Feb 2010 04:11:28 +0000"  >&lt;p&gt;Please ignore my question... I asked the same question on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-990&quot; title=&quot;Incorporate CheckStyle into Hive&amp;#39;s build.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-990&quot;&gt;&lt;del&gt;HIVE-990&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12828939" author="zshao" created="Wed, 3 Feb 2010 04:21:52 +0000"  >&lt;p&gt;It seems you made 2 spaces instead of 4 for the &quot;throws Exception&quot; line in the following example. Is that recommended by the standard?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void myMethod(...)
    &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Expection {
  doSomeThing();
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12828944" author="cwsteinbach" created="Wed, 3 Feb 2010 04:58:33 +0000"  >&lt;ul&gt;
	&lt;li&gt;The Sun coding standard does not specify how to indent &quot;throws&quot; clauses, and the sun_checks.xml configuration that Checkstyle defaults to does not invoke the Indentation module.&lt;/li&gt;
	&lt;li&gt;I copied the indentation settings from the Hadoop Checkstyle configuration:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;module name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Indentation&quot;&lt;/span&gt;&amp;gt;
      &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;basicOffset&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt; /&amp;gt;
      &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;caseIndent&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; /&amp;gt; 
&amp;lt;/module&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;The configuration options for the Checkstyle Indentation module are described here: &lt;a href=&quot;http://checkstyle.sourceforge.net/config_misc.html#Indentation&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://checkstyle.sourceforge.net/config_misc.html#Indentation&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Note that Checkstyle only gives you one setting, i.e. &quot;basicOffset&quot;, so there is no way of saying &quot;indent by 2, unless it&apos;s a throws clause, in which case indent by 4 spaces&quot;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I personally prefer indenting throws clauses by 4 spaces in order to make them stand out,&lt;br/&gt;
but unfortunately Checkstyle does not make it possible to enforce this and 2 space basic&lt;br/&gt;
indentation at the same time. However, I&apos;m willing to compromise since I think the tool is&lt;br/&gt;
beneficial over all, and it&apos;s important to get the total number of violations down to a low number&lt;br/&gt;
so that people will pay attention to it.&lt;/p&gt;

</comment>
                            <comment id="12828960" author="zshao" created="Wed, 3 Feb 2010 05:45:50 +0000"  >&lt;p&gt;Ok. As long as we have an additional empty line after the &quot;throws&quot; in such cases, I think it&apos;s OK.&lt;/p&gt;

&lt;p&gt;I also see cases like this. Does this violate the checkstyle indentation rule? How do we know we should have 4 spaces here?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void myMethod(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; a,
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; b) {
  doSomeThing();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12828969" author="zshao" created="Wed, 3 Feb 2010 06:03:50 +0000"  >&lt;p&gt;Another question. Is it recommended NOT to have the curly braces for a case statement?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (type) {
-      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BYTE: {
+      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BYTE: 
         tbIn.readByte((ByteWritable) w);
         &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
-      }
-      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BOOL: {
+      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BOOL: 
         tbIn.readBoolean((BooleanWritable) w);
         &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
-      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12828976" author="zshao" created="Wed, 3 Feb 2010 06:19:21 +0000"  >&lt;p&gt;Hi Carl, if you want us to commit the changes asap, can you exclude these 2 changes for now? I mean the indentation problem and the case curly braces problem.&lt;/p&gt;

&lt;p&gt;All other changes (spaces between tokens, javadoc, keywords, etc) seem good to me.&lt;/p&gt;

&lt;p&gt;It will also be great if you can add the list of style changes you made into a file &quot;checkstyle.txt&quot; or something so that we can publicize the common code convention problems to all the developers and committers.&lt;/p&gt;</comment>
                            <comment id="12829371" author="cwsteinbach" created="Thu, 4 Feb 2010 01:27:45 +0000"  >&lt;p&gt;I reverted the indentation changes and modified the Checkstyle configuration in order&lt;br/&gt;
to disable indentation checks. I did not revert the switch statement changes since I don&apos;t&lt;br/&gt;
have an automatic way of doing this nor a canonical list of where I made those changes.&lt;br/&gt;
I also maintain that switch statement braces should be avoided unless you really need&lt;br/&gt;
to define a new scope, in which case you probably shouldn&apos;t be using a switch statement&lt;br/&gt;
in the first place.&lt;/p&gt;

&lt;p&gt;Zheng, please take a look. Thanks.&lt;/p&gt;</comment>
                            <comment id="12829374" author="zshao" created="Thu, 4 Feb 2010 01:34:17 +0000"  >&lt;p&gt;Hi Carl, is it true that without the new scopes in the switch clause, variables name in the different &quot;case&quot; cannot overlap?&lt;/p&gt;

&lt;p&gt;For example, the following &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;(n) {
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; 0:
  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 3;
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; 1:
  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 2;
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(i);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What do you think we should do in this case?&lt;/p&gt;</comment>
                            <comment id="12829379" author="cwsteinbach" created="Thu, 4 Feb 2010 01:42:08 +0000"  >&lt;p&gt;I favor doing this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i;
&lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;(n) {
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; 0:
  i = 3;
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; 1:
  i = 2;
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(i);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe that I have only removed braces in those cases where&lt;br/&gt;
the local scope is not necessary. There are a variety of places in&lt;br/&gt;
the code where the local scope &lt;b&gt;is&lt;/b&gt; required, or where the switch&lt;br/&gt;
statements are nested. In these cases I have not removed the braces.&lt;/p&gt;</comment>
                            <comment id="12829390" author="zshao" created="Thu, 4 Feb 2010 02:07:04 +0000"  >&lt;p&gt;For these changes, shall we do it by the &lt;b&gt;type&lt;/b&gt; of the change instead of the packages?&lt;br/&gt;
The reason is that some of the changes we might want to discuss more with more people involved, but the others are good to go.&lt;/p&gt;

&lt;p&gt;Here is the short list of what I see from the patch. I think most people will agree to these items.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Line length:
  Limit is 100

Spacing:
  Spaces between &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; and operands except i++
  Spaces between &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; and (, &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; and (, &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; and (
  No spaces between ( and the first operand, or the last operand and )
  Same &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; {}
  
Curly braces:
  Required even &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; single-line &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {

Javadoc Comments:
  Required &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; members (classes, methods) but not getter/setter.
  The first line of each javadoc is the &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; description. Should end with &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;
  Each line of javadoc should start with capital letters.

Keyword order:
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt;
  Declare the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;as &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not intended to be inherited.

Code:
   Default &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; constructor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Utility classes.
  &lt;span class=&quot;code-quote&quot;&gt;&quot;Type[] &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;&quot;&lt;/span&gt; instead of &lt;span class=&quot;code-quote&quot;&gt;&quot;Type &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;[]&quot;&lt;/span&gt;

Capitalization:
  Constant should be all capitalized
  Classes should be first-letter capitalized
  Variable names should be first-letter lowercased, with the first letter of each additional word capitalized.
  Don&apos;t use _ in variable names.

Imports:
  Ordered alphabetically
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It seems you also removed the spaces for empty lines, but somehow my eclipse automatically generates those spaces for empty lines.&lt;/p&gt;

&lt;p&gt;By the way, did you do it by hand or you auto-generated the changes? If it&apos;s automatic, shall we do it one rule by one rule instead of one package by one package?&lt;/p&gt;
</comment>
                            <comment id="12829404" author="cwsteinbach" created="Thu, 4 Feb 2010 02:40:50 +0000"  >&lt;p&gt;Things that I did automatically using the Eclipse formatter:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Line length:
  Limit is 100

Spacing:
  Spaces between operator and operands except i++
  Spaces between if and (, for and (, while and (
  No spaces between ( and the first operand, or the last operand and )
  Same for {}
  
Curly braces:
  Required even for single-line if
  } else {

Code:
  &quot;Type[] var&quot; instead of &quot;Type var[]&quot;

Imports:
  Ordered alphabetically
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Things I did mainly by hand:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Javadoc Comments:
  Required for all public members (classes, methods) but not getter/setter.
  The first line of each javadoc is the short description. Should end with &quot;.&quot;
  Each line of javadoc should start with capital letters.

Keyword order:
  public static final
  Declare the class as final if not intended to be inherited.

Code:
   Default private constructor for Utility classes.

Capitalization:
  Constant should be all capitalized
  Classes should be first-letter capitalized
  Variable names should be first-letter lowercased, with the first letter of each additional word capitalized.
  Don&apos;t use _ in variable names.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;If it&apos;s automatic, shall we do it one rule by one rule instead of one package by one package?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;A good idea, but many of the changes I made were not automatic, and starting over would require&lt;br/&gt;
me to throw away this work. I don&apos;t think I have the patience to redo it, at least not right now.&lt;/p&gt;

&lt;p&gt;What are the sticking points preventing you from committing the current version of the patch? Anything&lt;br/&gt;
besides the switch brace issue?&lt;/p&gt;</comment>
                            <comment id="12829409" author="zshao" created="Thu, 4 Feb 2010 03:02:26 +0000"  >&lt;p&gt;The sticking point is that the patch is too big, and there is not a short list of rules for your changes.&lt;/p&gt;

&lt;p&gt;I agree conforming to checkstyle in general is a good thing to do but there might be small rules here and there that we might not want to follow. Examples include the indentation rule (which you also mentioned personally you like the 4-space approach). There might be more but it&apos;s hard for me to catch them all.&lt;/p&gt;

&lt;p&gt;If you can give me a full list of the rules of the changes you made, it will also speed up the review/commits.&lt;/p&gt;

&lt;p&gt;I would ask other guys on the team to take a look at these patches. If we can get a consensus we will commit them soon.&lt;/p&gt;


&lt;p&gt;In the future, it would also be great if you can make these patches one by one to save the effort of (potentially) redoing some of them because of conflicts.&lt;br/&gt;
Once we agree on the rules of the changes, it should be very fast to review/commit the other patches.&lt;/p&gt;

&lt;p&gt;Does that sound good?&lt;/p&gt;</comment>
                            <comment id="12829816" author="athusoo" created="Thu, 4 Feb 2010 22:08:52 +0000"  >&lt;p&gt;Apart from the indentation of throws clause is there any other major sticking point. Personally speaking I don&apos;t have a strong preference for the indentation of throws. Going with 2 indents probably makes it easier for eclipse to catch this. @Carl I do think that there is value in publishing the entire set of rules that you have used.&lt;/p&gt;</comment>
                            <comment id="12829829" author="cwsteinbach" created="Thu, 4 Feb 2010 22:41:08 +0000"  >
&lt;p&gt;The following checks are common to the Hive checkstyle configuration and the default Sun checks configuration:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_misc.html#ArrayTypeStyle&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ArrayTypeStyle&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#AvoidNestedBlocks&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;AvoidNestedBlocks&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_imports.html#AvoidStarImport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;AvoidStarImport&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#ConstantName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ConstantName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#EmptyBlock&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EmptyBlock&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#EmptyForIteratorPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EmptyForIteratorPad&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#EmptyStatement&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EmptyStatement&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#EqualsHashCode&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EqualsHashCode&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_sizes.html#FileLength&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FileLength&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#FileTabCharacter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FileTabCharacter&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_design.html#FinalClass&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FinalClass&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#HiddenField&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HiddenField&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_design.html#HideUtilityClassConstructor&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HideUtilityClassConstructor&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#InnerAssignment&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;InnerAssignment&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_javadoc.html#JavadocPackage&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JavadocPackage&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_javadoc.html#JavadocStyle&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JavadocStyle&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_javadoc.html#JavadocType&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JavadocType&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;Only required for public types. Allow missing parameter tags.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#LeftCurly&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LeftCurly&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_sizes.html#LineLength&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LineLength&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;Increased to 100 characters.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#LocalFinalVariableName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LocalFinalVariableName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#LocalVariableName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LocalVariableName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#MemberName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MemberName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_sizes.html#MethodLength&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MethodLength&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#MethodName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MethodName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#MethodParamPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MethodParamPad&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#MissingSwitchDefault&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MissingSwitchDefault&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_modifier.html#ModifierOrder&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ModifierOrder&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#NeedBraces&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NeedBraces&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_misc.html#NewlineAtEndOfFile&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NewlineAtEndOfFile&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#NoWhitespaceAfter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NoWhitespaceAfter&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#NoWhitespaceBefore&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NoWhitespaceBefore&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#PackageName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PackageName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#ParameterName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParameterName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_sizes.html#ParameterNumber&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParameterNumber&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#ParenPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParenPad&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_modifier.html#RedundantModifier&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RedundantModifer&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#RedundantThrows&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RedundantThrows&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#RightCurly&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RightCurly&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#SimplifyBooleanExpression&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SimplifyBooleanExpression&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#SimplifyBooleanReturn&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SimplifyBooleanReturn&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#StaticVariableName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;StaticVariableName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_misc.html#TodoComment&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TodoComment&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#TypeName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TypeName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#TypecastParenPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TypecastParenPad&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_imports.html#UnusedImports&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;UnusedImports&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_design.html#VisibilityModifier&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;VisbilityModifier&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#WhitespaceAfter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;WhitespaceAfter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The following checks are present in the default Sun configuration but were removed from the configuration that Hadoop uses (which I used as a starting point for the Hive configuration):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#AvoidInlineConditionals&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;AvoidInlineConditionals&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_design.html#DesignForExtension&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DesignForExtension&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_misc.html#FinalParameters&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FinalParameters&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#GenericWhitespace&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;GenericWhitespace&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_javadoc.html#JavadocMethod&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JavadocMethod&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_javadoc.html#JavadocVariable&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JavadocVariable&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#MagicNumber&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MagicNumber&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#OperatorWrap&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;OperatorWrap&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#WhitespaceAround&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;WhitespaceAround&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I added the following checks to the Hive configuration:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#EqualsAvoidNull&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EqualsAvoidNull&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_header.html#Header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Header&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;Checks for ASF license header.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_annotation.html#MissingOverride&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MissingOverride&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#StringLiteralEquality&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;StringLiteralEquality&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="12829831" author="cwsteinbach" created="Thu, 4 Feb 2010 22:45:16 +0000"  >
&lt;p&gt;Here is a summary of the changes I made.&lt;br/&gt;
For each Checkstyle error message I reference the list of Checkstyle modules that&lt;br/&gt;
that signal that error, along with the original error count and error count after applying the&lt;br/&gt;
patches.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Variable &apos;X&apos; must be private and have accessor methods.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_design.html#VisibilityModifier&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;VisbilityModifier&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;1260 -&amp;gt; 1128&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Name &apos;X&apos; must match pattern &apos;X&apos;.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#ConstantName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ConstantName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#LocalFinalVariableName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LocalFinalVariableName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#LocalVariableName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LocalVariableName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#MemberName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MemberName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#MethodName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MethodName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#PackageName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PackageName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#ParameterName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParameterName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#StaticVariableName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;StaticVariableName&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_naming.html#TypeName&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TypeName&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;569 -&amp;gt; 447&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;First sentence should end with a period.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_javadoc.html#JavadocStyle&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JavadocStyle&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;529 -&amp;gt; 5&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Missing a Javadoc comment.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_javadoc.html#JavadocType&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JavadocType&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;428 -&amp;gt; 15&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Line is longer than X characters.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_sizes.html#LineLength&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LineLength&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;310 -&amp;gt; 101&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&apos;X&apos; modifier out of order with the JLS suggestions.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_modifier.html#ModifierOrder&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ModifierOrder&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;288 -&amp;gt; 0&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Avoid nested blocks.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#AvoidNestedBlocks&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;AvoidNestedBlocks&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;281 -&amp;gt; 184&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&apos;X&apos; is followed by whitespace.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#EmptyForIteratorPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EmptyForIteratorPad&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#NoWhitespaceAfter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NoWhitespaceAfter&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#ParenPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParenPad&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#TypecastParenPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TypecastParenPad&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;190 -&amp;gt; 1&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Redundant &apos;X&apos; modifier.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_modifier.html#RedundantModifier&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RedundantModifer&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;172 -&amp;gt; 0&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;String literal expressions should be on the left side of an equals comparison.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#EqualsAvoidNull&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EqualsAvoidNull&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;97 -&amp;gt; 93&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Utility classes should not have a public or default constructor.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_design.html#HideUtilityClassConstructor&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HideUtilityClassConstructor&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;55 -&amp;gt; 4&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Unused import - X&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_imports.html#UnusedImports&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;UnusedImports&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;40 -&amp;gt; 5&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Array brackets at illegal position.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_misc.html#ArrayTypeStyle&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ArrayTypeStyle&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;38 -&amp;gt; 18&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Redundant throws: &apos;X&apos; is unchecked exception.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#RedundantThrows&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RedundantThrows&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;19 -&amp;gt; 0&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Inner assignments should be avoided.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#InnerAssignment&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;InnerAssignment&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;16 -&amp;gt; 14&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&apos;X&apos; construct must use &apos;{}&apos;s.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#NeedBraces&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NeedBraces&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;10 -&amp;gt; 1&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Empty statement.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#EmptyStatement&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EmptyStatement&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;10 -&amp;gt; 4&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&apos;X&apos; is not followed by whitespace.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#ParenPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParenPad&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#TypecastParenPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TypecastParenPad&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#WhitespaceAfter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;WhitespaceAfter&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;9 -&amp;gt; 0&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&apos;X&apos; should be on the same line.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_blocks.html#RightCurly&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RightCurly&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;8 -&amp;gt; 0&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&apos;X&apos; is preceded with whitespace.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#MethodParamPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MethodParamPad&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#NoWhitespaceBefore&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NoWhitespaceBefore&lt;/a&gt;, &lt;a href=&quot;http://checkstyle.sourceforge.net/config_whitespace.html#ParenPad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParenPad&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;4 -&amp;gt; 0&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Redundant throws: &apos;X&apos; is subclass of &apos;X&apos;.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_coding.html#RedundantThrows&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RedundantThrows&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;3 -&amp;gt; 1&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Class X should be declared as final.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://checkstyle.sourceforge.net/config_design.html#FinalClass&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FinalClass&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;1 -&amp;gt; 0&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12829924" author="zshao" created="Fri, 5 Feb 2010 02:40:31 +0000"  >&lt;p&gt;Thanks for the list Carl! This does help a lot!&lt;br/&gt;
I talked with a bunch of team members. We will wait till Friday noon for feedbacks and decide what to do with these patches then.&lt;/p&gt;

&lt;p&gt;By the way, Carl, is it easy to configure eclipse NOT to produce checkstyle-alarming code?&lt;br/&gt;
As far as I know, eclipse leaves spaces in blank lines.&lt;/p&gt;</comment>
                            <comment id="12830019" author="cwsteinbach" created="Fri, 5 Feb 2010 09:06:33 +0000"  >
&lt;blockquote&gt;&lt;p&gt;I talked with a bunch of team members. We will wait till Friday noon for feedbacks and decide what to do with these patches then.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds good!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;By the way, Carl, is it easy to configure eclipse NOT to produce checkstyle-alarming code? As far as I know, eclipse leaves spaces in blank lines.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You can configure Eclipse to automatically remove trailing whitespace on save by going to&lt;br/&gt;
Properties -&amp;gt; Java Editor -&amp;gt; Save Actions. I think it should be possible to to add this to&lt;br/&gt;
the project settings so that folks will have it automatically set when they import the&lt;br/&gt;
project into Eclipse. I will look into getting this setup, along with other formatting settings&lt;br/&gt;
that are compatible with the Checkstyle configuration.&lt;/p&gt;</comment>
                            <comment id="12830233" author="nzhang" created="Fri, 5 Feb 2010 19:02:53 +0000"  >&lt;p&gt;I think all these rules are good to make the coding style consistent, and making the code easier to understand by human once we are used to it. &lt;/p&gt;

&lt;p&gt;Sometimes I found our codebase is very &quot;dense&quot; and &quot;compact&quot; and it makes it&apos;s hard to understand at the first time. One particular case where I often find hard to understand is a long statement that can usually been broke up by several statements. One example is here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    Operator op = putOpInsertMap(OperatorFactory.getAndMakeChild(
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; groupByDesc(mode, outputColumnNames, groupByKeys, aggregations,
            &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RowSchema(groupByOutputRowResolver.getColumnInfos()),
        reduceSinkOperatorInfo), groupByOutputRowResolver);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I find it is easier to understand if we break it into several short statements with short comments. So when you browse the code, you can only skim the comments and understand what&apos;s going on.&lt;/p&gt;

&lt;p&gt;It may not be the case that it can be done by style checking, but just want to see what others&apos; opinions on this.&lt;/p&gt;

&lt;p&gt;Another more coding style kind of thing is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     groupByKeys.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; exprNodeColumnDesc(exprInfo.getType(), exprInfo
          .getInternalName(), exprInfo.getTabAlias(), exprInfo
          .getIsPartitionCol()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;vs.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     groupByKeys.add(
         &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; exprNodeColumnDesc(
             exprInfo.getType(), 
             exprInfo.getInternalName(), 
             exprInfo.getTabAlias(), 
             exprInfo.getIsPartitionCol()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Currently some code using the former style. I found it is easier to understand using the second. Is there any convention for this?&lt;/p&gt;</comment>
                            <comment id="12830269" author="jvs" created="Fri, 5 Feb 2010 20:13:22 +0000"  >&lt;p&gt;+1 on what Ning said.  I too prefer the second format for nested method calls.&lt;/p&gt;</comment>
                            <comment id="12830852" author="zshao" created="Mon, 8 Feb 2010 06:52:00 +0000"  >&lt;p&gt;I prefer the second format too. Ning, does checkstyle count it as an error or not?&lt;/p&gt;

&lt;p&gt;If there are no -1, I will commit these patches on Monday 2/8/2010 afternoon.&lt;/p&gt;</comment>
                            <comment id="12831340" author="zshao" created="Tue, 9 Feb 2010 07:56:23 +0000"  >&lt;p&gt;Committed. Thanks Carl!&lt;/p&gt;

&lt;p&gt;Please do the follow-ups including wiki page for code guidelines, eclipse setup as soon as possible so that our developers can follow the new standard that you helped set up.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12434765" name="HIVE-1123.checkstyle.patch" size="1327" author="cwsteinbach" created="Thu, 4 Feb 2010 01:22:53 +0000"/>
                            <attachment id="12434755" name="HIVE-1123.cli.2.patch" size="13069" author="cwsteinbach" created="Thu, 4 Feb 2010 01:20:10 +0000"/>
                            <attachment id="12434633" name="HIVE-1123.cli.patch" size="3524" author="cwsteinbach" created="Wed, 3 Feb 2010 03:26:33 +0000"/>
                            <attachment id="12434756" name="HIVE-1123.common.2.patch" size="14183" author="cwsteinbach" created="Thu, 4 Feb 2010 01:20:10 +0000"/>
                            <attachment id="12434634" name="HIVE-1123.common.patch" size="4568" author="cwsteinbach" created="Wed, 3 Feb 2010 03:26:33 +0000"/>
                            <attachment id="12434757" name="HIVE-1123.contrib.2.patch" size="27586" author="cwsteinbach" created="Thu, 4 Feb 2010 01:20:10 +0000"/>
                            <attachment id="12434635" name="HIVE-1123.contrib.patch" size="21704" author="cwsteinbach" created="Wed, 3 Feb 2010 03:26:33 +0000"/>
                            <attachment id="12434758" name="HIVE-1123.hwi.2.patch" size="10734" author="cwsteinbach" created="Thu, 4 Feb 2010 01:20:37 +0000"/>
                            <attachment id="12434636" name="HIVE-1123.hwi.patch" size="9714" author="cwsteinbach" created="Wed, 3 Feb 2010 03:27:01 +0000"/>
                            <attachment id="12434759" name="HIVE-1123.jdbc.2.patch" size="37305" author="cwsteinbach" created="Thu, 4 Feb 2010 01:20:37 +0000"/>
                            <attachment id="12434637" name="HIVE-1123.jdbc.patch" size="58275" author="cwsteinbach" created="Wed, 3 Feb 2010 03:27:01 +0000"/>
                            <attachment id="12434760" name="HIVE-1123.metastore.2.patch" size="53522" author="cwsteinbach" created="Thu, 4 Feb 2010 01:20:37 +0000"/>
                            <attachment id="12434638" name="HIVE-1123.metastore.patch" size="46506" author="cwsteinbach" created="Wed, 3 Feb 2010 03:27:01 +0000"/>
                            <attachment id="12434761" name="HIVE-1123.ql.2.patch" size="710164" author="cwsteinbach" created="Thu, 4 Feb 2010 01:21:23 +0000"/>
                            <attachment id="12434639" name="HIVE-1123.ql.patch" size="554892" author="cwsteinbach" created="Wed, 3 Feb 2010 03:27:38 +0000"/>
                            <attachment id="12434762" name="HIVE-1123.serde.2.patch" size="233556" author="cwsteinbach" created="Thu, 4 Feb 2010 01:21:23 +0000"/>
                            <attachment id="12434640" name="HIVE-1123.serde.patch" size="185830" author="cwsteinbach" created="Wed, 3 Feb 2010 03:27:38 +0000"/>
                            <attachment id="12434763" name="HIVE-1123.service.2.patch" size="4424" author="cwsteinbach" created="Thu, 4 Feb 2010 01:21:23 +0000"/>
                            <attachment id="12434641" name="HIVE-1123.service.patch" size="4424" author="cwsteinbach" created="Wed, 3 Feb 2010 03:27:38 +0000"/>
                            <attachment id="12434764" name="HIVE-1123.shims.2.patch" size="25306" author="cwsteinbach" created="Thu, 4 Feb 2010 01:21:39 +0000"/>
                            <attachment id="12434642" name="HIVE-1123.shims.patch" size="17605" author="cwsteinbach" created="Wed, 3 Feb 2010 03:27:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Feb 2010 03:40:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73087</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>checkstyle</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1124] CREATE VIEW should expand the query text consistently</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1124</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We should expand the omitted alias in the same way in &quot;select&quot; and in &quot;group by&quot;.&lt;/p&gt;

&lt;p&gt;Hive &quot;Group By&quot; recognize &quot;group by&quot; expressions by comparing the literal string.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; create view zshao_view as select d, count(1) as cnt from zshao_tt group by d;
OK
Time taken: 0.286 seconds
hive&amp;gt; select * from zshao_view;
FAILED: Error in semantic analysis: line 1:7 Expression Not In Group By Key d in definition of VIEW zshao_view [
select d, count(1) as `cnt` from `zshao_tt` group by `zshao_tt`.`d`
] used as zshao_view at line 1:14
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


</description>
                <environment></environment>
        <key id="12455022">HIVE-1124</key>
            <summary>CREATE VIEW should expand the query text consistently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2010 08:26:37 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:25 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 19:43:54 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12829312" author="jvs" created="Wed, 3 Feb 2010 23:03:18 +0000"  >&lt;p&gt;The problem turned out to be with the way we resolve common subexpressions for matching expressions in the SELECT list and GROUP BY.  As soon as we saw the match, we were skipping over the SELECT item subtree without performing any translations, leading to the inconsistency later on when the view was referenced.&lt;/p&gt;

&lt;p&gt;The fix in this patch is a bit involved, since I had to make the UnparseTranslator capable of copying the translations for the common subexpressions.&lt;/p&gt;

&lt;p&gt;I have not yet run through all tests yet, but the patch is available for review now.&lt;/p&gt;</comment>
                            <comment id="12829367" author="jvs" created="Thu, 4 Feb 2010 01:24:04 +0000"  >&lt;p&gt;Ran through all tests successfully.&lt;/p&gt;</comment>
                            <comment id="12829369" author="zshao" created="Thu, 4 Feb 2010 01:26:34 +0000"  >&lt;p&gt;Patch line 993:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-        ColumnInfo paraExprInfo = groupByInputRowResolver.get(&quot;&quot;, text);
+        ColumnInfo paraExprInfo = groupByInputRowResolver.get(&quot;&quot;, entry.getKey());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Shall we use getExpression?&lt;/p&gt;

&lt;p&gt;Otherwise it looks good.&lt;/p&gt;</comment>
                            <comment id="12829386" author="jvs" created="Thu, 4 Feb 2010 01:56:29 +0000"  >&lt;p&gt;Updated patch with Zheng&apos;s suggestion.  (I had left two calls to get(&quot;&quot;) unchanged because I wasn&apos;t sure how the key/value pairs in the aggregation map were being constucted, but it looks like the text and ASTNode are already 1-to-1 there.)&lt;/p&gt;</comment>
                            <comment id="12829395" author="zshao" created="Thu, 4 Feb 2010 02:23:00 +0000"  >&lt;p&gt;+1. Will test and commit.&lt;/p&gt;</comment>
                            <comment id="12829471" author="zshao" created="Thu, 4 Feb 2010 06:18:50 +0000"  >&lt;p&gt;Can you make the query result deterministic by adding an &quot;order by&quot; at the end? Otherwise the tests might fail.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] diff -a -I file: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I owner -I transient_lastDdlTime /data/users/zshao/hadoop_hive_trunk/.ptest_0/build/ql/test/logs\
/clientpositive/create_view.q.out /data/users/zshao/hadoop_hive_trunk/.ptest_0/ql/src/test/results/clientpositive/create_view.q.out
    [junit] 869d868
    [junit] &amp;lt; 401       5
    [junit] 871,873c870
    [junit] &amp;lt; 489       4
    [junit] &amp;lt; 169       4
    [junit] &amp;lt; 277       4
    [junit] ---
    [junit] &amp;gt; 401       5
    [junit] 875a873,875
    [junit] &amp;gt; 277       4
    [junit] &amp;gt; 489       4
    [junit] &amp;gt; 169       4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12829706" author="jvs" created="Thu, 4 Feb 2010 19:05:43 +0000"  >&lt;p&gt;Whoops, I had an ORDER BY, but only a subset of the full key.&lt;/p&gt;</comment>
                            <comment id="12829707" author="jvs" created="Thu, 4 Feb 2010 19:06:08 +0000"  >&lt;p&gt;.3.patch fixes the ORDER BY.&lt;/p&gt;</comment>
                            <comment id="12829734" author="zshao" created="Thu, 4 Feb 2010 19:43:54 +0000"  >&lt;p&gt;Committed. Thanks John!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12442500">HIVE-972</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434724" name="HIVE-1124.1.patch" size="77764" author="jvs" created="Wed, 3 Feb 2010 23:03:18 +0000"/>
                            <attachment id="12434771" name="HIVE-1124.2.patch" size="78340" author="jvs" created="Thu, 4 Feb 2010 01:56:29 +0000"/>
                            <attachment id="12434859" name="HIVE-1124.3.patch" size="78345" author="jvs" created="Thu, 4 Feb 2010 19:05:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Feb 2010 23:03:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73086</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1125] Hive CLI shows &apos;Ended Job=&apos; at the beginning of the job</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1125</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Instead of &quot;Starting Job = &quot;, it prints &quot;Ended Job =&quot;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Total MapReduce jobs = 1
Launching Job 1 out of 1
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of reduce tasks is set to 0 since there&apos;s no reduce &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;
Ended Job = job_201002012342_2688, Tracking URL = http:&lt;span class=&quot;code-comment&quot;&gt;//silver.data.facebook.com:50030/jobdetails.jsp?jobid=job_201002012342_2688
&lt;/span&gt;Kill Command = /data/users/pyang/task2/trunk/dist/shortcuts/silver.trunk/hadoop/bin/../bin/hadoop job  -Dmapred.job.tracker=silver.data.facebook.com:50029 -kill job_201002012342_2688
2010-02-02 10:47:05,067 Stage-1 map = 0%,  reduce = 0%
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12455095">HIVE-1125</key>
            <summary>Hive CLI shows &apos;Ended Job=&apos; at the beginning of the job</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2010 18:52:44 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:56 +0000</updated>
                            <resolved>Tue, 2 Feb 2010 23:33:46 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12828715" author="pauly" created="Tue, 2 Feb 2010 18:57:47 +0000"  >&lt;p&gt;The change was traced to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-964&quot; title=&quot;handle skewed keys for a join in a separate job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-964&quot;&gt;&lt;del&gt;HIVE-964&lt;/del&gt;&lt;/a&gt;. Not quite sure why the change was made...&lt;/p&gt;</comment>
                            <comment id="12828718" author="pauly" created="Tue, 2 Feb 2010 19:05:16 +0000"  >&lt;p&gt;Nevermind, it seems that it&apos;s a typo. Instead of calling getJobStartMsg(), ExecDriver called getJobEndMsg().&lt;/p&gt;</comment>
                            <comment id="12828741" author="namit" created="Tue, 2 Feb 2010 19:38:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12434562" name="HIVE-1125.1.patch" size="711" author="pauly" created="Tue, 2 Feb 2010 18:57:47 +0000"/>
                            <attachment id="12434565" name="HIVE-1125.2.patch" size="718" author="pauly" created="Tue, 2 Feb 2010 19:05:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Feb 2010 19:38:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73085</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1126] Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1126</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I&apos;ve been using the hive jdbc driver more and more and was missing some functionality which I added&lt;/p&gt;

&lt;p&gt;HiveDatabaseMetaData.getTables&lt;br/&gt;
Using &quot;show tables&quot; to get the info from hive.&lt;/p&gt;

&lt;p&gt;HiveDatabaseMetaData.getColumns&lt;br/&gt;
Using &quot;describe tablename&quot; to get the columns.&lt;/p&gt;

&lt;p&gt;This makes using something like SQuirreL a lot nicer since you have the list of tables and just click on the content tab to see what&apos;s in the table.&lt;/p&gt;


&lt;p&gt;I also implemented&lt;br/&gt;
HiveResultSet.getObject(String columnName) so you call most get* methods based on the column name.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455156">HIVE-1126</key>
            <summary>Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bennies">Bennie Schut</assignee>
                                    <reporter username="bennies">Bennie Schut</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2010 10:51:39 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:18 +0000</updated>
                            <resolved>Fri, 30 Jul 2010 00:12:11 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="12829224" author="jvs" created="Wed, 3 Feb 2010 19:52:49 +0000"  >&lt;p&gt;For TABLE_TYPE in getTables, you can use the tableType attribute I recently added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1068&quot; title=&quot;CREATE VIEW followup:  add a &amp;quot;table type&amp;quot; enum attribute in metastore&amp;#39;s MTable, and also null out irrelevant attributes for MTable instances which describe views&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1068&quot;&gt;&lt;del&gt;HIVE-1068&lt;/del&gt;&lt;/a&gt; (already committed).  The mapping should be&lt;/p&gt;

&lt;p&gt;MANAGED_TABLE -&amp;gt; &apos;TABLE&apos;&lt;br/&gt;
VIRTUAL_VIEW -&amp;gt; &apos;VIEW&apos;&lt;br/&gt;
EXTERNAL_TABLE -&amp;gt; &apos;EXTERNAL TABLE&apos;&lt;/p&gt;</comment>
                            <comment id="12829228" author="bennies" created="Wed, 3 Feb 2010 20:00:44 +0000"  >&lt;p&gt;Ah nice.. I will add this and add the new patch..&lt;/p&gt;</comment>
                            <comment id="12829281" author="bennies" created="Wed, 3 Feb 2010 21:49:31 +0000"  >&lt;p&gt;client.get_tables only returns a list of tables names. The interface would need to be changed. Perhaps adding another method to would make sence?&lt;/p&gt;</comment>
                            <comment id="12829550" author="bennies" created="Thu, 4 Feb 2010 09:31:23 +0000"  >&lt;p&gt;Ok for now I&apos;ll just call a client.get_table for each table which returns the table type. Tabletype however is a new feature so when pointing to an older hive server this field will be null so then I also let the jdbc driver return null for the TABLE_TYPE. I could return something like &quot;TABLE&quot; but I think this is ok for now. &lt;br/&gt;
I&apos;ll make a new patch.&lt;/p&gt;</comment>
                            <comment id="12829552" author="bennies" created="Thu, 4 Feb 2010 09:34:18 +0000"  >&lt;p&gt;new patch with table_type.&lt;/p&gt;</comment>
                            <comment id="12832712" author="jvs" created="Thu, 11 Feb 2010 22:39:21 +0000"  >&lt;p&gt;Hi Bennie,&lt;/p&gt;

&lt;p&gt;Thanks a lot for working on this.  I have some initial review comments (and I may have some more after further review passes).&lt;/p&gt;

&lt;p&gt;1) Some new unit tests in TestJdbcDriver are needed for exercising this code.&lt;/p&gt;

&lt;p&gt;2) The pattern parameters for getTables and getColumns are not being honored.  In the case of getTables, the tableNamePattern is ignored, whereas in the case of getColumns, tableNamePattern is assumed to be a specific table name, while columnNamePattern is ignored.  All of these are insufficient in general, even if they are enough to get SQuirreL working.  I don&apos;t think we should enable these API methods until we either implement them fully or make them throw exceptions when they detect cases they aren&apos;t capable of yet.  For implementation, it&apos;s possible in some cases to translate the input JDBC-style pattern into the form of pattern Hive expects; in other cases, we may need to pull back more metadata than asked for and then do driver-side post-filtering.&lt;/p&gt;

&lt;p&gt;3) LIkewise for the types parameter to getTables.  I&apos;ve logged &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1145&quot; title=&quot;CREATE VIEW followup:  extend metastore get_tables API to allow filtering by table type (view, external table, etc.)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1145&quot;&gt;HIVE-1145&lt;/a&gt; to get metastore API support for this, but in the meantime we can do it via driver-side post-filtering.&lt;/p&gt;

&lt;p&gt;4) We have comment metadata available for tables and columns, so we should return this for the relevant REMARKS columns in the result sets.&lt;/p&gt;

&lt;p&gt;5) Shouldn&apos;t the column names be ALL_CAPS (e.g. &quot;TABLE_CAT&quot; rather than &quot;table_cat&quot;)?&lt;/p&gt;

&lt;p&gt;6) The JDBC spec requires the result sets to be returned in a definite order (specified in the JDBC API Javadoc for each method).  We&apos;ll need a driver-side sort to accomplish this in some cases (e.g. for getTables, the rows are supposed to be ordered first by table type, and then by name).&lt;/p&gt;

&lt;p&gt;7) For getColumns, you&apos;ve provided the ResultSetMetaData for the names/types of the returned columns; we need this consistent for getCatalogs/getTables as well.&lt;/p&gt;</comment>
                            <comment id="12871312" author="jvs" created="Tue, 25 May 2010 19:32:05 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1368&quot; title=&quot;Hive JDBC Integration with SQuirrel SQL Client support Enhanced&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1368&quot;&gt;&lt;del&gt;HIVE-1368&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12872980" author="suniluiit" created="Fri, 28 May 2010 13:41:12 +0000"  >&lt;p&gt;Please use this patch(&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1368&quot; title=&quot;Hive JDBC Integration with SQuirrel SQL Client support Enhanced&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1368&quot;&gt;&lt;del&gt;HIVE-1368&lt;/del&gt;&lt;/a&gt;.patch) this created from Hive _Trunk 0.5.0 &lt;/p&gt;</comment>
                            <comment id="12872982" author="suniluiit" created="Fri, 28 May 2010 13:42:44 +0000"  >&lt;p&gt;Please ignore my above comment..&lt;br/&gt;
Please use this patch( &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;_patch(0.5.0_source).patch) this created from Hive _Trunk 0.5.0 &lt;/p&gt;</comment>
                            <comment id="12885385" author="vinithra" created="Tue, 6 Jul 2010 01:54:44 +0000"  >&lt;p&gt;Hi Bennie, &lt;br/&gt;
Can I pick this JIRA up?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="12888365" author="bennies" created="Wed, 14 Jul 2010 14:41:50 +0000"  >&lt;p&gt;Hi Vinithra,&lt;/p&gt;

&lt;p&gt;I just started working on it again. I&apos;ve had little time to work on this but in the end we also need this committed. But if I run into a problem I&apos;ll probably ask for some help.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12889043" author="bennies" created="Fri, 16 Jul 2010 07:40:25 +0000"  >&lt;p&gt;John,&lt;/p&gt;

&lt;p&gt;I noticed schema support is geeing added (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-675&quot; title=&quot;Add Database/Schema support to Hive QL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-675&quot;&gt;&lt;del&gt;HIVE-675&lt;/del&gt;&lt;/a&gt;) but as far as I can tell there is no such thing as catalog&apos;s in hive right?&lt;br/&gt;
From what I can tell:&lt;br/&gt;
MySQL does not understand &quot;schema&quot;, you have to use &quot;catalog&quot;.&lt;br/&gt;
Oracle does not understand &quot;catalog&quot;, you have to use &quot;schema&quot;.&lt;/p&gt;

&lt;p&gt;So it seems like it&apos;s more of a semantics thing. Since the other patch talks about schema&apos;s perhaps that&apos;s what we should also call it?&lt;/p&gt;

&lt;p&gt;fyi, I&apos;m currently working on the points you mentioned. &lt;/p&gt;

&lt;p&gt;Bennie.&lt;/p&gt;</comment>
                            <comment id="12889059" author="cwsteinbach" created="Fri, 16 Jul 2010 08:27:11 +0000"  >&lt;p&gt;Hi Bennie,&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-675&quot; title=&quot;Add Database/Schema support to Hive QL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-675&quot;&gt;&lt;del&gt;HIVE-675&lt;/del&gt;&lt;/a&gt; will provide support in Hive for MySQL&apos;s concept of &quot;databases&quot;, i.e. separate namespaces for tables.&lt;br/&gt;
It will make it possible to do things like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE DATABASE d1;
USE d1;
CREATE TABLE t1(a INT);
USE &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;;
CREATE TABLE t1(b INT);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1010&quot; title=&quot;Implement INFORMATION_SCHEMA in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1010&quot;&gt;&lt;del&gt;HIVE-1010&lt;/del&gt;&lt;/a&gt; addresses the task of adding support in Hive for an INFORMATION_SCHEMA.&lt;/p&gt;</comment>
                            <comment id="12889089" author="bennies" created="Fri, 16 Jul 2010 09:17:25 +0000"  >&lt;p&gt;Hi Carl,&lt;/p&gt;

&lt;p&gt;Thanks for the fast response. The jdbc driver has a concept of &quot;catalog&quot; and &quot;schema&quot; (this is jdbc terminology). You could for instance describe a table like this:&lt;br/&gt;
Catalog.Schema.TableName&lt;br/&gt;
But then it seems oracle implements the &quot;getCatalogs&quot; which allows you to do:&lt;br/&gt;
Catalog.TableName&lt;br/&gt;
Mysql supports the &quot;getSchemas&quot; which allows you to do this:&lt;br/&gt;
Schema.TableName&lt;/p&gt;

&lt;p&gt;Now on mysql what they call a database = jdbc schema&lt;br/&gt;
On oracle what they call a schema = jdbc catalog&lt;/p&gt;

&lt;p&gt;It seems nobody supports both and it seems to matter little which of the two you pick because the end result seems to allow you to do exactly the same thing.&lt;br/&gt;
I have a personal preference in implementing getSchemas but if anyone can think of a reason to do it differently I would love to know.&lt;/p&gt;

&lt;p&gt;To me it seems like : schemas == databases == catalogs == namespaces&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Bennie.&lt;/p&gt;</comment>
                            <comment id="12889094" author="cwsteinbach" created="Fri, 16 Jul 2010 09:26:59 +0000"  >&lt;p&gt;Hi Benny,&lt;/p&gt;

&lt;p&gt;I think the convention in Hive is to mimic the behavior of MySQL whenever possible. Implementing &quot;getSchemas&quot; sounds like the right way to go.&lt;/p&gt;</comment>
                            <comment id="12890266" author="bennies" created="Tue, 20 Jul 2010 14:27:55 +0000"  >&lt;p&gt;In this new patch I addressed John&apos;s concern.&lt;/p&gt;

&lt;p&gt;1) Added a lot of new tests.&lt;br/&gt;
2) Pattern matching should work now. It&apos;s client side but it works as per jdbc spec. (including tests)&lt;br/&gt;
3) Agreed and done.  (including tests)&lt;br/&gt;
4) Remarks/comments are now also available on both columns and tables (including tests)&lt;br/&gt;
5) Agreed and done.&lt;br/&gt;
6) Agreed and done.  (including tests)&lt;br/&gt;
7) Agreed and done.  (including tests)&lt;/p&gt;

&lt;p&gt;A lot has changed since the last patch. As a side effect it makes using the jdbc driver with SQuirreL a lot more stable/nicer to use.&lt;/p&gt;

&lt;p&gt;Bennie.&lt;/p&gt;</comment>
                            <comment id="12890268" author="bennies" created="Tue, 20 Jul 2010 14:30:34 +0000"  >&lt;p&gt;Please let me know if we need more changes to get this committed.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Bennie.&lt;/p&gt;</comment>
                            <comment id="12890434" author="jvs" created="Tue, 20 Jul 2010 20:39:39 +0000"  >&lt;p&gt;Hey, thanks a lot Bennie!  I know a lot of people are looking forward to this one.&lt;/p&gt;

&lt;p&gt;I have a couple of cosmetic items which need to be fixed and then we can commit this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;JdbcColumn.java and JdbcTable.java:  please add Apache file header to these two new files&lt;/li&gt;
	&lt;li&gt;HiveDatabaseMetaData.java:  replace import java.util.* with expanded imports (Hive convention)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Questions:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;In HiveDatabaseMetaData.getTables, why did you need to make one of the blocks synchronized?&lt;/li&gt;
	&lt;li&gt;why does supportsNamedParameters return true?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For the HiveResultSet getters (e.g. getLong), they are actually supposed to attempt a conversion (e.g. if the column is string, attempt convert to long).  It&apos;s OK to just throw exception for now, but maybe the message should be &quot;Unsupported conversion&quot; instead of &quot;Illegal conversion&quot;?&lt;/p&gt;

&lt;p&gt;Regarding catalog/schema, I agree with Carl that we should try to mimic MySQL here.&lt;/p&gt;</comment>
                            <comment id="12890446" author="bennies" created="Tue, 20 Jul 2010 21:09:11 +0000"  >&lt;p&gt;Hi John,&lt;/p&gt;

&lt;p&gt;Thanks for the speedy comments.&lt;br/&gt;
I&apos;ll make the fixes tomorrow morning.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Apache file header. I&apos;ll add them&lt;/li&gt;
	&lt;li&gt;Expanded imports. ok.&lt;/li&gt;
	&lt;li&gt;synchronizedon getTables. I forgot about that. When SQuirreL is rebuilding the tables tree a few times really fast (most likely concurrently) it seems to end up with the same table name multiple times in the list. I had a hunch this was related to the client not being completely thread safe (or the way I use it anyway). After making it synchronized I never saw this problem again. I&apos;ll also look into this a little more. On the &quot;DatabaseMetaData getMetaData()&quot; we could also decide to create a new client object which would probably also prevent this.&lt;/li&gt;
	&lt;li&gt;supportsNamedParameters sorry I confused it for something else. I&apos;ll revert that one.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In most cases I ran a little test on the mysql jdbc driver to know what they returned and used that as a baseline.&lt;/p&gt;</comment>
                            <comment id="12890482" author="hbasereviewboard" created="Tue, 20 Jul 2010 22:06:58 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/226/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Submitted for review on behalf of Bennie Schut&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1126&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1126&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java 965834 &lt;br/&gt;
  trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java 965834 &lt;br/&gt;
  trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java 965834 &lt;br/&gt;
  trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSetMetaData.java 965834 &lt;br/&gt;
  trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcColumn.java PRE-CREATION &lt;br/&gt;
  trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcTable.java PRE-CREATION &lt;br/&gt;
  trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java 965834 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/226/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12890506" author="hbasereviewboard" created="Tue, 20 Jul 2010 23:50:34 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/226/#review433&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#review433&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Hi Benny,&lt;/p&gt;

&lt;p&gt;I have some suggestions. Sorry I didn&apos;t make these earlier.&lt;/p&gt;


&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1796&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1796&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    String constants like this should probably be defined as static final strings at the top of the file. Better yet would be to add a HiveConstants class to common and define them all there so that other parts of the code can reference them.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1798&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1798&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please use an ArrayList by default.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1801&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please create a copy of the input list.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1797&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please run &apos;ant checkstyle&apos; and fix any errors/warnings that you have introduced.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1802&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1802&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The initial size of this list is set to 9 but you always add 19 elements?&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1806&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1806&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m concerned that extending and selectively overriding components of HiveResultSet is the wrong thing to do here. HiveResultSet contains a lot of stuff that you don&apos;t want in this case (such as a potential reference to the thrift client), and there&apos;s always the chance that someone add new code to HiveResultSet that would then need to override here.&lt;/p&gt;

&lt;p&gt;    I recommend creating a HiveBaseResultSet class that has everything disabled, and then extending that with a HiveMetadataResultSet (that you would use here) and a HiveQueryResultSet that would take the place of the current HiveResultSet.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1803&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1803&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Why is the initial size set to 5?&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1804&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1804&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    There&apos;s no need to use explicit indexes when adding elements to an ArrayList. In this case it also opens the door to someone introducing a bug in the future if the modify the code and forget to update the indexing.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1807&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1807&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please replace with HiveMetadataResultSet&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1808&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1808&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please change the name of this class to HiveQueryResultSet and have it extend HiveBaseResultSet.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1799&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1799&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please copy the input lists, e.g:&lt;/p&gt;

&lt;p&gt;    this.columnNames = new ArrayList&amp;lt;String&amp;gt;(columnNames);&lt;br/&gt;
    this.columnTypes = new ArrayList&amp;lt;String&amp;gt;(columnTypes);&lt;/p&gt;

&lt;p&gt;    I think there are other places where this needs to be done as well.&lt;/p&gt;

&lt;p&gt;    Also, this constructor should not be here since it leaves this.client uninitialized and opens the possibility of an NPE if someone forgets to override next().&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1809&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1809&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This method should be private.&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1800&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1800&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Checkstyle error: you need {}s&lt;/p&gt;



&lt;p&gt;trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/226/#comment1810&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/226/#comment1810&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This throws an NPE if I call close() and then next(), or if I call one of the constructors that does not set client and then call next(). In the first case I think the proper behavior is to throw a SQLException. I think the second case should be made impossible by making the changes I mentioned above (i.e. split this into abstract HiveBaseResultSet, HiveMetadataResultSet, and HiveQueryResultSet).&lt;/p&gt;



&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12890722" author="bennies" created="Wed, 21 Jul 2010 13:13:59 +0000"  >&lt;p&gt;Ok some more on the synchronized client on getTables.&lt;br/&gt;
This discussion on thrift show what I also noticed:&lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/incubator-thrift-user/200911.mbox/%3C6cf16f130911230449h1ab500e7y1c5ea787548f9da7@mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/incubator-thrift-user/200911.mbox/%3C6cf16f130911230449h1ab500e7y1c5ea787548f9da7@mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So the way I see it is we have two options. &lt;br/&gt;
1) we synchronize the client calls when we use them (like I already did). This should not be a problem since you wouldn&apos;t expect massive amounts of calls on this.&lt;br/&gt;
2) when a call is made to Connection.getMetaData() we should create a new client connection and thus become thread safe.&lt;/p&gt;

&lt;p&gt;Option two has a bit more risk involving connection leaking. I noticed the close() on the HiveConnection is explicitly calling a &quot;transport.close()&quot; so I could keep track of all the connections we handout to also close during that close, however how do you cleanup a connection of a DatabaseMetaData object after it&apos;s used? If it&apos;s automatically garbage collected then I&apos;m wondering why we have the explicit close now.&lt;/p&gt;

&lt;p&gt;Bennie.&lt;/p&gt;</comment>
                            <comment id="12890743" author="bennies" created="Wed, 21 Jul 2010 14:48:10 +0000"  >&lt;p&gt;Thinking some more about the sync. stuff. I guess if we would use synchronize we would also have to do it on other locations on the HiveDatabaseMetaData class.&lt;br/&gt;
I&apos;m done with the other changes so after we clear this up I can make a new patch.&lt;/p&gt;</comment>
                            <comment id="12891312" author="jvs" created="Thu, 22 Jul 2010 20:12:07 +0000"  >&lt;p&gt;Regarding the synchronization:  Squirrel really should not be calling onto multiple objects from the same JDBC connections from different threads (except in the special case of cancel).  In general, JDBC drivers don&apos;t make a guarantee of thread safety within the same connection.&lt;/p&gt;

&lt;p&gt;If it is expecting this guarantee, then in general the synchronization would need to be added at a higher level (on the JDBC connection object itself, regardless of which object is receiving the API call) since over time we could be adding more client-side state.&lt;/p&gt;

&lt;p&gt;Creating a new client connection is not a good approach since we want the session state shared within a connection.&lt;/p&gt;

&lt;p&gt;I suggest we get the current work committed without any synchronization, and then open up a separate JIRA to investigate further.&lt;/p&gt;

&lt;p&gt;Regarding Carl&apos;s review comments:  all of them look correct to me, so could you take care of them as part of the next rev of the patch?&lt;/p&gt;</comment>
                            <comment id="12891513" author="bennies" created="Fri, 23 Jul 2010 08:10:56 +0000"  >&lt;p&gt;John,&lt;/p&gt;

&lt;p&gt;I think the spec is pretty clear on this:&lt;br/&gt;
&lt;a href=&quot;http://download.oracle.com/docs/cd/E17476_01/javase/1.3/docs/guide/jdbc/spec/jdbc-spec.frame9.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/docs/cd/E17476_01/javase/1.3/docs/guide/jdbc/spec/jdbc-spec.frame9.html&lt;/a&gt;&lt;br/&gt;
We are supposed to make it thread safe. Now they explain that the most logical use case for multi threading on a single connection would be the cancel call. What squirrel is doing might be unexpected but it is allowed per spec. A separate JIRA would make sense since this isn&apos;t the only spot I guess.&lt;br/&gt;
I&apos;ll remove the sync for now.&lt;/p&gt;

&lt;p&gt;I&apos;ve changed all things Carl said except for the copying the input lists. These lists are explicitly created to be used on this resultset only and can&apos;t possibly be modified by anything. I think I should have made them final like this:&lt;/p&gt;

&lt;p&gt;  public HiveMetaDataResultSet(final List&amp;lt;String&amp;gt; columnNames&lt;br/&gt;
          , final List&amp;lt;String&amp;gt; columnTypes&lt;/p&gt;

&lt;p&gt;Which would make this clear. However if anyone feels strongly about having this copied by value then I&apos;ll change that to.&lt;/p&gt;

&lt;p&gt;You can expect a new patch in a few minutes.&lt;/p&gt;

&lt;p&gt;Bennie.&lt;/p&gt;</comment>
                            <comment id="12891517" author="bennies" created="Fri, 23 Jul 2010 08:28:21 +0000"  >&lt;p&gt;New patch with changes requested by Carl and John.&lt;/p&gt;</comment>
                            <comment id="12891524" author="cwsteinbach" created="Fri, 23 Jul 2010 08:48:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ve changed all things Carl said except for the copying the input lists. These lists are explicitly created to be used on this resultset only and can&apos;t possibly be modified by anything. I think I should have made them final like this&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In Java a final variable can only be assigned to once. Making a variable final does not make it immutable, and making the constructor parameters columnNames and columnTypes final won&apos;t prevent the caller from later mutating these lists and affecting the internal state of the ResultSet object. I think it&apos;s prudent to make this change now since it&apos;s hard to anticipate how this class will be used in the future.&lt;/p&gt;</comment>
                            <comment id="12891530" author="bennies" created="Fri, 23 Jul 2010 09:09:14 +0000"  >&lt;p&gt;I&apos;ll make the change now.&lt;/p&gt;</comment>
                            <comment id="12891535" author="bennies" created="Fri, 23 Jul 2010 09:32:14 +0000"  >&lt;p&gt;Now using copy by value.&lt;/p&gt;</comment>
                            <comment id="12891728" author="jvs" created="Fri, 23 Jul 2010 18:47:24 +0000"  >&lt;p&gt;Thanks for the multi-threading reference; I wasn&apos;t aware of that.  OK, we should try to address that comprehensively in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1482&quot; title=&quot;Not all jdbc calls are threadsafe.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1482&quot;&gt;HIVE-1482&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12891791" author="jvs" created="Fri, 23 Jul 2010 20:56:50 +0000"  >&lt;p&gt;Bennie, I&apos;m having trouble applying &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;-4.patch.  Did you base it against trunk?&lt;/p&gt;


&lt;p&gt;can&apos;t find file to patch at input line 6924&lt;br/&gt;
Perhaps you used the wrong -p or --strip option?&lt;br/&gt;
The text leading up to this was:&lt;br/&gt;
--------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Index: jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveQueryResultSet.java&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;===================================================================&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212; jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveQueryResultSet.java	(revision 965833)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;+++ jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveQueryResultSet.java	(working copy)&lt;br/&gt;
--------------------------&lt;br/&gt;
File to patch:&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="12891948" author="bennies" created="Sat, 24 Jul 2010 07:24:20 +0000"  >&lt;p&gt;Somehow the previous patch was incomplete. not sure why but this was it&apos;s state on svn:&lt;br/&gt;
A  +    src/java/org/apache/hadoop/hive/jdbc/HiveQueryResultSet.java&lt;br/&gt;
I removed it and added it again and now the patch is complete again:&lt;/p&gt;

&lt;p&gt;patch -p0 --dry-run &amp;lt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;-5.patch&lt;br/&gt;
patching file jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveCallableStatement.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveBaseResultSet.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HivePreparedStatement.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSetMetaData.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveMetaDataResultSet.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcTable.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcColumn.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveStatement.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;br/&gt;
patching file jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveQueryResultSet.java&lt;/p&gt;</comment>
                            <comment id="12891950" author="aaa" created="Sat, 24 Jul 2010 07:38:19 +0000"  >&lt;p&gt;I am out of office on vacation and will be slower than usual in&lt;br/&gt;
responding to emails. If this is urgent then please call my cell phone&lt;br/&gt;
(or send an sms), otherwise I will reply to your email when I get&lt;br/&gt;
back.&lt;/p&gt;

&lt;p&gt;Thanks for your patience,&lt;/p&gt;

&lt;p&gt;&amp;#8211; amr&lt;/p&gt;</comment>
                            <comment id="12892069" author="jvs" created="Sun, 25 Jul 2010 04:08:55 +0000"  >&lt;p&gt;TestJdbcDriver is not passing: one failure and one error.&lt;/p&gt;

&lt;p&gt; &amp;lt;testcase classname=&quot;org.apache.hadoop.hive.jdbc.TestJdbcDriver&quot; name=&quot;testMetaDataGetTables&quot; time=&quot;0.977&quot;&amp;gt;                                                                                             &lt;br/&gt;
    &amp;lt;failure message=&quot;expected:&amp;lt;src&amp;gt; but was:&amp;lt;testhivedriverpartitionedtable&amp;gt;&quot; type=&quot;junit.framework.AssertionFailedError&quot;&amp;gt;junit.framework.AssertionFailedError: expected:&amp;lt;src&amp;gt; but was\&lt;br/&gt;
:&amp;lt;testhivedriverpartitionedtable&amp;gt;                                                                                                                                                                   &lt;br/&gt;
        at junit.framework.Assert.fail(Assert.java:47)                                                                                                                                                    &lt;br/&gt;
        at junit.framework.Assert.failNotEquals(Assert.java:282)                                                                                                                                          &lt;br/&gt;
        at junit.framework.Assert.assertEquals(Assert.java:64)                                                                                                                                            &lt;br/&gt;
        at junit.framework.Assert.assertEquals(Assert.java:71)                                                                                                                                            &lt;br/&gt;
        at org.apache.hadoop.hive.jdbc.TestJdbcDriver.testMetaDataGetTables(TestJdbcDriver.java:334)                                                                                                      &lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                                                                                                                                    &lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)                                                                                                                  &lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)                                                                                                          &lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)                                                                                                                                               &lt;br/&gt;
        at junit.framework.TestCase.runTest(TestCase.java:154)                                                                                                                                            &lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:127)                                                                                                                                            &lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:106)                                                                                                                                      &lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:124)                                                                                                                                   &lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:109)                                                                                                                                            &lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:118)                                                                                                                                                &lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:208)                                                                                                                                          &lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:203)                                                                                                                                              &lt;br/&gt;
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)                                                                                                     &lt;br/&gt;
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)                                                                                                  &lt;br/&gt;
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:785)                                                                                                    &lt;br/&gt;
&amp;lt;/failure&amp;gt;                                                                                                                                                                                                &lt;br/&gt;
  &amp;lt;/testcase&amp;gt;                                                                                                                                                                                             &lt;br/&gt;
  &amp;lt;testcase classname=&quot;org.apache.hadoop.hive.jdbc.TestJdbcDriver&quot; name=&quot;testMetaDataGetCatalogs&quot; time=&quot;0.819&quot; /&amp;gt;                                                                                         &lt;br/&gt;
  &amp;lt;testcase classname=&quot;org.apache.hadoop.hive.jdbc.TestJdbcDriver&quot; name=&quot;testMetaDataGetTableTypes&quot; time=&quot;0.753&quot; /&amp;gt;                                                                                       &lt;br/&gt;
  &amp;lt;testcase classname=&quot;org.apache.hadoop.hive.jdbc.TestJdbcDriver&quot; name=&quot;testMetaDataGetColumns&quot; time=&quot;0.967&quot;&amp;gt;                                                                                            &lt;br/&gt;
    &amp;lt;error message=&quot;Unrecognized column type: array&amp;lt;int&amp;gt;&quot; type=&quot;java.sql.SQLException&quot;&amp;gt;java.sql.SQLException: Unrecognized column type: array&amp;lt;int&amp;gt;                                            &lt;br/&gt;
        at org.apache.hadoop.hive.jdbc.HiveResultSetMetaData.hiveTypeToSqlType(HiveResultSetMetaData.java:119)                                                                                            &lt;br/&gt;
        at org.apache.hadoop.hive.jdbc.JdbcColumn.getSqlType(JdbcColumn.java:61)                                                                                                                          &lt;br/&gt;
        at org.apache.hadoop.hive.jdbc.HiveDatabaseMetaData$2.next(HiveDatabaseMetaData.java:198)                                                                                                         &lt;br/&gt;
        at org.apache.hadoop.hive.jdbc.TestJdbcDriver.testMetaDataGetColumns(TestJdbcDriver.java:411)                                                                                                     &lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                                                                                                                                    &lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)                                                                                                                  &lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)                                                                                                          &lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)                                                                                                                                               &lt;br/&gt;
        at junit.framework.TestCase.runTest(TestCase.java:154)                                                                                                                                            &lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:127)                                                                                                                                            &lt;/p&gt;
</comment>
                            <comment id="12892201" author="bennies" created="Mon, 26 Jul 2010 07:18:25 +0000"  >&lt;p&gt;Hi John,&lt;/p&gt;

&lt;p&gt;Thanks for looking at this. I did this:&lt;/p&gt;

&lt;p&gt;svn co &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk&lt;/a&gt; hive_test/&lt;br/&gt;
patch -p0 &amp;lt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;-5.patch&lt;br/&gt;
ant test -Dtestcase=TestJdbcDriver -Doverwrite=true&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;br/&gt;
Total time: 1 minute 37 seconds&lt;/p&gt;

&lt;p&gt;However the error is correct. I don&apos;t think we support array on jdbc. Non of the tables on TestJdbcDriver seem to use the array type so perhaps there is another ticket related to arrays which is colliding with this one?&lt;/p&gt;</comment>
                            <comment id="12892245" author="bennies" created="Mon, 26 Jul 2010 09:50:35 +0000"  >&lt;p&gt;I just noticed you only receive this error when you run a full test. I&apos;ll look into it a bit more.&lt;/p&gt;</comment>
                            <comment id="12892320" author="bennies" created="Mon, 26 Jul 2010 14:24:54 +0000"  >&lt;p&gt;As I expected it is colliding with other tests I think I&apos;ll just remove the check for &quot;all&quot; tables since it is returning a few more tables from other tests.&lt;br/&gt;
It&apos;s only visible after running the full tests so it will take a few hours before I can upload the new patch.&lt;/p&gt;</comment>
                            <comment id="12892438" author="bennies" created="Mon, 26 Jul 2010 19:53:51 +0000"  >&lt;p&gt;Sorry about the previously failing tests. I now take into account some of the other tests might leave some tables laying around.&lt;/p&gt;

&lt;p&gt;I now did a full test run:&lt;br/&gt;
BUILD SUCCESSFUL&lt;br/&gt;
Total tiame: 77 minutes 38 seconds&lt;/p&gt;</comment>
                            <comment id="12892508" author="hbasereviewboard" created="Mon, 26 Jul 2010 22:18:14 +0000"  >&lt;p&gt;Message from: &quot;John Sichi&quot; &amp;lt;jsichi@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/385/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/385/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt; patch 6 by jvs.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1126&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1126&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveBaseResultSet.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveBaseResultSet.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveCallableStatement.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveCallableStatement.java&lt;/a&gt; 978817 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java&lt;/a&gt; 978817 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;/a&gt; 978817 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveMetaDataResultSet.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveMetaDataResultSet.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HivePreparedStatement.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HivePreparedStatement.java&lt;/a&gt; 978817 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveQueryResultSet.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveQueryResultSet.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSet.java&lt;/a&gt; 978817 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSetMetaData.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSetMetaData.java&lt;/a&gt; 978817 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveStatement.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveStatement.java&lt;/a&gt; 978817 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcColumn.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcColumn.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcTable.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcTable.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;/a&gt; 978817 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/385/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/385/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;

</comment>
                            <comment id="12892513" author="hbasereviewboard" created="Mon, 26 Jul 2010 22:31:21 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/385/#review486&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/385/#review486&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;+1 Looks good to me.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12892535" author="jvs" created="Mon, 26 Jul 2010 23:13:53 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="12892981" author="jvs" created="Tue, 27 Jul 2010 23:16:43 +0000"  >&lt;p&gt;I am still getting a failure in TestJdbcDriver when run as part of the full ant test (below).&lt;/p&gt;

&lt;p&gt;Also, note that the failure message is confusing because when you use Assert.assertEquals(x, y), x is supposed to be the expected (correct) value and y is supposed to be the actual value produced by the test, but the code has them reversed here.&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   &amp;lt;failure message=&quot;expected:&amp;amp;lt;testhivedrivertable&amp;amp;gt; but was:&amp;amp;lt;testhive\
jdbcdriverpartitionedtable&amp;amp;gt;&quot; type=&quot;junit.framework.AssertionFailedError&quot;&amp;gt;jun\
it.framework.AssertionFailedError: expected:&amp;amp;lt;testhivedrivertable&amp;amp;gt; but was\
:&amp;amp;lt;testhivejdbcdriverpartitionedtable&amp;amp;gt;                                     
        at junit.framework.Assert.fail(Assert.java:47)                          
        at junit.framework.Assert.failNotEquals(Assert.java:282)                
        at junit.framework.Assert.assertEquals(Assert.java:64)                  
        at junit.framework.Assert.assertEquals(Assert.java:71)                  
        at org.apache.hadoop.hive.jdbc.TestJdbcDriver.testMetaDataGetTables(Tes\
tJdbcDriver.java:331)                                                           
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)          
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl\
.java:39)                                                                       
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcce\
ssorImpl.java:25)                                                               
        at java.lang.reflect.Method.invoke(Method.java:597)                     
        at junit.framework.TestCase.runTest(TestCase.java:154)                  
        at junit.framework.TestCase.runBare(TestCase.java:127)                  
        at junit.framework.TestResult$1.protect(TestResult.java:106)            
        at junit.framework.TestResult.runProtected(TestResult.java:124)         
        at junit.framework.TestResult.run(TestResult.java:109)                  
        at junit.framework.TestCase.run(TestCase.java:118)                      
        at junit.framework.TestSuite.runTest(TestSuite.java:208)                
        at junit.framework.TestSuite.run(TestSuite.java:203)                    
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUn\
itTestRunner.java:422)                                                          
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(\
JUnitTestRunner.java:931)                                                       
        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JU\
nitTestRunner.java:785)                                                         
&amp;lt;/failure&amp;gt;                                                                      
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12892983" author="jvs" created="Tue, 27 Jul 2010 23:17:13 +0000"  >&lt;p&gt;(the backslash line continuations are because I copied out of an Emacs buffer)&lt;/p&gt;</comment>
                            <comment id="12893081" author="bennies" created="Wed, 28 Jul 2010 06:53:04 +0000"  >&lt;p&gt;Sorry I seem to have uploaded the wrong patch. Since I have to upload it again I&apos;ll also fix the confusing error messages.&lt;/p&gt;</comment>
                            <comment id="12893170" author="bennies" created="Wed, 28 Jul 2010 13:14:18 +0000"  >&lt;p&gt;I keep getting errors on my test run on the test: testCliDriver_loadpart_err which seem unrelated to my changes.&lt;/p&gt;</comment>
                            <comment id="12893175" author="aaa" created="Wed, 28 Jul 2010 13:28:39 +0000"  >&lt;p&gt;I am out of office on vacation and will be slower than usual in&lt;br/&gt;
responding to emails. If this is urgent then please call my cell phone&lt;br/&gt;
(or send an sms), otherwise I will reply to your email when I get&lt;br/&gt;
back.&lt;/p&gt;

&lt;p&gt;Thanks for your patience,&lt;/p&gt;

&lt;p&gt;&amp;#8211; amr&lt;/p&gt;</comment>
                            <comment id="12893275" author="jvs" created="Wed, 28 Jul 2010 17:50:32 +0000"  >&lt;p&gt;@Bennie:  yeah, it is flaking for me too.  It has been flaky forever but seems to have gotten worse for me recently.  I&apos;ve logged &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1491&quot; title=&quot;fix or disable loadpart_err.q&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1491&quot;&gt;&lt;del&gt;HIVE-1491&lt;/del&gt;&lt;/a&gt; to disable it, but until we get that done, you can just delete loadpart_err.q and loadpart_err.q.out before running ant package test.&lt;/p&gt;</comment>
                            <comment id="12893308" author="bennies" created="Wed, 28 Jul 2010 18:59:44 +0000"  >&lt;p&gt;New patch with fixed test. Also switched the actual/expected values so they are now correct plus added some messages which should make any failing test more clear.&lt;/p&gt;</comment>
                            <comment id="12893869" author="jvs" created="Fri, 30 Jul 2010 00:12:11 +0000"  >&lt;p&gt;Committed.  Thanks Bennie!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12465366">HIVE-1368</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12428762">HIVE-576</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12465366">HIVE-1368</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12465903">HIVE-1378</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434800" name="HIVE-1126-1.patch" size="41632" author="bennies" created="Thu, 4 Feb 2010 09:34:16 +0000"/>
                            <attachment id="12449927" name="HIVE-1126-2.patch" size="50836" author="bennies" created="Tue, 20 Jul 2010 14:27:54 +0000"/>
                            <attachment id="12450283" name="HIVE-1126-3.patch" size="249470" author="bennies" created="Fri, 23 Jul 2010 08:28:21 +0000"/>
                            <attachment id="12450290" name="HIVE-1126-4.patch" size="249563" author="bennies" created="Fri, 23 Jul 2010 09:32:14 +0000"/>
                            <attachment id="12450390" name="HIVE-1126-5.patch" size="197014" author="bennies" created="Sat, 24 Jul 2010 07:24:20 +0000"/>
                            <attachment id="12450509" name="HIVE-1126-6.patch" size="197047" author="bennies" created="Mon, 26 Jul 2010 19:49:54 +0000"/>
                            <attachment id="12450740" name="HIVE-1126-7.patch" size="197507" author="bennies" created="Wed, 28 Jul 2010 18:59:44 +0000"/>
                            <attachment id="12434663" name="HIVE-1126.patch" size="40329" author="bennies" created="Wed, 3 Feb 2010 10:52:55 +0000"/>
                            <attachment id="12445779" name="HIVE-1126_patch(0.5.0_source).patch" size="78178" author="suniluiit" created="Fri, 28 May 2010 13:41:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Feb 2010 19:52:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73084</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122843</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1127] Add UDF to create struct</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1127</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We want to create a single struct from multiple columns, so that we can pass it into functions like &quot;max&quot; to get the effect of &quot;arg_max&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455216">HIVE-1127</key>
            <summary>Add UDF to create struct</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2010 19:25:02 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:56 +0000</updated>
                            <resolved>Wed, 3 Feb 2010 23:12:48 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12829238" author="pauly" created="Wed, 3 Feb 2010 20:30:08 +0000"  >&lt;ul&gt;
	&lt;li&gt;Shouldn&apos;t the for loops in evaluate() and getDisplayString() increment by 1, not 2?&lt;/li&gt;
	&lt;li&gt;ArrayList&amp;lt;ObjectInspector&amp;gt; foi = new ArrayList&amp;lt;ObjectInspector&amp;gt;(Arrays.asList(arguments)); =&amp;gt; Arrays.asList() sufficient? getStandardStructObjectInspector takes Lists as parameters.&lt;/li&gt;
	&lt;li&gt;Using Object[] instead of ArrayList&amp;lt;Object&amp;gt; for ret may offer better performance, probably not by much.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Side note: Implementing user specified field names in a UDF is not possible with the current framework because the initialize() method requires returning a StructObjectInspector. Creating the StructObjectInspector requires knowing the field names, not just the field types.&lt;/p&gt;</comment>
                            <comment id="12829268" author="zshao" created="Wed, 3 Feb 2010 21:16:00 +0000"  >&lt;p&gt;Addressed the 3 points from Paul&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="12829275" author="zshao" created="Wed, 3 Feb 2010 21:24:47 +0000"  >&lt;p&gt;Added the changes to show_functions.q.out&lt;/p&gt;</comment>
                            <comment id="12829285" author="pauly" created="Wed, 3 Feb 2010 21:57:33 +0000"  >&lt;p&gt;Looks good to me +1&lt;/p&gt;</comment>
                            <comment id="12829286" author="nzhang" created="Wed, 3 Feb 2010 22:03:45 +0000"  >&lt;p&gt;Will commit after tests.&lt;/p&gt;</comment>
                            <comment id="12829314" author="nzhang" created="Wed, 3 Feb 2010 23:12:48 +0000"  >&lt;p&gt;Committed. Thanks Zheng!&lt;/p&gt;</comment>
                            <comment id="12829316" author="zshao" created="Wed, 3 Feb 2010 23:28:30 +0000"  >&lt;p&gt;Thanks Ning!&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12438471">HIVE-888</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455225">HIVE-1128</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12427512">HIVE-554</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434700" name="HIVE-1127.1.patch" size="8540" author="zshao" created="Wed, 3 Feb 2010 19:41:44 +0000"/>
                            <attachment id="12434710" name="HIVE-1127.2.patch" size="8460" author="zshao" created="Wed, 3 Feb 2010 21:15:59 +0000"/>
                            <attachment id="12434712" name="HIVE-1127.3.patch" size="8829" author="zshao" created="Wed, 3 Feb 2010 21:24:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Feb 2010 20:30:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122844</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1128] Let max/min handle complex types like struct</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1128</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;A lot of users are interested in doing &quot;arg_min&quot; and &quot;arg_max&quot;. Basically, return the value of some other columns when one column&apos;s value is the max value.&lt;/p&gt;

&lt;p&gt;The following is an example usage when this is done:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT department, max(struct(salary, employee_name))
FROM compensations
GROUP BY department;

SELECT department, max(struct(salary, employee_name)).col2 AS employee_name
FROM compensations
GROUP BY department;

SELECT department, sen.col1 as salary, sen.col2 as employee_name
FROM (
    SELECT department, max(struct(salary, employee_name)) AS sen
    FROM compensations
    GROUP BY department
) tmp

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12455225">HIVE-1128</key>
            <summary>Let max/min handle complex types like struct</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2010 19:55:48 +0000</created>
                <updated>Tue, 3 Oct 2017 21:58:47 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 06:07:55 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12829311" author="tlipcon" created="Wed, 3 Feb 2010 23:03:13 +0000"  >&lt;p&gt;This is clever, but I&apos;d be surprised if a lot of non-programmer users would come up with this on their own. Would it be helpful to also provide argmin and argmax functions? The statistics community would probably appreciate the syntactic sugar.&lt;/p&gt;</comment>
                            <comment id="12829328" author="zshao" created="Thu, 4 Feb 2010 00:06:02 +0000"  >&lt;p&gt;This patch adds new max/min functions which are capable of dealing with complex types. It also moves the old UDAFMax/UDAFMin into contrib so that people can take these as examples.&lt;/p&gt;

&lt;p&gt;Please run &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1128&quot; title=&quot;Let max/min handle complex types like struct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1128&quot;&gt;&lt;del&gt;HIVE-1128&lt;/del&gt;&lt;/a&gt;.1.sh&quot; before applying the patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1128&quot; title=&quot;Let max/min handle complex types like struct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1128&quot;&gt;&lt;del&gt;HIVE-1128&lt;/del&gt;&lt;/a&gt;.1.patch to make sure we can keep the svn log information for the moved files.&lt;/p&gt;</comment>
                            <comment id="12829329" author="zshao" created="Thu, 4 Feb 2010 00:07:06 +0000"  >&lt;p&gt;Todd, that&apos;s a good suggestion. I will open a follow-up for argmin and argmax.&lt;/p&gt;</comment>
                            <comment id="12829337" author="zshao" created="Thu, 4 Feb 2010 00:16:12 +0000"  >&lt;p&gt;Fixed a typo in test case.&lt;/p&gt;</comment>
                            <comment id="12829338" author="tlipcon" created="Thu, 4 Feb 2010 00:16:17 +0000"  >&lt;p&gt;yep, my suggestion is definitely a separate feature that is orthogonal to this JIRA.&lt;/p&gt;</comment>
                            <comment id="12829421" author="pauly" created="Thu, 4 Feb 2010 03:38:04 +0000"  >&lt;p&gt;Looks good. +1&lt;/p&gt;</comment>
                            <comment id="12829448" author="nzhang" created="Thu, 4 Feb 2010 04:57:58 +0000"  >&lt;p&gt;Will commit after test.&lt;/p&gt;</comment>
                            <comment id="12829468" author="nzhang" created="Thu, 4 Feb 2010 06:07:54 +0000"  >&lt;p&gt;Committed. Thanks Zheng!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12455216">HIVE-1127</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12455249">HIVE-1130</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434735" name="HIVE-1128.1.sh" size="294" author="zshao" created="Thu, 4 Feb 2010 00:06:02 +0000"/>
                            <attachment id="12434738" name="HIVE-1128.2.patch" size="39131" author="zshao" created="Thu, 4 Feb 2010 00:16:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Feb 2010 23:03:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122845</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1129] Fix Assertion in ExecDriver.execute when assertions are enabled in HADOOP_OPTS</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1129</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I noticed that when running hive CLI, assertions are not enabled, which was causing me some confusion when debugging an issue.&lt;/p&gt;

&lt;p&gt;So, I added the following to my environment:&lt;/p&gt;

&lt;p&gt;export HADOOP_OPTS=&quot;-ea -esa&quot;&lt;/p&gt;

&lt;p&gt;This worked, and allowed me to see assertion failures when executing via CLI.&lt;/p&gt;

&lt;p&gt;But then I tried to run a test, and got an assertion failure from the following code in ExecDriver.execute:&lt;/p&gt;

&lt;p&gt;    // Turn on speculative execution for reducers&lt;br/&gt;
    HiveConf.setVar(job, HiveConf.ConfVars.HADOOPSPECULATIVEEXECREDUCERS,&lt;br/&gt;
        HiveConf.getVar(job, HiveConf.ConfVars.HIVESPECULATIVEEXECREDUCERS));&lt;/p&gt;

&lt;p&gt;The assertion says it should be using getBoolVar/setBoolVar instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455228">HIVE-1129</key>
            <summary>Fix Assertion in ExecDriver.execute when assertions are enabled in HADOOP_OPTS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2010 20:22:00 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:41 +0000</updated>
                            <resolved>Sat, 6 Feb 2010 00:18:01 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12829234" author="jvs" created="Wed, 3 Feb 2010 20:22:40 +0000"  >&lt;p&gt;Here&apos;s the assertion stack:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception in thread &quot;main&quot; java.lang.AssertionError&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.conf.HiveConf.getVar(HiveConf.java:292)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:569)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:946)&lt;/p&gt;</comment>
                            <comment id="12829235" author="jvs" created="Wed, 3 Feb 2010 20:23:20 +0000"  >&lt;p&gt;Also, I don&apos;t really understand what this code is doing.  Why is doing setVar using the current result of getVar?  Doesn&apos;t that mean it has no effect?&lt;/p&gt;</comment>
                            <comment id="12829244" author="pauly" created="Wed, 3 Feb 2010 20:36:09 +0000"  >&lt;p&gt;Aren&apos;t those two different variables - getVar is accessing HIVESPECULATIVEEXECREDUCERS, while the setVar is setting HADOOPSPECULATIVEEXECREDUCERS.&lt;/p&gt;</comment>
                            <comment id="12829249" author="jvs" created="Wed, 3 Feb 2010 20:46:36 +0000"  >&lt;p&gt;Haha, you&apos;re right, I should get my eyes checked.&lt;/p&gt;</comment>
                            <comment id="12829322" author="namit" created="Wed, 3 Feb 2010 23:54:12 +0000"  >&lt;p&gt;A parameter exists for enabling speculative execution for reducers in hive - the reason we added it about a month back was that we &lt;br/&gt;
wanted to test it easily &amp;#8211; there were some bugs in speculative execution for reducers in hadoop 17, which is why we had disabled it.&lt;br/&gt;
Now that those bugs have been solved, we wanted to test it gradually.&lt;/p&gt;</comment>
                            <comment id="12829339" author="jvs" created="Thu, 4 Feb 2010 00:18:20 +0000"  >&lt;p&gt;Here&apos;s a patch for getting/setting the variables in such a way that the assertions are not triggered.&lt;/p&gt;</comment>
                            <comment id="12829474" author="zshao" created="Thu, 4 Feb 2010 06:32:30 +0000"  >&lt;p&gt;Hi John, can you add the setBoolVar() function to HiveConf class just like the getBoolVar()? That makes the code easier to read and also more consistent.&lt;/p&gt;</comment>
                            <comment id="12829757" author="jvs" created="Thu, 4 Feb 2010 20:19:42 +0000"  >&lt;p&gt;In the spirit of keeping patch transactions small and focused, maybe it would be better to commit this patch as is and assign me a separate JIRA for adding and using the setter methods?  The reason I say this is that my patch followed the existing pattern here in the same file:&lt;/p&gt;

&lt;p&gt;    if(work.getMinSplitSize() != null) &lt;/p&gt;
{
      job.setInt(HiveConf.ConfVars.MAPREDMINSPLITSIZE.varname, 
         work.getMinSplitSize().intValue());
    }

&lt;p&gt;So that code will need to be changed too as part of consistently using the new setters, and that change is unrelated to my fix for the existing bug with assertions.&lt;/p&gt;</comment>
                            <comment id="12830339" author="jvs" created="Fri, 5 Feb 2010 22:27:12 +0000"  >&lt;p&gt;Resubmitting patch as is.  If you agree with me, I&apos;ll create a followup for adding the setters; otherwise, cancel it and I&apos;ll combine the two changes.&lt;/p&gt;</comment>
                            <comment id="12830386" author="zshao" created="Sat, 6 Feb 2010 00:10:18 +0000"  >&lt;p&gt;+1. That makes sense to me.&lt;br/&gt;
Please open a follow-up as an &quot;improvement&quot;.&lt;/p&gt;</comment>
                            <comment id="12830388" author="zshao" created="Sat, 6 Feb 2010 00:18:01 +0000"  >&lt;p&gt;Committed. Thanks John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12434739" name="HIVE-1129.1.patch" size="928" author="jvs" created="Thu, 4 Feb 2010 00:18:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Feb 2010 20:36:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73081</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1130] Create argmin and argmax</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1130</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1128&quot; title=&quot;Let max/min handle complex types like struct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1128&quot;&gt;&lt;del&gt;HIVE-1128&lt;/del&gt;&lt;/a&gt;, users can already do what argmax and argmin does.&lt;/p&gt;

&lt;p&gt;But it will be helpful if we provide these functions explicitly so people from maths/stats background can use it more easily.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455249">HIVE-1130</key>
            <summary>Create argmin and argmax</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="p_huyn">Pierre Huyn</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2010 00:08:15 +0000</created>
                <updated>Mon, 14 Feb 2011 21:02:05 +0000</updated>
                                            <version>0.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12903868" author="p_huyn" created="Sat, 28 Aug 2010 18:40:43 +0000"  >&lt;p&gt;Initial release of generic user-defined aggregate function:&lt;br/&gt;
                                    ARGMAX (X, Y)&lt;br/&gt;
which takes a set of pairs (X,Y) and returns a Y that maximizes X.&lt;br/&gt;
X must be of a comparable type. Any pair (NULL,Y) is ignored. If the function is applied to an empty set, NULL will be returned. If more than one Y value maximizes X, one of them will be returned arbitrarily.&lt;/p&gt;

&lt;p&gt;The current implementation tested out fine with the rebuilt Hive in my working copy of the SVN tree. However, it fails with ANT TEST and I could not figure out why.&lt;/p&gt;

&lt;p&gt;The code is ready for review. Also, any help to figure out why ANT TEST fails is appreciated.&lt;/p&gt;</comment>
                            <comment id="12903869" author="p_huyn" created="Sat, 28 Aug 2010 18:42:42 +0000"  >&lt;p&gt;Please review code.&lt;/p&gt;</comment>
                            <comment id="12904255" author="jvs" created="Mon, 30 Aug 2010 17:16:08 +0000"  >&lt;p&gt;Review comments added at&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://review.cloudera.org/r/746/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://review.cloudera.org/r/746/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think you uploaded the wrong .q.out since it doesn&apos;t match the .q&lt;/p&gt;

&lt;p&gt;For the test failures, it&apos;s probably because you didn&apos;t update show_functions.q.out.&lt;/p&gt;

&lt;p&gt;Also, for this and the previous functions you added, can you update this wiki page?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/LanguageManual/UDF#Built-in_Aggregate_Functions_.28UDAF.29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/LanguageManual/UDF#Built-in_Aggregate_Functions_.28UDAF.29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12904260" author="hbasereviewboard" created="Mon, 30 Aug 2010 17:25:33 +0000"  >&lt;p&gt;Message from: &quot;John Sichi&quot; &amp;lt;jsichi@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/746/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/746/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review by JVS&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1130&quot; title=&quot;Create argmin and argmax&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1130&quot;&gt;HIVE-1130&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1130&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/a&gt; 990399 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFArgMax.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFArgMax.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/queries/clientpositive/udaf_argmax.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/queries/clientpositive/udaf_argmax.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/udaf_argmax.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/udaf_argmax.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/746/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/746/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;

</comment>
                            <comment id="12904329" author="p_huyn" created="Mon, 30 Aug 2010 20:37:21 +0000"  >&lt;p&gt;Took care of all the items from code review.&lt;/p&gt;

&lt;p&gt;Of course, I will also provide argmin, but not until all problems with argmax are resolved.&lt;/p&gt;

&lt;p&gt;ANT TEST still fails. I am still puzzled since the udaf tested out fine with the recompiled hive but fails under ANT TEST. How are the 2 environments different?&lt;/p&gt;</comment>
                            <comment id="12904331" author="p_huyn" created="Mon, 30 Aug 2010 20:38:40 +0000"  >&lt;p&gt;See comment from previous message.&lt;/p&gt;</comment>
                            <comment id="12904361" author="jvs" created="Mon, 30 Aug 2010 21:50:22 +0000"  >&lt;p&gt;You&apos;ll need to dig into the logs to diagnose the problem.&lt;/p&gt;

&lt;p&gt;I noticed this in the end of the last .q.out you uploaded.&lt;/p&gt;

&lt;p&gt;+PREHOOK: Output: &lt;a href=&quot;file:/tmp/nhuyn/hive_2010-08-30_13-07-04_657_9209893909733875962/-mr-10000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/nhuyn/hive_2010-08-30_13-07-04_657_9209893909733875962/-mr-10000&lt;/a&gt;&lt;br/&gt;
+FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;Is that the failure you are getting when you run with ant test?&lt;/p&gt;

&lt;p&gt;If so, you can find more info in one of the exec logs, probably in /tmp/nhuyn.&lt;/p&gt;</comment>
                            <comment id="12904396" author="p_huyn" created="Mon, 30 Aug 2010 22:55:13 +0000"  >&lt;p&gt;Hi John,&lt;/p&gt;

&lt;p&gt;It appears that the call ObjectInspectorUtils.compare(myagg.max, xInputOI, px, xInputOI), which tries to compare 2 integer writables, failed in casting. Here is a fragment of the stack trace:&lt;/p&gt;
</comment>
                            <comment id="12904407" author="jvs" created="Mon, 30 Aug 2010 23:21:36 +0000"  >&lt;p&gt;(Did your stack trace get cut off?)&lt;/p&gt;</comment>
                            <comment id="12904650" author="p_huyn" created="Tue, 31 Aug 2010 15:07:14 +0000"  >&lt;p&gt;Not sure why the rest of my message was cut off. It is still in my sent mail. Here is the entire message:&lt;/p&gt;

&lt;p&gt;Hi John,&lt;/p&gt;

&lt;p&gt;It appears that the call ObjectInspectorUtils.compare(myagg.max, xInputOI, px, xInputOI), which tries to compare 2 integer writables, failed in casting. Here is a fragment of the stack trace:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
Caused by: java.lang.ClassCastException: org.apache.hadoop.io.IntWritable cannot be cast to org.apache.hadoop.hive.serde2.lazy.LazyPrimitive&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.lazy.objectinspector.primitive.AbstractPrimitiveLazyObjectInspector.getPrimitiveWritableObject(AbstractPrimitiveLazyObjectInspector.java:37)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.lazy.objectinspector.primitive.LazyIntObjectInspector.get(LazyIntObjectInspector.java:38)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.compare(ObjectInspectorUtils.java:497)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.udf.generic.GenericUDAFArgMax$GenericUDAFArgMaxEvaluator.internalMerge(GenericUDAFArgMax.java:165)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.udf.generic.GenericUDAFArgMax$GenericUDAFArgMaxEvaluator.iterate(GenericUDAFArgMax.java:142)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;Not sure why the casting fails. Both myagg.max and px were passed in as arguments of iterate(). Their data types are not known at compile time. That is the only reason why I use ObjectInspectorUtils.compare() to compare them. Do you see any problem with that?&lt;/p&gt;

&lt;p&gt;&amp;#8212; Pierre&lt;/p&gt;


</comment>
                            <comment id="12904762" author="jvs" created="Tue, 31 Aug 2010 20:32:08 +0000"  >&lt;p&gt;Comparing with GenericUDAFMax, I noticed that function uses different inputOI and outputOI, whereas you use a single xInputOI for both.&lt;/p&gt;

&lt;p&gt;      outputOI = ObjectInspectorUtils.getStandardObjectInspector(inputOI,&lt;br/&gt;
          ObjectInspectorCopyOption.JAVA);&lt;/p&gt;

&lt;p&gt;Maybe you need to follow that pattern?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12455225">HIVE-1128</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12453358" name="HIVE-1130.1.patch" size="13182" author="p_huyn" created="Sat, 28 Aug 2010 18:40:43 +0000"/>
                            <attachment id="12453459" name="HIVE-1130.2.patch" size="12236" author="p_huyn" created="Mon, 30 Aug 2010 20:37:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Aug 2010 18:40:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42616</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08n8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1131] Add column lineage information to the pre execution hooks</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1131</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We need a mechanism to pass the lineage information of the various columns of a table to a pre execution hook so that applications can use that for:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;auditing&lt;/li&gt;
	&lt;li&gt;dependency checking&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;and many other applications.&lt;/p&gt;

&lt;p&gt;The proposal is to expose this through a bunch of classes to the pre execution hook interface to the clients and put in the necessary transformation logic in the optimizer to generate this information.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455252">HIVE-1131</key>
            <summary>Add column lineage information to the pre execution hooks</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="athusoo">Ashish Thusoo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2010 00:45:51 +0000</created>
                <updated>Mon, 29 Jun 2015 16:05:05 +0000</updated>
                            <resolved>Tue, 6 Apr 2010 23:04:30 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="12829674" author="athusoo" created="Thu, 4 Feb 2010 18:05:38 +0000"  >&lt;p&gt;This is just the source patch. Will publish the test patch soon.&lt;/p&gt;</comment>
                            <comment id="12831303" author="zshao" created="Tue, 9 Feb 2010 05:43:15 +0000"  >&lt;p&gt;1. LineageInfo and related classes (that are used in PreExecutionHook/PostExecutionHook) need to implement Serializable so that we can serialize out the whole execution plan (including the hooks).&lt;/p&gt;</comment>
                            <comment id="12835487" author="rsm" created="Thu, 18 Feb 2010 23:24:05 +0000"  >&lt;p&gt;Went over code with Ashish. A few things: &lt;/p&gt;

&lt;p&gt;1. The hash&amp;lt;key1, hash&amp;lt;key2, value&amp;gt;&amp;gt; paradigm can be changed to hash&amp;lt;pair&amp;lt;key1,key2&amp;gt;, value&amp;gt;. That will reduce the amount of code needed. For example, there is no need for special iterator and item classes.&lt;br/&gt;
2. Code which records visits to nodes can be removed&lt;br/&gt;
3. PreOrderWalker.java does not have any change&lt;/p&gt;</comment>
                            <comment id="12836103" author="zshao" created="Sat, 20 Feb 2010 02:14:20 +0000"  >&lt;p&gt;S1. Can we make lineage partition-level instead of table-level?&lt;br/&gt;
S2. We might want to define formally the concepts of these levels, especially how they are composited (What will be UDAF of UDF, or UDF of UDAF, like round(sum(col)), or sum(round(col)))&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  /**
+   * Enum to track dependency. This &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; has two values:
+   * 1. SCALAR - Indicates that the column is derived from a scalar expression.
+   * 2. AGGREGATION - Indicates that the column is derived from an aggregation.
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; DependencyType {
+    SIMPLE, UDF, UDAF, UDTF, SCRIPT, SET
+  }
+  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;S3. Use &quot;{}&quot; even for single statement in &quot;if&quot;, &quot;for&quot; etc.&lt;br/&gt;
S4. Use &quot;ArrayList&quot; instead of &quot;Vector&quot; when it&apos;s accessed by a single thread.&lt;br/&gt;
S5. Remove &quot;private HashMap&amp;lt;FileSinkOperator, Table&amp;gt; fopToTable;&quot; since it&apos;s not used.&lt;/p&gt;</comment>
                            <comment id="12849620" author="athusoo" created="Thu, 25 Mar 2010 08:58:40 +0000"  >&lt;p&gt;Patch with all the review comments incorporated. This is just the source patch. Will be uploading the fixed tests shortly.&lt;/p&gt;</comment>
                            <comment id="12849624" author="athusoo" created="Thu, 25 Mar 2010 09:01:25 +0000"  >&lt;p&gt;Comment 3 from Raghu and comment S2-S4 from Zheng are not yet incorporated.&lt;/p&gt;

&lt;p&gt;The new patch overhauls things a bit to support Partition level lineage and does this in a post execute hook. It gets rid of the visits and the iterator classes. Will fix the other comments in the patch with the test cases.&lt;/p&gt;</comment>
                            <comment id="12849632" author="athusoo" created="Thu, 25 Mar 2010 09:38:09 +0000"  >&lt;p&gt;This fixes all the review comments. Will post the patch with tests separately.&lt;/p&gt;</comment>
                            <comment id="12849633" author="athusoo" created="Thu, 25 Mar 2010 09:39:21 +0000"  >&lt;p&gt;Also I did not find any instance of S3 in the code. Perhaps you just mentioned it for completeness but in case you do find an instance please let me know the offending file.&lt;/p&gt;</comment>
                            <comment id="12849845" author="athusoo" created="Thu, 25 Mar 2010 19:02:25 +0000"  >&lt;p&gt;This patch has all the tests updated as well.&lt;/p&gt;</comment>
                            <comment id="12851664" author="zshao" created="Wed, 31 Mar 2010 00:04:21 +0000"  >&lt;p&gt;&amp;gt; S1. Can we make lineage partition-level instead of table-level?&lt;br/&gt;
I don&apos;t see this implemented in the new patch. After looking at the code more, I&apos;d agree that this is too hard (and inefficient) to do, when the query has a range over a lot of partitions.&lt;/p&gt;

&lt;p&gt;&amp;gt; S3. Use &quot;{}&quot; even for single statement in &quot;if&quot;, &quot;for&quot; etc.&lt;br/&gt;
I cannot find any instances of these now.&lt;/p&gt;


&lt;p&gt;Still have some questions:&lt;br/&gt;
&amp;gt; S2. We might want to define formally the concepts of these levels, especially how they are composited (What will be UDAF of UDF, or UDF of UDAF, like round(sum(col)), or sum(round(col))) &lt;br/&gt;
LineageInfo.java: Can you add some comments on what DependencyType the nested dependencies like &quot;round(sum(col))&quot; or &quot;sum(round(col)))&quot; have?&lt;/p&gt;

&lt;p&gt;S6. The best place to store LineageInfo is probably in the QueryPlan instead of SessionState.  Otherwise the LineageInfo will be lost when we run a query that is compiled earlier. Thoughts?&lt;/p&gt;</comment>
                            <comment id="12851674" author="athusoo" created="Wed, 31 Mar 2010 00:36:40 +0000"  >&lt;p&gt;Look at the DataContainer class. That has a partition in it. And the Dependency has a mapping from Partition to the dependencies. Can you explain more your concerns on inefficiency?&lt;/p&gt;

&lt;p&gt;For S6 actually the queryplan is the wrong place to store the lineageinfo. Because of the dynamic partitioning work that Ning is doing, I have to generate the partition to dependency mapping at run time. So I would rather store it in a run time structure as opposed to a compile time structure. SessionState fits that bill, though I think we should have another structure called ExecutionCtx for this. But otherwise I think we want to store this in a runtime structure.&lt;/p&gt;

&lt;p&gt;S2 will add some more comments.&lt;/p&gt;</comment>
                            <comment id="12851718" author="zshao" created="Wed, 31 Mar 2010 04:13:58 +0000"  >&lt;p&gt;&amp;gt; Look at the DataContainer class. That has a partition in it. And the Dependency has a mapping from Partition to the dependencies. Can you explain more your concerns on inefficiency?&lt;/p&gt;

&lt;p&gt;I see. So the DataContainer captures the output partition information, but we don&apos;t have input partition information (BaseColumnInfo/TableAliasInfo). This is reasonable since the input can be lots of partitions.&lt;/p&gt;

&lt;p&gt;&amp;gt; For S6 actually the queryplan is the wrong place to store the lineageinfo. Because of the dynamic partitioning work that Ning is doing, I have to generate the partition to dependency mapping at run time. So I would rather store it in a run time structure as opposed to a compile time structure. SessionState fits that bill, though I think we should have another structure called ExecutionCtx for this. But otherwise I think we want to store this in a runtime structure.&lt;/p&gt;

&lt;p&gt;+1 on the ExecutionCtx idea. SessionState is at the session level, and LineageInfo is at the query level. It will be great to put LineageInfo into ExecutionCtx.&lt;/p&gt;</comment>
                            <comment id="12852013" author="athusoo" created="Wed, 31 Mar 2010 18:16:52 +0000"  >&lt;p&gt;I looked at the ExecutionCtx stuff. There are atleast 3 different unrelated fields in SessionState that we should also move to the ExecutionCtx. I will file a follow up JIRA for it but I think we should get this one in. I did see some test failures due to using HashMaps and the consequent change in ordering after I refreshed. Will fix that and upload a new patch.&lt;/p&gt;</comment>
                            <comment id="12852148" author="athusoo" created="Wed, 31 Mar 2010 22:38:45 +0000"  >&lt;p&gt;Added a more centralized function to decide what is the dependency type. Also reduced the number of dependency types to SIMPLE, EXPRESSION and SELECT. SIMPLE = a copy of the column, EXPRESSION = UDF, UDAF, UDTF or union all, SCRIPT = if a user script is used.&lt;/p&gt;

&lt;p&gt;Also fixed the HashMap to LinkedHashMap..&lt;/p&gt;</comment>
                            <comment id="12852200" author="zshao" created="Thu, 1 Apr 2010 00:47:57 +0000"  >&lt;p&gt;The following tests failed. Mostly because the order of Can you take a look?&lt;br/&gt;
Also, it will be great to get rid of the &quot;null&quot; after EXPRESSION in the following example.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groupby11.q
groupby7_map_skew.q
input13.q
script_pipe.q
groupby9.q
multi_insert.q
union17.q

example:
    [junit] diff -a -I file: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I owner -I transient_lastDdlTime\
 -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I [.][.][.] [0-9]* more /data/users/\
zshao/hadoop_hive_trunk/.ptest_1/build/ql/test/logs/clientpositive/groupby9.q.out /data/users/zshao/hadoop_hive_trunk/.ptest_\
1/ql/src/test/results/clientpositive/groupby9.q.out
    [junit] 238,239d237
    [junit] &amp;lt; POSTHOOK: Lineage: dest1.key EXPRESSION &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;[(src)src.FieldSchema(name:key, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), ]
    [junit] &amp;lt; POSTHOOK: Lineage: dest1.value EXPRESSION &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;[(src)src.FieldSchema(name:value, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), \
]
    [junit] 242a241,242
    [junit] &amp;gt; POSTHOOK: Lineage: dest1.key EXPRESSION &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;[(src)src.FieldSchema(name:key, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), ]
    [junit] &amp;gt; POSTHOOK: Lineage: dest1.value EXPRESSION &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;[(src)src.FieldSchema(name:value, type:string, comment:&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), \
]

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12852738" author="athusoo" created="Fri, 2 Apr 2010 07:07:26 +0000"  >&lt;p&gt;With fixes to tests and with null dropped.&lt;/p&gt;</comment>
                            <comment id="12852995" author="athusoo" created="Fri, 2 Apr 2010 23:23:17 +0000"  >&lt;p&gt;Another patch which fixes the QueryPlan to have LinkedHashMaps as that was also creating instability in the tests.&lt;/p&gt;</comment>
                            <comment id="12852997" author="athusoo" created="Fri, 2 Apr 2010 23:24:26 +0000"  >&lt;p&gt;submitting.&lt;/p&gt;</comment>
                            <comment id="12853323" author="zshao" created="Mon, 5 Apr 2010 06:57:26 +0000"  >&lt;p&gt;Still seeing test failures from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1131&quot; title=&quot;Add column lineage information to the pre execution hooks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1131&quot;&gt;&lt;del&gt;HIVE-1131&lt;/del&gt;&lt;/a&gt;_7.patch&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;.ptest_0/test.17.2.1.log:    [junit] Begin query: groupby8.q
.ptest_0/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
.ptest_1/test.17.2.1.log:    [junit] Begin query: groupby8_map_skew.q
.ptest_1/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
.ptest_1/test.17.2.1.log:    [junit] Begin query: multi_insert.q
.ptest_1/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
.ptest_1/test.17.2.1.log:    [junit] Begin query: reduce_deduplicate.q
.ptest_1/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
.ptest_1/test.17.2.1.log:    [junit] Begin query: union18.q
.ptest_1/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
.ptest_2/test.17.2.1.log:    [junit] Begin query: groupby7.q
.ptest_2/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
.ptest_2/test.17.2.1.log:    [junit] Begin query: groupby8_noskew.q
.ptest_2/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
.ptest_2/test.17.2.1.log:    [junit] Begin query: input12.q
.ptest_2/test.17.2.1.log:    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12853689" author="athusoo" created="Tue, 6 Apr 2010 01:48:23 +0000"  >&lt;p&gt;Another one with test fixes.&lt;/p&gt;</comment>
                            <comment id="12854157" author="namit" created="Tue, 6 Apr 2010 20:25:07 +0000"  >&lt;p&gt;uploaded a new patch with updated test results&lt;/p&gt;</comment>
                            <comment id="12854158" author="namit" created="Tue, 6 Apr 2010 20:25:31 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good, running tests again, will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12854241" author="namit" created="Tue, 6 Apr 2010 23:04:29 +0000"  >&lt;p&gt;Committed. Thanks Ashish&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12841370">HIVE-11139</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434845" name="HIVE-1131.patch" size="94575" author="athusoo" created="Thu, 4 Feb 2010 18:05:38 +0000"/>
                            <attachment id="12439761" name="HIVE-1131_2.patch" size="89150" author="athusoo" created="Thu, 25 Mar 2010 08:58:40 +0000"/>
                            <attachment id="12439762" name="HIVE-1131_3.patch" size="89193" author="athusoo" created="Thu, 25 Mar 2010 09:38:09 +0000"/>
                            <attachment id="12439809" name="HIVE-1131_4.patch" size="2230056" author="athusoo" created="Thu, 25 Mar 2010 19:02:25 +0000"/>
                            <attachment id="12440411" name="HIVE-1131_5.patch" size="2307536" author="athusoo" created="Wed, 31 Mar 2010 22:38:45 +0000"/>
                            <attachment id="12440588" name="HIVE-1131_6.patch" size="2278623" author="athusoo" created="Fri, 2 Apr 2010 07:07:26 +0000"/>
                            <attachment id="12440657" name="HIVE-1131_7.patch" size="2281816" author="athusoo" created="Fri, 2 Apr 2010 23:23:17 +0000"/>
                            <attachment id="12440824" name="HIVE-1131_8.patch" size="2282269" author="athusoo" created="Tue, 6 Apr 2010 01:48:23 +0000"/>
                            <attachment id="12440947" name="hive.1131.9.patch" size="2261218" author="namit" created="Tue, 6 Apr 2010 20:25:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Feb 2010 05:43:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122847</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This changes the signature of PostExecute.java</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1132] Add metastore API method to get partition by name</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1132</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, get_partition_names returns the partition names in an escaped form  ie &apos;ds=2010-02-03/ts=2010-02-03 18%3A49%3A26/offset=0-3184760670135/instance=nfs/host=nfs&apos;. In this case, the colons have been replaced by %3A. The escaped form is necessary because the partition column values could contain symbols such as &apos;=&apos; or &apos;/&apos; that would interfere with parsing or have some other unwanted effects. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-883&quot; title=&quot;URISyntaxException when partition value contains special chars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-883&quot;&gt;&lt;del&gt;HIVE-883&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, there is no way to directly retrieve the partition using the escaped name because get_partition accepts a List&amp;lt;String&amp;gt; that requires the partition column values to be in their original unescaped form. So the proposal is to add get_partition_by_name() that directly accepts the partition name in the escaped form.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455356">HIVE-1132</key>
            <summary>Add metastore API method to get partition by name</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2010 21:33:03 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:32 +0000</updated>
                            <resolved>Fri, 5 Feb 2010 03:20:10 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12829921" author="zshao" created="Fri, 5 Feb 2010 02:29:27 +0000"  >&lt;p&gt;+1. Will test and commit.&lt;/p&gt;</comment>
                            <comment id="12829936" author="zshao" created="Fri, 5 Feb 2010 03:20:10 +0000"  >&lt;p&gt;Committed. Thanks Paul!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12455955">HIVE-1152</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434911" name="HIVE-1132.1.patch" size="76139" author="pauly" created="Fri, 5 Feb 2010 01:05:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Feb 2010 02:29:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1133] Refactor InputFormat and OutputFormat for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1133</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently we ran into several problems of the FileInputFormat/OutputFormat in Hive.&lt;/p&gt;

&lt;p&gt;The requirements are:&lt;br/&gt;
R1. We want to support HBase: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-806&quot; title=&quot;Hive with HBase as data store to support MapReduce and direct query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-806&quot;&gt;&lt;del&gt;HIVE-806&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
R2. We want to selectively include files based on file names: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-951&quot; title=&quot;Selectively include EXTERNAL TABLE source files via REGEX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-951&quot;&gt;HIVE-951&lt;/a&gt;&lt;br/&gt;
R3. We want to optionally choose to recurse on the directory structure: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1083&quot; title=&quot;allow sub-directories for an external table/partition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1083&quot;&gt;HIVE-1083&lt;/a&gt;&lt;br/&gt;
R4. We want to pass the filter condition into the storage (very useful for HBase, and indexed data format)&lt;br/&gt;
R5. We want to pass the column selection information into the storage (already done as part of the RCFile, but we can do it better)&lt;/p&gt;

&lt;p&gt;We need to structure these requirements and the code structure in a good way to make it extensible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455384">HIVE-1133</key>
            <summary>Refactor InputFormat and OutputFormat for Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2010 05:38:06 +0000</created>
                <updated>Mon, 8 Sep 2014 20:31:10 +0000</updated>
                                                                            <component>HBase Handler</component>
                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="12829965" author="zshao" created="Fri, 5 Feb 2010 05:43:13 +0000"  >&lt;p&gt;Functions related to this refactoring:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ExecDriver.addInputPaths
HiveInputFormat.getSplits
CombineHiveInputFormat.getSplits
ExecMap.configure
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12829975" author="bennies" created="Fri, 5 Feb 2010 06:28:11 +0000"  >&lt;p&gt;This could conflict with some changes I made for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1019&quot; title=&quot;java.io.FileNotFoundException: HIVE_PLAN (No such file or directory)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1019&quot;&gt;&lt;del&gt;HIVE-1019&lt;/del&gt;&lt;/a&gt;. A patch is available for that one.&lt;/p&gt;</comment>
                            <comment id="12829977" author="zshao" created="Fri, 5 Feb 2010 06:40:33 +0000"  >&lt;p&gt;Thanks for the note, Bennie. In the future, please assign it to yourself click &quot;submit patch&quot; so that we know it&apos;s ready for review (we will &quot;cancel patch&quot; if we have comments).&lt;/p&gt;
</comment>
                            <comment id="12830214" author="nzhang" created="Fri, 5 Feb 2010 18:25:10 +0000"  >&lt;p&gt;R4 (pushing down simple predicates) is also useful for RCFile or any FileFormat internal to Hive since we can implement a faster &quot;search-based&quot; HiveRecordReader that takes a set of predicates and only returns satisfying records. &lt;/p&gt;</comment>
                            <comment id="12830280" author="namit" created="Fri, 5 Feb 2010 20:33:29 +0000"  >&lt;p&gt;R4. We can even exploit the sorted characteristics of the data.We know that  a table is sorted/bucketed,&lt;br/&gt;
but never make use of it.&lt;/p&gt;</comment>
                            <comment id="12831054" author="he yongqiang" created="Mon, 8 Feb 2010 19:10:03 +0000"  >&lt;p&gt;Add another possible requirement:&lt;br/&gt;
add support for Zebra&apos;s file format.&lt;/p&gt;</comment>
                            <comment id="14126045" author="joelbondurant" created="Mon, 8 Sep 2014 20:31:10 +0000"  >&lt;p&gt;A workaround for S3 is to port all Hive code to Pig.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12434341">HIVE-806</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12441541">HIVE-951</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12446279">HIVE-1083</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458710">HIVE-1222</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458718">HIVE-1226</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12431664">HIVE-705</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12614547">HIVE-3660</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Feb 2010 06:28:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0150v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4583</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1134] bucketing mapjoin where the big table contains more than 1 big partition</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1134</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12455462">HIVE-1134</key>
            <summary>bucketing mapjoin where the big table contains more than 1 big partition</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                            <label>Bucketing</label>
                    </labels>
                <created>Fri, 5 Feb 2010 17:11:48 +0000</created>
                <updated>Thu, 21 Jun 2012 21:52:54 +0000</updated>
                            <resolved>Sat, 20 Feb 2010 22:46:48 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12834446" author="namit" created="Tue, 16 Feb 2010 20:35:27 +0000"  >&lt;p&gt;Some pending work from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-917&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-917&lt;/a&gt; - you can do that in separate jira if you want to.&lt;/p&gt;

&lt;p&gt;1. Add the mapping in explain plan so that it can be compared - look at&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-976&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-976&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2. Add a negative test - the number of buckets in the 2 tables are not exact multiples of each other. &lt;br/&gt;
    I mean, bucketed map join will not be used.&lt;/p&gt;

&lt;p&gt;3. Instead of checking at runtime, set the defultbucketmatcher in the plan and initialize it using reflection&lt;/p&gt;</comment>
                            <comment id="12835107" author="he yongqiang" created="Thu, 18 Feb 2010 03:31:07 +0000"  >&lt;p&gt;The attached patch also fixed a bug in Hive-917 &apos;s patch&lt;/p&gt;

&lt;p&gt;Should use MOD instead of Div&lt;br/&gt;
// if the big table has more buckets than the current small table,&lt;br/&gt;
// use &quot;MOD&quot; to get small table bucket names. For example, if the big&lt;br/&gt;
// table has 4 buckets and the small table has 2 buckets, then the&lt;br/&gt;
// mapping should be 0-&amp;gt;0, 1-&amp;gt;1, 2-&amp;gt;0, 3-&amp;gt;1.&lt;/p&gt;</comment>
                            <comment id="12835568" author="he yongqiang" created="Fri, 19 Feb 2010 03:42:08 +0000"  >&lt;p&gt;Fixed some diff. Thanks Namit.&lt;/p&gt;</comment>
                            <comment id="12835898" author="namit" created="Fri, 19 Feb 2010 19:21:09 +0000"  >&lt;p&gt;Few minor comments:&lt;/p&gt;

&lt;p&gt;1. CheckStyle - lot of code needs { }&lt;/p&gt;

&lt;p&gt;For eg:&lt;/p&gt;

&lt;p&gt; if (!checkBucketNumberAgainstBigTable(aliasToBucketNumberMapping, 	&lt;br/&gt;
	bucketNumberInPart)) 	 &lt;br/&gt;
   return null;&lt;/p&gt;

&lt;p&gt;2. Modify existing tests to run the test without the hint and then compare the results.&lt;/p&gt;

&lt;p&gt;3. Cleanup GenMapredUtils.setupBucketMapJoinInfo&lt;/p&gt;</comment>
                            <comment id="12835958" author="he yongqiang" created="Fri, 19 Feb 2010 21:27:45 +0000"  >&lt;p&gt;Integrated Namit&apos;s comments. Thanks Namit.&lt;/p&gt;</comment>
                            <comment id="12836212" author="namit" created="Sat, 20 Feb 2010 17:58:00 +0000"  >&lt;p&gt;The changes look good - but there is a problem with the test.&lt;br/&gt;
I did not debug, but it seems that you are not deleting the&lt;br/&gt;
table bucketmapjoin_has_result1 and 2 in some test  - because&lt;br/&gt;
of which the tests input2/3 are failing intermittently (depending on the&lt;br/&gt;
order of tests).&lt;/p&gt;

&lt;p&gt;Can you update the tests ?&lt;/p&gt;</comment>
                            <comment id="12836223" author="he yongqiang" created="Sat, 20 Feb 2010 18:19:58 +0000"  >&lt;p&gt;Thanks Namit.  Updated the patch.&lt;/p&gt;</comment>
                            <comment id="12836276" author="namit" created="Sat, 20 Feb 2010 22:46:48 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12440069">HIVE-917</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12436170" name="hive-1134-2010-02-17.patch" size="216212" author="he yongqiang" created="Thu, 18 Feb 2010 03:31:07 +0000"/>
                            <attachment id="12436281" name="hive-1134-2010-02-18.patch" size="316203" author="he yongqiang" created="Fri, 19 Feb 2010 03:42:08 +0000"/>
                            <attachment id="12436375" name="hive-1134-2010-02-19.patch" size="310715" author="he yongqiang" created="Fri, 19 Feb 2010 21:27:44 +0000"/>
                            <attachment id="12436448" name="hive-1134-2010-02-20.patch" size="311239" author="he yongqiang" created="Sat, 20 Feb 2010 18:19:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Feb 2010 03:31:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73078</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1135] Use Anakia for version controlled documentation</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1135</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently the Hive Language Manual and many other critical pieces of documentation are on the Hive wiki. &lt;/p&gt;

&lt;p&gt;Right now we count on the author of a patch to follow up and add wiki entries. While we do a decent job with this, new features can be missed. Or using running older/newer branches can not locate relevant documentation for their branch. &lt;br/&gt;
..example of a perception I do not think we want to give off...&lt;br/&gt;
&lt;a href=&quot;http://dev.hubspot.com/bid/30170/Who-Loves-the-Magic-Undocumented-Hive-Mapjoin-This-Guy&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.hubspot.com/bid/30170/Who-Loves-the-Magic-Undocumented-Hive-Mapjoin-This-Guy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We should generate our documentation in the way hadoop &amp;amp; hbase does, inline using forest. I would like to take the lead on this, but we need a lot of consensus on doing this properly. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12455465">HIVE-1135</key>
            <summary>Use Anakia for version controlled documentation</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2010 17:38:51 +0000</created>
                <updated>Tue, 22 May 2012 22:08:27 +0000</updated>
                            <resolved>Thu, 1 Jul 2010 01:24:08 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12830423" author="hammer" created="Sat, 6 Feb 2010 02:01:24 +0000"  >&lt;p&gt;I&apos;d suggest using something other than forrest for the official documentation. See &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-319&lt;/a&gt; for some suggested replacements.&lt;/p&gt;</comment>
                            <comment id="12830428" author="appodictic" created="Sat, 6 Feb 2010 02:16:11 +0000"  >&lt;p&gt;Jeff,&lt;/p&gt;

&lt;p&gt;I only knew the other projects used forest. Anakin sounds good just because it is an apache project. I do not have any experience with any of these. I was more focused on having documentation to match the branches. &lt;/p&gt;</comment>
                            <comment id="12877825" author="appodictic" created="Fri, 11 Jun 2010 14:47:55 +0000"  >&lt;p&gt;Patch, docs command beings anakia from xdocs directory.&lt;/p&gt;</comment>
                            <comment id="12878629" author="appodictic" created="Mon, 14 Jun 2010 16:19:11 +0000"  >&lt;p&gt;Edited the build.xml a bit to deal with some incorrect paths. Also added the HiveDataDefinitionStatements wiki page for reference. Is everyone ok with using anakia and this structure. I would like to get this cleaned up with the current docs in place. Then I will do some follow up tickets and add some wiki pages, let me know if everyone is happy with the overall xdocs-&amp;gt;docs process.&lt;/p&gt;</comment>
                            <comment id="12878759" author="hbasereviewboard" created="Mon, 14 Jun 2010 21:46:49 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/178/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Submitted on behalf of Ed Capriolo.&lt;/p&gt;


&lt;p&gt;This addresses bug hive-1135.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/hive-1135&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/hive-1135&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/build.xml 953531 &lt;br/&gt;
  trunk/hwi/web/set_processor.jsp 953531 &lt;br/&gt;
  trunk/xdocs/docs/glossary.xml PRE-CREATION &lt;br/&gt;
  trunk/xdocs/docs/index.xml PRE-CREATION &lt;br/&gt;
  trunk/xdocs/docs/language_manual/data-manipulation-statements.xml PRE-CREATION &lt;br/&gt;
  trunk/xdocs/docs/language_manual/working_with_bucketed_tables.xml PRE-CREATION &lt;br/&gt;
  trunk/xdocs/docs/user/hwi.xml PRE-CREATION &lt;br/&gt;
  trunk/xdocs/site.css PRE-CREATION &lt;br/&gt;
  trunk/xdocs/stylesheets/project.xml PRE-CREATION &lt;br/&gt;
  trunk/xdocs/stylesheets/site.vsl PRE-CREATION &lt;br/&gt;
  trunk/xdocs/velocity.properties PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/178/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12878779" author="hbasereviewboard" created="Mon, 14 Jun 2010 22:29:17 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/178/#review217&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#review217&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Looks good overall.&lt;/p&gt;

&lt;p&gt;A couple suggestions:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Stash this stuff under docs/ instead of creating another top level directory (xdocs/)&lt;/li&gt;
	&lt;li&gt;Manage the jdom dependency with Ivy.&lt;/li&gt;
	&lt;li&gt;Limit the initial import to the convents of the Hive Language Manual. I think some things should actually stay on the wiki, but the language manual is definitely one of those things that we want to have in VCS.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;trunk/build.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/178/#comment982&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#comment982&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I think it would be good to use the full name (&quot;anakia&quot;) instead of abbreviating it as &quot;an&quot;.&lt;/p&gt;



&lt;p&gt;trunk/build.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/178/#comment985&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#comment985&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please add a description so that this shows up in the output of &apos;ant -p&apos;&lt;/p&gt;



&lt;p&gt;trunk/build.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/178/#comment986&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#comment986&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Can we rename this &quot;check-for-anakia&quot; and remove the &quot;prepare-error&quot; target, i.e. something similar to the way the checkstyle check is currently done?&lt;/p&gt;



&lt;p&gt;trunk/hwi/web/set_processor.jsp&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/178/#comment987&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#comment987&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Did you mean to include this in the patch?&lt;/p&gt;



&lt;p&gt;trunk/xdocs/docs/glossary.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/178/#comment988&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#comment988&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This email address looks bogus. Perhaps this should be hive-dev@hadoop.apache.org? Or else leave it out entirely?&lt;/p&gt;

&lt;p&gt;    Is the author property something that we can define in velocity.properties?&lt;/p&gt;



&lt;p&gt;trunk/xdocs/stylesheets/project.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/178/#comment993&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#comment993&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Let&apos;s try to stick with consistent indentation (2 characters).&lt;/p&gt;



&lt;p&gt;trunk/xdocs/stylesheets/site.vsl&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/178/#comment995&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#comment995&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    ASF header repeated twice.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12878792" author="hbasereviewboard" created="Mon, 14 Jun 2010 23:17:40 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-06-14 15:26:25, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Looks good overall.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; A couple suggestions:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; * Stash this stuff under docs/ instead of creating another top level directory (xdocs/)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; * Manage the jdom dependency with Ivy.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; * Limit the initial import to the convents of the Hive Language Manual. I think some things should actually stay on the wiki, but the language manual is definitely one of those things that we want to have in VCS.&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul&gt;
	&lt;li&gt;Running the docs target causes a &apos;velocity.log&apos; file to appear in the source root directory. This should probably be redirected to build/dist/docs. See &lt;a href=&quot;http://velocity.apache.org/engine/releases/velocity-1.4/developer-guide.html#Velocity&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://velocity.apache.org/engine/releases/velocity-1.4/developer-guide.html#Velocity&lt;/a&gt; Configuration Keys and Values&lt;/li&gt;
&lt;/ul&gt;



&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/178/#review217&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/#review217&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


</comment>
                            <comment id="12878816" author="appodictic" created="Tue, 15 Jun 2010 00:54:49 +0000"  >&lt;p&gt;FMI. What is the hbase review board? &lt;/p&gt;

&lt;p&gt;&amp;gt; Stash this stuff under docs/ instead of creating another top level directory (xdocs/)&lt;br/&gt;
It seems like xdocs is convention, also did not want to step on whatever is in docs. I will see if they both can live in docs happily.&lt;/p&gt;

&lt;p&gt;&amp;gt;JDOM ivy. &lt;/p&gt;

&lt;p&gt;Right now most/all the stuff in /lib comes from ivy. We should open up a another ticket and convert the entire project to ivy.&lt;/p&gt;

&lt;p&gt;&amp;gt;velocity.log&lt;br/&gt;
Yes my local version (next patch already fixes that)&lt;/p&gt;

&lt;p&gt;&amp;gt; * Limit the initial import to the convents of the Hive Language Manual. I think some things should actually stay on the wiki, but the language manual is definitely one of those things that we want to have in VCS.&lt;/p&gt;

&lt;p&gt;I agree the initial import should come from the Hive Language Manual only. To me wiki just screems, &quot;I did not have time to write a full complete doc.&quot; Generalization coming: 99% of the things in the wiki should be in xdocs. Users only want one place for authoritative information. Wikis and xdoc will fall out of sync, confusion follows.&lt;/p&gt;</comment>
                            <comment id="12878818" author="appodictic" created="Tue, 15 Jun 2010 00:59:46 +0000"  >&lt;p&gt;&amp;gt;JDOM ivy.&lt;/p&gt;

&lt;p&gt;Right now most/all the stuff in /lib DOES NOT comes from ivy. We should open up a another ticket and convert the entire project to ivy.&lt;/p&gt;</comment>
                            <comment id="12879238" author="appodictic" created="Wed, 16 Jun 2010 03:40:58 +0000"  >&lt;p&gt;Fixed all items.&lt;/p&gt;</comment>
                            <comment id="12879586" author="hbasereviewboard" created="Wed, 16 Jun 2010 23:55:30 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/178/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-06-16 16:51:58.636162)&lt;/p&gt;


&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated diff.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Submitted on behalf of Ed Capriolo.&lt;/p&gt;


&lt;p&gt;This addresses bug hive-1135.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/hive-1135&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/hive-1135&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/build.xml 955109 &lt;br/&gt;
  trunk/docs/docs/index.xml PRE-CREATION &lt;br/&gt;
  trunk/docs/docs/language_manual/data-manipulation-statements.xml PRE-CREATION &lt;br/&gt;
  trunk/docs/docs/language_manual/working_with_bucketed_tables.xml PRE-CREATION &lt;br/&gt;
  trunk/docs/site.css PRE-CREATION &lt;br/&gt;
  trunk/docs/stylesheets/project.xml PRE-CREATION &lt;br/&gt;
  trunk/docs/stylesheets/site.vsl PRE-CREATION &lt;br/&gt;
  trunk/docs/velocity.properties PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/178/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/178/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12879601" author="cwsteinbach" created="Thu, 17 Jun 2010 00:52:37 +0000"  >&lt;ul&gt;
	&lt;li&gt;Fixed broken image links in the stylesheet.&lt;/li&gt;
	&lt;li&gt;Moved docs/docs/ to docs/xdocs/&lt;/li&gt;
	&lt;li&gt;Added description to ant &apos;docs&apos; target.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12879603" author="cwsteinbach" created="Thu, 17 Jun 2010 00:55:09 +0000"  >&lt;p&gt;I&apos;m +1 on committing this (either Ed&apos;s last patch, or the one I just added that contains three very small tweaks).&lt;/p&gt;</comment>
                            <comment id="12879650" author="appodictic" created="Thu, 17 Jun 2010 03:31:53 +0000"  >&lt;p&gt;Cool on adding the logo....But something went wrong here. Unless I applied the patch from the left table looks wrong now. check the screen shot.&lt;/p&gt;</comment>
                            <comment id="12880051" author="appodictic" created="Fri, 18 Jun 2010 02:19:11 +0000"  >&lt;p&gt;Added the join page as well.&lt;/p&gt;</comment>
                            <comment id="12880295" author="cwsteinbach" created="Fri, 18 Jun 2010 19:31:42 +0000"  >&lt;p&gt;hive-1136-6-patch.txt:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Use Ivy to manage jdom dependency for docs target.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12880297" author="cwsteinbach" created="Fri, 18 Jun 2010 19:38:36 +0000"  >&lt;p&gt;@Ed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I updated the patch to use Ivy for managing the JDOM dependency.&lt;/li&gt;
	&lt;li&gt;I&apos;m not sure how to fix the image alignment issue. Let&apos;s defer worrying about this for a followup ticket.&lt;/li&gt;
	&lt;li&gt;I will file a followup ticket that covers migrating the wiki docs over to version control. We need to do this in a consistent fashion in order to avoid missing any updates to the wiki that people make in the meantime. We also need to figure out how to push the generated docs to the website.&lt;/li&gt;
	&lt;li&gt;I&apos;m +1 for committing this patch. Can you take care of that?&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12880303" author="appodictic" created="Fri, 18 Jun 2010 19:58:22 +0000"  >&lt;p&gt;Great on ivy. &lt;br/&gt;
As for the wiki I think we should just put a node at the top of the page that says &quot;Do not edit me. Edit xdocs instead.&quot; For the pages we have migrated. I want to do like a page every other day so it should be done soon enough. I actually have commit access but I usually leave the commits up to the experts. Also since I worked on this ticket I really should not be the commit person. Anyone else?&lt;/p&gt;</comment>
                            <comment id="12882349" author="appodictic" created="Thu, 24 Jun 2010 21:53:59 +0000"  >&lt;p&gt;Bump:: I will fix the formatting later. Can we commit this we do not really need any unit tests here?&lt;/p&gt;</comment>
                            <comment id="12882447" author="jvs" created="Fri, 25 Jun 2010 05:12:08 +0000"  >&lt;p&gt;I should be able to get to this one early next week.&lt;/p&gt;</comment>
                            <comment id="12883376" author="jvs" created="Tue, 29 Jun 2010 01:07:13 +0000"  >&lt;p&gt;Just a note:  when supplying patches (whether from svn or git), make sure they can be applied with&lt;/p&gt;

&lt;p&gt;patch -p0 &amp;lt; hive-1135.?.patch&lt;/p&gt;

&lt;p&gt;For this one, I had to use patch -p1.&lt;/p&gt;</comment>
                            <comment id="12883380" author="jvs" created="Tue, 29 Jun 2010 01:41:56 +0000"  >&lt;p&gt;+1.  Will commit if tests pass (I can&apos;t think why they wouldn&apos;t but hey).&lt;/p&gt;</comment>
                            <comment id="12884117" author="jvs" created="Thu, 1 Jul 2010 01:24:07 +0000"  >&lt;p&gt;Committed.  Thanks Edward!&lt;/p&gt;

&lt;p&gt;Carl, could you open another JIRA issue for getting all the relevant docs moved from wiki to Anakia as part of 0.6 release, and also send out coordinating instructions on the mailing list so that people know about the change?&lt;/p&gt;</comment>
                            <comment id="12884141" author="appodictic" created="Thu, 1 Jul 2010 02:43:02 +0000"  >&lt;p&gt;Carl, thank you for the assist!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12445428">AVRO-319</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12468317">HIVE-1446</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12556471">HIVE-3039</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12447201" name="hive-1135-3-patch.txt" size="37122" author="appodictic" created="Wed, 16 Jun 2010 03:40:58 +0000"/>
                            <attachment id="12447297" name="hive-1135-4-patch.txt" size="37229" author="cwsteinbach" created="Thu, 17 Jun 2010 00:52:37 +0000"/>
                            <attachment id="12447422" name="hive-1135-5-patch.txt" size="48515" author="appodictic" created="Fri, 18 Jun 2010 02:19:11 +0000"/>
                            <attachment id="12447488" name="hive-1135-6-patch.txt" size="50161" author="cwsteinbach" created="Fri, 18 Jun 2010 19:31:42 +0000"/>
                            <attachment id="12446870" name="hive-1335-1.patch.txt" size="3944" author="appodictic" created="Fri, 11 Jun 2010 14:47:54 +0000"/>
                            <attachment id="12447038" name="hive-1335-2.patch.txt" size="41529" author="appodictic" created="Mon, 14 Jun 2010 16:19:11 +0000"/>
                            <attachment id="12447202" name="jdom-1.1.LICENSE" size="2564" author="appodictic" created="Wed, 16 Jun 2010 03:43:30 +0000"/>
                            <attachment id="12446865" name="jdom-1.1.jar" size="154078" author="appodictic" created="Fri, 11 Jun 2010 14:31:05 +0000"/>
                            <attachment id="12447308" name="wtf.png" size="117841" author="appodictic" created="Thu, 17 Jun 2010 03:31:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 Feb 2010 02:01:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1136] Add type-checking setters for HiveConf class to match existing getters</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1136</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is a followup from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1129&quot; title=&quot;Fix Assertion in ExecDriver.execute when assertions are enabled in HADOOP_OPTS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1129&quot;&gt;&lt;del&gt;HIVE-1129&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455513">HIVE-1136</key>
            <summary>Add type-checking setters for HiveConf class to match existing getters</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Feb 2010 01:03:00 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:31 +0000</updated>
                            <resolved>Wed, 17 Feb 2010 22:06:02 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12833220" author="jvs" created="Fri, 12 Feb 2010 22:51:20 +0000"  >&lt;p&gt;Finally uploaded the right patch.&lt;/p&gt;</comment>
                            <comment id="12834480" author="jvs" created="Tue, 16 Feb 2010 21:26:43 +0000"  >&lt;p&gt;This passed tests so I&apos;m submitting it as ready.&lt;/p&gt;</comment>
                            <comment id="12834482" author="zshao" created="Tue, 16 Feb 2010 21:31:04 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Will test and commit.&lt;/p&gt;</comment>
                            <comment id="12834526" author="zshao" created="Tue, 16 Feb 2010 22:36:41 +0000"  >&lt;p&gt;It seems that the following function is not in hadoop 0.17.&lt;br/&gt;
What about convert it to a string first? (and put a comment saying we did this for compatibility for hadoop 0.17)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:303: cannot find symbol
    [javac] symbol  : method setFloat(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;)
    [javac] location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.hadoop.conf.Configuration
    [javac]     conf.setFloat(&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;.varname, val);
    [javac]         ^
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12834562" author="jvs" created="Wed, 17 Feb 2010 00:16:22 +0000"  >&lt;p&gt;Per discussion with Zheng, added a new shim method to deal with the incompabitibility.&lt;/p&gt;</comment>
                            <comment id="12834630" author="zshao" created="Wed, 17 Feb 2010 03:57:03 +0000"  >&lt;p&gt;+1. Will test and commit.&lt;/p&gt;</comment>
                            <comment id="12835017" author="zshao" created="Wed, 17 Feb 2010 22:06:02 +0000"  >&lt;p&gt;Committed. Thanks John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435741" name="HIVE-1136.1.patch" size="4443" author="jvs" created="Fri, 12 Feb 2010 22:51:20 +0000"/>
                            <attachment id="12436062" name="HIVE-1136.2.patch" size="7679" author="jvs" created="Wed, 17 Feb 2010 00:14:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Feb 2010 21:31:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1137] Fix build.xml for references to IVY_HOME</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1137</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The build references env.IVY_HOME, but doesn&apos;t actually import env as it should (via &amp;lt;property environment=&quot;env&quot;/&amp;gt;).&lt;/p&gt;

&lt;p&gt;It&apos;s not clear what the IVY_HOME reference is for since the build doesn&apos;t even use ivy.home (instead, it installs under the build/ivy directory).&lt;/p&gt;

&lt;p&gt;It looks like someone copied bits and pieces from the &quot;Automatically&quot; section here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ant.apache.org/ivy/history/latest-milestone/install.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ant.apache.org/ivy/history/latest-milestone/install.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455519">HIVE-1137</key>
            <summary>Fix build.xml for references to IVY_HOME</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Feb 2010 02:13:30 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:29 +0000</updated>
                            <resolved>Thu, 25 Feb 2010 21:30:01 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12830429" author="jvs" created="Sat, 6 Feb 2010 02:21:32 +0000"  >&lt;p&gt;svn annotate shows this originating with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-990&quot; title=&quot;Incorporate CheckStyle into Hive&amp;#39;s build.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-990&quot;&gt;&lt;del&gt;HIVE-990&lt;/del&gt;&lt;/a&gt;, so I&apos;ll assign to Carl to take a look.&lt;/p&gt;

&lt;p&gt;Also, Carl, what is the reason for putting the ivy download under build?  Was that necessitated by checkstyle?&lt;/p&gt;</comment>
                            <comment id="12837582" author="cwsteinbach" created="Wed, 24 Feb 2010 02:28:29 +0000"  >&lt;ul&gt;
	&lt;li&gt;Removed the reference to IVY_HOME in build-common.xml
	&lt;ul&gt;
		&lt;li&gt;ivy.home is always set to ${user.home}/.ant unless the user overrides ivy.home.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Removed ivy/get_ivy.xml which was not being used (this is handled by the ivy-download target in build-common.xml)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12838175" author="jvs" created="Thu, 25 Feb 2010 03:27:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12838545" author="zshao" created="Thu, 25 Feb 2010 21:30:01 +0000"  >&lt;p&gt;Committed. Thanks Carl!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436804" name="HIVE-1137.patch" size="3560" author="cwsteinbach" created="Wed, 24 Feb 2010 02:26:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Feb 2010 02:28:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122852</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1138] Hive using lzo comporession returns unexpected results.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1138</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I have a tab separated files I have loaded it with &quot;load data inpath&quot; then I do a&lt;/p&gt;

&lt;p&gt;SET hive.exec.compress.output=true;&lt;br/&gt;
SET mapred.output.compression.codec=com.hadoop.compression.lzo.LzoCodec;&lt;br/&gt;
SET mapred.map.output.compression.codec=com.hadoop.compression.lzo.LzoCodec;&lt;br/&gt;
select distinct login_cldr_id as cldr_id from chatsessions_load;&lt;/p&gt;

&lt;p&gt;Ended Job = job_201001151039_1641&lt;br/&gt;
OK&lt;br/&gt;
NULL&lt;br/&gt;
NULL&lt;br/&gt;
NULL&lt;br/&gt;
Time taken: 49.06 seconds&lt;/p&gt;

&lt;p&gt;however if I start it without the set commands I get this:&lt;br/&gt;
Ended Job = job_201001151039_1642&lt;br/&gt;
OK&lt;br/&gt;
2283&lt;br/&gt;
Time taken: 45.308 seconds&lt;/p&gt;

&lt;p&gt;Which is the correct result.&lt;/p&gt;

&lt;p&gt;When I do a &quot;insert overwrite&quot; on a rcfile table it will actually compress the data correctly.&lt;br/&gt;
When I disable compression and query this new table the result is correct.&lt;br/&gt;
When I enable compression it&apos;s wrong again.&lt;br/&gt;
I see no errors in the logs.&lt;/p&gt;</description>
                <environment>&lt;p&gt;hadoop 0.20.1, hive trunk 2010-02-03&lt;/p&gt;</environment>
        <key id="12455618">HIVE-1138</key>
            <summary>Hive using lzo comporession returns unexpected results.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="bennies">Bennie Schut</assignee>
                                    <reporter username="bennies">Bennie Schut</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2010 10:58:01 +0000</created>
                <updated>Tue, 9 Feb 2010 12:27:35 +0000</updated>
                            <resolved>Tue, 9 Feb 2010 12:27:35 +0000</resolved>
                                    <version>0.6.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12830908" author="bennies" created="Mon, 8 Feb 2010 12:02:39 +0000"  >&lt;p&gt;Doesn&apos;t seem to happen when I set compression to Gzip.&lt;/p&gt;

&lt;p&gt;set mapred.output.compression.codec=org.apache.hadoop.io.compress.GzipCodec;&lt;br/&gt;
set mapred.map.output.compression.codec=org.apache.hadoop.io.compress.GzipCodec;&lt;/p&gt;</comment>
                            <comment id="12830944" author="bennies" created="Mon, 8 Feb 2010 13:54:59 +0000"  >&lt;p&gt;on the filesystem I do find a jobfile like this: attempt_201001151039_1841_r_000001_0.lzo_deflate&lt;br/&gt;
which contains the correct value in a compressed format.&lt;br/&gt;
&lt;sup&gt;@&lt;/sup&gt;@^@&lt;sup&gt;E&lt;/sup&gt;@&lt;sup&gt;@&lt;/sup&gt;@  ^V2283&lt;br/&gt;
&lt;sup&gt;Q&lt;/sup&gt;@^@&lt;br/&gt;
Perhaps hive reads this as a non-compressed file?&lt;/p&gt;</comment>
                            <comment id="12831043" author="he yongqiang" created="Mon, 8 Feb 2010 18:59:53 +0000"  >&lt;p&gt;Hi Bennie&lt;/p&gt;

&lt;p&gt;Are you seeing this on rcfile table or other fileformat table?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I have a tab separated files I have loaded it with &quot;load data inpath&quot; then I do a&lt;br/&gt;
SET hive.exec.compress.output=true;&lt;br/&gt;
SET mapred.output.compression.codec=com.hadoop.compression.lzo.LzoCodec;&lt;br/&gt;
SET mapred.map.output.compression.codec=com.hadoop.compression.lzo.LzoCodec;&lt;br/&gt;
select distinct login_cldr_id as cldr_id from chatsessions_load;&lt;/p&gt;

&lt;p&gt;Ended Job = job_201001151039_1641&lt;br/&gt;
OK&lt;br/&gt;
NULL&lt;br/&gt;
NULL&lt;br/&gt;
NULL&lt;br/&gt;
Time taken: 49.06 seconds&lt;/p&gt;

&lt;p&gt;however if I start it without the set commands I get this:&lt;br/&gt;
Ended Job = job_201001151039_1642&lt;br/&gt;
OK&lt;br/&gt;
2283&lt;br/&gt;
Time taken: 45.308 seconds&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What is the file format here?&lt;/p&gt;</comment>
                            <comment id="12831106" author="bennies" created="Mon, 8 Feb 2010 20:39:25 +0000"  >&lt;p&gt;This example is on a text table:&lt;br/&gt;
ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;\t&apos; LINES TERMINATED BY &apos;\n&apos;;&lt;/p&gt;

&lt;p&gt;but when I do this:&lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.columnar.ColumnarSerDe&apos; STORED AS RCFILE;&lt;br/&gt;
I get the same result.&lt;/p&gt;
</comment>
                            <comment id="12831112" author="he yongqiang" created="Mon, 8 Feb 2010 20:54:03 +0000"  >&lt;p&gt;1) Can you check if LzoCodec is loaded/installed correctly? (Is LzoCodec removed from the Hadoop version you used, if yes, how you installed and used it in Hive?)&lt;br/&gt;
2) If yes for 1, can you upload a small piece of data, no need for real data, i think a test table with some data will ok. Just make sure i can reproduce the problem.&lt;/p&gt;</comment>
                            <comment id="12831120" author="bennies" created="Mon, 8 Feb 2010 21:11:45 +0000"  >&lt;p&gt;on 0.20.1 lzo is removed. I installed the &quot;hadoop-gpl-compression-read-only&quot; code from googlecode.com and it seems to work correctly on hadoop.&lt;/p&gt;

&lt;p&gt;On the reduce step I see things like this in the logs:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
2010-02-08 22:06:36,554 INFO com.hadoop.compression.lzo.GPLNativeCodeLoader: Loaded native gpl library
2010-02-08 22:06:36,555 INFO com.hadoop.compression.lzo.LzoCodec: Successfully loaded &amp;amp; initialized native-lzo library
2010-02-08 22:06:36,556 INFO org.apache.hadoop.hive.ql.io.CodecPool: Got brand-new compressor
2010-02-08 22:06:36,558 INFO org.apache.hadoop.hive.ql.io.CodecPool: Got brand-new compressor
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;2) I&apos;ll add some data+ example code tomorrow morning. &lt;/p&gt;

&lt;p&gt;Thanks for looking at this.&lt;/p&gt;</comment>
                            <comment id="12831301" author="zshao" created="Tue, 9 Feb 2010 05:28:27 +0000"  >&lt;p&gt;Bennie, I think the problem is that when Hive is reading the data and printing to screen, TextInputFormat didn&apos;t pick up the codec for the output file: attempt_201001151039_1841_r_000001_0.lzo_deflate&lt;/p&gt;

&lt;p&gt;I remember TextInputFormat takes the extension of the file name and then decide what codec to use.  I think lzocodec is not correctly configured to handle *.lzo_deflate files.&lt;/p&gt;</comment>
                            <comment id="12831339" author="bennies" created="Tue, 9 Feb 2010 07:55:18 +0000"  >&lt;p&gt;I was looking a little bit into that direction but found this in the com.hadoop.compression.lzo.LzoCodec file:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
  /**
   * Get the default filename extension for this kind of compression.
   * @return the extension including the &apos;.&apos;
   */
  public String getDefaultExtension() {
    return &quot;.lzo_deflate&quot;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Which looks the same as gz is doing:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  public String getDefaultExtension() {
    return &quot;.gz&quot;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12831372" author="bennies" created="Tue, 9 Feb 2010 09:04:45 +0000"  >&lt;p&gt;How to reproduce the problem:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
CREATE TABLE test_load (
  id     int
, code   string
) ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;\t&apos; LINES TERMINATED BY &apos;\n&apos;;

LOAD DATA INPATH &apos;/user/dwh/test.csv&apos; INTO TABLE test_load;

-- this one correctly returns 5 rows.
select distinct id from test_load;

SET hive.exec.compress.output=true;
SET mapred.output.compression.codec=com.hadoop.compression.lzo.LzoCodec;
SET mapred.map.output.compression.codec=com.hadoop.compression.lzo.LzoCodec;

-- this one returns incorrect results.
select distinct id from test_load;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </comment>
                            <comment id="12831437" author="bennies" created="Tue, 9 Feb 2010 12:27:35 +0000"  >&lt;p&gt;Ah a clear case of rtfm&lt;br/&gt;
The codec needs to be in the list of codecs like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;io.compression.codecs&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;org.apache.hadoop.io.compress.GzipCodec,org.apache.hadoop.io.compress.DefaultCodec,com.hadoop.compression.lzo.LzoCodec,com.hadoop.compression.lzo.LzopCodec,org.apache.hadoop.io.compress.BZip2Codec&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;So this is a configuration mistake and not a bug in hive.&lt;br/&gt;
I just wouldn&apos;t have expected this behavior since it seems to work a little bit.&lt;br/&gt;
Hopefully someone else can learn from my mistake &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks Zheng and He for the support on this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435269" name="test.csv" size="20" author="bennies" created="Tue, 9 Feb 2010 09:04:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Feb 2010 18:59:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1139] GroupByOperator sometimes throws OutOfMemory error when there are too many distinct keys</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1139</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a partial aggregation performed on a mapper, a HashMap is created to keep all distinct keys in main memory. This could leads to OOM exception when there are too many distinct keys for a particular mapper. A workaround is to set the map split size smaller so that each mapper takes less number of rows. A better solution is to use the persistent HashMapWrapper (currently used in CommonJoinOperator) to spill overflow rows to disk. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12455677">HIVE-1139</key>
            <summary>GroupByOperator sometimes throws OutOfMemory error when there are too many distinct keys</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aprabhakar">Arvind Prabhakar</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2010 19:58:52 +0000</created>
                <updated>Tue, 31 Jul 2018 05:51:33 +0000</updated>
                                            <version>0.5.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12831101" author="nzhang" created="Mon, 8 Feb 2010 20:28:05 +0000"  >&lt;p&gt;GroupByOperator uses HashMap&apos;s size() and iterator() API, which is not supported by HashMapWrapper right now. We should extended HashMapWrapper to support those. &lt;/p&gt;</comment>
                            <comment id="12875595" author="raj_velu" created="Fri, 4 Jun 2010 13:30:53 +0000"  >&lt;p&gt;Thanks Ning, we are trying to implement HashMapWrapper in our solution for Group By,  Wanted to know if this has been already done, It will be great if you can suggest on this.&lt;/p&gt;</comment>
                            <comment id="12875606" author="nzhang" created="Fri, 4 Jun 2010 14:00:47 +0000"  >&lt;p&gt;Hi Soundararajan, Do you mean you are trying to replace HashMapWrapper or extend it to support GroupByOperator? I am not actively working on this JIRA now. I think maybe Arvind is working on it? &lt;/p&gt;</comment>
                            <comment id="12875650" author="aprabhakar" created="Fri, 4 Jun 2010 16:25:55 +0000"  >&lt;p&gt;Soundararajan, Ning - Yes I am planning on working on it starting next week. I expect this to take at least upto mid to late in the week in order to get a patch available for this. However, if that schedule does not work for you, please feel free to take this issue into your queue and go ahead. It will be great if you could confirm it either way first.&lt;/p&gt;

&lt;p&gt;Arvind&lt;/p&gt;</comment>
                            <comment id="12876979" author="aprabhakar" created="Wed, 9 Jun 2010 06:49:38 +0000"  >&lt;p&gt;I did some preliminary analysis for this JIRA and converted the &lt;tt&gt;HashMapWrapper&lt;/tt&gt; to implement the &lt;tt&gt;java.util.Map&lt;/tt&gt; interface. This required some changes all the way down to the underlying JDBM classes. &lt;/p&gt;

&lt;p&gt;However, this alone is not sufficient to plug it into the &lt;tt&gt;GroupByOperator&lt;/tt&gt; implementation because the data stored in the &lt;tt&gt;HashMap&lt;/tt&gt; is a mix of serializable Java objects as well as {{Writable}}s. Since {{Writable}}s cannot be directly serialized to Java, it follows that inorder to use this for fixing the memory problem we need &lt;em&gt;an external serialization&lt;/em&gt; mechanism that can handle arbitrary mixed type object graphs.&lt;/p&gt;

&lt;p&gt;A trivial approach to address this would be to implement custom serialization using Java reflection but that would incur cost of excessive reflection and byte handling/marshaling.&lt;/p&gt;

&lt;p&gt;If you have any other ideas regarding this, please add it to the comments of this issue for consideration.&lt;/p&gt;</comment>
                            <comment id="12877222" author="aprabhakar" created="Wed, 9 Jun 2010 21:46:08 +0000"  >&lt;p&gt;If there is interest, I can file a separate JIRA for modifying &lt;tt&gt;HashMapWrapper&lt;/tt&gt; to support the &lt;tt&gt;java.util.Map&lt;/tt&gt; interface and decouple that work from this JIRA. I think there is a lot of benefit in doing just that. Also, we could have this JIRA depend upon that as a prerequisite.&lt;/p&gt;
</comment>
                            <comment id="12877232" author="athusoo" created="Wed, 9 Jun 2010 22:06:20 +0000"  >&lt;p&gt;Arvind, I thought the whole point of this JIRA was to make HashMapWrapper to support java.util.Map, no? If that would be a separate JIRA, what would this one be for? Sorry for being a bit dense here but if you could clarify that would be great.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Ashish&lt;/p&gt;</comment>
                            <comment id="12877239" author="aprabhakar" created="Wed, 9 Jun 2010 22:24:54 +0000"  >&lt;p&gt;Ashish - no problem - let me explain: The problem being addressed by this JIRA is that &lt;tt&gt;GroupByOperator&lt;/tt&gt; and possibly other aggregation operators use in-memory maps to store intermediate keys, which could lead to &lt;tt&gt;OutOfMemoryException&lt;/tt&gt; in case the number of such keys is large. It is suggested that one way to work around it is to use the &lt;tt&gt;HashMapWrapper&lt;/tt&gt; class which would help alleviate the memory concern since it is capable of spilling the excess data to disk.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;HashMapWrapper&lt;/tt&gt; however, uses Java serialization to write out the excess data. This does not work when the data contains non-serializable objects such as &lt;tt&gt;Writable&lt;/tt&gt; types - &lt;tt&gt;Text&lt;/tt&gt; etc. What I have done so far is to modify the &lt;tt&gt;HashMapWrapper&lt;/tt&gt; to support full &lt;tt&gt;java.util.Map&lt;/tt&gt; interface. However, when I tried updating the &lt;tt&gt;GroupByOperator&lt;/tt&gt; to use it, I ran into the said serialization problem.&lt;/p&gt;

&lt;p&gt;Thats why I was suggesting that perhaps we should decouple the serialization problem from enhancing the &lt;tt&gt;HashMapWrapper&lt;/tt&gt; and let the later be checked independently.&lt;/p&gt;</comment>
                            <comment id="12877303" author="nzhang" created="Thu, 10 Jun 2010 03:45:48 +0000"  >&lt;p&gt;Arvind, I remember I got this problem (non-serializable) problem before and the problem boils down to support ObjectInspector in the same way as RowContainer does. In terms of a complete interface of Map, it would be good to have but I would be very cautious about performance penalty it may add. If the new API is not needed for now, I would vote for the ObjectInspector support first. &lt;/p&gt;</comment>
                            <comment id="12877500" author="raj_velu" created="Thu, 10 Jun 2010 17:33:04 +0000"  >&lt;p&gt;Ning, Aravind, I got this implemented and it looks good so far, I will try uploading the version I have modified after a thorough test, All I did was copy the HashMap implementation into the HashMapWrapper (leaving the existing functionality intact), now HashmapWrapper works exactly like hashmap, but I did not get to test out the serialization issues. will do that and update you guys. I think this should help us in our OOM issue around GroupBy...&lt;/p&gt;</comment>
                            <comment id="12877502" author="raj_velu" created="Thu, 10 Jun 2010 17:39:07 +0000"  >&lt;p&gt;to add, XMLEncoder/XMLDecoder works just fine and can handle our serde issues.&lt;/p&gt;</comment>
                            <comment id="12878424" author="raj_velu" created="Sun, 13 Jun 2010 19:15:23 +0000"  >&lt;p&gt;Aravind/Ning, This implementation uses XMLEncoder/XMLDecoder to handle the serde, I am still experimenting on this, I got the base implementation from &lt;a href=&quot;http://gitorious.org/persistenthashmap/pages/Home&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://gitorious.org/persistenthashmap/pages/Home&lt;/a&gt;, This library is distributed under GPL, Added some functionality around threshold and combined iteration... &lt;/p&gt;</comment>
                            <comment id="12878774" author="nzhang" created="Mon, 14 Jun 2010 22:12:51 +0000"  >&lt;p&gt;Soundararajan, thanks for the contribution. However it seems the persistent hash map package is under GNU v.3, which is not compatible with apache license. We also looked at other existing open source packages before implementing our own HashMapWrapper. One of the problems we found out then is the license compatibility issue. &lt;/p&gt;</comment>
                            <comment id="12879051" author="raj_velu" created="Tue, 15 Jun 2010 18:11:51 +0000"  >&lt;p&gt;right... Ning is there any open source serializers/deserializers that you are aware of that is reflections based, if so I can quickly implement a similar persistent map around that....&lt;/p&gt;</comment>
                            <comment id="12879061" author="nzhang" created="Tue, 15 Jun 2010 18:30:34 +0000"  >&lt;p&gt;I&apos;m not aware of an efficient serde that are reflection based. The XMLEncoder/Decoder is JAXB-based and are very inefficient. That&apos;s another reason we don&apos;t want to use it in the execution code path. A better way is to use the Hive SerDe (e.g., LazyBinarySerde) just as it is done in RowContainer.&lt;/p&gt;

&lt;p&gt;Another way to tackle this problem is have more accurate estimate of how many rows can be fit into the main memory. The current code checks the amount of available memory and use 0.25 (by default) of them to hold the hashmap. We set it to 0.15 in our environment and it works for most cases. 0.15 is probably a little bit conservative. Some experiments need to be done to tune this parameter so that most cases will be fit into main memory and only for the exceptional cases the secondary storage will be used. &lt;/p&gt;</comment>
                            <comment id="12879406" author="raj_velu" created="Wed, 16 Jun 2010 17:26:08 +0000"  >&lt;p&gt;Thanks Ning, sounds logical, will try with 0.15 and tune accordingly in our environment, but on a long run I guess we may need a strong reflection based serde Map. I am still exploring if it can be achieved.. will keep the progress posted.&lt;/p&gt;</comment>
                            <comment id="12879442" author="nzhang" created="Wed, 16 Jun 2010 18:36:33 +0000"  >&lt;p&gt;Sounds good. &lt;/p&gt;</comment>
                            <comment id="16563143" author="dingqiaoyi" created="Tue, 31 Jul 2018 04:46:39 +0000"  >&lt;p&gt;Hi all, I&apos;m new to HIVE, and i find there is no spilling when hash agg having lots of entries&#160;in the hash map which could&#160;cause OOM.&lt;/p&gt;

&lt;p&gt;So, is this issue still open, or any update?&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aprabhakar&quot; class=&quot;user-hover&quot; rel=&quot;aprabhakar&quot;&gt;Arvind Prabhakar&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446988" name="PersistentMap.zip" size="13068" author="raj_velu" created="Sun, 13 Jun 2010 19:15:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Jun 2010 13:30:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122854</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1140] Incorrect ambiguous column reference error message</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1140</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Whenever there is an ambiguous column name reference, the error message does not reference the proper column.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; FROM (SELECT key, concat(value) AS key FROM src) a SELECT a.key;
FAILED: Error in semantic analysis: line 1:25 Ambiguous Column Reference value
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12455682">HIVE-1140</key>
            <summary>Incorrect ambiguous column reference error message</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2010 20:57:37 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:24 +0000</updated>
                            <resolved>Tue, 9 Feb 2010 19:53:00 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12831629" author="zshao" created="Tue, 9 Feb 2010 19:53:00 +0000"  >&lt;p&gt;Committed to both trunk and branch-0.5. Thanks Paul!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435226" name="HIVE-1140.1.patch" size="1501" author="pauly" created="Tue, 9 Feb 2010 00:25:46 +0000"/>
                            <attachment id="12435227" name="HIVE-1140.branch-0.5.1.patch" size="2078" author="pauly" created="Tue, 9 Feb 2010 00:25:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Feb 2010 19:53:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73073</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1140&quot; title=&quot;Incorrect ambiguous column reference error message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1140&quot;&gt;&lt;strike&gt;HIVE-1140&lt;/strike&gt;&lt;/a&gt;. Fix incorrect ambiguous column reference error message. (Paul Yang via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1141] Remove recursive call in FetchOperator.getNextRow</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1141</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There is an unnecessary recursive getNextRow() call that caused stack overflow in some queries.&lt;br/&gt;
We should remove that recursive call.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455691">HIVE-1141</key>
            <summary>Remove recursive call in FetchOperator.getNextRow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2010 22:14:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:35 +0000</updated>
                            <resolved>Mon, 8 Feb 2010 23:24:31 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12831166" author="he yongqiang" created="Mon, 8 Feb 2010 22:33:17 +0000"  >&lt;p&gt;will test now.&lt;/p&gt;</comment>
                            <comment id="12831173" author="he yongqiang" created="Mon, 8 Feb 2010 22:45:03 +0000"  >&lt;p&gt;Zheng, does your change work with CombineFileInputFormat?&lt;/p&gt;</comment>
                            <comment id="12831182" author="he yongqiang" created="Mon, 8 Feb 2010 23:06:02 +0000"  >&lt;p&gt;Discussed with Zheng, this kind of recursive call will occur if all the files to fetch are empty.&lt;/p&gt;

&lt;p&gt;+1, will commit after test pass.&lt;/p&gt;</comment>
                            <comment id="12831190" author="he yongqiang" created="Mon, 8 Feb 2010 23:24:31 +0000"  >&lt;p&gt;Committed to trunk and branch-0.5. Thanks Zheng!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435215" name="HIVE-1141.1.branch-0.5.patch" size="1901" author="zshao" created="Mon, 8 Feb 2010 22:23:41 +0000"/>
                            <attachment id="12435216" name="HIVE-1141.1.patch" size="1880" author="zshao" created="Mon, 8 Feb 2010 22:23:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Feb 2010 22:33:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73072</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Remove recursive call in FetchOperator.getNextRow</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1142] Fix datanucleus typos in conf/hive-default.xml</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1142</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;datanucleus is misspelled as &quot;datancucleus&quot; and &quot;datanuclues&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455692">HIVE-1142</key>
            <summary>Fix datanucleus typos in conf/hive-default.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2010 22:18:59 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:21 +0000</updated>
                            <resolved>Sat, 13 Feb 2010 02:21:47 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12831159" author="jvs" created="Mon, 8 Feb 2010 22:22:28 +0000"  >&lt;p&gt;Patch for the conf file.&lt;/p&gt;</comment>
                            <comment id="12831257" author="pauly" created="Tue, 9 Feb 2010 02:11:01 +0000"  >&lt;p&gt;So even though these settings didn&apos;t have an effect, it didn&apos;t matter because those values are the defaults.&lt;/p&gt;

&lt;p&gt;Also, about datanucleus.cache.level2 - I don&apos;t see this option in &lt;a href=&quot;http://www.datanucleus.org/products/datanucleus/persistence_properties.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.datanucleus.org/products/datanucleus/persistence_properties.html&lt;/a&gt;&lt;br/&gt;
Maybe we can remove it?&lt;/p&gt;</comment>
                            <comment id="12831262" author="jvs" created="Tue, 9 Feb 2010 02:17:43 +0000"  >&lt;p&gt;Right, looks like it has been replaced by setting&lt;/p&gt;

&lt;p&gt;datanucleus.cache.level2.type=none&lt;/p&gt;</comment>
                            <comment id="12831263" author="jvs" created="Tue, 9 Feb 2010 02:19:47 +0000"  >&lt;p&gt;Canceling patch since it needs another change per Paul&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="12831264" author="jvs" created="Tue, 9 Feb 2010 02:20:31 +0000"  >&lt;p&gt;Paul, can you take over on this one and update the description field on level2.type to include NONE?&lt;/p&gt;</comment>
                            <comment id="12831771" author="pauly" created="Wed, 10 Feb 2010 00:15:24 +0000"  >&lt;p&gt;Actually datanucleus.cache.level2 option was removed in 1.1.4. Hive is currently packaged with datanucleus-core-1.1.2 so we should keep that option.&lt;/p&gt;

&lt;p&gt;I changed the default to false as there are cases where we change the metadata outside of hive metastore. Plus, changing it to false keeps it at the same configuration as before. &lt;/p&gt;</comment>
                            <comment id="12833290" author="zshao" created="Sat, 13 Feb 2010 02:21:47 +0000"  >&lt;p&gt;Committed. Thanks Paul and John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435214" name="HIVE-1142.1.patch" size="901" author="jvs" created="Mon, 8 Feb 2010 22:22:28 +0000"/>
                            <attachment id="12435379" name="HIVE-1142.2.patch" size="1145" author="pauly" created="Wed, 10 Feb 2010 00:15:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Feb 2010 02:11:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122857</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
