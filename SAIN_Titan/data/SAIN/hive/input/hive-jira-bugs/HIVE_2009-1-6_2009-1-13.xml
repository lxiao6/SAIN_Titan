<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:12:40 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-1-6+AND+created+%3C%3D+2009-1-13+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="17" total="17"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-210] Refactor HiveConf variables into two categories (query and session level)  </title>
                <link>https://issues.apache.org/jira/browse/HIVE-210</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Created while fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-84&quot; title=&quot;MetaStore Client is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-84&quot;&gt;&lt;del&gt;HIVE-84&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Most of variables in HiveConf fall into two distinct categories: valid only for a job (job name, id etc) and valid across sessions and jobs. So it may be good idea to explicitly distinguish them so that changes in HiveConf object can be detected and acted appropriately.&lt;/p&gt;

&lt;p&gt;I suppose this requites a sizable refactoring of the code in SessionState, HiveConf &amp;amp; Hive classes. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12411735">HIVE-210</key>
            <summary>Refactor HiveConf variables into two categories (query and session level)  </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jan 2009 01:16:38 +0000</created>
                <updated>Thu, 10 Sep 2009 06:41:44 +0000</updated>
                                                                            <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12662855" author="jsensarma" created="Mon, 12 Jan 2009 01:53:05 +0000"  >&lt;p&gt;i presume u are asking to distinguishing variables that are &apos;query&apos; specific versus those that are session level.&lt;/p&gt;

&lt;p&gt;if so - the wording of the jira is very confusing. (don&apos;t see the point of sharing variables across sessions (except by inheriting initial values from same properties file (as today)).&lt;/p&gt;</comment>
                            <comment id="12662858" author="prasadc" created="Mon, 12 Jan 2009 02:28:13 +0000"  >&lt;p&gt;changing title and description to make things more clean...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12428950">HIVE-584</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Jan 2009 01:53:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08oef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48552</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-211] Add metastore_db to svn ignore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-211</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;As per &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-101&quot; title=&quot;Add various files and directories to svn:ignore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-101&quot;&gt;&lt;del&gt;HIVE-101&lt;/del&gt;&lt;/a&gt; add the metastore_db directory to svn ignore since it shouldn&apos;t be committed or added to any patches.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411770">HIVE-211</key>
            <summary>Add metastore_db to svn ignore</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jan 2009 16:27:24 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:56 +0000</updated>
                            <resolved>Thu, 15 Jan 2009 08:23:29 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12662542" author="prasadc" created="Fri, 9 Jan 2009 22:21:09 +0000"  >&lt;p&gt;need to add *.launch, .externalToolBuilders, build-eclipse, as well since they will be copied through ant target &apos;eclipse-files&apos; and by building in eclipse.&lt;/p&gt;</comment>
                            <comment id="12662543" author="prasadc" created="Fri, 9 Jan 2009 22:21:53 +0000"  >&lt;p&gt;could you add these as well to svn:ignore&lt;/p&gt;</comment>
                            <comment id="12663796" author="johanoskarsson" created="Wed, 14 Jan 2009 17:01:13 +0000"  >&lt;p&gt;While we&apos;re at it. I think the ql/mapred directory is created when running unit tests. Might be worth adding that one too.&lt;/p&gt;</comment>
                            <comment id="12664039" author="zshao" created="Thu, 15 Jan 2009 08:23:29 +0000"  >&lt;p&gt;Fixed. ql/mapred should be removed after unit test, so not adding that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Jan 2009 22:21:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-212] Add an option to msck command to continue if a check fails on a table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-212</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The meta check command (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-142&quot; title=&quot;Create a metastore check command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-142&quot;&gt;&lt;del&gt;HIVE-142&lt;/del&gt;&lt;/a&gt;) stops if a check fails unexpectedly. Add an option to continue even though one check failed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411786">HIVE-212</key>
            <summary>Add an option to msck command to continue if a check fails on a table</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jan 2009 18:20:31 +0000</created>
                <updated>Thu, 2 May 2013 02:29:19 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12410260">HIVE-142</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-213] Msck: Add option to have wild card in table name</title>
                <link>https://issues.apache.org/jira/browse/HIVE-213</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In the meta check command (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-142&quot; title=&quot;Create a metastore check command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-142&quot;&gt;&lt;del&gt;HIVE-142&lt;/del&gt;&lt;/a&gt;), add the option to pick which tables to check using wildcards.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411787">HIVE-213</key>
            <summary>Msck: Add option to have wild card in table name</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jan 2009 18:23:05 +0000</created>
                <updated>Thu, 2 May 2013 02:29:19 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12410260">HIVE-142</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08pa7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48695</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-214] Msck: there should be an option to check only tables and not partitions </title>
                <link>https://issues.apache.org/jira/browse/HIVE-214</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In the meta check command (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-142&quot; title=&quot;Create a metastore check command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-142&quot;&gt;&lt;del&gt;HIVE-142&lt;/del&gt;&lt;/a&gt;), add the option to check only tables and not partitions&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411788">HIVE-214</key>
            <summary>Msck: there should be an option to check only tables and not partitions </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jan 2009 18:24:28 +0000</created>
                <updated>Thu, 2 May 2013 02:29:20 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12410260">HIVE-142</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08paf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-215] Map-side aggregate with DISTINCT generates bad intermediate table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-215</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12411832">HIVE-215</key>
            <summary>Map-side aggregate with DISTINCT generates bad intermediate table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="electrum">David Phillips</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jan 2009 05:39:00 +0000</created>
                <updated>Tue, 13 Jan 2009 23:46:38 +0000</updated>
                            <resolved>Tue, 13 Jan 2009 23:45:52 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12661452" author="electrum" created="Wed, 7 Jan 2009 05:39:42 +0000"  >&lt;p&gt;Attached testcase.&lt;/p&gt;</comment>
                            <comment id="12661456" author="zshao" created="Wed, 7 Jan 2009 06:12:28 +0000"  >&lt;p&gt;Can you give a little more details?&lt;/p&gt;</comment>
                            <comment id="12661585" author="electrum" created="Wed, 7 Jan 2009 14:12:39 +0000"  >&lt;p&gt;I&apos;m not really sure.  The summary &quot;generates bad intermediate table&quot; might be a bad diagnosis.  Apply the patch and run these new tests:&lt;/p&gt;

&lt;p&gt;ant -Dtestcase=TestCliDriver -Dqfile=aggr_dist1.q test&lt;br/&gt;
ant -Dtestcase=TestCliDriver -Dqfile=aggr_dist1_map.q test&lt;/p&gt;

&lt;p&gt;Same query but it fails in the second reduce step with map side aggregates enabled:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.Double
    at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDeTypeDouble.serialize(DynamicSerDeTypeDouble.java:60)
    at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDeFieldList.serialize(DynamicSerDeFieldList.java:236)
    at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDeStructBase.serialize(DynamicSerDeStructBase.java:81)
    at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDe.serialize(DynamicSerDe.java:177)
    at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.process(ReduceSinkOperator.java:188)
    at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:279)
    at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:174)
    at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:71)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:332)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:138)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12663546" author="athusoo" created="Tue, 13 Jan 2009 23:45:52 +0000"  >&lt;p&gt;Did not realize that this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-222&quot; title=&quot;Group by on a combination of disitinct and non distinct aggregates can return serialization errors with map side aggregations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-222&quot;&gt;&lt;del&gt;HIVE-222&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12663547" author="athusoo" created="Tue, 13 Jan 2009 23:46:38 +0000"  >&lt;p&gt;duplicate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12410745">HIVE-179</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12412118">HIVE-222</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12397268" name="hive-aggrdist-testcase.patch" size="7167" author="electrum" created="Wed, 7 Jan 2009 05:39:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 Jan 2009 06:12:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122034</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-216] generate ruby bindings for service</title>
                <link>https://issues.apache.org/jira/browse/HIVE-216</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;From: Josh Ferguson &amp;lt;josh@besquared.net&amp;gt;&lt;br/&gt;
Reply-To: &amp;lt;hive-user@hadoop.apache.org&amp;gt;&lt;br/&gt;
Date: Tue, 6 Jan 2009 21:03:50 -0800&lt;br/&gt;
To: &amp;lt;hive-user@hadoop.apache.org&amp;gt;&lt;br/&gt;
Subject: rb-gen love&lt;/p&gt;

&lt;p&gt;Can we get some ruby loving in the default service/src dir?&lt;/p&gt;

&lt;p&gt;Josh&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411842">HIVE-216</key>
            <summary>generate ruby bindings for service</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jan 2009 09:47:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:09:02 +0000</updated>
                            <resolved>Wed, 14 Jan 2009 07:03:35 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12661505" author="rsm" created="Wed, 7 Jan 2009 09:50:49 +0000"  >&lt;p&gt;Generated ruby files&lt;/p&gt;</comment>
                            <comment id="12663549" author="athusoo" created="Tue, 13 Jan 2009 23:47:33 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12663646" author="zshao" created="Wed, 14 Jan 2009 07:03:35 +0000"  >&lt;p&gt;Committed revision 734352. Thanks Raghu!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397282" name="hive-216.1.patch" size="7565" author="rsm" created="Wed, 7 Jan 2009 09:50:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Jan 2009 23:47:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122035</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-216&quot; title=&quot;generate ruby bindings for service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-216&quot;&gt;&lt;strike&gt;HIVE-216&lt;/strike&gt;&lt;/a&gt;. Generate ruby bindings for service. (Raghotham Murthy via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-217] Stream closed exception</title>
                <link>https://issues.apache.org/jira/browse/HIVE-217</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When running a query similar to the following:&lt;br/&gt;
&quot;insert overwrite table outputtable select a, b, cast(sum(counter) as INT) from tablea join tableb on (tablea.username=tableb.username) join tablec on (tablec.userid = tablea.userid) join tabled on (tablec.id=tabled.id) where insertdate &amp;gt;= &apos;somedate&apos; and insertdate &amp;lt;= &apos;someotherdate&apos; group by a, b;&quot;&lt;br/&gt;
Where one table is ~40gb or so and the others are a couple of hundred mb. The error happens in the first mapred job that processes the 40gb.&lt;/p&gt;

&lt;p&gt;I get the following exception (see attached file for full stack trace):&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.io.IOException: Stream closed.&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.process(FileSinkOperator.java:162)&lt;/p&gt;

&lt;p&gt;It happens in one reduce task and is reproducible, running the same query gives the error.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hive from trunk, hadoop 0.18.2, ~20 machines&lt;/p&gt;</environment>
        <key id="12411879">HIVE-217</key>
            <summary>Stream closed exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johanoskarsson">Johan Oskarsson</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jan 2009 19:05:32 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:54 +0000</updated>
                            <resolved>Wed, 21 Jan 2009 19:04:30 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12661662" author="johanoskarsson" created="Wed, 7 Jan 2009 19:06:52 +0000"  >&lt;p&gt;The  full stack trace&lt;/p&gt;</comment>
                            <comment id="12661666" author="johanoskarsson" created="Wed, 7 Jan 2009 19:15:50 +0000"  >&lt;p&gt;It is also worth mentioning that the namenode was under hardly any load when this happened. I have not seen a reproducible problem like this with normal map reduce jobs on that cluster.&lt;/p&gt;</comment>
                            <comment id="12661993" author="johanoskarsson" created="Thu, 8 Jan 2009 15:15:11 +0000"  >&lt;p&gt;Added some debug logging to the close and process methods in FileSinkOperator and the close method is not called before the process method fails as one could guess from the stack trace.&lt;/p&gt;</comment>
                            <comment id="12662074" author="johanoskarsson" created="Thu, 8 Jan 2009 19:22:42 +0000"  >&lt;p&gt;Looking into this a bit further the exception is actually caused by the reduce task timing out:&lt;br/&gt;
&quot;Task attempt_200901071012_0373_r_000031_0 failed to report status for 616 seconds. Killing!&quot;&lt;/p&gt;

&lt;p&gt;This in turn closes the FileSystem/stream and the FileSink keeps trying to write, causing the exception seen in the log.&lt;br/&gt;
Now the question is why the task fails to report status.&lt;/p&gt;</comment>
                            <comment id="12662078" author="jsensarma" created="Thu, 8 Jan 2009 19:31:05 +0000"  >&lt;p&gt;one question - which side was the big table on?&lt;/p&gt;

&lt;p&gt;regardless though - perhaps the issue is that when we iterate through large reduce groups - hadoop is not reporting progress - maybe that&apos;s something that the application has to do.&lt;/p&gt;

&lt;p&gt;what version of hadoop are u using?&lt;/p&gt;</comment>
                            <comment id="12662081" author="johanoskarsson" created="Thu, 8 Jan 2009 19:37:02 +0000"  >&lt;p&gt;The big table in the example query above is tablec, is this what you were referring to?&lt;br/&gt;
I&apos;m using Hadoop 0.18.2.&lt;/p&gt;</comment>
                            <comment id="12662085" author="johanoskarsson" created="Thu, 8 Jan 2009 19:41:11 +0000"  >&lt;p&gt;Just had a look and it doesn&apos;t seem like the reducer that fails gets any more data to it compared to the others.&lt;/p&gt;</comment>
                            <comment id="12662111" author="jsensarma" created="Thu, 8 Jan 2009 20:35:09 +0000"  >&lt;p&gt;ok - got it. hadoop is ok - it&apos;s already reporting progress whenever any data is consumed or any data is emitted to output collector.&lt;/p&gt;

&lt;p&gt;the issue is that we are not sending data to the output collector - rather we write out data to file system ourselves. the stack trace indicates that we have consumed the entire reduce group and we are writing to the filesystem. that means that hadoop gets no opportunity to report progress (it would have reported progress if we were writing to the output collector).&lt;/p&gt;

&lt;p&gt;I am not sure why we haven&apos;t seen the problem in our environment yet - perhaps DFS IO is slow in ur environment. the fix is simple (we can report progress either in the filesinkoperator or the joinoperator). i think we should do this in the joinoperator (for the particular case where we have already gone through the entire reduce group) - since that&apos;s the only place we are vulnerable right now.&lt;/p&gt;

&lt;p&gt;i can post a patch u can try out in a couple of hours .. &lt;/p&gt;</comment>
                            <comment id="12662303" author="johanoskarsson" created="Fri, 9 Jan 2009 10:15:43 +0000"  >&lt;p&gt;That sounds like a very reasonable explanation. We have fewer machines meaning fewer disks in total then Facebook, that could explain why we&apos;re seeing this error.&lt;br/&gt;
Out of curiosity, how come you&apos;re not using the standard output collector?&lt;/p&gt;</comment>
                            <comment id="12663314" author="johanoskarsson" created="Tue, 13 Jan 2009 11:52:54 +0000"  >&lt;p&gt;To verify that this was indeed the issue I have slapped together a patch. Tried it on the same cluster and the same query as above and it worked fine this time. It&apos;s not an ideal patch, it changes the initialize method etc. I&apos;ll leave a real solution up to someone with more detailed knowledge about this area.&lt;/p&gt;</comment>
                            <comment id="12663535" author="jsensarma" created="Tue, 13 Jan 2009 23:25:29 +0000"  >&lt;p&gt;For the change to get the reporter reference into the operator structure - the interface change looks good. However - why don&apos;t we just store the reporter reference in the base Operator class rather than the FileSinkOperator specifically? If we run into other cases where we have to add progress indicators - this will make it easier.&lt;/p&gt;

&lt;p&gt;+1 otherwise. &lt;/p&gt;</comment>
                            <comment id="12663776" author="johanoskarsson" created="Wed, 14 Jan 2009 15:21:52 +0000"  >&lt;p&gt;Updated with the changes mentioned.&lt;/p&gt;</comment>
                            <comment id="12663788" author="jsensarma" created="Wed, 14 Jan 2009 16:11:44 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;thanks Johan!&lt;/p&gt;</comment>
                            <comment id="12665786" author="johanoskarsson" created="Wed, 21 Jan 2009 10:37:42 +0000"  >&lt;p&gt;If one of the committers have time to look at the patch it would be much appreciated, thanks.&lt;/p&gt;</comment>
                            <comment id="12665916" author="athusoo" created="Wed, 21 Jan 2009 19:04:30 +0000"  >&lt;p&gt;committed. Thanks Johan!!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397314" name="HIVE-217.log" size="3767" author="johanoskarsson" created="Wed, 7 Jan 2009 19:06:52 +0000"/>
                            <attachment id="12397890" name="HIVE-217.patch" size="18893" author="johanoskarsson" created="Wed, 14 Jan 2009 15:21:52 +0000"/>
                            <attachment id="12397771" name="HIVE-217.patch" size="18212" author="johanoskarsson" created="Tue, 13 Jan 2009 11:52:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Jan 2009 19:31:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122036</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-218] predicate on partitioning column is ignored in many places</title>
                <link>https://issues.apache.org/jira/browse/HIVE-218</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We tried two queries yesterday that bought up several problems:&lt;/p&gt;

&lt;p&gt;1. predicate on partitioning column within a join clause was ignored:&lt;/p&gt;

&lt;p&gt;FROM (FROM xxx a SELECT a.xx, a.yy, a.ds WHERE a.ds=2009-01-05 UNION ALL FROM yyy SELECT b.xx, b.yy, b.ds WHERE b.ds=2009-01-05 UNION ALL FROM zzz c SELECT c.xx, c.yy, c.ds WHERE c.ds=2009-01-05) d JOIN aaa e ON (d.xx=e.xx AND e.ds=2009-01-05) INSERT OVERWRITE TABLE ...&lt;/p&gt;

&lt;p&gt;the plan tried to scan &lt;b&gt;all&lt;/b&gt; partitions!&lt;/p&gt;

&lt;p&gt;2. predicate on partitioning clause inside insert clause was ignored (we took the previous query and moved the partition filter to the insert statement)&lt;/p&gt;

&lt;p&gt;FROM (FROM xxx a SELECT a.xx, a.yy, a.ds WHERE a.ds=2009-01-05 UNION ALL FROM yyy SELECT b.xx, b.yy, b.ds WHERE b.ds=2009-01-05 UNION ALL FROM zzz c SELECT c.xx, c.yy, c.ds WHERE c.ds=2009-01-05) d JOIN aaa e ON (d.xx=e.xx ) INSERT OVERWRITE TABLE ... WHERE e.ds=2009-01-05; &lt;/p&gt;

&lt;p&gt;the plan again tried to scan &lt;b&gt;all&lt;/b&gt; partitions&lt;/p&gt;

&lt;p&gt;the really bad thing is that we were able to detect this problem only because of metastore inconsistencies - otherwise - we would have merrily scanned all the data. This is really critical to get fixed - because this means that we may actually be scanning tons of unnecessary data in production.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411888">HIVE-218</key>
            <summary>predicate on partitioning column is ignored in many places</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jan 2009 20:03:20 +0000</created>
                <updated>Thu, 6 Aug 2009 22:59:07 +0000</updated>
                            <resolved>Thu, 6 Aug 2009 22:58:35 +0000</resolved>
                                    <version>0.3.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12676046" author="jsensarma" created="Mon, 23 Feb 2009 20:06:51 +0000"  >&lt;p&gt;Ashish said this would be resolved by predicate pushdown&lt;/p&gt;</comment>
                            <comment id="12680656" author="athusoo" created="Tue, 10 Mar 2009 22:27:20 +0000"  >&lt;p&gt;Marking this as a critical as there is a workaround for this by putting the predicate on the partitioning column within a subquery.&lt;/p&gt;

&lt;p&gt;In the example above, this can be achieved by&lt;/p&gt;

&lt;p&gt;FROM (FROM xxx a SELECT a.xx, a.yy, a.ds WHERE a.ds=2009-01-05 .... JOIN (SELECT aaa.* FROM aaa WHERE aaa.ds-2009-01-05) e ....&lt;/p&gt;</comment>
                            <comment id="12725356" author="prasadc" created="Mon, 29 Jun 2009 21:21:00 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-578&quot; title=&quot;Refactor partition pruning code as an optimizer transformation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-578&quot;&gt;&lt;del&gt;HIVE-578&lt;/del&gt;&lt;/a&gt; will fix this as well.&lt;/p&gt;</comment>
                            <comment id="12740299" author="athusoo" created="Thu, 6 Aug 2009 22:58:35 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-578&quot; title=&quot;Refactor partition pruning code as an optimizer transformation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-578&quot;&gt;&lt;del&gt;HIVE-578&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12740301" author="athusoo" created="Thu, 6 Aug 2009 22:59:07 +0000"  >&lt;p&gt;duplicate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12428788">HIVE-578</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Mar 2009 22:27:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122037</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-219] Map-side aggregates output one row per reducer when not grouping</title>
                <link>https://issues.apache.org/jira/browse/HIVE-219</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Example: SELECT count(1) FROM table;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412042">HIVE-219</key>
            <summary>Map-side aggregates output one row per reducer when not grouping</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="electrum">David Phillips</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2009 16:01:52 +0000</created>
                <updated>Sat, 17 Dec 2011 00:09:01 +0000</updated>
                            <resolved>Thu, 29 Jan 2009 18:44:11 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12662408" author="electrum" created="Fri, 9 Jan 2009 16:03:11 +0000"  >&lt;p&gt;With map-side:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; set hive.map.aggr=true;
hive&amp;gt; select count(1) from search_result;
Total MapReduce jobs = 1
Number of reducers = 7
...
OK
4012275
4011646
4011059
4008870
4011555
4014719
4013710
Time taken: 169.683 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; set hive.map.aggr=false;
hive&amp;gt; select count(1) from search_result;
Total MapReduce jobs = 2
Number of reducers = 7
...
OK
28083834
Time taken: 204.804 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12662410" author="electrum" created="Fri, 9 Jan 2009 16:05:38 +0000"  >&lt;p&gt;This issue cannot be caught by the current unit tests as they use the local runner.  Should we have a test driver like TestCliDriver that uses MiniMRCluster?&lt;/p&gt;</comment>
                            <comment id="12662453" author="jsensarma" created="Fri, 9 Jan 2009 18:04:12 +0000"  >&lt;p&gt;yeah - definitely need to use miniMR - there&apos;s one (or more) Jiras on this already .. &lt;/p&gt;</comment>
                            <comment id="12662456" author="athusoo" created="Fri, 9 Jan 2009 18:10:59 +0000"  >&lt;p&gt;yes we should move to miniMR. The nfs related problem also seem to be related to what we do in MapRedTask in the local mode.&lt;/p&gt;</comment>
                            <comment id="12662857" author="jsensarma" created="Mon, 12 Jan 2009 02:08:00 +0000"  >&lt;p&gt;this is absolutely broken.&lt;/p&gt;

&lt;p&gt;i am trying count(1) with hive.map.aggr = true - and there is no map side aggregation happening (even though the explain has a map-side group by operator):&lt;/p&gt;

&lt;p&gt;      Alias -&amp;gt; Map Operator Tree:&lt;br/&gt;
        mm_users_goodip_count&lt;br/&gt;
            Select Operator&lt;br/&gt;
              Group By Operator&lt;br/&gt;
                aggregations:&lt;br/&gt;
                      expr: count(1)&lt;br/&gt;
                mode: hash&lt;br/&gt;
                Reduce Output Operator&lt;br/&gt;
                  sort order:&lt;br/&gt;
                  Map-reduce partition columns:&lt;br/&gt;
                        expr: rand()&lt;br/&gt;
                        type: double&lt;br/&gt;
                  tag: -1&lt;br/&gt;
                  value expressions:&lt;br/&gt;
                        expr: 0&lt;br/&gt;
                        type: bigint&lt;/p&gt;

&lt;p&gt;it seems that the groupbyDesc doe not have a &apos;keys&apos; field specified (in other map side aggregates - i can see the keys specified). &lt;/p&gt;

&lt;p&gt;At any rate - the mapper emits one output row for each input row in this case. This is completely broken ..&lt;/p&gt;</comment>
                            <comment id="12668550" author="namit" created="Thu, 29 Jan 2009 18:44:11 +0000"  >&lt;p&gt;marking duplicate of 256&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12413503">HIVE-256</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Jan 2009 18:04:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122038</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-220] incorrect log directory in TestMTQueries causing null pointer exception</title>
                <link>https://issues.apache.org/jira/browse/HIVE-220</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;mistyped  &apos;)&apos; on line 38 of TestMTQueries.java causing null pointer exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412088">HIVE-220</key>
            <summary>incorrect log directory in TestMTQueries causing null pointer exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2009 23:13:33 +0000</created>
                <updated>Sat, 17 Dec 2011 00:09:00 +0000</updated>
                            <resolved>Sat, 10 Jan 2009 00:03:14 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12662556" author="prasadc" created="Fri, 9 Jan 2009 23:29:03 +0000"  >&lt;p&gt;removed extra new line from build-common.xml&lt;/p&gt;</comment>
                            <comment id="12662557" author="athusoo" created="Fri, 9 Jan 2009 23:32:42 +0000"  >&lt;p&gt;looks good to me.&lt;/p&gt;

&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="12662564" author="dhruba" created="Sat, 10 Jan 2009 00:03:14 +0000"  >&lt;p&gt;I just committed this. Thanks Prasad!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397575" name="hive-220.patch" size="1634" author="prasadc" created="Fri, 9 Jan 2009 23:40:49 +0000"/>
                            <attachment id="12397573" name="hive-220.patch" size="1632" author="prasadc" created="Fri, 9 Jan 2009 23:29:03 +0000"/>
                            <attachment id="12397572" name="hive-220.patch" size="1634" author="prasadc" created="Fri, 9 Jan 2009 23:26:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Jan 2009 23:32:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-221] select * fails on subqueries without alias</title>
                <link>https://issues.apache.org/jira/browse/HIVE-221</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following query fails:&lt;br/&gt;
SELECT * FROM (SELECT * FROM tmp_asmith);              &lt;/p&gt;

&lt;p&gt;Additionally, although the error message is frequently &quot;... expected Identifies&quot;, in certain more complicated expressions this is not the case.  For example, in&lt;/p&gt;

&lt;p&gt;SELECT * FROM (SELECT * FROM tmp_asmith UNION ALL SELECT * FROM (SELECT * FROM tmp_asmith)) t;  &lt;/p&gt;

&lt;p&gt;the error message is &quot;FAILED: Parse Error: line 1:41 mismatched input &apos;UNION&apos; expecting )&quot;&lt;br/&gt;
(but works fine if (SELECT * FROM tmp_asmith) is given an alias)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412097">HIVE-221</key>
            <summary>select * fails on subqueries without alias</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sasmith">S. Alex Smith</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jan 2009 02:00:29 +0000</created>
                <updated>Thu, 17 Dec 2009 23:02:13 +0000</updated>
                            <resolved>Thu, 17 Dec 2009 23:02:13 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12792195" author="zshao" created="Thu, 17 Dec 2009 23:02:13 +0000"  >&lt;p&gt;In MySQL, the sub query alias is required.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Dec 2009 23:02:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73697</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8kv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-222] Group by on a combination of disitinct and non distinct aggregates can return serialization errors with map side aggregations.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-222</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For queries of the form (groupby2_map.q in the source)&lt;/p&gt;

&lt;p&gt;SELECT x, count(DISTINCT y), SUM&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; FROM t GROUP BY x&lt;/p&gt;

&lt;p&gt;when map side aggregation is on &lt;/p&gt;

&lt;p&gt;hive.map.aggr=true (This is off by default)&lt;/p&gt;

&lt;p&gt;The following exception can occur:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Caused by: java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.Double&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDeTypeDouble.serialize(DynamicSerDeTypeDouble.java:60)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDeFieldList.serialize(DynamicSerDeFieldList.java:235)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDeStructBase.serialize(DynamicSerDeStructBase.java:81)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDe.serialize(DynamicSerDe.java:174)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412118">HIVE-222</key>
            <summary>Group by on a combination of disitinct and non distinct aggregates can return serialization errors with map side aggregations.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="athusoo">Ashish Thusoo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jan 2009 15:24:22 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:37 +0000</updated>
                            <resolved>Tue, 13 Jan 2009 03:53:14 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12662674" author="athusoo" created="Sat, 10 Jan 2009 17:21:34 +0000"  >&lt;p&gt;Fix for the bug.&lt;/p&gt;

&lt;p&gt;There was a bug in way the the aggregation list was being generated for the map side aggregation. As a result the ordering of the aggregations in the map side groupby operator and the reduce side groupby operator would differ leading to this problem. Ideally, we should be using the row schema information to generate the order but that needs a much larger refactor of  how we generate plans in the group by case. For now this patch should fix the problem.&lt;/p&gt;

&lt;p&gt;There are prexisting tests that test this (groupby2_map.q and groupby3_map.q). The test case however relies on an internal hashmap giving the keys in a certain order. The bug was easily reproducible with the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-179&quot; title=&quot;SUBSTR function should work like other databases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-179&quot;&gt;&lt;del&gt;HIVE-179&lt;/del&gt;&lt;/a&gt;. I have tested it with that patch.&lt;/p&gt;</comment>
                            <comment id="12662675" author="athusoo" created="Sat, 10 Jan 2009 17:21:55 +0000"  >&lt;p&gt;submitting patch.&lt;/p&gt;</comment>
                            <comment id="12663056" author="prasadc" created="Mon, 12 Jan 2009 19:23:26 +0000"  >&lt;p&gt;looks good +1&lt;/p&gt;

&lt;p&gt;though it doesn&apos;t guarantee that HashMap will return objects in the same order in both the functions. &lt;/p&gt;</comment>
                            <comment id="12663210" author="zshao" created="Tue, 13 Jan 2009 03:53:14 +0000"  >&lt;p&gt;Committed revision 734008. Thanks Ashish!&lt;/p&gt;</comment>
                            <comment id="12664854" author="electrum" created="Sat, 17 Jan 2009 18:20:04 +0000"  >&lt;p&gt;Is there any value to adding the testcase from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-215&quot; title=&quot;Map-side aggregate with DISTINCT generates bad intermediate table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-215&quot;&gt;&lt;del&gt;HIVE-215&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12410745">HIVE-179</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12411832">HIVE-215</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12397608" name="patch-222.txt" size="5337" author="athusoo" created="Sat, 10 Jan 2009 17:21:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Jan 2009 19:23:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122041</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-222&quot; title=&quot;Group by on a combination of disitinct and non distinct aggregates can return serialization errors with map side aggregations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-222&quot;&gt;&lt;strike&gt;HIVE-222&lt;/strike&gt;&lt;/a&gt;. Fixed Group by on a combination of disitinct and non distinct aggregates. (Ashish Thusoo via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-223] when using map-side aggregates - perform single map-reduce group-by</title>
                <link>https://issues.apache.org/jira/browse/HIVE-223</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;today even when we do map side aggregates - we do multiple map-reduce jobs. however - the reason for doing multiple map-reduce group-bys (for single group-bys) was the fear of skews. When we are doing map side aggregates - skews should not exist for the most part. There can be two reason for skews:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;large number of entries for a single grouping set - map side aggregates should take care of this&lt;/li&gt;
	&lt;li&gt;badness in hash function that sends too much stuff to one reducer - we should be able to take care of this by having good hash functions (and prime number reducer counts)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So i think we should be able to do a single stage map-reduce when doing map-side aggregates.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412151">HIVE-223</key>
            <summary>when using map-side aggregates - perform single map-reduce group-by</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Jan 2009 20:03:47 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:41 +0000</updated>
                            <resolved>Sat, 7 Mar 2009 01:35:00 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12668917" author="namit" created="Fri, 30 Jan 2009 16:41:08 +0000"  >&lt;p&gt;Currently, there are too many options for the user: I think we should do the following:&lt;/p&gt;

&lt;p&gt;1. Provide a hint to the user where he specifies whether there is skew in the data or not. It would be better than a configurable variable, since this is specific to a query block and not for the whole query.&lt;br/&gt;
2. Provide a hint for the user whether he wants to do map-side aggregation or not. Again, for the same reason as mentioned above, it might be better to have it as a hint than the current approach of configurable variable. &lt;br/&gt;
    However, this can be postponed.&lt;br/&gt;
3. The default behavior is based on the fact that there is skew in the data.&lt;/p&gt;

&lt;p&gt;The behavior will be:&lt;/p&gt;

&lt;p&gt;1. If the query does not have a distinct, use map-side aggregation with 1 map-reduce job. Although, we can leave the existing option of no map-side aggregation for this scenario, I cant think of any reason why this &lt;br/&gt;
    would be useful.&lt;br/&gt;
2. If the query has a distinct:&lt;br/&gt;
    a. default behavior: skew with map-side aggr: 2 map-reduce jobs&lt;br/&gt;
    b. no skew with map-side aggr: 1 map-reduce job&lt;br/&gt;
    c. skew with no map-side aggr: 2 map-reduce jobs&lt;br/&gt;
    d. no skew with no map-side aggr: 1 map-reduce job&lt;/p&gt;</comment>
                            <comment id="12669165" author="jsensarma" created="Sat, 31 Jan 2009 09:35:32 +0000"  >&lt;p&gt;on very high cardinality dimensions - map-side aggregations do not work or require too much memory to make work. as we are also painfully learning tonight - lots of mappers run concurrently and using a lot of memory is a big problem. so we definitely need sort based techniques for such scenarios and that option needs to be available. however - in the same scenario - the risk of skew is very low - so a single map-reduce task is sufficient. we don&apos;t support that currently - but we should. So for simple group by&apos;s - please support:&lt;/p&gt;

&lt;p&gt;1a. map-side aggregations with 1 map-reduce&lt;br/&gt;
1b. sort based aggregations with 1 map-reduce&lt;/p&gt;

&lt;p&gt;i think for the distinct case - we can simplify/refine further. if the grouping+distinct keyset is low cardinality - option 1a above suffices. If the grouping+distinct keyset is high cardinality - then there are 3 sub-cases:&lt;br/&gt;
a) skew on none of neither distinct nor grouping keys : in this case map-side aggregates don&apos;t work and we need 1b again (distribute by grouping, sort by grouping,distincts)&lt;br/&gt;
b) skew on either one of distinct or grouping keys. in this case - data can be sprayed on whatever doesn&apos;t have skew. this will require 2 map-reduce if we have to spray on distinct column or 1 map-reduce if we can spray on grouping columns&lt;br/&gt;
c) skew on both the distinct and grouping keys. in this case map-side aggregation (1a) should work again (since substantial reduction can happen when the popular distinct keys overlap with popular grouping keys).&lt;br/&gt;
so in addition to 1a and 1b above it seems we should, for distincts, offer:&lt;/p&gt;

&lt;p&gt;2a - distribute by grouping columns, sort by grouping, distincts with 1 map-reduce&lt;br/&gt;
2b - distribute and sort by distinct columns, hash aggregation in reduce side, - 2 map-reduce&lt;/p&gt;

&lt;p&gt;between these 4 (1a/b, 2c/d) options - i think all cases are covered. sort based group-by&apos;s for non-distinct case would probably benefit from the use of a combiner (longer term).&lt;/p&gt;</comment>
                            <comment id="12670973" author="namit" created="Fri, 6 Feb 2009 01:17:02 +0000"  >&lt;p&gt;Specifying column specific skew at a column level for the user may be very difficult:&lt;/p&gt;

&lt;p&gt;I would instead propose the following.&lt;/p&gt;

&lt;p&gt;Have 2 parameters: cardinality and skew.&lt;/p&gt;

&lt;p&gt;Cardinality determines whether to use map-side aggregates or not.&lt;br/&gt;
Skew determines whether to use 1 or 2 map-reduce jobs.&lt;/p&gt;

&lt;p&gt;They are independent of each other.&lt;/p&gt;

&lt;p&gt;We can use the one existing parameter (hive.map.aggr) and add another one (hive.groupby.skewindata).&lt;/p&gt;

&lt;p&gt;It would be better to make them hints, so that they are query block specific, but that can be done later, since in general, we have been avoiding using hints.&lt;/p&gt;

&lt;p&gt;As far as the plans go: we have&lt;/p&gt;

&lt;p&gt;1. map-side aggregations with 1 map-reduce job:&lt;/p&gt;

&lt;p&gt;group by  grouping + distinct key on mapper.&lt;br/&gt;
group by/sort by grouping + distinct key&lt;/p&gt;


&lt;p&gt;2. sort based aggregations with 1 map-reduce job:  &lt;/p&gt;

&lt;p&gt;group by/sort by grouping + distinct key&lt;/p&gt;


&lt;p&gt;3. map-side aggregations with 2 map-reduce jobs:&lt;/p&gt;

&lt;p&gt;   0. group by/sort by grouping + distinct key (distinct == null if no distinct present)&lt;br/&gt;
   a. group by/sort by grouping + distinct key (distinct == random if no distinct present)&lt;br/&gt;
   b. group by/sort by grouping key&lt;/p&gt;

&lt;p&gt;4. sort based aggregations with 2 map-reduce jobs:&lt;/p&gt;

&lt;p&gt;   a. group by/sort by grouping + distinct key (distinct == random if no distinct present)&lt;br/&gt;
   b. group by/sort by grouping key&lt;/p&gt;
</comment>
                            <comment id="12671052" author="jsensarma" created="Fri, 6 Feb 2009 08:36:47 +0000"  >&lt;p&gt;the parameters make a lot of sense.&lt;/p&gt;

&lt;p&gt;for #1 and #2: &lt;/p&gt;

&lt;p&gt;&amp;gt; group by/sort by grouping + distinct key&lt;/p&gt;

&lt;p&gt;assuming this means - group by grouping, sort by grouping + distinct.&lt;/p&gt;

&lt;p&gt;#3 - this seems like the &apos;low cardinality, high skew case&apos;. i think high skew is not an issue in case of low cardinality. if we are dealing with a small number of groups in the first place - map side aggregates should reduce the data so much that skews wouldn&apos;t matter (ie. fall back to #1)&lt;/p&gt;</comment>
                            <comment id="12673569" author="namit" created="Sun, 15 Feb 2009 06:41:08 +0000"  >&lt;p&gt;In a follow-up, I will do the following:&lt;/p&gt;

&lt;p&gt;In case of map-side aggregates, keep a count of hash table entries and the total entries on the map side. If the ratio is bad, assume that the&lt;br/&gt;
user made a mistake, and switch to non map-side aggregation plan.&lt;/p&gt;</comment>
                            <comment id="12674016" author="jsensarma" created="Mon, 16 Feb 2009 17:48:44 +0000"  >&lt;p&gt;it seems that in the single map-reduce map aggregation case we are reducing by group-by + distinct. whereas we want to partition by group-by only. (gengroupbyplan1MR seems to do the right thing)&lt;/p&gt;

&lt;p&gt;(we should add test cases with multiple reducers ..)&lt;/p&gt;</comment>
                            <comment id="12674483" author="namit" created="Wed, 18 Feb 2009 06:19:36 +0000"  >&lt;p&gt;fixed the bug that joy spotted, and also performed some code cleanup&lt;/p&gt;</comment>
                            <comment id="12674891" author="namit" created="Thu, 19 Feb 2009 04:58:57 +0000"  >&lt;p&gt;fixed a small bug&lt;/p&gt;</comment>
                            <comment id="12674892" author="namit" created="Thu, 19 Feb 2009 05:01:06 +0000"  >&lt;p&gt;tested one big job for correctness&lt;/p&gt;</comment>
                            <comment id="12675464" author="jsensarma" created="Fri, 20 Feb 2009 20:34:07 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12676466" author="namit" created="Wed, 25 Feb 2009 01:06:56 +0000"  >&lt;p&gt;combined patch for 223/291 into this one.&lt;/p&gt;

&lt;p&gt;aded more tests, make group aggregation with no skew as the default.&lt;br/&gt;
Encountered some bugs while doing so for union2.txt, fixed them.&lt;/p&gt;

&lt;p&gt;Can you review again ?&lt;/p&gt;</comment>
                            <comment id="12678073" author="jsensarma" created="Mon, 2 Mar 2009 19:45:08 +0000"  >&lt;p&gt;+      // In case merge is called without an iterate, the &lt;br/&gt;
+      if (pos == -1) &lt;/p&gt;
{
+        mSum += Double.parseDouble(o);
+        mCount ++;
+      }
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;assuming this happens when iterate is called with null - is it correct to include the null entry in the count?&lt;/p&gt;

&lt;p&gt;I did some search on web (for ex: &lt;a href=&quot;http://www.databasejournal.com/features/mssql/article.php/3399931/Working-With-Columns-That-Contain-Null-Values.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.databasejournal.com/features/mssql/article.php/3399931/Working-With-Columns-That-Contain-Null-Values.htm&lt;/a&gt;) - it suggests that AVG definition skips nulls ..&lt;/p&gt;

&lt;p&gt;anyway - this is inconsistent with the way the iterate is coded (the iterate doesn&apos;t bump count for nulls)&lt;/p&gt;</comment>
                            <comment id="12678093" author="jsensarma" created="Mon, 2 Mar 2009 20:29:56 +0000"  >&lt;p&gt;other minor comments&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for the hash table size - might want to get rid of the modulo arithmetic and replace with shift (for performance)&lt;/li&gt;
	&lt;li&gt;increase log level when hash table is flushed. this is fairly significant event and worth info at least i think.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;otherwise looks good to me. do we have a test that&apos;s actually triggering change from hash based aggregate to non-hash aggregate?&lt;/p&gt;</comment>
                            <comment id="12678338" author="namit" created="Tue, 3 Mar 2009 15:02:45 +0000"  >&lt;p&gt;+ // In case merge is called without an iterate, the&lt;br/&gt;
+ if (pos == -1) &lt;/p&gt;
{ + mSum += Double.parseDouble(o); + mCount ++; + }


&lt;p&gt;The above code is not for nulls.&lt;/p&gt;

&lt;p&gt;Average changes the output to &apos;sum/count&apos; - the iterate method does so.&lt;/p&gt;

&lt;p&gt;In case of map-side aggregate, this does not happen, so pos is -1 i.e &apos;/&apos; is not found in the string.&lt;/p&gt;

&lt;p&gt;Will make other changes and resubmit the patch hopefully today itself&lt;/p&gt;</comment>
                            <comment id="12678499" author="jsensarma" created="Tue, 3 Mar 2009 23:03:40 +0000"  >&lt;p&gt;interesting. so there&apos;s something i don&apos;t understand then - in the hash aggregation case - it seems that we are always choosing &apos;terminatePartial&apos; as the aggregation method (which seems correct). This should always emit with &apos;/&apos;. So i am missing something (can discuss in perdson).&lt;/p&gt;</comment>
                            <comment id="12678607" author="namit" created="Wed, 4 Mar 2009 06:22:09 +0000"  >&lt;p&gt;When hash aggregation is disabled at run-time, the plan still remains the same - in that case, merge is directly called at the map side (instead of iterate).&lt;/p&gt;</comment>
                            <comment id="12678611" author="jsensarma" created="Wed, 4 Mar 2009 06:44:31 +0000"  >&lt;p&gt;how is this possible? the &quot;iterate&quot; versus &quot;merge&quot; decision seems to be made at compile time. i don&apos;t see any code in the runtime GroupByOperator that shifts from calling iterate to merge.  &lt;/p&gt;

&lt;p&gt;also - i remember this change (to UDAFAvg) was made before the changes for hive-291 were also merged into this patch.&lt;/p&gt;</comment>
                            <comment id="12678620" author="namit" created="Wed, 4 Mar 2009 07:17:22 +0000"  >&lt;p&gt;My mistake - merge is directly called (without iterate) in case of single map-reduce job with no map-side aggregations.&lt;br/&gt;
(hive.map.aggr=false and skew=false)&lt;/p&gt;</comment>
                            <comment id="12678621" author="namit" created="Wed, 4 Mar 2009 07:19:55 +0000"  >&lt;p&gt;I will add a configurable parameter to control the sampling frequency for checking map-side aggregates. That can be easily used for testing.&lt;/p&gt;</comment>
                            <comment id="12678934" author="namit" created="Wed, 4 Mar 2009 21:37:11 +0000"  >&lt;p&gt;added test for disabling map aggregation at run time&lt;/p&gt;</comment>
                            <comment id="12679744" author="jsensarma" created="Fri, 6 Mar 2009 22:09:01 +0000"  >&lt;p&gt;+1. ship it!&lt;/p&gt;</comment>
                            <comment id="12679793" author="zshao" created="Sat, 7 Mar 2009 01:35:00 +0000"  >&lt;p&gt;Committed revision 751166. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12400388" name="223.2.txt" size="109635" author="namit" created="Wed, 18 Feb 2009 06:19:08 +0000"/>
                            <attachment id="12400473" name="223.3.txt" size="109634" author="namit" created="Thu, 19 Feb 2009 04:59:20 +0000"/>
                            <attachment id="12400240" name="223.patch1.txt" size="55557" author="namit" created="Sun, 15 Feb 2009 06:39:19 +0000"/>
                            <attachment id="12401464" name="hive.223.4.patch" size="829784" author="namit" created="Wed, 4 Mar 2009 21:36:41 +0000"/>
                            <attachment id="12400894" name="patch.txt" size="824810" author="namit" created="Wed, 25 Feb 2009 01:05:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 30 Jan 2009 16:41:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73695</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-223&quot; title=&quot;when using map-side aggregates - perform single map-reduce group-by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-223&quot;&gt;&lt;strike&gt;HIVE-223&lt;/strike&gt;&lt;/a&gt;. Single map-reduce group-by using map-side aggregation. (Namit Jain via zshao)&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-224] implement lfu based flushing policy for map side aggregates</title>
                <link>https://issues.apache.org/jira/browse/HIVE-224</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;currently we flush some random set of rows when the map side hash table approaches memory limits.&lt;/p&gt;

&lt;p&gt;we have discussed a strategy of flushing hash table entries that have the been seen the least number of times (effectively LFU flushing strategy). This will be very effective at reducing the amount of data sent from map to reduce step - as well as reduce the chances for any skews.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412152">HIVE-224</key>
            <summary>implement lfu based flushing policy for map side aggregates</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Jan 2009 20:11:11 +0000</created>
                <updated>Thu, 11 Mar 2010 02:37:50 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12757646" author="hammer" created="Sat, 19 Sep 2009 10:02:38 +0000"  >&lt;p&gt;Hey Joy,&lt;/p&gt;

&lt;p&gt;Out of curiosity, did you guys ever look at this issue further?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12757715" author="jsensarma" created="Sun, 20 Sep 2009 07:37:29 +0000"  >&lt;p&gt;no - i guess we didn&apos;t - although it&apos;s an easy one.. fallout of reading the SOSP paper?&lt;/p&gt;

&lt;p&gt;ridiculous - they are reporting &apos;accumator partial-hash&apos; as something new (never reported in literature) when reference #1 in their paper implements exactly that. so much for research.&lt;/p&gt;</comment>
                            <comment id="12841692" author="jwarren" created="Fri, 5 Mar 2010 03:53:30 +0000"  >&lt;p&gt;think i bumped up against this or a related issue today - is there any plans on incorporating this into a future release?&lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
-James&lt;/p&gt;</comment>
                            <comment id="12841714" author="zshao" created="Fri, 5 Mar 2010 05:48:30 +0000"  >&lt;p&gt;Hi James, currently we don&apos;t have the bandwidth to do this, but I guess it won&apos;t be too hard - we just need to use &lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/util/LinkedHashMap.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/util/LinkedHashMap.html&lt;/a&gt; (search for LRU).&lt;br/&gt;
Are you interested in joining force on this?&lt;/p&gt;</comment>
                            <comment id="12843878" author="jwarren" created="Thu, 11 Mar 2010 02:37:50 +0000"  >&lt;p&gt;Unfortunately have bandwidth limitations myself &amp;#8211; but when (if?) my queue clears I&apos;ll be happy to give it a go.&lt;/p&gt;

&lt;p&gt;cheers,&lt;br/&gt;
-James&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Sep 2009 10:02:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08oen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-225] incorrect reducer count reported on some group bys</title>
                <link>https://issues.apache.org/jira/browse/HIVE-225</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;select count(1) from mm_base where ip like &apos;10.130.1.%&apos;;&lt;/p&gt;

&lt;p&gt;uses 1 reducer, but console says:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; &lt;br/&gt;
select count(1) from mm_base where ip like &apos;10.130.1.%&apos;;&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Number of reducers = 31&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412153">HIVE-225</key>
            <summary>incorrect reducer count reported on some group bys</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Jan 2009 20:21:44 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:42 +0000</updated>
                            <resolved>Thu, 17 Dec 2009 23:02:55 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12792196" author="zshao" created="Thu, 17 Dec 2009 23:02:55 +0000"  >&lt;p&gt;Should be fixed long time ago.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Dec 2009 23:02:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8lj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-226] SerDe should support &quot;null&quot; column values</title>
                <link>https://issues.apache.org/jira/browse/HIVE-226</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently if you attempt to load data that has null values it will work but selecting data back out of the table will fail due to a null pointer exception during deserialization.&lt;/p&gt;

&lt;p&gt;Suppose we have a generic users table with ^A separated fields.&lt;/p&gt;

&lt;p&gt;CREATE TABLE users &lt;br/&gt;
(id STRING, properties MAP&amp;lt;STRING, STRING&amp;gt;) &lt;br/&gt;
ROW FORMAT DELIMITED &lt;br/&gt;
COLLECTION ITEMS TERMINATED BY &apos;44&apos;&lt;br/&gt;
MAP KEYS TERMINATED BY &apos;58&apos;&lt;br/&gt;
STORED AS TEXTFILE;&lt;/p&gt;

&lt;p&gt;we might insert this data (where spaces are ^A characters)&lt;/p&gt;

&lt;p&gt;1 key:value&lt;br/&gt;
2 &lt;br/&gt;
3 key:value&lt;/p&gt;

&lt;p&gt;Then the following queries will fail&lt;/p&gt;

&lt;p&gt;SELECT id FROM users;&lt;br/&gt;
SELECT id, properties FROM users;&lt;br/&gt;
SELECT properties FROM users;&lt;/p&gt;

&lt;p&gt;But they should not fail.&lt;/p&gt;

&lt;p&gt;Anytime the field delimiter is encountered twice in a row or the field delimiter is encountered followed immediately by the line delimiter a non-existent value should be assumed for the appropriate column.&lt;/p&gt;

&lt;p&gt;To circumvent this in my application I have been substituting my own &quot;reserved&quot; world NULL and the key/value pair NULL:NULL to indicate to my application that particular fields currently have no value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412168">HIVE-226</key>
            <summary>SerDe should support &quot;null&quot; column values</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="besquared">Josh Ferguson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Jan 2009 05:36:41 +0000</created>
                <updated>Mon, 7 Mar 2011 20:28:55 +0000</updated>
                            <resolved>Mon, 7 Mar 2011 20:28:55 +0000</resolved>
                                                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12680701" author="athusoo" created="Wed, 11 Mar 2009 00:21:03 +0000"  >&lt;p&gt;This works with \N in the load file for nulls. We have a test for that - input21.q.&lt;/p&gt;</comment>
                            <comment id="12793119" author="zshao" created="Mon, 21 Dec 2009 08:39:15 +0000"  >&lt;p&gt;This is fixed long time ago in LazySimpleSerDe.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 Mar 2009 00:21:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8lr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
