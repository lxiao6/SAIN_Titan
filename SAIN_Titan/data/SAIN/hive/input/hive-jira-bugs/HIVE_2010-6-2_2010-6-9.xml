<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:15:57 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2010-6-2+AND+created+%3C%3D+2010-6-9+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="15" total="15"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-1383] allow HBase WAL to be disabled</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1383</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Disabling WAL can lead to much better INSERT performance in cases where other means of safe recovery (such as bulk import) are available.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465924">HIVE-1383</key>
            <summary>allow HBase WAL to be disabled</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2010 01:37:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:58 +0000</updated>
                            <resolved>Fri, 18 Jun 2010 02:43:44 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12874366" author="jvs" created="Wed, 2 Jun 2010 01:40:02 +0000"  >&lt;p&gt;Need to add a test; I&apos;m just stashing this preliminary patch here so I don&apos;t lose it.&lt;/p&gt;</comment>
                            <comment id="12875012" author="hammer" created="Thu, 3 Jun 2010 08:51:02 +0000"  >&lt;p&gt;Ignore the link to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1932&quot; title=&quot;Encourage use of &amp;#39;lzo&amp;#39; compression... add the wiki page to getting started&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1932&quot;&gt;&lt;del&gt;HBASE-1932&lt;/del&gt;&lt;/a&gt;--was a typo. Sorry about that, can&apos;t remove links.&lt;/p&gt;</comment>
                            <comment id="12875152" author="jvs" created="Thu, 3 Jun 2010 15:24:20 +0000"  >&lt;p&gt;To remove a link, click on the &quot;Issue Links:&quot; over to the left of the links; from there you can delete them.&lt;/p&gt;</comment>
                            <comment id="12875258" author="jvs" created="Thu, 3 Jun 2010 19:18:36 +0000"  >&lt;p&gt;Added a testcase.&lt;/p&gt;</comment>
                            <comment id="12875263" author="jvs" created="Thu, 3 Jun 2010 19:35:57 +0000"  >&lt;p&gt;Just noticed that my testcase here conflicts with the one I added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1228&quot; title=&quot;allow HBase key column to be anywhere in Hive table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1228&quot;&gt;&lt;del&gt;HIVE-1228&lt;/del&gt;&lt;/a&gt;; I&apos;ll update it after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1228&quot; title=&quot;allow HBase key column to be anywhere in Hive table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1228&quot;&gt;&lt;del&gt;HIVE-1228&lt;/del&gt;&lt;/a&gt; gets committed.&lt;/p&gt;</comment>
                            <comment id="12875833" author="jvs" created="Sat, 5 Jun 2010 01:44:33 +0000"  >&lt;p&gt;Latest patch is rebased against the commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1228&quot; title=&quot;allow HBase key column to be anywhere in Hive table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1228&quot;&gt;&lt;del&gt;HIVE-1228&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12876464" author="nzhang" created="Mon, 7 Jun 2010 22:33:08 +0000"  >&lt;p&gt;I will take a look.&lt;/p&gt;</comment>
                            <comment id="12876480" author="nzhang" created="Mon, 7 Jun 2010 23:23:33 +0000"  >&lt;p&gt;Looks good in general, except one nitpick: should we move HBASE_WAL_ENABLED = &quot;hive.hbase.wal.enabled&quot; to HiveConf.java and add an entry to hive-default.xml? It would be easier for users to browse all hive settings and their default values from a centralized conf file. &lt;/p&gt;</comment>
                            <comment id="12879530" author="jvs" created="Wed, 16 Jun 2010 21:57:04 +0000"  >&lt;p&gt;New patch with HiveConf changes.&lt;/p&gt;</comment>
                            <comment id="12879531" author="jvs" created="Wed, 16 Jun 2010 21:57:22 +0000"  >&lt;p&gt;Ning, can you take a look at this one?&lt;/p&gt;</comment>
                            <comment id="12879850" author="nzhang" created="Thu, 17 Jun 2010 17:28:42 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="12880056" author="nzhang" created="Fri, 18 Jun 2010 02:43:44 +0000"  >&lt;p&gt;Committed. Thanks John!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12438532">HBASE-1923</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12380704">HBASE-48</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446088" name="HIVE-1383.1.patch" size="2943" author="jvs" created="Wed, 2 Jun 2010 01:40:02 +0000"/>
                            <attachment id="12446276" name="HIVE-1383.2.patch" size="21552" author="jvs" created="Thu, 3 Jun 2010 19:18:36 +0000"/>
                            <attachment id="12446395" name="HIVE-1383.3.patch" size="22509" author="jvs" created="Sat, 5 Jun 2010 01:43:57 +0000"/>
                            <attachment id="12447281" name="HIVE-1383.4.patch" size="23883" author="jvs" created="Wed, 16 Jun 2010 21:57:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Jun 2010 08:51:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72932</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1384] HiveServer should run as the user who submitted the query.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1384</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12466029">HIVE-1384</key>
            <summary>HiveServer should run as the user who submitted the query.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 00:08:14 +0000</created>
                <updated>Sat, 9 Feb 2013 08:16:02 +0000</updated>
                                                                            <component>Metastore</component>
                    <component>Security</component>
                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13008077" author="abakshi" created="Thu, 17 Mar 2011 19:04:53 +0000"  >&lt;p&gt;This is required to use hive authorization infrastructure. &lt;/p&gt;</comment>
                            <comment id="13575111" author="wenli" created="Sat, 9 Feb 2013 08:16:02 +0000"  >&lt;p&gt;any update on this issue?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Mar 2011 19:04:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06apr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1385] UDF field() doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1385</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I tried it against one of my table:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; desc r;&lt;br/&gt;
OK&lt;br/&gt;
key int&lt;br/&gt;
value string&lt;br/&gt;
a string&lt;/p&gt;

&lt;p&gt;hive&amp;gt; select * from r;&lt;br/&gt;
OK&lt;br/&gt;
4 val_356 NULL&lt;br/&gt;
4 val_356 NULL&lt;br/&gt;
484 val_169 NULL&lt;br/&gt;
484 val_169 NULL&lt;br/&gt;
2000 val_169 NULL&lt;br/&gt;
2000 val_169 NULL&lt;br/&gt;
3000 val_169 NULL&lt;br/&gt;
3000 val_169 NULL&lt;br/&gt;
4000 val_125 NULL&lt;br/&gt;
4000 val_125 NULL&lt;/p&gt;

&lt;p&gt;hive&amp;gt; select *, field(value, &apos;val_169&apos;) from r; &lt;br/&gt;
OK&lt;br/&gt;
4 val_356 NULL 0&lt;br/&gt;
4 val_356 NULL 0&lt;br/&gt;
484 val_169 NULL 0&lt;br/&gt;
484 val_169 NULL 0&lt;br/&gt;
2000 val_169 NULL 0&lt;br/&gt;
2000 val_169 NULL 0&lt;br/&gt;
3000 val_169 NULL 0&lt;br/&gt;
3000 val_169 NULL 0&lt;br/&gt;
4000 val_125 NULL 0&lt;br/&gt;
4000 val_125 NULL 0&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466037">HIVE-1385</key>
            <summary>UDF field() doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sdong">Siying Dong</assignee>
                                    <reporter username="sdong">Siying Dong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 01:58:32 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:56 +0000</updated>
                            <resolved>Thu, 15 Jul 2010 21:17:14 +0000</resolved>
                                    <version>0.5.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12874915" author="jvs" created="Thu, 3 Jun 2010 02:09:16 +0000"  >&lt;p&gt;I think the bug is with usage of Object.equals for the comparison.  Doing a toString on both sides first seems like a reasonable fix given the current spec for the function, or we could do whatever Paul did for IN.&lt;/p&gt;</comment>
                            <comment id="12888158" author="sdong" created="Wed, 14 Jul 2010 02:46:43 +0000"  >&lt;p&gt;Fix UDF field()&lt;/p&gt;</comment>
                            <comment id="12888615" author="he yongqiang" created="Wed, 14 Jul 2010 23:47:33 +0000"  >&lt;p&gt;will take a look.&lt;/p&gt;</comment>
                            <comment id="12888633" author="he yongqiang" created="Thu, 15 Jul 2010 00:18:10 +0000"  >&lt;p&gt;discussed with Siying offline.&lt;br/&gt;
1. use ObjectInspectUtils.compare&lt;br/&gt;
2. add more test, the first argument can also be a column&lt;br/&gt;
3. add a negative test for complex types.&lt;/p&gt;</comment>
                            <comment id="12888655" author="sdong" created="Thu, 15 Jul 2010 01:08:19 +0000"  >&lt;p&gt;use ObjectInspector.compare() and add some test cases.&lt;/p&gt;</comment>
                            <comment id="12888927" author="he yongqiang" created="Thu, 15 Jul 2010 21:17:13 +0000"  >&lt;p&gt;I just committed. Thanks Siying!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12449412" name="HIVE-1385.1.patch" size="8903" author="sdong" created="Wed, 14 Jul 2010 02:46:43 +0000"/>
                            <attachment id="12449516" name="HIVE-1385.2.patch" size="9284" author="sdong" created="Thu, 15 Jul 2010 01:08:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Jun 2010 02:09:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72931</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123055</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1386] HiveQL SQL Compliance (Umbrella)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1386</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is an umbrella ticket to track work related to HiveQL compliance with the SQL standard, e.g. supported query syntax, data types, views, catalog access, etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466060">HIVE-1386</key>
            <summary>HiveQL SQL Compliance (Umbrella)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 07:17:13 +0000</created>
                <updated>Wed, 19 Sep 2012 05:52:43 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>17</watches>
                                                                <comments>
                            <comment id="12876554" author="hammer" created="Tue, 8 Jun 2010 05:41:59 +0000"  >&lt;p&gt;Do we need ORDER BY as well (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-61&quot; title=&quot;Implment ORDER BY&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-61&quot;&gt;&lt;del&gt;HIVE-61&lt;/del&gt;&lt;/a&gt;)?&lt;/p&gt;</comment>
                            <comment id="12876556" author="nzhang" created="Tue, 8 Jun 2010 06:02:04 +0000"  >&lt;p&gt;@jeff, order by is already supported.&lt;/p&gt;

&lt;p&gt;In addition, I see some requests for (sorry couldn&apos;t find out if they have a JIRA open since the web site is extremely slow).&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;UNION ALL without the outer SELET * wrapper&lt;/li&gt;
	&lt;li&gt;INSERT INTO/APPEND in addition to INSERT OVERWRITE&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12876716" author="hammer" created="Tue, 8 Jun 2010 16:34:59 +0000"  >&lt;p&gt;Ning: where? &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/LanguageManual/SortBy&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/LanguageManual/SortBy&lt;/a&gt; doesn&apos;t list it, but does show how to simulate ORDER BY. I wasn&apos;t sure if that was sufficient.&lt;/p&gt;</comment>
                            <comment id="12876950" author="nzhang" created="Wed, 9 Jun 2010 04:38:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-61&quot; title=&quot;Implment ORDER BY&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-61&quot;&gt;&lt;del&gt;HIVE-61&lt;/del&gt;&lt;/a&gt; (order by) has been committed long time ago. Maybe the language manual was not updated. &lt;/p&gt;</comment>
                            <comment id="12877183" author="hammer" created="Wed, 9 Jun 2010 20:04:26 +0000"  >&lt;p&gt;The discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-61&quot; title=&quot;Implment ORDER BY&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-61&quot;&gt;&lt;del&gt;HIVE-61&lt;/del&gt;&lt;/a&gt; seems to indicate that SORT BY was decided upon as the syntax and that, to simulate ORDER BY behavior, one should set the number of reduce tasks to be 1. I don&apos;t have an instance of Hive running near by, but if there is now ORDER BY in the syntax, could you please update the language guide?&lt;/p&gt;</comment>
                            <comment id="12877204" author="appodictic" created="Wed, 9 Jun 2010 20:58:16 +0000"  >&lt;p&gt;As a side note maybe with something total order partitioner we can do a true map/reduce order by.&lt;/p&gt;</comment>
                            <comment id="12879037" author="nzhang" created="Tue, 15 Jun 2010 17:36:05 +0000"  >&lt;p&gt;I&apos;ve updated the wiki to include &quot;order by&quot;. Please check it out at &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/LanguageManual/SortBy&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/LanguageManual/SortBy&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12466605">HIVE-1398</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12607881">HIVE-3472</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12414345">HIVE-282</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12463741">HIVE-1337</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12411177">HIVE-192</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12479846">HIVE-1790</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12459949">HIVE-1269</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Jun 2010 05:41:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>umbrella sql hql compliance sql-92</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1387] Add PERCENTILE_APPROX which works with double data type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1387</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The PERCENTILE UDAF does not work with double datatype.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466126">HIVE-1387</key>
            <summary>Add PERCENTILE_APPROX which works with double data type</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mayanklahiri">Mayank Lahiri</assignee>
                                    <reporter username="vaggarw">Vaibhav Aggarwal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 21:03:09 +0000</created>
                <updated>Tue, 27 Mar 2012 18:22:45 +0000</updated>
                            <resolved>Sat, 26 Jun 2010 00:13:12 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>OLAP</component>
                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12875295" author="vaggarw" created="Thu, 3 Jun 2010 21:07:38 +0000"  >&lt;p&gt;I have created a patch which fixes the Hive user defined aggregation function &quot;percentile&quot; to work for double data type and to throw a meaningful exception when the input is out of range.&lt;/p&gt;

&lt;p&gt;The patch does the following:&lt;/p&gt;

&lt;p&gt;1. Uses DoubleWritable instead of LongWritable to work for both int and double data types.&lt;br/&gt;
2. The percentile function expects the input to be in the range 0.0 to 1.0. The patch modifies the code to throw a UDFArgumentTypeException when the input is out of range.&lt;/p&gt;</comment>
                            <comment id="12875332" author="vaggarw" created="Thu, 3 Jun 2010 22:35:05 +0000"  >&lt;p&gt;I realized that there was already a fix for enforcing range 0.0 to 1.0 so I regenerated the patch to use DoubleWritable instead of LongWritable to work for both int and double data types.&lt;/p&gt;</comment>
                            <comment id="12876809" author="mayanklahiri" created="Tue, 8 Jun 2010 21:13:41 +0000"  >&lt;p&gt;The current implementation of percentile() seems to buffer the entire input stream as an exact histogram. This is likely to choke on massive datasets, even more so with doubles instead of longs where aggregating multiples values as counts can have even less of an effect than with doubles.&lt;/p&gt;

&lt;p&gt;I&apos;m currently working on a constant-space histogram UDAF. Estimating percentiles from such a histogram might be a better option on larger datasets. Alternatively, we might consider splitting this functionality into percentile_exact() and percentile_approx() UDAFs, using this version and the constant-space histogram approximation respectively.&lt;/p&gt;</comment>
                            <comment id="12879894" author="mayanklahiri" created="Thu, 17 Jun 2010 19:00:33 +0000"  >&lt;p&gt;This is what I suggest we do to resolve this issue:&lt;/p&gt;

&lt;p&gt;1. Create a new percentile_approx() function that overrides GenericUDAFHistogramNumeric to approximate a fine-grained histogram with many bins (say 10,000 for example, but I&apos;ll run some experiments), and then use the histogram to estimate the percentile value.&lt;/p&gt;

&lt;p&gt;2. Convert the existing simple percentile() UDAF to a generic UDAF. When the input is byte, short, int, or long, then use the existing code (with some modifications, like converting the linear scan to a binary search). When the input is float or double, then automatically use the percentile_approx() function. &lt;/p&gt;</comment>
                            <comment id="12879943" author="jvs" created="Thu, 17 Jun 2010 21:35:41 +0000"  >&lt;p&gt;Two refinements:&lt;/p&gt;

&lt;p&gt;1) Rather than subclassing GenericUDAFHistogramNumeric directly, I would recommend factoring out commonality (either into an abstract base, or into a separate reusable class representing the histogram component).&lt;/p&gt;

&lt;p&gt;2) For the new percentile generic UDAF, use the defaults you describe, but allow the user to override (i.e. to be able to choose approx even for integers, or to be able to choose exact for floating point).  And for approx, provide override in addition to your default on the number of bins.&lt;/p&gt;</comment>
                            <comment id="12881954" author="mayanklahiri" created="Wed, 23 Jun 2010 23:32:30 +0000"  >&lt;p&gt;I&apos;ve attached &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1387&quot; title=&quot;Add PERCENTILE_APPROX which works with double data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1387&quot;&gt;&lt;del&gt;HIVE-1387&lt;/del&gt;&lt;/a&gt;.2.patch, which does the following:&lt;/p&gt;

&lt;p&gt;(1) Creates a percentile_approx() UDAF which uses the histogram_numeric() UDAF to estimate quantiles from a histogram. The syntax matches the existing percentile() UDAF, and extends it with a third parameter that specifies the number of histogram bins to use (and thus, the accuracy of quantile estimation):&lt;/p&gt;

&lt;p&gt;SELECT percentile_approx(val, 0.5) FROM random;    // estimates the median&lt;br/&gt;
SELECT percentile_approx(val, array(0.5, 0.95, 0.98)) FROM random; // estimates 3 quantiles&lt;br/&gt;
SELECT percentile_approx(val, 0.5, 1000) FROM random; // estimates the median using 1,000 histogram bins instead of the default of 10,000.&lt;/p&gt;

&lt;p&gt;(2) I&apos;ve left the existing percentile() UDAF as it is for the following reasons: when the number of unique values in a column is relatively small, percentile_approx() will return an exact result. When the number of unique values in a column is very large (as one might expect with double), then percentile() will run out of memory and crash, so there&apos;s really no need to modify the existing percentile() to support doubles.&lt;/p&gt;

&lt;p&gt;(3) The accuracy of quantile estimation seems to be pretty good. Attached a graph showing approximation quality for the median using different histogram sizes for random datasets of 100,000 numbers. The default number of histogram bins is 10,000, which appears to work quite well.&lt;/p&gt;

&lt;p&gt;(4) This patch also refactors the histogram_numeric() class to put all the generic histogram functionality into a re-usable inner class. &lt;/p&gt;</comment>
                            <comment id="12882324" author="hbasereviewboard" created="Thu, 24 Jun 2010 20:49:31 +0000"  >&lt;p&gt;Message from: &quot;John Sichi&quot; &amp;lt;jsichi@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/233/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/233/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;review by jvs&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1387&quot; title=&quot;Add PERCENTILE_APPROX which works with double data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1387&quot;&gt;&lt;del&gt;HIVE-1387&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1387&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1387&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/a&gt; 957296 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogramNumeric.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogramNumeric.java&lt;/a&gt; 957296 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFPercentileApprox.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFPercentileApprox.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/queries/clientpositive/udaf_percentile_approx.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/queries/clientpositive/udaf_percentile_approx.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/udaf_percentile_approx.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/udaf_percentile_approx.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/233/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/233/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;

</comment>
                            <comment id="12882392" author="mayanklahiri" created="Thu, 24 Jun 2010 23:09:27 +0000"  >&lt;p&gt;(1) Moved NumericHistogram into a top-level class&lt;/p&gt;

&lt;p&gt;(2) Beefed up Javadocs and Hive descriptions for percentile_approx() and histogram_numeric()&lt;/p&gt;

&lt;p&gt;(3) Fixed typos&lt;/p&gt;</comment>
                            <comment id="12882450" author="jvs" created="Fri, 25 Jun 2010 05:32:16 +0000"  >&lt;p&gt;+1.  Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12882660" author="jvs" created="Fri, 25 Jun 2010 17:57:00 +0000"  >&lt;p&gt;Test show_functions.q is failing due to the addition of the new function.&lt;/p&gt;</comment>
                            <comment id="12882680" author="mayanklahiri" created="Fri, 25 Jun 2010 18:53:13 +0000"  >&lt;p&gt;Sorry about that! There&apos;s always that last step. Will add a checklist to the Wiki to help future UD(A)F authors. &lt;/p&gt;</comment>
                            <comment id="12882775" author="jvs" created="Sat, 26 Jun 2010 00:02:14 +0000"  >&lt;p&gt;Speaking of wiki...can you also update this page with descriptions for percentile, percentile_approx, variance, and histogram_numeric?  And while you are in there, might as well cover stddev since that has always been missing too.  Note that variance and stddev both have _pop and _samp versions.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/LanguageManual/UDF&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/LanguageManual/UDF&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Just one-line descriptions are fine here...users can execute DESCRIBE to get the details.&lt;/p&gt;</comment>
                            <comment id="12882778" author="jvs" created="Sat, 26 Jun 2010 00:13:12 +0000"  >&lt;p&gt;Committed.  Thanks Mayank!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12413568">HIVE-259</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12447903" name="HIVE-1387.2.patch" size="45001" author="mayanklahiri" created="Wed, 23 Jun 2010 23:32:30 +0000"/>
                            <attachment id="12447996" name="HIVE-1387.3.patch" size="51642" author="mayanklahiri" created="Thu, 24 Jun 2010 23:09:27 +0000"/>
                            <attachment id="12448082" name="HIVE-1387.4.patch" size="52010" author="mayanklahiri" created="Fri, 25 Jun 2010 18:53:13 +0000"/>
                            <attachment id="12447904" name="median_approx_quality.png" size="20968" author="mayanklahiri" created="Wed, 23 Jun 2010 23:32:30 +0000"/>
                            <attachment id="12446293" name="patch-1387-1.patch" size="10656" author="vaggarw" created="Thu, 3 Jun 2010 22:33:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Jun 2010 21:13:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123056</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1388] combinehiveinputformat does not work if files are of different types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1388</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;rop table t1;&lt;br/&gt;
drop table t2;&lt;/p&gt;


&lt;p&gt;create table t1 (key string, value string) partitioned by (ds string, hr string);&lt;br/&gt;
create table t2 (key string, value string) partitioned by (ds string);&lt;/p&gt;

&lt;p&gt;insert overwrite table t1 partition (ds=&apos;1&apos;, hr=&apos;1&apos;) select key, value from src cluster by key;&lt;br/&gt;
insert overwrite table t1 partition (ds=&apos;1&apos;, hr=&apos;2&apos;) select key, value from src cluster by key;&lt;br/&gt;
insert overwrite table t1 partition (ds=&apos;1&apos;, hr=&apos;2&apos;) select key, value from t1 where ds = &apos;1&apos; and hr = &apos;2&apos;;&lt;/p&gt;

&lt;p&gt;desc extended t1;&lt;br/&gt;
desc extended t1 partition (ds=&apos;1&apos;, hr=&apos;1&apos;);&lt;br/&gt;
desc extended t1 partition (ds=&apos;1&apos;, hr=&apos;2&apos;);&lt;/p&gt;

&lt;p&gt;alter table t2 add partition (ds=&apos;1&apos;) location &apos;/data/users/njain/hive3/hive3/build/ql/test/data/warehouse/t1/ds=1&apos;;&lt;br/&gt;
select count(1) from t2 where ds=&apos;1&apos;;&lt;/p&gt;

&lt;p&gt;set hive.input.format = org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;&lt;/p&gt;

&lt;p&gt;select count(1) from t2 where ds=&apos;1&apos;;&lt;/p&gt;

&lt;p&gt;drop table t1;&lt;br/&gt;
drop table t2;&lt;/p&gt;



&lt;p&gt;Consider the above testcase, some files are generated by mappers, whereas some others are generated by reducers. &lt;br/&gt;
It is therefore possible that some files contain Text in their key, whereas others contain BytesWritable.&lt;br/&gt;
Due to that, combinehiveInputFormat record reader may get an error.&lt;/p&gt;

&lt;p&gt;Note that, this works in hiveinputformat because different files are not combined in the same mapper - it even works if&lt;br/&gt;
we query &apos;t1&apos; because different partitions are not combined in the same mapper&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466138">HIVE-1388</key>
            <summary>combinehiveinputformat does not work if files are of different types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 22:56:30 +0000</created>
                <updated>Sat, 17 Dec 2011 00:04:03 +0000</updated>
                            <resolved>Fri, 4 Jun 2010 03:56:11 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12875343" author="namit" created="Thu, 3 Jun 2010 23:01:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1359&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1359&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Will add a test for this after the above jira is fixed, because this can only be reproduced with CombineHiveInputFormat, where all &lt;br/&gt;
hadoop 17 tests will break.&lt;/p&gt;</comment>
                            <comment id="12875344" author="namit" created="Thu, 3 Jun 2010 23:02:01 +0000"  >&lt;p&gt;Have verified the fix in a production hadoop 20 cluster&lt;/p&gt;</comment>
                            <comment id="12875363" author="nzhang" created="Thu, 3 Jun 2010 23:38:24 +0000"  >&lt;p&gt;Is it possible the value object of different files are also different? If not shouldn&apos;t the value parameter in initNextRecordReader() be removed?&lt;/p&gt;</comment>
                            <comment id="12875379" author="namit" created="Fri, 4 Jun 2010 00:12:49 +0000"  >&lt;p&gt;I dont know if the value can be different.&lt;br/&gt;
But, to be sure, I will change the Value also&lt;/p&gt;</comment>
                            <comment id="12875381" author="namit" created="Fri, 4 Jun 2010 00:16:17 +0000"  >&lt;p&gt;I meant, I will remove the value from initNextRecordReader()&lt;/p&gt;</comment>
                            <comment id="12875388" author="nzhang" created="Fri, 4 Jun 2010 00:27:38 +0000"  >&lt;p&gt;+1. will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="12875456" author="nzhang" created="Fri, 4 Jun 2010 03:56:11 +0000"  >&lt;p&gt;committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446297" name="hive.1388.1.patch" size="3394" author="namit" created="Thu, 3 Jun 2010 23:03:32 +0000"/>
                            <attachment id="12446308" name="hive.1388.2.patch" size="3372" author="namit" created="Fri, 4 Jun 2010 00:20:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Jun 2010 23:38:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1389] Add framework for negative tests against HBase handler</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1389</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently only positive testcases are supported.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466140">HIVE-1389</key>
            <summary>Add framework for negative tests against HBase handler</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 23:05:08 +0000</created>
                <updated>Wed, 16 Jun 2010 01:59:45 +0000</updated>
                                            <version>0.6.0</version>
                                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i014xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1390] push column projection down to HBase handler&apos;s getSplits</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1390</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We already push down column projections for the actual scans; maybe we should do the same for getSplits?  I don&apos;t think it makes a difference currently (since HBase determines the splits based on the regions), but in the future, if they get smarter and adjust the splits based on column volumetrics, then this might make a difference as an optimization.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466142">HIVE-1390</key>
            <summary>push column projection down to HBase handler&apos;s getSplits</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 23:08:01 +0000</created>
                <updated>Wed, 16 Jun 2010 02:00:21 +0000</updated>
                                            <version>0.6.0</version>
                                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42518</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i014xb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4567</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1391] Various issues when using MS-SQL2005 as the Hive Metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1391</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When I have tried to use MS-SQL2005 as the hive metastore I have encountered numerous issues.&lt;/p&gt;

&lt;p&gt;My configuration:&lt;/p&gt;

&lt;p&gt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;javax.jdo.option.ConnectionURL&amp;lt;/name&amp;gt;&lt;br/&gt;
 &amp;lt;value&amp;gt;jdbc:sqlserver://cwdbint05:1445;DatabaseName=HiveMetastore;&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;JDBC connect string for a JDBC metastore&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;javax.jdo.option.ConnectionDriverName&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;Driver class name for a JDBC metastore&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;javax.jdo.option.ConnectionUserName&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;HiveUser&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;username to use against metastore database&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;javax.jdo.option.ConnectionPassword&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;XXXXXXXXXXXXXX&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;password to use against metastore database&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;datanucleus.autoCreateSchema&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;creates necessary schema on a startup if one doesn&apos;t exist. set this to false, after creating it once&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;


&lt;p&gt;Hive user has full rights to the HiveMetastore DB.&lt;br/&gt;
---------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;When launching hive on command line and executing &quot;show tables;&quot; i got the following:&lt;/p&gt;

&lt;p&gt;FAILED: Error in metadata: javax.jdo.JDOFatalInternalException: Error creating transactional connection factory&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.lang.reflect.InvocationTargetException&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;


&lt;p&gt;When launching hive through the Java API (org.apache.commons.cli.CommandLine) the auto create kicked in but failed with the following (Full stack trace attached to ticket):&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-06-04 09:22:11,817&amp;#93;&lt;/span&gt; ERROR (Log4JLogger.java:115) - Error thrown executing ALTER TABLE COLUMNS ADD TYPE_NAME varchar(128) NOT NULL : Cannot find the object &quot;COLUMNS&quot; because it does not exist or you do not have permissions.&lt;br/&gt;
com.microsoft.sqlserver.jdbc.SQLServerException: Cannot find the object &quot;COLUMNS&quot; because it does not exist or you do not have permissions.&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:196)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1454)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:786)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:685)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4026)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1416)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:185)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:160)&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:658)&lt;br/&gt;
	at org.datanucleus.store.rdbms.table.AbstractTable.executeDdlStatement(AbstractTable.java:730)&lt;br/&gt;
	at org.datanucleus.store.rdbms.table.AbstractTable.executeDdlStatementList(AbstractTable.java:681)&lt;br/&gt;
	at org.datanucleus.store.rdbms.table.TableImpl.validateColumns(TableImpl.java:261)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSManager$ClassAdder.performTablesValidation(RDBMSManager.java:2794)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSManager$ClassAdder.addClassTablesAndValidate(RDBMSManager.java:2595)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSManager$ClassAdder.run(RDBMSManager.java:2241)&lt;br/&gt;
	at org.datanucleus.store.rdbms.AbstractSchemaTransaction.execute(AbstractSchemaTransaction.java:113)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSManager.addClasses(RDBMSManager.java:994)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSManager.addClasses(RDBMSManager.java:960)&lt;br/&gt;
	at org.datanucleus.store.AbstractStoreManager.addClass(AbstractStoreManager.java:691)&lt;br/&gt;
	at org.datanucleus.store.mapped.MappedStoreManager.getDatastoreClass(MappedStoreManager.java:358)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSManager.getExtent(RDBMSManager.java:1344)&lt;br/&gt;
	at org.datanucleus.ObjectManagerImpl.getExtent(ObjectManagerImpl.java:3736)&lt;br/&gt;
	at org.datanucleus.store.rdbms.query.JDOQLQueryCompiler.compileCandidates(JDOQLQueryCompiler.java:411)&lt;br/&gt;
	at org.datanucleus.store.rdbms.query.QueryCompiler.executionCompile(QueryCompiler.java:312)&lt;br/&gt;
	at org.datanucleus.store.rdbms.query.JDOQLQueryCompiler.compile(JDOQLQueryCompiler.java:225)&lt;br/&gt;
	at org.datanucleus.store.rdbms.query.JDOQLQuery.compileInternal(JDOQLQuery.java:174)&lt;br/&gt;
	at org.datanucleus.store.query.Query.executeQuery(Query.java:1443)&lt;br/&gt;
	at org.datanucleus.store.rdbms.query.JDOQLQuery.executeQuery(JDOQLQuery.java:244)&lt;br/&gt;
	at org.datanucleus.store.query.Query.executeWithArray(Query.java:1357)&lt;br/&gt;
	at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:265)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:551)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.ObjectStore.getTable(ObjectStore.java:494)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_table(HiveMetaStore.java:397)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.drop_table(HiveMetaStore.java:353)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.dropTable(HiveMetaStoreClient.java:340)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.metadata.Hive.dropTable(Hive.java:308)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.metadata.Hive.dropTable(Hive.java:293)&lt;br/&gt;
	at com.contextweb.hive.lookup.LookupDumper.createTable(LookupDumper.java:179)&lt;br/&gt;
	at com.contextweb.hive.lookup.LookupDumper.execute(LookupDumper.java:122)&lt;br/&gt;
	at com.contextweb.hive.cli.QueryCommand.runImpl(QueryCommand.java:142)&lt;br/&gt;
	at com.contextweb.hive.cli.HiveSessionAwareCommand.run(HiveSessionAwareCommand.java:48)&lt;br/&gt;
	at com.contextweb.hive.cli.Launcher.exec(Launcher.java:78)&lt;br/&gt;
	at com.contextweb.hive.cli.Launcher.main(Launcher.java:46)&lt;/p&gt;


&lt;p&gt;At this point in time I have looked at what hive done to my DB and I saw that it created the following tables:&lt;br/&gt;
DBS&lt;br/&gt;
NUCLEUS_TABLES&lt;br/&gt;
SEQUENCE_TABLE&lt;/p&gt;

&lt;p&gt;The table COLUMS does not exist and the alter statement is failing (Makes sense)&lt;/p&gt;

&lt;p&gt;So I went ahead and created the table with the needed column:&lt;br/&gt;
CREATE TABLE COLUMNS (TYPE_NAME varchar(128) NOT NULL)&lt;/p&gt;

&lt;p&gt;When I ran hive again with the CLI the auto create managed to complete creation this time but during the run failed with the following:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-06-04 09:54:38,787&amp;#93;&lt;/span&gt; INFO  (SemanticAnalyzer.java:5399) - Creating tablelookup_CampaignId positin=22&lt;br/&gt;
FAILED: Error in metadata: javax.jdo.JDODataStoreException: Add request failed : INSERT INTO COLUMNS (SD_ID,COMMENT,&quot;COLUMN_NAME&quot;,TYPE_NAME,INTEGER_IDX) VALUES (?,?,?,?,?) &lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.BatchUpdateException: Invalid column name &apos;COLUMN_NAME&apos;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-06-04 09:54:39,158&amp;#93;&lt;/span&gt; ERROR (SessionState.java:248) - FAILED: Error in metadata: javax.jdo.JDODataStoreException: Add request failed : INSERT INTO COLUMNS (SD_ID,COMMENT,&quot;COLUMN_NAME&quot;,TYPE_NAME,INTEGER_IDX) VALUES (?,?,?,?,?) &lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.BatchUpdateException: Invalid column name &apos;COLUMN_NAME&apos;.&lt;br/&gt;
org.apache.hadoop.hive.ql.metadata.HiveException: javax.jdo.JDODataStoreException: Add request failed : INSERT INTO COLUMNS (SD_ID,COMMENT,&quot;COLUMN_NAME&quot;,TYPE_NAME,INTEGER_IDX) VALUES (?,?,?,?,?) &lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.BatchUpdateException: Invalid column name &apos;COLUMN_NAME&apos;.&lt;br/&gt;
	at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:281)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:1281)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:119)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:99)&lt;br/&gt;
	at com.contextweb.hive.session.HiveQuery.exec(HiveQuery.java:112)&lt;br/&gt;
	at com.contextweb.hive.lookup.LookupDumper.createTable(LookupDumper.java:201)&lt;br/&gt;
	at com.contextweb.hive.lookup.LookupDumper.execute(LookupDumper.java:122)&lt;br/&gt;
	at com.contextweb.hive.cli.QueryCommand.runImpl(QueryCommand.java:142)&lt;br/&gt;
	at com.contextweb.hive.cli.HiveSessionAwareCommand.run(HiveSessionAwareCommand.java:48)&lt;br/&gt;
	at com.contextweb.hive.cli.Launcher.exec(Launcher.java:78)&lt;br/&gt;
	at com.contextweb.hive.cli.Launcher.main(Launcher.java:46)&lt;br/&gt;
Caused by: javax.jdo.JDODataStoreException: Add request failed : INSERT INTO COLUMNS (SD_ID,COMMENT,&quot;COLUMN_NAME&quot;,TYPE_NAME,INTEGER_IDX) VALUES (?,?,?,?,?) &lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.BatchUpdateException: Invalid column name &apos;COLUMN_NAME&apos;.&lt;br/&gt;
	at org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:289)&lt;br/&gt;
	at org.datanucleus.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:673)&lt;br/&gt;
	at org.datanucleus.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:693)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.ObjectStore.createTable(ObjectStore.java:458)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table(HiveMetaStore.java:321)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:254)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:275)&lt;br/&gt;
	... 10 more&lt;br/&gt;
Caused by: java.sql.BatchUpdateException: Invalid column name &apos;COLUMN_NAME&apos;.&lt;br/&gt;
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeBatch(SQLServerPreparedStatement.java:1132)&lt;br/&gt;
	at org.datanucleus.store.rdbms.SQLController.processConnectionStatement(SQLController.java:573)&lt;br/&gt;
	at org.datanucleus.store.rdbms.SQLController.executeStatementUpdate(SQLController.java:366)&lt;br/&gt;
	at org.datanucleus.store.rdbms.scostore.RDBMSJoinListStoreSpecialization.internalAdd(RDBMSJoinListStoreSpecialization.java:425)&lt;br/&gt;
	at org.datanucleus.store.mapped.scostore.JoinListStore.internalAdd(JoinListStore.java:239)&lt;br/&gt;
	at org.datanucleus.store.mapped.scostore.AbstractListStore.addAll(AbstractListStore.java:128)&lt;br/&gt;
	at org.datanucleus.store.mapped.mapping.CollectionMapping.postInsert(CollectionMapping.java:157)&lt;br/&gt;
	at org.datanucleus.store.rdbms.request.InsertRequest.execute(InsertRequest.java:515)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertTable(RDBMSPersistenceHandler.java:200)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertObject(RDBMSPersistenceHandler.java:179)&lt;br/&gt;
	at org.datanucleus.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3097)&lt;br/&gt;
	at org.datanucleus.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:3073)&lt;br/&gt;
	at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1280)&lt;br/&gt;
	at org.datanucleus.store.mapped.mapping.PersistenceCapableMapping.setObjectAsValue(PersistenceCapableMapping.java:604)&lt;br/&gt;
	at org.datanucleus.store.mapped.mapping.PersistenceCapableMapping.setObject(PersistenceCapableMapping.java:364)&lt;br/&gt;
	at org.datanucleus.store.rdbms.fieldmanager.ParameterSetter.storeObjectField(ParameterSetter.java:197)&lt;br/&gt;
	at org.datanucleus.state.AbstractStateManager.providedObjectField(AbstractStateManager.java:1011)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.model.MTable.jdoProvideField(MTable.java)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.model.MTable.jdoProvideFields(MTable.java)&lt;br/&gt;
	at org.datanucleus.state.JDOStateManagerImpl.provideFields(JDOStateManagerImpl.java:2627)&lt;br/&gt;
	at org.datanucleus.store.rdbms.request.InsertRequest.execute(InsertRequest.java:294)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertTable(RDBMSPersistenceHandler.java:200)&lt;br/&gt;
	at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertObject(RDBMSPersistenceHandler.java:179)&lt;br/&gt;
	at org.datanucleus.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3097)&lt;br/&gt;
	at org.datanucleus.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:3073)&lt;br/&gt;
	at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1280)&lt;br/&gt;
	at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1157)&lt;br/&gt;
	at org.datanucleus.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:668)&lt;br/&gt;
	... 15 more&lt;/p&gt;


&lt;p&gt;Seems like the autocreate forgot to create the column &quot;COLUMN_NAME&quot; &lt;/p&gt;

&lt;p&gt;I have again ran the command manually in my db:&lt;br/&gt;
ALTER TABLE COLUMNS ADD COLUMN_NAME varchar(256) NOT NULL&lt;/p&gt;

&lt;p&gt;At this point I was able to run the hive through the CLI successfully but running &quot;show tables;&quot; from the command line still give me:&lt;br/&gt;
FAILED: Error in metadata: javax.jdo.JDOFatalInternalException: Error creating transactional connection factory&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.lang.reflect.InvocationTargetException&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;

&lt;p&gt;Please contact me if you need further information.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466184">HIVE-1391</key>
            <summary>Various issues when using MS-SQL2005 as the Hive Metastore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="arov">Alex Rovner</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jun 2010 13:57:57 +0000</created>
                <updated>Thu, 24 Mar 2011 17:12:19 +0000</updated>
                            <resolved>Sat, 25 Dec 2010 16:14:17 +0000</resolved>
                                    <version>0.5.0</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12975068" author="appodictic" created="Sat, 25 Dec 2010 16:14:17 +0000"  >&lt;p&gt;This is not an attempt to pass the buck.&lt;/p&gt;

&lt;p&gt;We do not officially support any particular RDBMS. However we defacto support Derby and MySQL. &lt;br/&gt;
&lt;a href=&quot;http://www.datanucleus.org/products/accessplatform/rdbms/support.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.datanucleus.org/products/accessplatform/rdbms/support.html&lt;/a&gt; &lt;br/&gt;
Datanucleus claims to support ms-sql2005 so maybe the issue should be taken up there. We have at least proved we are doing something correct by working with two of their other supported databases.&lt;/p&gt;</comment>
                            <comment id="13010624" author="andyr" created="Thu, 24 Mar 2011 10:38:41 +0000"  >&lt;p&gt;Hi, did anyone have much resolving this issue?&lt;/p&gt;

&lt;p&gt;I&#8217;m also experiencing this issue with SQL server 2005. I&#8217;ve enabled DEBUG logging for DataNucleus &amp;amp; JPOX in hive-log4j.properies and can see that the table COLUMNS (and other tables) create statement is never executed. Is this a DataNucleus problem or is this because Hive is not issuing the create table statement? I thought if this was a DataNucleus problem then the logs would show a create table COLUMNS  exception but I can not see the statement even being executed?&lt;/p&gt;

&lt;p&gt;Any thoughts much appreciated.&lt;/p&gt;

&lt;p&gt;Many thanks,&lt;/p&gt;

&lt;p&gt;Andy.&lt;/p&gt;</comment>
                            <comment id="13010628" author="andyr" created="Thu, 24 Mar 2011 10:58:54 +0000"  >&lt;p&gt;One thing i did notice in the logs ....&lt;/p&gt;

&lt;p&gt;2011-03-24 10:06:58,561 DEBUG Datastore.Schema (Log4JLogger.java:debug(58)) - Check of existence of COLUMNS returned table type of VIEW&lt;/p&gt;

&lt;p&gt;... so hive (or data nucleus?) does not try to create the table. I can confim that SQL server has a default COLUMNS view on our database. Any ideas how to work around this with Hive if this is a DataNucleus issue?&lt;/p&gt;

&lt;p&gt;Thanks, Andy. &lt;/p&gt;</comment>
                            <comment id="13010768" author="cwsteinbach" created="Thu, 24 Mar 2011 17:12:19 +0000"  >&lt;p&gt;From what I understand SQLServer has the notion of a &quot;default schema&quot; (usually dbo) which is used to resolve identifiers that are not defined in a user&apos;s current schema. I think you need to either undefine the default schema for your metastore user account, or else make it point to the metastore schema.&lt;/p&gt;

&lt;p&gt;Here are some relevant links with more information:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms190387.aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/library/ms190387.aspx&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://stackoverflow.com/questions/3806245/sql-server-schema-and-default-schema&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/3806245/sql-server-schema-and-default-schema&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://dba.fyicenter.com/faq/sql_server_2/Default_Schema_of_Your_Login_Session.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dba.fyicenter.com/faq/sql_server_2/Default_Schema_of_Your_Login_Session.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446347" name="hive-trace.txt" size="69217" author="arov" created="Fri, 4 Jun 2010 13:58:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Dec 2010 16:14:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lev3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123058</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1392] minimize execution for (sub)queries which are guaranteed to return no results</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1392</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Examples would be a predicate like&lt;/p&gt;

&lt;p&gt;WHERE 1=0&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;WHERE ds=&apos;2010-01-01&apos;&lt;/p&gt;

&lt;p&gt;if the table is partitioned on ds and no partition exists for that date.&lt;/p&gt;

&lt;p&gt;Per &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-838&quot; title=&quot;in strict mode, no partition selected error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-838&quot;&gt;&lt;del&gt;HIVE-838&lt;/del&gt;&lt;/a&gt;, we have to be careful with the relational algebra analysis; operators like union, outer join, and full-table aggregation can cause rows to be produced even when one of the inputs is guaranteed to be completely filtered out.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466212">HIVE-1392</key>
            <summary>minimize execution for (sub)queries which are guaranteed to return no results</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                            <label>optimization</label>
                    </labels>
                <created>Fri, 4 Jun 2010 18:50:09 +0000</created>
                <updated>Tue, 5 Apr 2011 22:07:23 +0000</updated>
                                            <version>0.5.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1393] Column pruner prunes essential columns in map join</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1393</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Run: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE tmp_pyang_src2 (key STRING, value STRING);
INSERT OVERWRITE TABLE tmp_pyang_src2 SELECT key, value FROM src;

SELECT  &lt;span class=&quot;code-comment&quot;&gt;/*+ MAPJOIN(a) */&lt;/span&gt; a.key, a.value
FROM tmp_pyang_src2 a JOIN src b ON a.key=b.key
LIMIT 10;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;a.value will show up as null. Either removing the MAPJOIN hint or set hive.optimize.cp=false; will produce the correct results.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466411">HIVE-1393</key>
            <summary>Column pruner prunes essential columns in map join</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2010 00:50:42 +0000</created>
                <updated>Sun, 13 Jun 2010 22:42:05 +0000</updated>
                                            <version>0.6.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12878441" author="he yongqiang" created="Sun, 13 Jun 2010 22:42:05 +0000"  >&lt;p&gt;Paul, i can not reproduce the problem. (I am using the current trunk.)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 13 Jun 2010 22:42:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0levb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123059</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1394] do not update transient_lastDdlTime if the partition is modified by a housekeeping operation</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1394</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently. purging looks at the hdfs time to see the last time the files got modified.&lt;br/&gt;
It should look at the metastore property instead - these are facebook specific utilities, which do not require any changes to hive.&lt;/p&gt;

&lt;p&gt;However, in some cases, the operation might be performed by some housekeeping job, which should not modify the timestamp.&lt;br/&gt;
Since, hive has no way of knowing the origin of the query, it might be a good idea to add a new hint which specifies that the &lt;br/&gt;
operation is a cleanup operation, and the timestamp in the metastore need not be touched for that scenario.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466477">HIVE-1394</key>
            <summary>do not update transient_lastDdlTime if the partition is modified by a housekeeping operation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2010 18:31:00 +0000</created>
                <updated>Sat, 24 Oct 2015 03:51:08 +0000</updated>
                            <resolved>Wed, 23 Jun 2010 00:45:53 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12881332" author="nzhang" created="Tue, 22 Jun 2010 20:04:34 +0000"  >&lt;p&gt;Adding a new hint to avoid updating transient_lastDdlTime for both table and partitons in metastore.&lt;/p&gt;</comment>
                            <comment id="12881358" author="namit" created="Tue, 22 Jun 2010 21:01:01 +0000"  >&lt;p&gt;Some minor comments:&lt;/p&gt;

&lt;p&gt;1. If the hint is set, can you throw an error if the partition is not present at compile time&lt;/p&gt;</comment>
                            <comment id="12881405" author="nzhang" created="Tue, 22 Jun 2010 22:19:20 +0000"  >&lt;p&gt;Added a check in SemanticAnalyzer to throw an exception when HOLD_DDLTIME is specified in dynamic partition insert or non-existence static partitions.&lt;/p&gt;

&lt;p&gt;A negative test case is also added. &lt;/p&gt;</comment>
                            <comment id="12881414" author="namit" created="Tue, 22 Jun 2010 22:26:02 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12881495" author="namit" created="Wed, 23 Jun 2010 00:45:53 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                            <comment id="12885680" author="jvs" created="Tue, 6 Jul 2010 20:48:08 +0000"  >&lt;p&gt;Note &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1442&quot; title=&quot;HOLD_DDLTIME does not change partition metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1442&quot;&gt;&lt;del&gt;HIVE-1442&lt;/del&gt;&lt;/a&gt;, which prevents this feature from being used.  Also, someone needs to document it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12467999">HIVE-1442</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12906820">HIVE-12224</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12447755" name="HIVE-1394.2.patch" size="42294" author="nzhang" created="Tue, 22 Jun 2010 22:19:20 +0000"/>
                            <attachment id="12447733" name="HIVE-1394.patch" size="39463" author="nzhang" created="Tue, 22 Jun 2010 20:04:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Jun 2010 20:04:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72927</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0levj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1395] Table aliases are ambiguous</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1395</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Consider this query:&lt;/p&gt;

&lt;p&gt;SELECT a.num FROM (&lt;br/&gt;
  SELECT a.num AS num, b.num AS num2&lt;br/&gt;
  FROM foo a LEFT OUTER JOIN bar b ON a.num=b.num&lt;br/&gt;
) a&lt;br/&gt;
WHERE a.num2 IS NULL;&lt;/p&gt;

&lt;p&gt;...in this case, the table alias &apos;a&apos; is ambiguous. It could be the outer table (i.e., the subquery result), or it could be the inner table (foo).&lt;/p&gt;

&lt;p&gt;In the above case, Hive silently parses the outer reference to a as the inner reference. The result, then, is akin to:&lt;br/&gt;
SELECT foo.num FROM foo WHERE bar.num IS NULL. This is bad.&lt;/p&gt;

&lt;p&gt;The bigger problem, however, is that Hive even lets people use the same table alias at multiple points in the query. We should simply throw an exception during the parse stage if there is any ambiguity in which table is which, just like we do if the column names are ambiguous.&lt;/p&gt;

&lt;p&gt;Or, if for some reason we need people to be able to use &apos;a&apos; to refer to multiple tables or subqueries, it would be excellent if the exact parsing structure were made clear and added to the wiki. In that case, I will file a separate bug JIRA to complain about how it should be different. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466490">HIVE-1395</key>
            <summary>Table aliases are ambiguous</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2010 20:16:35 +0000</created>
                <updated>Wed, 31 Aug 2011 23:43:28 +0000</updated>
                            <resolved>Wed, 31 Aug 2011 23:43:28 +0000</resolved>
                                    <version>0.6.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12882235" author="jvs" created="Thu, 24 Jun 2010 17:35:59 +0000"  >&lt;p&gt;In the SQL standard, aliases are allowed to be reused at different levels of query nesting; conflicts are only illegal in the same FROM clause.  This is the same rule as for column names, actually (they can be reused at different levels of the query nesting, but not at the same level).  There are corresponding rules for resolving references when correlated subqueries are used (looking up into the closest scope).&lt;/p&gt;

&lt;p&gt;I&apos;m fine with making the rules stricter for Hive, since reusing a table alias is very confusing; just pointing this out.&lt;/p&gt;</comment>
                            <comment id="12882246" author="akramer" created="Thu, 24 Jun 2010 17:57:18 +0000"  >&lt;p&gt;Right--this is reported as a bug because Hive is crossing levels. The first use of a.num in the above query should look into the CLOSEST scope, which is the subquery labeled a. What hive is doing here is looking into the NON-CLOSEST scope, and returning foo.num when it should return (subquery).num. That is the bug.&lt;/p&gt;

&lt;p&gt;Whether we should allow it at ALL in hive, since it&apos;s confusing, is a broader question. I vote either for disallowing it at all, or disallowing it in strict mode.&lt;/p&gt;</comment>
                            <comment id="12882414" author="tedxu" created="Fri, 25 Jun 2010 01:12:35 +0000"  >&lt;p&gt;+1 to disallow it in strict mode. Simply disallowing it at all may be too aggressive and cause more confusion. &lt;br/&gt;
I&apos;m pretty sure that ambiguous is caused by predicate push down, we shall work it out rather than avoid it. &lt;/p&gt;</comment>
                            <comment id="12883344" author="jvs" created="Mon, 28 Jun 2010 23:12:40 +0000"  >&lt;p&gt;OK, I did some testing and verified that&lt;/p&gt;

&lt;p&gt;1) this is due to the combination of reused alias and predicate push-down (either turning off ppd or using a different outermost alias fixes the plan)&lt;br/&gt;
2) this is a different bug from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1342&quot; title=&quot;Predicate push down get error result when sub-queries have the same alias name &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1342&quot;&gt;&lt;del&gt;HIVE-1342&lt;/del&gt;&lt;/a&gt; (I tried applying Ted&apos;s patch and it did not fix this one)&lt;/p&gt;

&lt;p&gt;I&apos;m going to let someone else who really wants it create a separate issue for preventing alias reuse in strict mode; as Ted says, we should fix these two bugs independent of that.&lt;/p&gt;</comment>
                            <comment id="12884724" author="jvs" created="Fri, 2 Jul 2010 15:43:36 +0000"  >&lt;p&gt;Actually, after thinking about it some more, it&apos;s not practical to prevent alias reuse, even in strict mode.  Here&apos;s why.&lt;/p&gt;

&lt;p&gt;Suppose I have&lt;/p&gt;

&lt;p&gt;CREATE VIEW V AS SELECT * FROM BLAH T1 JOIN FLUB T2 ON T1.J=T2.K;&lt;/p&gt;

&lt;p&gt;SELECT * FROM V T1 WHERE T1.X=3;&lt;/p&gt;

&lt;p&gt;When we expand the view reference in the query, we&apos;ll end up with&lt;/p&gt;

&lt;p&gt;SELECT * FROM (&lt;br/&gt;
    SELECT * FROM BLAH T1 JOIN FLUB T2 ON T1.J=T2.K&lt;br/&gt;
) V T1 WHERE T1.X=3;&lt;/p&gt;

&lt;p&gt;And now in the expansion, T1 is legitimately duplicated, even though the person querying the view didn&apos;t even know that T1 was used inside the view definition (in general, could be very deep).&lt;/p&gt;

&lt;p&gt;Expanding the view in this way is what allows us to do a lot of optimizations such as pushing predicates (e.g. T1.X=3) all the way down into the view. &lt;/p&gt;</comment>
                            <comment id="13094996" author="jvs" created="Wed, 31 Aug 2011 23:43:28 +0000"  >&lt;p&gt;We&apos;re fixing the bugs and sticking with the normal SQL rules, which allow duplicate aliases, for the reasons mentioned above.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Jun 2010 17:35:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0levr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123061</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1396] Check for shared paths when specifying a location</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1396</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When creating a table or adding a partition, the user can manually set the location to point to an existing directory. A potential issue could arise where two partitions in different tables point to the same location, and neither table is marked as external. If the partition is dropped, then the other partition will be inaccessible. Or if a housekeeping operation (such as archiving in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1332&quot; title=&quot;Archiving partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1332&quot;&gt;&lt;del&gt;HIVE-1332&lt;/del&gt;&lt;/a&gt;) modifies the files in the partition, then the data will be accessible by one partition but not the other.&lt;/p&gt;

&lt;p&gt;To catch this scenario, a check to see whether the location specified in a create table or add partition matches an existing partition may be useful. If the check hits a match, Hive can print an warning or throw an exception. &lt;/p&gt;

&lt;p&gt;This may not be possible to do because the check is too time consuming to run with 1000&apos;s of partitions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466492">HIVE-1396</key>
            <summary>Check for shared paths when specifying a location</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2010 20:26:58 +0000</created>
                <updated>Tue, 8 Jun 2010 20:26:58 +0000</updated>
                                            <version>0.6.0</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42515</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08otj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1397] histogram() UDAF for a numerical column</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1397</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;A histogram() UDAF to generate an approximate histogram of a numerical (byte, short, double, long, etc.) column. The result is returned as a map of (x,y) histogram pairs, and can be plotted in Gnuplot using impulses (for example). The algorithm is currently adapted from &quot;A streaming parallel decision tree algorithm&quot; by Ben-Haim and Tom-Tov, JMLR 11 (2010), and uses space proportional to the number of histogram bins specified. It has no approximation guarantees, but seems to work well when there is a lot of data and a large number (e.g. 50-100) of histogram bins specified.&lt;/p&gt;

&lt;p&gt;A typical call might be:&lt;/p&gt;

&lt;p&gt;SELECT histogram(val, 10) FROM some_table;&lt;/p&gt;

&lt;p&gt;where the result would be a histogram with 10 bins, returned as a Hive map object.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466499">HIVE-1397</key>
            <summary>histogram() UDAF for a numerical column</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mayanklahiri">Mayank Lahiri</assignee>
                                    <reporter username="mayanklahiri">Mayank Lahiri</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2010 21:22:03 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:36 +0000</updated>
                            <resolved>Wed, 16 Jun 2010 02:39:56 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12877220" author="appodictic" created="Wed, 9 Jun 2010 21:30:04 +0000"  >&lt;p&gt;Looks great. Can not wait.&lt;/p&gt;</comment>
                            <comment id="12877233" author="athusoo" created="Wed, 9 Jun 2010 22:08:29 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;This would be a cool contribution.&lt;/p&gt;</comment>
                            <comment id="12877601" author="mayanklahiri" created="Thu, 10 Jun 2010 22:20:52 +0000"  >&lt;p&gt;I&apos;ve implemented and tested the algorithm. I&apos;m running some experiments on how far from optimal (in terms of MSE) we&apos;re getting with this streaming algorithm, but as of now, it seems to perform well when the number of data points is a few orders of magnitude larger than the number of bins. As an example I&apos;m getting good histograms when there 100,000 data points and 20-80 histogram bins.&lt;/p&gt;

&lt;p&gt;As I noted before, there are no approximation guarantees in terms of how close to optimal the histogram is.&lt;/p&gt;</comment>
                            <comment id="12878125" author="mayanklahiri" created="Fri, 11 Jun 2010 23:00:26 +0000"  >&lt;p&gt;Since there is no approximation guarantee with this streaming algorithm, I ran a pretty comprehensive set of experiments to determine what the quality of the computed histogram is in terms of Mean-Squared-Error, and using R&apos;s hist() function as a gold standard.&lt;/p&gt;

&lt;p&gt;I simulated a variety of conditions on the data and the Map/Reduce setup. To summarize, I ran multiple repetitions of histogram-building using the UDAF and R on the cross product:&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;
{chunks of sorted data to each mapper, semi-sorted data to each mapper, random data to each mapper}
&lt;p&gt; x&lt;br/&gt;
 &lt;/p&gt;
{ few mappers relative to data size, medium number of mappers, very high number of mappers }
&lt;p&gt; x&lt;/p&gt;
 { 10 - 80 histogram bins in steps of 10 }

&lt;p&gt;The image shows the MSE of the UDAF histogram() as a function of R&apos;s histogram for the same number of bins. A value of 1.0 means that Hive and R histograms are on par. Values less than 1.0 mean that Hive histogram is actually &lt;b&gt;better&lt;/b&gt; than R&apos;s histogram, in terms of MSE.&lt;/p&gt;

&lt;p&gt;At 30 and 60 bins, the MSEs of both R and Hive are very small, and the discrepancy seems to be R doing something funky at those points.&lt;/p&gt;

&lt;p&gt;In summary, it looks pretty good!&lt;/p&gt;</comment>
                            <comment id="12878807" author="jvs" created="Tue, 15 Jun 2010 00:24:48 +0000"  >&lt;p&gt;I am testing out Review Board here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://review.hbase.org/r/181/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think it will be automatically appending my comments here in JIRA as well, but give that URL a try to see if you can see them.&lt;/p&gt;</comment>
                            <comment id="12878808" author="hbasereviewboard" created="Tue, 15 Jun 2010 00:27:18 +0000"  >&lt;p&gt;Message from: &quot;John Sichi&quot; &amp;lt;jsichi@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/181/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Submitted on behalf of Mayank Lahiri.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1397&quot; title=&quot;histogram() UDAF for a numerical column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1397&quot;&gt;&lt;del&gt;HIVE-1397&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/a&gt; 953449 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/queries/clientpositive/udaf_histogram.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/queries/clientpositive/udaf_histogram.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/a&gt; 953449 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/udaf_histogram.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/test/results/clientpositive/udaf_histogram.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/181/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;None&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;

</comment>
                            <comment id="12879054" author="hbasereviewboard" created="Tue, 15 Jun 2010 18:20:54 +0000"  >&lt;p&gt;Message from: &quot;Mayank Lahiri&quot; &amp;lt;mayank.lahiri@facebook.com&amp;gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On None, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/a&gt;, line 346&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.hbase.org/r/181/diff/1/?file=1351#file1351line346&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/diff/1/?file=1351#file1351line346&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Since eventually we would like to support histograms on non-numeric fields such as STRING, I think we should rename this one numeric_histogram (likewise for the Java class) to avoid confusion later when we have other algorithms.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It might seem a little odd since histograms are generally used as approximations of numerical distributions. I would suggest either (a) overloading histogram() to behave differently on STRING arguments (perhaps STRING arguments that cause a NumberFormatException), or (b) creating a factor_histogram() function for general strings. &lt;/p&gt;

&lt;p&gt;I could add in the code for computing frequencies of STRINGs quite easily, although there&apos;s no way to prevent it from choking if there are too many unique strings.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On None, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&lt;/a&gt;, line 239&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line239&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Shouldn&apos;t this method be private?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes! thanks!&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On None, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&lt;/a&gt;, line 186&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line186&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line186&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Formatting nitpick:  Here and elsewhere, use braces even for single-line blocks; we use the NeedBraces checkstyle rule to flag this.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;a href=&quot;http://stackoverflow.com/questions/382633/can-the-checkstyle-module-needbraces-work-with-nested-if-else-blocks&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/382633/can-the-checkstyle-module-needbraces-work-with-nested-if-else-blocks&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will re-submit patch, thanks.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On None, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&lt;/a&gt;, line 362&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line362&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line362&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Under what conditions can this exception be encountered?  Shouldn&apos;t it be impossible since we already checked the type up front?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This could happen when a STRING row contains a non-numeric value. As a follow-up to my earlier comment, we could either drop the value or somehow &quot;intelligently&quot; switch to computing the histogram over strings instead of doubles.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On None, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogram.java&lt;/a&gt;, line 153&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line153&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/diff/1/?file=1352#file1352line153&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is it possible to return an ARRAY&amp;lt;STRUCT{x DOUBLE; y DOUBLE}&amp;gt; instead?  That seems more natural (and compact) than a MAP&amp;lt;DOUBLE,DOUBLE&amp;gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     But if you already got feedback that MAP is prefereable, ignore this comment.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not a problem. I was using the map to avoid an extra level of indirection, and possibly to make it compatible with an explode() extension that explodes maps as well as arrays. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mayank&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/181/#review224&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/#review224&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


</comment>
                            <comment id="12879077" author="hbasereviewboard" created="Tue, 15 Jun 2010 19:13:30 +0000"  >&lt;p&gt;Message from: &quot;John Sichi&quot; &amp;lt;jsichi@facebook.com&amp;gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On None, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/a&gt;, line 346&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.hbase.org/r/181/diff/1/?file=1351#file1351line346&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/diff/1/?file=1351#file1351line346&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Since eventually we would like to support histograms on non-numeric fields such as STRING, I think we should rename this one numeric_histogram (likewise for the Java class) to avoid confusion later when we have other algorithms.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Mayank Lahiri wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It might seem a little odd since histograms are generally used as approximations of numerical distributions. I would suggest either (a) overloading histogram() to behave differently on STRING arguments (perhaps STRING arguments that cause a NumberFormatException), or (b) creating a factor_histogram() function for general strings. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I could add in the code for computing frequencies of STRINGs quite easily, although there&apos;s no way to prevent it from choking if there are too many unique strings.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we should handle strings now, but we should rename this one to make it clear that it only works on numeric data.  And per our discussion offline, reject attempts to use it on non-numeric data.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/181/#review224&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/181/#review224&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


</comment>
                            <comment id="12879081" author="mayanklahiri" created="Tue, 15 Jun 2010 19:20:50 +0000"  >&lt;p&gt;Does &apos;histogram_numeric()&apos; work? And I&apos;m patching it to return a list of&lt;br/&gt;
(x,y) structs. &lt;/p&gt;




</comment>
                            <comment id="12879094" author="jvs" created="Tue, 15 Jun 2010 19:58:51 +0000"  >&lt;p&gt;histogram_numeric is fine.&lt;/p&gt;</comment>
                            <comment id="12879138" author="mayanklahiri" created="Tue, 15 Jun 2010 22:05:21 +0000"  >&lt;p&gt;Implemented changes discussed with JVS.&lt;/p&gt;</comment>
                            <comment id="12879177" author="jvs" created="Tue, 15 Jun 2010 23:29:30 +0000"  >&lt;p&gt;+1.  Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12879235" author="jvs" created="Wed, 16 Jun 2010 02:39:56 +0000"  >&lt;p&gt;Committed.  Thanks Mayank!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446805" name="HIVE-1397.1.patch" size="25341" author="mayanklahiri" created="Thu, 10 Jun 2010 22:17:48 +0000"/>
                            <attachment id="12447178" name="HIVE-1397.2.patch" size="28277" author="mayanklahiri" created="Tue, 15 Jun 2010 22:04:30 +0000"/>
                            <attachment id="12446914" name="Histogram_quality.png.jpg" size="31365" author="mayanklahiri" created="Fri, 11 Jun 2010 23:00:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 Jun 2010 21:30:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0levz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123062</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
