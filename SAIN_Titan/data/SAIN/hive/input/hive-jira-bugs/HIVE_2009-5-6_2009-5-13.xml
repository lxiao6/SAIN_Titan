<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:13:23 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-5-6+AND+created+%3C%3D+2009-5-13+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="11" total="11"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-473] Clean up after tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-473</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The test suite creates a lot of temporary files that aren&apos;t cleaned up. For example plan xml files, mapred/local and mapred/system files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424684">HIVE-473</key>
            <summary>Clean up after tests</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johanoskarsson">Johan Oskarsson</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2009 10:46:09 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:49 +0000</updated>
                            <resolved>Sat, 11 Jul 2009 00:59:57 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12706370" author="johanoskarsson" created="Wed, 6 May 2009 10:46:22 +0000"  >&lt;p&gt;If we put all these in a timestamped temporary dir the build process can delete that directory when it is done&lt;/p&gt;</comment>
                            <comment id="12720229" author="johanoskarsson" created="Tue, 16 Jun 2009 16:38:36 +0000"  >&lt;p&gt;Seems we&apos;ve hit this again: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.17/121/testReport/org.apache.hadoop.hive.cli/TestCliDriver/testCliDriver_union18/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.17/121/testReport/org.apache.hadoop.hive.cli/TestCliDriver/testCliDriver_union18/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Upgrading to critical.&lt;/p&gt;</comment>
                            <comment id="12729647" author="johanoskarsson" created="Fri, 10 Jul 2009 14:21:38 +0000"  >&lt;p&gt;This patch adds a hadoop.tmp.dir setting to the test hive-site.xml that points to the build directory, that way &quot;ant clean&quot; will remove it.&lt;/p&gt;</comment>
                            <comment id="12729733" author="namit" created="Fri, 10 Jul 2009 17:27:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;The patch looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12729919" author="namit" created="Sat, 11 Jul 2009 00:59:57 +0000"  >&lt;p&gt;Committed. Thanks Johan.&lt;/p&gt;</comment>
                            <comment id="12730170" author="zshao" created="Mon, 13 Jul 2009 00:09:13 +0000"  >&lt;p&gt;This patch adds the capability of disabling column pruner.&lt;/p&gt;

&lt;p&gt;The following query runs successfully, so the problem is inside the column pruner.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; set hive.optimize.cp=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
hive&amp;gt; explain extended
    &amp;gt; select zshao_foo.foo_name, zshao_bar.bar_name, n from zshao_foo join zshao_bar on zshao_foo.foo_id =
    &amp;gt; zshao_bar.foo_id join zshao_count on zshao_count.bar_id = zshao_bar.bar_id;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12730401" author="namit" created="Mon, 13 Jul 2009 17:06:16 +0000"  >&lt;p&gt;Zheng, did you mean the above comment for some other jira ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12413117" name="HIVE-473.patch" size="590" author="johanoskarsson" created="Fri, 10 Jul 2009 14:21:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jul 2009 17:27:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-474] Support for distinct selection on two or more columns</title>
                <link>https://issues.apache.org/jira/browse/HIVE-474</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The ability to select distinct several, individual columns as by example: &lt;/p&gt;

&lt;p&gt;select count(distinct user), count(distinct session) from actions;   &lt;/p&gt;

&lt;p&gt;Currently returns the following failure: &lt;/p&gt;

&lt;p&gt;FAILED: Error in semantic analysis: line 2:7 DISTINCT on Different Columns not Supported user&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424731">HIVE-474</key>
            <summary>Support for distinct selection on two or more columns</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amareshwari">Amareshwari Sriramadasu</assignee>
                                    <reporter username="akaalias">Alexis Rondeau</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2009 17:25:04 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:45 +0000</updated>
                            <resolved>Wed, 27 Oct 2010 19:00:58 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="12716057" author="zshao" created="Wed, 3 Jun 2009 20:41:48 +0000"  >&lt;p&gt;There are several approaches to solve this problem:&lt;/p&gt;

&lt;p&gt;A1: separate group-by and join the results.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT COALESCE(t1.key, t2.key), COALESCE(d_a, 0), , COALESCE(d_b, 0)
FROM
(SELECT key, count(distinct a) as d_a ...) t1
OUTER JOIN
(SELECT key, count(distinct b) as d_b ...) t2
ON t1.key = t2.key
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A2: Take advantage of union type (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt; for details.&lt;/p&gt;

&lt;p&gt;A3: Take advantage of partitioned merge join:&lt;br/&gt;
Here is a different plan. It depends on partitioned merge join.&lt;br/&gt;
Also the 2 jobs have to have the same number of reducers.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Query:
  select a, count(distinct b), count(distinct c), sum(d)

Plan:
  Job1:
    Map side:
      Emit: distribution_key: a, sort_key: a, b, value: d
      Save a, c to temp_file1
    Reduce side:
      Group By:
        a, count(distinct b), sum(d)
    Output: temp_file2
  Job 2: Input: temp_file1
    Map side:
      Emit: distribution_key: a, sort_key: a, c, value: nothing
    Reduce side:
      Group By
        a, count(distinct c)
      Partitioned Merge Join with temp_file2 on a
        a, count(distinct b), sum(d), count(distinct c)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12719368" author="coderplay" created="Mon, 15 Jun 2009 02:02:28 +0000"  >&lt;p&gt;I thought there is another special case here.  If the query has multiple distinct operations on the same column , we can push down the evaluation of those expressions into reducers.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Query:
  select a, count(distinct &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(codition, b, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)) as col1, count(distinct &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!condition, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, b)) as col2, count(distinct b) as col3

Plan:
  Job :
    Map side:
      Emit: distribution_key: a, sort_key: a, b, value: nothing
    Reduce side:
      Group By
        a,  count col1, col2, col3 by evaluating their expressions
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12838683" author="mafish" created="Fri, 26 Feb 2010 03:11:42 +0000"  >&lt;p&gt;We have implemented this feature using union type, as metioned as &quot;A2&quot; by Zheng.&lt;/p&gt;</comment>
                            <comment id="12851261" author="mafish" created="Tue, 30 Mar 2010 05:37:43 +0000"  >&lt;p&gt;I have uploaded a patch originated from 0.4.2rc, please have a review.&lt;/p&gt;</comment>
                            <comment id="12851283" author="mafish" created="Tue, 30 Mar 2010 06:41:04 +0000"  >&lt;p&gt;for 0.4.2rc&lt;/p&gt;</comment>
                            <comment id="12902421" author="svenkat" created="Wed, 25 Aug 2010 12:53:14 +0000"  >&lt;p&gt;Any update on this?&lt;/p&gt;</comment>
                            <comment id="12910404" author="jvs" created="Fri, 17 Sep 2010 00:17:10 +0000"  >&lt;p&gt;We&apos;ll take a look at this one.&lt;/p&gt;</comment>
                            <comment id="12913865" author="jvs" created="Thu, 23 Sep 2010 00:19:41 +0000"  >&lt;p&gt;Some comments after a brief look:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The patch is going to need to be rebased against trunk (I guess after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt; is committed)?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;We should make sure that in the case of a single distinct agg, we leave the plan as it is today, and only use the new plan generation when multiple distincts are present.  This may already be the case; I couldn&apos;t quite tell from the example plans in the test cases (it would be nice to have some simpler queries for that).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Regarding moving expression evaluation to the reduce side:  in general, this is something that needs cost-based optimization, due to factors like (a) data size before and after expression evaluation and (b) parallelization benefit of spreading out the computation over lots of mappers (assuming many more mappers than reducers).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12915115" author="amareshwari" created="Mon, 27 Sep 2010 04:38:42 +0000"  >&lt;p&gt;Will upload a patch once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt; is committed.&lt;/p&gt;</comment>
                            <comment id="12919023" author="namit" created="Thu, 7 Oct 2010 19:08:14 +0000"  >&lt;p&gt;Once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt; is committed, the general idea is as listed in the example in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;Say, the query is:&lt;/p&gt;

&lt;p&gt;select a, count(distinct b), count(distinct c) from T group by a&lt;/p&gt;

&lt;p&gt;and the data is:&lt;/p&gt;

&lt;p&gt;a1   b1   c1&lt;br/&gt;
a1   b1   c2&lt;br/&gt;
a1   b2   c2&lt;br/&gt;
a1   b2   c1&lt;br/&gt;
a2   ...&lt;/p&gt;


&lt;p&gt;Mapper will emit a union type:&lt;/p&gt;

&lt;p&gt;a1  0:b1&lt;br/&gt;
a1  1:c1&lt;br/&gt;
a1  0:b1&lt;br/&gt;
a1  1:c2&lt;br/&gt;
a1  0:b2&lt;br/&gt;
a1  1:c2&lt;br/&gt;
a1  0:b2&lt;br/&gt;
a1  1:c1&lt;/p&gt;


&lt;p&gt;Since the sort key is (a, union_tag, (b|c))&lt;/p&gt;

&lt;p&gt;The data will come to the reducer in the following order: &lt;/p&gt;

&lt;p&gt;a1  0:b1&lt;br/&gt;
a1  0:b1&lt;br/&gt;
a1  0:b2&lt;br/&gt;
a1  0:b2&lt;br/&gt;
a1  1:c1&lt;br/&gt;
a1  1:c1&lt;br/&gt;
a1  1:c2&lt;br/&gt;
a1  1:c2&lt;/p&gt;

&lt;p&gt;and then the reducer can stream the distincts&lt;/p&gt;</comment>
                            <comment id="12920924" author="amareshwari" created="Thu, 14 Oct 2010 11:08:48 +0000"  >&lt;p&gt;I&apos;m trying to understand the real problem we are solving here. As first step, I did the changes in SemanticAnalyzer to allow distinct selection for multiple columns and executed the query: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select count(key), count(value), count(distinct key), count(distinct value), count(distinct key, value) from src;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It returns corrects results with the current implementation itself. &lt;br/&gt;
Can you explain the problem with current implementation?&lt;/p&gt;</comment>
                            <comment id="12921147" author="jvs" created="Thu, 14 Oct 2010 22:00:32 +0000"  >&lt;p&gt;I think you&apos;ll see the problem if you make sure the key/value entries in each row of your src table are uncorrelated.  If you&apos;re using data/files/kv1.txt, the value is just the key prefixed by &quot;val_&quot;.&lt;/p&gt;</comment>
                            <comment id="12922912" author="amareshwari" created="Wed, 20 Oct 2010 11:04:29 +0000"  >&lt;p&gt;I have reworked on the patch from Mafish so that it works for trunk. Now, the patch takes care of multiple columns in distinct (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-287&quot; title=&quot;support count(*) and count distinct on multiple columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-287&quot;&gt;&lt;del&gt;HIVE-287&lt;/del&gt;&lt;/a&gt;) also.&lt;/p&gt;</comment>
                            <comment id="12923033" author="namit" created="Wed, 20 Oct 2010 16:18:58 +0000"  >&lt;p&gt;I will take a look &lt;/p&gt;</comment>
                            <comment id="12923035" author="namit" created="Wed, 20 Oct 2010 16:25:42 +0000"  >&lt;p&gt;Diff at &lt;a href=&quot;https://review.cloudera.org/r/1052/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://review.cloudera.org/r/1052/&lt;/a&gt; for review&lt;/p&gt;</comment>
                            <comment id="12923602" author="namit" created="Thu, 21 Oct 2010 19:39:58 +0000"  >&lt;p&gt;1. add initEvaluators() in Operator.java instead of ReduceSinkOperator.java&lt;br/&gt;
2. ReduceSinkDesc: use numKeys and getNumKeys() or change numKeys to numDistributionKeys -&lt;br/&gt;
   You may run into problems with serialization/deserialization&lt;br/&gt;
3. Add some comments in initEvaluatorsAndReturnStruct in ReduceSinkOperator&lt;br/&gt;
   &amp;#8211; explain that it is same as parent in case of no union for groupby&lt;br/&gt;
4. Can you more comments in GroupByOperator and SemanticAnalyzer also ?&lt;br/&gt;
   It looks OK, but it will help if there are more comments.&lt;/p&gt;</comment>
                            <comment id="12924502" author="amareshwari" created="Mon, 25 Oct 2010 08:57:16 +0000"  >&lt;p&gt;Patch incorporates Namit&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="12924719" author="namit" created="Mon, 25 Oct 2010 20:57:56 +0000"  >&lt;p&gt;   Not a good idea to ignore skew for multiple distincts.&lt;br/&gt;
   It might be safer to throw an error right now in such a scenario - we can add a better&lt;br/&gt;
   technique for handling this scenario later.&lt;/p&gt;

&lt;p&gt;Can you add a negative testcase for the scenario above ?&lt;/p&gt;

&lt;p&gt;Otherwise, it looks good.&lt;/p&gt;</comment>
                            <comment id="12924884" author="amareshwari" created="Tue, 26 Oct 2010 08:01:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not a good idea to ignore skew for multiple distincts.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree.&lt;/p&gt;

&lt;p&gt;Updated patch throws error when there are multiple distincts with skew in data. Also, adds negative testcases.&lt;/p&gt;</comment>
                            <comment id="12925080" author="namit" created="Tue, 26 Oct 2010 18:37:23 +0000"  >&lt;p&gt;Can you refresh and regenerate the patch - I am getting some compile errors after applying to trunk ?&lt;/p&gt;


&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /data/users/njain/hive-commit1/ql/build.xml:159: warning: &apos;includeantruntime&apos; was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 622 source files to /data/users/njain/hive-commit1/build/ql/classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /data/users/njain/hive-commit1/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java:204: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : class StructField&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hive.ql.exec.GroupByOperator&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     List&amp;lt;? extends StructField&amp;gt; sfs =&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                    ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /data/users/njain/hive-commit1/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java:205: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : class StandardStructObjectInspector&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hive.ql.exec.GroupByOperator&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       ((StandardStructObjectInspector) rowInspector).getAllStructFieldRefs();&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /data/users/njain/hive-commit1/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java:207: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : class StructField&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hive.ql.exec.GroupByOperator&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       StructField keyField = sfs.get(0);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /data/users/njain/hive-commit1/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java:211: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : class StandardStructObjectInspector&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hive.ql.exec.GroupByOperator&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         if (keyObjInspector instanceof StandardStructObjectInspector) {&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                        ^&lt;/p&gt;



&lt;p&gt;Most probably, some merge issue&lt;/p&gt;</comment>
                            <comment id="12925081" author="namit" created="Tue, 26 Oct 2010 18:37:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Otherwise, the changes look good&lt;/p&gt;</comment>
                            <comment id="12925260" author="amareshwari" created="Wed, 27 Oct 2010 05:03:06 +0000"  >&lt;p&gt;Patch is updated to trunk.&lt;/p&gt;</comment>
                            <comment id="12925263" author="namit" created="Wed, 27 Oct 2010 05:30:10 +0000"  >&lt;p&gt;running tests&lt;/p&gt;</comment>
                            <comment id="12925508" author="namit" created="Wed, 27 Oct 2010 19:00:57 +0000"  >&lt;p&gt;Committed. Thanks Amareshwari&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12427012">HIVE-537</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12520519">HIVE-2416</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12440186" name="hive-474.0.4.2rc.patch" size="264343" author="mafish" created="Tue, 30 Mar 2010 06:41:04 +0000"/>
                            <attachment id="12457959" name="patch-474-1.txt" size="303534" author="amareshwari" created="Mon, 25 Oct 2010 08:57:16 +0000"/>
                            <attachment id="12458048" name="patch-474-2.txt" size="260510" author="amareshwari" created="Tue, 26 Oct 2010 08:01:03 +0000"/>
                            <attachment id="12458130" name="patch-474-3.txt" size="260587" author="amareshwari" created="Wed, 27 Oct 2010 05:03:06 +0000"/>
                            <attachment id="12457659" name="patch-474.txt" size="301308" author="amareshwari" created="Wed, 20 Oct 2010 11:04:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jun 2009 20:41:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122268</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-475] Lines exceeding mapred.linerecordreader.maxlength should cause exceptions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-475</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, rows of data that exceed mapred.linerecordreader.maxlength vanish silently.  Instead, an option should be added to indicate what to do under this circumstance (vanish the entire line, truncate after max length, or fail the job), but the default behavior should be job failure.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424732">HIVE-475</key>
            <summary>Lines exceeding mapred.linerecordreader.maxlength should cause exceptions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sasmith">S. Alex Smith</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2009 17:29:48 +0000</created>
                <updated>Tue, 5 Apr 2011 22:54:02 +0000</updated>
                                                                            <component>Diagnosability</component>
                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42824</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08odr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-476] Add getTable and getPartition calls to the ReadEntity and WriteEntity objects in PreExecute hooks.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-476</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;These functions are useful when properties of the tables and partitions have to be modified from the user defined PreExecute hook.&lt;/p&gt;

&lt;p&gt;I will be using it in the archival plugin which automatically unarchives from an archival store and changes the metadata to indicate this fact in the metastore.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424766">HIVE-476</key>
            <summary>Add getTable and getPartition calls to the ReadEntity and WriteEntity objects in PreExecute hooks.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="athusoo">Ashish Thusoo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2009 22:11:19 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:41 +0000</updated>
                            <resolved>Fri, 8 May 2009 16:25:17 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12706622" author="athusoo" created="Wed, 6 May 2009 22:13:33 +0000"  >&lt;p&gt;Added getPartition and getTable and also changed getParameter to getParameters()..&lt;/p&gt;</comment>
                            <comment id="12707057" author="prasadc" created="Thu, 7 May 2009 19:27:53 +0000"  >&lt;p&gt;testing...&lt;/p&gt;</comment>
                            <comment id="12707098" author="prasadc" created="Thu, 7 May 2009 20:51:11 +0000"  >&lt;p&gt;I am getting the following error even though patch doesn&apos;t create or drop tables in anyway.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit] diff -a -I \(file:\)\|\(/tmp/.*\) /data/users/pchakka/workspace/oshive/build/ql/test/logs/clientpositive/input3.q.out /data/users/pchakka/workspace/oshive3/ql/src/test/results/clientpositive/input3.q.out
    [junit] 14,15d13
    [junit] &amp;lt; altern1
    [junit] &amp;lt; external2
    [junit] 18d15
    [junit] &amp;lt; src2
    [junit] 24,25d20
    [junit] &amp;lt; t1
    [junit] &amp;lt; t2
    [junit] 28,30d22
    [junit] &amp;lt; tstparttbl
    [junit] &amp;lt; tstparttbl2
    [junit] &amp;lt; union_out
    [junit] 78,79d69
    [junit] &amp;lt; altern1
    [junit] &amp;lt; external2
    [junit] 82d71
    [junit] &amp;lt; src2
    [junit] 88,89d76
    [junit] &amp;lt; t1
    [junit] &amp;lt; t2
    [junit] 92,94d78
    [junit] &amp;lt; tstparttbl
    [junit] &amp;lt; tstparttbl2
    [junit] &amp;lt; union_out
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12707404" author="prasadc" created="Fri, 8 May 2009 16:25:17 +0000"  >&lt;p&gt;Thanks Ashish.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407403" name="patch-476.txt" size="1561" author="athusoo" created="Wed, 6 May 2009 22:13:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 May 2009 19:27:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122269</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>table and partition objects are available in pre-execution hook interface.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-477] Some optimization thoughts for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-477</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Before we can start working on Hive-461. I am doing some profiling for hive. And here are some thoughts for improvements:&lt;/p&gt;

&lt;p&gt;minor :&lt;br/&gt;
1) add a new HiveText to replace Text. It can avoid byte copy when init LazyString. I have done a draft one, it shows  ~1% performance gains.&lt;br/&gt;
2) let StructObjectInspector&apos;s &lt;/p&gt;
    &lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     public List&amp;lt;Object&amp;gt; getStructFieldsDataAsList(Object data);
    &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to be &lt;/p&gt;
    &lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     public Object[] getStructFieldsDataAsArray(Object data);
    &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In my profiling test, it shows some performace gains. but in acutal execution it did not. Anyway, let it return java array will reduce gc&apos;s burden of collection ArrayList&lt;/p&gt;

&lt;p&gt;not so minor:&lt;br/&gt;
3) split FileSinkOperator&apos;s Writer into another Thread. Adding a producer-consumer array as the bridge between the Operators thread and the Writer thread.&lt;br/&gt;
4) the operator stack is kind of deep. In order to avoid instruction cache misses, and increase the efficiency data cache, I suggest to let Hive&apos;s operator can process an array of rows instead of processing only one row at a time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424803">HIVE-477</key>
            <summary>Some optimization thoughts for Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                            <label>optimization</label>
                    </labels>
                <created>Thu, 7 May 2009 11:04:11 +0000</created>
                <updated>Sun, 23 Oct 2011 20:30:33 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12707194" author="he yongqiang" created="Fri, 8 May 2009 00:41:23 +0000"  >&lt;p&gt;one refrence for 4):&lt;br/&gt;
Breaking the Memory Wall in MonetDB.&lt;br/&gt;
And there are also many other references of Array-based execution.&lt;/p&gt;</comment>
                            <comment id="12707218" author="zshao" created="Fri, 8 May 2009 03:17:59 +0000"  >&lt;p&gt;For 3), adding another thread means we need to buffer the data between the 2 threads. It will be great to have some data on how much percentage of time this can save us beforehand. At least, we should know how much time is spent in operator stack, and how much is spent in writer.&lt;/p&gt;

&lt;p&gt;For 4), there are some difficulties. We are using a single object to pass all rows. Doing 4) means we need to use multiple objects. Also, given the bigger cache size of modern CPUs, I am not sure whether our operator stack will go out of cache or not.&lt;/p&gt;</comment>
                            <comment id="12708053" author="he yongqiang" created="Mon, 11 May 2009 14:31:41 +0000"  >&lt;p&gt;New test results for understanding how much time is used in the RecordWriter, and how much time is used in OperatorProcessing.&lt;/p&gt;

&lt;p&gt;The whole test involves 4 tables: tablerc1,tablerc2, tableseq1, tableseq2. They all have 30 string columns.&lt;br/&gt;
tablerc1 and tablerc2 are stored as RCFile. tableseq1 and tableseq2 are stored as SequenceFile.&lt;br/&gt;
tablerc1 and tablerc2 are about 134M. tableseq1 and tableseq2 are about 178M. They all store the same original data.&lt;/p&gt;

&lt;p&gt;Here are the results:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Command &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Normal Execution Time( the whole job costs / the first mapper / the second mapper ) &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;  No RecordWriter&apos;s write in FileSinkOperator ( the whole job costs / the first mapper / the second mapper )&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Empty ExecMapper&apos;s map Body( the whole job costs / the first mapper / the second mapper ) &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; insert overwrite tablerc2 select * from tablerc1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 131 / 115 /  117 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 45 / 34 / 34 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26 / 16 / 15 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; insert overwrite tablerc2 select * from tablerc1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 121 / 114 /  116 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 42 / 34 / 33 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20 / 16 / 15 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; insert overwrite tableseq2 select * from tableseq1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 129 / 120 /  122 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 37 / 35 / 34 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18 / 12 / 12 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; insert overwrite tableseq2 select * from tableseq1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 130 / 127 /  123 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 38/ 35 / 35 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17 / 13 / 12 &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="12708056" author="he yongqiang" created="Mon, 11 May 2009 14:34:29 +0000"  >&lt;p&gt;Using hadoop-streaming.jar &lt;/p&gt;

&lt;p&gt;RCFile:&lt;br/&gt;
$HADOOP_HOME/bin/hadoop  jar $HADOOP_HOME/contrib/streaming/hadoop-0.19.0-streaming.jar  -input /user/hive/warehouse/tablerc1  -output testHiveWriter  -inputformat org.apache.hadoop.hive.ql.io.RCFileInputFormat -outputformat org.apache.hadoop.hive.ql.io.RCFileOutputFormat -mapper org.apache.hadoop.mapred.lib.IdentityMapper  -jobconf mapred.work.output.dir=.  -jobconf hive.io.rcfile.column.number.conf=32 -jobconf mapred.output.compress=true -numReduceTasks 0&lt;/p&gt;

&lt;p&gt;It costs 100+3 seconds.&lt;/p&gt;

&lt;p&gt;And in order to execute this command succuessfully, we need to change the RCFile&apos;s Generic signature to &amp;lt;WritableComparable,...&amp;gt;.&lt;/p&gt;</comment>
                            <comment id="12708732" author="he yongqiang" created="Wed, 13 May 2009 02:53:36 +0000"  >&lt;p&gt;I did the same test without compression. &lt;br/&gt;
It turns out both insert overwrite.. commands finished in near one minutes(60 +/- 9 seconds).&lt;/p&gt;</comment>
                            <comment id="12708796" author="he yongqiang" created="Wed, 13 May 2009 06:52:55 +0000"  >&lt;p&gt;One Comment for 1):&lt;br/&gt;
Avoiding byte copy when init LazyString seems will not save CPU time. &lt;br/&gt;
In my test, i use two tables of 30 1K columns, and insert one from the other. The table&apos;s size is about 140M.&lt;br/&gt;
Two tests, one with byte copy and the other without byte copy, cost the same time.&lt;/p&gt;

&lt;p&gt;So it seems java&apos;s array copy time can be ignored.&lt;/p&gt;</comment>
                            <comment id="13133732" author="ashutoshc" created="Sun, 23 Oct 2011 20:30:33 +0000"  >&lt;p&gt;3) &amp;amp; 4) are related to what&apos;s proposed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2202&quot; title=&quot;multi-thread hive io and execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2202&quot;&gt;HIVE-2202&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12509410">HIVE-2202</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 May 2009 03:17:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42823</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-478] Surface &quot;processor time&quot; for queries</title>
                <link>https://issues.apache.org/jira/browse/HIVE-478</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We currently list real-time metrics of how long queries take--&quot;finished in: 1min 13sec&quot; appears on the job tracker. However, this is affected by a lot more than just the quality or implementation of the query. For example, number of mappers used varies a lot when you use subqueries versus single-query aggregation, as does the amount of work necessary.&lt;/p&gt;

&lt;p&gt;For implementation comparisons (e.g., &quot;should I use this version of the query or that one&quot;), ti would be great to know the processor time used instead of the real time used...both in terms of &quot;mapper cpu seconds&quot; and &quot;reducer cpu seconds.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425131">HIVE-478</key>
            <summary>Surface &quot;processor time&quot; for queries</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                            <label>metrics</label>
                    </labels>
                <created>Mon, 11 May 2009 19:22:08 +0000</created>
                <updated>Tue, 5 Apr 2011 22:53:19 +0000</updated>
                                                                            <component>Logging</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12729787" author="akramer" created="Fri, 10 Jul 2009 19:32:25 +0000"  >&lt;p&gt;Also, in case it was not obvious, the current system counts time going by while mappers/reducers are &quot;pending.&quot; This request would tell me how much time I actually used, e.g., not include time spent waiting for mappers or reducers.&lt;/p&gt;</comment>
                            <comment id="12797164" author="namit" created="Wed, 6 Jan 2010 16:24:44 +0000"  >&lt;p&gt;Can you set the configuration parameter hive.task.progress to true. It will dump the total time taken by each operator.&lt;br/&gt;
Please check if this meets your requirements, we can enhance it to add more stuff.&lt;/p&gt;</comment>
                            <comment id="12991686" author="akramer" created="Mon, 7 Feb 2011 23:00:43 +0000"  >&lt;p&gt;Sorry for the month-long delay. This is all I need. But it would be great, in general, to report this in the standard way:&lt;/p&gt;

&lt;p&gt;Time taken: 185.89 seconds (23,194,570 CPU_MILLISECONDS)&lt;/p&gt;

&lt;p&gt;...in the CLI. Otherwise ok to mark issue resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Jan 2010 16:24:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42822</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-479] Change RCFileOutputFormat&apos;s generic signatute to be &lt;WritableComparable, ..&gt;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-479</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In one test for hive-477, i found that the below command can not sucessfully pass:&lt;/p&gt;

&lt;p&gt;$HADOOP_HOME/bin/hadoop jar $HADOOP_HOME/contrib/streaming/hadoop-0.19.0-streaming.jar -input /user/hive/warehouse/tablerc1 -output testHiveWriter -inputformat org.apache.hadoop.hive.ql.io.RCFileInputFormat -outputformat org.apache.hadoop.hive.ql.io.RCFileOutputFormat -mapper org.apache.hadoop.mapred.lib.IdentityMapper -jobconf mapred.work.output.dir=. -jobconf hive.io.rcfile.column.number.conf=32 -jobconf mapred.output.compress=true -numReduceTasks 0&lt;/p&gt;

&lt;p&gt;It is caused by the assumption that RCFileOutputFormat thinks the key&apos;s class of passes in records is Void.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425167">HIVE-479</key>
            <summary>Change RCFileOutputFormat&apos;s generic signatute to be &lt;WritableComparable, ..&gt;</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 05:19:51 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:18 +0000</updated>
                            <resolved>Wed, 3 Jun 2009 21:33:33 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12716070" author="zshao" created="Wed, 3 Jun 2009 21:33:33 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407844" name="hive-479-2009-5-12.patch" size="1833" author="he yongqiang" created="Tue, 12 May 2009 05:25:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jun 2009 21:33:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122271</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-479&quot; title=&quot;Change RCFileOutputFormat&amp;#39;s generic signatute to be &amp;lt;WritableComparable, ..&amp;gt;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-479&quot;&gt;&lt;strike&gt;HIVE-479&lt;/strike&gt;&lt;/a&gt;. Change RCFileOutputFormat&amp;#39;s generic signatute. (Yongqiang He via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-480] allow option to retry map-reduce tasks</title>
                <link>https://issues.apache.org/jira/browse/HIVE-480</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;for long running queries with multiple map-reduce jobs - this should help in dealing with any transient cluster failures without having to re-running all the tasks.&lt;/p&gt;

&lt;p&gt;ideally - the entire plan can be serialized out and the actual process of executing the workflow can be left to a pluggable workflow execution engine (since this is a problem that has been solved many times already).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425226">HIVE-480</key>
            <summary>allow option to retry map-reduce tasks</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 15:21:03 +0000</created>
                <updated>Tue, 26 Jan 2010 00:08:29 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12718622" author="zshao" created="Thu, 11 Jun 2009 20:02:12 +0000"  >&lt;p&gt;I will add a hive option to control the number of retries.&lt;/p&gt;</comment>
                            <comment id="12718623" author="zshao" created="Thu, 11 Jun 2009 20:04:03 +0000"  >&lt;p&gt;As a side note, the conf in hadoop is &quot;mapred.max.tracker.failures&quot; which controls the number of maximum permitted failures for each task.&lt;/p&gt;</comment>
                            <comment id="12718686" author="zshao" created="Fri, 12 Jun 2009 00:52:59 +0000"  >&lt;p&gt;This patch adds an additional config: &quot;hive.exec.retries.max&quot; (default: 1) to HiveConf and hive-default.xml&lt;/p&gt;</comment>
                            <comment id="12718736" author="namit" created="Fri, 12 Jun 2009 06:31:42 +0000"  >&lt;p&gt;The changes look good - I had a question about the usage. When will the default be greater than 1 ?&lt;br/&gt;
If a long job gets retried after running for 5 hours, it may really increase the load on the cluster.&lt;br/&gt;
So, if a cluster is unhealthy for some random reason, it may incur further pain on the cluster.&lt;/p&gt;

&lt;p&gt;Although, this is mute till max retries is 1, where current behavior is preserved.&lt;/p&gt;</comment>
                            <comment id="12718884" author="namit" created="Fri, 12 Jun 2009 15:43:40 +0000"  >&lt;p&gt;a lot of tests failed - can you fix and resubmit the patch&lt;/p&gt;</comment>
                            <comment id="12718911" author="jsensarma" created="Fri, 12 Jun 2009 17:26:29 +0000"  >&lt;p&gt;one concern i have is that if the cluster goes down temporarily - then the retries will fail promptly and this fix would serve no purpose.&lt;/p&gt;

&lt;p&gt;on the other hand - if the failure is due to genuine problems with the job (like problems in user scripts or bad input etc.) - then we will try this unnecessarily and cause excess load.&lt;/p&gt;

&lt;p&gt;we need to think about how to distinguish these cases. in some cases (interactive cli session) - it may be better to leave the decision to user (give a prompt and ask the user whether they want to retry the job).&lt;/p&gt;

&lt;p&gt;ideally - we should be able to do something like this for a non-interactive session as well - but that seems much more complicated (suspending and resuming a query given a queryid)&lt;/p&gt;</comment>
                            <comment id="12718928" author="prasadc" created="Fri, 12 Jun 2009 18:17:50 +0000"  >&lt;p&gt;if all queries go through Hive Server, it can figure out when to start queuing queries to be executed when the cluster comes back either.&lt;/p&gt;

&lt;p&gt;can we integrate the code that Pete wrote to figure out whether cluster is up or not into Hive CLI so that we can display a neat message to user that cluster is not available?&lt;/p&gt;</comment>
                            <comment id="12718944" author="namit" created="Fri, 12 Jun 2009 19:08:50 +0000"  >&lt;p&gt;We should wait for this till we have a Hive Server.&lt;/p&gt;

&lt;p&gt;If we have a Hive server, then we have a cache (query -&amp;gt; job file (which contains all map-reduce tasks) + base dependencies with latest timestamps), we can use jdbm for that.&lt;/p&gt;

&lt;p&gt;Metastore needs to keep track of latest modification of a base object (table/partition) if it does not do so already.&lt;/p&gt;

&lt;p&gt;Then, we dont need retries - the results will automatically get shared even across multiple users.&lt;/p&gt;</comment>
                            <comment id="12718990" author="jsensarma" created="Fri, 12 Jun 2009 21:32:13 +0000"  >&lt;p&gt;unfortunately the hive server route would almost mean that this jira is dead. even FB hasn&apos;t standardized on using it. other installs may never use it.&lt;/p&gt;

&lt;p&gt;is there something short term we can do? for example - taking the current patch and adding a user prompt (unless prompting is disabled and for the case of &apos;-f&apos; execution) would provide a short term solution that may help some subset of users.&lt;/p&gt;

&lt;p&gt;another practical solution could be to try and distinguish between communication failures to the JT (which scream for sleep/retry) and failures of the job due to task failure (which means we shouldn&apos;t retry automatically). is not possible to do this distinction at all? (if not - perhaps we can do something on the hadoop side to enable this).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12446618">HIVE-1100</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12410444" name="HIVE-480.1.patch" size="13062" author="zshao" created="Fri, 12 Jun 2009 00:52:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Jun 2009 20:02:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-481] Add a http server to the MapOperator/ExecReducer to show the latest tuples processed by each operator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-481</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Each map/reduce tasks will start an http service at a port (which is displayed in the log messages) so users can connect to it and know the progress of each operators in the operator tree.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425239">HIVE-481</key>
            <summary>Add a http server to the MapOperator/ExecReducer to show the latest tuples processed by each operator</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 16:44:13 +0000</created>
                <updated>Tue, 12 May 2009 16:44:13 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42820</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122273</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-482] Optimize Group By + Order By with the same keys for TPC-H 3.4.2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-482</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We should be able to merge the map-reduce jobs for group-by and order-by.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select
  l_returnflag,
  l_linestatus,
  sum(l_quantity) as sum_qty,
  sum(l_extendedprice) as sum_base_price,
  sum(l_extendedprice*(1-l_discount)) as sum_disc_price,
  sum(l_extendedprice*(1-l_discount)*(1+l_tax)) as sum_charge,
  avg(l_quantity) as avg_qty,
  avg(l_extendedprice) as avg_price,
  avg(l_discount) as avg_disc,
  count(*) as count_order
from
  lineitem
where
  l_shipdate &amp;lt;= date &lt;span class=&quot;code-quote&quot;&gt;&apos;1998-12-01&apos;&lt;/span&gt; - interval &lt;span class=&quot;code-quote&quot;&gt;&apos;[DELTA]&apos;&lt;/span&gt; day (3)
group by
  l_returnflag,
  l_linestatus
order by
  l_returnflag,
  l_linestatus;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;http://www.tpc.org/tpch/spec/tpch2.8.0.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.tpc.org/tpch/spec/tpch2.8.0.pdf&lt;/a&gt; Section 3.4.2 Functional Query Definition&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425244">HIVE-482</key>
            <summary>Optimize Group By + Order By with the same keys for TPC-H 3.4.2</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 17:13:33 +0000</created>
                <updated>Tue, 12 May 2009 17:13:33 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ohz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-483] comments not handled properly in trunk</title>
                <link>https://issues.apache.org/jira/browse/HIVE-483</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Anything after the comment is ignored - it can lead to random errors - it should be handled by the parser&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425276">HIVE-483</key>
            <summary>comments not handled properly in trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 22:06:49 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:53 +0000</updated>
                            <resolved>Wed, 13 May 2009 03:49:13 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12708652" author="prasadc" created="Tue, 12 May 2009 22:11:44 +0000"  >&lt;p&gt;i am running tests&lt;/p&gt;</comment>
                            <comment id="12708681" author="prasadc" created="Tue, 12 May 2009 23:14:11 +0000"  >&lt;p&gt;There  are two failures&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] diff -a -I \(file:\)\|\(/tmp/.*\) /data/users/pchakka/workspace/oshive3/build/ql/test/logs/clientpositive/union6.q.out /data/users/pchakka/workspace/oshive3/ql/src/test/results/clientpositive/union6.q.out
    [junit] 1,3c1
    [junit] &amp;lt; query: -- union &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;: 1 subquery is a map-reduce job, different inputs &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sub-queries, followed by filesink
    [junit] &amp;lt; 
    [junit] &amp;lt; drop table tmptable
    [junit] ---
    [junit] &amp;gt; query: drop table tmptable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] diff -a -I \(file:\)\|\(/tmp/.*\) /data/users/pchakka/workspace/oshive3/build/ql/test/logs/clientnegative/load_wrong_fileformat.q.out /data/users/pchakka/workspace/oshive3/ql/src/test/results/clientnegative/load_wrong_fileformat.q.out
    [junit] 1,4c1
    [junit] &amp;lt; query: -- test &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; loading into tables with the correct file format
    [junit] &amp;lt; -- test &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; loading into partitions with the correct file format
    [junit] &amp;lt; 
    [junit] &amp;lt; DROP TABLE T1
    [junit] ---
    [junit] &amp;gt; query: DROP TABLE T1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12708716" author="namit" created="Wed, 13 May 2009 01:29:49 +0000"  >&lt;p&gt;test results updated&lt;/p&gt;</comment>
                            <comment id="12708745" author="prasadc" created="Wed, 13 May 2009 03:49:13 +0000"  >&lt;p&gt;Thanks &amp;amp; Thanks Namit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407929" name="hive.483.1.patch" size="6269" author="namit" created="Tue, 12 May 2009 22:08:32 +0000"/>
                            <attachment id="12407956" name="hive.483.2.patch" size="109750" author="namit" created="Wed, 13 May 2009 01:29:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 May 2009 22:11:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
