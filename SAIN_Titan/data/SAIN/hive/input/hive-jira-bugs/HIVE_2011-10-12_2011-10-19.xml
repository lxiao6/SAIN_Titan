<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:19:14 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-10-12+AND+created+%3C%3D+2011-10-19+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="14" total="14"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2497] partition pruning  prune some right partition under specific conditions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2497</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;create table src3(key string, value string) partitioned by (pt string)&lt;br/&gt;
row format delimited fields terminated by &apos;,&apos;;&lt;/p&gt;

&lt;p&gt;ALTER TABLE src3 ADD IF NOT EXISTS PARTITION (pt=&apos;20110911000000&apos;) ;&lt;br/&gt;
ALTER TABLE src3 ADD IF NOT EXISTS PARTITION (pt=&apos;20110912000000&apos;) ;&lt;br/&gt;
ALTER TABLE src3 ADD IF NOT EXISTS PARTITION (pt=&apos;20110913000000&apos;) ;&lt;/p&gt;



&lt;p&gt;explain extended&lt;br/&gt;
select user_id &lt;br/&gt;
from&lt;br/&gt;
 (&lt;br/&gt;
   select &lt;br/&gt;
    cast(key as int) as user_id&lt;br/&gt;
    ,case when (value like &apos;aaa%&apos; or value like &apos;vvv%&apos;)&lt;br/&gt;
            then 1&lt;br/&gt;
            else 0  end as tag_student&lt;br/&gt;
   from src3&lt;br/&gt;
 ) sub&lt;br/&gt;
where sub.tag_student &amp;gt; 0;&lt;/p&gt;


&lt;p&gt;STAGE DEPENDENCIES:&lt;br/&gt;
  Stage-1 is a root stage&lt;br/&gt;
  Stage-0 is a root stage&lt;/p&gt;

&lt;p&gt;STAGE PLANS:&lt;br/&gt;
  Stage: Stage-1&lt;br/&gt;
    Map Reduce&lt;br/&gt;
      Alias -&amp;gt; Map Operator Tree:&lt;br/&gt;
        sub:src3 &lt;br/&gt;
          TableScan&lt;br/&gt;
            alias: src3&lt;br/&gt;
            Filter Operator&lt;br/&gt;
              isSamplingPred: false&lt;br/&gt;
              predicate:&lt;br/&gt;
                  expr: (CASE WHEN (((value like &apos;aaa%&apos;) or (value like &apos;vvv%&apos;))) THEN (1) ELSE (0) END &amp;gt; 0)&lt;br/&gt;
                  type: boolean&lt;br/&gt;
              Select Operator&lt;br/&gt;
                expressions:&lt;br/&gt;
                      expr: UDFToInteger(key)&lt;br/&gt;
                      type: int&lt;br/&gt;
                      expr: CASE WHEN (((value like &apos;aaa%&apos;) or (value like &apos;vvv%&apos;))) THEN (1) ELSE (0) END&lt;br/&gt;
                      type: int&lt;br/&gt;
                outputColumnNames: _col0, _col1&lt;br/&gt;
                Filter Operator&lt;br/&gt;
                  isSamplingPred: false&lt;br/&gt;
                  predicate:&lt;br/&gt;
                      expr: (_col1 &amp;gt; 0)&lt;br/&gt;
                      type: boolean&lt;br/&gt;
                  Select Operator&lt;br/&gt;
                    expressions:&lt;br/&gt;
                          expr: _col0&lt;br/&gt;
                          type: int&lt;br/&gt;
                    outputColumnNames: _col0&lt;br/&gt;
                    File Output Operator&lt;br/&gt;
                      compressed: false&lt;br/&gt;
                      GlobalTableId: 0&lt;br/&gt;
                      directory: hdfs://localhost:54310/tmp/hive-tianzhao/hive_2011-10-11_19-26-12_894_9085644225727185586/-ext-10001&lt;br/&gt;
                      NumFilesPerFileSink: 1&lt;br/&gt;
                      table:&lt;br/&gt;
                          input format: org.apache.hadoop.mapred.TextInputFormat&lt;br/&gt;
                          output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&lt;br/&gt;
                          properties:&lt;br/&gt;
                            columns _col0&lt;br/&gt;
                            columns.types int&lt;br/&gt;
                            serialization.format 1&lt;br/&gt;
                      TotalFiles: 1&lt;br/&gt;
                      MultiFileSpray: false&lt;br/&gt;
      Needs Tagging: false&lt;/p&gt;

&lt;p&gt;  Stage: Stage-0&lt;br/&gt;
    Fetch Operator&lt;br/&gt;
      limit: -1&lt;/p&gt;


&lt;p&gt;if we set hive.optimize.ppd=false;&lt;/p&gt;

&lt;p&gt;STAGE DEPENDENCIES:&lt;br/&gt;
  Stage-1 is a root stage&lt;br/&gt;
  Stage-0 is a root stage&lt;/p&gt;

&lt;p&gt;STAGE PLANS:&lt;br/&gt;
  Stage: Stage-1&lt;br/&gt;
    Map Reduce&lt;br/&gt;
      Alias -&amp;gt; Map Operator Tree:&lt;br/&gt;
        sub:src3 &lt;br/&gt;
          TableScan&lt;br/&gt;
            alias: src3&lt;br/&gt;
            Select Operator&lt;br/&gt;
              expressions:&lt;br/&gt;
                    expr: UDFToInteger(key)&lt;br/&gt;
                    type: int&lt;br/&gt;
                    expr: CASE WHEN (((value like &apos;aaa%&apos;) or (value like &apos;vvv%&apos;))) THEN (1) ELSE (0) END&lt;br/&gt;
                    type: int&lt;br/&gt;
              outputColumnNames: _col0, _col1&lt;br/&gt;
              Filter Operator&lt;br/&gt;
                isSamplingPred: false&lt;br/&gt;
                predicate:&lt;br/&gt;
                    expr: (_col1 &amp;gt; 0)&lt;br/&gt;
                    type: boolean&lt;br/&gt;
                Select Operator&lt;br/&gt;
                  expressions:&lt;br/&gt;
                        expr: _col0&lt;br/&gt;
                        type: int&lt;br/&gt;
                  outputColumnNames: _col0&lt;br/&gt;
                  File Output Operator&lt;br/&gt;
                    compressed: false&lt;br/&gt;
                    GlobalTableId: 0&lt;br/&gt;
                    directory: hdfs://localhost:54310/tmp/hive-tianzhao/hive_2011-10-11_19-27-22_527_1729287213481398480/-ext-10001&lt;br/&gt;
                    NumFilesPerFileSink: 1&lt;br/&gt;
                    table:&lt;br/&gt;
                        input format: org.apache.hadoop.mapred.TextInputFormat&lt;br/&gt;
                        output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&lt;br/&gt;
                        properties:&lt;br/&gt;
                          columns _col0&lt;br/&gt;
                          columns.types int&lt;br/&gt;
                          serialization.format 1&lt;br/&gt;
                    TotalFiles: 1&lt;br/&gt;
                    MultiFileSpray: false&lt;br/&gt;
      Needs Tagging: false&lt;br/&gt;
      Path -&amp;gt; Alias:&lt;br/&gt;
        hdfs://localhost:54310/user/hive/warehouse/src3/pt=20110911000000 &lt;span class=&quot;error&quot;&gt;&amp;#91;sub:src3&amp;#93;&lt;/span&gt;&lt;br/&gt;
        hdfs://localhost:54310/user/hive/warehouse/src3/pt=20110912000000 &lt;span class=&quot;error&quot;&gt;&amp;#91;sub:src3&amp;#93;&lt;/span&gt;&lt;br/&gt;
        hdfs://localhost:54310/user/hive/warehouse/src3/pt=20110913000000 &lt;span class=&quot;error&quot;&gt;&amp;#91;sub:src3&amp;#93;&lt;/span&gt;&lt;br/&gt;
      Path -&amp;gt; Partition:&lt;br/&gt;
        hdfs://localhost:54310/user/hive/warehouse/src3/pt=20110911000000 &lt;br/&gt;
          Partition&lt;br/&gt;
            base file name: pt=20110911000000&lt;/p&gt;



</description>
                <environment></environment>
        <key id="12526789">HIVE-2497</key>
            <summary>partition pruning  prune some right partition under specific conditions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aoxiang">binlijin</assignee>
                                    <reporter username="aoxiang">binlijin</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 12 Oct 2011 02:27:43 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:56 +0000</updated>
                            <resolved>Tue, 25 Oct 2011 03:45:13 +0000</resolved>
                                    <version>0.7.1</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13125550" author="coderplay" created="Wed, 12 Oct 2011 02:50:21 +0000"  >&lt;p&gt;We found partition pruning would incorrectly prune some partitions the MR job needs by running a sql like below&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
select user_id 
from
(
  select 
    cast(key as int) as user_id,
    case when (value like &apos;aaa%&apos; or value like &apos;vvv%&apos;) 
      then 1 
      else 0 
      end as tag_student
  from src3
) sub
where sub.tag_student &amp;gt; 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The patch should fix this problem.&lt;/p&gt;</comment>
                            <comment id="13125553" author="aoxiang" created="Wed, 12 Oct 2011 02:56:08 +0000"  >&lt;p&gt;PredicatePushDown will push the predicate  sub.tag_student &amp;gt; 0 down following TableScanOperator. When  partition pruning ,  try to iterate all partitions , the filter condition is :&lt;br/&gt;
case when (null or null)&lt;br/&gt;
then 1&lt;br/&gt;
else 0 &lt;br/&gt;
&amp;gt; 0&lt;br/&gt;
The case when return 0, so all partitions are pruned.&lt;/p&gt;</comment>
                            <comment id="13127949" author="ashutoshc" created="Fri, 14 Oct 2011 22:49:07 +0000"  >&lt;p&gt;Binlijin,&lt;br/&gt;
It will be good to also include a test case in the patch for regression purposes.&lt;/p&gt;</comment>
                            <comment id="13128693" author="aoxiang" created="Mon, 17 Oct 2011 06:24:06 +0000"  >&lt;p&gt;Ashutosh Chauhan, I add a test case in hive-2497.2.patch.&lt;br/&gt;
Because I use a version does not have PartitionConditionRemover, having PartitionConditionRemover and not having PartitionConditionRemover the situation is different, so the test case is not the one in above Description.&lt;/p&gt;</comment>
                            <comment id="13128708" author="ashutoshc" created="Mon, 17 Oct 2011 07:16:49 +0000"  >&lt;p&gt;Binlijin,&lt;br/&gt;
Is problem reproducible on a)trunk b) 0.8 branch? Is your patch targeted for 0.7 branch?&lt;/p&gt;</comment>
                            <comment id="13128711" author="aoxiang" created="Mon, 17 Oct 2011 07:41:15 +0000"  >&lt;p&gt;Ashutosh Chauhan,&lt;br/&gt;
the problem is reproducible on trunk, 0.8 branch, 0.7 branch that set hive.optimize.ppd=true;&lt;br/&gt;
the patch is for the version that uses PredicatePushDown and PartitionPruner, so 0.7 branch, 0.8 branch, and trunk they all can use the patch.&lt;/p&gt;</comment>
                            <comment id="13134455" author="namit" created="Mon, 24 Oct 2011 20:30:37 +0000"  >&lt;p&gt;reviewing right now&lt;/p&gt;</comment>
                            <comment id="13134482" author="namit" created="Mon, 24 Oct 2011 21:02:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13134733" author="namit" created="Tue, 25 Oct 2011 03:45:13 +0000"  >&lt;p&gt;Committed. Thanks binlijin&lt;/p&gt;</comment>
                            <comment id="13135313" author="hudson" created="Tue, 25 Oct 2011 18:28:11 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1032 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1032/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1032/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2497&quot; title=&quot;partition pruning  prune some right partition under specific conditions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2497&quot;&gt;&lt;del&gt;HIVE-2497&lt;/del&gt;&lt;/a&gt; partition pruning prune some right partition under specific conditions&lt;br/&gt;
(binlijin via namit)&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;begin &lt;b&gt;PUBLIC&lt;/b&gt; platform impact section -&lt;br/&gt;
Bugzilla: #&lt;/li&gt;
	&lt;li&gt;end platform impact -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188507&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188507&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/ExprProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ppr_allchildsarenull.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ppr_allchildsarenull.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499264" name="hive-2497.2.patch" size="22148" author="aoxiang" created="Mon, 17 Oct 2011 06:18:09 +0000"/>
                            <attachment id="12498699" name="hive-2497.patch" size="1136" author="aoxiang" created="Wed, 12 Oct 2011 02:36:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Oct 2011 02:50:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73844</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lk9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123933</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2498] Group by operator does not estimate size of Timestamp &amp; Binary data correctly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2498</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It currently defaults to default case and returns constant value, whereas we can do better by getting actual size at runtime.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526796">HIVE-2498</key>
            <summary>Group by operator does not estimate size of Timestamp &amp; Binary data correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2011 05:20:52 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:06 +0000</updated>
                            <resolved>Thu, 5 Jul 2012 19:53:58 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.8.1</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13125604" author="ashutoshc" created="Wed, 12 Oct 2011 05:21:53 +0000"  >&lt;p&gt;Patch to correctly get the size at runtime.&lt;/p&gt;</comment>
                            <comment id="13125606" author="ashutoshc" created="Wed, 12 Oct 2011 05:22:45 +0000"  >&lt;p&gt;Marking Patch Available.&lt;/p&gt;</comment>
                            <comment id="13179215" author="cwsteinbach" created="Wed, 4 Jan 2012 01:41:58 +0000"  >&lt;p&gt;@Ashutosh: Please rebase the patch and submit a phabricator review request. Thanks.&lt;/p&gt;</comment>
                            <comment id="13184011" author="phabricator@reviews.facebook.net" created="Wed, 11 Jan 2012 12:23:38 +0000"  >&lt;p&gt;ashutoshc requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2498&quot; title=&quot;Group by operator does not estimate size of Timestamp &amp;amp; Binary data correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2498&quot;&gt;&lt;del&gt;HIVE-2498&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Group by operator doesnt estimate size of Timestamp &amp;amp; Binary data correctly&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2498&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2498&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Better size estimate for timestamp and binary datatypes&lt;/p&gt;

&lt;p&gt;  It currently defaults to default case and returns constant value, whereas we can do better by getting actual size at runtime.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1185&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1185&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2463/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2463/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13195852" author="ashutoshc" created="Sun, 29 Jan 2012 21:51:38 +0000"  >&lt;p&gt;Ready for review.&lt;/p&gt;</comment>
                            <comment id="13223965" author="ashutoshc" created="Wed, 7 Mar 2012 04:32:24 +0000"  >&lt;p&gt;Current patch cleanly applies on trunk. In any case, here is the rebased patch. &lt;/p&gt;</comment>
                            <comment id="13223966" author="ashutoshc" created="Wed, 7 Mar 2012 04:33:09 +0000"  >&lt;p&gt;Ready for review.&lt;/p&gt;</comment>
                            <comment id="13223968" author="phabricator@reviews.facebook.net" created="Wed, 7 Mar 2012 04:45:56 +0000"  >&lt;p&gt;ashutoshc requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2498&quot; title=&quot;Group by operator does not estimate size of Timestamp &amp;amp; Binary data correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2498&quot;&gt;&lt;del&gt;HIVE-2498&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Group by operator doesnt estimate size of Timestamp &amp;amp; Binary data correctly&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2498&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2498&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Rebased to trunk.&lt;/p&gt;

&lt;p&gt;  It currently defaults to default case and returns constant value, whereas we can do better by getting actual size at runtime.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2145&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_complex_types.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_complex_types.q&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4707/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4707/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13223971" author="ashutoshc" created="Wed, 7 Mar 2012 04:54:50 +0000"  >&lt;p&gt;Ignore the previous review request. That was meant for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2517&quot; title=&quot;Support group by on struct type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2517&quot;&gt;&lt;del&gt;HIVE-2517&lt;/del&gt;&lt;/a&gt;. Use the one above that one for this issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2498&quot; title=&quot;Group by operator does not estimate size of Timestamp &amp;amp; Binary data correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2498&quot;&gt;&lt;del&gt;HIVE-2498&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13258487" author="ashutoshc" created="Fri, 20 Apr 2012 19:18:33 +0000"  >&lt;p&gt;Unlinking from 0.9&lt;/p&gt;</comment>
                            <comment id="13402855" author="appodictic" created="Thu, 28 Jun 2012 05:16:02 +0000"  >&lt;p&gt;@Ashutosh this looks good to me. Any changes you would like since it has been a while?&lt;/p&gt;</comment>
                            <comment id="13405953" author="ashutoshc" created="Tue, 3 Jul 2012 18:13:29 +0000"  >&lt;p&gt;@Ed,&lt;br/&gt;
It looks good  and ready to get in. &lt;/p&gt;</comment>
                            <comment id="13406007" author="ashutoshc" created="Tue, 3 Jul 2012 20:31:19 +0000"  >&lt;p&gt;Ed,&lt;br/&gt;
Pleas find the updated rebased patch. &lt;/p&gt;</comment>
                            <comment id="13407437" author="appodictic" created="Thu, 5 Jul 2012 19:53:59 +0000"  >&lt;p&gt;Committed. Thanks Ashutosh.&lt;/p&gt;</comment>
                            <comment id="13547986" author="hudson" created="Wed, 9 Jan 2013 10:23:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2498&quot; title=&quot;Group by operator does not estimate size of Timestamp &amp;amp; Binary data correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2498&quot;&gt;&lt;del&gt;HIVE-2498&lt;/del&gt;&lt;/a&gt; Group by operator does not estimate size of Timestamp &amp;amp; Binary data correctly. Ashutosh Chauhan (via egc) (Revision 1357839)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ecapriolo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1357839&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1357839&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550027" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:06 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12510178" name="ASF.LICENSE.NOT.GRANTED--HIVE-2498.D1185.1.patch" size="4745" author="phabricator@reviews.facebook.net" created="Wed, 11 Jan 2012 12:23:39 +0000"/>
                            <attachment id="12498706" name="hive-2498.patch" size="4751" author="ashutoshc" created="Wed, 12 Oct 2011 05:21:53 +0000"/>
                            <attachment id="12517363" name="hive-2498_1.patch" size="4751" author="ashutoshc" created="Wed, 7 Mar 2012 04:32:23 +0000"/>
                            <attachment id="12534971" name="hive-2498_2.patch" size="4748" author="ashutoshc" created="Tue, 3 Jul 2012 20:31:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Jan 2012 01:41:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09yan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>55997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2499] small table filesize for automapjoin is not consistent in HiveConf.java and hive-default.xml</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2499</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12526810">HIVE-2499</key>
            <summary>small table filesize for automapjoin is not consistent in HiveConf.java and hive-default.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aoxiang">binlijin</assignee>
                                    <reporter username="aoxiang">binlijin</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 12 Oct 2011 08:24:00 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:22 +0000</updated>
                            <resolved>Thu, 13 Oct 2011 20:36:36 +0000</resolved>
                                    <version>0.7.1</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13125658" author="aoxiang" created="Wed, 12 Oct 2011 08:26:49 +0000"  >&lt;p&gt;in ./conf/hive-default.xml is :&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;hive.mapjoin.smalltable.filesize&amp;lt;/name&amp;gt;&lt;br/&gt;
  &amp;lt;value&amp;gt;25000000&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;description&amp;gt;The threshold for the input file size of the small tables; if the file size is smaller than this threshold, it will try to convert the common join into map join&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;but in HiveConf is :&lt;br/&gt;
    //small table file size&lt;br/&gt;
    HIVESMALLTABLESFILESIZE(&quot;hive.smalltable.filesize&quot;,25000000L), //25M&lt;/p&gt;
</comment>
                            <comment id="13125703" author="he yongqiang" created="Wed, 12 Oct 2011 10:11:46 +0000"  >&lt;p&gt;+1, will commit after tests pass&lt;/p&gt;</comment>
                            <comment id="13126894" author="he yongqiang" created="Thu, 13 Oct 2011 20:36:36 +0000"  >&lt;p&gt;Committed, thanks binlijin!&lt;/p&gt;</comment>
                            <comment id="13127191" author="hudson" created="Fri, 14 Oct 2011 00:49:50 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1011 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1011/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1011/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2499&quot; title=&quot;small table filesize for automapjoin is not consistent in HiveConf.java and hive-default.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2499&quot;&gt;&lt;del&gt;HIVE-2499&lt;/del&gt;&lt;/a&gt;: small table filesize for automapjoin is not correct in hive-site.xml (binlijin via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1183080&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1183080&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/auto_join28.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498717" name="hive-2499.patch" size="1052" author="aoxiang" created="Wed, 12 Oct 2011 08:25:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Oct 2011 10:11:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73868</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lk9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123934</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2500] Allow Hive to be debugged remotely</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2500</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12526813">HIVE-2500</key>
            <summary>Allow Hive to be debugged remotely</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsurowka">Robert Sur&#243;wka</assignee>
                                    <reporter username="rsurowka">Robert Sur&#243;wka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2011 08:30:12 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:45 +0000</updated>
                            <resolved>Mon, 31 Oct 2011 00:26:12 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13125671" author="rsurowka" created="Wed, 12 Oct 2011 08:59:11 +0000"  >&lt;p&gt;To connect to debug one can use e.g. Eclipse (Debug configurations -&amp;gt; Remote Java Application (New) -&amp;gt; (Standard (Socket Attach) | host where Hive runs (e.g localhost) | port 8000 | it&apos;s good to allow remote VM termination -&amp;gt; Debug. &lt;/p&gt;</comment>
                            <comment id="13125672" author="rsurowka" created="Wed, 12 Oct 2011 09:00:03 +0000"  >&lt;p&gt;The review request at &lt;a href=&quot;https://reviews.apache.org/r/2354/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2354/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13125938" author="ashutoshc" created="Wed, 12 Oct 2011 15:49:25 +0000"  >&lt;p&gt;Useful debugging feature. Robert, Instead of HADOOP_OPTS we should export HADOOP_CLIENT_OPTS in such cases otherwise we may run into problems such as &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3112&quot; title=&quot;Calling hadoop cli inside mapreduce job leads to errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3112&quot;&gt;&lt;del&gt;MAPREDUCE-3112&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13127675" author="rsurowka" created="Fri, 14 Oct 2011 16:34:31 +0000"  >&lt;p&gt;Thank you for this advice, I updated the diff (and review request) accordingly. &lt;/p&gt;</comment>
                            <comment id="13127896" author="rsurowka" created="Fri, 14 Oct 2011 21:52:43 +0000"  >&lt;p&gt;Apparently this diff is still wrong (I will have to do small fix to MapReduceTask.java, when debug off, it will add just one if check for a key being in a map per execute() call of that task, and only if new JVM is about to be started).&lt;/p&gt;

&lt;p&gt;As I am working on it I plan to add following features:&lt;/p&gt;

&lt;p&gt;-user could specify port on which Hive JVM will wait (8000 will be default).&lt;br/&gt;
-user could specify whether child JVMs should be also started in debug mode (default: not). If started in debug mode, child JVMs will wait on a different ports than parent (and I will try to make it in such a way, so probability of ports collision would be very small (to make it impossible one would need to use some between process communication, since children can start their own children, and I don&apos;t want to do that yet (especially that HIVE may be deployed on various os-es). User will know on which port new JVMs are waiting, since upon start they print that information. New JVMs will be started on ports higher than port of the initial JVM - so if someone needs, he can set initial port to be higher than any other already used TCP port). &lt;/p&gt;

&lt;p&gt;ETA: by mid of next week (hopefully)&lt;/p&gt;</comment>
                            <comment id="13127899" author="rsurowka" created="Fri, 14 Oct 2011 21:54:29 +0000"  >&lt;p&gt;Sorry, I meant MapRedTask. &lt;/p&gt;</comment>
                            <comment id="13129843" author="rsurowka" created="Tue, 18 Oct 2011 16:35:37 +0000"  >&lt;p&gt;The changes with this patch are as follows (I made some design changes to the comment from OCT 14) :&lt;/p&gt;

&lt;p&gt;-now the child JVMs should work correctly with debug (user decides whether they should be also started in debug mode or not).&lt;br/&gt;
-When child JVM starts in debug mode it will start listening on some random unused TCP port.&lt;br/&gt;
-By default child JVMs start in debug mode, but don&apos;t wait with execution for the debugger to connect (yet if someone would later decide that he actually wants to connect to any of them, he will be able to do that).&lt;br/&gt;
-user can specify debug options, as described in debug_help()&lt;br/&gt;
-I am very unproficient in bash, so if there are any changes you would like to see to make that code look better please let me know.&lt;br/&gt;
-Most ugly part of this patch are probably the regex expressions/string operations added to MapRedTask. They could be made significantly simpler, if additional environment variables were exported, and totally removed if small changes to hadoop starting scripts would be made. Yet I decided (maybe wrongly) that it&apos;s best to close all that entropy in configureDebugVariablesForChildJVM method instead of spilling it around (especially that it&apos;s just for debug).   &lt;/p&gt;

&lt;p&gt;The current diff is at: &lt;a href=&quot;https://reviews.apache.org/r/2354/diff/3/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2354/diff/3/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13131062" author="rsurowka" created="Wed, 19 Oct 2011 22:12:44 +0000"  >&lt;p&gt;Reintroduced the change to the hive-env.sh.template that I missed in the last patch.&lt;/p&gt;

&lt;p&gt;Note: due to the change I was requested to make, to add debug options to HADOOP_CLIENT_OPTS instead of HADOOP_OPTS, the debugging won&apos;t work unless at some point HADOOP_CLIENT_OPTS will be introduced into HADOOP_OPTS (or will be passed to JVM directly). This could be possibly best done by adding line like:&lt;br/&gt;
export HADOOP_OPTS=&quot;$HADOOP_OPTS $HADOOP_CLIENT_OPTS&quot; to hadoop-env.sh&lt;/p&gt;
</comment>
                            <comment id="13139675" author="nzhang" created="Sun, 30 Oct 2011 17:10:38 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="13139838" author="nzhang" created="Mon, 31 Oct 2011 00:26:12 +0000"  >&lt;p&gt;Committed. Thanks Robert!&lt;/p&gt;</comment>
                            <comment id="13139903" author="hudson" created="Mon, 31 Oct 2011 04:33:41 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1046 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1046/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1046/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2500&quot; title=&quot;Allow Hive to be debugged remotely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2500&quot;&gt;&lt;del&gt;HIVE-2500&lt;/del&gt;&lt;/a&gt;. Allow Hive to be debugged remotely (Robert Surowka via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195288&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195288&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/bin/ext/debug.sh&lt;/li&gt;
	&lt;li&gt;/hive/trunk/bin/ext/help.sh&lt;/li&gt;
	&lt;li&gt;/hive/trunk/bin/hive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-env.sh.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498721" name="HIVE-2500.1.patch" size="2567" author="rsurowka" created="Wed, 12 Oct 2011 08:59:10 +0000"/>
                            <attachment id="12499059" name="HIVE-2500.2.patch" size="2562" author="rsurowka" created="Fri, 14 Oct 2011 16:34:31 +0000"/>
                            <attachment id="12499561" name="HIVE-2500.3.patch" size="7260" author="rsurowka" created="Tue, 18 Oct 2011 16:35:37 +0000"/>
                            <attachment id="12499771" name="HIVE-2500.4.patch" size="8116" author="rsurowka" created="Wed, 19 Oct 2011 22:12:44 +0000"/>
                            <attachment id="12500526" name="HIVE-2500.5.patch" size="8936" author="rsurowka" created="Mon, 24 Oct 2011 19:40:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Oct 2011 15:49:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73871</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lk9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2501] When new instance of Hive (class) is created, the current database is reset to default (current database shouldn&apos;t be changed).</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2501</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This bug manifested to me, when first thing I did after starting Hive, was to call use &amp;lt;db_name&amp;gt;; but then calling show tables; was still showing tables from the default database (and I had to call &quot;use&quot; again to actually change database). This bug might have manifested only due to a specific Hive deployment I am using (I didn&apos;t investigate this issue that deeply). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12526885">HIVE-2501</key>
            <summary>When new instance of Hive (class) is created, the current database is reset to default (current database shouldn&apos;t be changed).</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsurowka">Robert Sur&#243;wka</assignee>
                                    <reporter username="rsurowka">Robert Sur&#243;wka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2011 18:01:02 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:40 +0000</updated>
                            <resolved>Wed, 26 Oct 2011 00:59:24 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13126006" author="rsurowka" created="Wed, 12 Oct 2011 18:09:28 +0000"  >&lt;p&gt;By the way, the debugging I added earlier today (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2500&quot; title=&quot;Allow Hive to be debugged remotely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2500&quot;&gt;&lt;del&gt;HIVE-2500&lt;/del&gt;&lt;/a&gt;) proved to be extremely useful when tracking this bug. &lt;/p&gt;</comment>
                            <comment id="13126007" author="rsurowka" created="Wed, 12 Oct 2011 18:10:51 +0000"  >&lt;p&gt;Review request at &lt;a href=&quot;https://reviews.apache.org/r/2361/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2361/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13126888" author="jvs" created="Thu, 13 Oct 2011 20:31:49 +0000"  >&lt;p&gt;Looks like a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2377&quot; title=&quot;USE database doesn&amp;#39;t work when it&amp;#39;s first command in session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2377&quot;&gt;&lt;del&gt;HIVE-2377&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13127729" author="rsurowka" created="Fri, 14 Oct 2011 17:47:01 +0000"  >&lt;p&gt;True, I am sorry for the overlook. Yet, it would be good if any patch for that bug were committed. &lt;/p&gt;</comment>
                            <comment id="13132211" author="jvs" created="Thu, 20 Oct 2011 23:40:46 +0000"  >&lt;p&gt;I&apos;ve closed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2377&quot; title=&quot;USE database doesn&amp;#39;t work when it&amp;#39;s first command in session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2377&quot;&gt;&lt;del&gt;HIVE-2377&lt;/del&gt;&lt;/a&gt; as dupe.  Could you add a test case for this one?&lt;/p&gt;</comment>
                            <comment id="13134632" author="rsurowka" created="Mon, 24 Oct 2011 23:31:21 +0000"  >&lt;p&gt;I tried to create a test, but unfortunately the bug doesn&apos;t manifest there. This is what I did: &lt;a href=&quot;https://reviews.apache.org/r/2559/diff/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2559/diff/#index_header&lt;/a&gt;&lt;br/&gt;
Is there a better way to prepare a test that would catch such a bug? &lt;/p&gt;</comment>
                            <comment id="13134650" author="jvs" created="Tue, 25 Oct 2011 00:07:44 +0000"  >&lt;p&gt;We don&apos;t want to create+drop the test database for every .q file.&lt;/p&gt;

&lt;p&gt;Instead of creating a new .q file, I think you can add a Java-level testcase to ql/src/test/org/apache/hadoop/hive/ql/metadata/TestHive.java&lt;/p&gt;
</comment>
                            <comment id="13135271" author="rsurowka" created="Tue, 25 Oct 2011 17:40:55 +0000"  >&lt;p&gt;Thank you for the response.&lt;/p&gt;

&lt;p&gt;The current diff at: &lt;a href=&quot;https://reviews.apache.org/r/2361/diff/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2361/diff/#index_header&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I added the appropriate test.&lt;/p&gt;

&lt;p&gt;About the previous .q test, I believe that new database wouldn&apos;t be created for each .q file, unless also tables like src and src_part are recreated for each .q file - but now it is immaterial anyway.   &lt;/p&gt;</comment>
                            <comment id="13135352" author="jvs" created="Tue, 25 Oct 2011 19:27:24 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13135596" author="jvs" created="Wed, 26 Oct 2011 00:59:24 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Robert!&lt;/p&gt;</comment>
                            <comment id="13135731" author="hudson" created="Wed, 26 Oct 2011 05:46:11 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1035 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1035/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1035/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2501&quot; title=&quot;When new instance of Hive (class) is created, the current database is reset to default (current database shouldn&amp;#39;t be changed).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2501&quot;&gt;&lt;del&gt;HIVE-2501&lt;/del&gt;&lt;/a&gt;. When new instance of Hive (class) is created, the current database&lt;br/&gt;
is reset to default.&lt;br/&gt;
(Robert Surowka via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188986&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188986&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/metadata/TestHive.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498787" name="HIVE-2501.1.patch" size="695" author="rsurowka" created="Wed, 12 Oct 2011 18:09:28 +0000"/>
                            <attachment id="12500729" name="HIVE-2501.2.patch" size="1463" author="rsurowka" created="Tue, 25 Oct 2011 17:40:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Oct 2011 20:31:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74253</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lka7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123936</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2502] Add whitelist for hosts used in table/partition locations</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2502</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Add a whitelist of host names that can be checked before creating/altering a table/partition to verify that the location is acceptable.  The whitelist should be empty by default, and should be configurable.  The check should default to pass if there is no host in the location, or the whitelist is empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526939">HIVE-2502</key>
            <summary>Add whitelist for hosts used in table/partition locations</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2011 21:49:07 +0000</created>
                <updated>Thu, 27 Oct 2011 17:38:37 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13126220" author="jiraposter@reviews.apache.org" created="Wed, 12 Oct 2011 22:49:12 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a whitelist configuration variable, whose value should be a comma separated list of hosts.  A set of strings is created based on this list and the host name in a location given to a create/alter table/partition command to the HiveMetastore is compared to the values in that set.  If the list is nonempty, the table being altered/created or containing the partition is not external/non-native, and the location has an explicit host, the command is failed if the host is not in that set, otherwise the command continues as normal.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; title=&quot;Add whitelist for hosts used in table/partition locations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2502&quot;&gt;HIVE-2502&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2502&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1182505 &lt;br/&gt;
  trunk/conf/hive-default.xml 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1182505 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2371/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I used Thrift calls to test the following for each of the 4 commands create/alter table/partition:&lt;/p&gt;

&lt;p&gt;Issuing the command with a location with a host that is not in the whitelist fails.&lt;br/&gt;
Issuing the command with a location with a host in the whitelist does not fail.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13127151" author="jiraposter@reviews.apache.org" created="Thu, 13 Oct 2011 23:42:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2371/#review2575&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/#review2575&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Looks good, but can we do host:port combinations instead of just the host?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Paul&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-12 22:48:52, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-12 22:48:52)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a whitelist configuration variable, whose value should be a comma separated list of hosts.  A set of strings is created based on this list and the host name in a location given to a create/alter table/partition command to the HiveMetastore is compared to the values in that set.  If the list is nonempty, the table being altered/created or containing the partition is not external/non-native, and the location has an explicit host, the command is failed if the host is not in that set, otherwise the command continues as normal.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; title=&quot;Add whitelist for hosts used in table/partition locations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2502&quot;&gt;HIVE-2502&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2502&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1182505 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1182505 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1182505 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1182505 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1182505 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2371/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I used Thrift calls to test the following for each of the 4 commands create/alter table/partition:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Issuing the command with a location with a host that is not in the whitelist fails.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Issuing the command with a location with a host in the whitelist does not fail.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13127213" author="jiraposter@reviews.apache.org" created="Fri, 14 Oct 2011 01:28:12 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-14 01:27:18.448099)&lt;/p&gt;


&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Thanks for the feedback Paul.  I changed it to use host:port pairs instead of just hosts.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a whitelist configuration variable, whose value should be a comma separated list of hosts.  A set of strings is created based on this list and the host name in a location given to a create/alter table/partition command to the HiveMetastore is compared to the values in that set.  If the list is nonempty, the table being altered/created or containing the partition is not external/non-native, and the location has an explicit host, the command is failed if the host is not in that set, otherwise the command continues as normal.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; title=&quot;Add whitelist for hosts used in table/partition locations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2502&quot;&gt;HIVE-2502&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2502&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1182505 &lt;br/&gt;
  trunk/conf/hive-default.xml 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1182505 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2371/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I used Thrift calls to test the following for each of the 4 commands create/alter table/partition:&lt;/p&gt;

&lt;p&gt;Issuing the command with a location with a host that is not in the whitelist fails.&lt;br/&gt;
Issuing the command with a location with a host in the whitelist does not fail.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13127695" author="jiraposter@reviews.apache.org" created="Fri, 14 Oct 2011 16:56:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-14 16:56:01.946053)&lt;/p&gt;


&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;All lines are within the 100 char limit.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a whitelist configuration variable, whose value should be a comma separated list of hosts.  A set of strings is created based on this list and the host name in a location given to a create/alter table/partition command to the HiveMetastore is compared to the values in that set.  If the list is nonempty, the table being altered/created or containing the partition is not external/non-native, and the location has an explicit host, the command is failed if the host is not in that set, otherwise the command continues as normal.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; title=&quot;Add whitelist for hosts used in table/partition locations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2502&quot;&gt;HIVE-2502&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2502&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1182505 &lt;br/&gt;
  trunk/conf/hive-default.xml 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1182505 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1182505 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2371/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I used Thrift calls to test the following for each of the 4 commands create/alter table/partition:&lt;/p&gt;

&lt;p&gt;Issuing the command with a location with a host that is not in the whitelist fails.&lt;br/&gt;
Issuing the command with a location with a host in the whitelist does not fail.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13127844" author="pauly" created="Fri, 14 Oct 2011 20:39:46 +0000"  >&lt;p&gt;+1 Will test and commit.&lt;/p&gt;</comment>
                            <comment id="13132180" author="pauly" created="Thu, 20 Oct 2011 23:09:23 +0000"  >&lt;p&gt;Got failures in a few tests:&lt;/p&gt;

&lt;p&gt;alter_view_rename.q&lt;br/&gt;
create_or_replace_view.q&lt;br/&gt;
create_view.q&lt;br/&gt;
recursive_view.q&lt;/p&gt;

&lt;p&gt;Seems like the views case isn&apos;t properly handled.&lt;/p&gt;</comment>
                            <comment id="13137318" author="jiraposter@reviews.apache.org" created="Thu, 27 Oct 2011 17:38:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-27 17:38:58.120670)&lt;/p&gt;


&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I fixed an issue that was causing altering views to fail.&lt;/p&gt;

&lt;p&gt;I ran all the test queries and they succeeded.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a whitelist configuration variable, whose value should be a comma separated list of hosts.  A set of strings is created based on this list and the host name in a location given to a create/alter table/partition command to the HiveMetastore is compared to the values in that set.  If the list is nonempty, the table being altered/created or containing the partition is not external/non-native, and the location has an explicit host, the command is failed if the host is not in that set, otherwise the command continues as normal.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; title=&quot;Add whitelist for hosts used in table/partition locations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2502&quot;&gt;HIVE-2502&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2502&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1189406 &lt;br/&gt;
  trunk/conf/hive-default.xml 1189406 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1189406 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1189406 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1189406 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2371/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I used Thrift calls to test the following for each of the 4 commands create/alter table/partition:&lt;/p&gt;

&lt;p&gt;Issuing the command with a location with a host that is not in the whitelist fails.&lt;br/&gt;
Issuing the command with a location with a host in the whitelist does not fail.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13137319" author="jiraposter@reviews.apache.org" created="Thu, 27 Oct 2011 17:38:33 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2371/#review2881&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/#review2881&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2371/#comment6452&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/#comment6452&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is the only change I made in r4, it now only checks the location if the table is not a view.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Kevin&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-27 17:38:58, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-27 17:38:58)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a whitelist configuration variable, whose value should be a comma separated list of hosts.  A set of strings is created based on this list and the host name in a location given to a create/alter table/partition command to the HiveMetastore is compared to the values in that set.  If the list is nonempty, the table being altered/created or containing the partition is not external/non-native, and the location has an explicit host, the command is failed if the host is not in that set, otherwise the command continues as normal.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; title=&quot;Add whitelist for hosts used in table/partition locations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2502&quot;&gt;HIVE-2502&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2502&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2502&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1189406 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1189406 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1189406 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1189406 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1189406 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2371/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2371/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I used Thrift calls to test the following for each of the 4 commands create/alter table/partition:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Issuing the command with a location with a host that is not in the whitelist fails.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Issuing the command with a location with a host in the whitelist does not fail.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498836" name="HIVE-2502.1.patch.txt" size="10711" author="kevinwilfong" created="Wed, 12 Oct 2011 22:49:00 +0000"/>
                            <attachment id="12498968" name="HIVE-2502.2.patch.txt" size="10988" author="kevinwilfong" created="Fri, 14 Oct 2011 01:27:48 +0000"/>
                            <attachment id="12499064" name="HIVE-2502.3.patch.txt" size="11079" author="kevinwilfong" created="Fri, 14 Oct 2011 16:56:19 +0000"/>
                            <attachment id="12501126" name="HIVE-2502.4.patch.txt" size="11094" author="kevinwilfong" created="Thu, 27 Oct 2011 17:38:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Oct 2011 22:49:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84825</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2503] HiveServer should provide per session configuration</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2503</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently ThriftHiveProcessorFactory returns same HiveConf instance to HiveServerHandler, making impossible to use per sesssion configuration. Just wrapping &apos;conf&apos; -&amp;gt; &apos;new HiveConf(conf)&apos; seemed to solve this problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526959">HIVE-2503</key>
            <summary>HiveServer should provide per session configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2011 02:01:45 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:18 +0000</updated>
                            <resolved>Fri, 16 Mar 2012 14:58:39 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>CLI</component>
                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13127789" author="ashutoshc" created="Fri, 14 Oct 2011 19:07:31 +0000"  >&lt;p&gt;@Navis,&lt;br/&gt;
Can you elaborate bit more about the problem, which session you are referring to here?&lt;/p&gt;</comment>
                            <comment id="13128078" author="navis" created="Sat, 15 Oct 2011 05:26:31 +0000"  >&lt;p&gt;I&apos;m using multiple ThriftHive.Client to single HiveServer. &lt;/p&gt;

&lt;p&gt;For example :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;client1 = factory.getCilent(~~~);
client2 = factory.getCilent(~~~);

client1.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;set hiveconf:&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=value1&quot;&lt;/span&gt;);
client2.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;set hiveconf:&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=value2&quot;&lt;/span&gt;);

client1.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;set hiveconf:&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;&quot;&lt;/span&gt;); --&amp;gt; returns value2 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13149493" author="navis" created="Mon, 14 Nov 2011 08:34:33 +0000"  >&lt;p&gt;Removed diff-prefix and renamed patch file as supposed to be.&lt;/p&gt;</comment>
                            <comment id="13149504" author="jiraposter@reviews.apache.org" created="Mon, 14 Nov 2011 08:54:51 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2820/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;We uses multiple HiveClient connected to single HiveServer. After configuring connections, we&apos;ve found the environment variables are different from expected. &lt;br/&gt;
Current hive server uses single instance of HiveConf and this seemed to make the problem.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2503&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  service/src/java/org/apache/hadoop/hive/service/HiveServer.java a2d599f &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2820/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13170424" author="jiraposter@reviews.apache.org" created="Thu, 15 Dec 2011 19:14:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2820/#review3926&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/#review3926&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;We should include a test case for regression purposes. You can achieve this by playing with test.service.standalone.server. If that doesn&apos;t work out, then you can always extend TestHiveServer and setup the test the way you want.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ashutosh&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-11-14 08:54:00, Navis Ryu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2820/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-11-14 08:54:00)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;We uses multiple HiveClient connected to single HiveServer. After configuring connections, we&apos;ve found the environment variables are different from expected. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Current hive server uses single instance of HiveConf and this seemed to make the problem.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2503&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java a2d599f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2820/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Navis&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13170793" author="jiraposter@reviews.apache.org" created="Fri, 16 Dec 2011 05:45:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2820/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-16 05:44:15.242903)&lt;/p&gt;


&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I know the test code is very awkward, but that was what I&apos;ve expected from HiveServer.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;We uses multiple HiveClient connected to single HiveServer. After configuring connections, we&apos;ve found the environment variables are different from expected. &lt;br/&gt;
Current hive server uses single instance of HiveConf and this seemed to make the problem.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2503&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  service/src/java/org/apache/hadoop/hive/service/HiveServer.java 854cc99 &lt;br/&gt;
  service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2820/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13172692" author="jiraposter@reviews.apache.org" created="Mon, 19 Dec 2011 22:37:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2820/#review3986&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/#review3986&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you supply a version of this test so I can take a look. I&apos;m curious to know why it doesn&apos;t work. Thanks.&lt;/p&gt;


&lt;p&gt;service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2820/#comment9025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/#comment9025&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing ASF header.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-12-16 05:44:15, Navis Ryu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2820/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-16 05:44:15)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;We uses multiple HiveClient connected to single HiveServer. After configuring connections, we&apos;ve found the environment variables are different from expected. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Current hive server uses single instance of HiveConf and this seemed to make the problem.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2503&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java 854cc99 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2820/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Navis&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13172838" author="jiraposter@reviews.apache.org" created="Tue, 20 Dec 2011 01:53:30 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-12-19 22:35:46, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;gt; If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Can you supply a version of this test so I can take a look. I&apos;m curious to know why it doesn&apos;t work. Thanks.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think it cannot be tested by making two instance of client, cause &quot;SessionState&quot; is a ThreadLocal thing.. Is it right?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Navis&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2820/#review3986&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/#review3986&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-12-16 05:44:15, Navis Ryu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2820/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-16 05:44:15)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;We uses multiple HiveClient connected to single HiveServer. After configuring connections, we&apos;ve found the environment variables are different from expected. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Current hive server uses single instance of HiveConf and this seemed to make the problem.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2503&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java 854cc99 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2820/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Navis&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13172852" author="jiraposter@reviews.apache.org" created="Tue, 20 Dec 2011 02:09:30 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-12-19 22:35:46, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;gt; If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Can you supply a version of this test so I can take a look. I&apos;m curious to know why it doesn&apos;t work. Thanks.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Navis Ryu wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I think it cannot be tested by making two instance of client, cause &quot;SessionState&quot; is a ThreadLocal thing.. Is it right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yup, that makes sense.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2820/#review3986&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/#review3986&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-12-16 05:44:15, Navis Ryu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2820/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-16 05:44:15)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;We uses multiple HiveClient connected to single HiveServer. After configuring connections, we&apos;ve found the environment variables are different from expected. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Current hive server uses single instance of HiveConf and this seemed to make the problem.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2503&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java 854cc99 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2820/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Navis&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13179213" author="cwsteinbach" created="Wed, 4 Jan 2012 01:40:46 +0000"  >&lt;p&gt;@Navis: Is this ticket ready for a final review?&lt;/p&gt;</comment>
                            <comment id="13179275" author="jiraposter@reviews.apache.org" created="Wed, 4 Jan 2012 05:08:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2820/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-01-04 05:08:24.994913)&lt;/p&gt;


&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added missing ASF header.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;We uses multiple HiveClient connected to single HiveServer. After configuring connections, we&apos;ve found the environment variables are different from expected. &lt;br/&gt;
Current hive server uses single instance of HiveConf and this seemed to make the problem.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2503&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  service/src/java/org/apache/hadoop/hive/service/HiveServer.java 854cc99 &lt;br/&gt;
  service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2820/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2820/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If we use &apos;standAloneServer&apos; in TestHiveServer.class, it is very simple to make the test case. But it seemed to be &apos;false&apos; which makes it more complex.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13179279" author="navis" created="Wed, 4 Jan 2012 05:21:26 +0000"  >&lt;p&gt;@Carl: Yes, ready.&lt;/p&gt;</comment>
                            <comment id="13230949" author="ashutoshc" created="Fri, 16 Mar 2012 07:46:08 +0000"  >&lt;p&gt;+1 Will commit if tests pass. Navis, can you also post the patch on jira granting license.&lt;/p&gt;</comment>
                            <comment id="13231268" author="ashutoshc" created="Fri, 16 Mar 2012 14:58:39 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13231560" author="hudson" created="Fri, 16 Mar 2012 19:54:14 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1315 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1315/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1315/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;: HiveServer should provide per session configuration (navis via hashutosh) (Revision 1301568)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301568&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301568&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265333" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:44 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548077" author="hudson" created="Wed, 9 Jan 2013 10:24:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2503&quot; title=&quot;HiveServer should provide per session configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2503&quot;&gt;&lt;del&gt;HIVE-2503&lt;/del&gt;&lt;/a&gt;: HiveServer should provide per session configuration (navis via hashutosh) (Revision 1301568)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301568&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301568&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServerSessions.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12531100">HIVE-2573</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12503577" name="HIVE-2503.1.patch.txt" size="698" author="navis" created="Mon, 14 Nov 2011 08:34:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Oct 2011 19:07:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85205</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123937</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2504] Warehouse table subdirectories should inherit the group permissions of the warehouse parent directory</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2504</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When the Hive Metastore creates a subdirectory in the Hive warehouse for&lt;br/&gt;
a new table it does so with the default HDFS permissions. Since the default&lt;br/&gt;
dfs.umask value is 022, this means that the new subdirectory will not inherit the&lt;br/&gt;
group write permissions of the hive warehouse directory.&lt;/p&gt;

&lt;p&gt;We should make the umask used by Warehouse.mkdirs() configurable, and set&lt;br/&gt;
it to use a default value of 002.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527138">HIVE-2504</key>
            <summary>Warehouse table subdirectories should inherit the group permissions of the warehouse parent directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chinnalalam">Chinna Rao Lalam</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Oct 2011 01:58:13 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:18 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 19:14:22 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13127905" author="ashutoshc" created="Fri, 14 Oct 2011 22:01:05 +0000"  >&lt;p&gt;Can&apos;t you achieve this already by setting dfs.umask to 002 in hdfs-site.xml&lt;/p&gt;</comment>
                            <comment id="13127992" author="cwsteinbach" created="Fri, 14 Oct 2011 23:46:37 +0000"  >&lt;p&gt;@Ashutosh: Yes, but that then shifts the configuration burden to the administrator.&lt;br/&gt;
The point of this ticket is to reduce the configuration burden on admins/users by &lt;br/&gt;
providing a sensible set of default configuration parameters. I&apos;m also selfishly interested&lt;br/&gt;
in heading-off the inevitable stream of emails to hive-user from folks wondering&lt;br/&gt;
why Hive won&apos;t let them insert data into the table they just created.&lt;/p&gt;

&lt;p&gt;Do you disagree with this approach?&lt;/p&gt;</comment>
                            <comment id="13128019" author="ashutoshc" created="Sat, 15 Oct 2011 01:21:46 +0000"  >&lt;p&gt;No, I don&apos;t disagree with the approach. I was just interested to know whether its already possible to do so. &lt;/p&gt;</comment>
                            <comment id="13174833" author="chinnalalam" created="Thu, 22 Dec 2011 14:55:24 +0000"  >&lt;p&gt;for directory creation passed the umask value as 0002.&lt;/p&gt;</comment>
                            <comment id="13184550" author="namit" created="Wed, 11 Jan 2012 23:46:07 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13185220" author="namit" created="Thu, 12 Jan 2012 20:44:12 +0000"  >&lt;p&gt;Committed. Thanks Chinna Rao&lt;/p&gt;</comment>
                            <comment id="13185381" author="hudson" created="Fri, 13 Jan 2012 01:44:44 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1198 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1198/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1198/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2504&quot; title=&quot;Warehouse table subdirectories should inherit the group permissions of the warehouse parent directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2504&quot;&gt;&lt;del&gt;HIVE-2504&lt;/del&gt;&lt;/a&gt; Warehouse table subdirectories should inherit the group permissions of the warehouse&lt;br/&gt;
parent directory (Chinna Rao Lalam via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230774&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230774&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13186776" author="hudson" created="Mon, 16 Jan 2012 08:45:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21-dbg #3 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/3/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/3/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2504&quot; title=&quot;Warehouse table subdirectories should inherit the group permissions of the warehouse parent directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2504&quot;&gt;&lt;del&gt;HIVE-2504&lt;/del&gt;&lt;/a&gt; Warehouse table subdirectories should inherit the group permissions of the warehouse&lt;br/&gt;
parent directory (Chinna Rao Lalam via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230774&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230774&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13214331" author="sho.shimauchi" created="Thu, 23 Feb 2012 05:39:00 +0000"  >&lt;p&gt;I found a typo.&lt;/p&gt;

&lt;p&gt;hive.files.umask.vlaue&lt;/p&gt;

&lt;p&gt;should be:&lt;/p&gt;

&lt;p&gt;hive.files.umask.value&lt;/p&gt;</comment>
                            <comment id="13214376" author="cwsteinbach" created="Thu, 23 Feb 2012 06:35:31 +0000"  >&lt;p&gt;@Sho: Can you please file a JIRA for this? Thanks!&lt;/p&gt;</comment>
                            <comment id="13214629" author="sho.shimauchi" created="Thu, 23 Feb 2012 13:25:36 +0000"  >&lt;p&gt;sure, I&apos;ll file a JIRA and submit a patch.&lt;/p&gt;</comment>
                            <comment id="13237414" author="rohini" created="Sat, 24 Mar 2012 02:45:28 +0000"  >&lt;p&gt;     This fix makes the table directory always have permission of 775 and does not actually inherit the group permissions of the parent directory. In most of our cases, the owner produces the data while the group permissions are meant for users reading the data. Now hive.files.umask.value always need to be set to ensure the users belonging to the group cannot write or modify the table. Can&apos;t we change the fix to set the same permissions as the parent directory and get rid of this configuration? &lt;br/&gt;
       Also it is always prudent to do fs.mkdirs() and then fs.setPermission() as setting the umask in configuration is not guaranteed to work. The DistributedFileSystem is cached and it refers to the Configuration that it was first initialized with. &lt;/p&gt;</comment>
                            <comment id="13242783" author="thw" created="Fri, 30 Mar 2012 21:40:31 +0000"  >&lt;p&gt;Reopening per Rohini&apos;s request.&lt;/p&gt;</comment>
                            <comment id="13242787" author="rohini" created="Fri, 30 Mar 2012 21:45:39 +0000"  >&lt;p&gt;Had Thomas reopen the issue as I could not. &lt;/p&gt;

&lt;p&gt;Couple of issues with the fix:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The config that is actually being looked for is HIVE_FILES_UMASK_VALUE instead of hive.files.umask.value as the Enum name() function is used and not varname.&lt;br/&gt;
short umaskVal = (short) conf.getInt(HiveConf.ConfVars.HIVE_FILES_UMASK_VALUE.name(), 0002);&lt;/li&gt;
	&lt;li&gt;Because of the new FsPermission(short mode) the value for the configuration has to be specified in decimal instead of a octal umask.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  Would be more happy if the fix did not resort to using this setting at all and instead applied the permissions of the parent directory.&lt;/p&gt;</comment>
                            <comment id="13244756" author="rohini" created="Mon, 2 Apr 2012 22:25:28 +0000"  >&lt;p&gt;Haven&apos;t gotten any response on this for more than a week. So I am assuming no one is looking at it.&lt;/p&gt;

&lt;p&gt;Chinna,&lt;br/&gt;
   If you are not working on this, I can pick this one up. &lt;/p&gt;</comment>
                            <comment id="13247332" author="rohini" created="Thu, 5 Apr 2012 16:20:04 +0000"  >&lt;p&gt;Made the newly created subdirectories get the same permissions as the parent by setting it explicitly on them. The table directories will get the permissions of the database directory and the partition directories will get the permissions of the table directory.&lt;/p&gt;

&lt;p&gt;Removed the hive.files.umask.value configuration parameter. &lt;/p&gt;</comment>
                            <comment id="13247335" author="rohini" created="Thu, 5 Apr 2012 16:24:10 +0000"  >&lt;p&gt;Unit tests pass with ant clean package test&lt;/p&gt;</comment>
                            <comment id="13249581" author="ashutoshc" created="Sun, 8 Apr 2012 17:25:35 +0000"  >&lt;p&gt;I agree that fiddling with umask is not the cleanest approach here. But, I am not sure about &lt;b&gt;always&lt;/b&gt; inheriting permissions either, since this effectively implies the whole sub-tree of warehouse dir will have same permissions as warehouse dir itself. Concretely, lets consider following example. Lets say, wh dir has 700 perms. Then, if I create table (which only owner of wh can do) I will end up with either 775 or 755 (depending on whether it was before or after the earlier patch of jira). However, with your patch, table dir will end up with 700. In the earlier case, anyone could have read the tables, but now with your approach only owner can read. Now, which of this is correct behavior is open for debate and depends on which security model you have as your premise. Additionally, this will be change of behavior then the current behavior. So, I suggest you define a new config variable like &lt;tt&gt;hive.warehouse.inherit.perms&lt;/tt&gt; or something similar and set it to false by default. And then take your code path of inheriting parent perms in case it is set to true. Thoughts? &lt;/p&gt;</comment>
                            <comment id="13249690" author="rohini" created="Mon, 9 Apr 2012 05:54:10 +0000"  >&lt;p&gt;Agree with you on not breaking backward compatibility. Will post a new patch with the config.&lt;/p&gt;</comment>
                            <comment id="13250047" author="rohini" created="Mon, 9 Apr 2012 18:40:42 +0000"  >&lt;p&gt;Added hive.warehouse.subdir.inherit.perms which is false by default. The default behaviour of hive-0.8 stays. i.e directories will be created with the permissions of dfs.umask or dfs.umaskmode. If hive.warehouse.subdir.inherit.perms is set to true, then table directories will inherit the permission of the default warehouse or the custom database location. This comes in handy when you have databases created with different permissions or if the warehouse directory has permissions like 775. &lt;/p&gt;

&lt;p&gt;Ashutosh,&lt;br/&gt;
   Your argument of warehouse having 700 permissions will not hold. If warehouse has 700 and even if the table directories have 755 or 775 they will not be accessible by any one other than the owner because if you don&apos;t have access to the parent directory you cannot access sub-directories in dfs (Same as Linux). So the warehouse has to be at least 755 or 750 to start with. So with the initial patch, the sub-directories would have been created with 775. But with my patch, they would have been created the same as warehouse directory(755 or 750) which would still allow read access to group. But anyways to avoid any confusion and provide backward compatibility added the new config.&lt;/p&gt;</comment>
                            <comment id="13250080" author="cwsteinbach" created="Mon, 9 Apr 2012 19:14:22 +0000"  >&lt;p&gt;Closing this ticket again since Chinna&apos;s patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2504&quot; title=&quot;Warehouse table subdirectories should inherit the group permissions of the warehouse parent directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2504&quot;&gt;&lt;del&gt;HIVE-2504&lt;/del&gt;&lt;/a&gt; was committed back in January.&lt;/p&gt;

&lt;p&gt;Please do not reopen tickets that have been marked fixed/resolved (i.e. tickets for which a patch has already been committed). Open a new ticket if you think there&apos;s a problem with the original patch. Thanks.&lt;/p&gt;</comment>
                            <comment id="13250116" author="rohini" created="Mon, 9 Apr 2012 20:01:37 +0000"  >&lt;p&gt;Sorry. I am new to the hive community and was not aware of the process and did not see it in HowToContribute page also. Went with the general practice of reopening bugs if there was an issue. Also this patch was still in trunk and not part of any release. Thanks for pointing out the process. Have created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2936&quot; title=&quot;Warehouse table subdirectories should inherit the group permissions of the warehouse parent directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2936&quot;&gt;&lt;del&gt;HIVE-2936&lt;/del&gt;&lt;/a&gt; to track the new patch.&lt;/p&gt;</comment>
                            <comment id="13265272" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:25 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13397153" author="haathi" created="Tue, 19 Jun 2012 23:22:13 +0000"  >&lt;p&gt;Hi,I am new to Hadoop, Hive, and Linux. and i need some help. I am recieving an error in Hive which I think is permission related and I think this patch may help. But I dont know how to install this patch. Can someone help me with step by step directions on how to install this patch? The error message I get when I run the Hive test is:&lt;br/&gt;
CREATE TABLE invites (foo INT, bar STRING) PARTITIONED BY (ds STRING);&lt;br/&gt;
FAILED: Error in metadata: MetaException(message:Got exception: org.apache.hadoop.security.AccessControlException org.apache.hadoop.security.AccessControlException: Permission denied: user=myID, access=WRITE, inode=&quot;/user/hive/warehouse&quot;:hdfs:hadoop:drwxr-xr-x)&lt;br/&gt;
Reading up on this patch seems like this may be the fix. If not then any assistance will be greatly appreciated.&lt;/p&gt;</comment>
                            <comment id="13397658" author="rohini" created="Wed, 20 Jun 2012 17:31:32 +0000"  >&lt;p&gt;Please send questions to the user mailing list. You cannot create the table because your warehouse directory is writable only by hdfs user. You can use LOCATION clause in create table statement and create the table in a directory where you have access. &lt;/p&gt;</comment>
                            <comment id="13548078" author="hudson" created="Wed, 9 Jan 2013 10:24:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2504&quot; title=&quot;Warehouse table subdirectories should inherit the group permissions of the warehouse parent directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2504&quot;&gt;&lt;del&gt;HIVE-2504&lt;/del&gt;&lt;/a&gt; Warehouse table subdirectories should inherit the group permissions of the warehouse&lt;br/&gt;
parent directory (Chinna Rao Lalam via namit) (Revision 1230774)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230774&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230774&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12550263">HIVE-2936</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12544093">HIVE-2824</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12521986" name="HIVE-2504-1.patch" size="8434" author="rohini" created="Mon, 9 Apr 2012 18:40:42 +0000"/>
                            <attachment id="12521527" name="HIVE-2504.patch" size="6672" author="rohini" created="Thu, 5 Apr 2012 16:20:04 +0000"/>
                            <attachment id="12508391" name="HIVE-2504.patch" size="2252" author="chinnalalam" created="Thu, 22 Dec 2011 14:14:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Oct 2011 22:01:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85512</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2505] Update junit jar in testlibs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2505</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12527274">HIVE-2505</key>
            <summary>Update junit jar in testlibs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Oct 2011 00:03:16 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:53 +0000</updated>
                            <resolved>Thu, 20 Oct 2011 17:31:00 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13127999" author="jiraposter@reviews.apache.org" created="Sat, 15 Oct 2011 00:06:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2391/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2391/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Yongqiang He.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I updated the junit jar to the latest available in the maven repository.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2505&quot; title=&quot;Update junit jar in testlibs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2505&quot;&gt;&lt;del&gt;HIVE-2505&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2505&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2505&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ivy/libraries.properties 1183425 &lt;br/&gt;
  trunk/testlibs/junit-3.8.1.LICENSE.txt 1183425 &lt;br/&gt;
  trunk/testlibs/junit-3.8.1.jar UNKNOWN &lt;br/&gt;
  trunk/testlibs/junit-4.10.LICENSE.txt PRE-CREATION &lt;br/&gt;
  trunk/testlibs/junit-4.10.jar UNKNOWN &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2391/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2391/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I ran ant test and the tests continued to pass.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13128004" author="jiraposter@reviews.apache.org" created="Sat, 15 Oct 2011 00:22:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2391/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2391/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-15 00:20:46.329179)&lt;/p&gt;


&lt;p&gt;Review request for hive and Yongqiang He.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I updated the junit jar to the latest available in the maven repository.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2505&quot; title=&quot;Update junit jar in testlibs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2505&quot;&gt;&lt;del&gt;HIVE-2505&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2505&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2505&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ivy/libraries.properties 1183425 &lt;br/&gt;
  trunk/pdk/build.xml 1183425 &lt;br/&gt;
  trunk/testlibs/junit-3.8.1.LICENSE.txt 1183425 &lt;br/&gt;
  trunk/testlibs/junit-3.8.1.jar UNKNOWN &lt;br/&gt;
  trunk/testlibs/junit-4.10.LICENSE.txt PRE-CREATION &lt;br/&gt;
  trunk/testlibs/junit-4.10.jar UNKNOWN &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2391/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2391/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I ran ant test and the tests continued to pass.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13130792" author="he yongqiang" created="Wed, 19 Oct 2011 17:22:59 +0000"  >&lt;p&gt;looks good. running tests&lt;/p&gt;</comment>
                            <comment id="13130862" author="kevinwilfong" created="Wed, 19 Oct 2011 18:40:19 +0000"  >&lt;p&gt;After applying the patch junit-4.10.jar needs to be added to the directory trunk/testlibs/  The jar junit-3.8.1.jar needs to be removed from that same directory as well.&lt;/p&gt;</comment>
                            <comment id="13130869" author="ashutoshc" created="Wed, 19 Oct 2011 18:51:28 +0000"  >&lt;p&gt;Instead of checking in the jar we should pull it from maven repos via ivy. Its available on &lt;a href=&quot;http://repo1.maven.org/maven/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo1.maven.org/maven/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13131140" author="jvs" created="Wed, 19 Oct 2011 23:15:34 +0000"  >&lt;p&gt;+1 on what Ashutosh said; when upgrading something which is currently checked into lib but available in a maven repo, we should svn rm the old jar and add an ivy download to the build.&lt;/p&gt;</comment>
                            <comment id="13131808" author="he yongqiang" created="Thu, 20 Oct 2011 17:31:57 +0000"  >&lt;p&gt;committed, thanks Kevin! &lt;br/&gt;
Will open a jira to fix the comments for John and Ashutosh&apos;s comments.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499115" name="HIVE-2505.1.patch.txt" size="18449" author="kevinwilfong" created="Sat, 15 Oct 2011 00:21:14 +0000"/>
                            <attachment id="12499730" name="junit-4.10.jar" size="253160" author="kevinwilfong" created="Wed, 19 Oct 2011 18:39:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 15 Oct 2011 00:06:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123939</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2506] Get ConstantObjectInspectors working in UDAFs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2506</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ConstantObjectInspectors seem to do the right thing for UDFs, but don&apos;t work yet for UDAFs, in part of the complex getEvaluator path which converts back and forth between TypeInfo and ObjectInspectors.  We should add an interface so that UDAFs can operate entirely on ObjectInspectors and expose constantness to these UDAFs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527364">HIVE-2506</key>
            <summary>Get ConstantObjectInspectors working in UDAFs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Oct 2011 17:23:26 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:22 +0000</updated>
                            <resolved>Tue, 18 Oct 2011 07:23:28 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13128582" author="jiraposter@reviews.apache.org" created="Mon, 17 Oct 2011 02:20:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2400/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2400/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Carl Steinbach, John Sichi and Igor Kabiljo.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;ConstantOIs are awesome in UDFs, let&apos;s also support them in UDAFs.  Some side things that needed to happen to make this a reality:&lt;/p&gt;

&lt;p&gt;1.) The GenericUDAFParameterInfo was changed to also support ObjectInspectors (and store things in OI rather than TypeInfo format).  This ensures that info is most flexibly available to the UDAF, and UDAFs no longer need to understand how to manipulate both TI and OI. &lt;br/&gt;
2.) SemanticAnalyzer and FunctionRegistry was changed to use OIs in the node creation process rather than converting back and forth between TI and OI.&lt;br/&gt;
3.) AbstractGenericUDAFResolver now overrides the TI method so that subclasses of this don&apos;t have to implement both methods.&lt;br/&gt;
4.) Changed PercentileApprox as an example of what can be done with the new interface.  Things are simplified since the number of buckets and quantiles are known in advance.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2506&quot; title=&quot;Get ConstantObjectInspectors working in UDAFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2506&quot;&gt;&lt;del&gt;HIVE-2506&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2506&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2506&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java cbbfffb &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1110cfa &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/AbstractGenericUDAFResolver.java 766e473 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFParameterInfo.java 04cfc28 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFPercentileApprox.java 678607b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/SimpleGenericUDAFParameterInfo.java 3277b98 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2400/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2400/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;udaf_percentile_approx.q&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jonathan&lt;/p&gt;
</comment>
                            <comment id="13128613" author="jiraposter@reviews.apache.org" created="Mon, 17 Oct 2011 03:04:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2400/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2400/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-17 03:03:48.523189)&lt;/p&gt;


&lt;p&gt;Review request for Carl Steinbach, John Sichi and Igor Kabiljo.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fix an errant comment.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;ConstantOIs are awesome in UDFs, let&apos;s also support them in UDAFs.  Some side things that needed to happen to make this a reality:&lt;/p&gt;

&lt;p&gt;1.) The GenericUDAFParameterInfo was changed to also support ObjectInspectors (and store things in OI rather than TypeInfo format).  This ensures that info is most flexibly available to the UDAF, and UDAFs no longer need to understand how to manipulate both TI and OI. &lt;br/&gt;
2.) SemanticAnalyzer and FunctionRegistry was changed to use OIs in the node creation process rather than converting back and forth between TI and OI.&lt;br/&gt;
3.) AbstractGenericUDAFResolver now overrides the TI method so that subclasses of this don&apos;t have to implement both methods.&lt;br/&gt;
4.) Changed PercentileApprox as an example of what can be done with the new interface.  Things are simplified since the number of buckets and quantiles are known in advance.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2506&quot; title=&quot;Get ConstantObjectInspectors working in UDAFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2506&quot;&gt;&lt;del&gt;HIVE-2506&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2506&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2506&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java cbbfffb &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1110cfa &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/AbstractGenericUDAFResolver.java 766e473 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFParameterInfo.java 04cfc28 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFPercentileApprox.java 678607b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/SimpleGenericUDAFParameterInfo.java 3277b98 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2400/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2400/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;udaf_percentile_approx.q&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jonathan&lt;/p&gt;
</comment>
                            <comment id="13129092" author="jvs" created="Mon, 17 Oct 2011 19:07:06 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13129201" author="jvs" created="Mon, 17 Oct 2011 21:08:27 +0000"  >&lt;p&gt;I got a compilation error, so you probably haven&apos;t rebased recently:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [javac] /data/users/jsichi/open/test-trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteQueryUsingAggregateIndex.java:306: getGenericUDAFEvaluator(java.lang.String,java.util.List&amp;lt;org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector&amp;gt;,boolean,boolean) in org.apache.hadoop.hive.ql.exec.FunctionRegistry cannot be applied to (java.lang.String,java.util.List&amp;lt;org.apache.hadoop.hive.serde2.typeinfo.TypeInfo&amp;gt;,boolean,boolean)
    [javac]             GenericUDAFEvaluator evaluator = FunctionRegistry.getGenericUDAFEvaluator(
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13129213" author="jonchang" created="Mon, 17 Oct 2011 21:19:02 +0000"  >&lt;p&gt;Rebase trunk.&lt;/p&gt;</comment>
                            <comment id="13129217" author="jiraposter@reviews.apache.org" created="Mon, 17 Oct 2011 21:21:10 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2400/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2400/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-17 21:21:02.936333)&lt;/p&gt;


&lt;p&gt;Review request for Carl Steinbach, John Sichi and Igor Kabiljo.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Rebase!&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;ConstantOIs are awesome in UDFs, let&apos;s also support them in UDAFs.  Some side things that needed to happen to make this a reality:&lt;/p&gt;

&lt;p&gt;1.) The GenericUDAFParameterInfo was changed to also support ObjectInspectors (and store things in OI rather than TypeInfo format).  This ensures that info is most flexibly available to the UDAF, and UDAFs no longer need to understand how to manipulate both TI and OI. &lt;br/&gt;
2.) SemanticAnalyzer and FunctionRegistry was changed to use OIs in the node creation process rather than converting back and forth between TI and OI.&lt;br/&gt;
3.) AbstractGenericUDAFResolver now overrides the TI method so that subclasses of this don&apos;t have to implement both methods.&lt;br/&gt;
4.) Changed PercentileApprox as an example of what can be done with the new interface.  Things are simplified since the number of buckets and quantiles are known in advance.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2506&quot; title=&quot;Get ConstantObjectInspectors working in UDAFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2506&quot;&gt;&lt;del&gt;HIVE-2506&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2506&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2506&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/SimpleGenericUDAFParameterInfo.java 3277b98 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/AbstractGenericUDAFResolver.java 766e473 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFParameterInfo.java 04cfc28 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFPercentileApprox.java 678607b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java cbbfffb &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteQueryUsingAggregateIndex.java c179d44 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1110cfa &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2400/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2400/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;udaf_percentile_approx.q&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jonathan&lt;/p&gt;
</comment>
                            <comment id="13129236" author="jvs" created="Mon, 17 Oct 2011 21:45:00 +0000"  >&lt;p&gt;OK trying again with latest.&lt;/p&gt;</comment>
                            <comment id="13129562" author="jvs" created="Tue, 18 Oct 2011 07:23:28 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Jonathan!&lt;/p&gt;</comment>
                            <comment id="13129681" author="hudson" created="Tue, 18 Oct 2011 11:56:57 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1017 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1017/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1017/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2506&quot; title=&quot;Get ConstantObjectInspectors working in UDAFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2506&quot;&gt;&lt;del&gt;HIVE-2506&lt;/del&gt;&lt;/a&gt;. Get ConstantObjectInspectors working in UDAFs&lt;br/&gt;
(Jonathan Chang via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1185511&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1185511&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteQueryUsingAggregateIndex.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/AbstractGenericUDAFResolver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFParameterInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFPercentileApprox.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/SimpleGenericUDAFParameterInfo.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499239" name="HIVE-2506.patch" size="21540" author="jonchang" created="Mon, 17 Oct 2011 02:18:36 +0000"/>
                            <attachment id="12499242" name="HIVE-2506.patch.2" size="21581" author="jonchang" created="Mon, 17 Oct 2011 03:04:18 +0000"/>
                            <attachment id="12499443" name="HIVE-2506.patch.3" size="23512" author="jonchang" created="Mon, 17 Oct 2011 21:19:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Oct 2011 02:20:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>87512</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2507] Self join fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2507</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; create table src (key string, value string);           
OK
Time taken: 0.096 seconds
hive&amp;gt; select * from src join src on (src.key == src.key);    
FAILED: Error in semantic analysis: Line 1:23 Ambiguous table alias &lt;span class=&quot;code-quote&quot;&gt;&apos;src&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12527560">HIVE-2507</key>
            <summary>Self join fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2011 09:49:15 +0000</created>
                <updated>Tue, 18 Oct 2011 14:17:05 +0000</updated>
                            <resolved>Tue, 18 Oct 2011 14:17:05 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13129707" author="saktikalyan" created="Tue, 18 Oct 2011 13:08:04 +0000"  >&lt;p&gt;Isn&apos;t it an alias issue ? The src.key can&apos;t be resolved.  The below one works.&lt;/p&gt;

&lt;p&gt;select * from src s1 join src s2 on (s1.key == s2.key);&lt;/p&gt;</comment>
                            <comment id="13129753" author="jvs" created="Tue, 18 Oct 2011 14:17:05 +0000"  >&lt;p&gt;What kalyan said.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Oct 2011 13:08:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88778</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2508] Join on union type fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2508</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; CREATE TABLE DEST1(key UNIONTYPE&amp;lt;STRING, STRING&amp;gt;, value BIGINT) STORED AS TEXTFILE;
OK
Time taken: 0.076 seconds
hive&amp;gt; CREATE TABLE DEST2(key UNIONTYPE&amp;lt;STRING, STRING&amp;gt;, value BIGINT) STORED AS TEXTFILE;
OK
Time taken: 0.034 seconds
hive&amp;gt; SELECT * FROM DEST1 JOIN DEST2 on (DEST1.key = DEST2.key);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12527562">HIVE-2508</key>
            <summary>Join on union type fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                            <label>uniontype</label>
                    </labels>
                <created>Tue, 18 Oct 2011 10:08:24 +0000</created>
                <updated>Fri, 3 Nov 2017 18:46:44 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13129635" author="ashutoshc" created="Tue, 18 Oct 2011 10:10:05 +0000"  >&lt;p&gt;NPE is thrown in setup task of Reducer:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.RuntimeException: Error in configuring object
	at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
	at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
	at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:484)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:419)
	at org.apache.hadoop.mapred.Child$4.run(Child.java:259)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:396)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
	at org.apache.hadoop.mapred.Child.main(Child.java:253)
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
	... 9 more
Caused by: java.lang.RuntimeException: Reduce &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; initialization failed
	at org.apache.hadoop.hive.ql.exec.ExecReducer.configure(ExecReducer.java:157)
	... 14 more
Caused by: java.lang.NullPointerException
	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.getStandardObjectInspector(ObjectInspectorUtils.java:105)
	at org.apache.hadoop.hive.ql.exec.JoinUtil.getStandardObjectInspectors(JoinUtil.java:97)
	at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.initializeOp(CommonJoinOperator.java:255)
	at org.apache.hadoop.hive.ql.exec.JoinOperator.initializeOp(JoinOperator.java:59)
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:357)
	at org.apache.hadoop.hive.ql.exec.ExecReducer.configure(ExecReducer.java:150)
	... 14 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13132820" author="ashutoshc" created="Fri, 21 Oct 2011 16:50:18 +0000"  >&lt;p&gt;Thinking more about this. I dont think we want to support join on union type, since in general real data in a union could be of any type which makes it impossible to do comparison of union types correctly. It can be argued that in some special cases  that could be achieved via type widening, but I would argue selecting union type for storing such data which later need to be joined is a wrong choice. Thoughts?&lt;br/&gt;
If there is an agreement, I propose to disable this in semantic analysis phase itself instead of letting it fail at runtime later.&lt;/p&gt;</comment>
                            <comment id="13852944" author="ctang.ma" created="Thu, 19 Dec 2013 14:53:16 +0000"  >&lt;p&gt;I believe the observed error was due to the lack of union type support in LazyBinarySerDe which is used to deserialize the reduce values in Join, rather than the join on the key of union type. So any join query with select values having union type (e.g. SELECT * FROM DEST1 JOIN DEST2 on (DEST1.value = DEST2.value) should failed with same NPE.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12519221">HIVE-2390</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13028366">HIVE-15434</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Dec 2013 14:53:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123942</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2509] Literal bigint</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2509</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Typing bigints is a pain because you have to write CAST(0 AS BIGINT).  We should let people type 0L instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527608">HIVE-2509</key>
            <summary>Literal bigint</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2011 16:06:49 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:48 +0000</updated>
                            <resolved>Tue, 25 Oct 2011 19:09:07 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13129993" author="noreply@reviews.facebook.net" created="Tue, 18 Oct 2011 20:23:10 +0000"  >&lt;p&gt;jonchang requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  This diff adds support for literal bigints to Hive.&lt;/p&gt;

&lt;p&gt;  Typing bigints is a pain because you have to write CAST(0 AS BIGINT).  We should let people type 0L instead.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  ant test -Dtestcase=TestCliDriver -Doffline=true -Dqfile=bigint_literal.q -Dtest.silent=false&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/bigint_literal.q&lt;br/&gt;
  ql/src/test/results/clientpositive/bigint_literal.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/herald/transcript/45/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/herald/transcript/45/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13129996" author="noreply@reviews.facebook.net" created="Tue, 18 Oct 2011 20:27:10 +0000"  >&lt;p&gt;jonchang requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  This diff adds support for literal bigints to Hive.&lt;/p&gt;

&lt;p&gt;  Typing bigints is a pain because you have to write CAST(0 AS BIGINT).  We should let people type 0L instead.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  ant test -Dtestcase=TestCliDriver -Doffline=true -Dqfile=bigint_literal.q -Dtest.silent=false&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/bigint_literal.q&lt;br/&gt;
  ql/src/test/results/clientpositive/bigint_literal.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/herald/transcript/45/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/herald/transcript/45/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13131156" author="jvs" created="Wed, 19 Oct 2011 23:35:44 +0000"  >&lt;p&gt;Just checking...is there a case where the bigint type is actually important?  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-872&quot; title=&quot;Allow type widening on COALESCE/UNION ALL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-872&quot;&gt;&lt;del&gt;HIVE-872&lt;/del&gt;&lt;/a&gt; was supposed to address the implicit conversion cases.&lt;/p&gt;</comment>
                            <comment id="13131169" author="jonchang" created="Wed, 19 Oct 2011 23:48:28 +0000"  >&lt;p&gt;There are two issues:&lt;/p&gt;

&lt;p&gt;1.) There are actually lots of UDFs which are pretty sensitive to type.  In particular, widening will not handle cases where array&amp;lt;int&amp;gt; needs to be widened to array&amp;lt;bigint&amp;gt; (there&apos;s a reason this sort of thing isn&apos;t autocasted in C++, Java, etc.).&lt;br/&gt;
2.) I generally think widening is a bad idea because it makes people less careful with types.  For example, without looking, what will &lt;/p&gt;

&lt;p&gt;&amp;gt; explain select * from (select &apos;0&apos; from akramer_one_row union all select 12345678900 from akramer_one_row) a;&lt;/p&gt;

&lt;p&gt;return as the type of the outer query?  The answer is pretty terrible; if any other language did this to you you&apos;d be pretty furious.&lt;/p&gt;</comment>
                            <comment id="13131186" author="jvs" created="Thu, 20 Oct 2011 00:01:30 +0000"  >&lt;p&gt;1) So for the array case, you&apos;re going to stick an L on the end of every literal in the array?  An explicit CAST seems cleaner in that case (assuming it works).  What are some other cases?  I&apos;d like to understand them better before we add more Hive-specific syntax (I&apos;m not aware of any other SQL parsers that use the L suffix).&lt;/p&gt;

&lt;p&gt;2) In standard SQL, that would be an error since strings and numbers are not union-compatible.  Simple.  I wish Hive followed standard SQL in this and many other areas (such as comparison strictness).&lt;/p&gt;</comment>
                            <comment id="13131201" author="jonchang" created="Thu, 20 Oct 2011 00:15:04 +0000"  >&lt;p&gt;1.) You can&apos;t cast array&amp;lt;int&amp;gt; to array&amp;lt;bigint&amp;gt; in Hive which is why we had to write an FB UDF for this exact problem.  Right now you need to pass in an instance of the desired type which is annoying with BIGINTs.  This starts to become a deep rabbit hole.  For example, how do you tell if an array is equal to &lt;span class=&quot;error&quot;&gt;&amp;#91;0L&amp;#93;&lt;/span&gt;?  Turns out you can&apos;t compare arrays in Hive.  So we have a UDF, which chokes if you try to compare array&amp;lt;int&amp;gt; to array&amp;lt;bigint&amp;gt;, which is IMO reasonable behavior because the complexity/corner cases which we&apos;ve been talking about here (and on point #2) just gets moved into this UDF which is untenable for the large library of UDFs we have.  &lt;/p&gt;

&lt;p&gt;2.) Yes, I agree that an error would be good in those cases.  Can we make that happen? (Unrelated issue but type widening still fails with NULLs; in general I think type widening is uber complicated and prone to all sorts of issues we wouldn&apos;t have if we were more type safe throughout.)&lt;/p&gt;</comment>
                            <comment id="13131209" author="jonchang" created="Thu, 20 Oct 2011 00:21:12 +0000"  >&lt;p&gt;To put it another way, once you have complex types (arrays, maps, struct and the like) you either need strong typing (a la C++, Java, etc.) or full-on duck typing (a la Python).  I don&apos;t think any language has successfully maintained a middle ground (what Hive is trying to do right now). &lt;/p&gt;</comment>
                            <comment id="13131216" author="jonchang" created="Thu, 20 Oct 2011 00:24:36 +0000"  >&lt;p&gt;This also matters in a few other places like CTAS.&lt;/p&gt;

&lt;p&gt;In any case, this is a pretty low-risk change and not too onerous on the code base so I hope this gets in...&lt;/p&gt;</comment>
                            <comment id="13132099" author="jvs" created="Thu, 20 Oct 2011 22:06:08 +0000"  >&lt;p&gt;Based on what you&apos;re saying, it sounds like literal bigint is just a bandaid for the real issues with collection types and casting.  If you think the non-portability is worth it, let&apos;s commit it, but in that case, shouldn&apos;t syntactic shorthand be provided for the other integer types (TINYINT and SMALLINT) as well for comprehensiveness?&lt;/p&gt;

&lt;p&gt;Regarding proposed repairs to the type system, I&apos;m all in favor of strong typing combined with conservative comparison/widening/assignment rules plus robust explicit conversions.  However, getting from the existing liberal system to the promised land may be difficult due to breakage in legacy queries.&lt;/p&gt;</comment>
                            <comment id="13132123" author="jonchang" created="Thu, 20 Oct 2011 22:22:53 +0000"  >&lt;p&gt;0L just brings this up to parity with C but C doesn&apos;t have convenient shorthands for shorts/chars so I&apos;m open to suggestions on how to best represent these.&lt;/p&gt;</comment>
                            <comment id="13132181" author="jvs" created="Thu, 20 Oct 2011 23:10:47 +0000"  >&lt;p&gt;Lazyweb says:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000905.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000905.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13133218" author="phabricator@reviews.facebook.net" created="Sat, 22 Oct 2011 01:52:33 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  Add small int and tiny int.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_ints.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_ints.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantByteObjectInspector.java&lt;/p&gt;</comment>
                            <comment id="13133219" author="phabricator@reviews.facebook.net" created="Sat, 22 Oct 2011 01:52:34 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  Add small int and tiny int.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_ints.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_ints.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantByteObjectInspector.java&lt;/p&gt;</comment>
                            <comment id="13134435" author="jvs" created="Mon, 24 Oct 2011 20:10:13 +0000"  >&lt;p&gt;Patch is not applying cleanly on latest trunk...can you rebase?&lt;/p&gt;</comment>
                            <comment id="13134448" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 20:28:32 +0000"  >&lt;p&gt;jonchang has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;/p&gt;

&lt;p&gt;  Hm, it seemed to display fine in phabricator before the rebase.  I wonder how it would do that if the patch cannot be applied cleanly.  Maybe there&apos;s a bug somewhere?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13134450" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 20:28:33 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  Rebased.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_ints.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_ints.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantByteObjectInspector.java&lt;/p&gt;</comment>
                            <comment id="13134451" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 20:28:34 +0000"  >&lt;p&gt;jonchang has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;/p&gt;

&lt;p&gt;  Hm, it seemed to display fine in phabricator before the rebase.  I wonder how it would do that if the patch cannot be applied cleanly.  Maybe there&apos;s a bug somewhere?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13134470" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 20:48:32 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  Rebased.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_ints.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_ints.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantByteObjectInspector.java&lt;/p&gt;</comment>
                            <comment id="13134487" author="jvs" created="Mon, 24 Oct 2011 21:10:46 +0000"  >&lt;p&gt;It&apos;s still not applying.  The reason is that for PrimitiveObjectInspectorFactory.java, the latest svn already has&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;import org.apache.hadoop.hive.serde2.io.ByteWritable;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but your patches have&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-import org.apache.hadoop.io.ByteWritable;                                      
+import org.apache.hadoop.hive.serde2.io.ByteWritable;                          
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe your git tree is stale?&lt;/p&gt;

&lt;p&gt;Note that phabricator just works off of your diff (with a huge diff context flag setting); according to Marek, it&apos;s not currently doing anything with what&apos;s actually in the repo.&lt;/p&gt;</comment>
                            <comment id="13134512" author="jvs" created="Mon, 24 Oct 2011 21:28:34 +0000"  >&lt;p&gt;Note that the conflict came from your &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt; patch.&lt;/p&gt;</comment>
                            <comment id="13134537" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 21:48:32 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  Really rebase.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_ints.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_ints.q.out&lt;/p&gt;</comment>
                            <comment id="13134538" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 21:48:33 +0000"  >&lt;p&gt;jonchang updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;br/&gt;
Reviewers: jsichi&lt;/p&gt;

&lt;p&gt;  Really rebase.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/literal_ints.q&lt;br/&gt;
  ql/src/test/results/clientpositive/literal_ints.q.out&lt;/p&gt;</comment>
                            <comment id="13134554" author="jvs" created="Mon, 24 Oct 2011 22:03:11 +0000"  >&lt;p&gt;+1, will commit when tests pass.  A good followup would be negative tests for out of range constants.&lt;/p&gt;</comment>
                            <comment id="13134769" author="jvs" created="Tue, 25 Oct 2011 06:04:24 +0000"  >&lt;p&gt;Tests passed...could you grant ASF rights on the last patch?&lt;/p&gt;</comment>
                            <comment id="13135093" author="jonchang" created="Tue, 25 Oct 2011 14:33:28 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="13135336" author="jvs" created="Tue, 25 Oct 2011 19:09:07 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Jonathan!&lt;/p&gt;

&lt;p&gt;Can you update the wiki with the new syntax?&lt;/p&gt;</comment>
                            <comment id="13135338" author="phabricator@reviews.facebook.net" created="Tue, 25 Oct 2011 19:10:32 +0000"  >&lt;p&gt;jsichi has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13135339" author="phabricator@reviews.facebook.net" created="Tue, 25 Oct 2011 19:10:32 +0000"  >&lt;p&gt;jsichi has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13135382" author="phabricator@reviews.facebook.net" created="Tue, 25 Oct 2011 20:14:32 +0000"  >&lt;p&gt;jonchang has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13135385" author="phabricator@reviews.facebook.net" created="Tue, 25 Oct 2011 20:14:34 +0000"  >&lt;p&gt;jonchang has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt; Literal bigint&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D15&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13135398" author="jonchang" created="Tue, 25 Oct 2011 20:26:29 +0000"  >&lt;p&gt;How do I get edit rights to the wiki?&lt;/p&gt;</comment>
                            <comment id="13135411" author="jvs" created="Tue, 25 Oct 2011 20:43:58 +0000"  >&lt;p&gt;Try now...I just granted you write access.&lt;/p&gt;</comment>
                            <comment id="13135624" author="hudson" created="Wed, 26 Oct 2011 01:56:19 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1034 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1034/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1034/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt;. Literal bigint&lt;br/&gt;
(Jonathan Chang via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188858&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188858&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/literal_ints.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/literal_ints.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499591" name="ASF.LICENSE.NOT.GRANTED--D15.1.patch" size="4246" author="noreply@reviews.facebook.net" created="Tue, 18 Oct 2011 20:27:11 +0000"/>
                            <attachment id="12499590" name="ASF.LICENSE.NOT.GRANTED--D15.1.patch" size="4246" author="noreply@reviews.facebook.net" created="Tue, 18 Oct 2011 20:23:11 +0000"/>
                            <attachment id="12500275" name="ASF.LICENSE.NOT.GRANTED--D15.2.patch" size="6680" author="phabricator@reviews.facebook.net" created="Sat, 22 Oct 2011 01:52:35 +0000"/>
                            <attachment id="12500274" name="ASF.LICENSE.NOT.GRANTED--D15.2.patch" size="6680" author="phabricator@reviews.facebook.net" created="Sat, 22 Oct 2011 01:52:33 +0000"/>
                            <attachment id="12500537" name="ASF.LICENSE.NOT.GRANTED--D15.3.patch" size="6680" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 20:48:33 +0000"/>
                            <attachment id="12500530" name="ASF.LICENSE.NOT.GRANTED--D15.3.patch" size="6680" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 20:28:34 +0000"/>
                            <attachment id="12500551" name="ASF.LICENSE.NOT.GRANTED--D15.4.patch" size="5117" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 21:48:34 +0000"/>
                            <attachment id="12500550" name="ASF.LICENSE.NOT.GRANTED--D15.4.patch" size="5117" author="phabricator@reviews.facebook.net" created="Mon, 24 Oct 2011 21:48:32 +0000"/>
                            <attachment id="12500681" name="D15.4.patch" size="5117" author="jonchang" created="Tue, 25 Oct 2011 14:33:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Oct 2011 20:23:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This change adds parser support for typed integer literal variants (tinyint, smallint, and bigint).</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2510] Hive throws Null Pointer Exception upon CREATE TABLE &lt;db_name&gt;.&lt;table_name&gt; ....     if the given &lt;db_name&gt; doesn&apos;t exist</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2510</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12527638">HIVE-2510</key>
            <summary>Hive throws Null Pointer Exception upon CREATE TABLE &lt;db_name&gt;.&lt;table_name&gt; ....     if the given &lt;db_name&gt; doesn&apos;t exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsurowka">Robert Sur&#243;wka</assignee>
                                    <reporter username="rsurowka">Robert Sur&#243;wka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2011 18:46:45 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:55 +0000</updated>
                            <resolved>Tue, 1 Nov 2011 23:05:07 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13129944" author="rsurowka" created="Tue, 18 Oct 2011 18:57:59 +0000"  >&lt;p&gt;The diff request is at: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff/#index_header&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13129978" author="ashutoshc" created="Tue, 18 Oct 2011 19:47:02 +0000"  >&lt;p&gt;Robert,&lt;br/&gt;
Can you add a test case as well.&lt;/p&gt;</comment>
                            <comment id="13130151" author="rsurowka" created="Wed, 19 Oct 2011 00:01:23 +0000"  >&lt;p&gt;Yes, but where can I read how a new test case should be added? &lt;/p&gt;</comment>
                            <comment id="13130332" author="ashutoshc" created="Wed, 19 Oct 2011 03:26:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/Hive/howtocontribute.html#HowToContribute-AddaUnitTest&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/Hive/howtocontribute.html#HowToContribute-AddaUnitTest&lt;/a&gt;&lt;br/&gt;
Has relevant info&lt;/p&gt;</comment>
                            <comment id="13131236" author="rsurowka" created="Thu, 20 Oct 2011 00:51:02 +0000"  >&lt;p&gt;New diff request at &lt;a href=&quot;https://reviews.apache.org/r/2426/diff/2/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff/2/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Changed fix to be more general and added tests.&lt;/p&gt;

&lt;p&gt;There is still an issue that: &lt;/p&gt;

&lt;p&gt;create table &amp;lt;existing db&amp;gt;.&amp;lt;new table&amp;gt; (a string); &lt;/p&gt;

&lt;p&gt;doesn&apos;t work. But that&apos;s a topic for another Jira. &lt;/p&gt;
</comment>
                            <comment id="13131713" author="rsurowka" created="Thu, 20 Oct 2011 16:00:08 +0000"  >&lt;p&gt;Actually I was wrong, create table &amp;lt;existing db&amp;gt;.&amp;lt;new table&amp;gt; (a string); seems to work ok, must have done something wrong when checking it before.&lt;/p&gt;</comment>
                            <comment id="13131724" author="rsurowka" created="Thu, 20 Oct 2011 16:18:34 +0000"  >&lt;p&gt;current diff request at &lt;a href=&quot;https://reviews.apache.org/r/2426/diff/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff/#index_header&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13131784" author="ashutoshc" created="Thu, 20 Oct 2011 17:16:48 +0000"  >&lt;p&gt;Looks like RB is no longer posting back on jira. I had the comment there about error message.&lt;/p&gt;

&lt;p&gt;There are two concerns I have while doing such metastore related checks in SemanticAnalyzer. First it introduces TOCTTOU bug ( &lt;a href=&quot;http://en.wikipedia.org/wiki/Time-of-check-to-time-of-use&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Time-of-check-to-time-of-use&lt;/a&gt; ) since there is a small window when its possible that database get dropped after this call to metastore has completed but before actual table creation happens. Second concern which is a bigger concern is that it adds load on metastore server (if running as independent server) and on backend sql server to service these additional requests. Ideally, all such checks should be bundled together in a create table call to MetaStore (instead of few of them being done in SemanticAnalyzer) which then do all the checks and then take appropriate action. This will help for both concerns as first it will reduce extra calls and second if there is a need of multiple calls on mysql they can potentially be done in a scope of one transaction.  &lt;/p&gt;
</comment>
                            <comment id="13131905" author="rsurowka" created="Thu, 20 Oct 2011 18:56:56 +0000"  >&lt;p&gt;I see. Could you point me to where in code this &quot;create table call to MetaStore&quot; is done? &lt;/p&gt;

&lt;p&gt;If it is done at the moment of executing a task, I think it will be better to check for existence of the database 2 times - once at the moment of Semantic Analysis and once during the transaction. The reason is, if database doesn&apos;t exist from the beginning we can faster tell user about it and we use less resources (especially if table is created as select). Furthermore the null-pointer exception this Jira is about is thrown before the task starts execution, so if that check for database existence was only during the task execute, we would need to &quot;wrap&quot; that null pointer exception and &quot;carry it&quot; until that moment.   &lt;/p&gt;</comment>
                            <comment id="13132823" author="ashutoshc" created="Fri, 21 Oct 2011 16:59:31 +0000"  >&lt;p&gt;Sigh. I typed in my reply yesterday but lost it when jira went down : (&lt;/p&gt;

&lt;p&gt;Semantic Analyzer creates tasks which are then later executed in Driver::execute() In this case DDLTask gets created. Actual execution of this happens in HiveMetaStore::create_table_core()&lt;/p&gt;

&lt;p&gt;Apart from CTAS, it never make sense to do it twice, since metastore operation is the only thing happening in create table statement. For CTAS, it has already been special cased, where it make such a check in Semantic Analysis.&lt;/p&gt;

&lt;p&gt;NPE arises because Hive::getDatabases swallows NoSuchObjectException and instead returns null. We can either fix that so that it throws the exception or can check for null at the time of usage.&lt;/p&gt;</comment>
                            <comment id="13132826" author="namit" created="Fri, 21 Oct 2011 17:02:09 +0000"  >&lt;p&gt;Cancelling the patch.&lt;/p&gt;

&lt;p&gt;Robert, please address Ashutosh&apos;s comments &lt;/p&gt;</comment>
                            <comment id="13133244" author="rsurowka" created="Sat, 22 Oct 2011 04:48:09 +0000"  >&lt;p&gt;Done and done (hopefully).&lt;/p&gt;

&lt;p&gt;NoSuchObjectException can&apos;t be propagated further since that would require changes to ThriftHiveMetastore.&lt;/p&gt;</comment>
                            <comment id="13134609" author="ashutoshc" created="Mon, 24 Oct 2011 23:07:23 +0000"  >&lt;p&gt;This has started to look good. Robert, can you update the diff on RB. I have few minor comments.&lt;/p&gt;</comment>
                            <comment id="13134635" author="rsurowka" created="Mon, 24 Oct 2011 23:35:35 +0000"  >&lt;p&gt;Thank you. I always add the current diff to RB, so it&apos;s always at head: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff/#index_header&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13135251" author="ashutoshc" created="Tue, 25 Oct 2011 17:24:44 +0000"  >&lt;p&gt;Oh. Since RB is not posting back on jira (earlier it used to). I have left couple of comments on RB. &lt;/p&gt;</comment>
                            <comment id="13135311" author="jvs" created="Tue, 25 Oct 2011 18:27:28 +0000"  >&lt;p&gt;In order for RB to post back to JIRA, you have to set the Bugs field in the RB diff (e.g. to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt; in this case).&lt;/p&gt;</comment>
                            <comment id="13135347" author="rsurowka" created="Tue, 25 Oct 2011 19:22:20 +0000"  >&lt;p&gt;Ok, thank you for this advice, I will try to make sure to do that in the future. &lt;/p&gt;</comment>
                            <comment id="13135349" author="jiraposter@reviews.apache.org" created="Tue, 25 Oct 2011 19:24:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-25 19:25:02.433521)&lt;/p&gt;


&lt;p&gt;Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Now when creating table in specific database, if that database doesn&apos;t exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2510&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1187647 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1187647 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Run some sample queries and it seemed to work. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Robert&lt;/p&gt;
</comment>
                            <comment id="13135455" author="jiraposter@reviews.apache.org" created="Tue, 25 Oct 2011 21:48:32 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-10-25 17:24:41, Ashutosh Chauhan wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java, lines 6923-6926&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2426/diff/4/?file=52450#file52450line6923&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff/4/?file=52450#file52450line6923&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Not sure if we need this. Checking of existing table already happens in analyzeCreateTable() around line 7847. So, this check at this point is redundant.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Robert Sur&#243;wka wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Without this check a null pointer exception was being thrown (for table created as select).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;(Here I check for existing database, not table)&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Robert&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2426/#review2823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/#review2823&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-10-25 19:25:02, Robert Sur&#243;wka wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-25 19:25:02)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Now when creating table in specific database, if that database doesn&apos;t exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2510&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1187647 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1187647 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Run some sample queries and it seemed to work. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Robert&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13135495" author="jiraposter@reviews.apache.org" created="Tue, 25 Oct 2011 22:24:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-25 22:24:42.563999)&lt;/p&gt;


&lt;p&gt;Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Remove is_database_exist() method from HiveMetaStore, now check whether database exist is done directly with use of getDatabase().&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Now when creating table in specific database, if that database doesn&apos;t exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2510&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1188369 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1188369 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Run some sample queries and it seemed to work. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Robert&lt;/p&gt;
</comment>
                            <comment id="13135708" author="ashutoshc" created="Wed, 26 Oct 2011 04:55:50 +0000"  >&lt;p&gt;It would be better to check for table existence and db existence together in CTAS within analyzeCreateTable(). Its little awkward that we check for table existence first and db existence later. But, I don&apos;t you want you to force into doing another patch. Will leave it upto committers. Otherwise, looks good to me. &lt;/p&gt;</comment>
                            <comment id="13141266" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 16:01:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2426/#review2984&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/#review2984&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2426/#comment6690&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/#comment6690&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    A better place to check DB existence is around line 7840, where table existence is checked.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-25 22:24:42, Robert Sur&#243;wka wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-25 22:24:42)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Now when creating table in specific database, if that database doesn&apos;t exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2510&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1188369 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1188369 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Run some sample queries and it seemed to work. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Robert&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13141337" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 17:11:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-01 17:10:08.840622)&lt;/p&gt;


&lt;p&gt;Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Made the requested change (not for CTAS database existence is checked in AnalyzeCreateTable)&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Now when creating table in specific database, if that database doesn&apos;t exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2510&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/test/queries/clientpositive/input46.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input46.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1196082 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1196082 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1196082 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Run some sample queries and it seemed to work. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Robert&lt;/p&gt;
</comment>
                            <comment id="13141342" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 17:15:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2426/#review2985&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/#review2985&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2426/#comment6691&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/#comment6691&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    better to use the new DATABASE_NOT_EXISTS error message as well. &lt;/p&gt;

&lt;p&gt;    Otherwise it looks good. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-11-01 17:10:08, Robert Sur&#243;wka wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-11-01 17:10:08)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Now when creating table in specific database, if that database doesn&apos;t exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2510&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/input46.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/input46.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1196082 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1196082 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1196082 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Run some sample queries and it seemed to work. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Robert&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13141354" author="nzhang" created="Tue, 1 Nov 2011 17:23:29 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="13141441" author="jiraposter@reviews.apache.org" created="Tue, 1 Nov 2011 18:31:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2426/#review2990&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/#review2990&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;Roll back my last comment. The hive-metastore*.jar doesn&apos;t contain ErrorMsg.java. &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-11-01 17:10:08, Robert Sur&#243;wka wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2426/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-11-01 17:10:08)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Now when creating table in specific database, if that database doesn&apos;t exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2510&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/input46.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/input46.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1196082 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1196082 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1196082 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2426/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2426/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Run some sample queries and it seemed to work. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Robert&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13141729" author="nzhang" created="Tue, 1 Nov 2011 23:05:07 +0000"  >&lt;p&gt;Committed. Thanks Robert!&lt;/p&gt;</comment>
                            <comment id="13141921" author="hudson" created="Wed, 2 Nov 2011 04:48:02 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1051 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1051/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1051/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2510&quot; title=&quot;Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db_name&amp;gt;.&amp;lt;table_name&amp;gt; ....     if the given &amp;lt;db_name&amp;gt; doesn&amp;#39;t exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2510&quot;&gt;&lt;del&gt;HIVE-2510&lt;/del&gt;&lt;/a&gt;. Hive throws Null Pointer Exception upon CREATE TABLE &amp;lt;db&amp;gt;.&amp;lt;tbl&amp;gt;if &amp;lt;db&amp;gt; does not exists&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1196354&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1196354&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/create_table_failure1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/create_table_failure2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/create_table_failure3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/create_table_failure4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/input46.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input46.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13141925" author="navis" created="Wed, 2 Nov 2011 05:09:16 +0000"  >&lt;p&gt;Someone complained to me that EXPLAIN CREATE TABLE &amp;lt;existing-table&amp;gt; is executed successful, but EXPLAIN CTAS fails neither creating table is exist or selecting table is not exist. Should it be needed more consistent? &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499580" name="HIVE-2510.1.patch" size="859" author="rsurowka" created="Tue, 18 Oct 2011 18:57:59 +0000"/>
                            <attachment id="12499791" name="HIVE-2510.2.patch" size="6760" author="rsurowka" created="Thu, 20 Oct 2011 00:51:02 +0000"/>
                            <attachment id="12499882" name="HIVE-2510.3.patch" size="7077" author="rsurowka" created="Thu, 20 Oct 2011 16:18:34 +0000"/>
                            <attachment id="12500292" name="HIVE-2510.4.patch" size="8922" author="rsurowka" created="Sat, 22 Oct 2011 04:48:08 +0000"/>
                            <attachment id="12500765" name="HIVE-2510.5.patch" size="8429" author="rsurowka" created="Tue, 25 Oct 2011 22:23:15 +0000"/>
                            <attachment id="12501800" name="HIVE-2510.6.patch" size="9142" author="rsurowka" created="Tue, 1 Nov 2011 17:10:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Oct 2011 19:47:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
