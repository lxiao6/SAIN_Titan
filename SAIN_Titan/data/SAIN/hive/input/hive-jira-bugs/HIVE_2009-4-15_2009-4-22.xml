<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:13:16 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-4-15+AND+created+%3C%3D+2009-4-22+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="25" total="25"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-415] Long queries does not parse in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-415</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;A query like this won&apos;t parse, because the Hive grammar allows backtracking:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12422840">HIVE-415</key>
            <summary>Long queries does not parse in Hive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 03:22:46 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:29 +0000</updated>
                            <resolved>Wed, 15 Apr 2009 21:39:47 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12699041" author="zshao" created="Wed, 15 Apr 2009 03:46:53 +0000"  >&lt;p&gt;The fix turns out to be simple:&lt;/p&gt;

&lt;p&gt;The following code in Hive.g:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;queryStatementExpression
    : queryStatement (queryOperator^ queryStatementExpression)*
    ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should be changed to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;queryStatementExpression
    : queryStatement (queryOperator^ queryStatementExpression)?
    ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12699043" author="rsm" created="Wed, 15 Apr 2009 03:51:53 +0000"  >&lt;p&gt;can you add a test case which fails without your fix and succeeds with your fix?&lt;/p&gt;</comment>
                            <comment id="12699049" author="zshao" created="Wed, 15 Apr 2009 04:31:28 +0000"  >&lt;p&gt;A better non-recursive solution:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    : queryStatement (queryOperator^ queryStatement)*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Some test outputs are changed - mainly because we had a right-deep.UNION-ALL tree, but now it&apos;s left-deep. There are no semantic changes.&lt;/p&gt;


&lt;p&gt;Tested with the long UNION-ALL query. It works now.&lt;/p&gt;</comment>
                            <comment id="12699052" author="namit" created="Wed, 15 Apr 2009 05:02:25 +0000"  >&lt;p&gt;I am going over the output file changes - just wanted to be sure&lt;br/&gt;
otherwise looks good&lt;/p&gt;</comment>
                            <comment id="12699054" author="namit" created="Wed, 15 Apr 2009 05:11:02 +0000"  >&lt;p&gt;The output files look good, but as Raghu said, can you add a test with lots of unions.&lt;/p&gt;</comment>
                            <comment id="12699061" author="zshao" created="Wed, 15 Apr 2009 05:24:20 +0000"  >&lt;p&gt;Added the test query. This is for branch-0.3.&lt;br/&gt;
Will make a patch for trunk soon.&lt;/p&gt;</comment>
                            <comment id="12699065" author="zshao" created="Wed, 15 Apr 2009 05:37:23 +0000"  >&lt;p&gt;For trunk.&lt;/p&gt;</comment>
                            <comment id="12699095" author="zshao" created="Wed, 15 Apr 2009 07:11:20 +0000"  >&lt;p&gt;Let&apos;s commit &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-372&quot; title=&quot;Nested UDFs cause _very_ high memory usage when processing query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-372&quot;&gt;&lt;del&gt;HIVE-372&lt;/del&gt;&lt;/a&gt; first, since it&apos;s already in branch-0.3 (but not in trunk yet).&lt;/p&gt;</comment>
                            <comment id="12699406" author="namit" created="Wed, 15 Apr 2009 21:39:47 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12422848">HIVE-416</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12419540">HIVE-372</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12405489" name="HIVE-415.1.patch" size="549" author="zshao" created="Wed, 15 Apr 2009 03:48:07 +0000"/>
                            <attachment id="12405492" name="HIVE-415.2.patch" size="37529" author="zshao" created="Wed, 15 Apr 2009 04:31:27 +0000"/>
                            <attachment id="12405496" name="HIVE-415.3.branch-0.3.patch" size="66898" author="zshao" created="Wed, 15 Apr 2009 05:24:20 +0000"/>
                            <attachment id="12405499" name="HIVE-415.3.trunk.patch" size="63324" author="zshao" created="Wed, 15 Apr 2009 05:37:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Apr 2009 03:51:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73548</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122218</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-416] Get rid of backtrack in Hive.g</title>
                <link>https://issues.apache.org/jira/browse/HIVE-416</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive.g now still uses &quot;backtrack=true&quot;. &quot;backtrack&quot; not only slows down the parsing in case of error, it can also produce wrong syntax error messages (usually based on the last try of the backtracking).&lt;/p&gt;

&lt;p&gt;We should follow &lt;a href=&quot;http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar&lt;/a&gt; to remove the need of doing backtrack.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422848">HIVE-416</key>
            <summary>Get rid of backtrack in Hive.g</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 07:08:10 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:15 +0000</updated>
                            <resolved>Sat, 18 Apr 2009 06:08:40 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12699094" author="zshao" created="Wed, 15 Apr 2009 07:09:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-416&quot; title=&quot;Get rid of backtrack in Hive.g&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-416&quot;&gt;&lt;del&gt;HIVE-416&lt;/del&gt;&lt;/a&gt; is a more thorough (and risky) change of Hive.g than &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-415&quot; title=&quot;Long queries does not parse in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-415&quot;&gt;&lt;del&gt;HIVE-415&lt;/del&gt;&lt;/a&gt;, so it should go in after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-415&quot; title=&quot;Long queries does not parse in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-415&quot;&gt;&lt;del&gt;HIVE-415&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12699417" author="zshao" created="Wed, 15 Apr 2009 22:13:39 +0000"  >&lt;p&gt;This patch changed Hive.g to disable backtrack.&lt;/p&gt;

&lt;p&gt;All ambiguity are resolved except an unresolvable one: &quot;Identifier DOT Identifier&quot;. This one will require some work in the SemanticAnalyzer as well.&lt;/p&gt;

&lt;p&gt;We had to add a little restriction to the grammar:&lt;br/&gt;
1. &quot;SELECT TRANSFORM&quot; will have to have brackets around all expression List after it. Originally the brackets are optional;&lt;br/&gt;
2. &quot;MAP&quot; and &quot;REDUCE&quot; cannot have brackets around all expression list after it (just like SELECT). Originally we allow optional brackets.&lt;br/&gt;
Both changes are required if we want to disable backtrack.&lt;/p&gt;</comment>
                            <comment id="12699840" author="namit" created="Thu, 16 Apr 2009 20:20:07 +0000"  >&lt;p&gt;I had some questions.&lt;/p&gt;

&lt;p&gt;1. Wont it be better to factor out the common part in a seperate rule instead of providing the look-ahead.&lt;br/&gt;
For eg:&lt;/p&gt;

&lt;p&gt;instead of:&lt;/p&gt;

&lt;p&gt;alterStatement&lt;br/&gt;
options &lt;/p&gt;
{k=5;}
&lt;p&gt;@init &lt;/p&gt;
{ msgs.push(&quot;alter statement&quot;); }
&lt;p&gt;@after &lt;/p&gt;
{ msgs.pop(); }&lt;br/&gt;
    : alterStatementRename&lt;br/&gt;
    | alterStatementAddCol&lt;br/&gt;
    | alterStatementDropPartitions&lt;br/&gt;
    | alterStatementAddPartitions&lt;br/&gt;
    | alterStatementProperties&lt;br/&gt;
    | alterStatementSerdeProperties&lt;br/&gt;
    ;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
wont it be better to factor out &amp;lt; ALTER TABLE identifier&amp;gt; in a common and then have the remaining rules ?&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
2.  On the same lines, I could not understand the reason for brackets around SELECT TRANSFORM and&lt;br/&gt;
no brackets around MAP/REDUCE.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Instead of this:&lt;br/&gt;
&lt;br/&gt;
selectClause&lt;br/&gt;
@init { msgs.push(&quot;select clause&quot;); }&lt;br/&gt;
@after { msgs.pop(); }
&lt;p&gt;    :&lt;br/&gt;
    KW_SELECT (KW_ALL | dist=KW_DISTINCT)?&lt;br/&gt;
    selectList -&amp;gt; {$dist == null}? ^(TOK_SELECT selectList)&lt;br/&gt;
               -&amp;gt;                  ^(TOK_SELECTDI selectList)&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;    trfmClause  -&amp;gt;^(TOK_SELECT ^(TOK_SELEXPR trfmClause) )&lt;br/&gt;
    ;&lt;/p&gt;



&lt;p&gt;if we factor out:&lt;/p&gt;

&lt;p&gt;KW_SELECT for the first part and the transform clause, brackets should become optional.&lt;/p&gt;


&lt;p&gt;Am I missing something here ?&lt;/p&gt;</comment>
                            <comment id="12699853" author="zshao" created="Thu, 16 Apr 2009 20:46:56 +0000"  >&lt;p&gt;1. I checked the generated code for &lt;/p&gt;
{k=5;}
&lt;p&gt;, it&apos;s a nested if so there is no performance penalty. But I agree most grammars have k up to 3, and it should be easy to extract the common prefix, so I will do it.&lt;/p&gt;

&lt;p&gt;2. optional brackets won&apos;t be possible with a LL(k) parser with any k (without backtrack), because I can construct an arbitarily long string like &quot;(((((((a+b...&quot; and it&apos;s not possible to know whether the first &quot;(&quot; is the optional bracket or not.&lt;/p&gt;

&lt;p&gt;Most people who has been using &quot;SELECT TRANSFORM&quot; are adding the brackets, while those using &quot;MAP/REDUCE&quot; are probably not (think &quot;MAP&quot; / &quot;REDUCE&quot; similar to &quot;SELECT&quot;), that&apos;s why I made the choice like that. We can discuss more on this if needed.&lt;/p&gt;</comment>
                            <comment id="12699873" author="athusoo" created="Thu, 16 Apr 2009 21:24:42 +0000"  >&lt;p&gt;I think for Identifier DOT Identifier we should probably treat it as a lexical rule rather than a grammar rule. It will also make it much simpler to support optional aliasing with complex types. &lt;/p&gt;

&lt;p&gt;Right now&lt;/p&gt;

&lt;p&gt;select T.a.b FROM T&lt;/p&gt;

&lt;p&gt;and &lt;/p&gt;

&lt;p&gt;select  a.b FROM T&lt;/p&gt;

&lt;p&gt;is very hard to handle in the SemanticAnalyzer as the grammar treats a as a table alias instead of a complex column name.&lt;/p&gt;


&lt;p&gt;About the comment on optional brackets - clearly these are optional in expressions. So how do we support those expression e.g (a+b) and a+b are both valid sql expressoins if we cannot support this without backtracking...&lt;/p&gt;</comment>
                            <comment id="12699874" author="athusoo" created="Thu, 16 Apr 2009 21:25:52 +0000"  >&lt;p&gt;Can we use semantic/syntactic predicates to support the optional brackets?&lt;/p&gt;</comment>
                            <comment id="12699877" author="zshao" created="Thu, 16 Apr 2009 21:33:04 +0000"  >&lt;p&gt;Extracted common prefix for ALTER TABLE, and Removed all &quot;&lt;/p&gt;
{k=5}
&lt;p&gt;&quot;.&lt;/p&gt;</comment>
                            <comment id="12699898" author="zshao" created="Thu, 16 Apr 2009 22:03:00 +0000"  >&lt;p&gt;&amp;gt; About the comment on optional brackets - clearly these are optional in expressions. So how do we support those expression e.g (a+b) and a+b are both valid sql expressoins if we cannot support this without backtracking...&lt;/p&gt;

&lt;p&gt;We do support &quot;(a+b)&quot; and &quot;a+b&quot;.&lt;/p&gt;

&lt;p&gt;The problem is that there is no easy way of supporting both &quot;((((a))), b)&quot; and &quot;((((a)))), b&quot;. No matter what is k, it&apos;s not possible to determine whether the first &quot;(&quot; is the optional bracket for the expression list, or just part of the first expression.&lt;/p&gt;

&lt;p&gt;I will need to go over the antlr book to know more about Semantic/Syntactic predicate to know whether that is possible.&lt;/p&gt;

&lt;p&gt;&amp;gt; Identifier DOT Identifier.&lt;br/&gt;
Treating it as a lexical rule won&apos;t allow both T.a.b and a.b.  I am making a first Identifier a TOK_TABLE_OR_COL. I will let SemanticAnalyzer to decide whether it is a table name or column name. Not sure that should go into the same transaction or not since it&apos;s a much bigger change.&lt;/p&gt;</comment>
                            <comment id="12699957" author="rsm" created="Fri, 17 Apr 2009 01:29:51 +0000"  >&lt;p&gt;How about the following:&lt;/p&gt;

&lt;p&gt;Add the production:&lt;br/&gt;
{{{&lt;br/&gt;
expr -&amp;gt; expr &apos;,&apos; expr&lt;br/&gt;
}}}&lt;br/&gt;
With this production and expr -&amp;gt; &apos;(&apos; expr &apos;)&apos; we can support arbitrarily nested parentheses. The issue is that the new production will create a left-deep tree of comma-expressions. We could implement a method which takes such a tree and flatten out comma expressions into expression lists.&lt;/p&gt;

&lt;p&gt;Also, I remember Venky asking for arbitrarily nested parentheses around queries for his query authoring tool. We could do something similar and create comma-query-expressions.&lt;/p&gt;</comment>
                            <comment id="12700013" author="zshao" created="Fri, 17 Apr 2009 05:39:48 +0000"  >&lt;p&gt;@Raghu: I just had a second thought on that approach. The new production you add is left-recursive and it&apos;s not permitted in LL(k), but it&apos;s possible to use precedence rules to fix that.&lt;br/&gt;
However given all the change including the flattening, it seems to me that&apos;s too much work with very little benefit - who care about the optional brackets, for usage it&apos;s exactly the same.&lt;/p&gt;

&lt;p&gt;For Venky&apos;s case, it&apos;s a separate problem. Venky&apos;s case is more like supporting &quot;a&quot; and &quot;((((a))))&quot;. We should be able to support it easily once we allow omitting the sub query alias. &lt;/p&gt;</comment>
                            <comment id="12700230" author="namit" created="Fri, 17 Apr 2009 16:11:38 +0000"  >&lt;p&gt;The changes look good to me.&lt;br/&gt;
+1&lt;/p&gt;

&lt;p&gt;I can test and commit them, but will wait for a couple of hours if anyone has any issues, since many people have been reviewing this code.&lt;br/&gt;
I will wait till Friday evening (say around 5pm), if no-one has any objections, I will commit this (if the tests pass)&lt;/p&gt;</comment>
                            <comment id="12700261" author="athusoo" created="Fri, 17 Apr 2009 17:59:21 +0000"  >&lt;p&gt;A couple of minor comments:&lt;/p&gt;

&lt;p&gt;1. Do we still need k=5 in the alterStatement rule considering that the ties can be broken by k=3 lookahead in alterStatementSuffix.&lt;br/&gt;
2. In the select list and select clause can factor out KW_SELECT as that is the common part in the two options in the selectClause rule.&lt;/p&gt;
</comment>
                            <comment id="12700329" author="zshao" created="Fri, 17 Apr 2009 21:19:12 +0000"  >&lt;p&gt;@Ashish:&lt;br/&gt;
This patch removes the unnecessary &quot;&lt;/p&gt;
{k=5}
&lt;p&gt;&quot;.&lt;br/&gt;
We cannot extract the common &quot;SELECT&quot; out because we allow &quot;MAP&quot;, &quot;REDUCE&quot;, as well as &quot;SELECT TRANSFORM&quot; in the trfmClause.&lt;/p&gt;</comment>
                            <comment id="12700425" author="namit" created="Sat, 18 Apr 2009 06:08:40 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                            <comment id="12701049" author="zshao" created="Tue, 21 Apr 2009 04:34:28 +0000"  >&lt;p&gt;This patch is for branch-0.3. It seems without this, the TestNegativeCliDriver sometimes produce wrong error messages (undeterministically). That is probably caused by the backtracking which is fixed with this patch.&lt;/p&gt;

&lt;p&gt;Please commit this one to branch-0.3.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12422840">HIVE-415</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12422999">HIVE-424</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12405701" name="HIVE-416.1.1.patch" size="7211" author="zshao" created="Thu, 16 Apr 2009 21:33:04 +0000"/>
                            <attachment id="12405992" name="HIVE-416.1.2.branch-0.3.patch" size="7661" author="zshao" created="Tue, 21 Apr 2009 04:34:28 +0000"/>
                            <attachment id="12405807" name="HIVE-416.1.2.patch" size="7186" author="zshao" created="Fri, 17 Apr 2009 21:19:12 +0000"/>
                            <attachment id="12405587" name="HIVE-416.1.patch" size="4218" author="zshao" created="Wed, 15 Apr 2009 22:13:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Apr 2009 20:20:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122219</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-417] Implement Indexing in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-417</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Implement indexing on Hive so that lookup and range queries are efficient.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422895">HIVE-417</key>
            <summary>Implement Indexing in Hive</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 15:51:02 +0000</created>
                <updated>Sat, 5 Apr 2014 21:56:04 +0000</updated>
                            <resolved>Fri, 30 Jul 2010 06:42:14 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Indexing</component>
                    <component>Metastore</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>29</watches>
                                                                                                            <comments>
                            <comment id="12699255" author="dhruba" created="Wed, 15 Apr 2009 16:12:19 +0000"  >&lt;p&gt;This sounds really awesome! Make hadoop-hive suitable for things other than brute force table-scans!&lt;/p&gt;</comment>
                            <comment id="12699258" author="prasadc" created="Wed, 15 Apr 2009 16:20:14 +0000"  >&lt;p&gt;We already have code (based on early version of hive) that does the important work. But we need to integrate this with Hive QL and determine the candidate indexes for a query. Also a way to create buckets (both hash and range) would really speed up the index processing. I didn&apos;t realize but predicate pushdown makes things simpler.&lt;/p&gt;</comment>
                            <comment id="12699297" author="athusoo" created="Wed, 15 Apr 2009 18:07:34 +0000"  >&lt;p&gt;+1 to this...&lt;/p&gt;

&lt;p&gt;We should also look at Katta&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://katta.wiki.sourceforge.net/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://katta.wiki.sourceforge.net/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;to see if we can leverage it to be a really fast index. I think that integration would really rock..&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12699307" author="prasadc" created="Wed, 15 Apr 2009 18:25:57 +0000"  >&lt;p&gt;Another way of doing it is to create a file format that contains index along with data... but i think that would take lot more time.&lt;/p&gt;</comment>
                            <comment id="12699459" author="he yongqiang" created="Thu, 16 Apr 2009 00:26:53 +0000"  >&lt;p&gt;Great feature! Looking forward to see it.&lt;/p&gt;</comment>
                            <comment id="12702769" author="prasadc" created="Sat, 25 Apr 2009 19:59:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1230&quot; title=&quot;HBase handler should validate and reject irrelevant DDL specification such as bucketing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1230&quot;&gt;HIVE-1230&lt;/a&gt; has changed the interface for RecordReader and it no longer has getPos() method. The older interfaces are deprecated. I used this method in the prototype get the current position while creating the index and also while reading the actual data file. Even the SequenceFileRecordReader does not have this method. &lt;/p&gt;

&lt;p&gt;Without getPos() and seek() methods to RecordReader it becomes tough to implement any kind of generic indexing.&lt;/p&gt;</comment>
                            <comment id="12709899" author="prasadc" created="Fri, 15 May 2009 16:37:14 +0000"  >&lt;p&gt;Here is a very rough outline as how this can be done (prototype code has creation and execution parts but not he HiveQL related stuff)&lt;/p&gt;

&lt;p&gt;hive indexing:&lt;br/&gt;
goal of hive indexing is to speed up lookup queries on certain columns of the table. currently queries with predicates like &apos;WHERE tab1.col1 = 10&apos; has to load the complete table/partition and process all the rows. if there exists an index on col1 then only a small portion of the file can be loaded.&lt;/p&gt;

&lt;p&gt;command to create index:&lt;/p&gt;

&lt;p&gt;create index tab_idx1 on tab1 (col1, ...);&lt;/p&gt;

&lt;p&gt;if the base table is partitioned then the index is also partitioned. indexes can be created on base tables whose file format supports (getPos() and possible seek() or equivalent methods.)&lt;/p&gt;

&lt;p&gt;format of index:&lt;br/&gt;
index is also a hive table with the following columns&lt;br/&gt;
col_1...col_k &amp;#8211; key cols. base table columns on which this index is defined&lt;br/&gt;
list&amp;lt;offset&amp;gt;  &amp;#8211; positions of rows which contain these keys&lt;/p&gt;

&lt;p&gt;offset is a combination of following&lt;br/&gt;
file_name   &amp;#8211; relative path of the file in which this row is contained. (relative to the partition/table location)&lt;br/&gt;
byte_offset &amp;#8211; byte offset of the row in the file. row can be found at this byte offset or in the block starting at this byte offset for Block Compressed Sequence Files.&lt;/p&gt;

&lt;p&gt;when to create index:&lt;br/&gt;
traditionally databases try to update index when the table is loaded. hive doesn&apos;t process rows while loading tables using &apos;LOAD DATA INPATH&apos; command. also it may slow down the actual loading for &apos;INSERT ... SELECT ... FROM ...&apos; type of statements. so users should have an option whether the index is initialized during &apos;INSERT ... SELECT ...&apos; or initialized separately. Another command like &apos;update index tab_idx partition ..&apos; can be provided.&lt;/p&gt;

&lt;p&gt;how to create index:&lt;br/&gt;
index can be created using the following hive command augmented with &apos;offset&apos;&lt;br/&gt;
&apos;select col_1...col_k, offset from tab1&apos;&lt;/p&gt;

&lt;p&gt;offset can be provided as built in function which can be derived in HiveInputRecordReader which will in turn use the specific FileFormat&apos;s Reader getPos() method and the &apos;map.input.file&apos; for the file name (or from the tableDesc or partiionDesc).&lt;/p&gt;

&lt;p&gt;Algorithm For using index:&lt;br/&gt;
1) Hive QL needs to determine whether a particular query can use any existing indexes. This can be determined by examining the predicate tree. After predicate pushdown, all those predicates which can use index are in the child operator of a TableScanOperator. This predicate tree needs to be examined. If this contains any subset of columns of an index then that index can be used. Until stats are available, it is not possible to guess whether using index is beneficial. This needs to be fleshed out more to check both &apos;AND&apos; and &apos;OR&apos; predicates.&lt;/p&gt;

&lt;p&gt;2) For each of the qualified indexes, a map/reduce job can be created using the predicates determined in step 1. The output of this job should have the following information&lt;br/&gt;
file_name   &amp;#8211; fully qualified file name that contains the data&lt;br/&gt;
byte_offset &amp;#8211; position of row&lt;/p&gt;

&lt;p&gt;3) If there is more than one qualified index then the outputs of step2 needs to be combined depending on whether the predicates on these indexes have &apos;AND&apos; or &apos;OR&apos; between them.&lt;/p&gt;

&lt;p&gt;4) Modify the original plan to use only those FileSplits that appear in the output of step3. This reduces the number of mappers spawned by JobTracker.&lt;/p&gt;

&lt;p&gt;5) Modify the original plan to use HiveIndexRecordReader instead of regular record reader. Output of step3 (which is sorted) is available to the HiveIndexRecordReader. It can skip to these locations instead of reading every record in the input of the Mapper.&lt;/p&gt;
</comment>
                            <comment id="12709900" author="prasadc" created="Fri, 15 May 2009 16:39:32 +0000"  >&lt;p&gt;Thanks Yongqiang!&lt;/p&gt;</comment>
                            <comment id="12710198" author="he yongqiang" created="Sun, 17 May 2009 13:59:19 +0000"  >&lt;p&gt;Thanks Prasad for detailed description of the index design. &lt;br/&gt;
Several questions:&lt;br/&gt;
(1) &lt;br/&gt;
Is the index based on sort? Single-column index based on sort can be very useful for query involving this column, both point query and range query. But for sort-based multi-column index, it can not be utilized for queries not containing the column used as primary sort order in the index. For example, we create an sort based index on table1(col1,col2,col3). The index uses col1 as primary sort order, col2 as secondary sort order, and col3...&lt;br/&gt;
We can use this index to accelerate queries like:&lt;br/&gt;
1) select * from table1 where col1&amp;gt;2 and col2&amp;lt;34  &lt;br/&gt;
2) select * from table1 where col1&amp;lt;34 and col3 &amp;gt;45&lt;br/&gt;
3) selcet * from table1 where col1&amp;gt;23&lt;br/&gt;
but, we can not use it for queries like:&lt;br/&gt;
4) select * from table1 where col2&amp;gt;34 and col3&amp;lt;3&lt;br/&gt;
5) select * from table1 where col2 =34&lt;br/&gt;
6) select * from table1 where col3 &amp;lt;45&lt;/p&gt;

&lt;p&gt;(2) &lt;br/&gt;
Should we consider using index to accelerate query involving join several tables. For example, we have two tables:&lt;br/&gt;
user(userid,name,address, age,title,company);&lt;br/&gt;
click(userid,url,datetime);&lt;br/&gt;
And now we have a query like:&lt;br/&gt;
select url  from user, click where user.userid=click.userid and user.name=&quot;user_name&quot; and datetime between last month;  to select the url list the specified user visits in last month. &lt;br/&gt;
If we have an index: create index user_url on table user(name), click(datetime) where user.userid=click.userid, then the above query can be accelerated.&lt;/p&gt;

&lt;p&gt;(3) &lt;br/&gt;
Index can also be used in Group-by aggregation queries. Should we also consider them?&lt;br/&gt;
(4)&lt;br/&gt;
Another feature is to integrate Lucene index with Hive. Ashish suggested to integrate katta. I took a look at katta, and i think it maybe not necessary to include katta in. If we include it, the hive user will have to deploy katta and zookeeper in their cluster. I think we can integrate lucene internally without touch katta.&lt;/p&gt;</comment>
                            <comment id="12710204" author="prasadc" created="Sun, 17 May 2009 15:39:47 +0000"  >&lt;p&gt;1)&lt;br/&gt;
The question you raised applies only to B+Tree indexes. The index that I defined above is not really a traditional database index but a kind of summary table (or view) and any lookup/range-query on table requires reading of the whole index. So you can apply all predicates as long as columns referenced in the predicates exist in the index. So we should be able use index on (col1, col2, col3) for all the queries above. Sorting order has no impact here since the whole index is read into memory anyways.&lt;/p&gt;

&lt;p&gt;Since this index can be created in sorted order, we can create sparse index (similar to non-leaf nodes of a B+-Tree) if the index itself is too big (ie, index sizes are order of magnitude larger than HDFS block size). But this can be done as a later optimization.  &lt;/p&gt;

&lt;p&gt;2)&lt;br/&gt;
With the design above, indexes on joins will come free since predicate pushdown will push the &apos;user.name=&quot;user_name&quot;&apos; to above the join and only index filtered rows participate in join.&lt;/p&gt;

&lt;p&gt;But creating indexes on the joined output may increase the index size so as to decrease the overall effectiveness. But with sparse indexes this problem might be mitigated so we can support this kind of join indexes along with support for sparse indexes.&lt;/p&gt;

&lt;p&gt;3)&lt;br/&gt;
Yes, for some aggregation queries it may make sense to read the index (since it is a summary table as well). Aggregations or any queries that involve only columns from the index can operate only on the index and not the main table.&lt;/p&gt;

&lt;p&gt;4) &lt;br/&gt;
I also looked at it and not sure how it fits into Hive. Katta is more like an distributed index server.&lt;/p&gt;</comment>
                            <comment id="12710248" author="he yongqiang" created="Mon, 18 May 2009 02:36:19 +0000"  >&lt;p&gt;Prasad,the index you designed is a kind of hash index? And it requires to scan the whole table for either lookup/range-query. &lt;br/&gt;
Sort based query will only need to scan part of the index table, but it also has problems as i posted in the previous comment.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Since this index can be created in sorted order, we can create sparse index&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;how? I think sort based index can not be sparse index, and only can be dense index.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I also looked at it and not sure how it fits into Hive. Katta is more like an distributed index server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes, we do not need to fit katta into Hive. But we can integrate lucene index into Hive. But right now i think we can put this on the last part of our schedule.&lt;/p&gt;</comment>
                            <comment id="12710249" author="he yongqiang" created="Mon, 18 May 2009 02:46:59 +0000"  >&lt;p&gt;Prasad, I think the hash based index is more like a projection, because number of rows with same hash value of indexed columns will be very low. &lt;br/&gt;
And in most cases, the block/pos list&apos;s size will only be 1.&lt;/p&gt;</comment>
                            <comment id="12710494" author="prasadc" created="Mon, 18 May 2009 21:12:49 +0000"  >&lt;p&gt;The above index is not a hash index since you can&apos;t do range queries on hash index and lookups are constant time. not sure what to call this except that it is a view (simple projection) of the base table with offsets into the base table.&lt;/p&gt;

&lt;p&gt;on sparse index, i meant you can create a sparse index on top of the index i described above. but this can be done later.&lt;/p&gt;

&lt;p&gt;&amp;gt; And in most cases, the block/pos list&apos;s size will only be 1&lt;/p&gt;

&lt;p&gt;that is not the case if the index is on a non-primary key column. and i think, mostly this is the case where indexes will be used in data warehouses.&lt;/p&gt;</comment>
                            <comment id="12710591" author="he yongqiang" created="Tue, 19 May 2009 02:44:04 +0000"  >&lt;p&gt;&amp;gt;that is not the case if the index is on a non-primary key column. and i think, mostly this is the case where indexes will be used in data warehouses.&lt;br/&gt;
Yes. If the index is built on one column, the block/pos list&apos;s size will be large. But if it is built on many columns, i think the block/pos list&apos;s size will be small.&lt;br/&gt;
Anyway, we can build this index as the first step.&lt;br/&gt;
And after this finished, we can try other kinds of index, like:&lt;br/&gt;
1) sort based index&lt;br/&gt;
2) lucene index&lt;br/&gt;
3) block-scope B+Tree or R-tree or other advantage index data structures.&lt;/p&gt;

&lt;p&gt;Prasad, you said you already wrote some code, would you please attach it?&lt;/p&gt;</comment>
                            <comment id="12710601" author="he yongqiang" created="Tue, 19 May 2009 03:39:45 +0000"  >&lt;p&gt;Forgot one, Bitmap. I did some tests on Bitmap, it&apos;s performance is excellent.&lt;/p&gt;</comment>
                            <comment id="12710741" author="prasadc" created="Tue, 19 May 2009 14:25:38 +0000"  >&lt;p&gt;Yes, mostly the block/pos size will be small but I don&apos;t think we can assume that since there will be enough cases where it will not be true. &lt;/p&gt;

&lt;p&gt;We explore the other approaches later on. different indexes will be useful in different scenarios. &lt;/p&gt;

&lt;p&gt;i will try to post some code this week. &lt;/p&gt;</comment>
                            <comment id="12712342" author="prasadc" created="Sat, 23 May 2009 02:23:12 +0000"  >&lt;p&gt;patch built from hive prototype code. it compiles with hive code but needs lot of work before it can fit nicely with hive. &lt;/p&gt;

&lt;p&gt;Yongqing, the code is hard to understand in the context of open source hive code but makes sense from prototype code. let me know if you have any question. you might want to use this as a guide and start from scratch hive2 indexing code.&lt;/p&gt;</comment>
                            <comment id="12712352" author="he yongqiang" created="Sat, 23 May 2009 04:46:30 +0000"  >&lt;p&gt;Thanks a lot, Prasad. I will put questions on the jira. and will start working on it after we set the design. Looking forward to working on it. &lt;/p&gt;</comment>
                            <comment id="12713003" author="he yongqiang" created="Tue, 26 May 2009 13:19:03 +0000"  >&lt;p&gt;Checked how Mysql does with index and found mysql either can not use index to handle situations in my earlier post:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;but, we can not use it for queries like:&lt;br/&gt;
4) select * from table1 where col2&amp;gt;34 and col3&amp;lt;3&lt;br/&gt;
5) select * from table1 where col2 =34&lt;br/&gt;
6) select * from table1 where col3 &amp;lt;45 &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And now a basic idea for our index design, just like Prasad commented in previous post:&lt;br/&gt;
1) index structure&lt;br/&gt;
use a mr job to create index, input is a file with all columns, and mapper output kv pairs, where key is &amp;lt;indexed col1, indexed col2,...&amp;gt; offset.&lt;br/&gt;
And we define a comparator for &amp;lt;indexed col1, indexed col2,...&amp;gt; to letting the shuffle phase sort all mappers&apos; output. And in reducer, we combine kv-pairs to &lt;br/&gt;
&amp;lt;indexed col1, indexed col2,...&amp;gt; list_of_offsets&lt;br/&gt;
This is a dense sorted index, then we create a sparse index on the dense index. And we also collect column data distribution informations (histogram) while doing this.&lt;br/&gt;
2)&lt;br/&gt;
we consider using index for a query only when the query involves the columns of leftmost part of the index. &lt;br/&gt;
And also need to consider index merge when involves two indexes, and a cost estimation to consider whether using index will decrease query time (this is the work need to do in the optimizer).&lt;/p&gt;

&lt;p&gt;But as first step, we can first finish part 1 and hive ql part. Then consider part two(optimizer part). After part1 finished, i will examine part2 in more detail.&lt;/p&gt;</comment>
                            <comment id="12714306" author="prasadc" created="Fri, 29 May 2009 05:40:16 +0000"  >&lt;p&gt;the plan looks good. i am not sure we need to create sparse index on the dense index in phase 1. In most cases the size of dense index will be small enough so that additional mr job for processing the sparse index will become unnecessary. if sparse index is not necessary then there is not need for the dense index be sorted.&lt;/p&gt;

&lt;p&gt;since the dense index is scanned completely while processing the query, we can use the index if any predicate column exists in index definition.&lt;/p&gt;</comment>
                            <comment id="12714492" author="seymourz" created="Fri, 29 May 2009 15:52:44 +0000"  >&lt;p&gt;Hello Prasad and Yongqiang, Thank you very much for this great effort. &lt;/p&gt;

&lt;p&gt;One of my suggestions would be that, since we&apos;ve done indexing with Mapreduce, and for some queries based on the generated indexes, can we just omit the time-consuming Mapreduce phase during the querying period, as we&apos;ve already got all of the files/offsets and we can go to these specific file offsets directly to get relevant rows of the table? This would greatly expedite the query process.&lt;/p&gt;

&lt;p&gt;This would be helpful for the following case in one of my usages with Hive. With Hive, I&apos;ve already sharded (by date), and bucketed (by cols hashing) of my log data into a hierachical files. Also I&apos;ve sorted each file with the hashing cols. As I may have many rows with same column values but different timestamps, to minimize index size, I&apos;d like to treat these rows of same col values as a block and only use a single index entry for this block. This will grealy reduce the index size of my data, but still very useful in my query request with those cols.&lt;/p&gt;</comment>
                            <comment id="12714730" author="he yongqiang" created="Sat, 30 May 2009 15:22:10 +0000"  >&lt;p&gt;Thanks for the suggestions, Seymour.&lt;br/&gt;
I have also thought what your said, directly fetch the data instead of initilize a new mr job. I will try include this, but it may be done in the second phase(the optimize phase).&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;I&apos;d like to treat these rows of same col values as a block and only use a single index entry for this block&lt;br/&gt;
in the design, we indeed only use one index entry. And not only for contineous values, we use the same index entry for all rows with the same col value.&lt;/p&gt;</comment>
                            <comment id="12715153" author="jsensarma" created="Mon, 1 Jun 2009 17:16:46 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;are we going to have one index file per hdfs file? (or one per partition?)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;related question is how this is going to interact with sampling? (i think currently the sampling predicate is optimized out for bucketed tables - although not terribly sure).&lt;/p&gt;

&lt;p&gt;i would love to see the api to invoke the index. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ideally we would like to plug in different indexing schemes - as well with map-side joins - the hashmap storing the smaller table can be seen as an index on this table. It would seem that one should be able to replace a map-side join based on tables loaded into jdbm with tables with indices proposed here (and thereby do joins based on indices almost trivially).&lt;/li&gt;
	&lt;li&gt;we should enable people to be able to plug in their own indices (since it&apos;s quite likely that over time there will be multiple indexing efforts on hadoop files).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12715345" author="he yongqiang" created="Tue, 2 Jun 2009 02:41:38 +0000"  >&lt;p&gt;Joydeep, Thanks for the concern.&lt;br/&gt;
&amp;gt;&amp;gt;are we going to have one index file per hdfs file?&lt;br/&gt;
yeah.&lt;br/&gt;
&amp;gt;&amp;gt;i would love to see the api to invoke the index&lt;br/&gt;
currently it is not settle down. I will try to give it in the next week.&lt;br/&gt;
&amp;gt;&amp;gt;enable people to be able to plug in their own indices&lt;br/&gt;
I think if we have a well-designed adaptable api, then this can be addressed.&lt;br/&gt;
&amp;gt;&amp;gt;we would like to plug in different indexing schemes&lt;br/&gt;
yes. i have proposed several schemes in previous posts. Can you give me some schemes, so i can compare and make a better design.&lt;/p&gt;

&lt;p&gt;BTW, I will try to write a proposal in next week. I have an important english exam this weekend. Sorry for the delay.&lt;/p&gt;</comment>
                            <comment id="12715539" author="seymourz" created="Tue, 2 Jun 2009 14:26:03 +0000"  >
&lt;p&gt;&amp;gt;&amp;gt;are we going to have one index file per hdfs file?&lt;/p&gt;

&lt;p&gt;Can we also support exporting these index files as a table to some other storage system like HBase or Tokyou Cabinet,  i.e. these seperate index files for each HDFS file, can be expressed as a single table in Hive?&lt;/p&gt;</comment>
                            <comment id="12722722" author="schubertzhang" created="Mon, 22 Jun 2009 18:01:18 +0000"  >&lt;p&gt;Prasad,&lt;/p&gt;

&lt;p&gt;About yout comments at 17/May/09 08:39 AM.&lt;br/&gt;
&amp;gt;&amp;gt; ... So we should be able use index on (col1, col2, col3) for all the queries above. Sorting order has no impact here since the whole index is read into memory anyways. &lt;/p&gt;

&lt;p&gt;If the size of index is big out of memory size, how to read whole index into memory?&lt;/p&gt;</comment>
                            <comment id="12722773" author="prasadc" created="Mon, 22 Jun 2009 19:27:59 +0000"  >&lt;p&gt;Schubert,&lt;/p&gt;

&lt;p&gt;We can run another map-reduce job that scans the index and builds out the results file sorted by the index key. This file can be read sequentially and determine which input table HDFS blocks to be fed to the actual job for the query.&lt;/p&gt;

&lt;p&gt;Another way is to build a sparse index on the index. But if the table itself is sorted, we can build the sparse index (ala MapFile) directly and use it. @Facebook, the usecase we have doesn&apos;t have this sorting property but I can envision this being useful for primary indexes where the index sort order and the table sort order are same.&lt;/p&gt;

&lt;p&gt;Can you think of any other ways? Ofcourse, we can process index files using HBase or TokyoCabinet but that requires another system to be setup and administered and both systems need to be available for index processing. But in some cases these solutions also work. The indexing scheme described above should play well with Hbase and TokyoCabinet since index is a file with rows containg a key and position parameters. In Hadoop we can stored that in SequenceFile or may be TFile but if they have to be stored in external systems, we can plug-in a custom SerDe and change the default location of these two a location where the external systems can access these files.&lt;/p&gt;</comment>
                            <comment id="12725103" author="schubertzhang" created="Mon, 29 Jun 2009 09:55:32 +0000"  >&lt;p&gt;Prasad,&lt;/p&gt;

&lt;p&gt;Thanks for your comments. Now, I understand your comments.&lt;/p&gt;

&lt;p&gt;Yes, in one of our projects, we sorted the data table and build sparse index which record the block keys and file offsets. Then, we load the index files into HBase to service for query. I works fine.&lt;/p&gt;
</comment>
                            <comment id="12728605" author="he yongqiang" created="Wed, 8 Jul 2009 10:29:13 +0000"  >&lt;p&gt;Had a talk with Prasad and Zheng about the index design. &lt;br/&gt;
And i write a summary of the meeting: &lt;a href=&quot;http://docs.google.com/View?id=dc9jpfdr_6dkrt82c7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.google.com/View?id=dc9jpfdr_6dkrt82c7&lt;/a&gt;&lt;br/&gt;
Any suggestion is appreciated!&lt;br/&gt;
BTW, In this meeting and the doc, we did not include any other index types. And i think we first implement one index type, and after that, others will be more clear.&lt;/p&gt;</comment>
                            <comment id="12728900" author="prasadc" created="Wed, 8 Jul 2009 20:56:51 +0000"  >&lt;p&gt;One thing that isn&apos;t mentioned is that in List&amp;lt;bucketname, List&amp;lt;offset&amp;gt;&amp;gt; column, offsets are sorted. &lt;/p&gt;

&lt;p&gt;Another thing missing is, when an index on a partition is built then a new partition will be created for that index table (similar to that of creating a partition for a regular table).&lt;/p&gt;

&lt;p&gt;We can distinguish index tables and regular tables by having a table parameter.&lt;/p&gt;

&lt;p&gt;We can skip partition specific indexes in the first phase if it reduces amount of work and assume indexes defined on a table can be created on all partitions.&lt;/p&gt;</comment>
                            <comment id="12732896" author="he yongqiang" created="Sat, 18 Jul 2009 13:33:13 +0000"  >&lt;p&gt;A Draft version of buiding(create/update) index.&lt;br/&gt;
Still needs: &lt;br/&gt;
1) reducer sorts a set positions of one key in memory, which may cause out of memory when a index key occures too many times &lt;br/&gt;
2) the index output format can only use IgoreKeyTextOutputFormat right now.&lt;/p&gt;</comment>
                            <comment id="12734203" author="prasadc" created="Wed, 22 Jul 2009 17:25:02 +0000"  >&lt;p&gt;1) Are you worried about the sort phase of the reducer or the IndexBuilder&apos;s reducer code? I don&apos;t think former issue will be a problem. The later issue can be avoided by writing multiple rows for a key if the number of offsets exceed a certain limit. So reducer can flush the offsets periodically to disk thus avoiding OutOfMemory exceptions in reducer.&lt;/p&gt;

&lt;p&gt;2) What are the other options for the index output format?&lt;/p&gt;</comment>
                            <comment id="12734405" author="he yongqiang" created="Thu, 23 Jul 2009 00:23:44 +0000"  >&lt;p&gt;1) For a given key, we are using a sorted set for each bucket to store positions at the reduer. I am worried that &quot;one sorted set for each bucket&quot; may cause out of memory problem.&lt;br/&gt;
as you commentted earlier: &quot;List&amp;lt;bucketname, List&amp;lt;offset&amp;gt;&amp;gt; column, offsets are sorted&quot;. &lt;br/&gt;
Think about one extreme situation: one file contains a single value million times. So at the reducer we are storing million positions in a sorted set. &lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;So reducer can flush the offsets periodically to disk thus avoiding OutOfMemory exceptions in reducer. &lt;br/&gt;
If we do this, how we can guarantee they are sorted. I mean offsets after this flush are greater than offsets in previous flush.&lt;/p&gt;

&lt;p&gt;2)What are the other options for the index output format?&lt;br/&gt;
I think there is no other options. We need to discard the key part. And i think in hive only IgnoreKeyTextOutputFormat does that. And Of course all hive&apos;s custom HiveOutputFormat can discard key part, but they can not be specified in the map-reduce jobconf, since they do not extend OutputFormat.&lt;/p&gt;</comment>
                            <comment id="12734408" author="prasadc" created="Thu, 23 Jul 2009 00:30:45 +0000"  >&lt;p&gt;well the number of offsets can&apos;t exceed number of SequenceFile blocks since we can only index the SequenceFile block offsets. So the problem is not as dire as it can be. And also if there are that many (i.e. more than 10% of rows in traditional RDBMS but may more in Hadoop case) have same key then index may not be efficient after all since it is better to read the whole table anyways.&lt;/p&gt;</comment>
                            <comment id="12734419" author="prasadc" created="Thu, 23 Jul 2009 01:44:02 +0000"  >&lt;p&gt;what i am trying to say is for such frequent keys indexing may not be of much help so may be we can relax &apos;sort&apos; property? i don&apos;t think there is another easy way out other than do a disk based sort. check you can reuse any of the hadoop sorting code. Or can we piggyback this sorting on top of hadoop reduce sort phase some how?&lt;/p&gt;</comment>
                            <comment id="12734437" author="prasadc" created="Thu, 23 Jul 2009 03:05:26 +0000"  >&lt;p&gt;i am not able to apply the patch to latest trunk.&lt;/p&gt;</comment>
                            <comment id="12734440" author="he yongqiang" created="Thu, 23 Jul 2009 03:15:41 +0000"  >&lt;p&gt;I am about to update it. And making some modifications according to our offline talk.&lt;br/&gt;
And i need to add some testcases and do more tests. &lt;br/&gt;
So i will submit a new patch by this weekend, and will notify you any updates.&lt;/p&gt;</comment>
                            <comment id="12734473" author="he yongqiang" created="Thu, 23 Jul 2009 05:59:53 +0000"  >&lt;p&gt;This jira page is a bit too long to follow.&lt;br/&gt;
With discussions with Prasad and Zheng, will open several sub-tasks for index-building, generalize index interface to allow plugin different index strategies, and optimize queries with index  etc.&lt;/p&gt;

&lt;p&gt;Let&apos;s keep discussions involved overall indexing here in this jira page, and move other discussions to separate jira pages.&lt;/p&gt;</comment>
                            <comment id="12735271" author="he yongqiang" created="Sat, 25 Jul 2009 13:19:30 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-678&quot; title=&quot;Add support for building index table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-678&quot;&gt;&lt;del&gt;HIVE-678&lt;/del&gt;&lt;/a&gt; for add support for building index.&lt;br/&gt;
see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-678&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-678&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12758067" author="hammer" created="Tue, 22 Sep 2009 00:02:40 +0000"  >&lt;p&gt;Another type of index worth knowing about: the &quot;negative index&quot;/&quot;storage index&quot; from Exadata, described at &lt;a href=&quot;http://blogs.oracle.com/datawarehousing/2009/09/500gbsec_and_database_machine.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://blogs.oracle.com/datawarehousing/2009/09/500gbsec_and_database_machine.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We get some &quot;negative indexing&quot; for free with partitions, but this may be useful for more &quot;distinctive&quot; scans over columns for which we have not partitioned.&lt;/p&gt;</comment>
                            <comment id="12758084" author="prasadc" created="Tue, 22 Sep 2009 00:27:57 +0000"  >&lt;p&gt;@jeff, i think this is more suitable for storing it along with data where blocks of data can skipped while scanning rows. i think columnar storage might already be doing this. &lt;/p&gt;</comment>
                            <comment id="12758094" author="hammer" created="Tue, 22 Sep 2009 01:35:52 +0000"  >&lt;p&gt;Yeah, I think so as well. Did my comment make it seem like I thought otherwise?&lt;/p&gt;</comment>
                            <comment id="12758097" author="prasadc" created="Tue, 22 Sep 2009 01:43:55 +0000"  >&lt;p&gt;there can be a summary index here as well (every SequenceFile block will have min &amp;amp; max column values in the index). thought you are hinting at that.&lt;/p&gt;</comment>
                            <comment id="12758116" author="jsensarma" created="Tue, 22 Sep 2009 04:18:01 +0000"  >&lt;p&gt;are there any references on this technique?&lt;/p&gt;

&lt;p&gt;someone had earlier suggested this (apparently from reading Netezza documentation) - but i don&apos;t understand when it would work. why would a (fairly large) sequencefile block only limited range of values (assuming the metadata stores a min-max range). most cases i can imagine in our dataset would either have low cardinality columns (so most values would be present) or for large cardinality ones - the distribution would be random (relative to the primary sort key) - and the range would seem ineffective.&lt;/p&gt;

&lt;p&gt;unless there are columns that are closely related to the how data is sorted/partitioned (perhaps some product ids are limited to specific range of time - but the partitioning is on time and not product id - and even that sounds dubious).&lt;/p&gt;

&lt;p&gt;a bloom filter would seem much more plausible at allowing good filtering. even then don&apos;t understand why this sort of metadata should be kept along with the block and not separately (much more flexible - can be added on demand) as this jira is headed towards.&lt;/p&gt;</comment>
                            <comment id="12758127" author="prasadc" created="Tue, 22 Sep 2009 05:14:44 +0000"  >&lt;p&gt;i don&apos;t think it makes much sense unless there is some clustering or sorting property. if there is clustering and sorting and the selectivity of a query is much higher than 10% then storing this metadata along with data makes sense instead of a separate block. the 10% threshold may be larger for Hive but the point still stands. in OLAP case data is change seldom and the size of this kind of metadata is much smaller than the data itself so the overhead of storing this data is negligible.&lt;/p&gt;

&lt;p&gt;something similar to this is done in DB2 Multi-Dimensional Clustering where whole blocks (disk blocks) are skipped if the key value doesn&apos;t fit the query.&lt;/p&gt;</comment>
                            <comment id="12758135" author="jsensarma" created="Tue, 22 Sep 2009 06:06:07 +0000"  >&lt;p&gt;MDC also maintains metadata separately - at least based on their paper (&lt;a href=&quot;http://www.research.ibm.com/compsci/project_spotlight/datamgmt/SIGMOD2003.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.research.ibm.com/compsci/project_spotlight/datamgmt/SIGMOD2003.pdf&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12758139" author="prasadc" created="Tue, 22 Sep 2009 06:12:07 +0000"  >&lt;p&gt;yes they do but they don&apos;t use for table scans which are done if the query selectivity is greater than 10% (or some such). they use the index for index scans and in joins. I wrote the table scan code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12758556" author="schubertzhang" created="Wed, 23 Sep 2009 03:01:09 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Prasad Chakka added a comment - 15/Apr/09 11:25 AM&lt;br/&gt;
Another way of doing it is to create a file format that contains index along with data... but i think that would take lot more time. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We are trying to store data in sorted and block-indexed files (such as HFile or TFile). Then I think we can know the startKey and lastKey of each file and each block. This block index(block summary) is just for primary key. &lt;/p&gt;</comment>
                            <comment id="12794263" author="appodictic" created="Wed, 23 Dec 2009 23:14:16 +0000"  >&lt;p&gt; I currently am benching an 11 node hive cluster against a 16 TB MySQL system 4x quad core 32 GB RAM 5.1 with partitioning.&lt;/p&gt;

&lt;p&gt;Hive destroys mysql with any query like:&lt;/p&gt;

&lt;p&gt;(date_id is my partition column.)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;set mapred.map.tasks=34;
set mapred.reduce.tasks=11;
FROM pageviews
insert overwrite directory &apos;/user/ecapriolo/hivetest4&apos;
select sitename_id, user_id, count(user_id)   WHERE date_id=20091250 group by sitename_id,user_id
12098855 Rows loaded to /user/ecapriolo/hivetest4
OK
Time taken: 185.528 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The same query can take over 3000 seconds on MySQL because these large summary queries are always written to a temp table and then writes bottleneck your read queries.&lt;/p&gt;

&lt;p&gt;However, if mysql has an index (and if the index is in memory, which is hard in a warehouse) on some other value in the where clause like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select sitename_id, user_id, count(user_id)   WHERE date_id=20091250 and sitename_id=400 group by sitename_id,user_id 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;MySQL gets a relative performance speed-up, while hive ends up scanning the entire table.&lt;/p&gt;

&lt;p&gt;I agree with dhruba,&lt;br/&gt;
&amp;gt;&amp;gt;This sounds really awesome! Make hadoop-hive suitable for things other than brute force table-scans! &lt;/p&gt;

&lt;p&gt;If we had indexes helping stop some brute force scans, that would just open up other doors to what hive could do.&lt;/p&gt;</comment>
                            <comment id="12835569" author="he yongqiang" created="Fri, 19 Feb 2010 03:48:41 +0000"  >&lt;p&gt;Got talked with Prasad about this issue today.&lt;br/&gt;
I may not able to finish this in the coming one or two months. I am now spending most of my time working on some other issues. I am sorry about that.&lt;br/&gt;
If anyone want this feature in, please feel free to take over from me. And i will provide all help that i can.  If no one picked up, i can finish it after finishing issues at hand.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="12876676" author="prafulla" created="Tue, 8 Jun 2010 13:29:52 +0000"  >&lt;p&gt;He Yongqiang ,&lt;br/&gt;
Have you started working on this one ?&lt;br/&gt;
If not, I was interested in taking a look at it.&lt;br/&gt;
Patch link hive- 417&#65293;2009-07-18.patch is not working, can you share latest patch here ?&lt;/p&gt;</comment>
                            <comment id="12876717" author="he yongqiang" created="Tue, 8 Jun 2010 16:43:52 +0000"  >&lt;p&gt;Cool. Yes. i do have a latest patch for this jira. I will cleanup it and post. &lt;/p&gt;</comment>
                            <comment id="12876822" author="he yongqiang" created="Tue, 8 Jun 2010 21:48:26 +0000"  >&lt;p&gt;With this patch, the index can work. but it is not so intelligent. &lt;/p&gt;

&lt;p&gt;This is how this patch works:&lt;/p&gt;

&lt;p&gt;=== how to create the index table and generate index data ===&lt;br/&gt;
set hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;&lt;/p&gt;

&lt;p&gt;drop table src_rc_index;&lt;/p&gt;

&lt;p&gt;//create an index table on table src_rc, and the index col is key. &lt;br/&gt;
//And the index table&apos;s data is stored using textfile (also work with seq, rcfile)&lt;br/&gt;
create index src_rc_index type compact on table src_rc(key) stored as textfile; &lt;/p&gt;

&lt;p&gt;hive&amp;gt; show table extended like src_rc_index;&lt;br/&gt;
tableName:src_rc_index&lt;br/&gt;
owner:heyongqiang&lt;br/&gt;
location:&lt;a href=&quot;file:/user/hive/warehouse/src_rc_index&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/user/hive/warehouse/src_rc_index&lt;/a&gt;&lt;br/&gt;
inputformat:org.apache.hadoop.mapred.TextInputFormat&lt;br/&gt;
outputformat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&lt;br/&gt;
columns:struct columns &lt;/p&gt;
{ i32 key, string _bucketname, list&amp;lt;string&amp;gt; _offsets}

&lt;p&gt;About the index table&apos;s schema. besides the index columns from the base table, the index table has two more columns (_bucketname string, array(string) offsets )&lt;/p&gt;


&lt;p&gt;//generate the actuall index table&apos;s data (here also support partition)&lt;br/&gt;
update index src_rc_index;&lt;/p&gt;

&lt;p&gt;====How to use the index table====&lt;/p&gt;

&lt;p&gt;//find the offset for &apos;key=0&apos; in the index table, and put the bucketname and offset list in a temp directory&lt;br/&gt;
insert overwrite directory &quot;/tmp/index_result&quot; select `_bucketname` ,  `_offsets` from src_rc_index where key=0;&lt;/p&gt;

&lt;p&gt;set hive.exec.index_file=/tmp/index_result; &lt;/p&gt;

&lt;p&gt;//use a new index file format to prune inputsplit based on the offset list &lt;br/&gt;
//stored in &quot;hive.exec.index_file&quot; which is populated in previous command&lt;br/&gt;
set hive.input.format=org.apache.hadoop.hive.ql.index.io.HiveIndexInputFormat;&lt;/p&gt;

&lt;p&gt;//this query will not scan the whole base data&lt;br/&gt;
select key, value from src_rc where key=0;&lt;/p&gt;


&lt;p&gt;Things done in the patch:&lt;br/&gt;
1) hql command for creating index table&lt;br/&gt;
2) hql command and map-reduce job for updating index (generating the index table&apos;s data). &lt;br/&gt;
3) a HiveIndexInputFormat to leverage the offsets got from index table to reduce number of blocks/map-tasks&lt;/p&gt;

&lt;p&gt;Things need to be done:&lt;br/&gt;
1) right now the index table is manually specified in queries. we need this to be more intelligent by automatically generating the plan using index .&lt;br/&gt;
2) The HiveIndexInputFormat needs a new RecordReader to seek to a given offset instead of scanning the whole block. &lt;br/&gt;
3) right now we use a map-reduce job to scan the whole index table to find hits offsets. But since the index table is sorted, we can leverage the sort property to avoid the map-reduce job in many cases. (easiest way is to do a binary search in client.)&lt;/p&gt;

&lt;p&gt;The first todo is the most important part.  I think the third may need much more work (maybe not true).&lt;/p&gt;

&lt;p&gt;(Note: although this patch has been tested in production cluster, it could still have bugs. We will be really appreciate if you can report bugs you find here.)&lt;/p&gt;</comment>
                            <comment id="12876827" author="he yongqiang" created="Tue, 8 Jun 2010 22:00:40 +0000"  >&lt;p&gt;I forgot to add this line &quot;set hive.exec.compress.output=false;&quot; in the above snippet before selecting from the index table.&lt;/p&gt;</comment>
                            <comment id="12877049" author="prafulla" created="Wed, 9 Jun 2010 11:39:45 +0000"  >&lt;p&gt;I was thinking of adding something called query rewrite module.&lt;br/&gt;
It would be rule-based query rewrite system and it would &lt;br/&gt;
rewrite the query into semantically equivalent query which is &lt;br/&gt;
more optimized and/or uses indexes (not just for scans, but&lt;br/&gt;
for other query operators, e.g. GroupBy etc.)&lt;/p&gt;

&lt;p&gt;Eg.&lt;/p&gt;

&lt;p&gt;select distinct c1&lt;br/&gt;
from t1;&lt;/p&gt;

&lt;p&gt;This query, if we have densed index (&apos;compact summary index&apos; in this&lt;br/&gt;
hive indexing patch) on c1 can be replaced with query on index table &lt;br/&gt;
itself.&lt;/p&gt;

&lt;p&gt;select idx_key&lt;br/&gt;
from t1_cmpct_sum_idx;&lt;/p&gt;

&lt;p&gt;Similar query transformation can happen for other queries.&lt;/p&gt;

&lt;p&gt;Module will be placed just before optimizer and will help optimizer.&lt;br/&gt;
Module structure looks like below.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Query parser&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Query rewrites&amp;#93;&lt;/span&gt; --&amp;gt; new phase&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Query optimization&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Query execution planner&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Query execution engine&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The rewrite module is &apos;generic&apos;, not just for above indexing case,&lt;br/&gt;
but for other cases too, e.g. OR predicates to union (for efficiency?), outer join&lt;br/&gt;
to union of anti &amp;amp; semi joins, moving out &apos;order by&apos; out of union&lt;br/&gt;
subquery etc etc.&lt;/p&gt;

&lt;p&gt;The aim is to implement a very simple, light-weight rewrite support,&lt;br/&gt;
implement the indexing related rewrites (above rewrite does not&lt;br/&gt;
even need a new run-time map-red operator) and integrate indexing&lt;br/&gt;
support quickly and cleanly. As noted above, this rewrite phase&lt;br/&gt;
is rule-based (and not cost-based), sort of early optimization.&lt;/p&gt;

&lt;p&gt;Let me know what u think. I&apos;ll start with reading ur patch.&lt;br/&gt;
This would do most part from TODO 1, &lt;br/&gt;
TODO 2 and 3 will have to be looked into. &lt;/p&gt;</comment>
                            <comment id="12877144" author="he yongqiang" created="Wed, 9 Jun 2010 17:20:11 +0000"  >&lt;p&gt;Plan sounds perfectly good to me!&lt;/p&gt;</comment>
                            <comment id="12877236" author="athusoo" created="Wed, 9 Jun 2010 22:21:31 +0000"  >&lt;p&gt;A couple of comments on this:&lt;/p&gt;

&lt;p&gt;A complication that happens by doing a rewrite just after parse is that you loose the ability to report back errors that correspond to the original query. Also the &lt;br/&gt;
metadata that you need to do the rewrite is only available after phase 1 of semantic analysis. So in my opinion the rewrite should be done after semantic analysis but before plan generation. Is that what you had in mind...&lt;/p&gt;

&lt;p&gt;so something like...&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Query parser&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Query semantic analysis&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Query optimization&amp;#93;&lt;/span&gt;&lt;br/&gt;
...&lt;/p&gt;</comment>
                            <comment id="12877295" author="prafulla" created="Thu, 10 Jun 2010 02:45:17 +0000"  >&lt;p&gt;Yes Ashish,&lt;br/&gt;
Thats what I had in mind.&lt;/p&gt;

&lt;p&gt;Rewrite system would need metadata, and hence it should be invoked &lt;br/&gt;
after semantic analysis phase which would make metadata available.&lt;/p&gt;</comment>
                            <comment id="12880611" author="prafulla" created="Sun, 20 Jun 2010 09:37:50 +0000"  >&lt;p&gt;Hi All,&lt;br/&gt;
Here are first set of changes about query rewrite module in Hive and&lt;br/&gt;
intial rewrite rule to transform groupby and distinct queries so that&lt;br/&gt;
they make use of indexes.&lt;br/&gt;
Note that patch contains createIndex* related changes from Yongqiang&lt;br/&gt;
Here are the files that I have touched for rewrite related changes&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
&amp;#8211; hasIndex and getIndex related APIs&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/parse/QB.java&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/parse/QBParseInfo.java&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/rewrite/HiveRewriteEngine.java&lt;br/&gt;
&amp;#8211; Rewrite engine infrastructure&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/rewrite/rules/GbToCompactSumIdxRewrite.java&lt;br/&gt;
&amp;#8211; Actual rewrite rule which does above mentioned optimization&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/rewrite/rules/HiveRwRule.java&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/rewrite/rules/HiveRwRuleContext.java&lt;br/&gt;
ql/src/test/queries/clientpositive/ql_rewrite_gbtoidx.q&lt;br/&gt;
&amp;#8211; Unit test including various queries.&lt;br/&gt;
ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out&lt;/p&gt;

&lt;p&gt;I&apos;ve tested some queries end-to-end with this GbToIdx rewrite rule on.&lt;br/&gt;
It is working well.&lt;/p&gt;

&lt;p&gt;Rewrite changes can be disabled with hive.ql.rewrite boolean flag &lt;br/&gt;
and this perticular rewrite can be disabled/enabled based on &lt;br/&gt;
hive.ql.rewrite.gbtoidx boolean flag.&lt;br/&gt;
Default value for hive.ql.rewrite is true&lt;br/&gt;
and that for hive.ql.rewrite.gbtoidx is false.&lt;/p&gt;

&lt;p&gt;There are currently following limitations (which are being worked upon)&lt;br/&gt;
1. Rewrite engine does not invoke rewrite in recursive manner.&lt;br/&gt;
   It currently just rewrites topLevel QB.&lt;br/&gt;
2. GbToIdx rewrite is disabled for all queries having &quot;where clause&quot; , we&lt;br/&gt;
   can support certain &quot;where clauses&quot; in which all colrefs are index key &lt;br/&gt;
   columns.&lt;br/&gt;
3. We need some API to know if indexes are up-to-date or not. We need to&lt;br/&gt;
   do this rewrite only when index has up-to-date data.&lt;/p&gt;

&lt;p&gt;Let me know your review comments.&lt;br/&gt;
I am using fork of apache-git repository for development on github.&lt;br/&gt;
All these changes are also available on &lt;a href=&quot;http://github.com/prafullat/hive&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/prafullat/hive&lt;/a&gt;   &lt;/p&gt;</comment>
                            <comment id="12884067" author="namit" created="Wed, 30 Jun 2010 21:27:57 +0000"  >&lt;p&gt;Looking at the patch (not yet in detail) seems to suggest the following:&lt;/p&gt;

&lt;p&gt;1. The index file can only be a text file.&lt;br/&gt;
2. PROJECTION index is not used - I mean, to start, can we just get the basic COMPACT+SUMMARY and only support that.&lt;/p&gt;</comment>
                            <comment id="12884110" author="namit" created="Thu, 1 Jul 2010 00:51:45 +0000"  >&lt;p&gt;DDLSemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;    if (outputFormat == null) &lt;/p&gt;
{
      outputFormat = RCFileOutputFormat.class;
    }


&lt;p&gt;use the default - dont hardcode.&lt;/p&gt;</comment>
                            <comment id="12884404" author="namit" created="Thu, 1 Jul 2010 20:24:52 +0000"  >&lt;p&gt;Few higher level comments:&lt;/p&gt;

&lt;p&gt;1. Populate the index at create index.&lt;br/&gt;
2. Instead of proposing a new syntax, why dont we use &apos;alter index &amp;lt;INDEX_NAME&amp;gt; ON &amp;lt;TABLE_NAME&amp;gt; REBUILD;&lt;br/&gt;
3. Since the code is in a prototype stage, can we move the index code to contrib ?&lt;/p&gt;</comment>
                            <comment id="12884418" author="he yongqiang" created="Thu, 1 Jul 2010 20:56:07 +0000"  >&lt;p&gt;1. Populate the index at create index.&lt;br/&gt;
Let&apos;s do this in a followup jira.&lt;/p&gt;

&lt;p&gt;3. Since the code is in a prototype stage, can we move the index code to contrib ?&lt;br/&gt;
Move to contrib is not good. In future we need to plug index automatically to the query.&lt;/p&gt;</comment>
                            <comment id="12884431" author="hammer" created="Thu, 1 Jul 2010 21:31:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;3. Since the code is in a prototype stage, can we move the index code to contrib ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s been the experience of other Hadoop-related projects that contrib gets messy. It has proven effective to either keep experimental features in mainline trunk or to put them up on github.&lt;/p&gt;</comment>
                            <comment id="12884434" author="namit" created="Thu, 1 Jul 2010 21:37:17 +0000"  >&lt;p&gt;        if (work.getReducer() != null) &lt;/p&gt;
{
          work.getReducer().jobClose(job, success, feedBack);
        }

&lt;p&gt;        if (IndexBuilderBaseReducer.class.isAssignableFrom(this&lt;br/&gt;
            .getReducerClass())) &lt;/p&gt;
{
          this.closeIndexBuilder(job, success);
        }
&lt;p&gt;      }&lt;/p&gt;


&lt;p&gt;Instead of the above code in ExecDriver,  IndexBuilderBaseReducer/CompactSumReducer should have a jobClose - no code&lt;br/&gt;
change needed in ExecDriver.&lt;/p&gt;

&lt;p&gt;I would still vote for the index code to be in contrib, it will take some time to clean it up - then it should be moved to the mainline.&lt;br/&gt;
Till then, it is usable, but in a prototype state.&lt;/p&gt;

&lt;p&gt;What we should aim for is minimum changes in ql/. and put all changes in contrib for now. As they become stable, we can pull them&lt;br/&gt;
in - even the DDLSemanticAnalyzer should be factored in contrib&lt;/p&gt;</comment>
                            <comment id="12884685" author="athusoo" created="Fri, 2 Jul 2010 14:20:14 +0000"  >&lt;p&gt;Looked at the code and have some questions...&lt;/p&gt;

&lt;p&gt;Can you explain how the metastore object model is laid out. It seems that the table names of the index are stored in key value properties of the table that the index is created on. Is that correct? Would it be better to put a key reference from the index table to the base table instead (similar to what is done for partitions)?&lt;/p&gt;

&lt;p&gt;Also, how would this be used to query the table? Can you give an example?&lt;/p&gt;

&lt;p&gt;Is the idea here to select from the index an then pass the offsets to another query to look up the table? An example or a test which shows the query on the base table would be useful.&lt;/p&gt;</comment>
                            <comment id="12884869" author="jvs" created="Sat, 3 Jul 2010 00:24:38 +0000"  >&lt;p&gt;Had a chat with Ashish and Yongqiang offline, and came up with three alternatives.&lt;/p&gt;

&lt;p&gt;1)  &quot;Shortest path to checkin&quot;:  Treat current code as prototype and move it into contrib, providing a utility for creating/updating the index, and keeping changes to core classes to a minimum.  As Yongqiang pointed out, this makes it harder to follow up with automatic use of the index due to the lack of metadata.  If we do this, we should create a new JIRA issue for its limited scope.&lt;/p&gt;

&lt;p&gt;2) &quot;Full-fledged index support&quot;:  change the JDO metamodel to add support for indexes as first class objects, and come up with a pluggable index creation+access design framework which can encompass a variety of index types likely to be needed in the future.  Code from this patch would become the first such index implementation provided.  If we do this, we should continue on in this truly epic JIRA issue.&lt;/p&gt;

&lt;p&gt;3) &quot;Rework as materialized view&quot;:  keep the JDO metamodel as is (adding a new table type for MATERIALIZED_VIEW) but change the DDL to CREATE MATERIALIZED VIEW AS SELECT ... and then come up with the system functions needed (e.g. for accessing file offsets) in order to be able to express the index construction as SQL.  We would then execute view materialization in a fashion similar to CREATE TABLE AS SELECT.  This approach best reflects the way the current code models an index as an ordinary table, but requires some other changes (e.g. CTAS + dynamic partitioning, something we want anyway).  If we do this, we should create a new JIRA issue since it&apos;s a different feature from the user POV.&lt;/p&gt;

&lt;p&gt;We&apos;re aiming to reach a decision next week; input is welcome on whether these alternatives make sense (and on others we should consider).&lt;/p&gt;

&lt;p&gt;Since this JIRA issue is already so overloaded, we would also like to treat the following two items as separate followup JIRA issues rather than trying to address it all at once:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rewrite framework&lt;/li&gt;
	&lt;li&gt;automatic usage of index or materialized view by optimizer&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12886308" author="prafulla" created="Thu, 8 Jul 2010 11:54:05 +0000"  >&lt;p&gt;Hi Yongqiang,&lt;br/&gt;
I am facing some problem for creating SUMMARY indexes.&lt;br/&gt;
This index is not built with update index command.&lt;br/&gt;
COMPACT SUMMARY index works fine. Is there any problem with&lt;br/&gt;
creation of SUMMARY index table ?&lt;/p&gt;</comment>
                            <comment id="12886380" author="he yongqiang" created="Thu, 8 Jul 2010 17:25:31 +0000"  >&lt;p&gt;I think SUMMARY index&apos;s mapper code is comment out in the uploaded patch.&lt;/p&gt;</comment>
                            <comment id="12886587" author="jvs" created="Fri, 9 Jul 2010 02:12:47 +0000"  >&lt;p&gt;Based on discussion with Yongqiang, we&apos;ve decided to go for &quot;Full-fledged index support&quot;.&lt;/p&gt;</comment>
                            <comment id="12886634" author="hammer" created="Fri, 9 Jul 2010 06:31:27 +0000"  >&lt;p&gt;Hey,&lt;/p&gt;

&lt;p&gt;Any chance you guys could post a more detailed design document for &quot;full-fledged index support&quot;? I&apos;m quite curious to read up on it.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12886764" author="jvs" created="Fri, 9 Jul 2010 16:36:52 +0000"  >&lt;p&gt;@Jeff:  Yes, we&apos;ll put it up on the wiki, similar to how we did for storage handler + HBase.&lt;/p&gt;</comment>
                            <comment id="12888089" author="he yongqiang" created="Tue, 13 Jul 2010 23:09:50 +0000"  >&lt;p&gt;Attache a new patch for review. Added metastore remodeling based on offline discussion with John and Paul.&lt;/p&gt;

&lt;p&gt;Also addressed namit&apos;s suggestions: &quot;Instead of proposing a new syntax, why dont we use &apos;alter index &amp;lt;INDEX_NAME&amp;gt; ON &amp;lt;TABLE_NAME&amp;gt; REBUILD;&quot;&lt;/p&gt;

&lt;p&gt;@Ashish,&lt;br/&gt;
&amp;gt;&amp;gt;Also, how would this be used to query the table? Can you give an example?&lt;/p&gt;

&lt;p&gt;Added four test files in clientpositive. You can now refer thoee files for examples.&lt;/p&gt;

&lt;p&gt;An example from one qfile:&lt;br/&gt;
CREATE INDEX srcpart_index_proj TYPE COMPACT ON TABLE srcpart(key);&lt;br/&gt;
ALTER INDEX srcpart_index_proj ON srcpart REBUILD;&lt;/p&gt;

&lt;p&gt;SET hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;&lt;br/&gt;
INSERT OVERWRITE DIRECTORY &quot;/tmp/index_test_index_result&quot; SELECT `&lt;em&gt;bucketname` ,  `_offsets` FROM default&lt;/em&gt;&lt;em&gt;srcpart_srcpart_index_proj&lt;/em&gt;_ x WHERE x.key=100 AND x.ds = &apos;2008-04-08&apos;;&lt;br/&gt;
SET hive.exec.index_file=/tmp/index_test_index_result;&lt;br/&gt;
SET hive.input.format=org.apache.hadoop.hive.ql.index.io.HiveIndexInputFormat;&lt;br/&gt;
SELECT key, value FROM srcpart WHERE key=100 AND ds = &apos;2008-04-08&apos;;&lt;/p&gt;

&lt;p&gt;Will update the patch and open follow up jiras after get more comments. &lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Yongqiang&lt;/p&gt;</comment>
                            <comment id="12888945" author="jvs" created="Thu, 15 Jul 2010 22:47:59 +0000"  >&lt;p&gt;Attaching metastore data model diagram reverse-engineered from Yongqiang&apos;s latest patch (using Power Architect); can be used in a design doc.  Cosmetic:  I renamed INDEXS to IDXS for consistency with TBLS, likewise for IDX_ID and other attributes.&lt;/p&gt;

&lt;p&gt;I marked one of the relationships between index and table as optional since we want to allow for indexes which don&apos;t store their data structure in tabular form.  I&apos;m not sure whether there&apos;s something we need to do in package.jdo to make sure the corresponding key is nullable.&lt;/p&gt;</comment>
                            <comment id="12888946" author="jvs" created="Thu, 15 Jul 2010 22:51:12 +0000"  >&lt;p&gt;Whoops, relationships connecting TBLS/SDS and IDXS/SDS got lost; will attach another diagram which fixes that.&lt;/p&gt;</comment>
                            <comment id="12888948" author="jvs" created="Thu, 15 Jul 2010 23:05:48 +0000"  >&lt;p&gt;idx2.png&lt;/p&gt;</comment>
                            <comment id="12889345" author="jvs" created="Fri, 16 Jul 2010 21:45:42 +0000"  >&lt;p&gt;Here are some preliminary comments on the metastore work.  We can move on to the plugin design next week and start getting all of this into a doc.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;We should support a property on the index which controls the name of the index table, and only generate an index table name automatically in the case where the user doesn&apos;t supply the property.  For this, we&apos;ll need to add property key/values to the grammar (IDXPROPERTIES like TBLPROPERTIES and SERDEPROPERTIES?).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The grammar supports control over the tableFileFormat for the index table; what about other attributes such as row format, location, and TBLPROPERTIES?  Some of these may be dictated by the index implementation, but it may be useful to override in some cases (same as tableFileFormat).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Is the partitioning for the index independent of the partitioning for the table?  Don&apos;t we need to allow control over this in the grammar?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I think we should track the status of the index (when was the last time it was rebuilt, if ever) so that we know whether it is fresh with respect to the base table data.  How should we model this in such a way that it takes per-partition indexing into account?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Some metastore followups to be logged separately:  COMMENT clause on index definition; DESCRIBE INDEX; SHOW INDEXES; dealing with base table columns being dropped/renamed out from under the index&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;For generating the index table structure, we&apos;ll need to move that to plugin (rather than in Hive.java), since each index will need a different table structure (or no table structure at all).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Test queries:  remember to add ORDER BY for determinism.  Also, I&apos;m not sure whether it is safe to use /tmp in the local file system (it may not exist, e.g. on Windows).  I used it in hbase_bulk.m, but that uses a mini HDFS cluster (not the local file system).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Dropping a table with an index on it currently gives the exception below (in Derby; I didn&apos;t test MySQL yet).  Same for attempting to drop an index table directly (instead of dropping the index).  The second case should either fail with a meaningful exception, or implicitly drop the index definition as a trigger from dropping the table.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;hive&amp;gt; create table t1(i int);&lt;br/&gt;
OK&lt;br/&gt;
hive&amp;gt; create index q type compact on table t1&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
OK&lt;br/&gt;
hive&amp;gt; drop table t1;&lt;br/&gt;
FAILED: Error in metadata: javax.jdo.JDODataStoreException: Exception thrown flushing changes to datastore&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.BatchUpdateException: DELETE on table &apos;TBLS&apos; caused a violation of foreign key constraint &apos;INDEXS_FK3&apos; for key (12).  The statement has been rolled back.&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;

&lt;p&gt;hive&amp;gt; create table t5(i int);&lt;br/&gt;
OK&lt;br/&gt;
hive&amp;gt; create index r type compact on table t5&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
OK&lt;br/&gt;
hive&amp;gt; drop table default_&lt;em&gt;t5_r&lt;/em&gt;_;&lt;br/&gt;
FAILED: Error in metadata: javax.jdo.JDODataStoreException: Exception thrown flushing changes to datastore&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.BatchUpdateException: DELETE on table &apos;TBLS&apos; caused a violation of foreign key constraint &apos;INDEXS_FK2&apos; for key (17).  The statement has been rolled back.&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;</comment>
                            <comment id="12889376" author="he yongqiang" created="Fri, 16 Jul 2010 22:44:15 +0000"  >&lt;p&gt;THANKS FOR THE DETAILED COMMENTS.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;We should support a property on the index which controls the name of the index table, and only generate an index table name automatically in the case where the user doesn&apos;t supply the property. &lt;br/&gt;
will add this in the following patch.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;For this, we&apos;ll need to add property key/values to the grammar (IDXPROPERTIES like TBLPROPERTIES and SERDEPROPERTIES?).&lt;br/&gt;
Let&apos;s do it in a followup jira.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;The grammar supports control over the tableFileFormat for the index table; what about other attributes such as row format, location, and TBLPROPERTIES? Some of these may be dictated by the index implementation, but it may be useful to override in some cases (same as tableFileFormat).&lt;br/&gt;
We can add this when we see the requirement. For now we can leave this out.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;I think we should track the status of the index (when was the last time it was rebuilt, if ever) so that we know whether it is fresh with respect to the base table data. How should we model this in such a way that it takes per-partition indexing into account?&lt;br/&gt;
I think it&apos;s the same as the one of key/value property. no?&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;Test queries: remember to add ORDER BY for determinism. &lt;br/&gt;
will add this in the following patch.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;Also, I&apos;m not sure whether it is safe to use /tmp in the local file system (it may not exist, e.g. on Windows). I used it in hbase_bulk.m, but that uses a mini HDFS cluster (not the local file system).&lt;br/&gt;
I think it&apos;s should be ok because it&apos;s not local tmp. it&apos;s mini HDFS /tmp&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;Dropping a table with an index on it currently gives the exception below (in Derby; I didn&apos;t test MySQL yet). Same for attempting to drop an index table directly (instead of dropping the index). The second case should either fail with a meaningful exception, or implicitly drop the index definition as a trigger from dropping the table.&lt;br/&gt;
Actually this is reported by Prafulla offline. Will add this in the following patch. For the second case, i am planning to report error.&lt;/p&gt;</comment>
                            <comment id="12890137" author="jvs" created="Tue, 20 Jul 2010 02:34:03 +0000"  >&lt;p&gt;Preliminary draft of design doc is here&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/IndexDev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/IndexDev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Yongqiang and I are still working out some of the details.&lt;/p&gt;</comment>
                            <comment id="12891274" author="nzhang" created="Thu, 22 Jul 2010 18:34:32 +0000"  >&lt;p&gt;Based on some internal discussions below are some comments about the design doc:&lt;/p&gt;

&lt;p&gt;1) the staleness (inconsistency) between the index and the base table should be addressed more precisely. &lt;br/&gt;
   Since the current implementation allows the user to query the index table directly, we should guarantee that the index is consistent with the base table at the query time. This means at the query START time, the index was built completely based on the data stored in the base table. The current design does not satisfy this criteria in that it only record the last_modification_time (LMT) of the base table and the index table, and check if the latter is larger than the former. This leaves the following example break:&lt;/p&gt;

&lt;p&gt;timestamp0: last update of partition P1&lt;br/&gt;
timestamp1: start create index on partition P1&lt;br/&gt;
timestamp2: start insert overwrite P1&lt;br/&gt;
timestamp3: finish insert overwrite P1&lt;br/&gt;
timestamp4: finish index creation on P1&lt;br/&gt;
timestamp 5: query on P1&lt;/p&gt;

&lt;p&gt;The LMTs of the index and the base table are timestamp4 and timestamp3 respectively so the optimizer will conclude the index is consistent with base table. However, the index was built based on stale data at the timestamp5. So the index should not be used. &lt;/p&gt;

&lt;p&gt;Instead of recording the LMT of the index table, we probably should record the LMT of the base table in the index metadata at the beginning of the index creation.  In the above example, the timestamp recorded in the index metadata should be timestamp0. This means the index was created based on the base table at timestamp0. At the query time, we should check timestamp0 against timestamp 3, which correctly conclude the index is stale. &lt;/p&gt;

&lt;p&gt;BTW, all the timestamp should be coming from some centralized clock such as the DFS directory update time (from the namenode).&lt;/p&gt;

&lt;p&gt;2) The above consistency problem does not only present in the case of &quot;DEFERRED REBUILD&quot;. Even if the index rebuild starts right away after INSERT OVERWRITE, there is still a time window that the index is stale (before the index creation is complete). So we need the same mechanism to figure out stale indexes. &lt;/p&gt;

&lt;p&gt;3) I think a lock-based concurrency may not be the best choice as well. If the index creation takes a long time, it defers the availability of the base table. If we have the optimizer, we should always query against the base tables, and let the optimizer to figure out whether an index is available and fresh. So if an index creation is not finished, we can just use the base table, otherwise we can use the index if the cost is less expensive. &lt;/p&gt;

&lt;p&gt;4) Another case is that if the index creation finished and the query is using the index, and then an DML happened on the base table and finished before the query finish. Here we only guarantee snapshot consistency (results consisting with the data at the beginning of the query, not after the query). &lt;/p&gt;

&lt;p&gt;5) If we have the mechanism to check consistency of the index, then the &quot;index rebuild&quot; command could just return if the index is consistent. We can also allow a &quot;force&quot; option in case we need to compensate for bad metadata. &lt;/p&gt;</comment>
                            <comment id="12892183" author="he yongqiang" created="Mon, 26 Jul 2010 05:42:34 +0000"  >&lt;p&gt;Attach a new diff for review.&lt;/p&gt;

&lt;p&gt;Update:&lt;br/&gt;
Based on some offline discussions, this patch takes a virtual column approach to build index.&lt;br/&gt;
Added 2 virtual columns in this patch, one is input filename, and the other is file-wise block_offset.&lt;br/&gt;
An example of querying virtual columns:&lt;br/&gt;
select INPUT_&lt;em&gt;FILE&lt;/em&gt;&lt;em&gt;NAME, key, BLOCK&lt;/em&gt;&lt;em&gt;OFFSET&lt;/em&gt;&lt;em&gt;INSIDE&lt;/em&gt;_FILE from src;&lt;/p&gt;
</comment>
                            <comment id="12892413" author="jvs" created="Mon, 26 Jul 2010 19:00:04 +0000"  >&lt;p&gt;Yongqiang, I looked at hive.indexing.10.patch, but I don&apos;t see the virtual columns in there?&lt;/p&gt;</comment>
                            <comment id="12892430" author="jvs" created="Mon, 26 Jul 2010 19:40:09 +0000"  >&lt;p&gt;Metastore upgrade scripts will  need to be added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1427&quot; title=&quot;Provide metastore schema migration scripts (0.5 -&amp;gt; 0.6)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1427&quot;&gt;&lt;del&gt;HIVE-1427&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12892492" author="he yongqiang" created="Mon, 26 Jul 2010 21:55:35 +0000"  >&lt;p&gt;Sorry, hive.indexing.10.patch was created from a wrong workspace.&lt;br/&gt;
Attached a new diff. &lt;/p&gt;</comment>
                            <comment id="12892594" author="jvs" created="Tue, 27 Jul 2010 01:18:17 +0000"  >&lt;p&gt;First pass of review comments on latest patch (I&apos;ll probably have more tomorrow).&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;INDEX_NAME precision in the metastore should be 128 characters (not 767), following convention for other identifiers&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I don&apos;t think we need INDEX_TABLE_NAME at all in the metastore; it should only be used during CREATE INDEX and then forgotten&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Move HiveIndexInputFormat and HiveIndexResult to package org.apache.hadoop.hive.ql.index.compact, and add Compact in their names (I&apos;d still prefer to move this entire package out to a new subproj, but I guess we can skip that part now since most of the code went away with the virtual column approach); rename property hive.exec.index_file to hive.index.compact.file&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Support WITH DEFERRED REBUILD, and require this to be specified for now to avoid confusion (per discussion in design meeting)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;when generating reentrant INSERT, need to quote identifiers such as table/column names (use HiveUtils.unparseIdentifier), and may need extra escaping for special characters in getPartKVPairStringArray (I&apos;m not sure--check with Paul)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;thread_local should be private (and named threadLocal); go through public IOContext.get() instead; likewise use public getter/setter methods on IOContext instead of accessing its data members directly&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;need ORDER BY in virtual_column.q&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;remove extra semicolon in other ORDER BY&apos;s, and make sure they cover a unique key in all cases&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;don&apos;t need TYPE and UPDATE as keywords in grammar&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12892613" author="jvs" created="Tue, 27 Jul 2010 02:24:38 +0000"  >&lt;p&gt;Whoops, forgot two leftover from a private diff review:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;metastore/if/hive_metastore.thrift:102 instead of including the full indexTable structure inside the Index structure, can we omit it but then pass it as an additional parameter to add_index?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java:86 Move generic partition analysis out into Hive, since it will be the same for all plugins.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We can talk more about these tomorrow if it&apos;s not clear.&lt;/p&gt;</comment>
                            <comment id="12892865" author="jvs" created="Tue, 27 Jul 2010 17:37:44 +0000"  >&lt;p&gt;Regarding the mkset function:  can we rename this to collect_array to hint that it is a UDAF?  The @Description should also make this clear.&lt;/p&gt;

&lt;p&gt;Collect is the standard SQL name for this aggregate function, but the standard version returns a multiset rather than an array, so let&apos;s call it collect_array to be specific.&lt;/p&gt;

&lt;p&gt;Also, it will need its own independent unit tests (open a followup JIRA issue for this).&lt;/p&gt;</comment>
                            <comment id="12892932" author="athusoo" created="Tue, 27 Jul 2010 21:22:05 +0000"  >&lt;p&gt;Started looking at this. One initial question I had - why is virtualcolumn class in the serde2 package?&lt;/p&gt;</comment>
                            <comment id="12892937" author="jvs" created="Tue, 27 Jul 2010 21:29:49 +0000"  >&lt;p&gt;Another followup needed:  REBUILD should be propagating lineage and read/write info from the reentrant INSERT statement up to the top-level statement so that hooks get called with the right information.&lt;/p&gt;</comment>
                            <comment id="12892939" author="athusoo" created="Tue, 27 Jul 2010 21:30:45 +0000"  >&lt;p&gt;Also, how is the file name populated? That is not done through the IOContext?&lt;/p&gt;</comment>
                            <comment id="12892946" author="he yongqiang" created="Tue, 27 Jul 2010 21:46:19 +0000"  >&lt;p&gt;@Ashish&lt;br/&gt;
&amp;gt;&amp;gt;why is virtualcolumn class in the serde2 package?&lt;br/&gt;
will put it to ql.io package. I put it to serde2 package just because i thought it maybe needed by the serde layer. Since all codes are almost done and it is not accessed by serde, &lt;br/&gt;
it makes sense to move it to ql.&lt;br/&gt;
&amp;gt;&amp;gt;how is the file name populated&lt;br/&gt;
filename and block offset are all populated by record reader. filename is populated by looking at the split path when we construct the record reader. Offset is generated at runtime by record reader.&lt;/p&gt;</comment>
                            <comment id="12892947" author="he yongqiang" created="Tue, 27 Jul 2010 21:47:53 +0000"  >&lt;p&gt;IOContext is just a container, HiveContextAwareRecordReader is responsible for filling it with actual values.&lt;/p&gt;</comment>
                            <comment id="12893026" author="he yongqiang" created="Wed, 28 Jul 2010 01:24:12 +0000"  >&lt;p&gt;A new patch integrates comments from John and Ashish. Thanks!&lt;/p&gt;</comment>
                            <comment id="12893333" author="jvs" created="Wed, 28 Jul 2010 19:49:43 +0000"  >&lt;p&gt;Thanks Yongqiang.  Looking at it now.&lt;/p&gt;</comment>
                            <comment id="12893402" author="jvs" created="Wed, 28 Jul 2010 22:35:22 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.  I noticed a number of trivial issues (like Javadoc mismatches) which I&apos;ll put in a followup.&lt;/p&gt;</comment>
                            <comment id="12893455" author="jsensarma" created="Thu, 29 Jul 2010 00:52:40 +0000"  >&lt;p&gt;i am waiting for a commit on hive-1408. that&apos;s probably gonna collide.&lt;/p&gt;</comment>
                            <comment id="12893461" author="jvs" created="Thu, 29 Jul 2010 01:02:43 +0000"  >&lt;p&gt;Thanks Joydeep.  Yeah, this one has tons of plan diffs due to the virtual columns.&lt;/p&gt;</comment>
                            <comment id="12893488" author="jvs" created="Thu, 29 Jul 2010 03:45:57 +0000"  >&lt;p&gt;Yongqiang, I passed tests on Hadoop 0.20, but Ning has committed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1408&quot; title=&quot;add option to let hive automatically run in local mode based on tunable heuristics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1408&quot;&gt;&lt;del&gt;HIVE-1408&lt;/del&gt;&lt;/a&gt;, which conflicts, so you&apos;ll need to rebase against that and then I&apos;ll try again.&lt;/p&gt;</comment>
                            <comment id="12893522" author="jvs" created="Thu, 29 Jul 2010 06:06:49 +0000"  >&lt;p&gt;Since another patch is needed, here are the review comments I mentioned above.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Javadoc for Hive.createIndex needs parameters fixed&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Javadoc for HiveIndexHandler.analyzeIndexDefinition:  remove storageDesc]&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;In HiveUtils.getIndexHandler:  the message should be &quot;Error in loading index handler&quot; rather than &quot;Error in loading storage handler&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;GenericUDAFCollectSet @Description :  &quot;with no duplication elements&quot; should be &quot;with duplicate elements eliminated&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;DDLSemanticAnalyzer.analyzeCreateIndex:  hanlder is misspelled&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Property AbstractIndexHandler.INDEX_COLS_KEY is never used; get rid of it?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;For HiveIndex.INDEX_TABLE_CREATETIME property name, spell out &quot;lastModifiedTime&quot; instead of &quot;lmt&quot;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12893886" author="he yongqiang" created="Fri, 30 Jul 2010 00:51:08 +0000"  >&lt;p&gt;a new patch against trunk&lt;/p&gt;</comment>
                            <comment id="12893890" author="jvs" created="Fri, 30 Jul 2010 01:05:17 +0000"  >&lt;p&gt;OK, testing lucky patch 13...&lt;/p&gt;</comment>
                            <comment id="12893947" author="jvs" created="Fri, 30 Jul 2010 06:42:14 +0000"  >&lt;p&gt;Committed.  Thanks Yongqiang!&lt;/p&gt;</comment>
                            <comment id="12894221" author="he yongqiang" created="Sat, 31 Jul 2010 00:31:51 +0000"  >&lt;p&gt;For mysql metastore upgrade, please refer to&lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/IndexDev#Metastore_Upgrades&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/IndexDev#Metastore_Upgrades&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12435865">HIVE-837</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12480471">HIVE-1803</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12495102">HIVE-1904</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12470567">HIVE-1501</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12412420">CHUKWA-22</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12476655">HIVE-1694</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12494780">HIVE-1889</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470561">HIVE-1496</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470565">HIVE-1499</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470566">HIVE-1500</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470568">HIVE-1502</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470569">HIVE-1503</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470560">HIVE-1495</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470562">HIVE-1497</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470563">HIVE-1498</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12408864" name="hive-417.proto.patch" size="39673" author="prasadc" created="Sat, 23 May 2009 02:23:12 +0000"/>
                            <attachment id="12413928" name="hive-417&#65293;2009-07-18.patch" size="164104" author="he yongqiang" created="Sat, 18 Jul 2009 13:33:13 +0000"/>
                            <attachment id="12449399" name="hive-indexing-8-thrift-metastore-remodel.patch" size="1340853" author="he yongqiang" created="Tue, 13 Jul 2010 23:09:49 +0000"/>
                            <attachment id="12446629" name="hive-indexing.3.patch" size="153046" author="he yongqiang" created="Tue, 8 Jun 2010 21:48:26 +0000"/>
                            <attachment id="12448438" name="hive-indexing.5.thrift.patch" size="199587" author="he yongqiang" created="Wed, 30 Jun 2010 18:57:09 +0000"/>
                            <attachment id="12450528" name="hive.indexing.11.patch" size="1404551" author="he yongqiang" created="Mon, 26 Jul 2010 21:55:34 +0000"/>
                            <attachment id="12450657" name="hive.indexing.12.patch" size="2911488" author="he yongqiang" created="Wed, 28 Jul 2010 01:24:11 +0000"/>
                            <attachment id="12450877" name="hive.indexing.13.patch" size="2910138" author="he yongqiang" created="Fri, 30 Jul 2010 00:51:07 +0000"/>
                            <attachment id="12449601" name="idx2.png" size="172212" author="jvs" created="Thu, 15 Jul 2010 23:05:48 +0000"/>
                            <attachment id="12447554" name="indexing_with_ql_rewrites_trunk_953221.patch" size="195487" author="prafulla" created="Sun, 20 Jun 2010 09:37:50 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12431219">HIVE-678</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Apr 2009 16:12:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>71329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i010h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Index support requires metastore schema upgrade (TBD).</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-418] Partition related tests are failing</title>
                <link>https://issues.apache.org/jira/browse/HIVE-418</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;On the Hadoop 0.18 and 0.19 builds in Hudson these two tests fail:&lt;/p&gt;

&lt;p&gt;TestCliDriver.testCliDriver_input_part5&lt;br/&gt;
TestCliDriver.testCliDriver_rand_partitionpruner2&lt;/p&gt;

&lt;p&gt;See:&lt;br/&gt;
&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.18/lastBuild/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.18/lastBuild/testReport/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422900">HIVE-418</key>
            <summary>Partition related tests are failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 16:23:38 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:54 +0000</updated>
                            <resolved>Wed, 6 May 2009 13:27:04 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12702170" author="namit" created="Fri, 24 Apr 2009 00:14:16 +0000"  >&lt;p&gt;These tests also need to be modified to make the output deterministic&lt;/p&gt;</comment>
                            <comment id="12702191" author="athusoo" created="Fri, 24 Apr 2009 01:17:40 +0000"  >&lt;p&gt;Not sure what is wrong here. The output order seems to be fine.&lt;/p&gt;</comment>
                            <comment id="12706422" author="johanoskarsson" created="Wed, 6 May 2009 13:27:04 +0000"  >&lt;p&gt;Closing this, seems to be related to the Hudson machine somehow and not the test, everyone I&apos;ve asked to run this have had no problems with the test.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Apr 2009 00:14:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122220</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-419] Rename HDFS directories when a table is renamed.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-419</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;As the title says. Applies only to internal (or native) tables.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422908">HIVE-419</key>
            <summary>Rename HDFS directories when a table is renamed.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 17:08:17 +0000</created>
                <updated>Fri, 29 Oct 2010 22:59:23 +0000</updated>
                            <resolved>Thu, 17 Dec 2009 23:39:50 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.6.0</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12699283" author="prasadc" created="Wed, 15 Apr 2009 17:10:46 +0000"  >&lt;p&gt;tab1 &amp;#8211; data location &amp;#8211; &amp;lt;warehouse_dir&amp;gt;/tab1&lt;br/&gt;
after renaming tab1 to tab2&lt;br/&gt;
tab2 &amp;#8211; data location &amp;#8211; &amp;lt;warehouse_dir&amp;gt;/tab1 &amp;lt;-- location doesn&apos;t change&lt;/p&gt;

&lt;p&gt;create a new table tab1 &amp;#8211; now tab1 contains old data (or create fails ???)&lt;/p&gt;

&lt;p&gt;This is currently undefined behavior and the solution is to rename tab2 location when a table is renamed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12429128">HIVE-592</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73545</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122221</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-420] Support regular expressions for column in select clause</title>
                <link>https://issues.apache.org/jira/browse/HIVE-420</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;support queries like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; select a.`(ds|hr)?+.+` from a where a.ds=&lt;span class=&quot;code-quote&quot;&gt;&apos;2009-09-09&apos;&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;  which are useful when there are humongous number of columns in a table and want to select all columns except the partition columns (ds and hr).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422910">HIVE-420</key>
            <summary>Support regular expressions for column in select clause</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 17:21:33 +0000</created>
                <updated>Wed, 6 Aug 2014 17:40:00 +0000</updated>
                            <resolved>Fri, 1 May 2009 22:06:47 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12699296" author="athusoo" created="Wed, 15 Apr 2009 18:02:36 +0000"  >&lt;p&gt;Not a bad idea. Somewhat non SQL but a useful something that the data scientists at FB have been clamoring for...&lt;/p&gt;</comment>
                            <comment id="12704565" author="zshao" created="Thu, 30 Apr 2009 10:38:40 +0000"  >&lt;p&gt;With Java regex library we can easily support exclusion of several columns:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;(ds|hr)?+.+&quot;&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; will match all columns except ds and hr.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;(dsa|ds)?+.+&quot;&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; will match all columns except ds and dsa. Note that &quot;dsa&quot; has to come before &quot;ds&quot; otherwise it won&apos;t work as expected - basically if there exists s and t, and s is a prefix of t, then t has to come before s.&lt;/p&gt;

&lt;p&gt;When the user is specifying column names, they should not need to specify &quot;^&quot; and &quot;$&quot; and we should assume the regex matches the whole string.&lt;/p&gt;


&lt;p&gt;Use &lt;a href=&quot;http://www.fileformat.info/tool/regex.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.fileformat.info/tool/regex.htm&lt;/a&gt; for testing the above examples.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;(ds|hr)?+.+&quot;&lt;/span&gt; 
Try these:
ds
hr
d
h
s
r
ads
dsa
ahr
hra
dsds
dshr
hrds
hrhr
abc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12704795" author="zshao" created="Thu, 30 Apr 2009 20:55:10 +0000"  >&lt;p&gt;Regex for everything except strings starting with &quot;ab&quot;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;(ab.*)?+.+&quot;&lt;/span&gt;
a
b
ab
abc
abcd
cab
abc
aab
baba
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12704924" author="zshao" created="Fri, 1 May 2009 08:44:39 +0000"  >&lt;p&gt;This patch contains &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-466&quot; title=&quot;Fix queries like &amp;quot;SELECT t.*, t.a&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-466&quot;&gt;&lt;del&gt;HIVE-466&lt;/del&gt;&lt;/a&gt;.1.patch since that&apos;s not committed yet.&lt;br/&gt;
It added the capability of specifying columns using regex.&lt;/p&gt;</comment>
                            <comment id="12704937" author="zshao" created="Fri, 1 May 2009 09:41:15 +0000"  >&lt;p&gt;Fixed some test errors. We do not allow the use of regex columns in GROUP BY queries.&lt;/p&gt;</comment>
                            <comment id="12704938" author="zshao" created="Fri, 1 May 2009 09:48:58 +0000"  >&lt;p&gt;Fixed another bug: in the last patch, normal columns names are also considered regex, and ambiguous join columns will become 2 columns instead of reporting an ambiguous error. This patch fixes this problem.  We do regex matching if and only if the column name contains special characters.&lt;/p&gt;</comment>
                            <comment id="12705074" author="namit" created="Fri, 1 May 2009 18:00:43 +0000"  >&lt;p&gt;Looks good - can you add a negative test where you are using regex columns in group by queries.&lt;br/&gt;
After that, I will run test and commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12705116" author="zshao" created="Fri, 1 May 2009 20:59:55 +0000"  >&lt;p&gt;Added a negative test for Group By regex_col.&lt;/p&gt;</comment>
                            <comment id="12705120" author="namit" created="Fri, 1 May 2009 21:15:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12705127" author="aaa" created="Fri, 1 May 2009 21:39:12 +0000"  >&lt;p&gt;Very cool feature.&lt;/p&gt;

&lt;p&gt;BTW, for this comment:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-420?focusedCommentId=12704795&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#action_12704795&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-420?focusedCommentId=12704795&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#action_12704795&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;the regex is missing a ^&lt;/p&gt;</comment>
                            <comment id="12705131" author="zshao" created="Fri, 1 May 2009 21:44:45 +0000"  >&lt;p&gt;@Amr, I think we don&apos;t need ^ and $ for regex matching. We only need that for regex searching in case the searched regex has to start from the beginning of the string or the end of the string.&lt;/p&gt;

&lt;p&gt;For matching, the whole string has to be matched with the regex, so there is no need for ^ and $.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;You can try my examples out at &lt;a href=&quot;http://www.fileformat.info/tool/regex.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.fileformat.info/tool/regex.htm&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12705144" author="namit" created="Fri, 1 May 2009 22:06:47 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                            <comment id="12705198" author="aaa" created="Sat, 2 May 2009 00:52:11 +0000"  >&lt;p&gt;@Zheng, good point, they are indeed redundant for match.&lt;/p&gt;</comment>
                            <comment id="12715361" author="zshao" created="Tue, 2 Jun 2009 04:08:13 +0000"  >&lt;p&gt;A link for java regex quantifiers: &lt;a href=&quot;http://java.sun.com/docs/books/tutorial/essential/regex/quant.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/docs/books/tutorial/essential/regex/quant.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12424369">HIVE-466</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12732342">HIVE-7631</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12406994" name="HIVE-420.1.patch" size="42611" author="zshao" created="Fri, 1 May 2009 08:44:39 +0000"/>
                            <attachment id="12406996" name="HIVE-420.2.patch" size="42835" author="zshao" created="Fri, 1 May 2009 09:41:15 +0000"/>
                            <attachment id="12406997" name="HIVE-420.3.patch" size="43590" author="zshao" created="Fri, 1 May 2009 09:48:58 +0000"/>
                            <attachment id="12407038" name="HIVE-420.4.patch" size="44332" author="zshao" created="Fri, 1 May 2009 20:59:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Apr 2009 18:02:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-421] union followed by multi-table insert does not work properly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-421</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Like jira 413, multi-table inserts has some problems with unions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422958">HIVE-421</key>
            <summary>union followed by multi-table insert does not work properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 22:43:41 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:44 +0000</updated>
                            <resolved>Thu, 16 Apr 2009 20:42:44 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12699441" author="namit" created="Wed, 15 Apr 2009 23:16:23 +0000"  >&lt;p&gt;Similar problem to 413 - multi-table inserts but for unions.&lt;/p&gt;

&lt;p&gt;Treating union likeTableScan, and performing setKeyAndValueDesc at the end&lt;/p&gt;</comment>
                            <comment id="12699442" author="namit" created="Wed, 15 Apr 2009 23:16:39 +0000"  >&lt;p&gt;Also added a couple of tests &lt;/p&gt;</comment>
                            <comment id="12699458" author="zshao" created="Thu, 16 Apr 2009 00:25:30 +0000"  >&lt;p&gt;Can you add some more comments?&lt;/p&gt;

&lt;p&gt;What is the difference between these two initUnionPlan?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    &lt;span class=&quot;code-comment&quot;&gt;// If the plan &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; reducer does not exist, initialize the plan
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (opMapTask == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (plan.getReducer() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
+        GenMapRedUtils.initUnionPlan(op, ctx);
+      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
+        GenMapRedUtils.splitPlan(op, ctx);
+    }
+    &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (plan.getReducer() == reducer)
+      GenMapRedUtils.initUnionPlan(op, ctx);
+    &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+      GenMapRedUtils.initUnionPlan(ctx, currTask);
+      GenMapRedUtils.joinPlan(op, currTask, opMapTask, ctx);
+    }
+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;javadoc:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void initUnionPlan(GenMRProcContext opProcCtx, Task&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable&amp;gt; currTask) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12699465" author="zshao" created="Thu, 16 Apr 2009 00:46:18 +0000"  >&lt;p&gt;Also please generate the patch for branch-0.3 - it didn&apos;t apply cleanly on branch-0.3.&lt;/p&gt;</comment>
                            <comment id="12699467" author="namit" created="Thu, 16 Apr 2009 00:53:23 +0000"  >&lt;p&gt;incorporated Zheng&apos;s comments&lt;/p&gt;</comment>
                            <comment id="12699541" author="zshao" created="Thu, 16 Apr 2009 06:10:34 +0000"  >&lt;p&gt;Committed to trunk. Thanks Namit!&lt;br/&gt;
Will you provide a patch for branch-0.3?&lt;/p&gt;</comment>
                            <comment id="12699850" author="zshao" created="Thu, 16 Apr 2009 20:42:44 +0000"  >&lt;p&gt;Committed to branch-0.3. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405594" name="hive.421.1.patch" size="118738" author="namit" created="Wed, 15 Apr 2009 23:15:04 +0000"/>
                            <attachment id="12405679" name="hive.421.2.branch.patch" size="332745" author="namit" created="Thu, 16 Apr 2009 18:34:16 +0000"/>
                            <attachment id="12405601" name="hive.421.2.patch" size="119469" author="namit" created="Thu, 16 Apr 2009 00:53:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Apr 2009 00:25:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73543</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-421&quot; title=&quot;union followed by multi-table insert does not work properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-421&quot;&gt;&lt;strike&gt;HIVE-421&lt;/strike&gt;&lt;/a&gt;. Fix union followed by multi-table insert. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-422] Logo for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-422</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Greetings fine Hadoop peoples,&lt;/p&gt;

&lt;p&gt;While working on a few projects here at Cloudera we found ourselves wanting for some sort of icon for both the JobTracker and for Hive. After checking on the project page for Hive (the JobTracker doesn&apos;t really have one) and finding that these items have no icons, we rolled up our sleeves and made some. We&apos;d like to contribute these to the project, so if you want &apos;em, they&apos;re all yours.&lt;/p&gt;

&lt;p&gt;I opened a ticket here for both Hive and JobTracker logos: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-5683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But Ashish Thusoo suggested I open a ticket here for the hive logo specifically. See attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422959">HIVE-422</key>
            <summary>Logo for Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nutron">Aaron Newton</assignee>
                                    <reporter username="nutron">Aaron Newton</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 22:57:12 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:52 +0000</updated>
                            <resolved>Thu, 30 Apr 2009 00:39:38 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12699494" author="appodictic" created="Thu, 16 Apr 2009 02:29:59 +0000"  >&lt;p&gt;Awesome! Gene splicing gone wrong never looked so good.&lt;/p&gt;</comment>
                            <comment id="12700275" author="athusoo" created="Fri, 17 Apr 2009 18:41:31 +0000"  >&lt;p&gt;I like it...&lt;/p&gt;

&lt;p&gt;+1.&lt;/p&gt;
</comment>
                            <comment id="12700977" author="athusoo" created="Mon, 20 Apr 2009 22:42:00 +0000"  >&lt;p&gt;+1 to this logo. I cannot think of anything better and I clearly am not as creative &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Others, what do you think?&lt;/p&gt;</comment>
                            <comment id="12701112" author="johanoskarsson" created="Tue, 21 Apr 2009 09:12:43 +0000"  >&lt;p&gt;Doug Cutting commented on the other that it might be a good idea to use the same font as the Hadoop logo. I think it&apos;s worth a try, but besides that I&apos;m all for the logo.&lt;/p&gt;</comment>
                            <comment id="12701301" author="nutron" created="Tue, 21 Apr 2009 22:44:07 +0000"  >&lt;p&gt;I commented on the other thread to respond to Doug, but basically I intentionally didn&apos;t use the hadoop logo font. The JobTracker isn&apos;t really a product; it&apos;s just a page I wanted an icon for. Hive is it&apos;s own product (obviously tied closely to Hadoop). I just didn&apos;t want to have any confusion, so I choose different logo fonts. I can implement one with the Hadoop logo font if you guys want it...&lt;/p&gt;</comment>
                            <comment id="12703441" author="athusoo" created="Mon, 27 Apr 2009 23:47:16 +0000"  >&lt;p&gt;ok. Lets just get this one in. This is infinitely better than the current one. Will move it in. Regarding the font size, I am not in either camp whatever looks good...&lt;/p&gt;</comment>
                            <comment id="12704423" author="athusoo" created="Thu, 30 Apr 2009 00:39:38 +0000"  >&lt;p&gt;committed. Thanks Aaron!!&lt;/p&gt;</comment>
                            <comment id="12846265" author="nutron" created="Wed, 17 Mar 2010 02:32:56 +0000"  >&lt;p&gt;Hey guys,&lt;/p&gt;

&lt;p&gt;I saw this article on TC today:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://techcrunch.com/2010/03/16/big-data-freedom/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://techcrunch.com/2010/03/16/big-data-freedom/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and noticed the hive logo was all out of whack - all stretched out. Then I noticed it&apos;s like that on the Hive home page. Can someone fix the dimensions of the image tag? It looks kinda bad (and people are apparently using it like that elsewhere as seen on the TC article).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hadoop.apache.org/hive/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/hive/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12847096" author="jvs" created="Thu, 18 Mar 2010 20:34:07 +0000"  >&lt;p&gt;Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1256&quot; title=&quot;fix Hive logo img tag to avoid stretching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1256&quot;&gt;&lt;del&gt;HIVE-1256&lt;/del&gt;&lt;/a&gt; to get attention for this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405593" name="hive &amp; job tracker icons (font outlines).pdf" size="553106" author="nutron" created="Wed, 15 Apr 2009 22:57:42 +0000"/>
                            <attachment id="12405592" name="hive.png" size="41789" author="nutron" created="Wed, 15 Apr 2009 22:57:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Apr 2009 02:29:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9pr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-423] change launch templates to use hive_model.jar</title>
                <link>https://issues.apache.org/jira/browse/HIVE-423</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;the model-jar target now builds hive_model.jar instead of metastore_model.jar. This causes the launch files (used to run tests) to not work anymore in eclipse.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422983">HIVE-423</key>
            <summary>change launch templates to use hive_model.jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Apr 2009 05:59:15 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:48 +0000</updated>
                            <resolved>Thu, 16 Apr 2009 08:37:23 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12699581" author="zshao" created="Thu, 16 Apr 2009 08:37:23 +0000"  >&lt;p&gt;Committed to both trunk and branch-0.3. Thanks Raghu!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405624" name="hive-423.1.patch" size="9252" author="rsm" created="Thu, 16 Apr 2009 06:47:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Apr 2009 08:37:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73541</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122225</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-423&quot; title=&quot;change launch templates to use hive_model.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-423&quot;&gt;&lt;strike&gt;HIVE-423&lt;/strike&gt;&lt;/a&gt;. Change launch templates to use hive_model.jar. (Raghotham Murthy via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-424] PartitionPruner fails with &quot;WHERE ds = &apos;2009-03-01&apos;&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-424</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The PartitionPruner will output a &quot;Unknown Exception: null&quot; when the condition in &quot;where clause&quot; contains fields with no table aliases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422999">HIVE-424</key>
            <summary>PartitionPruner fails with &quot;WHERE ds = &apos;2009-03-01&apos;&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Apr 2009 10:37:29 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:13 +0000</updated>
                            <resolved>Wed, 29 Apr 2009 21:16:11 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12699629" author="zshao" created="Thu, 16 Apr 2009 10:38:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-424&quot; title=&quot;PartitionPruner fails with &amp;quot;WHERE ds = &amp;#39;2009-03-01&amp;#39;&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-424&quot;&gt;&lt;del&gt;HIVE-424&lt;/del&gt;&lt;/a&gt; needs to be fixed first if we want to solve the ambiguity of &quot;table DOT column&quot;, and &quot;column DOT field&quot;.&lt;/p&gt;</comment>
                            <comment id="12704347" author="zshao" created="Wed, 29 Apr 2009 21:16:11 +0000"  >&lt;p&gt;Already fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-416&quot; title=&quot;Get rid of backtrack in Hive.g&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-416&quot;&gt;&lt;del&gt;HIVE-416&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12422848">HIVE-416</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-425] HWI JSP pages should be compiled at build-time instead of run-time</title>
                <link>https://issues.apache.org/jira/browse/HIVE-425</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HWI JSP pages are compiled via the ant jar at run-time.  Doing so at run-time requires ant as a dependency and also makes developing slightly more tricky, as compiler errors are not discovered until HWI is deployed and running.  HWI should be instrumented in such a way where the JSP pages are compiled by ant at build-time instead, just as the Hadoop status pages are.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423030">HIVE-425</key>
            <summary>HWI JSP pages should be compiled at build-time instead of run-time</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alexlod">Alex Loddengaard</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Apr 2009 17:28:11 +0000</created>
                <updated>Tue, 8 Sep 2009 02:56:12 +0000</updated>
                                                                            <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12700494" author="appodictic" created="Sat, 18 Apr 2009 15:37:31 +0000"  >&lt;p&gt;This is definitely a good idea. Doing a build and deploying just to have a compile time error is frustrating. This will speed up development cycles. Alex, I have read on how to do this. &lt;a href=&quot;http://www.otweb.com/blog/index.php?id=441&amp;amp;t=JBoss_Jetty_JSP_Precompile&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.otweb.com/blog/index.php?id=441&amp;amp;t=JBoss_Jetty_JSP_Precompile&lt;/a&gt;. I do not have any changes/upgrades planned for hwi for a while, but I do have another jira open to add the ant tools to hive. Recompiling sounds like it would invalidate that jira. This way is preferred. &lt;/p&gt;</comment>
                            <comment id="12731990" author="appodictic" created="Thu, 16 Jul 2009 15:20:31 +0000"  >&lt;p&gt;I have tried several things to make this process work. Without siting any one specific error it seems that the &apos;org.apache.jasper.JspC&apos; compilation seems to require specific ant-jetty combination. I want to look into a light mvc framework something that will get all the code into servlets/java classes. In this way it will be pre-compiled.&lt;/p&gt;
</comment>
                            <comment id="12732039" author="alexlod" created="Thu, 16 Jul 2009 17:31:27 +0000"  >&lt;p&gt;Hi Edward, which MVC frameworks are you going to consider?  I assume Struts and Spring don&apos;t fall into the &quot;light&quot; category, yeah?  I&apos;m mostly just curious.&lt;/p&gt;</comment>
                            <comment id="12732112" author="appodictic" created="Thu, 16 Jul 2009 19:38:04 +0000"  >&lt;p&gt;Alex,&lt;/p&gt;

&lt;p&gt;Here are the current problems I see.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;JSP
	&lt;ul&gt;
		&lt;li&gt;Hard To check Syntax at Compile Time&lt;/li&gt;
		&lt;li&gt;References to other parts of hive (not many but) may become outdated with API changes&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Hard to unit test Are unit test tests the SessionManager, not the actual jsp flow of passing form items.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So the ideal framework would be: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;small &amp;lt;5MB. we dont want to make Hive bigger just better&lt;/li&gt;
	&lt;li&gt;mostly .Java and servlet based (little/no JSP)&lt;/li&gt;
	&lt;li&gt;Possibly a way to unit test a transaction. Login-&amp;gt;RunQuery-&amp;gt;Verify Results&lt;/li&gt;
	&lt;li&gt;Apache compat license&lt;/li&gt;
	&lt;li&gt;XML/CSS (if it helps eliminate JSP)&lt;/li&gt;
	&lt;li&gt;Low complexity (I am not interested in learning what a org.springframework.transaction.interceptor.AbstractFallbackTransactionAttributeSource ) is for example &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I know little about JSP Frameworks. Do you you have one that fits the needs?&lt;/p&gt;</comment>
                            <comment id="12732120" author="alexlod" created="Thu, 16 Jul 2009 19:52:45 +0000"  >&lt;p&gt;I&apos;ve used both Struts and Spring, but I&apos;m pretty certain both are much larger than 5MB.  That said, I found each of them to be good in their own separate ways.  I recall liking Spring better.  It&apos;s been a long time since my JSP MVC fiddling &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  Struts is an Apache project, though: &lt;a href=&quot;http://struts.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://struts.apache.org/&lt;/a&gt;.  Sorry I can&apos;t provide more insight, Edward.&lt;/p&gt;</comment>
                            <comment id="12745589" author="appodictic" created="Thu, 20 Aug 2009 19:30:45 +0000"  >&lt;p&gt;I was thinking we can even go with servlets generating XHTML and CSS. In this way we can remove the JSP, the unit test process could read the XML for result status, and the CSS will make it look decent in a browser.&lt;/p&gt;</comment>
                            <comment id="12752314" author="appodictic" created="Tue, 8 Sep 2009 02:56:12 +0000"  >&lt;p&gt;I took a look through apache today. I think wikit looks good.&lt;br/&gt;
&lt;a href=&quot;http://wicket.apache.org/exampleguestbook.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wicket.apache.org/exampleguestbook.html&lt;/a&gt;&lt;br/&gt;
1. apache framework&lt;br/&gt;
2. work in class files&lt;br/&gt;
What do you think?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 18 Apr 2009 15:37:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ogn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48562</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-426] undeterministic query results since aliasToWork in mapredWork is a hashmap</title>
                <link>https://issues.apache.org/jira/browse/HIVE-426</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;undeterministic query results since aliasToWork in mapredWork is a hashmap&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423036">HIVE-426</key>
            <summary>undeterministic query results since aliasToWork in mapredWork is a hashmap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Apr 2009 18:35:42 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:43 +0000</updated>
                            <resolved>Thu, 16 Apr 2009 21:10:00 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12699866" author="zshao" created="Thu, 16 Apr 2009 21:10:00 +0000"  >&lt;p&gt;Committed to trunk. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405680" name="hive.426.1.patch" size="230572" author="namit" created="Thu, 16 Apr 2009 18:38:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Apr 2009 21:10:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-426&quot; title=&quot;undeterministic query results since aliasToWork in mapredWork is a hashmap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-426&quot;&gt;&lt;strike&gt;HIVE-426&lt;/strike&gt;&lt;/a&gt;. Fix undeterministic query plan because of aliasToWork. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-427] configuration parameters missing in hive-default,.xml</title>
                <link>https://issues.apache.org/jira/browse/HIVE-427</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12423061">HIVE-427</key>
            <summary>configuration parameters missing in hive-default,.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Apr 2009 23:15:31 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:30 +0000</updated>
                            <resolved>Sat, 18 Apr 2009 01:21:57 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12700401" author="zshao" created="Sat, 18 Apr 2009 01:09:09 +0000"  >&lt;p&gt;+1. Will commit soon.&lt;/p&gt;</comment>
                            <comment id="12700406" author="zshao" created="Sat, 18 Apr 2009 01:21:57 +0000"  >&lt;p&gt;Committed to trunk, and to branch-0.3 removing the &quot;ppd&quot; configuration. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405711" name="hive.427.1.patch" size="1335" author="namit" created="Thu, 16 Apr 2009 23:16:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 18 Apr 2009 01:09:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122228</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-427&quot; title=&quot;configuration parameters missing in hive-default,.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-427&quot;&gt;&lt;strike&gt;HIVE-427&lt;/strike&gt;&lt;/a&gt;. Add missing config parameters in hive-default.xml. (Namit Jain via zshao)&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-428] Implement Map-side Hash-Join in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-428</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are many situations that join will perform much better if map side hash join is used. We have a small test with a simple equal join of  two tables, plain MR join with no map side hash join will execute about 50 seconds in a 6-node cluster (each node 8core, 4G mem). With the mapside hash join is applied, it only needs about 15 seconds.&lt;/p&gt;

&lt;p&gt;The map side hash join can only be used when there is small files, which can be replicated to each map. The map side hash join can be coexeuted together with the map-side filter.&lt;/p&gt;

&lt;p&gt;For example, &lt;br/&gt;
select A.a, A.c, B.b from A,B where A.a=B.d and A.a &amp;lt; 12 and B.b=10&lt;br/&gt;
In our experiment, this statement can be translated into  three different plans if both A and B are plain data file ( with no special compress).&lt;/p&gt;

&lt;p&gt;Plan 1&lt;br/&gt;
Map-Reduce&lt;br/&gt;
both A and B are input for the map. the shuffle data involved is very large.&lt;/p&gt;

&lt;p&gt;Plan 2&lt;br/&gt;
1) first filter B.b to a temp file B1 &amp;#8211; this is seperate Map only job&lt;br/&gt;
2) replicate B1 to each map when filter A and join them in the map&lt;br/&gt;
no reduce is used&lt;/p&gt;

&lt;p&gt;Plan 3&lt;br/&gt;
produce a job which&apos;s each mapper is filtering A (so the mapper is assigned with regard to only A), and directly replicate B to each mapper&lt;br/&gt;
Before each mapper is started filtering A, filter B and load passed B into memory. And then start the mapper and join in the mem.&lt;/p&gt;

&lt;p&gt;Plan 3 performs better in our experiment because it saved a seperate map-only job. But Plan2 is suitable for the situation when B&apos;s original file is very large, but its filtered file is much small.&lt;/p&gt;

&lt;p&gt;This is the basic idea of Map side hash join.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423072">HIVE-428</key>
            <summary>Implement Map-side Hash-Join in Hive</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Apr 2009 01:43:05 +0000</created>
                <updated>Sat, 18 Apr 2009 11:38:03 +0000</updated>
                            <resolved>Sat, 18 Apr 2009 11:38:03 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12699978" author="prasadc" created="Fri, 17 Apr 2009 02:09:45 +0000"  >&lt;p&gt;I think there is already a JIRA opened for this and some patch already exists...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-195&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12699987" author="he yongqiang" created="Fri, 17 Apr 2009 02:40:47 +0000"  >&lt;p&gt;ohh, sorry.&lt;br/&gt;
i am ok to close this for a duplicate or merge them.&lt;/p&gt;</comment>
                            <comment id="12700463" author="he yongqiang" created="Sat, 18 Apr 2009 11:38:03 +0000"  >&lt;p&gt;Close this issue, duplicate of hive-195.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Apr 2009 02:09:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73537</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122229</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Duplicate of hive-195</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-429] use mini mr cluster to run all unit tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-429</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, all our tests run in local mode - which does not cover some of the bugs.&lt;br/&gt;
We use use mini mr cluster for the same.&lt;/p&gt;

&lt;p&gt;Talked to Dhruba briefly about that, it should nor be very difficult to set that up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423148">HIVE-429</key>
            <summary>use mini mr cluster to run all unit tests</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Apr 2009 17:52:04 +0000</created>
                <updated>Fri, 17 Apr 2009 21:29:58 +0000</updated>
                            <resolved>Fri, 17 Apr 2009 21:29:58 +0000</resolved>
                                                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12700335" author="rsm" created="Fri, 17 Apr 2009 21:29:58 +0000"  >&lt;p&gt;duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-204&quot; title=&quot;Provide option to run hadoop via TestMiniMR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-204&quot;&gt;&lt;del&gt;HIVE-204&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Apr 2009 21:29:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122230</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-430] Ability to comment desired for hive query files</title>
                <link>https://issues.apache.org/jira/browse/HIVE-430</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It is, in many cases, quite useful to write a query, save it in a file, and &quot;run&quot; the file with hive &amp;#45;f filename. However, as time passes and many such files are written, it becomes unclear why I did things the way I did--the solution for most code is to comment the code, and I would love to be able to comment hive code in .sql/.hql files or queries.&lt;/p&gt;

&lt;p&gt;Standard SQL comment structure is anything following a non-escaped non-quoted &quot;-- &quot; or &quot;#&quot; on a single line should cause the rest of the line to be ignored. I would love to have this in hive...both in the CLI (for when I paste a query in) and in the hive -f file reader option. C-style // and /* */ commenting would be great too, but only because I&apos;m lazy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423150">HIVE-430</key>
            <summary>Ability to comment desired for hive query files</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Apr 2009 18:12:52 +0000</created>
                <updated>Mon, 7 Mar 2011 20:26:10 +0000</updated>
                            <resolved>Mon, 7 Mar 2011 20:26:10 +0000</resolved>
                                                                    <component>Clients</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12700307" author="prasadc" created="Fri, 17 Apr 2009 20:05:08 +0000"  >&lt;p&gt;There is a JIRA for this which also has a quick and dirty fix...&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-378&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12896333" author="akramer" created="Sun, 8 Aug 2010 08:52:31 +0000"  >&lt;p&gt;&amp;#8211; works fine now. Dunno who/when this happened, but it works.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Apr 2009 20:05:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73535</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-431] Auto-add table property &quot;select&quot; to be the select statement that created the table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-431</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;A syntactic copy of the query that was used to fill a table would often be AMAZINGLY useful for figuring out where the data in the table came from.&lt;/p&gt;

&lt;p&gt;I think the best way to implement this would be to automatically add a table property which includes the SELECT statement. For partitioned tables, this would need to exist for each partition...or perhaps use some canonical name like selectquery for unpartitioned tables, plus selectquery_ds=&amp;lt;DATEID&amp;gt; for partitioned tables.&lt;/p&gt;

&lt;p&gt;This problem is growing as more and more tables in our database are generated by either &quot;root&quot; or by people who are no longer easy to contact.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423222">HIVE-431</key>
            <summary>Auto-add table property &quot;select&quot; to be the select statement that created the table</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Apr 2009 07:21:35 +0000</created>
                <updated>Fri, 5 Mar 2010 20:42:55 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12740329" author="akramer" created="Fri, 7 Aug 2009 00:36:50 +0000"  >&lt;p&gt;Another note: This isn&apos;t done or represented in normal SQL at all because normal SQL allows for updates--so the SELECT query that generated the table&apos;s data could quickly become obsolete. Not so with Hive!&lt;/p&gt;

&lt;p&gt;This is also very useful metadata to search, as it lets us cross-index tables to know which tables feed which other tables. This will help us detect aggregate tables (to avoid re-aggregation) and to identify dependencies among tables (so if we change a given table&apos;s contents, we will have a good guess at who will be affected)&lt;/p&gt;</comment>
                            <comment id="12740571" author="namit" created="Fri, 7 Aug 2009 14:36:06 +0000"  >&lt;p&gt;This can be shown as part of describe extended (only the last partition will be shown by default)&lt;/p&gt;

&lt;p&gt;We can store it in the metastore.&lt;/p&gt;

&lt;p&gt;If we are supporting this, it would be useful to have a way to recover the exact statement used to create the table also.&lt;/p&gt;</comment>
                            <comment id="12842010" author="akramer" created="Fri, 5 Mar 2010 20:38:56 +0000"  >&lt;p&gt;Also note that for partitioned tables, the tableproperty could be generated accordingly. select?ds=2009-01-01&amp;amp;foo=bar&lt;/p&gt;</comment>
                            <comment id="12842014" author="zshao" created="Fri, 5 Mar 2010 20:42:55 +0000"  >&lt;p&gt;I guess the information is already in lineage.&lt;/p&gt;

&lt;p&gt;I think it&apos;s a good idea to keep lineage information away from the core metadata, especially given that we are going to have column lineage etc.&lt;br/&gt;
But we should provide an easy way for users to retrieve the lineage information.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Aug 2009 14:36:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9rj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122232</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-432] SORT BY is always sending data to only the first reducer even if there are multiple reducers</title>
                <link>https://issues.apache.org/jira/browse/HIVE-432</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When we generate the ReduceSInkOperator, the partition columns are empty, which means all the rows will get a hash value of 0, and they will all go to the first reducer.&lt;/p&gt;

&lt;p&gt;In the meanwhile we are fixing this bug, please use &quot;CLUSTER BY&quot; instead of &quot;SORT BY&quot; so that the data will get distributed to multiple reducers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423223">HIVE-432</key>
            <summary>SORT BY is always sending data to only the first reducer even if there are multiple reducers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Apr 2009 09:22:13 +0000</created>
                <updated>Sat, 17 Dec 2011 00:09:03 +0000</updated>
                            <resolved>Mon, 20 Apr 2009 19:44:36 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12700568" author="zshao" created="Sun, 19 Apr 2009 09:43:57 +0000"  >&lt;p&gt;Can be applied to both trunk and branch 0.3.&lt;/p&gt;</comment>
                            <comment id="12700569" author="zshao" created="Sun, 19 Apr 2009 09:47:56 +0000"  >&lt;p&gt;Can be applied to both trunk and branch-0.3.&lt;/p&gt;

&lt;p&gt;The change is in ReduceSinkOperator.java. Very simple fix. There is no way to test it locally since we use only one reducer.&lt;/p&gt;</comment>
                            <comment id="12700575" author="zshao" created="Sun, 19 Apr 2009 10:36:17 +0000"  >&lt;p&gt;A test on our cluster showed the patch fixed the problem.&lt;/p&gt;</comment>
                            <comment id="12700856" author="namit" created="Mon, 20 Apr 2009 17:06:11 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - I will start the tests and commit it in  both places&lt;/p&gt;</comment>
                            <comment id="12700907" author="namit" created="Mon, 20 Apr 2009 19:44:36 +0000"  >&lt;p&gt;committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405866" name="HIVE-432.1.patch" size="1906" author="zshao" created="Sun, 19 Apr 2009 09:47:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Apr 2009 17:06:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-433] Tests fail: union19 and union18 </title>
                <link>https://issues.apache.org/jira/browse/HIVE-433</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;These two tests have started failing on the Hudson build:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.18/68/testReport/org.apache.hadoop.hive.cli/TestCliDriver/testCliDriver_union19/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.18/68/testReport/org.apache.hadoop.hive.cli/TestCliDriver/testCliDriver_union19/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.18/68/testReport/org.apache.hadoop.hive.cli/TestCliDriver/testCliDriver_union18/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.18/68/testReport/org.apache.hadoop.hive.cli/TestCliDriver/testCliDriver_union18/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423265">HIVE-433</key>
            <summary>Tests fail: union19 and union18 </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Apr 2009 10:01:04 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:24 +0000</updated>
                            <resolved>Fri, 24 Apr 2009 12:46:07 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12702169" author="namit" created="Fri, 24 Apr 2009 00:11:20 +0000"  >&lt;p&gt;The tests need to be modified to generate a deterministic output.&lt;/p&gt;</comment>
                            <comment id="12702178" author="athusoo" created="Fri, 24 Apr 2009 00:44:18 +0000"  >&lt;p&gt;Fixed ordering for the tests..&lt;/p&gt;</comment>
                            <comment id="12702181" author="athusoo" created="Fri, 24 Apr 2009 00:46:34 +0000"  >&lt;p&gt;submitting.&lt;/p&gt;</comment>
                            <comment id="12702344" author="johanoskarsson" created="Fri, 24 Apr 2009 12:46:06 +0000"  >&lt;p&gt;Committed this to trunk, iirc it doesn&apos;t happen in the 0.3 branch. Thanks Ashish!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12406305" name="patch-433.txt" size="57685" author="athusoo" created="Fri, 24 Apr 2009 00:44:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Apr 2009 00:11:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73533</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9rz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122234</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-434] I get 400 Bad Request Error</title>
                <link>https://issues.apache.org/jira/browse/HIVE-434</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I get 400 BAD Request error when I execute&lt;br/&gt;
       svn co  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk&lt;/a&gt; hive &lt;br/&gt;
as given in &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/GettingStarted&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/GettingStarted&lt;/a&gt;. Could you please resolve this problem quickly&lt;/p&gt;

&lt;p&gt;Thank you&lt;br/&gt;
Raghu&lt;/p&gt;

&lt;p&gt;I am still getting error when i execute&lt;br/&gt;
svn co  &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hive/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hive/trunk&lt;/a&gt; hive &lt;/p&gt;

&lt;p&gt;The error is : PROPFIND REQUEST FAILED ( 400 BAD REQUEST )&lt;br/&gt;
is there any other way I can download the hive source.&lt;br/&gt;
Thank you&lt;/p&gt;</description>
                <environment>&lt;p&gt;N/A&lt;/p&gt;</environment>
        <key id="12423282">HIVE-434</key>
            <summary>I get 400 Bad Request Error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="raghu.rok">Raghu R</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Apr 2009 15:02:10 +0000</created>
                <updated>Sun, 26 Apr 2009 08:09:24 +0000</updated>
                            <resolved>Sun, 26 Apr 2009 08:09:24 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12700914" author="rsm" created="Mon, 20 Apr 2009 20:05:45 +0000"  >&lt;p&gt;i am not seeing this problem. can you provide more details?&lt;/p&gt;</comment>
                            <comment id="12701832" author="raghu.rok" created="Thu, 23 Apr 2009 07:51:47 +0000"  >&lt;p&gt;I am getting the same error, is it with something i am doing, could anyone suggest any other way to obtain hive, please help.&lt;/p&gt;

&lt;p&gt;Raghu&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Apr 2009 20:05:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-435] Empty passwd param causing NPE in ExecDriver</title>
                <link>https://issues.apache.org/jira/browse/HIVE-435</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-403&quot; title=&quot;remove password password params from job config that is submitted to job tracker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-403&quot;&gt;&lt;del&gt;HIVE-403&lt;/del&gt;&lt;/a&gt; can cause NPE if the password param is empty. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12423300">HIVE-435</key>
            <summary>Empty passwd param causing NPE in ExecDriver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Apr 2009 19:36:44 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:41 +0000</updated>
                            <resolved>Mon, 20 Apr 2009 21:41:56 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                                    <fixVersion>0.3.0</fixVersion>
                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12700902" author="prasadc" created="Mon, 20 Apr 2009 19:37:31 +0000"  >&lt;p&gt;check for NULL before removing passwd param&lt;/p&gt;</comment>
                            <comment id="12700955" author="namit" created="Mon, 20 Apr 2009 21:41:56 +0000"  >&lt;p&gt;committed. Thanks Prasad&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405953" name="tmp1.patch" size="1065" author="prasadc" created="Mon, 20 Apr 2009 19:37:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Apr 2009 21:41:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122236</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-436] MIN and MAX should be generic</title>
                <link>https://issues.apache.org/jira/browse/HIVE-436</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;MIN and MAX functions currently return the DOUBLE type...but really, these should be generic UDFs. It makes sense to talk about minima and maxima for int, bigint, double, and even string types.&lt;/p&gt;

&lt;p&gt;In some cases like SUM, it&apos;s possible that the result would overflow making DOUBLE more useful as it can drop digits and swap to scientific notation, but MIN and MAX by definition cannot have this problem because the answers are always represented in the column they are run across.&lt;/p&gt;

&lt;p&gt;Easy workaround: CAST all of my MINs and MAXes from DOUBLE to INT, but these should work with STRING too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423344">HIVE-436</key>
            <summary>MIN and MAX should be generic</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Apr 2009 06:58:49 +0000</created>
                <updated>Thu, 11 Apr 2013 00:46:14 +0000</updated>
                            <resolved>Thu, 11 Apr 2013 00:46:14 +0000</resolved>
                                                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13577606" author="554268" created="Wed, 13 Feb 2013 14:50:15 +0000"  >&lt;p&gt;MIN and MAX functions should be generic means it should support int, bigint, double, and even string types.Did you mean the same????&lt;br/&gt;
But I found that maxima and minina works fine for the above mentioned data types....&lt;/p&gt;</comment>
                            <comment id="13628510" author="hagleitn" created="Thu, 11 Apr 2013 00:46:14 +0000"  >&lt;p&gt;Both min and max are generic by now, work with all types and go from Type to same Type.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Feb 2013 14:50:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42835</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ogv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-437] Allow both table.col and col.field in the grammar</title>
                <link>https://issues.apache.org/jira/browse/HIVE-437</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There is a bug in the grammar that only allows table.col but not col.field. We should allow both.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423354">HIVE-437</key>
            <summary>Allow both table.col and col.field in the grammar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Apr 2009 09:14:36 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:38 +0000</updated>
                            <resolved>Thu, 23 Apr 2009 23:45:01 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12701114" author="zshao" created="Tue, 21 Apr 2009 09:15:59 +0000"  >&lt;p&gt;This patch fixes the problem. It also fixes the bug in PartitionPruner that fails with &quot;WHERE ds = &apos;2009-01-01&apos;&quot;.&lt;/p&gt;</comment>
                            <comment id="12701116" author="zshao" created="Tue, 21 Apr 2009 09:24:34 +0000"  >&lt;p&gt;This one is the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-437&quot; title=&quot;Allow both table.col and col.field in the grammar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-437&quot;&gt;&lt;del&gt;HIVE-437&lt;/del&gt;&lt;/a&gt;.1.patch, but it only contains code changes (NO test and result changes).&lt;/p&gt;</comment>
                            <comment id="12701465" author="zshao" created="Wed, 22 Apr 2009 10:02:53 +0000"  >&lt;p&gt;Talked with the team offline and make some changes:&lt;/p&gt;

&lt;p&gt;1. We will now output an error if an identifier in the expression can be both a table alias and a column.&lt;/p&gt;

&lt;p&gt;2. The Expression GraphWalker&apos;s process will return NULL for a table name. Originally we were returning a String for table name, and exprNodeDesc for others, which is not good.  I didn&apos;t change the PartitionPruner in the same direction, because we are going to refactor that code completely pretty soon.&lt;/p&gt;</comment>
                            <comment id="12701466" author="zshao" created="Wed, 22 Apr 2009 10:03:19 +0000"  >&lt;p&gt;Passed all tests.&lt;/p&gt;</comment>
                            <comment id="12701682" author="namit" created="Wed, 22 Apr 2009 21:08:44 +0000"  >&lt;p&gt;looks good. &lt;/p&gt;

&lt;p&gt;PartitionPruner still uses old code - exprNodeTempDesc. Can you write a comment there saying that his is temporary and will be removed anyway&lt;br/&gt;
once PartitionPruner moves to the walker framework ?&lt;/p&gt;

&lt;p&gt;I will commit it after that. Also, I dont think this needs to be merged to 0.3 - is that correct ?&lt;/p&gt;</comment>
                            <comment id="12701744" author="zshao" created="Wed, 22 Apr 2009 23:45:42 +0000"  >&lt;p&gt;Added the comments in PartitionPruner.java as Namit suggested.&lt;br/&gt;
Yes, this only needs to go to trunk.&lt;/p&gt;</comment>
                            <comment id="12702166" author="namit" created="Thu, 23 Apr 2009 23:45:01 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12406016" name="HIVE-437.1.code-only.patch" size="30005" author="zshao" created="Tue, 21 Apr 2009 09:24:34 +0000"/>
                            <attachment id="12406015" name="HIVE-437.1.patch" size="438912" author="zshao" created="Tue, 21 Apr 2009 09:15:59 +0000"/>
                            <attachment id="12406117" name="HIVE-437.2.code-only.patch" size="36430" author="zshao" created="Wed, 22 Apr 2009 10:02:53 +0000"/>
                            <attachment id="12406118" name="HIVE-437.2.patch" size="454137" author="zshao" created="Wed, 22 Apr 2009 10:03:16 +0000"/>
                            <attachment id="12406187" name="HIVE-437.3.patch" size="454744" author="zshao" created="Wed, 22 Apr 2009 23:45:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Apr 2009 21:08:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73530</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-438] Make hive work with apache thrift</title>
                <link>https://issues.apache.org/jira/browse/HIVE-438</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following changes have to be made in hive to get it working with any thrift in apache.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;change libthrift.jar&lt;/li&gt;
	&lt;li&gt;change com.facebook.thrift to org.apache.thrift&lt;/li&gt;
	&lt;li&gt;handle some incompatible changes&lt;/li&gt;
	&lt;li&gt;fix some of the warnings&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12423356">HIVE-438</key>
            <summary>Make hive work with apache thrift</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Apr 2009 09:44:19 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:42 +0000</updated>
                            <resolved>Tue, 14 Jul 2009 00:01:42 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12701135" author="rsm" created="Tue, 21 Apr 2009 11:02:36 +0000"  >&lt;p&gt;With these changes (copy jars to lib), thrift from apache can be used to compile hive interfaces. However, several tests are failing because of the compatibility changes I made to serde2.&lt;/p&gt;</comment>
                            <comment id="12701136" author="rsm" created="Tue, 21 Apr 2009 11:11:34 +0000"  >&lt;p&gt;I am attaching the non-trivial changes i made to serde as a separate patch. I am hoping Zheng can help with the problem since he knows this code better.&lt;/p&gt;</comment>
                            <comment id="12701313" author="zshao" created="Tue, 21 Apr 2009 23:16:09 +0000"  >&lt;p&gt;Raghu, where did you get the jars or you built yourself? Is there any changes to the license file?&lt;/p&gt;</comment>
                            <comment id="12701317" author="rsm" created="Tue, 21 Apr 2009 23:22:36 +0000"  >&lt;p&gt;I built the jars from thrift revision 760184 from apache. The license files should now have the apache license. I&apos;ll add them to the diff. thanks.&lt;/p&gt;</comment>
                            <comment id="12701382" author="zshao" created="Wed, 22 Apr 2009 05:04:05 +0000"  >&lt;p&gt;Fixed several bugs and also made the code backward compatible with existing metadata.&lt;/p&gt;

&lt;p&gt;Will also need to make sure it works with older version of internal code..&lt;/p&gt;</comment>
                            <comment id="12701413" author="rsm" created="Wed, 22 Apr 2009 07:20:17 +0000"  >&lt;p&gt;Zheng, which version of thrift did you use?&lt;/p&gt;</comment>
                            <comment id="12701440" author="johanoskarsson" created="Wed, 22 Apr 2009 09:00:35 +0000"  >&lt;p&gt;I think it might be worth waiting for the first Apache release of Thrift, I believe they are in the final stages of preparation. See &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-439&quot; title=&quot;Release 0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-439&quot;&gt;&lt;del&gt;THRIFT-439&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12701675" author="zshao" created="Wed, 22 Apr 2009 20:36:24 +0000"  >&lt;p&gt;@Raghu, I used the libthrift.jar from your upload.&lt;br/&gt;
@Johan, that&apos;s a good idea.&lt;/p&gt;

&lt;p&gt;Some of our internal code is still using com.facebook.thrift so there are some more worked to migrate those code as well.&lt;/p&gt;</comment>
                            <comment id="12701891" author="rsm" created="Thu, 23 Apr 2009 10:48:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-80&quot; title=&quot;Add testcases for concurrent query execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-80&quot;&gt;HIVE-80&lt;/a&gt; depends on this change, so it would be good to commit this sooner. We can later verify our changes with the official thrift release version. &lt;/p&gt;</comment>
                            <comment id="12727876" author="rsm" created="Tue, 7 Jul 2009 02:16:01 +0000"  >&lt;p&gt;This is a new patch for the latest trunk. It includes all changes that Zheng made, so there should be no test failures. The thrift version used is r790732 from &lt;a href=&quot;http://instant.thrift-rpc.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://instant.thrift-rpc.org/&lt;/a&gt; Also including the latest libthrift.jar and libfb303.jar built from this version.&lt;/p&gt;</comment>
                            <comment id="12728281" author="rsm" created="Tue, 7 Jul 2009 18:29:24 +0000"  >&lt;p&gt;missed including changes to test results. resubmitting patch.&lt;/p&gt;</comment>
                            <comment id="12730613" author="namit" created="Tue, 14 Jul 2009 00:01:42 +0000"  >&lt;p&gt;Committed. Thanks Raghu.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12471232">HIVE-1526</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12406096" name="HIVE-438.2.patch" size="1578789" author="zshao" created="Wed, 22 Apr 2009 05:04:05 +0000"/>
                            <attachment id="12406022" name="hive-438.1.patch" size="1545443" author="rsm" created="Tue, 21 Apr 2009 11:02:36 +0000"/>
                            <attachment id="12412772" name="hive-438.3.patch" size="1555265" author="rsm" created="Tue, 7 Jul 2009 18:29:24 +0000"/>
                            <attachment id="12406025" name="hive-438.serde.patch" size="7606" author="rsm" created="Tue, 21 Apr 2009 11:11:34 +0000"/>
                            <attachment id="12412692" name="libfb303.jar" size="114342" author="rsm" created="Tue, 7 Jul 2009 02:16:01 +0000"/>
                            <attachment id="12412691" name="libthrift.jar" size="169666" author="rsm" created="Tue, 7 Jul 2009 02:16:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Apr 2009 23:16:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-439] merge small files after a map-only job</title>
                <link>https://issues.apache.org/jira/browse/HIVE-439</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are cases when the input to a Hive job are thousands of small files. In this case, there is a mapper for each file. Most of the overhead for spawning all these mappers can be avoided if these small files are combined into fewer larger files.&lt;/p&gt;

&lt;p&gt;The problem can also be addressed by having a mapper span multiple blocks as in:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-74&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-74&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Bit, it also makes sense in HIVE to merge files whenever possible.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;hive.merge.mapfiles&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;Merge small files at the end of the job&amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;hive.merge.size.per.task&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;256000000&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;Size of merged files at the end of the job&amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12423387">HIVE-439</key>
            <summary>merge small files after a map-only job</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Apr 2009 16:43:29 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:55 +0000</updated>
                            <resolved>Tue, 23 Jun 2009 05:15:21 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12701198" author="namit" created="Tue, 21 Apr 2009 16:44:41 +0000"  >&lt;p&gt;Before the moveTask, another DummyTask can be created in order to merge the files is needed. Some heuristics can be present to start with:&lt;br/&gt;
like average size of a file etc. &lt;/p&gt;</comment>
                            <comment id="12717820" author="namit" created="Tue, 9 Jun 2009 21:08:07 +0000"  >&lt;p&gt;Instead of having a map-only job to do the concatenation, I think we should use a map-reduce job.&lt;br/&gt;
This way, when sorting properties of a table are maintained in the metastore, they can be preserved.&lt;/p&gt;</comment>
                            <comment id="12720977" author="zshao" created="Wed, 17 Jun 2009 23:10:47 +0000"  >&lt;p&gt;@hive.439.1.patch&lt;br/&gt;
We don&apos;t need anything in sort key in the reduceSinkOperator. Can you remove the &quot;rand()&quot; for sort key?&lt;br/&gt;
That will make the process faster because all rows are equal (for sorting purpose).&lt;/p&gt;</comment>
                            <comment id="12720980" author="namit" created="Wed, 17 Jun 2009 23:13:21 +0000"  >&lt;p&gt;But, doesnt that mean that all rows will go to the same reducer - which might be bad &lt;/p&gt;</comment>
                            <comment id="12720989" author="zshao" created="Wed, 17 Jun 2009 23:30:28 +0000"  >&lt;p&gt;@hive.439.1.patch&lt;br/&gt;
rand_partitionpruner2.q: &lt;br/&gt;
-query: select * from tmptable x sort by x.key&lt;br/&gt;
+query: select * from tmptable x sort by x.key,value&lt;br/&gt;
...&lt;br/&gt;
+103	val_103	2008-04-08	12&lt;br/&gt;
 103	val_103	2008-04-08	11&lt;br/&gt;
-103	val_103	2008-04-08	12&lt;/p&gt;

&lt;p&gt;I guess we have to sort by all columns to make the result deterministic.&lt;/p&gt;

&lt;p&gt;The same thing with input_part2.&lt;/p&gt;

&lt;p&gt;Also, shall we rename &quot;Conditional Operator&quot; to &quot;Conditional Task&quot; in explain plan? In Hive world, Operator usually means one operator in the map-reduce tasks.&lt;/p&gt;</comment>
                            <comment id="12721065" author="namit" created="Thu, 18 Jun 2009 05:09:46 +0000"  >&lt;p&gt;incorporated comments&lt;/p&gt;</comment>
                            <comment id="12721123" author="zshao" created="Thu, 18 Jun 2009 08:32:20 +0000"  >&lt;p&gt;@hive.439.2.patch&lt;/p&gt;

&lt;p&gt;New configuration variables should be added to conf/hive-default.xml and data/conf/hive-default.xml&lt;/p&gt;
</comment>
                            <comment id="12721359" author="namit" created="Thu, 18 Jun 2009 17:29:51 +0000"  >&lt;p&gt;added comments&lt;/p&gt;</comment>
                            <comment id="12721622" author="zshao" created="Fri, 19 Jun 2009 02:17:25 +0000"  >&lt;p&gt;@hive.439.3.patch:&lt;br/&gt;
I don&apos;t understand how the ConditionalTask gets the resolver and resolverCtx at execution time.&lt;/p&gt;

&lt;p&gt;Are they serialized together with the ConditionalTask?&lt;br/&gt;
If so, we need to mark those classes as serializable and move them to ConditionalWork, right?&lt;br/&gt;
Otherwise it kind of breaks the implicit contract that everything that needs to be serialized is in the Work instead of the Task.&lt;/p&gt;</comment>
                            <comment id="12721671" author="namit" created="Fri, 19 Jun 2009 06:09:43 +0000"  >&lt;p&gt;It does not - ConditionalTask is executed on the client side i.e Hive server.&lt;br/&gt;
The resolver and resolver can be accessed there - no seriaiization required - &lt;br/&gt;
it is not a map-reduce task.&lt;/p&gt;

&lt;p&gt;It is just a placeholder to decide which task to execute. Since this decision cannot be made at&lt;br/&gt;
compile time, and must be made after certain tasks are executed&lt;/p&gt;</comment>
                            <comment id="12721958" author="zshao" created="Fri, 19 Jun 2009 19:40:49 +0000"  >&lt;p&gt;Got it. Do we want to make the whole plan (containing all tasks) serializable?  With that we will be able to compile the job once and rerun it many times in the future.&lt;/p&gt;</comment>
                            <comment id="12721986" author="namit" created="Fri, 19 Jun 2009 20:33:26 +0000"  >&lt;p&gt;I think this is outside the scope of this patch. I can open a new patch and work on it sometime later.&lt;/p&gt;</comment>
                            <comment id="12722099" author="zshao" created="Sat, 20 Jun 2009 00:01:16 +0000"  >&lt;p&gt;Ok. Please open a jira on 2 follow-ups:&lt;br/&gt;
1. Be able to serialize the whole plan and run it later.&lt;br/&gt;
2. Provide a way to monitor the progress of a query (which consists of multiple tasks). 2 needs to be done before we can deploy this internally.&lt;/p&gt;

&lt;p&gt;I will test and commit.&lt;/p&gt;</comment>
                            <comment id="12722104" author="namit" created="Sat, 20 Jun 2009 00:43:33 +0000"  >&lt;p&gt;Some follow-up jiras:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-569&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-570&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-570&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12722107" author="zshao" created="Sat, 20 Jun 2009 01:01:32 +0000"  >&lt;p&gt;This is a conflict merging the patch. Can you regenerate the test case results?&lt;/p&gt;</comment>
                            <comment id="12722439" author="namit" created="Sun, 21 Jun 2009 23:12:30 +0000"  >&lt;p&gt;resolved conflicts&lt;/p&gt;</comment>
                            <comment id="12722513" author="zshao" created="Mon, 22 Jun 2009 08:40:51 +0000"  >&lt;p&gt;Testing. Will commit once the test succeeded.&lt;/p&gt;

&lt;p&gt;A side note:&lt;br/&gt;
One more comment is the default value of hive.merge.size.per.mapper. In both HiveConf.java and conf/hive-default.xml, it&apos;s set to 10GB. That means most map-only jobs will run this optional task. Is that a bit too large? &lt;/p&gt;

&lt;p&gt;Given the usual block size of dfs 128MB, I think 100MB would be a good number. 100MB means that for identity select (&quot;select * from&quot;), we won&apos;t run this optional task. It also means that if we run the optional task, the output file size will be around 100MB which will most probably still be a single block.&lt;/p&gt;

&lt;p&gt;Most problems in our world is caused by very small files, say 1MB or less. So I guess 100MB is probably good enough. &lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="12722518" author="zshao" created="Mon, 22 Jun 2009 08:49:10 +0000"  >&lt;p&gt;Sorry the test failed because of recent commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-338&quot; title=&quot;Executing cli commands into thrift server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-338&quot;&gt;&lt;del&gt;HIVE-338&lt;/del&gt;&lt;/a&gt;. Can you svn up and merge.&lt;/p&gt;

&lt;p&gt;Also the trunk is failing in some of the tests saying &quot;java.lang.ClassNotFoundException: org.apache.hadoop.hive.serde2.TestSerDe&quot;. Needs some more investigation.&lt;/p&gt;</comment>
                            <comment id="12722680" author="namit" created="Mon, 22 Jun 2009 17:06:31 +0000"  >&lt;p&gt;Had a discussion with Dhruba regarding the default file size also  - &lt;/p&gt;

&lt;p&gt;1. In case of identity select, we do not have a map-reduce job, and therefore no merging is required.&lt;br/&gt;
2. There is no harm in having bigger files as far as name node is concerned. The only problem is that it will result in lesser number of reducers, thereby increasing the time for merging. However, a 10GB file should result&lt;br/&gt;
    in ~20minutes on most installations, so should be OK.&lt;br/&gt;
3. Even if the filter selects most of the rows: select * from T where ..,. If T is a big table, we dont want to create small versions of T for the selected table.&lt;br/&gt;
    So, a big size is better.&lt;/p&gt;

&lt;p&gt;I am generating the patch after resolving conflicts - will upload again&lt;/p&gt;</comment>
                            <comment id="12722736" author="namit" created="Mon, 22 Jun 2009 18:13:54 +0000"  >&lt;p&gt;The tests seem to work for me - I will upload the patch again - but I haven&apos;t changed anything&lt;/p&gt;</comment>
                            <comment id="12722767" author="namit" created="Mon, 22 Jun 2009 19:11:53 +0000"  >&lt;p&gt;resolved&lt;/p&gt;</comment>
                            <comment id="12722814" author="zshao" created="Mon, 22 Jun 2009 20:50:14 +0000"  >&lt;p&gt;Testing now. Will commit when test succeeds.&lt;/p&gt;</comment>
                            <comment id="12722969" author="zshao" created="Tue, 23 Jun 2009 05:15:21 +0000"  >&lt;p&gt;Committed. There is a small change: the default value for hive.merge.size.per.mapper is changed to 1000000000 (1GB) from 10GB.&lt;br/&gt;
Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411000" name="hive.439.1.patch" size="1571901" author="namit" created="Wed, 17 Jun 2009 22:37:58 +0000"/>
                            <attachment id="12411027" name="hive.439.2.patch" size="1519555" author="namit" created="Thu, 18 Jun 2009 05:09:23 +0000"/>
                            <attachment id="12411112" name="hive.439.3.patch" size="1520177" author="namit" created="Thu, 18 Jun 2009 17:29:51 +0000"/>
                            <attachment id="12411358" name="hive.439.4.patch" size="1519337" author="namit" created="Sun, 21 Jun 2009 23:12:30 +0000"/>
                            <attachment id="12411442" name="hive.439.5.patch" size="1519337" author="namit" created="Mon, 22 Jun 2009 19:11:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Jun 2009 23:10:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122239</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-439&quot; title=&quot;merge small files after a map-only job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-439&quot;&gt;&lt;strike&gt;HIVE-439&lt;/strike&gt;&lt;/a&gt;. Merge small files after a map-only job. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
