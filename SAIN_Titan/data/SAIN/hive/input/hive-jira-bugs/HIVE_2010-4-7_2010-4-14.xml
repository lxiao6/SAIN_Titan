<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:15:40 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2010-4-7+AND+created+%3C%3D+2010-4-14+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="14" total="14"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-1293] Concurrency Model for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1293</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Concurrency model for Hive:&lt;/p&gt;

&lt;p&gt;Currently, hive does not provide a good concurrency model. The only guanrantee provided in case of concurrent readers and writers is that&lt;br/&gt;
reader will not see partial data from the old version (before the write) and partial data from the new version (after the write).&lt;br/&gt;
This has come across as a big problem, specially for background processes performing maintenance operations.&lt;/p&gt;

&lt;p&gt;The following possible solutions come to mind.&lt;/p&gt;

&lt;p&gt;1. Locks: Acquire read/write locks - they can be acquired at the beginning of the query or the write locks can be delayed till move&lt;br/&gt;
task (when the directory is actually moved). Care needs to be taken for deadlocks.&lt;/p&gt;

&lt;p&gt;2. Versioning: The writer can create a new version if the current version is being read. Note that, it is not equivalent to snapshots,&lt;br/&gt;
the old version can only be accessed by the current readers, and will be deleted when all of them have finished.&lt;/p&gt;


&lt;p&gt;Comments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461472">HIVE-1293</key>
            <summary>Concurrency Model for Hive</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Apr 2010 23:39:25 +0000</created>
                <updated>Mon, 19 Dec 2016 22:30:28 +0000</updated>
                            <resolved>Tue, 24 Aug 2010 15:49:05 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>21</watches>
                                                                <comments>
                            <comment id="12857110" author="athusoo" created="Wed, 14 Apr 2010 21:45:34 +0000"  >&lt;p&gt;I would vote for versioning. Since we do not have to deal with the complexity of a buffer cache I think this would be much simpler to implement than what is possible in traditional databases. At the same time, for locks we will have to do a lease based mechanism anyway in order to protect against locks leaking because of client crashes. And when you account for that, it seems that locking would not be significantly simpler to implement than versioning.&lt;/p&gt;</comment>
                            <comment id="12863510" author="namit" created="Mon, 3 May 2010 20:54:01 +0000"  >&lt;p&gt;One option is to use ZooKeeper for locking - we dont need to worry about leases since ZooKeeper supports ephemeral nodes.&lt;br/&gt;
The zookeeper quorum can be specified via some configuration parameters, and they need to be specified for concurrency to &lt;br/&gt;
be enabled.&lt;/p&gt;</comment>
                            <comment id="12864145" author="namit" created="Wed, 5 May 2010 04:51:09 +0000"  >&lt;p&gt;The initial writeup is at &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/Locking&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/Locking&lt;/a&gt;.&lt;br/&gt;
Please comment&lt;/p&gt;</comment>
                            <comment id="12864227" author="jvs" created="Wed, 5 May 2010 08:06:41 +0000"  >&lt;p&gt;Just to clarify, when you say this:&lt;/p&gt;

&lt;p&gt;&quot;The lock modes are hierarchical in nature - if &apos;S&apos; lock is acquired on T, implicitly &apos;S&apos; lock is acquired on all partitions of T.&quot;&lt;/p&gt;

&lt;p&gt;it only applies when no partition is specified, so for&lt;/p&gt;

&lt;p&gt;select .. T1 partition P1 =&amp;gt; S on T1, T1.P1  &lt;/p&gt;

&lt;p&gt;we only S-lock T1.P1 (not all the other partitions of T), right?&lt;/p&gt;</comment>
                            <comment id="12864431" author="namit" created="Wed, 5 May 2010 18:16:57 +0000"  >&lt;p&gt;I meant the above to be only true for &apos;X&apos; locks - updated the wiki&lt;/p&gt;</comment>
                            <comment id="12864450" author="appodictic" created="Wed, 5 May 2010 19:04:07 +0000"  >&lt;p&gt;I see you have made mention to zookeeper. Do we really need zookeeper to implement locking when we already have a transactional MetaStore via JPOX (Derby/MySQL)? From my prospecting on the management side and from a development side having to integrate and understand the Zookeeper API for simple low performance locking seems overkill.  &lt;/p&gt;

&lt;p&gt;For example, I understand that zookeeper has facilities to auto-expire old locks and other features that make it seem ideal in a use case, but I think the visibility into it is rather low. If our locks were implemented in the meta-store, clearing them would be easy to do thought hive commands or with JDBC. What tools would we have to investigate Hive-Zookeeper-Locking? &lt;/p&gt;

&lt;p&gt;I say this because of experience with hbase-zookeeper. Other the &apos;hbase status&apos; zookeeper is a total black box and makes troubleshooting that component of hbase difficult. I would not want to see hive go down the same road. &lt;/p&gt;

&lt;p&gt;No matter which implementation we go with we should have  DDL commands like &apos;show locks&apos; &apos;clear locks&apos;. &lt;/p&gt;</comment>
                            <comment id="12864457" author="jvs" created="Wed, 5 May 2010 19:16:17 +0000"  >&lt;p&gt;Regarding the implementation of lock acquisition/release in terms of zookeeper, can you elaborate on how you are proposing to map the lock hierarchy into the znode hierarchy?&lt;/p&gt;

&lt;p&gt;It sounds like the znode paths will correspond to database.table.partition.subpartition... paths, which is good.&lt;/p&gt;

&lt;p&gt;However, does the lock acquisition recipe actually need to reflect the hierarchy, which I think is what you are proposing?  In other words, can&apos;t we just come up with a flat list of object locks to take (including both table-level and partition-level), sort them, and then acquire them each independently using the non-hierarchical recipe (except as you mention with failfast instead of wait)?  If any fail, then delete them all before re-entering the retry loop.&lt;/p&gt;

&lt;p&gt;Assuming the sorting matches the compound naming scheme, this should guarantee hierarchical lock acquisition order within each table.&lt;/p&gt;

&lt;p&gt;Also, I do not understand the part below.&lt;/p&gt;

&lt;p&gt;&quot;The &apos;X&apos; lock for table T is specified as follows:&lt;br/&gt;
...&lt;br/&gt;
#&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;For all parent znodes of T, call getChildren() without setting the watch flag.&quot;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Do you mean &quot;for the parent znode of T&quot; rather than &quot;all parent znodes of T&quot;, and this is supposed to apply for case where T is actually a partition?&lt;/p&gt;</comment>
                            <comment id="12864512" author="namit" created="Wed, 5 May 2010 21:20:49 +0000"  >&lt;p&gt;@Edward, I agree that the main reason we are tilting towards zookeeper is its ability to do auto-cleanup which is very useful.&lt;br/&gt;
I can add a interface, and there can be 2 implementations: one with zookeeper and other with metastore.&lt;br/&gt;
I will try to address the other suggestion about: &apos;show locks&apos; and &apos;clear locks&apos; - it will be very useful for debugging.&lt;br/&gt;
But, if I am stuck, I will do it in a follow-up jira&lt;/p&gt;</comment>
                            <comment id="12864516" author="namit" created="Wed, 5 May 2010 21:27:16 +0000"  >&lt;p&gt;@John, if we lock the whole flat list of objects, it might be a huge list - to lock a table &apos;T&apos; in &apos;X&apos; mode - we will be locking all the sub-partitions.&lt;br/&gt;
Given that, we have thousands of partitions for some tables, it will just be a problem for debugging (even more, when we have &apos;show locks&apos; etc.)&lt;/p&gt;

&lt;p&gt;Do you mean &quot;for the parent znode of T&quot; rather than &quot;all parent znodes of T&quot;, and this is supposed to apply for case where T is actually a partition?&lt;/p&gt;

&lt;p&gt;--&amp;gt; yes, will fix the wiki&lt;/p&gt;</comment>
                            <comment id="12864520" author="namit" created="Wed, 5 May 2010 21:34:58 +0000"  >&lt;p&gt;Forgot to add before, I was thinking of a one-to-map mapping between a table and a znode.&lt;/p&gt;

&lt;p&gt;For eg: if there are 2 tables: T1 and T2 with partitions T1.p=1, T1.p=2 and T2.p1=1,p2=1 and T2.p1=1,p2=2 respectively, the corresponding znodes will be:&lt;/p&gt;


&lt;p&gt;T1  &lt;br/&gt;
    -&amp;gt; p=1&lt;br/&gt;
    -&amp;gt; p=2&lt;br/&gt;
T2&lt;br/&gt;
    -&amp;gt; p1=1&lt;br/&gt;
                 -&amp;gt;p2=1&lt;br/&gt;
                 -&amp;gt;p2=2&lt;/p&gt;

</comment>
                            <comment id="12864522" author="jvs" created="Wed, 5 May 2010 21:35:48 +0000"  >&lt;p&gt;@Namit:  do we actually have to explicitly X-lock all partitions when we X-lock a table?  Doesn&apos;t the fact that we always S-lock the table before locking specific partitions already serve as a form of intent lock (we can&apos;t get the table X-lock if anyone already has a table S-lock, and we can&apos;t get a table S-lock if someone already has the table X-lock)?&lt;/p&gt;</comment>
                            <comment id="12864528" author="namit" created="Wed, 5 May 2010 21:40:07 +0000"  >&lt;p&gt;Yes, we dont have to X-lock all partitions. But, then before acquiring a S-lock on the partition, we need to check if its parent is not X-locked, which is what I am proposing.&lt;/p&gt;
</comment>
                            <comment id="12864541" author="jvs" created="Wed, 5 May 2010 21:49:37 +0000"  >&lt;p&gt;Right, you get this if for partition p.q.r in t, you add the following to the flat lock list:&lt;/p&gt;

&lt;p&gt;t (S)&lt;br/&gt;
t.p (S)&lt;br/&gt;
t.p.q (S)&lt;br/&gt;
t.p.q.r (S or X depending what the operation is)&lt;/p&gt;

&lt;p&gt;This doesn&apos;t add a lot of extra locks in general since there are more children than parents, it makes the low-level recipe a little simpler, and maybe makes show locks output clearer.&lt;/p&gt;

&lt;p&gt;It might be exactly what you are already proposing, in which case we&apos;re in agreement.&lt;/p&gt;</comment>
                            <comment id="12864554" author="namit" created="Wed, 5 May 2010 22:07:55 +0000"  >&lt;p&gt;Agreed, this is cleaner than what I had. I was checking the parents, you are suggesting locking the parents in &apos;S&apos; mode, which achieves the desired affect,&lt;br/&gt;
but removes the need for hierarchy from the lock manager.&lt;/p&gt;

&lt;p&gt;It is even better given that we may have different lock manager implementations. I will update the wiki&lt;/p&gt;</comment>
                            <comment id="12884111" author="namit" created="Thu, 1 Jul 2010 01:00:16 +0000"  >&lt;p&gt;The unit tests are running right now  (they should succeed) - submitted a patch for review.&lt;/p&gt;


&lt;p&gt;Also, all the jar files (3 of them) from hbase-handler/lib should be moved to lib.&lt;br/&gt;
That is not part of the patch since those files are binary&lt;/p&gt;</comment>
                            <comment id="12884112" author="he yongqiang" created="Thu, 1 Jul 2010 01:03:59 +0000"  >&lt;p&gt;I will take a look.&lt;/p&gt;</comment>
                            <comment id="12884165" author="he yongqiang" created="Thu, 1 Jul 2010 05:04:20 +0000"  >&lt;p&gt;a few questions so far:&lt;br/&gt;
1) can the lock implementation guarantee the atomicity? I mean since the lock&apos;s logic happens in client side, it is possible that two concurrent client get conflicting locks.&lt;br/&gt;
2) about realizing locks. if a client did an unlock, will it also release locks made by other clients? I mean,if a client A did a lock, and then client B did another lock, and client B did an unlock, will client A still hold its lock?&lt;/p&gt;

&lt;p&gt;still reading the code.&lt;/p&gt;</comment>
                            <comment id="12884316" author="namit" created="Thu, 1 Jul 2010 15:38:03 +0000"  >&lt;p&gt;1. No, 2 clients cannot get conflicting locks &amp;#8211; zookeeper will guarantee that, will read again to double-check&lt;br/&gt;
2. If client A cannot get the lock, it will unlock only its own lock.  However, there is no security - if client A does unlock table A explicitly, all locks on A are released&lt;/p&gt;</comment>
                            <comment id="12884342" author="namit" created="Thu, 1 Jul 2010 16:28:19 +0000"  >&lt;p&gt;Confirmed 1&lt;/p&gt;</comment>
                            <comment id="12884343" author="prasadc" created="Thu, 1 Jul 2010 16:28:45 +0000"  >&lt;p&gt;same as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-829&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-829&lt;/a&gt; ?&lt;/p&gt;
</comment>
                            <comment id="12884344" author="prasadc" created="Thu, 1 Jul 2010 16:30:14 +0000"  >&lt;p&gt;I had written up an algorithm to create leases in metastore sometime back. Not sure how useful it is now but if someone wants to implement leases without depending on a 3rd party system this may come handy.&lt;/p&gt;</comment>
                            <comment id="12885631" author="he yongqiang" created="Tue, 6 Jul 2010 18:42:05 +0000"  >&lt;p&gt;I am going to commit this patch in the next few days. Please post your comments if you have any, so we can fix them before this patch gets in.&lt;/p&gt;</comment>
                            <comment id="12896110" author="namit" created="Fri, 6 Aug 2010 18:26:55 +0000"  >&lt;p&gt;The patch updated&lt;/p&gt;</comment>
                            <comment id="12896182" author="jvs" created="Fri, 6 Aug 2010 23:00:15 +0000"  >&lt;p&gt;Added comments here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://review.cloudera.org/r/563/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://review.cloudera.org/r/563/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(doesn&apos;t seem to be adding comments here)&lt;/p&gt;</comment>
                            <comment id="12897152" author="namit" created="Wed, 11 Aug 2010 05:46:57 +0000"  >&lt;p&gt;comments addressed.&lt;/p&gt;

&lt;p&gt;running tests right now - &lt;/p&gt;</comment>
                            <comment id="12897260" author="namit" created="Wed, 11 Aug 2010 13:33:22 +0000"  >&lt;p&gt;minor bug&lt;/p&gt;</comment>
                            <comment id="12897548" author="jvs" created="Thu, 12 Aug 2010 02:14:17 +0000"  >&lt;p&gt;Two configuration questions:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;You have hive.support.concurrency=true in hive-default.xml.  Probably we want it false instead (only on during tests) since most people using Hive won&apos;t have a zookeeper quorum set up?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Isn&apos;t there a default value we can use for hive.zookeeper.client.port?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One lib question:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Zookeeper is now available from maven.  Maybe we should delete the one in hbase-handler/lib and get it via ivy instead of adding it in the top-level lib?  The version we have checked in is 3.2.2, but the maven availability is 3.3.x, so we&apos;d need to test to make sure everything (including hbase-handler) still works with the newer version.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;http://mvnrepository.com/artifact/org.apache.hadoop/zookeeper&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mvnrepository.com/artifact/org.apache.hadoop/zookeeper&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Two cleanups:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;In QTestUtil.java, you left the following code commented out; can we get rid of it?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+      //      for (int i = 0; i &amp;lt; qfiles.length; i++) &lt;/p&gt;
{
+      //        qsetup[i].tearDown();
+      //      }

&lt;ul&gt;
	&lt;li&gt;In DDLTask.java, you left some commented-out debugging code (two instances):&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+        //        console.printError(&quot;conflicting lock present &quot; + tbl + &quot; cannot be locked in mode &quot; + mode);&lt;/p&gt;
</comment>
                            <comment id="12897577" author="namit" created="Thu, 12 Aug 2010 04:49:39 +0000"  >&lt;p&gt;Did the cleanups and changed default value of hive.support.concurrency to false&lt;/p&gt;

&lt;p&gt;Not sure how can we set a default value for hive.zookeeper.client.port?&lt;/p&gt;


&lt;p&gt;Let us do the lib cleanup in a follow-up - filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1533&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12897578" author="namit" created="Thu, 12 Aug 2010 04:56:24 +0000"  >&lt;p&gt;new patch&lt;/p&gt;</comment>
                            <comment id="12897917" author="jvs" created="Thu, 12 Aug 2010 19:40:19 +0000"  >&lt;p&gt;I think ZK default client port would be 2181; see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2305&quot; title=&quot;Client port for ZK has no default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2305&quot;&gt;&lt;del&gt;HBASE-2305&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12897946" author="jvs" created="Thu, 12 Aug 2010 20:55:20 +0000"  >&lt;p&gt;From testing:  the parsed lock mode seems to be case-sensitive:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; lock table blah shared;&lt;br/&gt;
Failed with exception No enum const class org.apache.hadoop.hive.ql.lockmgr.HiveLockMode.shared&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;

&lt;p&gt;If I use lock table blah SHARED it works.&lt;/p&gt;</comment>
                            <comment id="12897953" author="bkm" created="Thu, 12 Aug 2010 21:13:13 +0000"  >&lt;p&gt;Re: One lib question: Zookeeper&lt;/p&gt;

&lt;p&gt;hbase-handler with hbase 0.20.x does not work with zk 3.3.1 but works fine with the version it ships with, zk 3.2.2. Have not investigated what breaks.&lt;/p&gt;</comment>
                            <comment id="12897977" author="jvs" created="Thu, 12 Aug 2010 22:13:02 +0000"  >&lt;p&gt;Namit, I tried testing with a standalone zookeeper via CLI.  Locking a table succeeded, but then show locks didn&apos;t show anything, and unlock said the lock didn&apos;t exist.&lt;/p&gt;

&lt;p&gt;I think the reason is that CLI is creating a new Driver for each statement executed, and when the old Driver is closed, the lock manager is closed along with it (closing the ZooKeeper client instance).  As a result, locks are released immediately after LOCK TABLE is executed.&lt;/p&gt;

&lt;p&gt;When I tested with a thrift server plus two JDBC clients, all was well.  I was able to take a lock from one client and prevent the other client from getting the same lock.  So I guess the thrift server is keeping one Driver around per connection.&lt;/p&gt;</comment>
                            <comment id="12897988" author="jvs" created="Thu, 12 Aug 2010 22:52:01 +0000"  >&lt;p&gt;Here&apos;s a scenario which is not working correctly.  (Tested with thrift server plus JDBC clients.)&lt;/p&gt;

&lt;p&gt;Existing table foo.&lt;/p&gt;

&lt;p&gt;Client 1:  LOCK TABLE foo EXCLUSIVE;&lt;/p&gt;

&lt;p&gt;Client 2:  DROP TABLE foo;&lt;/p&gt;

&lt;p&gt;According to the doc, the DROP TABLE should fail, but it succeeds.  Same is true for LOAD DATA.  Probably the same reason in both cases:  for these commands we don&apos;t register the output in the PREHOOK (only the POSTHOOK).  INSERT is getting blocked correctly since it&apos;s in the PREHOOK.&lt;/p&gt;
</comment>
                            <comment id="12898010" author="jvs" created="Thu, 12 Aug 2010 23:54:57 +0000"  >&lt;p&gt;After seeing some other issues, had a chat with Namit about semantics; here&apos;s what we worked out.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Normally, locks should only be held for duration of statement execution.&lt;/li&gt;
	&lt;li&gt;However, LOCK TABLE should take a global lock (not tied to any particular session or statement).&lt;/li&gt;
	&lt;li&gt;UNLOCK TABLE should remove both kinds of lock (statement-level and global).  Likewise, SHOW LOCKS shows all.&lt;/li&gt;
	&lt;li&gt;For fetching results, we&apos;ll need a parameter to control whether a dirty read is possible.  Normally, this is not an issue since we&apos;re fetching from saved temp results, but when using select * from t to fetch directly from the original table, this behavior makes a difference.  To prevent dirty reads, we&apos;ll need the statement-level lock to span the duration of the fetch.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;To avoid leaks, we need to make sure that once we create a ZooKeeper client, we always close it.&lt;/p&gt;</comment>
                            <comment id="12898012" author="jvs" created="Thu, 12 Aug 2010 23:58:50 +0000"  >&lt;p&gt;Also, as a followup, need to add client info such as hostname, process ID to SHOW LOCKS.&lt;/p&gt;</comment>
                            <comment id="12899320" author="jsensarma" created="Tue, 17 Aug 2010 07:57:47 +0000"  >&lt;p&gt;a little bummed that locks need to be held for entire query execution. that could mean a writer blocking readers for hours.&lt;/p&gt;

&lt;p&gt;hive&apos;s query plans seem to be of two distinct stages:&lt;br/&gt;
1. read a bunch of stuff, compute intermediate/final data&lt;br/&gt;
2. move final data into output locations&lt;/p&gt;

&lt;p&gt;ie. - a single query never reads what it writes (into a final output location). even if #1 and #2 are mingled today - they can easily be put in order.&lt;/p&gt;

&lt;p&gt;in that sense - we only need to get shared locks for all read entities involved in #1 to begin with. once phase #1 is done, we can drop all the read locks and get the exclusive locks for all the write entities in #2, perform #2 and quit. that way exclusive locks are held for a very short duration. i think this scheme is similarly deadlock free (now there are two independent lock acquire/release phases - and each of them can lock stuff in lex. order).&lt;/p&gt;</comment>
                            <comment id="12899347" author="jsensarma" created="Tue, 17 Aug 2010 08:50:57 +0000"  >&lt;p&gt;also - i am missing something here:&lt;/p&gt;

&lt;p&gt;+      for (WriteEntity output : plan.getOutputs()) &lt;/p&gt;
{
+        lockObjects.addAll(getLockObjects(output.getTable(), output.getPartition(), HiveLockMode.EXCLUSIVE));
+      }

&lt;p&gt;getLockObjects():&lt;/p&gt;

&lt;p&gt;+    if (p != null) &lt;/p&gt;
{
...
+      locks.add(new LockObject(new HiveLockObject(p.getTable()), mode));
+    }

&lt;p&gt;doesn&apos;t this end up locking the table in exclusive mode if a partition is being written to? (whereas the design talks about locking the table in shared mode only?)&lt;/p&gt;</comment>
                            <comment id="12899640" author="namit" created="Tue, 17 Aug 2010 23:03:24 +0000"  >&lt;p&gt;The partition being written to is locked in exclusive mode - the table should be locked in shared mode.&lt;br/&gt;
The write entity should only consist of the partition.&lt;/p&gt;

&lt;p&gt;There might be a bug there - &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1548&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1548&lt;/a&gt; should populate the inputs and outputs appropriately.&lt;br/&gt;
I will start on this now.&lt;/p&gt;</comment>
                            <comment id="12899647" author="jsensarma" created="Tue, 17 Aug 2010 23:18:24 +0000"  >&lt;p&gt;can u check the getLockObjects() routine. it seemed to me that even u called with partition in X mode - it would add the table to the list of objects to be locked as well (in the same X mode).&lt;/p&gt;

&lt;p&gt;i think we should, at least, as follow on make the optimization to not lock write entities for the duration of the query.&lt;/p&gt;</comment>
                            <comment id="12899918" author="namit" created="Wed, 18 Aug 2010 17:16:48 +0000"  >&lt;p&gt;Agreed on the bug in getLockObjects() - will have a new patch.&lt;/p&gt;


&lt;p&gt;Filed a new patch for the followup: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1557&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1557&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12900128" author="namit" created="Thu, 19 Aug 2010 00:43:44 +0000"  >&lt;p&gt;Fixed a lot of bugs, added a lot of comments, tested it with a zooKeeper cluster of  3 nodes.&lt;br/&gt;
select * currently performs a dirty read, we can add a new parameter to change that behavior if need be.&lt;/p&gt;
</comment>
                            <comment id="12900522" author="jvs" created="Thu, 19 Aug 2010 23:19:22 +0000"  >&lt;p&gt;Did some more testing with latest:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;thrift server is now broken so I&apos;m not able to test multi-conn that way (I can use CLI + MySQL metastore instead though)&lt;/li&gt;
	&lt;li&gt;zookeeper communication is eager, so we start a zk client conn for stuff like show tables and describe table; can we make it lazy instead?&lt;/li&gt;
	&lt;li&gt;EXCLUSIVE/SHARED keyword is still case sensitive&lt;/li&gt;
	&lt;li&gt;something I noticed before but forgot to mention:  we&apos;re getting NPE noise in the log (below); can we disable the watcher or supply a dummy?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;10/08/19 16:12:38 ERROR zookeeper.ClientCnxn: Error while calling watcher &lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:425)&lt;/p&gt;</comment>
                            <comment id="12900530" author="jvs" created="Thu, 19 Aug 2010 23:44:00 +0000"  >&lt;p&gt;Some notes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;A typical administrative sequence will involve taking a global lock on the object(s) in question, then doing set hive.support.concurrency=false, then doing  the housekeeping work, then doing set hive.support.concurrency=true, then unlocking the object(s).&lt;/li&gt;
	&lt;li&gt;select * from t still takes a test lock at the beginning, but does not hold it for the duration of the fetch.  In order to get a completely dirty read (skipping the lock), use set hive.support.concurrency=false for that session.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These don&apos;t require fixes or followups; they&apos;re just usage notes.&lt;/p&gt;</comment>
                            <comment id="12900532" author="jvs" created="Thu, 19 Aug 2010 23:58:07 +0000"  >&lt;p&gt;The method name &quot;getLocks&quot; is used to mean two different things:  in one context it means &quot;get me a list of locks which already exist&quot;, whereas in another (private method in Driver) it means &quot;acquire these locks&quot;.  The second one should be renamed to acquireLocks to avoid confusion.&lt;/p&gt;</comment>
                            <comment id="12901259" author="namit" created="Mon, 23 Aug 2010 04:47:39 +0000"  >&lt;p&gt;another - hopefully, final patch&lt;/p&gt;</comment>
                            <comment id="12901532" author="namit" created="Mon, 23 Aug 2010 18:52:01 +0000"  >&lt;p&gt;made lock manager creation lazy - ran the relevant tests,&lt;br/&gt;
am running all tests now.&lt;/p&gt;</comment>
                            <comment id="12901553" author="jvs" created="Mon, 23 Aug 2010 19:32:41 +0000"  >&lt;p&gt;With latest patch I am still seeing this in ZK log for each show tables:&lt;/p&gt;


&lt;p&gt;2010-08-23 12:31:53,003 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerCxn.Factory:2181:NIOServerCnxn@607&amp;#93;&lt;/span&gt; - Connected to /fe80:0:0:0:0:0:0:1%1:59209 lastZxid 0&lt;br/&gt;
2010-08-23 12:31:53,003 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerCxn.Factory:2181:NIOServerCnxn@639&amp;#93;&lt;/span&gt; - Creating new session 0x12aa06e84940003&lt;br/&gt;
2010-08-23 12:31:53,009 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SyncThread:0:NIOServerCnxn@992&amp;#93;&lt;/span&gt; - Finished init of 0x12aa06e84940003 valid:true&lt;br/&gt;
2010-08-23 12:31:53,086 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;ProcessThread:-1:PrepRequestProcessor@384&amp;#93;&lt;/span&gt; - Processed session termination request for id: 0x12aa06e84940003&lt;br/&gt;
2010-08-23 12:31:53,088 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SyncThread:0:NIOServerCnxn@857&amp;#93;&lt;/span&gt; - closing session:0x12aa06e84940003 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/fe80:0:0:0:0:0:0:1%1:2181 remote=/fe80:0:0:0:0:0:0:1%1:59209&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="12901554" author="jvs" created="Mon, 23 Aug 2010 19:35:54 +0000"  >&lt;p&gt;I think you need to check to see whether there are actually any locks to be acquired, and if not, skip checkLockManager.&lt;/p&gt;</comment>
                            <comment id="12901571" author="namit" created="Mon, 23 Aug 2010 20:07:42 +0000"  >&lt;p&gt;You must have set: hive.supports.concurrency to true.&lt;/p&gt;

&lt;p&gt;The only case that you are trying to optimize is: &apos;show tables&apos;, &apos;desc ..&apos; etc.&lt;br/&gt;
The problem is that &apos;show Locks&apos; also comes under the same category - no locks need to be acquired.&lt;br/&gt;
I didnt want to special case &apos;show Locks&apos;&lt;/p&gt;</comment>
                            <comment id="12901594" author="jvs" created="Mon, 23 Aug 2010 21:32:25 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="12901609" author="jvs" created="Mon, 23 Aug 2010 21:48:29 +0000"  >&lt;p&gt;Oops, ant test is giving me this build error:&lt;/p&gt;


&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /data/users/jsichi/open/commit-trunk/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java:939: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : class MiniZooKeeperCluster&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hive.ql.QTestUtil.QTestSetup&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     private MiniZooKeeperCluster zooKeeperCluster = null;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;             ^&lt;/p&gt;

&lt;p&gt;I had only moved zookeeper-3.2.2.jar from hbase-handler/lib to top-level lib (but not the hbase-*.jar).  I guess we need to move all of them.&lt;/p&gt;</comment>
                            <comment id="12901932" author="jvs" created="Tue, 24 Aug 2010 15:49:05 +0000"  >&lt;p&gt;Committed.  Thanks Namit!&lt;/p&gt;</comment>
                            <comment id="15661064" author="lefty@hortonworks.com" created="Sun, 13 Nov 2016 07:54:43 +0000"  >&lt;p&gt;Doc note:  This adds several configuration parameters to HiveConf.java:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hive.lockmgr.zookeeper.default.partition.name&lt;/li&gt;
	&lt;li&gt;hive.support.concurrency&lt;/li&gt;
	&lt;li&gt;hive.lock.manager&lt;/li&gt;
	&lt;li&gt;hive.lock.numretries&lt;/li&gt;
	&lt;li&gt;hive.lock.sleep.between.retries&lt;/li&gt;
	&lt;li&gt;hive.zookeeper.quorum&lt;/li&gt;
	&lt;li&gt;hive.zookeeper.client.port&lt;/li&gt;
	&lt;li&gt;hive.zookeeper.session.timeout&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;They are documented in the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Locking&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Locking &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12435644">HIVE-829</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12415536">HIVE-306</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12464987">HIVE-1356</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12471926">HIVE-1557</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12448464" name="hive.1293.1.patch" size="88587" author="namit" created="Thu, 1 Jul 2010 00:58:45 +0000"/>
                            <attachment id="12451448" name="hive.1293.2.patch" size="90804" author="namit" created="Fri, 6 Aug 2010 18:26:55 +0000"/>
                            <attachment id="12451747" name="hive.1293.3.patch" size="101181" author="namit" created="Wed, 11 Aug 2010 05:46:57 +0000"/>
                            <attachment id="12451777" name="hive.1293.4.patch" size="102590" author="namit" created="Wed, 11 Aug 2010 13:33:22 +0000"/>
                            <attachment id="12451860" name="hive.1293.5.patch" size="103149" author="namit" created="Thu, 12 Aug 2010 04:56:24 +0000"/>
                            <attachment id="12452475" name="hive.1293.6.patch" size="119486" author="namit" created="Thu, 19 Aug 2010 00:41:35 +0000"/>
                            <attachment id="12452773" name="hive.1293.7.patch" size="124540" author="namit" created="Mon, 23 Aug 2010 04:47:38 +0000"/>
                            <attachment id="12452842" name="hive.1293.8.patch" size="123950" author="namit" created="Mon, 23 Aug 2010 18:52:01 +0000"/>
                            <attachment id="12452857" name="hive.1293.9.patch" size="124974" author="namit" created="Mon, 23 Aug 2010 21:24:56 +0000"/>
                            <attachment id="12448501" name="hive_leases.txt" size="3395" author="prasadc" created="Thu, 1 Jul 2010 16:30:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Apr 2010 21:45:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72990</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0led3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1294] HIVE_AUX_JARS_PATH interferes with startup of Hive Web Interface</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1294</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The Hive Webserver fails to startup with the following error message, if HIVE_AUX_JARS_PATH environment variable is set (works fine if unset).   &lt;/p&gt;

&lt;p&gt;$ build/dist/bin/hive --service hwi&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.IOException: Error opening job jar: -libjars&lt;br/&gt;
       at org.apache.hadoop.util.RunJar.main(RunJar.java:90)&lt;br/&gt;
Caused by: java.util.zip.ZipException: error in opening zip file&lt;br/&gt;
       at java.util.zip.ZipFile.open(Native Method)&lt;br/&gt;
       at java.util.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:114)&lt;br/&gt;
       at java.util.jar.JarFile.&amp;lt;init&amp;gt;(JarFile.java:133)&lt;br/&gt;
       at java.util.jar.JarFile.&amp;lt;init&amp;gt;(JarFile.java:70)&lt;br/&gt;
       at org.apache.hadoop.util.RunJar.main(RunJar.java:88)&lt;/p&gt;

&lt;p&gt;Slightly modifying the command line to launch hadoop in hwi.sh solves the problem:&lt;/p&gt;

&lt;p&gt;$ diff bin/ext/hwi.sh  /tmp/new-hwi.sh&lt;br/&gt;
28c28&lt;br/&gt;
&amp;lt;   exec $HADOOP jar $AUX_JARS_CMD_LINE ${HWI_JAR_FILE} $CLASS $HIVE_OPTS &quot;$@&quot;&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt;   exec $HADOOP jar ${HWI_JAR_FILE}  $CLASS $AUX_JARS_CMD_LINE $HIVE_OPTS &quot;$@&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461492">HIVE-1294</key>
            <summary>HIVE_AUX_JARS_PATH interferes with startup of Hive Web Interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="dilipjoseph">Dilip Joseph</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2010 05:42:25 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:46 +0000</updated>
                            <resolved>Sat, 31 Jul 2010 05:19:36 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12893662" author="appodictic" created="Thu, 29 Jul 2010 15:35:43 +0000"  >&lt;p&gt;Hwi does not start correctly without this patch.&lt;/p&gt;</comment>
                            <comment id="12894122" author="jvs" created="Fri, 30 Jul 2010 19:39:13 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="12894127" author="jvs" created="Fri, 30 Jul 2010 19:49:57 +0000"  >&lt;p&gt;Actually I guess tests are pretty much guaranteed to pass since we don&apos;t have any.&lt;/p&gt;</comment>
                            <comment id="12894250" author="jvs" created="Sat, 31 Jul 2010 05:19:36 +0000"  >&lt;p&gt;Committed to branch and trunk.  Thanks Edward!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12450836" name="hive-1294.patch.txt" size="1261" author="appodictic" created="Thu, 29 Jul 2010 15:32:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Jul 2010 15:35:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ledb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1295] facilitate HBase bulk loads from Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1295</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HBase supports a bulk load procedure:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hadoop.apache.org/hbase/docs/r0.20.2/api/org/apache/hadoop/hbase/mapreduce/package-summary.html#bulk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/hbase/docs/r0.20.2/api/org/apache/hadoop/hbase/mapreduce/package-summary.html#bulk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We would like to add support to Hive so that users can bulk load HBase from Hive without having to write any map/reduce code.&lt;/p&gt;

&lt;p&gt;Ideally, this could be done with a single INSERT statement targeting the HBase storage handler (with an option set to request bulk load instead of row-level inserts).&lt;/p&gt;

&lt;p&gt;However, that will take a lot of work, so this JIRA is a first step to allow the bulk load files to be prepared inside of Hive via a sequence of SQL statements and then pushed into HBase via the loadtable.rb script.&lt;/p&gt;

&lt;p&gt;Note that until &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1861&quot; title=&quot;Multi-Family support for bulk upload tools (HFileOutputFormat / loadtable.rb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1861&quot;&gt;&lt;del&gt;HBASE-1861&lt;/del&gt;&lt;/a&gt; is implemented, the bulk load target table can only have a single column family.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461587">HIVE-1295</key>
            <summary>facilitate HBase bulk loads from Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2010 20:54:32 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:30 +0000</updated>
                            <resolved>Wed, 14 Apr 2010 16:04:22 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12856173" author="jvs" created="Mon, 12 Apr 2010 21:09:32 +0000"  >&lt;p&gt;I&apos;m still working on testing out the procedure beyond toy cases; here&apos;s the doc:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/HBaseBulkLoad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/HBaseBulkLoad&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12856183" author="jvs" created="Mon, 12 Apr 2010 21:26:16 +0000"  >&lt;p&gt;Notes on the patch:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;After the recent Apache JIRA downtime, the ASF copyright license assignment radio button is no longer here in the UI, so I couldn&apos;t click that to grant to Apache, but I hereby grant it etc etc (and I&apos;m a Facebook employee anyway, so I think my contribution is covered under the corporate license assignment).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The unit test requires MiniMR mode (instead of local mode) because it needs multiple reducers in order for the custom partitioner to kick in.  Accordingly, I named the file with a .m suffix (instead of .q) to keep it segregated from the other unit tests.  To run it, use -Dtestcase=TestHBaseMinimrCliDriver.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I had to make one change to the classpath definition in build-common.xml to avoid a webapp ordering issue from HBase and Hadoop being loaded in the same Jetty instance.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I made one change to ql/build.xml&apos;s classpath (adding jsp-2.1 jars).  This was not actually needed for my hbase-handler test to run, but it fixes an existing breakage with running ql tests with -Dclustermode=miniMR, needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-117&quot; title=&quot;hive regression tests should also execute jobs in non-local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-117&quot;&gt;HIVE-117&lt;/a&gt;.  (The job tracker wasn&apos;t starting because it wasn&apos;t able to load some JSP API classes.)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12856186" author="jvs" created="Mon, 12 Apr 2010 21:32:15 +0000"  >&lt;p&gt;The copyright grant issue is &lt;a href=&quot;https://issues.apache.org/jira/browse/INFRA-2605&quot; title=&quot;When attaching files to an issue, JIRA is no longer presenting the Grant under ASL 2.0 option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;INFRA-2605&quot;&gt;&lt;del&gt;INFRA-2605&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12856714" author="namit" created="Wed, 14 Apr 2010 01:07:04 +0000"  >&lt;p&gt;I will take a look&lt;/p&gt;</comment>
                            <comment id="12856943" author="namit" created="Wed, 14 Apr 2010 16:04:22 +0000"  >&lt;p&gt;Committed. Thanks John&lt;/p&gt;</comment>
                            <comment id="12858018" author="jvs" created="Fri, 16 Apr 2010 21:54:14 +0000"  >&lt;p&gt;While testing on a different data set, I found some bugs, so I&apos;ll submit a followup patch for that.&lt;/p&gt;</comment>
                            <comment id="12860064" author="jvs" created="Thu, 22 Apr 2010 23:16:17 +0000"  >&lt;p&gt;Followup logged as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1321&quot; title=&quot;bugs with temp directories, trailing blank fields in HBase bulk load&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1321&quot;&gt;&lt;del&gt;HIVE-1321&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12462826">HIVE-1321</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12518515">HIVE-2365</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12441550" name="ASF.LICENSE.NOT.GRANTED--HIVE-1295.1.patch" size="21961" author="jvs" created="Mon, 12 Apr 2010 21:13:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Apr 2010 01:07:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65522</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ledj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122979</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1296] CLI set and set -v commands should dump properties in alphabetical order</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1296</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This makes it easier to find properties by name when dumping them all at once.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461602">HIVE-1296</key>
            <summary>CLI set and set -v commands should dump properties in alphabetical order</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2010 00:06:46 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:38 +0000</updated>
                            <resolved>Mon, 12 Apr 2010 21:28:56 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12855505" author="jvs" created="Fri, 9 Apr 2010 18:10:32 +0000"  >&lt;p&gt;I couldn&apos;t add a diff-based test since some of the output varies by run.&lt;/p&gt;</comment>
                            <comment id="12856184" author="nzhang" created="Mon, 12 Apr 2010 21:28:55 +0000"  >&lt;p&gt;Committed. Thanks John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441324" name="HIVE-1296.1.patch" size="1295" author="jvs" created="Fri, 9 Apr 2010 18:09:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Apr 2010 21:28:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ledr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122980</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1297] error message in Hive.checkPaths dumps Java array address instead of path string</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1297</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (item.isDir()) {
-            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HiveException(&lt;span class=&quot;code-quote&quot;&gt;&quot;checkPaths: &quot;&lt;/span&gt; + src.toString()
-                + &lt;span class=&quot;code-quote&quot;&gt;&quot; has nested directory&quot;&lt;/span&gt; + item.toString());
+            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HiveException(&lt;span class=&quot;code-quote&quot;&gt;&quot;checkPaths: &quot;&lt;/span&gt; + src.getPath()
+                + &lt;span class=&quot;code-quote&quot;&gt;&quot; has nested directory &quot;&lt;/span&gt; + item.getPath());
           }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12461603">HIVE-1297</key>
            <summary>error message in Hive.checkPaths dumps Java array address instead of path string</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2010 00:13:41 +0000</created>
                <updated>Sat, 17 Dec 2011 00:04:04 +0000</updated>
                            <resolved>Fri, 16 Apr 2010 03:59:25 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12855502" author="jvs" created="Fri, 9 Apr 2010 18:08:16 +0000"  >&lt;p&gt;No test since this is trivial.&lt;/p&gt;</comment>
                            <comment id="12856146" author="nzhang" created="Mon, 12 Apr 2010 20:02:06 +0000"  >&lt;p&gt;looks good. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12856207" author="nzhang" created="Mon, 12 Apr 2010 22:24:37 +0000"  >&lt;p&gt;John, TestNegativeCliDriver failed with 35 diffs. Can you take a look?&lt;/p&gt;</comment>
                            <comment id="12856209" author="jvs" created="Mon, 12 Apr 2010 22:29:31 +0000"  >&lt;p&gt;Were the failures actually related to my change?&lt;/p&gt;

&lt;p&gt;I ran through and everything passed...and the &quot;nested directory&quot; string doesn&apos;t even appear in ql/src/test/results/clientnegative/*.out.&lt;/p&gt;</comment>
                            <comment id="12857659" author="nzhang" created="Fri, 16 Apr 2010 03:59:25 +0000"  >&lt;p&gt;This has already been fixed in another patch. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441322" name="HIVE-1297.1.patch" size="768" author="jvs" created="Fri, 9 Apr 2010 18:07:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Apr 2010 20:02:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72987</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ledz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122981</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1298] unit test symlink_text_input_format.q needs ORDER BY for determinism</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1298</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Failed on my Mac; I&apos;ll add the test output in the comments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461695">HIVE-1298</key>
            <summary>unit test symlink_text_input_format.q needs ORDER BY for determinism</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2010 17:59:06 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:38 +0000</updated>
                            <resolved>Tue, 13 Apr 2010 20:27:11 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12855501" author="jvs" created="Fri, 9 Apr 2010 18:00:52 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] 117,118c117,119
    [junit] &amp;lt; POSTHOOK: Output: file:/data/users/jsichi/open/hive-trunk/build/ql/scratchdir/hive_2010-04-09_10-54-45_171_3262039922264158768/10000
    [junit] &amp;lt; 22
    [junit] ---
    [junit] &amp;gt; POSTHOOK: Output: file:/data/users/guanghao/w1/trunk/VENDOR.hive/trunk/build/ql/scratchdir/hive_2010-03-31_16-09-55_939_1571446349980486687/10000
    [junit] &amp;gt; 11
    [junit] &amp;gt; 12
    [junit] 120,122c121
    [junit] &amp;lt; 14
    [junit] &amp;lt; 15
    [junit] &amp;lt; 18
    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1
    [junit] ---
    [junit] See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.
    [junit] &amp;gt; 17
    [junit] 123a123
    [junit] &amp;gt; 28
    [junit] 128,129c128
    [junit] &amp;lt; 11
    [junit] &amp;lt; 12
    [junit] ---
    [junit] &amp;gt; 22
    [junit] 131c130,132
    [junit] &amp;lt; 17
    [junit] ---
    [junit] &amp;gt; 14
    [junit] Exception: Client execution results failed with error code = 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12855511" author="nzhang" created="Fri, 9 Apr 2010 18:28:19 +0000"  >&lt;p&gt;I think the test should add addition order by keys to make the result unique. I&apos;ve seen this in my local test for another patch. &lt;/p&gt;</comment>
                            <comment id="12856467" author="jvs" created="Tue, 13 Apr 2010 16:16:35 +0000"  >&lt;p&gt;This has been causing the Apache Hudson instance to fail for over a week now, so I&apos;m increasing the priority.  &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.20/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.20/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12856507" author="nzhang" created="Tue, 13 Apr 2010 17:24:05 +0000"  >&lt;p&gt;separated the related diff to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1298&quot; title=&quot;unit test symlink_text_input_format.q needs ORDER BY for determinism&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1298&quot;&gt;&lt;del&gt;HIVE-1298&lt;/del&gt;&lt;/a&gt;.patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1002&quot; title=&quot;multi-partition inserts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1002&quot;&gt;&lt;del&gt;HIVE-1002&lt;/del&gt;&lt;/a&gt; patch. &lt;/p&gt;</comment>
                            <comment id="12856589" author="jvs" created="Tue, 13 Apr 2010 20:02:33 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12856597" author="namit" created="Tue, 13 Apr 2010 20:20:38 +0000"  >&lt;p&gt;Will commit&lt;/p&gt;</comment>
                            <comment id="12856602" author="namit" created="Tue, 13 Apr 2010 20:27:11 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441624" name="ASF.LICENSE.NOT.GRANTED--HIVE-1298.patch" size="9126" author="nzhang" created="Tue, 13 Apr 2010 17:24:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Apr 2010 18:28:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lee7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122982</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1299] support for changing the number of buckets at a partition level</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1299</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Instead of maintaining the number of buckets at a table level, we need a way to alter the number of buckets at a partition level.&lt;/p&gt;

&lt;p&gt;All the operations which take advantage of bucketing should continue to work - sampling, joins - though they may become&lt;br/&gt;
sub-optimal.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461699">HIVE-1299</key>
            <summary>support for changing the number of buckets at a partition level</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2010 18:25:24 +0000</created>
                <updated>Wed, 16 Jun 2010 02:00:04 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1300] support: alter table touch partition</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1300</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In some cases, the user wants to touch a partition, since some other operations might be performed on the hdfs directories.&lt;br/&gt;
Currently, there is no way to do that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461889">HIVE-1300</key>
            <summary>support: alter table touch partition</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Apr 2010 18:27:51 +0000</created>
                <updated>Sat, 17 Dec 2011 00:04:01 +0000</updated>
                            <resolved>Tue, 13 Apr 2010 21:52:40 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12856325" author="pauly" created="Tue, 13 Apr 2010 07:03:51 +0000"  >&lt;p&gt;Preliminary patch. Added an ALTER ... UPDATE for partitions to force firing of the hooks but I think it should be added for non-partitioned tables as well.&lt;/p&gt;</comment>
                            <comment id="12856538" author="namit" created="Tue, 13 Apr 2010 18:23:57 +0000"  >&lt;p&gt;Can you add a negative test also ? The partition does not exist.&lt;br/&gt;
Can you file a follow-up jira for the same functionality for a non-partitioned table ?&lt;/p&gt;

&lt;p&gt;Also, can you confirm that no table internally is using &apos;UPDATE&apos; as a column name.&lt;/p&gt;</comment>
                            <comment id="12856580" author="pauly" created="Tue, 13 Apr 2010 19:46:58 +0000"  >&lt;ul&gt;
	&lt;li&gt;Changed command name to touch, as it seemed more appropriate&lt;/li&gt;
	&lt;li&gt;Added touch for non-partitioned tables&lt;/li&gt;
	&lt;li&gt;Added negative tests&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12856592" author="namit" created="Tue, 13 Apr 2010 20:03:58 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass and Paul verifies that TOUCH can be converted into a reserved keyword&lt;/p&gt;</comment>
                            <comment id="12856644" author="namit" created="Tue, 13 Apr 2010 21:52:40 +0000"  >&lt;p&gt;Committed. Thanks Paul&lt;/p&gt;</comment>
                            <comment id="12862839" author="jvs" created="Fri, 30 Apr 2010 20:00:04 +0000"  >&lt;p&gt;Paul, could you update the wiki for this feature?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/LanguageManual/DDL#Alter_Table_Statements&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/LanguageManual/DDL#Alter_Table_Statements&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12862861" author="pauly" created="Fri, 30 Apr 2010 20:57:49 +0000"  >&lt;p&gt;Wiki has been updated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441589" name="ASF.LICENSE.NOT.GRANTED--HIVE-1300.1.patch" size="13456" author="pauly" created="Tue, 13 Apr 2010 07:03:51 +0000"/>
                            <attachment id="12441639" name="ASF.LICENSE.NOT.GRANTED--HIVE-1300.2.patch" size="15936" author="pauly" created="Tue, 13 Apr 2010 19:46:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Apr 2010 07:03:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122984</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1301] RAND() should be RAND_UNIF(); also, we should create RAND_NORM() and add options</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1301</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The generation of pseudorandom data is very useful, but would be even MORE useful if we had a few levers to pull.&lt;/p&gt;

&lt;p&gt;Currently, RAND() generates a random number pulled from a uniform distribution between 0 and 1. It would be great if we could user-specify the min and max because that is a more elegant way to write code: RAND()*200+50 will generate the same thing as RAND_UNIF(min=50,max=250) but the latter is a much better way to express this in a readable manner.&lt;/p&gt;

&lt;p&gt;Similarly, it would be useful to have non-uniform random data for statistical purposes. RAND_NORM(mean=0,sd=1) &lt;/p&gt;</description>
                <environment></environment>
        <key id="12461900">HIVE-1301</key>
            <summary>RAND() should be RAND_UNIF(); also, we should create RAND_NORM() and add options</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Apr 2010 21:54:28 +0000</created>
                <updated>Tue, 5 Apr 2011 22:04:57 +0000</updated>
                                                                            <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1302] describe parse_url throws an error</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1302</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;descHive history file=/tmp/njain/hive_job_log_njain_201004121528_1840617354.txt&lt;br/&gt;
hive&amp;gt; describe parse_url;&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;br/&gt;
hive&amp;gt; describe extended parse_url;&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;br/&gt;
hive&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;njain@dev029 clientpositive&amp;#93;&lt;/span&gt;$ &lt;/p&gt;</description>
                <environment></environment>
        <key id="12461905">HIVE-1302</key>
            <summary>describe parse_url throws an error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Apr 2010 22:30:25 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:06 +0000</updated>
                            <resolved>Sun, 6 Nov 2011 21:57:07 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12856264" author="cwsteinbach" created="Tue, 13 Apr 2010 01:35:38 +0000"  >&lt;p&gt;It works for me:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; describe function parse_url;
describe function parse_url;
OK
parse_url(url, partToExtract[, key]) - extracts a part from a URL
Time taken: 1.09 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is the point that &quot;describe &amp;lt;tablename&amp;gt;&quot; should return a friendlier error message&lt;br/&gt;
when &amp;lt;tablename&amp;gt; does not exist, e.g. &quot;Table &amp;lt;tablename&amp;gt; does not exist&quot;?&lt;/p&gt;

</comment>
                            <comment id="13145129" author="ashutoshc" created="Sun, 6 Nov 2011 21:57:07 +0000"  >&lt;p&gt;Fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11&quot; title=&quot;better error code from Hive describe command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11&quot;&gt;&lt;del&gt;HIVE-11&lt;/del&gt;&lt;/a&gt; which results in a better error message.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12404715">HIVE-11</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Apr 2010 01:35:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>624</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lef3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1303] Adding/selecting many external partitions tables in one session eventually fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1303</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;echo &quot;create external table if not exists edtest ( dat string ) partitioned by (dummy string) location &apos;/tmp/a&apos;;&quot; &amp;gt; test.q&lt;br/&gt;
 for i in &lt;/p&gt;
{1..3000}
&lt;p&gt; ; do echo &quot;alter table ed_test add partition (dummy=&apos;${i}&apos;) location &apos;/tmp/duh&apos;;&quot; ; done &amp;gt;&amp;gt; test.q&lt;br/&gt;
hive -f test.q&lt;/p&gt;

&lt;p&gt;Also, there are problems working with this type of table as well. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;$ hive -e &quot;explain select * from XXXXX_action &quot;&lt;br/&gt;
Hive history file=/tmp/XXXXXX/hive_job_log_media6_201004121029_170696698.txt&lt;br/&gt;
FAILED: Error in semantic analysis: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXXX&apos; (using password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXXX&apos; (using password: YES)&lt;/p&gt;

&lt;p&gt;Interestingly enough if we specify some partitions we can dodge this error. I get the fealing that the select * is trying to select too many partitions and causing this error.&lt;/p&gt;

&lt;p&gt;2010-04-12 10:33:02,789 ERROR metadata.Hive (Hive.java:getPartition(629)) - javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;rs01&lt;br/&gt;
.sd.pl.pvt&apos; (using password: YES)&lt;br/&gt;
    at org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:289)&lt;br/&gt;
    at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:274)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:551)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMPartition(ObjectStore.java:716)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getPartition(ObjectStore.java:704)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_partition(HiveMetaStore.java:593)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getPartition(HiveMetaStoreClient.java:418)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:620)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:215)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:4883)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5224)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:44)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:251)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
NestedThrowablesStackTrace:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:946)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:885)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3436)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1247)&lt;br/&gt;
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2775)&lt;br/&gt;
    at com.mysql.jdbc.Connection.&amp;lt;init&amp;gt;(Connection.java:1555)&lt;br/&gt;
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:142)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:118)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionProviderPriorityList.getConnection(ConnectionProviderPriorityList.java:59)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:458)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getXAResource(ConnectionFactoryImpl.java:418)&lt;br/&gt;
    at org.datanucleus.ConnectionManagerImpl.enlistResource(ConnectionManagerImpl.java:329)&lt;br/&gt;
    at org.datanucleus.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:210)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl.getConnection(ConnectionFactoryImpl.java:345)&lt;br/&gt;
    at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:267)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.SQLEvaluator.evaluate(SQLEvaluator.java:91)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.JDOQLQuery.performExecute(JDOQLQuery.java:287)&lt;br/&gt;
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1475)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.JDOQLQuery.executeQuery(JDOQLQuery.java:244)&lt;br/&gt;
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1357)&lt;br/&gt;
    at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:265)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:551)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMPartition(ObjectStore.java:716)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getPartition(ObjectStore.java:704)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_partition(HiveMetaStore.java:593)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getPartition(HiveMetaStoreClient.java:418)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:620)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:215)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:4883)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5224)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:44)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:251)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;/p&gt;

&lt;p&gt;2010-04-12 10:33:02,790 ERROR parse.SemanticAnalyzer (SemanticAnalyzer.java:genMapRedTasks(4886)) - org.apache.hadoop.hive.ql.metadata.HiveExcepti&lt;br/&gt;
on: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:630)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:215)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:4883)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5224)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:44)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:251)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Caused by: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:289)&lt;br/&gt;
    at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:274)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:551)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMPartition(ObjectStore.java:716)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getPartition(ObjectStore.java:704)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_partition(HiveMetaStore.java:593)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getPartition(HiveMetaStoreClient.java:418)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:620)&lt;br/&gt;
    ... 17 more&lt;br/&gt;
Caused by: java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:946)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:885)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3436)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1247)&lt;br/&gt;
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2775)&lt;br/&gt;
    at com.mysql.jdbc.Connection.&amp;lt;init&amp;gt;(Connection.java:1555)&lt;br/&gt;
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:142)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:118)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionProviderPriorityList.getConnection(ConnectionProviderPriorityList.java:59)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:458)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getXAResource(ConnectionFactoryImpl.java:418)&lt;br/&gt;
    at org.datanucleus.ConnectionManagerImpl.enlistResource(ConnectionManagerImpl.java:329)&lt;br/&gt;
    at org.datanucleus.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:210)&lt;/p&gt;

&lt;p&gt;    at org.datanucleus.store.rdbms.ConnectionFactoryImpl.getConnection(ConnectionFactoryImpl.java:345)&lt;br/&gt;
    at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:267)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.SQLEvaluator.evaluate(SQLEvaluator.java:91)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.JDOQLQuery.performExecute(JDOQLQuery.java:287)&lt;br/&gt;
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1475)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.JDOQLQuery.executeQuery(JDOQLQuery.java:244)&lt;br/&gt;
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1357)&lt;br/&gt;
    at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:265)&lt;br/&gt;
    ... 23 more&lt;/p&gt;

&lt;p&gt;2010-04-12 10:33:02,793 ERROR ql.Driver (SessionState.java:printError(248)) - FAILED: Error in semantic analysis: javax.jdo.JDODataStoreException:&lt;br/&gt;
 Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
org.apache.hadoop.hive.ql.parse.SemanticException: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using passwo&lt;br/&gt;
rd: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:4887)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5224)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:44)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:251)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (us&lt;br/&gt;
ing password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:630)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:215)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:4883)&lt;br/&gt;
    ... 15 more&lt;br/&gt;
Caused by: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:289)&lt;br/&gt;
    at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:274)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:551)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMPartition(ObjectStore.java:716)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getPartition(ObjectStore.java:704)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_partition(HiveMetaStore.java:593)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getPartition(HiveMetaStoreClient.java:418)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:620)&lt;br/&gt;
    ... 17 more&lt;br/&gt;
Caused by: java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:946)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:885)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3436)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1247)&lt;br/&gt;
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2775)&lt;br/&gt;
    at com.mysql.jdbc.Connection.&amp;lt;init&amp;gt;(Connection.java:1555)&lt;br/&gt;
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:142)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:118)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionProviderPriorityList.getConnection(ConnectionProviderPriorityList.java:59)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:458)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getXAResource(ConnectionFactoryImpl.java:418)&lt;br/&gt;
    at org.datanucleus.ConnectionManagerImpl.enlistResource(ConnectionManagerImpl.java:329)&lt;/p&gt;

&lt;p&gt;Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
org.apache.hadoop.hive.ql.parse.SemanticException: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using passwo&lt;br/&gt;
rd: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:4887)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5224)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:44)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)&lt;br/&gt;
    at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:251)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (us&lt;br/&gt;
ing password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:630)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:215)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:4883)&lt;br/&gt;
    ... 15 more&lt;br/&gt;
Caused by: javax.jdo.JDODataStoreException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:289)&lt;br/&gt;
    at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:274)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:551)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getMPartition(ObjectStore.java:716)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.ObjectStore.getPartition(ObjectStore.java:704)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_partition(HiveMetaStore.java:593)&lt;br/&gt;
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getPartition(HiveMetaStoreClient.java:418)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:620)&lt;br/&gt;
    ... 17 more&lt;br/&gt;
Caused by: java.sql.SQLException: Access denied for user &apos;hivadm&apos;@&apos;XXXXX.domain.whatetever&apos; (using password: YES)&lt;br/&gt;
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:946)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:885)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3436)&lt;br/&gt;
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1247)&lt;br/&gt;
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2775)&lt;br/&gt;
    at com.mysql.jdbc.Connection.&amp;lt;init&amp;gt;(Connection.java:1555)&lt;br/&gt;
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:142)&lt;br/&gt;
    at org.datanucleus.store.rdbms.datasource.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:118)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionProviderPriorityList.getConnection(ConnectionProviderPriorityList.java:59)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:458)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getXAResource(ConnectionFactoryImpl.java:418)&lt;br/&gt;
    at org.datanucleus.ConnectionManagerImpl.enlistResource(ConnectionManagerImpl.java:329)&lt;br/&gt;
    at org.datanucleus.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:210)&lt;br/&gt;
    at org.datanucleus.store.rdbms.ConnectionFactoryImpl.getConnection(ConnectionFactoryImpl.java:345)&lt;br/&gt;
    at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:267)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.SQLEvaluator.evaluate(SQLEvaluator.java:91)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.JDOQLQuery.performExecute(JDOQLQuery.java:287)&lt;br/&gt;
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1475)&lt;br/&gt;
    at org.datanucleus.store.rdbms.query.JDOQLQuery.executeQuery(JDOQLQuery.java:244)&lt;br/&gt;
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1357)&lt;br/&gt;
    at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:265)&lt;br/&gt;
    ... 23 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461952">HIVE-1303</key>
            <summary>Adding/selecting many external partitions tables in one session eventually fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2010 13:50:11 +0000</created>
                <updated>Tue, 7 Dec 2010 17:40:16 +0000</updated>
                            <resolved>Tue, 7 Dec 2010 17:40:16 +0000</resolved>
                                    <version>0.5.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12862341" author="jvs" created="Thu, 29 Apr 2010 18:43:03 +0000"  >&lt;p&gt;Do the MySQL server logs contain any information about why it is giving Access denied?  Maybe there is a resource limit that needs to be increased on the MySQL server?  Can you reproduce the problem with another metastore db such as Derby?&lt;/p&gt;</comment>
                            <comment id="12968837" author="appodictic" created="Tue, 7 Dec 2010 17:40:16 +0000"  >&lt;p&gt;This was solved by doing pooling at the JPOX/Data Nucleus level.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Apr 2010 18:43:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72984</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lefb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122987</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1304] add row_sequence UDF</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1304</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is a poor man&apos;s answer to the standard analytic function row_number(); it assigns a sequence of numbers to rows, starting from 1.&lt;/p&gt;

&lt;p&gt;I&apos;m calling it row_sequence() to distinguish it from the real analytic function, so that once we add support for those, there won&apos;t be any conflict with the existing UDF.&lt;/p&gt;

&lt;p&gt;The problem with this UDF approach is that there are no guarantees about ordering in SQL processing internals, so use with caution.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461990">HIVE-1304</key>
            <summary>add row_sequence UDF</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2010 21:29:55 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:45 +0000</updated>
                            <resolved>Wed, 23 Jun 2010 07:16:15 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12856638" author="appodictic" created="Tue, 13 Apr 2010 21:49:11 +0000"  >&lt;p&gt;Can we work on... &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1265..first&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1265..first&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As of now commits on UDF&apos;s is a major pain. Two or three times already I had had to regenerate UDFs because someone else touched the FunctionRegistry. I have had two or three waves of UDF&apos;s I want to commit ReflectionUDF, MathUDF, EncryptionUDF but something else sneaks in and I have to regenerate. It is a major pain. &lt;/p&gt;
</comment>
                            <comment id="12881299" author="namit" created="Tue, 22 Jun 2010 18:58:58 +0000"  >&lt;p&gt;Can you explicitly set the number of reducers to 1, so ensure same results ? It doesn&apos;t matter today, but should be a issue with miniMr etc.&lt;br/&gt;
Also, do you want to keep it in contrib  - since this is not guaranteed - multiple mappers may give same results etc.&lt;/p&gt;</comment>
                            <comment id="12881326" author="jvs" created="Tue, 22 Jun 2010 19:48:17 +0000"  >&lt;p&gt;New patch addresses Namit&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="12881436" author="jvs" created="Tue, 22 Jun 2010 23:00:02 +0000"  >&lt;p&gt;Oops, need to move test to contrib too.&lt;/p&gt;</comment>
                            <comment id="12881482" author="jvs" created="Wed, 23 Jun 2010 00:29:24 +0000"  >&lt;p&gt;New patch with test moved to contrib, and DESCRIBE and EXPLAIN thrown in for good measure.&lt;/p&gt;</comment>
                            <comment id="12881501" author="namit" created="Wed, 23 Jun 2010 01:00:22 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12881591" author="namit" created="Wed, 23 Jun 2010 07:16:15 +0000"  >&lt;p&gt;Committed. Thanks John&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12438744">HIVE-896</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12441655" name="ASF.LICENSE.NOT.GRANTED--HIVE-1304.1.patch" size="8844" author="jvs" created="Tue, 13 Apr 2010 21:39:18 +0000"/>
                            <attachment id="12447732" name="HIVE-1304.2.patch" size="8825" author="jvs" created="Tue, 22 Jun 2010 19:47:58 +0000"/>
                            <attachment id="12447780" name="HIVE-1304.3.patch" size="12238" author="jvs" created="Wed, 23 Jun 2010 00:28:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Apr 2010 21:49:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lefj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1305] add progress in join and groupby</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1305</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The operators join and groupby can consume a lot of rows before producing any output. &lt;br/&gt;
All operators which do not have a output for every input should report progress periodically.&lt;br/&gt;
Currently, it is only being done for ScriptOperator and FilterOperator.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461991">HIVE-1305</key>
            <summary>add progress in join and groupby</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sdong">Siying Dong</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2010 21:29:58 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:57 +0000</updated>
                            <resolved>Fri, 9 Jul 2010 16:27:31 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12886593" author="he yongqiang" created="Fri, 9 Jul 2010 02:57:17 +0000"  >&lt;p&gt;will take a look.&lt;/p&gt;</comment>
                            <comment id="12886608" author="he yongqiang" created="Fri, 9 Jul 2010 03:58:09 +0000"  >&lt;p&gt;Overall looks good to me.&lt;/p&gt;

&lt;p&gt;minor comments:&lt;/p&gt;

&lt;p&gt;1. in GroupByOp&apos;s flush,       &lt;br/&gt;
countAfterReport = 0; should put in the beginning of the function?&lt;br/&gt;
2. in AbstractMapjoin&lt;br/&gt;
    heartbeatInterval = HiveConf.getIntVar(hconf,&lt;br/&gt;
        HiveConf.ConfVars.HIVESENDHEARTBEAT);&lt;/p&gt;

&lt;p&gt;is not needed? because the parent common join op already has that.&lt;/p&gt;

</comment>
                            <comment id="12886760" author="he yongqiang" created="Fri, 9 Jul 2010 16:27:31 +0000"  >&lt;p&gt;I just committed. Thanks Siying!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12449043" name="hive.1305.1.patch" size="10119" author="sdong" created="Fri, 9 Jul 2010 00:20:03 +0000"/>
                            <attachment id="12449048" name="hive.1305.2.patch" size="16936" author="sdong" created="Fri, 9 Jul 2010 01:17:41 +0000"/>
                            <attachment id="12449060" name="hive.1305.3.patch" size="16889" author="sdong" created="Fri, 9 Jul 2010 06:28:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Jul 2010 02:57:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72982</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lefr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1306] cleanup the jobscratchdir</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1306</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, the job scratch directory is cleaned up at the end of the hive query - &lt;br/&gt;
It is in a finally block, which will not work if the process is killed.&lt;/p&gt;

&lt;p&gt;It should be a shutdown hook - which will take care of these scenarios.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461999">HIVE-1306</key>
            <summary>cleanup the jobscratchdir</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2010 23:26:40 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:48 +0000</updated>
                            <resolved>Sat, 17 Apr 2010 03:51:36 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12856758" author="nzhang" created="Wed, 14 Apr 2010 05:28:30 +0000"  >&lt;p&gt;It seems we need to register an OutputCommitter: &lt;a href=&quot;http://hadoop.apache.org/common/docs/current/mapred_tutorial.html#OutputCommitter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/common/docs/current/mapred_tutorial.html#OutputCommitter&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12856764" author="namit" created="Wed, 14 Apr 2010 06:15:07 +0000"  >&lt;p&gt;I think FileOutputCommitter is already used.&lt;/p&gt;

&lt;p&gt;It is not jobScratchDir that was the problem reported by Dmytro, but the temp. directory created by intermediate tasks&lt;/p&gt;</comment>
                            <comment id="12856768" author="nzhang" created="Wed, 14 Apr 2010 06:30:17 +0000"  >&lt;p&gt;I didn&apos;t find the user of any OutputCommitter in Hive. Can  you point me the file? Also it seems the scratch dir is actually configured under hdfs://tmp/&amp;lt;userid&amp;gt;-hive/... Let&apos;s talk tomorrow.&lt;/p&gt;</comment>
                            <comment id="12856994" author="namit" created="Wed, 14 Apr 2010 17:58:21 +0000"  >&lt;p&gt;Can you look at the patch - there were some diffs. I am still looking at them.&lt;br/&gt;
But, as I said, the scratchDir was not cleaned up, which should be if shutdown hook works as expected.&lt;/p&gt;

&lt;p&gt;jobScratchDir is not a problem - I guess we can do the same for that also, but that is not a priority right now&lt;/p&gt;</comment>
                            <comment id="12856999" author="nzhang" created="Wed, 14 Apr 2010 18:07:00 +0000"  >&lt;p&gt;Does this works if user kill -9 of the Hive CLI? Also is it possible to add a unit test for this? &lt;/p&gt;

&lt;p&gt;Also what&apos;s different between jobScratchDir and scratchDir? If the tmp directory is under hdfs://tmp we should be able to clean it up using OutputCommitter, which IMO is a cleaner solution. Am I missing something?&lt;/p&gt;

</comment>
                            <comment id="12857021" author="namit" created="Wed, 14 Apr 2010 18:53:06 +0000"  >&lt;p&gt;I havent tested it yet - will do after checking the unit tests.&lt;/p&gt;

&lt;p&gt;scratchDir is the directory from  where all file sinks write to.&lt;br/&gt;
the, movetask copies to the actual location.&lt;/p&gt;

&lt;p&gt;If you look at the task log, there is the default FileOutputCommitter which cleans the jobScratchDir - I am not sure &lt;br/&gt;
what jobScratchDir is used for - it is not used for the final output. Maybe, it is for the intermediate output or something like&lt;br/&gt;
that. Can ask Dhruba/Joy ?&lt;/p&gt;</comment>
                            <comment id="12857702" author="namit" created="Fri, 16 Apr 2010 06:50:57 +0000"  >&lt;p&gt;uploaded a new patch where all the query specific directories hang from a given sub-directory.&lt;br/&gt;
Verified in test cluster the same.&lt;/p&gt;

&lt;p&gt;Running tests right now&lt;/p&gt;</comment>
                            <comment id="12857946" author="nzhang" created="Fri, 16 Apr 2010 19:27:38 +0000"  >&lt;p&gt;+1 will commit after tests. &lt;/p&gt;</comment>
                            <comment id="12858086" author="nzhang" created="Sat, 17 Apr 2010 03:51:36 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441694" name="ASF.LICENSE.NOT.GRANTED--hive.1306.1.patch" size="6930" author="namit" created="Wed, 14 Apr 2010 07:06:21 +0000"/>
                            <attachment id="12441936" name="ASF.LICENSE.NOT.GRANTED--hive.1306.2.patch" size="20078" author="namit" created="Fri, 16 Apr 2010 06:49:48 +0000"/>
                            <attachment id="12441939" name="ASF.LICENSE.NOT.GRANTED--hive.1306.3.patch" size="28564" author="namit" created="Fri, 16 Apr 2010 07:16:04 +0000"/>
                            <attachment id="12441979" name="ASF.LICENSE.NOT.GRANTED--hive.1306.4.patch" size="26811" author="namit" created="Fri, 16 Apr 2010 16:48:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Apr 2010 05:28:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72981</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lefz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122990</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
