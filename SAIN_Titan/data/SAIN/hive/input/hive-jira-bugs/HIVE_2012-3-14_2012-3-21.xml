<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:20:25 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2012-3-14+AND+created+%3C%3D+2012-3-21+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="17" total="17"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2870] Throw an error when a nonexistent partition is accessed in strict mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2870</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a table does not exist and someone tries to read from it in a query, Hive throws an error.&lt;/p&gt;

&lt;p&gt;But if a partition is directly accessed that does not exist, an error is not thrown. This is inconsistent and also leads to a lot of confused users who get no output.&lt;/p&gt;

&lt;p&gt;This task is to cause Hive to throw an error when the partition pruner for a query eliminates ALL existing partitions for some table when running in strict mode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546503">HIVE-2870</key>
            <summary>Throw an error when a nonexistent partition is accessed in strict mode</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="luciang">Lucian Adrian Grijincu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Mar 2012 23:28:19 +0000</created>
                <updated>Tue, 3 Apr 2012 16:56:19 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13229873" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 04:07:48 +0000"  >&lt;p&gt;lucian requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt;: Throw an error when a nonexistent partition is accessed.&lt;/p&gt;

&lt;p&gt;  When a table does not exist and someone tries to read from it&lt;br/&gt;
  in a query, Hive throws an error.&lt;/p&gt;

&lt;p&gt;  But if a partition is directly accessed that does not exist, an error&lt;br/&gt;
  is not thrown. This is inconsistent and also leads to a lot of&lt;br/&gt;
  confused users who get no output.&lt;/p&gt;

&lt;p&gt;  This patch is to cause Hive to throw an error when the partition pruner&lt;br/&gt;
  for a query eliminates ALL existing partitions for some table when&lt;br/&gt;
  running in strict mode.&lt;/p&gt;

&lt;p&gt;  Task ID: #&lt;/p&gt;

&lt;p&gt;  Blame Rev:&lt;/p&gt;

&lt;p&gt;  When a table does not exist and someone tries to read from it in a query, Hive throws an error.&lt;/p&gt;

&lt;p&gt;  But if a partition is directly accessed that does not exist, an error is not thrown. This is inconsistent and also leads to a lot of confused users who get no output.&lt;/p&gt;

&lt;p&gt;  This task is to cause Hive to throw an error when the partition pruner for a query eliminates ALL existing partitions for some table when running in strict mode.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Revert Plan:&lt;/p&gt;

&lt;p&gt;  Tags:&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5145/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5145/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13229971" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 08:09:37 +0000"  >&lt;p&gt;akramer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  ...is the clarification that this is a &quot;strict mode&quot; restriction automatically included in the error message?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java:82 &quot;partitions&quot; should be plural&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13229976" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 08:19:35 +0000"  >&lt;p&gt;lucian has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  &amp;gt; ...is the clarification that this is a &quot;strict mode&quot; restriction automatically included in the error message?&lt;/p&gt;

&lt;p&gt;  No, but neither is it if for other strict-only errors:&lt;/p&gt;

&lt;p&gt;  hive&amp;gt; select * from tmp_table_with_partitions;&lt;br/&gt;
  FAILED: Error in semantic analysis: No partition predicate found for Alias &quot;tmp_table_with_partitions&quot; Table &quot;tmp_table_with_partitions&quot;&lt;/p&gt;


&lt;p&gt;  hive&amp;gt; select count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from tmp_table_with_partitions where ds=&quot;asdf&quot;;&lt;br/&gt;
  FAILED: Error in semantic analysis: No valid partition left after pruning for Alias &quot;tmp_table_with_partitions&quot; Table &quot;tmp_table_with_partitions&quot;&lt;/p&gt;

&lt;p&gt;  I can change it, but I wanted to be consistent with that other one I tested.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13229979" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 08:23:35 +0000"  >&lt;p&gt;lucian has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  I checked the error message list and I see other errors advertise the nonstrict mode in case the user really wants to run the operation. I&apos;ll change the message.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13230383" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 18:15:35 +0000"  >&lt;p&gt;akramer has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  &amp;gt; I checked the error message list and I see other errors advertise the nonstrict mode in case the user really wants to run the operation. I&apos;ll change the message.&lt;/p&gt;

&lt;p&gt;  Thanks. It is always better to do something right than wrong. Consistency only matter when there are multiple &quot;right&quot; things to do or no &quot;right&quot; thing to do.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13230594" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 21:48:35 +0000"  >&lt;p&gt;lucian updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;br/&gt;
Reviewers: JIRA, njain, kevinwilfong, akramer&lt;/p&gt;

&lt;p&gt;  found that the error message was already present&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/p&gt;</comment>
                            <comment id="13233825" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 21:49:36 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  Could you add a test case for this, e.g. look at the files in ql/src/test/queries/clientnegative&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13233844" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 21:53:35 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  By a test case, I meant add a query to that list to test that the query actually does fail if there are no partitions.&lt;/p&gt;

&lt;p&gt;  Also, it might be a good idea to add a test case in client positive to make sure you can turn it off.&lt;/p&gt;

&lt;p&gt;  See &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-AddaUnitTest&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-AddaUnitTest&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java:246-252 Sorry to be picky, but could you also add a small comment here just giving a quick explanation of what it does.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13239142" author="phabricator@reviews.facebook.net" created="Tue, 27 Mar 2012 03:19:26 +0000"  >&lt;p&gt;lucian updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;br/&gt;
Reviewers: JIRA, njain, kevinwilfong, akramer&lt;/p&gt;

&lt;p&gt;  added positive and negative test and a comment&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/nopart_after_pruning.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nopart_after_pruning.q&lt;br/&gt;
  ql/src/test/results/clientnegative/nopart_after_pruning.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nopart_after_pruning.q.out&lt;/p&gt;</comment>
                            <comment id="13239646" author="phabricator@reviews.facebook.net" created="Tue, 27 Mar 2012 17:08:25 +0000"  >&lt;p&gt;kevinwilfong has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Will commit if tests pass&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13240090" author="phabricator@reviews.facebook.net" created="Wed, 28 Mar 2012 01:16:22 +0000"  >&lt;p&gt;kevinwilfong has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  -1&lt;/p&gt;

&lt;p&gt;  Sorry to have to go back after accepting, but I spoke with Namit Jain (another Hive committer) about this diff.&lt;/p&gt;

&lt;p&gt;  This diff has the potential to break queries which are otherwise working, such as a union all where one of the partitions being unioned doesn&apos;t exist.  Particularly, if that partition is only sometimes generated and the query is scripted.&lt;/p&gt;

&lt;p&gt;  To avoid this, could you change the exception to a warning which is printed to the console.  You could still use a variable which writes to the console in strict mode, and logs to info in nonstrict mode, although it would be better to create a new Hive configuration variable to do this, rather than reusing HIVEMAPREDMODE which is used far too much.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13240728" author="phabricator@reviews.facebook.net" created="Wed, 28 Mar 2012 20:57:25 +0000"  >&lt;p&gt;lucian updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;br/&gt;
Reviewers: JIRA, njain, kevinwilfong, akramer&lt;/p&gt;

&lt;p&gt;  found a suitable ConfVar&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/nopart_after_pruning.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nopart_after_pruning.q&lt;br/&gt;
  ql/src/test/results/clientnegative/nopart_after_pruning.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nopart_after_pruning.q.out&lt;/p&gt;</comment>
                            <comment id="13240840" author="phabricator@reviews.facebook.net" created="Wed, 28 Mar 2012 23:53:25 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  That conf var is currently being used to throw an error if a query is written to create dynamic partitions and it doesn&apos;t produce any partitions.  That is a weird dependency to introduce, I think it would be better to create a new variable.&lt;/p&gt;

&lt;p&gt;  Could you print an warning or at least log one if strict mode is set to false and a partition is empty.  This would be useful because users could still see that they are querying a partition unnecessarily, but without the risk of breaking existing queries.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13241450" author="phabricator@reviews.facebook.net" created="Thu, 29 Mar 2012 18:03:24 +0000"  >&lt;p&gt;lucian updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;br/&gt;
Reviewers: JIRA, njain, kevinwilfong, akramer&lt;/p&gt;

&lt;p&gt;  add new confvar, throw exception or log message&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/nopart_after_pruning.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nopart_after_pruning.q&lt;br/&gt;
  ql/src/test/results/clientnegative/nopart_after_pruning.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nopart_after_pruning.q.out&lt;/p&gt;</comment>
                            <comment id="13245489" author="phabricator@reviews.facebook.net" created="Tue, 3 Apr 2012 16:54:20 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;  Sorry, I should have been clearer earlier, by strict mode is set to false, I meant HIVE_ERROR_NO_VALID_PARTITIONS_LEFT is set to false.&lt;/p&gt;

&lt;p&gt;  Also, could you add an entry to conf/hive-default.xml.template with your new variable.&lt;/p&gt;

&lt;p&gt;  Finally, I&apos;m sorry, I know I&apos;ve been waffling on this point, but I think the way to go is to print a warning to the console if HIVE_ERROR_NO_VALID_PARTITIONS_LEFT is set to true (using SessionState.get().getConsole().printInfo()) and otherwise log it.  This way you can default it to true.&lt;/p&gt;

&lt;p&gt;  To give you better context, my reasoning is that if an administrator sets the variable to false, users will be unlikely to set it to true, and if this might break valid queries, it would be difficult for administrators to justify setting it to true, so the error will probably not get used.  If you make it simply print a warning, it will not break queries, so the variable can be defaulted to true.  If the users have a valid query and are annoyed by the warning, they can turn it off using that variable, but the information won&apos;t totally be lost if you log it in that case.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13245491" author="phabricator@reviews.facebook.net" created="Tue, 3 Apr 2012 16:56:19 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2870&quot; title=&quot;Throw an error when a nonexistent partition is accessed in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2870&quot;&gt;HIVE-2870&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Throw an error when a nonexistent partition is accessed in strict mode&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java:252 Also, I think this line will be removed based on my comments above, but could you make sure that no lines in the future exceed 100 chars.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2319&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518417" name="ASF.LICENSE.NOT.GRANTED--HIVE-2870.D2319.1.patch" size="1653" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 04:07:49 +0000"/>
                            <attachment id="12518550" name="ASF.LICENSE.NOT.GRANTED--HIVE-2870.D2319.2.patch" size="923" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 21:48:36 +0000"/>
                            <attachment id="12520056" name="ASF.LICENSE.NOT.GRANTED--HIVE-2870.D2319.3.patch" size="3842" author="phabricator@reviews.facebook.net" created="Tue, 27 Mar 2012 03:19:28 +0000"/>
                            <attachment id="12520320" name="ASF.LICENSE.NOT.GRANTED--HIVE-2870.D2319.4.patch" size="3216" author="phabricator@reviews.facebook.net" created="Wed, 28 Mar 2012 20:57:25 +0000"/>
                            <attachment id="12520462" name="ASF.LICENSE.NOT.GRANTED--HIVE-2870.D2319.5.patch" size="5690" author="phabricator@reviews.facebook.net" created="Thu, 29 Mar 2012 18:03:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Mar 2012 04:07:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231661</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Throw an error when a nonexistent partition is accessed in strict mode</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[HIVE-2871] Add a new hook to run at the beginning and end of the Driver.run method</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2871</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Driver.run is the highest level method which all queries go through, whether they come from Hive Server, the CLI, or any other entry.  We also do not have any hooks before the compilation method is called, and having hooks in Driver.run would provide this.  Having hooks in Driver.run will allow, for example, being able to overwrite config values used throughout query processing, including compilation, and at the other end, cleaning up any resources/logging any final values just before returning to the user.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546630">HIVE-2871</key>
            <summary>Add a new hook to run at the beginning and end of the Driver.run method</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Mar 2012 17:51:47 +0000</created>
                <updated>Wed, 9 Jan 2013 10:25:04 +0000</updated>
                            <resolved>Fri, 16 Mar 2012 16:01:59 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13230374" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 18:05:36 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a new hook to run at the beginning and end of the Driver.run method&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2871&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Added a new hook which runs at the beginning and end of the Driver.run method.  It has pre and post execution methods.  I do not provide any implementations as part of this diff.&lt;/p&gt;

&lt;p&gt;  Driver.run is the highest level method which all queries go through, whether they come from Hive Server, the CLI, or any other entry.  We also do not have any hooks before the compilation method is called, and having hooks in Driver.run would provide this.  Having hooks in Driver.run will allow, for example, being able to overwrite config values used throughout query processing, including compilation, and at the other end, cleaning up any resources/logging any final values just before returning to the user.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientpositive/hook_order.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/hook_order.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHook.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContextImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5163/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5163/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13230654" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 22:36:36 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a new hook to run at the beginning and end of the Driver.run method&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:578 We should explicitly state here that the hooks will be run in order.&lt;/p&gt;

&lt;p&gt;  Also, add a comment in hive-default.xml.default explaining this&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContextImpl.java:25 Ado you want to add the sessionState also ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2331&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13230680" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 22:58:34 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a new hook to run at the beginning and end of the Driver.run method&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Expanded comment in HiveConf, and added entry in hive-default.xml.template&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientpositive/hook_order.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/hook_order.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHook.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContextImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/p&gt;</comment>
                            <comment id="13230683" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 23:00:37 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a new hook to run at the beginning and end of the Driver.run method&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContextImpl.java:25 The reason I didn&apos;t add it is that in other hook contexts (HookContext and HiveSemanticAnalyzerHookContext) the SessionState is not included.   Hooks can get it via SessionState.get()&lt;/p&gt;

&lt;p&gt;  I don&apos;t really see the advantage of adding it, but if you feel strongly about this I can.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2331&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13230756" author="namit" created="Fri, 16 Mar 2012 00:27:13 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;running tests&lt;/p&gt;</comment>
                            <comment id="13230761" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 00:28:36 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a new hook to run at the beginning and end of the Driver.run method&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13230768" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 00:32:37 +0000"  >&lt;p&gt;njain has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a new hook to run at the beginning and end of the Driver.run method&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:34 Compile is failing, since these imports have been removed&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13230780" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 00:40:37 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a new hook to run at the beginning and end of the Driver.run method&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  So sorry about that, my eclipse tends to remove imports if I haven&apos;t setup the build path properly.  Ran ant clean package, so it should be good.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientpositive/hook_order.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/hook_order.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHook.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContextImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/p&gt;</comment>
                            <comment id="13231315" author="namit" created="Fri, 16 Mar 2012 16:01:59 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13231762" author="hudson" created="Sat, 17 Mar 2012 00:42:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1316 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1316/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1316/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; Add a new hook to run at the beginning and end of the Driver.run method&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1301610)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301610&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301610&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContextImpl.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hook_order.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hook_order.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265265" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:24 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548272" author="hudson" created="Wed, 9 Jan 2013 10:25:04 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2871&quot; title=&quot;Add a new hook to run at the beginning and end of the Driver.run method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2871&quot;&gt;&lt;del&gt;HIVE-2871&lt;/del&gt;&lt;/a&gt; Add a new hook to run at the beginning and end of the Driver.run method&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1301610)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301610&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301610&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/HiveDriverRunHookContextImpl.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hook_order.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hook_order.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518491" name="ASF.LICENSE.NOT.GRANTED--HIVE-2871.D2331.1.patch" size="13041" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 18:05:37 +0000"/>
                            <attachment id="12518566" name="ASF.LICENSE.NOT.GRANTED--HIVE-2871.D2331.2.patch" size="14058" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 22:58:35 +0000"/>
                            <attachment id="12518584" name="ASF.LICENSE.NOT.GRANTED--HIVE-2871.D2331.3.patch" size="13717" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 00:40:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Mar 2012 18:05:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124198</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2872] Store which configs the user has explicitly changed</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2872</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be useful to keep track of which config variables the user has explicitly changed from the values which are either default or loaded from hive-site.xml.  These include config variables set using the hiveconf argument to the CLI, and via the SET command.  This could be used to prevent Hive from changing a config variable which has been explicitly set by the user, and also potentially for logging to help with later debugging of failed queries.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546637">HIVE-2872</key>
            <summary>Store which configs the user has explicitly changed</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Mar 2012 18:28:31 +0000</created>
                <updated>Wed, 9 Jan 2013 10:25:04 +0000</updated>
                            <resolved>Fri, 16 Mar 2012 06:21:55 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13230443" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 19:20:36 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2872&quot; title=&quot;Store which configs the user has explicitly changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2872&quot;&gt;&lt;del&gt;HIVE-2872&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Store which configs the user has explicitly changed&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2872&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2872&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Config variables which are set by System properties, the hiveconf option on the CLI, and the SET command within the CLI, are recorded by the SessionState in a new variable&lt;/p&gt;

&lt;p&gt;  It would be useful to keep track of which config variables the user has explicitly changed from the values which are either default or loaded from hive-site.xml.  These include config variables set using the hiveconf argument to the CLI, and via the SET command.  This could be used to prevent Hive from changing a config variable which has been explicitly set by the user, and also potentially for logging to help with later debugging of failed queries.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2337&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2337&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  ql/src/test/results/clientpositive/overridden_confs.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyOverriddenConfigsHook.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/overridden_confs.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5169/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5169/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13230645" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 22:30:37 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2872&quot; title=&quot;Store which configs the user has explicitly changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2872&quot;&gt;&lt;del&gt;HIVE-2872&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Store which configs the user has explicitly changed&quot;.&lt;/p&gt;

&lt;p&gt;  Talked to Kevin offline - no need to add appliedSystemProperties in conf.&lt;/p&gt;

&lt;p&gt;  Also, can you add a big comment in SessionState explaining overriddenConfigurations&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2337&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2337&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13230662" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 22:46:37 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2872&quot; title=&quot;Store which configs the user has explicitly changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2872&quot;&gt;&lt;del&gt;HIVE-2872&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Store which configs the user has explicitly changed&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Removed the mapping from HiveConf, created a new method which constructs the mapping of variables which have been set using System properties, which the SessionState uses instead.  Also added the comment as requested.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2337&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2337&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  ql/src/test/results/clientpositive/overridden_confs.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyOverriddenConfigsHook.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/overridden_confs.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;/p&gt;</comment>
                            <comment id="13230772" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 00:34:37 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2872&quot; title=&quot;Store which configs the user has explicitly changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2872&quot;&gt;&lt;del&gt;HIVE-2872&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Store which configs the user has explicitly changed&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2337&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2337&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13230926" author="namit" created="Fri, 16 Mar 2012 06:21:55 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13231136" author="hudson" created="Fri, 16 Mar 2012 13:05:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1314 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1314/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1314/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2872&quot; title=&quot;Store which configs the user has explicitly changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2872&quot;&gt;&lt;del&gt;HIVE-2872&lt;/del&gt;&lt;/a&gt; Store which configs the user has explicitly changed&lt;br/&gt;
(Kevin Wilfng via namit) (Revision 1301347)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301347&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyOverriddenConfigsHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/overridden_confs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/overridden_confs.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265238" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:17 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548270" author="hudson" created="Wed, 9 Jan 2013 10:25:04 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2872&quot; title=&quot;Store which configs the user has explicitly changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2872&quot;&gt;&lt;del&gt;HIVE-2872&lt;/del&gt;&lt;/a&gt; Store which configs the user has explicitly changed&lt;br/&gt;
(Kevin Wilfng via namit) (Revision 1301347)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301347&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyOverriddenConfigsHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/overridden_confs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/overridden_confs.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518517" name="ASF.LICENSE.NOT.GRANTED--HIVE-2872.D2337.1.patch" size="9198" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 19:20:36 +0000"/>
                            <attachment id="12518562" name="ASF.LICENSE.NOT.GRANTED--HIVE-2872.D2337.2.patch" size="9599" author="phabricator@reviews.facebook.net" created="Thu, 15 Mar 2012 22:46:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Mar 2012 19:20:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2873] Qualifying a column name in an ORDER BY clause generates &apos;Error in semantic analysis&apos;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2873</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When I run the following SELECT:&lt;/p&gt;

&lt;p&gt;SELECT T1.f03int, SUM(T1.f05double) FROM b774winx86qa07_tmix91&lt;br/&gt;
T1 GROUP BY T1.f03int ORDER BY T1.f03int;&lt;/p&gt;

&lt;p&gt;It generates &lt;/p&gt;

&lt;p&gt;:  (10) &lt;span class=&quot;error&quot;&gt;&amp;#91;42000&amp;#93;&lt;/span&gt; Query returned non-zero code: 10, cause: FAILED: Error in &lt;br/&gt;
: semantic analysis: line 1:94 Invalid Table Alias or Column Reference T1&lt;/p&gt;

&lt;p&gt;If I remove T1 qualifier from the ORDER BY clause (ORDER BY f03int) data is returned correctly.  Please advise, am I using incorrect syntax?  What is the proper syntax convetion for using a table qualifier with ORDER BY&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux Kernel-2.6.18-glibc-2.5 x86_64 64bit&lt;/p&gt;</environment>
        <key id="12546641">HIVE-2873</key>
            <summary>Qualifying a column name in an ORDER BY clause generates &apos;Error in semantic analysis&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="piyevsky">Alex Piyevsky</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Mar 2012 18:53:02 +0000</created>
                <updated>Thu, 21 Apr 2016 14:50:42 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13862718" author="piyevsky" created="Mon, 6 Jan 2014 01:44:52 +0000"  >&lt;p&gt;I will be out on vacation from March 26 to March 29, and will return to the office on April 1. During that time please contact Marina Sapozhnikova at (x4937) for MS SQL QA issues, Nataliya Martynovich at (x3662) for general QA inqueries, or Maria Trofimova at (x3771) if you need urgent help with a customer case.&lt;/p&gt;

&lt;p&gt;Regards, Alex Piyevsky&lt;/p&gt;
</comment>
                            <comment id="15251853" author="dzanter" created="Thu, 21 Apr 2016 12:53:51 +0000"  >&lt;p&gt;Similar issue to: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-695&quot; title=&quot;sort by does not support columns along with table alias when there is a group by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-695&quot;&gt;HIVE-695&lt;/a&gt;;  except group by order by instead of group by sort by&lt;/p&gt;</comment>
                            <comment id="15251997" author="cartershanklin" created="Thu, 21 Apr 2016 14:50:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dzanter&quot; class=&quot;user-hover&quot; rel=&quot;dzanter&quot;&gt;David Zanter&lt;/a&gt; Are you still seeing this? This does not reproduce on either Hive 1.2.1 or Hive 2.1 so you might consider an upgrade.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12431557">HIVE-695</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Apr 2016 12:53:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124200</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2874] Renaming external partition changes location</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2874</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Renaming an external partition will change the location of that partition to the default location of a managed partition with the same name.&lt;/p&gt;

&lt;p&gt;E.g. If ex_table is external and has partition part=1 with location /.../managed_table/part=1&lt;/p&gt;

&lt;p&gt;Calling ALTER TABLE ex_table PARTITION (part = &apos;1&apos;) RENAME TO PARTITION (part = &apos;2&apos;);&lt;/p&gt;

&lt;p&gt;Will change the location of the partition to /.../ex_table/part=2&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12546670">HIVE-2874</key>
            <summary>Renaming external partition changes location</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Mar 2012 21:56:37 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:04 +0000</updated>
                            <resolved>Thu, 4 Oct 2012 14:27:58 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13466410" author="zhenxiao" created="Sun, 30 Sep 2012 04:55:23 +0000"  >&lt;p&gt;if it is an EXTERNAL_TABLE, the table&apos;s location is in StorageDescriptor, the new patch shares the same parent path as the old path.&lt;/p&gt;

&lt;p&gt;If it is a MANAGED_TABLE, the table&apos;s location could be get from Warehouse.&lt;/p&gt;</comment>
                            <comment id="13466413" author="zhenxiao" created="Sun, 30 Sep 2012 05:17:40 +0000"  >&lt;p&gt;Review Request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13466543" author="namit" created="Sun, 30 Sep 2012 18:27:41 +0000"  >&lt;p&gt;comments on phabrocator&lt;/p&gt;</comment>
                            <comment id="13466587" author="zhenxiao" created="Sun, 30 Sep 2012 22:42:46 +0000"  >&lt;p&gt;@Namit: Thanks for your comments. I updated the patch at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13466628" author="namit" created="Mon, 1 Oct 2012 03:59:23 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13467404" author="zhenxiao" created="Tue, 2 Oct 2012 02:02:57 +0000"  >&lt;p&gt;@Namit: My understanding in the old patch is incorrect. So, if an external table&apos;s partition is renamed, its location should not change, but I could do select/where using the new partition name. Correct me if my understanding is still wrong.&lt;/p&gt;

&lt;p&gt;I also updated my patch at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13469135" author="namit" created="Thu, 4 Oct 2012 04:17:14 +0000"  >&lt;p&gt;You are right. The location should not change by a rename in external&apos;s table partition.&lt;/p&gt;</comment>
                            <comment id="13469157" author="namit" created="Thu, 4 Oct 2012 05:08:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13469400" author="namit" created="Thu, 4 Oct 2012 14:27:58 +0000"  >&lt;p&gt;Committed. Thanks Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13548249" author="hudson" created="Wed, 9 Jan 2013 10:24:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2874&quot; title=&quot;Renaming external partition changes location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2874&quot;&gt;&lt;del&gt;HIVE-2874&lt;/del&gt;&lt;/a&gt; Renaming external partition changes location&lt;br/&gt;
(Zhenxiao Luo via namit) (Revision 1394087)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1394087&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1394087&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/rename_external_partition_location.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rename_external_partition_location.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550020" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:04 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12547149" name="HIVE-2874.1.patch.txt" size="18284" author="zhenxiao" created="Sun, 30 Sep 2012 05:18:21 +0000"/>
                            <attachment id="12547181" name="HIVE-2874.2.patch.txt" size="5883" author="zhenxiao" created="Sun, 30 Sep 2012 22:42:55 +0000"/>
                            <attachment id="12547328" name="HIVE-2874.3.patch.txt" size="10876" author="zhenxiao" created="Tue, 2 Oct 2012 02:03:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 30 Sep 2012 04:55:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231828</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00wcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2875] Renaming partition changes partition location prefix</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2875</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Renaming a partition changes the location of the partition to the default location of the table, followed by the partition specification.  It should just change the partition specification of the path.&lt;/p&gt;

&lt;p&gt;If the path does not end with the old partition specification, we should probably throw an exception because renaming a partition should not change the path so dramatically, and not changing the path to reflect the new partition name could leave the partition in a very confusing state.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546673">HIVE-2875</key>
            <summary>Renaming partition changes partition location prefix</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Mar 2012 22:02:18 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:59 +0000</updated>
                            <resolved>Fri, 30 Mar 2012 21:50:49 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13230800" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 01:10:37 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2875&quot; title=&quot;Renaming partition changes partition location prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2875&quot;&gt;&lt;del&gt;HIVE-2875&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Renaming partition changes partition location prefix&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  When a partition is renamed, instead of completely reconstructing the path, the partition specification at the end of the path is replaced with the new partition specification.  If the old path for the partition did not end with the partition specification (it is some non default location) an error will be thrown, since we don&apos;t have a reasonable way to change the partition location.&lt;/p&gt;

&lt;p&gt;  Renaming a partition changes the location of the partition to the default location of the table, followed by the partition specification.  It should just change the partition specification of the path.&lt;/p&gt;

&lt;p&gt;  If the path does not end with the old partition specification, we should probably throw an exception because renaming a partition should not change the path so dramatically, and not changing the path to reflect the new partition name could leave the partition in a very confusing state.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2349&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2349&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;br/&gt;
  ql/src/test/results/clientpositive/rename_partition_location.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyPartitionIsNotSubdirectoryOfTableHook.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/rename_partition_location.q&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5223/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5223/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13230929" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 06:27:47 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2875&quot; title=&quot;Renaming partition changes partition location prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2875&quot;&gt;&lt;del&gt;HIVE-2875&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Renaming partition changes partition location prefix&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2349&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2349&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13231597" author="namit" created="Fri, 16 Mar 2012 20:33:19 +0000"  >&lt;p&gt;Lot of tests are failing for me.&lt;br/&gt;
Can you debug this ?&lt;/p&gt;</comment>
                            <comment id="13237759" author="phabricator@reviews.facebook.net" created="Sun, 25 Mar 2012 01:48:24 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2875&quot; title=&quot;Renaming partition changes partition location prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2875&quot;&gt;&lt;del&gt;HIVE-2875&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Renaming partition changes partition location prefix&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  I modified my approach.  Now the partition&apos;s new location consists of the scheme and authority of the original location, and the path of the default location using the partition&apos;s new name.  This is similar to what is done for partition&apos;s locations when a table is renamed.  I ran the tests and they now pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2349&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2349&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;br/&gt;
  ql/src/test/results/clientpositive/rename_partition_location.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyPartitionIsNotSubdirectoryOfTableHook.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/rename_partition_location.q&lt;/p&gt;</comment>
                            <comment id="13242793" author="namit" created="Fri, 30 Mar 2012 21:50:49 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13265335" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:47 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548250" author="hudson" created="Wed, 9 Jan 2013 10:24:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2875&quot; title=&quot;Renaming partition changes partition location prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2875&quot;&gt;&lt;del&gt;HIVE-2875&lt;/del&gt;&lt;/a&gt; /Users/njain/hive/hive_commit1/svn-commit.tmp&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1307633)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1307633&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1307633&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyPartitionIsNotSubdirectoryOfTableHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/rename_partition_location.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rename_partition_location.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518591" name="ASF.LICENSE.NOT.GRANTED--HIVE-2875.D2349.1.patch" size="9508" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 01:10:38 +0000"/>
                            <attachment id="12519838" name="ASF.LICENSE.NOT.GRANTED--HIVE-2875.D2349.2.patch" size="8228" author="phabricator@reviews.facebook.net" created="Sun, 25 Mar 2012 01:48:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Mar 2012 01:10:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231831</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124201</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2876] Need more server side authorization for Hive Metastore operations</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2876</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently the metastore client performs the authorization by checking hdfs acls before talking to metastore server which is controlled by hive.security.authorization.enabled setting. Server only does authorization checks for drop operations (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1943&quot; title=&quot;Metastore operations (like drop_partition) could be improved in terms of maintaining consistency of metadata and data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1943&quot;&gt;&lt;del&gt;HIVE-1943&lt;/del&gt;&lt;/a&gt;). Need authorization checks for add and alter operations on the server side for better security.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546823">HIVE-2876</key>
            <summary>Need more server side authorization for Hive Metastore operations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                            <label>metastore</label>
                            <label>security</label>
                    </labels>
                <created>Fri, 16 Mar 2012 16:57:45 +0000</created>
                <updated>Wed, 26 Sep 2012 02:11:01 +0000</updated>
                            <resolved>Wed, 26 Sep 2012 02:11:01 +0000</resolved>
                                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13463468" author="cwsteinbach" created="Wed, 26 Sep 2012 02:11:01 +0000"  >&lt;p&gt;Resolving this as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2241&quot; title=&quot;Thrift MetaStore interface bypasses authorization checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2241&quot;&gt;HIVE-2241&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12511664">HIVE-2241</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Sep 2012 02:11:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231981</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d2tj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2877] TABLESAMPLE(x PERCENT) tests fail on 0.22/0.23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2877</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12546866">HIVE-2877</key>
            <summary>TABLESAMPLE(x PERCENT) tests fail on 0.22/0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Mar 2012 00:10:32 +0000</created>
                <updated>Sat, 6 Dec 2014 05:20:06 +0000</updated>
                            <resolved>Sat, 6 Dec 2014 05:20:06 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13233888" author="cwsteinbach" created="Tue, 20 Mar 2012 22:34:51 +0000"  >&lt;p&gt;There are two distinct problems:&lt;/p&gt;

&lt;p&gt;1) Many of the queries in split_sample.q and sample_islocalmode_hook.q are nondeterministic. This can be fixed by adding ORDER BY clauses.&lt;/p&gt;

&lt;p&gt;2) The second problem is more serious. Both of the tests set mapred.max.split.size=300 and hive.merge.smallfiles.avgsize=1 in an effort to force the generation of multiple splits and multiple output files. However, Hadoop 0.20 is incapable of generating splits smaller than the block size when using CombineFileInputFormat, so only one split is generated. This has a significant impact on the results of the TABLESAMPLE(x PERCENT). This issue was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-2046&quot; title=&quot;A CombineFileInputSplit cannot be less than a dfs block &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-2046&quot;&gt;&lt;del&gt;MAPREDUCE-2046&lt;/del&gt;&lt;/a&gt; which is included in 0.23.&lt;/p&gt;

&lt;p&gt;Suggested Fixes: &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Make the queries deterministic&lt;/li&gt;
	&lt;li&gt;Restrict these tests to Hadoop versions &amp;gt;= 0.22&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124202</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2878] TestHBaseMinimrCliDriver hbase_bulk.m fails on 0.23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2878</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12547106">HIVE-2878</key>
            <summary>TestHBaseMinimrCliDriver hbase_bulk.m fails on 0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2012 22:53:00 +0000</created>
                <updated>Sat, 6 Dec 2014 05:20:00 +0000</updated>
                            <resolved>Sat, 6 Dec 2014 05:20:00 +0000</resolved>
                                    <version>0.8.1</version>
                                                    <component>HBase Handler</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13232989" author="cwsteinbach" created="Mon, 19 Mar 2012 22:55:23 +0000"  >&lt;p&gt;On Hadoop 0.20 the &apos;dfs -count&apos; command outputs a fully qualified file location:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;dfs -count /build/ql/test/data/warehouse/hbpartition;
           1            3              23380 hdfs://localhost.localdomain:37780/tmp/hbsort/cf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But on 0.23 the file location is not qualified:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;dfs -count /build/ql/test/data/warehouse/hbpartition;
           1            3              24792 /tmp/hbsort/cf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a causing a test failure in TestHBaseMinimrCliDriver.hbase_bulk.m&lt;/p&gt;</comment>
                            <comment id="13232996" author="cwsteinbach" created="Mon, 19 Mar 2012 23:02:21 +0000"  >&lt;p&gt;Note: This problem only affects the 0.8.x branch. Trunk already uses different code for masking test outputs that prevents this problem from occurring.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518958" name="HIVE-2878.br08.1.patch.txt" size="2196" author="cwsteinbach" created="Mon, 19 Mar 2012 23:10:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ulz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14560</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2879] Add &quot;rat&quot; target to build to look for missing license headers</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2879</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We should have a &quot;rat&quot; target that can generate an Apache RAT report. RAT is used for finding missing license headers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547110">HIVE-2879</key>
            <summary>Add &quot;rat&quot; target to build to look for missing license headers</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="owen.omalley">Owen O&apos;Malley</assignee>
                                    <reporter username="owen.omalley">Owen O&apos;Malley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2012 23:26:12 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:58 +0000</updated>
                            <resolved>Thu, 5 Apr 2012 07:34:23 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13233025" author="phabricator@reviews.facebook.net" created="Mon, 19 Mar 2012 23:29:36 +0000"  >&lt;p&gt;omalley requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2879&quot; title=&quot;Add &amp;quot;rat&amp;quot; target to build to look for missing license headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2879&quot;&gt;&lt;del&gt;HIVE-2879&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add &quot;rat&quot; target to build to look for missing license headers&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &amp;lt;&amp;lt;Enter Revision Title&amp;gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;  Add &quot;rat&quot; target to look for missing license headers.&lt;/p&gt;

&lt;p&gt;  We should have a &quot;rat&quot; target that can generate an Apache RAT report. RAT is used for finding missing license headers.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2373&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build.xml&lt;br/&gt;
  ivy.xml&lt;br/&gt;
  ivy/libraries.properties&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5319/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5319/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13233026" author="owen.omalley" created="Mon, 19 Mar 2012 23:30:57 +0000"  >&lt;p&gt;I got the exclude patterns so that there are only 81 files being reported, most of which look like files that should have the header.&lt;/p&gt;</comment>
                            <comment id="13236713" author="owen.omalley" created="Fri, 23 Mar 2012 16:03:34 +0000"  >&lt;p&gt;Unsurprisingly, tests pass.&lt;/p&gt;</comment>
                            <comment id="13236813" author="phabricator@reviews.facebook.net" created="Fri, 23 Mar 2012 17:29:26 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2879&quot; title=&quot;Add &amp;quot;rat&amp;quot; target to build to look for missing license headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2879&quot;&gt;&lt;del&gt;HIVE-2879&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add &quot;rat&quot; target to build to look for missing license headers&quot;.&lt;/p&gt;

&lt;p&gt;  Bunch of excludes needs to be excluded. Headers in them can be tracked in separate jira.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build.xml:810 This dir contains sources written by Hive project. This shouldn&apos;t be excluded.&lt;br/&gt;
  build.xml:812 This is also in svn. Shouldn&apos;t be excluded&lt;br/&gt;
  build.xml:813 This is also in svn. Shouldn&apos;t be excluded&lt;br/&gt;
  build.xml:820 These are metastore upgrade scripts. Shouldn&apos;t be excluded.&lt;br/&gt;
  build.xml:822 Duplication&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2373&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  rat&lt;/p&gt;</comment>
                            <comment id="13238815" author="phabricator@reviews.facebook.net" created="Mon, 26 Mar 2012 20:56:25 +0000"  >&lt;p&gt;omalley updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2879&quot; title=&quot;Add &amp;quot;rat&amp;quot; target to build to look for missing license headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2879&quot;&gt;&lt;del&gt;HIVE-2879&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add &quot;rat&quot; target to build to look for missing license headers&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;  address Ashutosh&apos;s comments and add some additional thrift generated files&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2373&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build.xml&lt;br/&gt;
  ivy.xml&lt;br/&gt;
  ivy/libraries.properties&lt;/p&gt;</comment>
                            <comment id="13238824" author="phabricator@reviews.facebook.net" created="Mon, 26 Mar 2012 21:02:22 +0000"  >&lt;p&gt;omalley updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2879&quot; title=&quot;Add &amp;quot;rat&amp;quot; target to build to look for missing license headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2879&quot;&gt;&lt;del&gt;HIVE-2879&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add &quot;rat&quot; target to build to look for missing license headers&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;  Missed removing the *&lt;b&gt;/&lt;/b&gt;.sql line.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2373&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build.xml&lt;br/&gt;
  ivy.xml&lt;br/&gt;
  ivy/libraries.properties&lt;/p&gt;</comment>
                            <comment id="13246934" author="phabricator@reviews.facebook.net" created="Thu, 5 Apr 2012 01:40:20 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2879&quot; title=&quot;Add &amp;quot;rat&amp;quot; target to build to look for missing license headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2879&quot;&gt;&lt;del&gt;HIVE-2879&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add &quot;rat&quot; target to build to look for missing license headers&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit if tests pass&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2373&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  h-2879&lt;/p&gt;</comment>
                            <comment id="13247073" author="ashutoshc" created="Thu, 5 Apr 2012 07:34:23 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Owen!&lt;/p&gt;</comment>
                            <comment id="13247536" author="hudson" created="Thu, 5 Apr 2012 19:00:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1354 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1354/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1354/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2879&quot; title=&quot;Add &amp;quot;rat&amp;quot; target to build to look for missing license headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2879&quot;&gt;&lt;del&gt;HIVE-2879&lt;/del&gt;&lt;/a&gt; : Add rat target to build to look for missing license headers (Owen Omalley via Ashutosh Chauhan) (Revision 1309676)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309676&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309676&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265353" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:59 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548247" author="hudson" created="Wed, 9 Jan 2013 10:24:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2879&quot; title=&quot;Add &amp;quot;rat&amp;quot; target to build to look for missing license headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2879&quot;&gt;&lt;del&gt;HIVE-2879&lt;/del&gt;&lt;/a&gt; : Add rat target to build to look for missing license headers (Owen Omalley via Ashutosh Chauhan) (Revision 1309676)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309676&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309676&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518966" name="ASF.LICENSE.NOT.GRANTED--HIVE-2879.D2373.1.patch" size="4833" author="phabricator@reviews.facebook.net" created="Mon, 19 Mar 2012 23:29:37 +0000"/>
                            <attachment id="12520006" name="ASF.LICENSE.NOT.GRANTED--HIVE-2879.D2373.2.patch" size="5574" author="phabricator@reviews.facebook.net" created="Mon, 26 Mar 2012 20:56:28 +0000"/>
                            <attachment id="12520007" name="ASF.LICENSE.NOT.GRANTED--HIVE-2879.D2373.3.patch" size="5535" author="phabricator@reviews.facebook.net" created="Mon, 26 Mar 2012 21:02:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Mar 2012 23:29:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232268</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09yhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2880] Fail to create temporary directory when execute bucket map join</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2880</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I have 2 tables&lt;/p&gt;

&lt;p&gt;CREATE TABLE data(calling STRING  COMMENT &apos;Calling number&apos;, &lt;br/&gt;
volumn_download BIGINT COMMENT &apos;Volume download&apos;,&lt;br/&gt;
volumn_upload BIGINT COMMENT &apos;Volume upload&apos;)&lt;br/&gt;
PARTITIONED BY(ds STRING)&lt;br/&gt;
CLUSTERED BY (calling) INTO 100 BUCKETS;&lt;/p&gt;

&lt;p&gt;CREATE TABLE sub(isdn STRING, sub_id STRING)&lt;br/&gt;
CLUSTERED BY (isdn) INTO 100 BUCKETS;&lt;/p&gt;

&lt;p&gt;The DATA table has 15m records while SUB table only has 600k records.&lt;/p&gt;

&lt;p&gt;The following SQL script were executed successfully:&lt;br/&gt;
select /*+ MAPJOIN(b) */ a.calling, b.sub_id from data a join sub b on a.calling=b.isdn;&lt;/p&gt;

&lt;p&gt;But when I used Bucket map join by setting: set hive.optimize.bucketmapjoin = true&lt;br/&gt;
the above SQL script failed&lt;br/&gt;
select /*+ MAPJOIN(b) */ a.calling, b.sub_id from data a join sub b on a.calling=b.isdn;&lt;/p&gt;

&lt;p&gt;hive&amp;gt; set hive.optimize.bucketmapjoin = true;&lt;br/&gt;
hive&amp;gt; select /*+ MAPJOIN(b) */ a.calling, b.sub_id from ggsn_bucket a join sub_bucket b on a.calling=b.isdn;&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;br/&gt;
Execution log at: /tmp/hduser/hduser_20120320080909_8e6a3419-4d2c-4148-a0c9-166d051c8274.log&lt;br/&gt;
2012-03-20 08:09:34     Starting to launch local task to process map join;     maximum memory = 932118528&lt;br/&gt;
2012-03-20 08:09:34     End of local task; Time Taken: 0.072 sec.&lt;br/&gt;
Execution completed successfully&lt;br/&gt;
Mapred Local Task Succeeded . Convert the Join into MapJoin&lt;br/&gt;
Mapred Local Task Succeeded . Convert the Join into MapJoin&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks is set to 0 since there&apos;s no reduce operator&lt;br/&gt;
org.apache.hadoop.util.Shell$ExitCodeException: bash: line 0: cd: /u01/app/hduser/hadoop-0.20.203.0/tempdir/hduser/hive_2012-03-20_08-09-27_810_1393729636696443501/-local-10002/HashTable-Stage-1: No such file or directory&lt;br/&gt;
tar: Cowardly refusing to create an empty archive&lt;br/&gt;
Try `tar --help&apos; or `tar --usage&apos; for more information.&lt;/p&gt;

&lt;p&gt;        at org.apache.hadoop.util.Shell.runCommand(Shell.java:255)&lt;br/&gt;
        at org.apache.hadoop.util.Shell.run(Shell.java:182)&lt;br/&gt;
        at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:                         375)&lt;br/&gt;
        at org.apache.hadoop.hive.common.FileUtils.tar(FileUtils.java:260)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:407                         )&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136                         )&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:133)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.ja                         va:57)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1332)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1123)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:931)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:2                         55)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.                         java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Job Submission failed with exception &apos;org.apache.hadoop.util.Shell$ExitCodeException(bash: line 0: cd: /u01/app/hduser/hadoop-0.20.203.0/tempdir/hduser/hive_2012-03-20_08-09-27_810_1393729636696443501/-local-10002/HashTable-Stage-1: No such file or directory&lt;br/&gt;
tar: Cowardly refusing to create an empty archive&lt;br/&gt;
Try `tar --help&apos; or `tar --usage&apos; for more information.&lt;br/&gt;
)&apos;&lt;br/&gt;
java.lang.IllegalArgumentException: Can not create a Path from an empty string&lt;br/&gt;
        at org.apache.hadoop.fs.Path.checkPathArg(Path.java:82)&lt;br/&gt;
        at org.apache.hadoop.fs.Path.&amp;lt;init&amp;gt;(Path.java:90)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Utilities.getHiveJobID(Utilities.java:                         379)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Utilities.clearMapRedWork(Utilities.ja                         va:192)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:476                         )&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136                         )&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:133)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.ja                         va:57)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1332)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1123)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:931)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:2                         55)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.                         java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;in hadoop-env.sh, I set:&lt;br/&gt;
export HADOOP_OPTS=&quot;-Djava.net.preferIPv4Stack=true -Djava.io.tmpdir=/u01/app/hduser/hadoop-0.20.203.0/tempdir&quot;&lt;/p&gt;

&lt;p&gt;It looked like hive could not create temporary directory.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Cluster with 4 PC: CPU Intel dual core 2.2Ghz, 2Gb ram, 80G hdd, cent OS 5.0, NIC 100Mbps&lt;br/&gt;
1 of them: Namenode + 2nd namenode + job tracker + hive server (also Datanode and Task tracker)&lt;br/&gt;
3 of them: only datanode + task tracker&lt;br/&gt;
All of them could ssh password-less to each other and used the same user account: hduser&lt;/p&gt;</environment>
        <key id="12547132">HIVE-2880</key>
            <summary>Fail to create temporary directory when execute bucket map join</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="makiet">makiet</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 01:36:53 +0000</created>
                <updated>Tue, 20 Mar 2012 01:38:25 +0000</updated>
                                            <version>0.8.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124204</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hive bucket map join</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2881] Remove redundant key comparing in SMBMapJoinOperator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2881</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, SMBJoin compares keys twice in #findSmallestKey and #joinObject.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547160">HIVE-2881</key>
            <summary>Remove redundant key comparing in SMBMapJoinOperator</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 08:16:23 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:57 +0000</updated>
                            <resolved>Mon, 2 Apr 2012 05:48:17 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13233299" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 08:17:37 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2881&quot; title=&quot;Remove redundant key comparing in SMBMapJoinOperator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2881&quot;&gt;&lt;del&gt;HIVE-2881&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Remove redundant key comparing in SMBMapJoinOperator&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-988 Remove redundant key comparing in SMBMapJoinOperator&lt;/p&gt;

&lt;p&gt;  Currently, SMBJoin compares keys twice in #findSmallestKey and #joinObject.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2379&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/SMBMapJoinOperator.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5331/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5331/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13233941" author="navis" created="Tue, 20 Mar 2012 23:26:51 +0000"  >&lt;p&gt;Passed all tests.&lt;/p&gt;</comment>
                            <comment id="13243984" author="namit" created="Mon, 2 Apr 2012 05:48:17 +0000"  >&lt;p&gt;Committed. Thanks Navis&lt;/p&gt;</comment>
                            <comment id="13243986" author="phabricator@reviews.facebook.net" created="Mon, 2 Apr 2012 05:48:46 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2881&quot; title=&quot;Remove redundant key comparing in SMBMapJoinOperator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2881&quot;&gt;&lt;del&gt;HIVE-2881&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Remove redundant key comparing in SMBMapJoinOperator&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good -&lt;/p&gt;

&lt;p&gt;  I know this did not have good comments to start with, but it would be great if you can&lt;br/&gt;
  add more comments for changes like this. It took me a very long time to go over the&lt;br/&gt;
  code and make sure we are not missing any boundary condition. An example would&lt;br/&gt;
  have really helped.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2379&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-988&lt;/p&gt;</comment>
                            <comment id="13244141" author="hudson" created="Mon, 2 Apr 2012 11:46:15 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1346 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1346/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1346/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2881&quot; title=&quot;Remove redundant key comparing in SMBMapJoinOperator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2881&quot;&gt;&lt;del&gt;HIVE-2881&lt;/del&gt;&lt;/a&gt; Remove redundant key comparing in SMBMapJoinOperator&lt;br/&gt;
(Navis via namit) (Revision 1308241)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1308241&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1308241&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SMBMapJoinOperator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265240" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:18 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548241" author="hudson" created="Wed, 9 Jan 2013 10:24:57 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2881&quot; title=&quot;Remove redundant key comparing in SMBMapJoinOperator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2881&quot;&gt;&lt;del&gt;HIVE-2881&lt;/del&gt;&lt;/a&gt; Remove redundant key comparing in SMBMapJoinOperator&lt;br/&gt;
(Navis via namit) (Revision 1308241)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1308241&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1308241&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SMBMapJoinOperator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12519044" name="ASF.LICENSE.NOT.GRANTED--HIVE-2881.D2379.1.patch" size="2990" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 08:17:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Mar 2012 08:17:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124205</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2882] Problem with Hive using JDBC</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2882</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I am trying to implement a task in Hive (Similar to Stored Procedure in SQL (Block of queries)).&lt;br/&gt;
In SQL, when we write cursor, first we execute select query and then fetching the records we perform some actions.&lt;/p&gt;

&lt;p&gt;Likely I have fired a select query in Hive as:&lt;/p&gt;

&lt;p&gt;String driverName = &quot;org.apache.hadoop.hive.jdbc.HiveDriver&quot;;&lt;br/&gt;
Class.forName(driverName);&lt;br/&gt;
Connection con = DriverManager.getConnection(&quot;jdbc:hive://localhost:10000/default&quot;, &quot;&quot;, &quot;&quot;);&lt;br/&gt;
String sql=null;&lt;br/&gt;
Statement stmt = con.createStatement();&lt;br/&gt;
Statement stmt1 = con.createStatement();&lt;br/&gt;
ResultSet res=null;&lt;br/&gt;
ResultSet rs1=null;&lt;/p&gt;

&lt;p&gt;sql=&quot;select a,c,b from tbl_name&quot;;&lt;br/&gt;
res=stmt.executeQuery();    -----------&amp;gt; CONTAINS 30 RECORDS&lt;br/&gt;
while(res.next())&lt;br/&gt;
{&lt;br/&gt;
     sql=&quot;select d,e,f, from t1&quot;;&lt;br/&gt;
     rs1=stmt1.executeQuery();&lt;br/&gt;
     like wise many queries are there.....&lt;/p&gt;

&lt;p&gt;.&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
..&lt;br/&gt;
}&lt;br/&gt;
But the problem is that while loop executes only once instead of 30 times when the inner query (inside while) gets execute.&lt;/p&gt;

&lt;p&gt;And If I create two different connection for both the queries then all works fine.&lt;br/&gt;
Like:&lt;br/&gt;
String driverName = &quot;org.apache.hadoop.hive.jdbc.HiveDriver&quot;;&lt;br/&gt;
Class.forName(driverName);&lt;br/&gt;
Connection con = DriverManager.getConnection(&quot;jdbc:hive://localhost:10000/default&quot;, &quot;&quot;, &quot;&quot;);&lt;br/&gt;
Connection con1 = DriverManager.getConnection(&quot;jdbc:hive://localhost:10000/default&quot;, &quot;&quot;, &quot;&quot;);&lt;br/&gt;
String sql=null;&lt;br/&gt;
Statement stmt = con.createStatement();&lt;br/&gt;
Statement stmt1 = con1.createStatement();&lt;br/&gt;
ResultSet res=null;&lt;br/&gt;
ResultSet rs1=null;&lt;/p&gt;

&lt;p&gt;To sum up, when I iterate through a result set do I need to use a different connection(and statement object) to&lt;br/&gt;
execute other queries????&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System - Ubuntu 11.10&lt;br/&gt;
Softwares - Hadoop-0.20.2, Hive-0.7.1&lt;/p&gt;</environment>
        <key id="12547178">HIVE-2882</key>
            <summary>Problem with Hive using JDBC</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bhavesh25shah">Bhavesh Shah</reporter>
                        <labels>
                            <label>hadoop</label>
                            <label>hive</label>
                    </labels>
                <created>Tue, 20 Mar 2012 11:22:16 +0000</created>
                <updated>Wed, 9 Jan 2013 10:36:59 +0000</updated>
                            <resolved>Wed, 9 Jan 2013 10:36:59 +0000</resolved>
                                    <version>0.7.1</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="13261399" author="gemini5201314" created="Wed, 25 Apr 2012 08:34:52 +0000"  >&lt;p&gt;hive didn&apos;t support cursor in JDBC world.if you intend iterate through a result set,maybe you should first execute the query and store it,and using your client logic to generate second query .this maybe a more PIG GENERATE case.I suggest close this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Apr 2012 08:34:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232336</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lly7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124206</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2883] Metastore client doesnt close connection properly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2883</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;While closing connection, it always fail with following trace. Seemingly, it doesnt have any harmful effects.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;12/03/20 10:55:02 ERROR hive.metastore: Unable to shutdown local metastore client
org.apache.thrift.transport.TTransportException: Cannot write to &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; outputStream
	at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142)
	at org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:163)
	at org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:91)
	at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:62)
	at com.facebook.fb303.FacebookService$Client.send_shutdown(FacebookService.java:421)
	at com.facebook.fb303.FacebookService$Client.shutdown(FacebookService.java:415)
	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.close(HiveMetaStoreClient.java:310)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12547247">HIVE-2883</key>
            <summary>Metastore client doesnt close connection properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 17:59:45 +0000</created>
                <updated>Wed, 24 Apr 2013 01:39:01 +0000</updated>
                            <resolved>Tue, 24 Apr 2012 19:30:31 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13239049" author="ashutoshc" created="Tue, 27 Mar 2012 00:21:40 +0000"  >&lt;p&gt;Looks like client.shutdown() is unnecessarily called after client.close() I guess only one of those calls will suffice.&lt;/p&gt;</comment>
                            <comment id="13246546" author="ashutoshc" created="Wed, 4 Apr 2012 18:24:35 +0000"  >&lt;p&gt;My analysis is client already knows about transport, so inside client.shutdown() it is calling transport.close() which closes underlying outputstream. So, we &lt;b&gt;should&lt;/b&gt; not do transport.close() ourselves in HiveMetaStoreClient.close() ? But, I can&apos;t be sure of this hypothesis since implementation of client.shutdown() is in FaceBookService.client (which is in libfb303.jar) I cant seem to find sources for this class anywhere. &lt;/p&gt;

&lt;p&gt;So, I request Facebook contributors of Hive project to either fix this bug or release sources of libfb303.jar so that I can verify and fix this myself.&lt;/p&gt;</comment>
                            <comment id="13246636" author="traviscrawford" created="Wed, 4 Apr 2012 19:34:27 +0000"  >&lt;p&gt;@ashutosh - fb303 is released as a thrift contrib project:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/thrift/trunk/contrib/fb303/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/thrift/trunk/contrib/fb303/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13246673" author="ashutoshc" created="Wed, 4 Apr 2012 20:02:34 +0000"  >&lt;p&gt;Thanks, Travis for pointing this out. I will take a look.&lt;/p&gt;</comment>
                            <comment id="13246692" author="ashutoshc" created="Wed, 4 Apr 2012 20:20:29 +0000"  >&lt;p&gt;Nopes, this location doesnt have it. It just has abstract class FaceBookBase.java I am looking for its implemetation that is FaceBookService.java Do you know where is that?&lt;/p&gt;</comment>
                            <comment id="13246780" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 22:06:20 +0000"  >&lt;p&gt;ashutoshc requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; title=&quot;Metastore client doesnt close connection properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2883&quot;&gt;&lt;del&gt;HIVE-2883&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesnt close connection properly&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2883&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Here is the patch which gets rid of this problem as per my hypothesis. I also tested it and the above noted stack trace doesnt occur anymore.&lt;/p&gt;

&lt;p&gt;  While closing connection, it always fail with following trace. Seemingly, it doesnt have any harmful effects.&lt;/p&gt;

&lt;p&gt;  12/03/20 10:55:02 ERROR hive.metastore: Unable to shutdown local metastore client&lt;br/&gt;
  org.apache.thrift.transport.TTransportException: Cannot write to null outputStream&lt;br/&gt;
  	at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142)&lt;br/&gt;
  	at org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:163)&lt;br/&gt;
  	at org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:91)&lt;br/&gt;
  	at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:62)&lt;br/&gt;
  	at com.facebook.fb303.FacebookService$Client.send_shutdown(FacebookService.java:421)&lt;br/&gt;
  	at com.facebook.fb303.FacebookService$Client.shutdown(FacebookService.java:415)&lt;br/&gt;
  	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.close(HiveMetaStoreClient.java:310)&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5985/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5985/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13250953" author="traviscrawford" created="Tue, 10 Apr 2012 18:50:25 +0000"  >&lt;p&gt;I patched this in and ran a pig query through HCatalog, and the &quot;Unable to shutdown local metastore client&quot; error went away, and the query produced a correct result. LGTM.&lt;/p&gt;</comment>
                            <comment id="13254899" author="mithun" created="Mon, 16 Apr 2012 18:44:12 +0000"  >&lt;p&gt;+1 &lt;/p&gt;

&lt;p&gt;Good fix, this. Takes care of &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-236&quot; title=&quot;Exception during local-metastore shutdown on HCat-client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-236&quot;&gt;&lt;del&gt;HCATALOG-236&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;</comment>
                            <comment id="13255747" author="ashutoshc" created="Tue, 17 Apr 2012 17:30:19 +0000"  >&lt;p&gt;Hive Committers,&lt;/p&gt;

&lt;p&gt;This has been independently verified by couple other folks. Can someone review it for me?&lt;/p&gt;

&lt;p&gt;All tests passed with the patch.&lt;/p&gt;</comment>
                            <comment id="13259702" author="ashutoshc" created="Mon, 23 Apr 2012 16:31:30 +0000"  >&lt;p&gt;Unlinking from 0.9.0 release&lt;/p&gt;</comment>
                            <comment id="13259934" author="phabricator@reviews.facebook.net" created="Mon, 23 Apr 2012 20:44:32 +0000"  >&lt;p&gt;cwsteinbach has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; title=&quot;Metastore client doesnt close connection properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2883&quot;&gt;&lt;del&gt;HIVE-2883&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesnt close connection properly&quot;.&lt;/p&gt;

&lt;p&gt;  +1. Please commit.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13259969" author="ashutoshc" created="Mon, 23 Apr 2012 21:26:23 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13259971" author="phabricator@reviews.facebook.net" created="Mon, 23 Apr 2012 21:30:32 +0000"  >&lt;p&gt;ashutoshc has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; title=&quot;Metastore client doesnt close connection properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2883&quot;&gt;&lt;del&gt;HIVE-2883&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesnt close connection properly&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by hashutosh.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1329461&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1329461&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13260017" author="thw" created="Mon, 23 Apr 2012 22:18:54 +0000"  >&lt;p&gt;Reopening for backport to 0.9 branch.&lt;/p&gt;</comment>
                            <comment id="13260297" author="hudson" created="Tue, 24 Apr 2012 06:51:24 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1392 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1392/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1392/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; title=&quot;Metastore client doesnt close connection properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2883&quot;&gt;&lt;del&gt;HIVE-2883&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesnt close connection properly&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2883&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is the patch which gets rid of this problem as per my hypothesis. I also&lt;br/&gt;
tested it and the above noted stack trace doesnt occur anymore.&lt;/p&gt;

&lt;p&gt;While closing connection, it always fail with following trace. Seemingly, it&lt;br/&gt;
doesnt have any harmful effects.&lt;/p&gt;

&lt;p&gt;12/03/20 10:55:02 ERROR hive.metastore: Unable to shutdown local metastore&lt;br/&gt;
client&lt;br/&gt;
org.apache.thrift.transport.TTransportException: Cannot write to null&lt;br/&gt;
outputStream&lt;br/&gt;
	at&lt;br/&gt;
org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:163)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:91)&lt;br/&gt;
	at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:62)&lt;br/&gt;
	at&lt;br/&gt;
com.facebook.fb303.FacebookService$Client.send_shutdown(FacebookService.java:421)&lt;br/&gt;
	at com.facebook.fb303.FacebookService$Client.shutdown(FacebookService.java:415)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.metastore.HiveMetaStoreClient.close(HiveMetaStoreClient.java:310)&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2613&lt;/a&gt; (Revision 1329461)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329461&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329461&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13260871" author="ashutoshc" created="Tue, 24 Apr 2012 19:30:31 +0000"  >&lt;p&gt;Checked-in 0.9 branch.&lt;/p&gt;</comment>
                            <comment id="13265252" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:20 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548243" author="hudson" created="Wed, 9 Jan 2013 10:24:57 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; title=&quot;Metastore client doesnt close connection properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2883&quot;&gt;&lt;del&gt;HIVE-2883&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Metastore client doesnt close connection properly&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2883&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2883&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is the patch which gets rid of this problem as per my hypothesis. I also&lt;br/&gt;
tested it and the above noted stack trace doesnt occur anymore.&lt;/p&gt;

&lt;p&gt;While closing connection, it always fail with following trace. Seemingly, it&lt;br/&gt;
doesnt have any harmful effects.&lt;/p&gt;

&lt;p&gt;12/03/20 10:55:02 ERROR hive.metastore: Unable to shutdown local metastore&lt;br/&gt;
client&lt;br/&gt;
org.apache.thrift.transport.TTransportException: Cannot write to null&lt;br/&gt;
outputStream&lt;br/&gt;
	at&lt;br/&gt;
org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:163)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:91)&lt;br/&gt;
	at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:62)&lt;br/&gt;
	at&lt;br/&gt;
com.facebook.fb303.FacebookService$Client.send_shutdown(FacebookService.java:421)&lt;br/&gt;
	at com.facebook.fb303.FacebookService$Client.shutdown(FacebookService.java:415)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.metastore.HiveMetaStoreClient.close(HiveMetaStoreClient.java:310)&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2613&lt;/a&gt; (Revision 1329461)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329461&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329461&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12539975">HCATALOG-236</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12521403" name="ASF.LICENSE.NOT.GRANTED--HIVE-2883.D2613.1.patch" size="887" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 22:06:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Apr 2012 19:34:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09yf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56017</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2884] When &quot;distinct&quot; is used in from of STDDEV, the statement fails with a Java exception error</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2884</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Given the following statement:&lt;/p&gt;

&lt;p&gt;select distinct STDDEV_SAMP(TXT_1.`age`) as AgeAlias, &lt;br/&gt;
       STDDEV_SAMP(TXT_1.`weight`) as WeightAlias &lt;br/&gt;
  from `CLASS` TXT_1;&lt;/p&gt;

&lt;p&gt;Hive generates a Java SQL exception error upon execution. If the &quot;distinct&quot; is removed, the statement runs fine. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12547248">HIVE-2884</key>
            <summary>When &quot;distinct&quot; is used in from of STDDEV, the statement fails with a Java exception error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mcazzari">Mauro Cazzari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 18:06:32 +0000</created>
                <updated>Sat, 26 May 2012 01:44:26 +0000</updated>
                            <resolved>Sat, 26 May 2012 01:44:26 +0000</resolved>
                                    <version>0.7.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13283870" author="appodictic" created="Sat, 26 May 2012 01:44:14 +0000"  >&lt;p&gt;I think this is what you need.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select distinct (STDDEV_SAMP(TXT_1.`age`)) as AgeAlias,
distinct (STDDEV_SAMP(TXT_1.`weight`)) as WeightAlias
from `CLASS` TXT_1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;re open if I am wrong.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 May 2012 01:44:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124207</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2885] select distinct &lt;string&gt; from table returns wrong result</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2885</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Give the following table:&lt;/p&gt;

&lt;p&gt;CREATE TABLE `MYTAB` (`a` DOUBLE)....&lt;/p&gt;

&lt;p&gt;containing the values 1, 2, 3, and 4, the following SQL fails to produce the correct result:&lt;/p&gt;

&lt;p&gt;select distinct &apos;FOO&apos; from `MYTAB`&lt;/p&gt;

&lt;p&gt;Note that this issue didn&apos;t show up with Hive 7. Only 8.1 seems to be affected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547251">HIVE-2885</key>
            <summary>select distinct &lt;string&gt; from table returns wrong result</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mcazzari">Mauro Cazzari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 18:17:17 +0000</created>
                <updated>Sat, 26 May 2012 01:41:46 +0000</updated>
                            <resolved>Sat, 26 May 2012 01:41:46 +0000</resolved>
                                    <version>0.8.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13233663" author="mcazzari" created="Tue, 20 Mar 2012 18:56:25 +0000"  >&lt;p&gt;I just verified that the problem seems to have gone away with the latest version of Hive. If anyone knows which Hive issue fixed this, feel free to mark it as a DUP.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2886] distinct with order by fails with Java SQL exception.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2886</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following select:&lt;/p&gt;

&lt;p&gt;select distinct TXT_1.`a`, TXT_1.`b` from `MYTAB` TXT_1 order by TXT_1.`a` asc&lt;/p&gt;

&lt;p&gt;fails with a Java SQL exception. Note that if the &quot;distinct&quot; or the table alias is removed from the SQL, the statement executes fine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547253">HIVE-2886</key>
            <summary>distinct with order by fails with Java SQL exception.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mcazzari">Mauro Cazzari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 18:28:19 +0000</created>
                <updated>Mon, 9 Apr 2012 10:53:56 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13249786" author="ransom" created="Mon, 9 Apr 2012 10:53:56 +0000"  >&lt;p&gt;distinct can only effect on  one table&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 10:53:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124209</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
