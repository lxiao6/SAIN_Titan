<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:19:34 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-11-22+AND+created+%3C%3D+2011-11-28+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="10" total="10"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2601] map join silently fails when the heap is exhausted if the chosen table for map join compressed</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2601</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If table used for Map Join is not compressed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-22 12:50:03     Starting to launch local task to process map join;      maximum memory = 49610752
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1&quot;&lt;/span&gt; java.lang.OutOfMemoryError: GC overhead limit exceeded
        at org.apache.hadoop.util.RunJar$1.run(RunJar.java:156)
11/11/22 00:50:28 ERROR exec.MapredLocalTask: Execution failed with exit status: 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If table used for Map Join is compressed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-22 12:56:24     Starting to launch local task to process map join;      maximum memory = 48562176
11/11/22 00:57:08 ERROR exec.MapredLocalTask: Execution failed with exit status: 2
FAILED: Execution Error, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code 2 from org.apache.hadoop.hive.ql.exec.MapredLocalTask
11/11/22 00:57:08 ERROR ql.Driver: FAILED: Execution Error, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code 2 from org.apache.hadoop.hive.ql.exec.MapredLocalTask
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12532294">HIVE-2601</key>
            <summary>map join silently fails when the heap is exhausted if the chosen table for map join compressed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="esteban">Esteban Gutierrez</reporter>
                        <labels>
                            <label>mapjoin</label>
                    </labels>
                <created>Tue, 22 Nov 2011 09:14:03 +0000</created>
                <updated>Tue, 22 Nov 2011 09:14:03 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124011</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2602] add support for insert partition overwrite(...) if not exists</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2602</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;INSERT OVERWRITE TABLE X PARTITION (a=b, c=d) IF NOT EXISTS ...&lt;/p&gt;

&lt;p&gt;The partition should be created and written if and only if it&apos;s not there already.&lt;/p&gt;

&lt;p&gt;The support can be added for dynamic partitions in the future, but this jira is for adding this support for static partitions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532369">HIVE-2602</key>
            <summary>add support for insert partition overwrite(...) if not exists</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chinnalalam">Chinna Rao Lalam</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Nov 2011 17:49:46 +0000</created>
                <updated>Wed, 2 May 2012 01:16:48 +0000</updated>
                            <resolved>Mon, 19 Dec 2011 03:14:38 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13155896" author="chinnalalam" created="Wed, 23 Nov 2011 14:32:27 +0000"  >&lt;p&gt;I am interested to work on this just i am conforming the requirement...&lt;/p&gt;

&lt;p&gt;If INSERT OVERWRITE TABLE X PARTITION (a=b, c=d)... earlier it is working like&lt;br/&gt;
If partition not exists it will create the partition and add data into it.&lt;br/&gt;
If partition exists it will delete the old data and it will add new data.&lt;/p&gt;

&lt;p&gt;After change INSERT OVERWRITE TABLE X PARTITION (a=b, c=d) IF NOT EXISTS ...&lt;br/&gt;
If partition not exists it will create the partition and add data into it.&lt;br/&gt;
If partition exists it wont do any thing (it wont delete old data and wont add new data)&lt;br/&gt;
and this should happen at the time of query compilation like &lt;br/&gt;
&quot;create table if not exists as select&quot;&lt;/p&gt;</comment>
                            <comment id="13157153" author="chinnalalam" created="Fri, 25 Nov 2011 13:48:24 +0000"  >&lt;p&gt;Assigned to me as i have patch ready with me. Once the test cases execution completes will upload the same.&lt;/p&gt;</comment>
                            <comment id="13159833" author="jiraposter@reviews.apache.org" created="Wed, 30 Nov 2011 05:27:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2974/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2974/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and namit jain.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;INSERT OVERWRITE TABLE X PARTITION (a=b, c=d) IF NOT EXISTS ...&lt;br/&gt;
The partition should be created and written if and only if it&apos;s not there already. &lt;br/&gt;
Added a check to validate the partition exist or not.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2602&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1206077 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1206077 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2974/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2974/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;all tests passed and added new testcases&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;chinna&lt;/p&gt;
</comment>
                            <comment id="13159843" author="chinnalalam" created="Wed, 30 Nov 2011 05:49:59 +0000"  >&lt;p&gt;Provided a check to validate the partition exist or not if it exists remaining execution it will skip and execution will complete.&lt;/p&gt;</comment>
                            <comment id="13161457" author="namit" created="Fri, 2 Dec 2011 07:03:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D579&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D579&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks Chinna. I will take a look&lt;/p&gt;</comment>
                            <comment id="13161459" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 07:05:39 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; add support for insert partition overwrite(...) if not exists&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  INSERT OVERWRITE TABLE X PARTITION (a=b, c=d) IF NOT EXISTS ...&lt;/p&gt;

&lt;p&gt;  The partition should be created and written if and only if it&apos;s not there already.&lt;/p&gt;

&lt;p&gt;  The support can be added for dynamic partitions in the future, but this jira is for adding this support for static partitions.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D579&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D579&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1281/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1281/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13165358" author="namit" created="Thu, 8 Dec 2011 17:52:45 +0000"  >&lt;p&gt;Sorry about the delay on my part for review&lt;/p&gt;</comment>
                            <comment id="13165361" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 17:53:39 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; add support for insert partition overwrite(...) if not exists&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:890 fix the spelling of existls&lt;br/&gt;
  ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q:1 add a explain plan for the insert overtwrite statements.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:892 Instead of adding a new variable &apos;skipAnalysis&apos;- add a return value to doPhase1 - continue or get out remaining processing.&lt;br/&gt;
  ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q:3 Add a test for insert overwrite if not exists for dynamic partitions&lt;br/&gt;
  ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q:6 For a small output, can you load only 5 rows from kv1.txt&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D579&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D579&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13168402" author="chinnalalam" created="Tue, 13 Dec 2011 14:13:06 +0000"  >&lt;p&gt;Reworked on the patch according to the review comments and patch uploaded in the jira.&lt;br/&gt;
This patch will take care of static partitions only.&lt;/p&gt;</comment>
                            <comment id="13169000" author="namit" created="Wed, 14 Dec 2011 02:11:12 +0000"  >&lt;p&gt;I am getting a lot of merge conflicts. Can you refresh ?&lt;/p&gt;</comment>
                            <comment id="13169379" author="chinnalalam" created="Wed, 14 Dec 2011 14:11:26 +0000"  >&lt;p&gt;Rebased and uploaded the patch&lt;/p&gt;</comment>
                            <comment id="13169973" author="phabricator@reviews.facebook.net" created="Thu, 15 Dec 2011 05:11:30 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; add support for insert partition overwrite(...) if not exists&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  INSERT OVERWRITE TABLE X PARTITION (a=b, c=d) IF NOT EXISTS ...&lt;/p&gt;

&lt;p&gt;  The partition should be created and written if and only if it&apos;s not there already.&lt;/p&gt;

&lt;p&gt;  The support can be added for dynamic partitions in the future, but this jira is for adding this support for static partitions.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D879&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/insertover_dynapart_ifnotexists.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/insertover_dynapart_ifnotexists.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1863/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1863/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13169978" author="namit" created="Thu, 15 Dec 2011 05:52:07 +0000"  >&lt;p&gt;1. make the tests deterministic. Add a order by when you are selecting 5 rows (limit 5)&lt;br/&gt;
2. Throw a semantic error for &apos;if not exists&apos; for dynamic partitions - it might be confusing to document this&lt;br/&gt;
   behavior for dynamic partitions, so let us now allow it.&lt;/p&gt;</comment>
                            <comment id="13170190" author="chinnalalam" created="Thu, 15 Dec 2011 13:32:36 +0000"  >&lt;p&gt;updated the patch as per the review comments.&lt;/p&gt;</comment>
                            <comment id="13170374" author="phabricator@reviews.facebook.net" created="Thu, 15 Dec 2011 17:58:30 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; add support for insert partition overwrite(...) if not exists&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D579&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D579&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientnegative/insertover_dynapart_ifnotexists.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/insertover_dynapart_ifnotexists.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13172010" author="namit" created="Mon, 19 Dec 2011 03:14:39 +0000"  >&lt;p&gt;Committed. Thanks Chinna Rao Lalam&lt;/p&gt;</comment>
                            <comment id="13172027" author="hudson" created="Mon, 19 Dec 2011 04:33:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.23.0 #36 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.23.0/36/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.23.0/36/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt; add support for insert partition overwrite(...) if not&lt;br/&gt;
          exists (Chinna Rao Lalam via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1220596&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1220596&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/insertover_dynapart_ifnotexists.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/insertover_dynapart_ifnotexists.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13172087" author="hudson" created="Mon, 19 Dec 2011 08:24:10 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1158 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1158/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1158/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt; add support for insert partition overwrite(...) if not&lt;br/&gt;
          exists (Chinna Rao Lalam via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1220596&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1220596&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/insertover_dynapart_ifnotexists.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/insert1_overwrite_partitions.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/insertover_dynapart_ifnotexists.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265266" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:24 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13266278" author="phabricator@reviews.facebook.net" created="Wed, 2 May 2012 01:16:46 +0000"  >&lt;p&gt;njain has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2602&quot; title=&quot;add support for insert partition overwrite(...) if not exists&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2602&quot;&gt;&lt;del&gt;HIVE-2602&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; add support for insert partition overwrite(...) if not exists&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D579&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D579&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505854" name="ASF.LICENSE.NOT.GRANTED--HIVE-2602.D579.1.patch" size="26008" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 07:05:40 +0000"/>
                            <attachment id="12507559" name="ASF.LICENSE.NOT.GRANTED--HIVE-2602.D579.2.patch" size="26305" author="phabricator@reviews.facebook.net" created="Thu, 15 Dec 2011 17:58:31 +0000"/>
                            <attachment id="12507478" name="ASF.LICENSE.NOT.GRANTED--HIVE-2602.D879.1.patch" size="33345" author="phabricator@reviews.facebook.net" created="Thu, 15 Dec 2011 05:11:31 +0000"/>
                            <attachment id="12507184" name="HIVE-2602.1.patch" size="34298" author="chinnalalam" created="Tue, 13 Dec 2011 14:00:03 +0000"/>
                            <attachment id="12507352" name="HIVE-2602.2.patch" size="33845" author="chinnalalam" created="Wed, 14 Dec 2011 14:10:08 +0000"/>
                            <attachment id="12507517" name="HIVE-2602.3.patch" size="26861" author="chinnalalam" created="Thu, 15 Dec 2011 13:29:50 +0000"/>
                            <attachment id="12505577" name="HIVE-2602.patch" size="26324" author="chinnalalam" created="Wed, 30 Nov 2011 05:18:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Nov 2011 14:32:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218102</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124012</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2603] recreate key and value when switching files in CombineHiveInputFormat</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2603</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;different files in the same mappers may have different types of key and value. So need to create the key and value object when switching files. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12532373">HIVE-2603</key>
            <summary>recreate key and value when switching files in CombineHiveInputFormat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Nov 2011 18:34:33 +0000</created>
                <updated>Wed, 25 Jan 2012 03:41:58 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218106</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124013</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2604] Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2604</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The strategies supported are&lt;br/&gt;
1. using a specified codec on the column&lt;br/&gt;
2. using a specific codec on the column which is serialized via a specific serde&lt;br/&gt;
3. using a specific &quot;TypeSpecificCompressor&quot; instance&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532504">HIVE-2604</key>
            <summary>Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12503539">HIVE-2097</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="n_krishna_kumar">Krishna Kumar</assignee>
                                    <reporter username="n_krishna_kumar">Krishna Kumar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2011 17:58:39 +0000</created>
                <updated>Fri, 7 Sep 2012 05:08:46 +0000</updated>
                                                                            <component>Contrib</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13156005" author="n_krishna_kumar" created="Wed, 23 Nov 2011 18:00:36 +0000"  >&lt;p&gt;initial version of the patch.&lt;/p&gt;</comment>
                            <comment id="13156311" author="he yongqiang" created="Wed, 23 Nov 2011 21:44:57 +0000"  >&lt;p&gt;Can u give some examples of such compressors? so we can also try that.&lt;/p&gt;</comment>
                            <comment id="13156758" author="n_krishna_kumar" created="Thu, 24 Nov 2011 15:30:05 +0000"  >&lt;p&gt;Sure. I&apos;ll add some of the compressors in a day or two.&lt;/p&gt;</comment>
                            <comment id="13162709" author="n_krishna_kumar" created="Mon, 5 Dec 2011 10:25:46 +0000"  >&lt;p&gt;The current implementation works as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds a serde UberCompressorSerde, which is used to convert the cell values to bytes&lt;/li&gt;
	&lt;li&gt;Adds a codec UberCompressionCodec which uses user-specific config to compress each block of column values through one of three possible mechanisms&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Config for the column: &quot;codec:&amp;lt;codecname&amp;gt;&quot; - Apply a CompressionCodec on the UberCompressorSerde serialized bytestream&lt;/li&gt;
	&lt;li&gt;Config for the column: &quot;codec:&amp;lt;codecname&amp;gt;,&amp;lt;serdename&amp;gt;&quot; Re-serialize the bytestream through serdename and then apply codecname on it&lt;/li&gt;
	&lt;li&gt;Config for the column: &quot;compressor:&amp;lt;compressorname&amp;gt;&quot; compress the cell values by sending them through the type-specific compressor&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;As a future enhancement, the config, say if is &amp;quot;dynamic&amp;quot;, can let the codec decide the mechanism on the current block stats/previous seen blocks&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; The idea is to maintain the ability to use a serde/codec combination (as we do now) for any columns which are not &apos;interesting&apos; and use type-specific compressors only for special columns.&lt;/p&gt;

&lt;p&gt; Type-specific compressor is also an extension point only; no implementation attached to this jira. Have attached one sample compressor to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2623&quot; title=&quot;Add Integer type compressors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2623&quot;&gt;HIVE-2623&lt;/a&gt;, while many others are possible. &lt;/p&gt;


</comment>
                            <comment id="13165123" author="n_krishna_kumar" created="Thu, 8 Dec 2011 09:53:13 +0000"  >&lt;p&gt;Serde wraps lazysimpleserde to make it more similar to columnarserde + tests added&lt;/p&gt;</comment>
                            <comment id="13165125" author="jiraposter@reviews.apache.org" created="Thu, 8 Dec 2011 10:00:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3075/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3075/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;gaps&lt;/li&gt;
	&lt;li&gt;supports only certain complex types&lt;/li&gt;
	&lt;li&gt;stats&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; title=&quot;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2604&quot;&gt;HIVE-2604&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2604&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/compressors/DummyIntegerCompressor.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/dsalg/Tuple.java PRE-CREATION &lt;br/&gt;
  contrib/src/test/queries/clientpositive/ubercompressor.q PRE-CREATION &lt;br/&gt;
  contrib/src/test/results/clientpositive/ubercompressor.q.out PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorUtils.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorColumnConfig.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorConfig.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorSerde.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionOutputStream.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/InputReader.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/OutputWriter.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/TypeSpecificCompressor.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionCodec.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3075/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3075/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;test added&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Krishna&lt;/p&gt;
</comment>
                            <comment id="13165283" author="appodictic" created="Thu, 8 Dec 2011 15:53:27 +0000"  >&lt;p&gt;I think this is a +1 idea, but I am -1 on the name &apos;Uber&apos; has to go. The name should describe what the class does ie ColumnarCompressor or PerColumnCompressor. The problem is everything in hive is Uber cool anyway so every class would have to be named as such.&lt;/p&gt;</comment>
                            <comment id="13165815" author="n_krishna_kumar" created="Fri, 9 Dec 2011 03:41:29 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I used the word Uber, not in the sense of &apos;super&apos; but, as &lt;span class=&quot;error&quot;&gt;&amp;#91;Wikipedia def&amp;#93;&lt;/span&gt; &apos;&#220;ber also translates to over, above, meta, but mainly in compound words.&apos;; that is, highlighting the fact that this is not a &apos;real&apos; compressor but a wrapper on other existing compressors/codecs. Anyway, no hangups, can bulk rename if necessary.&lt;/p&gt;</comment>
                            <comment id="13171514" author="jiraposter@reviews.apache.org" created="Sat, 17 Dec 2011 10:42:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3075/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3075/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-17 10:41:45.367761)&lt;/p&gt;


&lt;p&gt;Review request for hive and Yongqiang He.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Closed the two gaps - support for arbitrary types, and stats&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;gaps&lt;/li&gt;
	&lt;li&gt;supports only certain complex types&lt;/li&gt;
	&lt;li&gt;stats&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; title=&quot;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2604&quot;&gt;HIVE-2604&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2604&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/InputReader.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/OutputWriter.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/TypeSpecificCompressor.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionCodec.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionOutputStream.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorColumnConfig.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorConfig.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorSerde.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorSerdeField.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorUtils.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/compressors/DummyIntegerCompressor.java PRE-CREATION &lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/dsalg/Tuple.java PRE-CREATION &lt;br/&gt;
  contrib/src/test/queries/clientpositive/ubercompressor.q PRE-CREATION &lt;br/&gt;
  contrib/src/test/results/clientpositive/ubercompressor.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3075/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3075/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;test added&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Krishna&lt;/p&gt;
</comment>
                            <comment id="13175806" author="phabricator@reviews.facebook.net" created="Sun, 25 Dec 2011 05:27:30 +0000"  >&lt;p&gt;krishnakumar requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; title=&quot;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2604&quot;&gt;HIVE-2604&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  added serde/codec which provide for type-specific compression mechanisms&lt;/p&gt;

&lt;p&gt;  The strategies supported are&lt;br/&gt;
  1. using a specified codec on the column&lt;br/&gt;
  2. using a specific codec on the column which is serialized via a specific serde&lt;br/&gt;
  3. using a specific &quot;TypeSpecificCompressor&quot; instance&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1011&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1011&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/InputReader.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/OutputWriter.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/TypeSpecificCompressor.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionCodec.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionOutputStream.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorColumnConfig.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorConfig.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorSerde.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorSerdeField.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorUtils.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/compressors/DummyIntegerCompressor.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/dsalg/Tuple.java&lt;br/&gt;
  contrib/src/test/queries/clientpositive/ubercompressor.q&lt;br/&gt;
  contrib/src/test/results/clientpositive/ubercompressor.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2121/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13185348" author="he yongqiang" created="Fri, 13 Jan 2012 00:04:19 +0000"  >&lt;p&gt;looking.&lt;/p&gt;</comment>
                            <comment id="13185756" author="phabricator@reviews.facebook.net" created="Fri, 13 Jan 2012 19:00:39 +0000"  >&lt;p&gt;heyongqiang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; title=&quot;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2604&quot;&gt;HIVE-2604&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  contrib/src/test/queries/clientpositive/ubercompressor.q:4 setting a bunch of compression config here is fine for single insert. But how about multi-insert queries?&lt;/p&gt;

&lt;p&gt;  Can u put these configs to table/partition object? And that will make things easy to debug. (if u want to do in a followup, please open a follow up jira.)&lt;/p&gt;

&lt;p&gt;  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/dsalg/Tuple.java:1 what is the package name &quot;dsalg&quot;&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorUtils.java:38 just curious, can WritableUtils be used here?&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionCodec.java:33 How is this class used? Can it be defined as an interface? DummyCompressor inside it is not doing anything.&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java:70 can u add more comments here? If i understand correctly, it is doing read and decompression here. But there is readFromCompressor. Should it be readFromDecompressor()?&lt;/p&gt;

&lt;p&gt;  And there is some bytes transfer and copied involved here. Can that be avoided?&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java:101 why is the serde involved here? It is deserializing and serializing again here...&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1011&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1011&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13188338" author="phabricator@reviews.facebook.net" created="Wed, 18 Jan 2012 08:45:39 +0000"  >&lt;p&gt;krishnakumar has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; title=&quot;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2604&quot;&gt;HIVE-2604&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionCodec.java:33 This, itself, is an implementation of the ComressionCodec interface. The only important part of the class are the createInputStream/createOutputStream methods. The dummyCompressor is needed for conforming to the interface.&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java:70 Will add comments.&lt;/p&gt;

&lt;p&gt;  The method is called readFromCompressor as it is reading from the inputreader created off a type-specific compressor. I can rename it to readFromInputReader?&lt;/p&gt;

&lt;p&gt;  If you mean the copying annotated by the FIXME, yes, it can be avoided by having an outputstream on an existing buffer. Did not find a readymade class for that, I will create one.&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java:101 This is the second case (in the jira description) where the user specifies a custom serde+codec to be used for compressing a specific column. So we need to deserialize and reserialize here.&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorUtils.java:38 I needed a simple read/write on outputstream. WritableUtils implements a more complicated mechanism which prefers smaller values.&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/dsalg/Tuple.java:1 data structures and algorithms!&lt;br/&gt;
  contrib/src/test/queries/clientpositive/ubercompressor.q:4 The configs are modelled on existing config for compression, so I guess that means that all output tables will be compressed using the same config?&lt;/p&gt;

&lt;p&gt;  The codec and its child classes do not have access to table/partition, right? How would we populate the metastore from codec implementation classes?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1011&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1011&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13196073" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 11:55:10 +0000"  >&lt;p&gt;krishnakumar updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2604&quot; title=&quot;Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2604&quot;&gt;HIVE-2604&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add UberCompressor Serde/Codec to contrib which allows per-column compression strategies&quot;.&lt;br/&gt;
Reviewers: JIRA, heyongqiang&lt;/p&gt;

&lt;p&gt;  Addressing review comments&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1011&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1011&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/InputReader.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/OutputWriter.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/TypeSpecificCompressor.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionCodec.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionInputStream.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressionOutputStream.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorColumnConfig.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorConfig.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorSerde.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorSerdeField.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/UberCompressorUtils.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/compressors/DummyIntegerCompressor.java&lt;br/&gt;
  contrib/src/java/org/apache/hadoop/hive/contrib/ubercompressor/dsalg/Tuple.java&lt;br/&gt;
  contrib/src/test/queries/clientpositive/ubercompressor.q&lt;br/&gt;
  contrib/src/test/results/clientpositive/ubercompressor.q.out&lt;/p&gt;</comment>
                            <comment id="13205731" author="he yongqiang" created="Fri, 10 Feb 2012 20:36:10 +0000"  >&lt;p&gt;+1, will commit after tests pass&lt;/p&gt;</comment>
                            <comment id="13450345" author="umamaheswararao" created="Fri, 7 Sep 2012 05:08:46 +0000"  >&lt;p&gt;Hi Yongqiang, Any reason for holding this off from commit?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508605" name="ASF.LICENSE.NOT.GRANTED--HIVE-2604.D1011.1.patch" size="62861" author="phabricator@reviews.facebook.net" created="Sun, 25 Dec 2011 05:27:31 +0000"/>
                            <attachment id="12512405" name="ASF.LICENSE.NOT.GRANTED--HIVE-2604.D1011.2.patch" size="64711" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 11:55:11 +0000"/>
                            <attachment id="12504900" name="HIVE-2604.v0.patch" size="63204" author="n_krishna_kumar" created="Wed, 23 Nov 2011 18:00:36 +0000"/>
                            <attachment id="12506592" name="HIVE-2604.v1.patch" size="63108" author="n_krishna_kumar" created="Thu, 8 Dec 2011 09:53:13 +0000"/>
                            <attachment id="12507775" name="HIVE-2604.v2.patch" size="64096" author="n_krishna_kumar" created="Sat, 17 Dec 2011 10:42:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Nov 2011 21:44:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124014</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2605] Setting no_drop on a table should cascade to child partitions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2605</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When NO_DROP is set on a table, it does not cascade to the partitions of the table.  There should be an option to do so.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532529">HIVE-2605</key>
            <summary>Setting no_drop on a table should cascade to child partitions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2011 20:29:03 +0000</created>
                <updated>Tue, 9 Dec 2014 08:45:39 +0000</updated>
                            <resolved>Mon, 28 Nov 2011 23:42:34 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13156262" author="phabricator@reviews.facebook.net" created="Wed, 23 Nov 2011 20:37:39 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2605&quot; title=&quot;Setting no_drop on a table should cascade to child partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2605&quot;&gt;&lt;del&gt;HIVE-2605&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Setting no_drop on a table should cascade to child partitions&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2605&quot; title=&quot;Setting no_drop on a table should cascade to child partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2605&quot;&gt;&lt;del&gt;HIVE-2605&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  When NO_DROP is set on a table, it does not cascade to the partitions of the table.  There should be an option to do so.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D525&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ProtectMode.java&lt;br/&gt;
  ql/src/test/results/clientnegative/protectmode_tbl7.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/protectmode_tbl8.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/protectmode_tbl6.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/protectmode2.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/protectmode_tbl6.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/protectmode_tbl7.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/protectmode_tbl8.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/protectmode2.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/AlterTableDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1155/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1155/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13156295" author="phabricator@reviews.facebook.net" created="Wed, 23 Nov 2011 21:26:39 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2605&quot; title=&quot;Setting no_drop on a table should cascade to child partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2605&quot;&gt;&lt;del&gt;HIVE-2605&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Setting no_drop on a table should cascade to child partitions&quot;.&lt;/p&gt;

&lt;p&gt;  I can&apos;t commit changes so I&apos;ll leave accepting to someone who has the necessary permissions.&lt;/p&gt;

&lt;p&gt;  Looks good to me.  Could you comment in the code and/or update in the wiki&lt;br/&gt;
  &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AlterTable%2FPartitionProtections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AlterTable%2FPartitionProtections&lt;/a&gt;&lt;br/&gt;
  a description of what this does, in particular, it looks like this won&apos;t have an effect if it&apos;s set on a partition (which makes sense).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D525&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13156306" author="phabricator@reviews.facebook.net" created="Wed, 23 Nov 2011 21:38:40 +0000"  >&lt;p&gt;heyongqiang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2605&quot; title=&quot;Setting no_drop on a table should cascade to child partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2605&quot;&gt;&lt;del&gt;HIVE-2605&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Setting no_drop on a table should cascade to child partitions&quot;.&lt;/p&gt;

&lt;p&gt;  How about existing partitions?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D525&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13156342" author="phabricator@reviews.facebook.net" created="Wed, 23 Nov 2011 22:22:39 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2605&quot; title=&quot;Setting no_drop on a table should cascade to child partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2605&quot;&gt;&lt;del&gt;HIVE-2605&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Setting no_drop on a table should cascade to child partitions&quot;.&lt;/p&gt;

&lt;p&gt;  I will add comments the wiki.&lt;/p&gt;

&lt;p&gt;  The existing partitions will be affected.&lt;br/&gt;
  I mean, if I set this on a table, the existing partitions also cannot be dropped.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D525&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13156352" author="namit" created="Wed, 23 Nov 2011 22:28:49 +0000"  >&lt;p&gt;The semantics of&lt;/p&gt;

&lt;p&gt;alter table &amp;lt;T&amp;gt; enable no_drop cascase;&lt;/p&gt;

&lt;p&gt;is as follows.&lt;/p&gt;

&lt;p&gt;If a table is marked as no_drop cascade, neither the table nor any of it&apos;s partitions can be dropped.&lt;/p&gt;</comment>
                            <comment id="13156376" author="he yongqiang" created="Wed, 23 Nov 2011 23:01:56 +0000"  >&lt;p&gt;running tests.&lt;/p&gt;</comment>
                            <comment id="13158943" author="he yongqiang" created="Mon, 28 Nov 2011 23:42:34 +0000"  >&lt;p&gt;committed, thanks namit!&lt;/p&gt;</comment>
                            <comment id="13159104" author="hudson" created="Tue, 29 Nov 2011 05:53:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1110 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1110/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1110/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2605&quot; title=&quot;Setting no_drop on a table should cascade to child partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2605&quot;&gt;&lt;del&gt;HIVE-2605&lt;/del&gt;&lt;/a&gt;: Setting no_drop on a table should cascade to child partitions (namit via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1207701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1207701&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ProtectMode.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/AlterTableDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/protectmode_tbl6.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/protectmode_tbl7.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/protectmode_tbl8.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/protectmode2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/protectmode_tbl6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/protectmode_tbl7.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/protectmode_tbl8.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/protectmode2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14239144" author="lefty@hortonworks.com" created="Tue, 9 Dec 2014 08:45:39 +0000"  >&lt;p&gt;Documented in the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AlterTable/PartitionProtections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DDL &amp;#8211; Alter Table/Partition Protections &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12504923" name="ASF.LICENSE.NOT.GRANTED--HIVE-2605.D525.1.patch" size="31155" author="phabricator@reviews.facebook.net" created="Wed, 23 Nov 2011 20:37:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Nov 2011 20:37:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124015</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2606] Print headers fails with non-select statements</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2606</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;use testdb;&lt;br/&gt;
set hive.cli.print.header=true;&lt;br/&gt;
use testdb;&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:221)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:286)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532551">HIVE-2606</key>
            <summary>Print headers fails with non-select statements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="criccomini">Chris Riccomini</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2011 00:05:32 +0000</created>
                <updated>Mon, 28 Nov 2011 17:08:11 +0000</updated>
                            <resolved>Mon, 28 Nov 2011 17:08:11 +0000</resolved>
                                    <version>0.7.0</version>
                                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13157637" author="jghoman" created="Sun, 27 Nov 2011 01:42:08 +0000"  >&lt;p&gt;Dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13158566" author="criccomini" created="Mon, 28 Nov 2011 17:08:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt; DUPE&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 27 Nov 2011 01:42:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218284</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124016</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2607] Add caching to json_tuple</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2607</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;get_json_object uses a variety of caches to improve its performance.  json_tuple could benefit from having a similar cache from JSON string to JSONObject.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532566">HIVE-2607</key>
            <summary>Add caching to json_tuple</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2011 02:26:44 +0000</created>
                <updated>Thu, 8 Mar 2012 01:12:55 +0000</updated>
                            <resolved>Fri, 2 Dec 2011 21:27:57 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13158763" author="phabricator@reviews.facebook.net" created="Mon, 28 Nov 2011 21:03:39 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2607&quot; title=&quot;Add caching to json_tuple&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2607&quot;&gt;&lt;del&gt;HIVE-2607&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add caching to json_tuple&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  I added an object to serve as a cache to the implementation of json_tuple.  It is copied from get_json_object, I wasn&apos;t sure how people would feel about introducinc a dependency between the two functions.&lt;/p&gt;

&lt;p&gt;  Whenever a string is not found in the MRU cache, it is parsed into a JSON object, and added to the cache.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  I had a specific case, where a query which should have performed better in terms of CPU usage using json_tuple rather than get_json_object, but it was actually performing much worse because the number of unique JSON objects was much smaller than the number of rows.  After this change json_tuple performed significantly better than get_json_object.  I did not see a significant performance degradation in other cases.&lt;/p&gt;

&lt;p&gt;  I also ran the unit tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D543&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D543&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFJSONTuple.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1197/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1197/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13158951" author="he yongqiang" created="Mon, 28 Nov 2011 23:51:10 +0000"  >&lt;p&gt;+1, we probably in future need to make the cache size configurable. &lt;/p&gt;

&lt;p&gt;Running tests.&lt;/p&gt;</comment>
                            <comment id="13158952" author="phabricator@reviews.facebook.net" created="Mon, 28 Nov 2011 23:51:39 +0000"  >&lt;p&gt;heyongqiang has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2607&quot; title=&quot;Add caching to json_tuple&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2607&quot;&gt;&lt;del&gt;HIVE-2607&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add caching to json_tuple&quot;.&lt;/p&gt;

&lt;p&gt;  Awesome!&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D543&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D543&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13161863" author="he yongqiang" created="Fri, 2 Dec 2011 21:27:57 +0000"  >&lt;p&gt;committed, thanks Kevin!&lt;/p&gt;</comment>
                            <comment id="13162020" author="hudson" created="Sat, 3 Dec 2011 02:10:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1121 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1121/&lt;/a&gt;)&lt;br/&gt;
    Hive-2607: Add caching to json_tuple (Kevin Wilfong via He Yongqiang)&lt;/p&gt;</comment>
                            <comment id="13224901" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 01:10:55 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2607&quot; title=&quot;Add caching to json_tuple&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2607&quot;&gt;&lt;del&gt;HIVE-2607&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add caching to json_tuple&quot;.&lt;br/&gt;
Reviewers: JIRA, heyongqiang&lt;/p&gt;

&lt;p&gt;  Added a new class of MetaStorePreEventListeners which are called before an action is taken by the metastore.  They are run before most validation and the call to the Raw Store (after getting objects like partitons and tables where convenient).  These are hooks like MetaStoreEventListener implementations, and are currently called on all functions for which MetaStoreEventListeners are called, though this can change.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D543&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D543&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/DummyPreListener.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStorePreEventListener.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreCreateDatabaseEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreDropDatabaseEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreDropPartitionEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreAlterPartitionEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/Event.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreCreateTableEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreDropTableEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/ListenerEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreAlterTableEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreLoadPartitionDoneEvent.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/events/PreAddPartitionEvent.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/p&gt;</comment>
                            <comment id="13224904" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 01:12:55 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2607&quot; title=&quot;Add caching to json_tuple&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2607&quot;&gt;&lt;del&gt;HIVE-2607&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add caching to json_tuple&quot;.&lt;/p&gt;

&lt;p&gt;  Please ignore the previous update, it was intended to go to a different JIRA.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D543&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D543&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505392" name="ASF.LICENSE.NOT.GRANTED--HIVE-2607.D543.1.patch" size="1680" author="phabricator@reviews.facebook.net" created="Mon, 28 Nov 2011 21:03:40 +0000"/>
                            <attachment id="12517504" name="ASF.LICENSE.NOT.GRANTED--HIVE-2607.D543.2.patch" size="48637" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 01:10:56 +0000"/>
                            <attachment id="12505393" name="HIVE-2607.1.patch.txt" size="1714" author="kevinwilfong" created="Mon, 28 Nov 2011 21:03:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 28 Nov 2011 21:03:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218299</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lks7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124017</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2608] Do not require AS a,b,c part in LATERAL VIEW</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2608</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, it is required to state column names when LATERAL VIEW is used.&lt;br/&gt;
That shouldn&apos;t be necessary, since UDTF returns struct which contains column names - and they should be used by default.&lt;/p&gt;

&lt;p&gt;For example, it would be great if this was possible:&lt;/p&gt;

&lt;p&gt;SELECT t.*, t.key1 + t.key4&lt;br/&gt;
FROM some_table&lt;br/&gt;
LATERAL VIEW JSON_TUPLE(json, &apos;key1&apos;, &apos;key2&apos;, &apos;key3&apos;, &apos;key3&apos;) t;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532576">HIVE-2608</key>
            <summary>Do not require AS a,b,c part in LATERAL VIEW</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="ikabiljo">Igor Kabiljo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2011 04:38:19 +0000</created>
                <updated>Tue, 15 Oct 2013 23:30:10 +0000</updated>
                            <resolved>Tue, 20 Aug 2013 05:29:40 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Query Processor</component>
                    <component>UDF</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13421949" author="navis" created="Wed, 25 Jul 2012 02:27:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D4317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13702803" author="appodictic" created="Tue, 9 Jul 2013 02:26:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt;It seems like some other limit optimization work is inside this patch. Is that supposed to be there?&lt;/p&gt;</comment>
                            <comment id="13704047" author="navis" created="Wed, 10 Jul 2013 00:39:30 +0000"  >&lt;p&gt;Sorry, I think it&apos;s based on other branch. Will be updated soon.&lt;/p&gt;</comment>
                            <comment id="13704057" author="phabricator@reviews.facebook.net" created="Wed, 10 Jul 2013 00:53:47 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Do not require AS a,b,c part in LATERAL VIEW&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317?vs=14751&amp;amp;id=35535#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317?vs=14751&amp;amp;id=35535#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;br/&gt;
  ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: ikabiljo&lt;/p&gt;</comment>
                            <comment id="13706607" author="appodictic" created="Fri, 12 Jul 2013 03:12:36 +0000"  >&lt;p&gt;PAtch needs to be rebased.&lt;/p&gt;</comment>
                            <comment id="13707048" author="phabricator@reviews.facebook.net" created="Fri, 12 Jul 2013 16:05:47 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Do not require AS a,b,c part in LATERAL VIEW&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317?vs=35535&amp;amp;id=35643#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317?vs=35535&amp;amp;id=35643#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;br/&gt;
  ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: ikabiljo&lt;/p&gt;</comment>
                            <comment id="13707761" author="appodictic" created="Sat, 13 Jul 2013 15:20:30 +0000"  >&lt;p&gt;Accidentally I ran the tests in java7.&lt;/p&gt;

&lt;p&gt;Everything ran but the jdbc tests and these two&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;testNegativeCliDriver_udtf_not_supported2	Failure	Unexpected exception See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;/p&gt;

&lt;p&gt;junit.framework.AssertionFailedError: Unexpected exception&lt;br/&gt;
See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
at org.apache.hadoop.hive.cli.TestNegativeCliDriver.runTest(TestNegativeCliDriver.java:2576)&lt;br/&gt;
at org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udtf_not_supported2(TestNegativeCliDriver.java:2498)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:520)&lt;br/&gt;
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1060)&lt;br/&gt;
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:911)&lt;br/&gt;
	3.769q&lt;/p&gt;


&lt;p&gt;testNegativeCliDriver_lateral_view_join	Failure	Unexpected exception See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;/p&gt;

&lt;p&gt;junit.framework.AssertionFailedError: Unexpected exception&lt;br/&gt;
See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
at org.apache.hadoop.hive.cli.TestNegativeCliDriver.runTest(TestNegativeCliDriver.java:2576)&lt;br/&gt;
at org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_lateral_view_join(TestNegativeCliDriver.java:1758)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:520)&lt;br/&gt;
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1060)&lt;br/&gt;
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:911)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will run these two by hand.&lt;/p&gt;</comment>
                            <comment id="13707970" author="phabricator@reviews.facebook.net" created="Sun, 14 Jul 2013 06:10:47 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Do not require AS a,b,c part in LATERAL VIEW&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:2503 I think this ErrorMsg enum can now be removed from ErrorMsg.java altogether. If so, it will be good to remove this to avoid confusion.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;br/&gt;
Cc: ikabiljo&lt;/p&gt;</comment>
                            <comment id="13708173" author="phabricator@reviews.facebook.net" created="Mon, 15 Jul 2013 00:38:46 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Do not require AS a,b,c part in LATERAL VIEW&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:2503 How about marking it with &quot;@Deprecated&quot; instead of removing?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;br/&gt;
Cc: ikabiljo&lt;/p&gt;</comment>
                            <comment id="13723330" author="appodictic" created="Tue, 30 Jul 2013 03:08:47 +0000"  >&lt;p&gt;Re-upload Navis&apos; patch&lt;/p&gt;</comment>
                            <comment id="13723332" author="appodictic" created="Tue, 30 Jul 2013 03:10:05 +0000"  >&lt;p&gt;+1 if tests pass&lt;/p&gt;</comment>
                            <comment id="13723612" author="hiveqa" created="Tue, 30 Jul 2013 09:24:45 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12594851/HIVE-2608.8.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12594851/HIVE-2608.8.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 2737 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hcatalog.pig.TestOrcHCatLoader.testReadDataBasic
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_lateral_view_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_serde_user_properties
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udtf_not_supported2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/234/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/234/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/234/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/234/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests failed with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13723867" author="appodictic" created="Tue, 30 Jul 2013 13:51:23 +0000"  >&lt;p&gt;Nrgative tests need to be added&lt;/p&gt;</comment>
                            <comment id="13724550" author="phabricator@reviews.facebook.net" created="Tue, 30 Jul 2013 22:45:46 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Do not require AS a,b,c part in LATERAL VIEW&quot;.&lt;/p&gt;

&lt;p&gt;  Marked &apos;@Deprecated&apos; for error message which would not be used further&lt;/p&gt;

&lt;p&gt;Reviewers: ashutoshc, JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317?vs=35643&amp;amp;id=36597#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317?vs=35643&amp;amp;id=36597#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;br/&gt;
  ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;br/&gt;
Cc: ikabiljo&lt;/p&gt;</comment>
                            <comment id="13739312" author="phabricator@reviews.facebook.net" created="Wed, 14 Aug 2013 07:00:49 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Do not require AS a,b,c part in LATERAL VIEW&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk &amp;amp; fixed test fails&lt;/p&gt;

&lt;p&gt;Reviewers: ashutoshc, JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D4317?vs=36597&amp;amp;id=37845#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4317?vs=36597&amp;amp;id=37845#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;br/&gt;
  ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;br/&gt;
Cc: ikabiljo&lt;/p&gt;</comment>
                            <comment id="13739783" author="hiveqa" created="Wed, 14 Aug 2013 15:42:18 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12597899/HIVE-2608.D4317.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12597899/HIVE-2608.D4317.8.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 2856 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/435/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/435/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/435/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/435/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13740095" author="appodictic" created="Wed, 14 Aug 2013 19:41:52 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13740684" author="hudson" created="Thu, 15 Aug 2013 05:09:52 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2 #361 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/361/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/361/&lt;/a&gt;)&lt;br/&gt;
Hive-2608 Do not require AS a,b,c part in LATERAL VIEW (Navis Ryu via egc)&lt;/p&gt;

&lt;p&gt;Submitted by: Navis Ryu	&lt;br/&gt;
Reviewed by: Edward Capriolo (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13741115" author="hudson" created="Thu, 15 Aug 2013 16:14:23 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop1-ptest #127 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/127/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/127/&lt;/a&gt;)&lt;br/&gt;
Hive-2608 Do not require AS a,b,c part in LATERAL VIEW (Navis Ryu via egc)&lt;/p&gt;

&lt;p&gt;Submitted by: Navis Ryu	&lt;br/&gt;
Reviewed by: Edward Capriolo (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13741128" author="hudson" created="Thu, 15 Aug 2013 16:17:08 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #58 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/58/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/58/&lt;/a&gt;)&lt;br/&gt;
Hive-2608 Do not require AS a,b,c part in LATERAL VIEW (Navis Ryu via egc)&lt;/p&gt;

&lt;p&gt;Submitted by: Navis Ryu	&lt;br/&gt;
Reviewed by: Edward Capriolo (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13741167" author="appodictic" created="Thu, 15 Aug 2013 16:46:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt; It seems like /hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;br/&gt;
is failing often.&lt;/p&gt;</comment>
                            <comment id="13741378" author="hagleitn" created="Thu, 15 Aug 2013 19:20:45 +0000"  >&lt;p&gt;I think this is breaking the build. In my environment udtf_not_supported2 always works before this patch and consistently fails after applying this patch (ran it 3 times to be sure). Could you take a look?&lt;/p&gt;</comment>
                            <comment id="13741627" author="hudson" created="Thu, 15 Aug 2013 23:01:57 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2270 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2270/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2270/&lt;/a&gt;)&lt;br/&gt;
Hive-2608 Do not require AS a,b,c part in LATERAL VIEW (Navis Ryu via egc)&lt;/p&gt;

&lt;p&gt;Submitted by: Navis Ryu	&lt;br/&gt;
Reviewed by: Edward Capriolo (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1514119&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/lateral_view_noalias.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/lateral_view_noalias.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13743454" author="navis" created="Mon, 19 Aug 2013 00:23:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appodictic&quot; class=&quot;user-hover&quot; rel=&quot;appodictic&quot;&gt;Edward Capriolo&lt;/a&gt; udtf_not_supported2.q (and q.out) is removed in the patch, but seemed not applied correctly. I&apos;ll book that.&lt;/p&gt;</comment>
                            <comment id="13743601" author="hudson" created="Mon, 19 Aug 2013 07:30:29 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #64 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/64/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/64/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5116&quot; title=&quot;HIVE-2608 didn&amp;#39;t removed udtf_not_supported2.q test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5116&quot;&gt;&lt;del&gt;HIVE-5116&lt;/del&gt;&lt;/a&gt; : &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; didn&apos;t removed udtf_not_supported2.q test (Navis via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13743629" author="hudson" created="Mon, 19 Aug 2013 08:37:26 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop1-ptest #133 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/133/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/133/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5116&quot; title=&quot;HIVE-2608 didn&amp;#39;t removed udtf_not_supported2.q test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5116&quot;&gt;&lt;del&gt;HIVE-5116&lt;/del&gt;&lt;/a&gt; : &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; didn&apos;t removed udtf_not_supported2.q test (Navis via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13743960" author="hudson" created="Mon, 19 Aug 2013 16:29:08 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2277 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2277/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2277/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5116&quot; title=&quot;HIVE-2608 didn&amp;#39;t removed udtf_not_supported2.q test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5116&quot;&gt;&lt;del&gt;HIVE-5116&lt;/del&gt;&lt;/a&gt; : &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; didn&apos;t removed udtf_not_supported2.q test (Navis via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13744152" author="hudson" created="Mon, 19 Aug 2013 20:04:04 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-hadoop2 #369 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/369/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/369/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5116&quot; title=&quot;HIVE-2608 didn&amp;#39;t removed udtf_not_supported2.q test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5116&quot;&gt;&lt;del&gt;HIVE-5116&lt;/del&gt;&lt;/a&gt; : &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2608&quot; title=&quot;Do not require AS a,b,c part in LATERAL VIEW&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2608&quot;&gt;&lt;del&gt;HIVE-2608&lt;/del&gt;&lt;/a&gt; didn&apos;t removed udtf_not_supported2.q test (Navis via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1515254&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udtf_not_supported2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udtf_not_supported2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13795982" author="ashutoshc" created="Tue, 15 Oct 2013 23:30:10 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12664277">HIVE-5116</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12594851" name="HIVE-2608.8.patch.txt" size="17479" author="appodictic" created="Tue, 30 Jul 2013 03:08:47 +0000"/>
                            <attachment id="12591566" name="HIVE-2608.D4317.5.patch" size="17255" author="phabricator@reviews.facebook.net" created="Wed, 10 Jul 2013 00:53:47 +0000"/>
                            <attachment id="12592022" name="HIVE-2608.D4317.6.patch" size="17255" author="phabricator@reviews.facebook.net" created="Fri, 12 Jul 2013 16:05:48 +0000"/>
                            <attachment id="12595064" name="HIVE-2608.D4317.7.patch" size="18110" author="phabricator@reviews.facebook.net" created="Tue, 30 Jul 2013 22:45:46 +0000"/>
                            <attachment id="12597899" name="HIVE-2608.D4317.8.patch" size="19111" author="phabricator@reviews.facebook.net" created="Wed, 14 Aug 2013 07:00:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jul 2012 02:27:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218309</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Committed. Thanks Navis.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2609] NPE when pruning partitions by thrift method get_partitions_by_filter</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2609</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It&apos;s a datanucleus bug indeed. &lt;/p&gt;

&lt;p&gt;try this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; open = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 5 &amp;amp;&amp;amp; !open; ++i) {
  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    transport.open();
    open = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
  } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (TTransportException e) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;failed to connect to MetaStore, re-trying...&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException ignore) {}
  }
}

&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  List&amp;lt;Partition&amp;gt; parts =
      client.get_partitions_by_filter(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;partitioned_nation&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;pt &amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&apos;2&apos;&lt;/span&gt;&quot;&lt;/span&gt;, (&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;) -1);
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Partition part : parts) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(part.getSd().getLocation());
  }
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception te) {
  te.printStackTrace();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A NPEexception would be thrown on the thrift server side&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;11/11/25 13:11:55 ERROR api.ThriftHiveMetastore$Processor: Internal error processing get_partitions_by_filter
java.lang.NullPointerException
        at org.datanucleus.store.mapped.mapping.MappingHelper.getMappingIndices(MappingHelper.java:35)
        at org.datanucleus.store.mapped.expression.StatementText.applyParametersToStatement(StatementText.java:194)
        at org.datanucleus.store.rdbms.query.RDBMSQueryUtils.getPreparedStatementForQuery(RDBMSQueryUtils.java:233)
        at org.datanucleus.store.rdbms.query.legacy.SQLEvaluator.evaluate(SQLEvaluator.java:115)
        at org.datanucleus.store.rdbms.query.legacy.JDOQLQuery.performExecute(JDOQLQuery.java:288)
        at org.datanucleus.store.query.Query.executeQuery(Query.java:1657)
        at org.datanucleus.store.rdbms.query.legacy.JDOQLQuery.executeQuery(JDOQLQuery.java:245)
        at org.datanucleus.store.query.Query.executeWithMap(Query.java:1526)
        at org.datanucleus.jdo.JDOQuery.executeWithMap(JDOQuery.java:334)
        at org.apache.hadoop.hive.metastore.ObjectStore.listMPartitionsByFilter(ObjectStore.java:1329)
        at org.apache.hadoop.hive.metastore.ObjectStore.getPartitionsByFilter(ObjectStore.java:1241)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler$40.run(HiveMetaStore.java:2369)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler$40.run(HiveMetaStore.java:2366)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.executeWithRetry(HiveMetaStore.java:307)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_partitions_by_filter(HiveMetaStore.java:2366)
        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_partitions_by_filter.process(ThriftHiveMetastore.j
ava:6099)
        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor.process(ThriftHiveMetastore.java:4789)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$TLoggingProcessor.process(HiveMetaStore.java:3167)
        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:253)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A null JavaTypeMapping was passed into org.datanucleus.store.mapped.mapping.MappingHelper.(int initialPosition, JavaTypeMapping mapping), that caused NPE.&lt;/p&gt;

&lt;p&gt;After digged into the datanucleus source, I found that the null value was born in the constructor of org.datanucleus.store.mapped.expression.SubstringExpression. see&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Constructs the substring
     * @param str the &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; Expression
     * @param begin The start position
     * @param end The end position expression
     **/   
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; SubstringExpression(StringExpression str, NumericExpression begin, NumericExpression end)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(str.getQueryExpression());

        st.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;SUBSTRING(&quot;&lt;/span&gt;).append(str).append(&lt;span class=&quot;code-quote&quot;&gt;&quot; FROM &quot;&lt;/span&gt;)
            .append(begin.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IntegerLiteral(qs, mapping, BigInteger.ONE)))
            .append(&lt;span class=&quot;code-quote&quot;&gt;&quot; FOR &quot;&lt;/span&gt;).append(end.sub(begin)).append(&lt;span class=&quot;code-quote&quot;&gt;&apos;)&apos;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The field mapping hasn&apos;t been instanced at that moment.&lt;/p&gt;

&lt;p&gt;How do you deal with such a external bug?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532680">HIVE-2609</key>
            <summary>NPE when pruning partitions by thrift method get_partitions_by_filter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="coderplay">Min Zhou</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2011 08:26:25 +0000</created>
                <updated>Tue, 13 Aug 2013 15:20:42 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13165902" author="mithun" created="Fri, 9 Dec 2011 07:14:45 +0000"  >&lt;p&gt;I haven&apos;t done a whole bunch of testing yet, but I did try to replace the following libraries:&lt;br/&gt;
1. datanucleus-core-2.0.3.jar -&amp;gt; datanucleus-core-2.2.5.jar&lt;br/&gt;
2. datanucleus-rdbms-2.0.3.jar -&amp;gt; datanucleus-rdbms-2.2.4.jar&lt;/p&gt;

&lt;p&gt;This has met with a modicum of success, in that code such as &quot;pt &amp;lt; &apos;2&apos;&quot; does indeed work. (Mind you, the testing I did was on HCatalog, not on Hive-proper, but it still applies.)&lt;/p&gt;

&lt;p&gt;I know this has been discussed before, but I&apos;d like to bring this back to the table: Could we please consider having Hive-Metastore depend on a less dated set of JDO libraries?&lt;/p&gt;</comment>
                            <comment id="13165909" author="ashutoshc" created="Fri, 9 Dec 2011 07:38:40 +0000"  >&lt;p&gt;@Mithun,&lt;br/&gt;
Good finding. We can definitely upgrade the jdo libs. If all our tests pass, then certainly it makes sense to do so, given that there is atleast one bug (this jira) which will be fixed by it. There is some work for it already going on at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2084&quot; title=&quot;Upgrade datanucleus from 2.0.3 to a more recent version (3.?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2084&quot;&gt;&lt;del&gt;HIVE-2084&lt;/del&gt;&lt;/a&gt; for this. But, looks like Carl hit failures there. Also, if we are upgrading we should try to go to 3.0.1 instead of 2.x series.&lt;/p&gt;</comment>
                            <comment id="13192694" author="aniket486" created="Wed, 25 Jan 2012 00:25:55 +0000"  >&lt;p&gt;@Mithun,&lt;/p&gt;

&lt;p&gt;How did you change these jars? did you replace them after you compiled or did you replace them before build time?&lt;/p&gt;

&lt;p&gt;If I change the ivy cache, here is what I get-&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: org.datanucleus.metadata.AbstractMemberMetaData.getJdoFieldFlag()B&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; 	at org.datanucleus.enhancer.asm.JdoMethodAdapter.visitFieldInsn(JdoMethodAdapter.java:104)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; 	at org.objectweb.asm.ClassReader.accept(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; 	at org.objectweb.asm.ClassReader.accept(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; 	at org.datanucleus.enhancer.asm.ASMClassEnhancer.enhance(ASMClassEnhancer.java:388)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; 	at org.datanucleus.enhancer.DataNucleusEnhancer.enhanceClass(DataNucleusEnhancer.java:1035)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; 	at org.datanucleus.enhancer.DataNucleusEnhancer.enhance(DataNucleusEnhancer.java:609)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;datanucleusenhancer&amp;#93;&lt;/span&gt; 	at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1316)&lt;/p&gt;</comment>
                            <comment id="13192699" author="thw" created="Wed, 25 Jan 2012 00:29:27 +0000"  >&lt;p&gt;We replace them after the build.&lt;/p&gt;</comment>
                            <comment id="13193593" author="aniket486" created="Thu, 26 Jan 2012 06:47:35 +0000"  >&lt;p&gt;Hmm, unfortunately it didnt work for me, I am not at hive0.9 yet, that might be one of the reason. Anyway, for those who want take jar injection path -&lt;a href=&quot;http://www.datanucleus.org/servlet/jira/browse/NUCJDOQUERY-4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.datanucleus.org/servlet/jira/browse/NUCJDOQUERY-4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13228911" author="traviscrawford" created="Wed, 14 Mar 2012 03:04:49 +0000"  >&lt;p&gt;I ran into this today too and, in addition to updating the two jars Thomas mentioned, also had to update:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hive/blob/trunk/metastore/src/model/package.jdo#L49&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/trunk/metastore/src/model/package.jdo#L49&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In our hive tables the column is named &quot;COMMENT&quot; - not &quot;FCOMMENT&quot;. Without updating datanucleus things work fine, but this change is required when updating jars. I don&apos;t understand why the change in behavior yet though.&lt;/p&gt;</comment>
                            <comment id="13738346" author="brocknoland" created="Tue, 13 Aug 2013 15:20:18 +0000"  >&lt;p&gt;I tried reproducing this after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3632&quot; title=&quot;Upgrade datanucleus to support JDK7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3632&quot;&gt;&lt;del&gt;HIVE-3632&lt;/del&gt;&lt;/a&gt; and cannot. Therefore I think we can mark it resolved.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12538259">HCATALOG-209</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12613843">HIVE-3632</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12529340">PIG-2339</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12502784">HIVE-2084</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Dec 2011 07:14:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218413</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lksf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124018</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2610] Integers show up as NULL in hive while integrating with Hbase</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2610</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Created a table in hbase and integrated with hive by using CREATE EXTERNAL TABLE hive_table with int as column data type but it resulted in Null and only String seems to be working.&lt;/p&gt;

&lt;p&gt;Please refer &lt;a href=&quot;http://search-hadoop.com/m/zYohJz0ILd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/zYohJz0ILd&lt;/a&gt; for further details&lt;/p&gt;</description>
                <environment>&lt;p&gt;Centos 5.6 &lt;/p&gt;</environment>
        <key id="12532695">HIVE-2610</key>
            <summary>Integers show up as NULL in hive while integrating with Hbase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="karthikmv">Karthik Pandian</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2011 10:15:19 +0000</created>
                <updated>Tue, 11 Aug 2015 21:10:57 +0000</updated>
                            <resolved>Tue, 11 Aug 2015 21:10:56 +0000</resolved>
                                    <version>0.7.1</version>
                                                    <component>HBase Handler</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13573875" author="brocknoland" created="Thu, 7 Feb 2013 20:14:37 +0000"  >&lt;p&gt;I think this issue can be closed. I have tested and it is working in the 0.10 release.&lt;/p&gt;</comment>
                            <comment id="14687388" author="swarnim" created="Tue, 11 Aug 2015 21:10:24 +0000"  >&lt;p&gt;+1. I tested this out on 1.1.0 recently and couldn&apos;t reproduce this issue anymore. &lt;/p&gt;

&lt;p&gt;Resolving.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Feb 2013 20:14:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218428</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lksn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124019</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Hive Hbase Integration</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
