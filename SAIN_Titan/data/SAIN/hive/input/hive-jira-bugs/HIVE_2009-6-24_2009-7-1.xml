<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:13:39 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-6-24+AND+created+%3C%3D+2009-7-1+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="25" total="25"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-574] Hive should use ClassLoader from hadoop Configuration</title>
                <link>https://issues.apache.org/jira/browse/HIVE-574</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-338&quot; title=&quot;Executing cli commands into thrift server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-338&quot;&gt;&lt;del&gt;HIVE-338&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Hive should always use the getClassByName method from hadoop Configuration, so that we choose the correct ClassLoader. Examples include all plug-in interfaces, including UDF/GenericUDF/UDAF, SerDe, and FileFormats. Basically the following code snippet shows the idea:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.conf;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Configuration &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Iterable&amp;lt;Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; {
   ...
  /**
   * Load a &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;by name.
   * 
   * @param name the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name.
   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;object.
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ClassNotFoundException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;is not found.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; getClassByName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ClassNotFoundException {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(name, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, classLoader);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12428732">HIVE-574</key>
            <summary>Hive should use ClassLoader from hadoop Configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 04:15:31 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:17 +0000</updated>
                            <resolved>Tue, 30 Jun 2009 18:09:28 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12723429" author="he yongqiang" created="Wed, 24 Jun 2009 04:29:36 +0000"  >&lt;p&gt;For adding EnumSet support in Hadoop, i added a method loadClass(Configuration conf, String className) in ObjectWritable. &lt;br/&gt;
&amp;lt;noformat&amp;gt;&lt;br/&gt;
  /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Find and load the class with given name &amp;lt;tt&amp;gt;className&amp;lt;/tt&amp;gt; by first finding&lt;/li&gt;
	&lt;li&gt;it in the specified &amp;lt;tt&amp;gt;conf&amp;lt;/tt&amp;gt;. If the specified &amp;lt;tt&amp;gt;conf&amp;lt;/tt&amp;gt; is null,&lt;/li&gt;
	&lt;li&gt;try load it directly.&lt;br/&gt;
   */&lt;br/&gt;
  public static Class&amp;lt;?&amp;gt; loadClass(Configuration conf, String className) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    Class&amp;lt;?&amp;gt; declaredClass = null;    try {
      if (conf != null)
        declaredClass = conf.getClassByName(className);
      else
        declaredClass = Class.forName(className);
    } catch (ClassNotFoundException e) {
      throw new RuntimeException(&quot;readObject can&apos;t find class &quot; + className,
          e);
    }    return declaredClass;  }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;&amp;lt;/noformat&amp;gt;&lt;br/&gt;
I donot know if it can be used here.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12723463" author="zshao" created="Wed, 24 Jun 2009 06:14:20 +0000"  >&lt;p&gt;This patch uses the ClassLoader from all paths sets the class loader in most cases.&lt;br/&gt;
It also adds the &quot;addedJars&quot; to HIVEADDEDJARS so that ExecDriver can add it into the ClassLoader for both the ClassLoader in the conf and the thread contextClassLoader.&lt;/p&gt;</comment>
                            <comment id="12723472" author="jsensarma" created="Wed, 24 Jun 2009 06:59:18 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;there&apos;s a bunch of places where JavaUtils.getClassLoader() is called - all of these need to use the conf classloader instead.&lt;/li&gt;
	&lt;li&gt;where are we invoking conf.setClassLoader? (addToClassPath should be calling this it seems)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;if conf.set/getClassLoader is supported in all versions 17 onwards - then we can just remove the -libjars business - since that doesn&apos;t help us any bit now (ExecDriver is not a Tool - so it doesn&apos;t even get the conf with the classpath set that a Tool would normally get by specifying the -libjars option).&lt;/p&gt;</comment>
                            <comment id="12723493" author="zshao" created="Wed, 24 Jun 2009 08:35:12 +0000"  >&lt;p&gt;This patch fixed a bug in ExecDriver.initialize where we were setting &quot;tmpjars&quot;, which were overwritten by ExecDriver.execute().&lt;/p&gt;

&lt;p&gt;&amp;gt; there&apos;s a bunch of places where JavaUtils.getClassLoader() is called - all of these need to use the conf classloader instead.&lt;br/&gt;
I tried to change all of these to use conf classloader, but in lots of places there are no shared conf objects, so I will leave it for now. I changed the comment so it&apos;s clear that in hive (outside hadoop map-reduce jobs) we are using thread classloader, while in hadoop map-reduce jobs we are using conf classloaders.&lt;/p&gt;

&lt;p&gt;&amp;gt; where are we invoking conf.setClassLoader? (addToClassPath should be calling this it seems)&lt;br/&gt;
I moved that logic outside of the addToClassPath function. All callers will do that set.&lt;/p&gt;

&lt;p&gt;&amp;gt; if conf.set/getClassLoader is supported in all versions 17 onwards - then we can just remove the -libjars business - since that doesn&apos;t help us any bit now (ExecDriver is not a Tool - so it doesn&apos;t even get the conf with the classpath set that a Tool would normally get by specifying the -libjars option).&lt;/p&gt;

&lt;p&gt;Maybe in the future we should move ExecDriver to a tool? I think we should rely more on hadoop to set the classpath for us, so maybe in the future we should remove the special &quot;if (local)&quot; block in ExecDriver where we set the classpath ourselves.&lt;/p&gt;</comment>
                            <comment id="12723503" author="zshao" created="Wed, 24 Jun 2009 08:59:07 +0000"  >&lt;p&gt;Make ExecMapper and ExecReducer print out class path with l4j.info(), to ease debugging of classpaths in the future.&lt;/p&gt;</comment>
                            <comment id="12723606" author="jsensarma" created="Wed, 24 Jun 2009 15:57:01 +0000"  >&lt;p&gt;we should always be able to get a Conf from our session (SessionState.get()) from any part of the code. the same conf would be used throughout a session.&lt;/p&gt;</comment>
                            <comment id="12723874" author="coderplay" created="Thu, 25 Jun 2009 02:07:24 +0000"  >&lt;p&gt;+1 for Zheng, thanks&lt;br/&gt;
It worked fine here, nothing abnormal.&lt;/p&gt;</comment>
                            <comment id="12724351" author="jsensarma" created="Fri, 26 Jun 2009 00:11:41 +0000"  >&lt;p&gt;hi zheng - i would prefer to add a getClassByName to JavaUtils (replace getClassLoader) and then use the Session Configuration object&apos;s getclassbyname (SessionState.get().getConf())  if it&apos;s available - or else default to thread classloader or else finally default to current classloader.&lt;/p&gt;

&lt;p&gt;i feel very uncomfortable that right now we are sometimes using the conf classloader and sometimes using the thread classloader. it&apos;s sheer chance that all the uses of JavaUtils.getClassLoader() are happening within the same thread as the thread that adds jar files (or the main thread of the ExecDriver). This can change anytime tomorrow.&lt;/p&gt;</comment>
                            <comment id="12724356" author="zshao" created="Fri, 26 Jun 2009 00:39:46 +0000"  >&lt;p&gt;@Joydeep,&lt;/p&gt;

&lt;p&gt;I will use SessionState.get().getConf().getClassLoader() for all compilation time code and ExecDriver (JobClient side) code. For execution time code (Mapper and Reducer) I will use the conf from Mapper/Reducer.configure() method.&lt;/p&gt;

&lt;p&gt;Is that good?&lt;/p&gt;</comment>
                            <comment id="12724358" author="jsensarma" created="Fri, 26 Jun 2009 00:50:14 +0000"  >&lt;p&gt;yes - makes total sense.&lt;/p&gt;</comment>
                            <comment id="12724372" author="zshao" created="Fri, 26 Jun 2009 03:22:17 +0000"  >&lt;p&gt;I was trying to make the changes and found some other problems.&lt;/p&gt;

&lt;p&gt;The SessionState is only available in ql, while JavaUtils is in common right now. SessionState depends on a bunch of Hive ql classes so I cannot move it to common, and JavaUtils is called from serde, metastore, and ql.&lt;/p&gt;

&lt;p&gt;I will change both serde and metastore methods to require hadoop configuration, so that they can get the classloader from it.&lt;/p&gt;

&lt;p&gt;I will also move JavaUtils to ql.&lt;/p&gt;</comment>
                            <comment id="12724480" author="zshao" created="Fri, 26 Jun 2009 11:30:55 +0000"  >&lt;p&gt;I couldn&apos;t figure out how to do the job cleanly after 6 hours of debugging. I would suggest to commit the current patch and open a jira for follow-up.&lt;/p&gt;

&lt;p&gt;We need a major refactoring of the use of HiveConf in the code.&lt;/p&gt;</comment>
                            <comment id="12725004" author="zshao" created="Sun, 28 Jun 2009 22:32:17 +0000"  >&lt;p&gt;Let&apos;s get this in first since it fixes the bug.&lt;/p&gt;

&lt;p&gt;The follow-up JIRA is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-584&quot; title=&quot;Clean up global and ThreadLocal variables in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-584&quot;&gt;&lt;del&gt;HIVE-584&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12725441" author="jsensarma" created="Tue, 30 Jun 2009 02:39:25 +0000"  >&lt;p&gt;changes look good! will commit after tests.&lt;/p&gt;
</comment>
                            <comment id="12725733" author="jsensarma" created="Tue, 30 Jun 2009 18:09:28 +0000"  >&lt;p&gt;committed - thanks Zheng!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12428950">HIVE-584</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12416601">HIVE-338</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12411607" name="HIVE-574.1.patch" size="9348" author="zshao" created="Wed, 24 Jun 2009 06:14:20 +0000"/>
                            <attachment id="12411623" name="HIVE-574.2.patch" size="18863" author="zshao" created="Wed, 24 Jun 2009 08:35:12 +0000"/>
                            <attachment id="12411625" name="HIVE-574.3.patch" size="20859" author="zshao" created="Wed, 24 Jun 2009 08:59:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Jun 2009 04:29:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73436</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lakv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-575] map join runs out of memory for a key with very large number of values</title>
                <link>https://issues.apache.org/jira/browse/HIVE-575</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12428739">HIVE-575</key>
            <summary>map join runs out of memory for a key with very large number of values</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 06:58:47 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:24 +0000</updated>
                            <resolved>Wed, 24 Jun 2009 23:49:13 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12723618" author="rsm" created="Wed, 24 Jun 2009 16:34:38 +0000"  >&lt;p&gt;can you provide more details about what is happening here?&lt;/p&gt;</comment>
                            <comment id="12723653" author="namit" created="Wed, 24 Jun 2009 17:46:57 +0000"  >&lt;p&gt;There are 2 problems:&lt;/p&gt;

&lt;p&gt;1. MapjoinObjectKey was always using BytesWritable - it should use the serializer from the serDe.&lt;br/&gt;
2. The bigger problem was that there was a memory leak in jdbm, which is used as the persistent store for map join, as a key,value pair. &lt;br/&gt;
     In case of a cartesian product, there was only 1 key (null key) with ever increasing values - The size of the value was always increasing&lt;br/&gt;
     for every new value added. There is some bug in the jdbm handling of free lists, which I could not get to the bottom of. However, as a&lt;br/&gt;
     workaround, I am allocating double size - which solves that issue.&lt;/p&gt;</comment>
                            <comment id="12723801" author="zshao" created="Wed, 24 Jun 2009 23:34:34 +0000"  >&lt;p&gt;Testing. Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;Another related question: Did we ever consider storing the rows with the same keys as separate &amp;lt;key, value&amp;gt; pairs? Basically, treat jdbm as a multimap instead of a map. I think that will fix this problem as well as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-579&quot; title=&quot;join with a skew in does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-579&quot;&gt;HIVE-579&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12723807" author="zshao" created="Wed, 24 Jun 2009 23:49:13 +0000"  >&lt;p&gt;Committed. Thanks Namit.&lt;/p&gt;</comment>
                            <comment id="12723809" author="namit" created="Wed, 24 Jun 2009 23:55:13 +0000"  >&lt;p&gt;Talked about it (I think with Joy), but nothing concrete.&lt;/p&gt;

&lt;p&gt;May need some heuristics - Can store a specified number of &amp;lt;values&amp;gt; with a given key, and have a next ?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-579&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-579&lt;/a&gt; is kind of independent, key is not needed at all in that case.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12428800">HIVE-579</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12411668" name="hive.575.1.patch" size="3268" author="namit" created="Wed, 24 Jun 2009 16:29:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Jun 2009 16:34:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73435</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lal3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122365</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-575&quot; title=&quot;map join runs out of memory for a key with very large number of values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-575&quot;&gt;&lt;strike&gt;HIVE-575&lt;/strike&gt;&lt;/a&gt;. Fix Map join out-of-memory problem. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-576] complete jdbc driver</title>
                <link>https://issues.apache.org/jira/browse/HIVE-576</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive only support a few interfaces of jdbc, let&apos;s complete it. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12428762">HIVE-576</key>
            <summary>complete jdbc driver</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="coderplay">Min Zhou</assignee>
                                    <reporter username="coderplay">Min Zhou</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 10:39:51 +0000</created>
                <updated>Tue, 6 Mar 2012 16:00:59 +0000</updated>
                                            <version>0.4.0</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>12</watches>
                                                                            <aggregatetimeoriginalestimate seconds="7200">2h</aggregatetimeoriginalestimate>
                                        <aggregatetimeremainingestimate seconds="7200">2h</aggregatetimeremainingestimate>
                                                <comments>
                            <comment id="12723535" author="coderplay" created="Wed, 24 Jun 2009 11:47:07 +0000"  >&lt;p&gt;patch&lt;/p&gt;</comment>
                            <comment id="12723539" author="coderplay" created="Wed, 24 Jun 2009 11:54:07 +0000"  >&lt;p&gt;miss a change of HiveCallableStatement&lt;/p&gt;</comment>
                            <comment id="12724060" author="coderplay" created="Thu, 25 Jun 2009 12:05:46 +0000"  >&lt;p&gt;Dones &amp;amp; To Dos :&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;removed all useless comments auto-gened by eclipse.&lt;/li&gt;
	&lt;li&gt;added APL statements for each file&lt;/li&gt;
	&lt;li&gt;fixed a bug SemanticAnalyzer.getSchema() fails after doing select-all queries on tables have partitions, where queries like &quot;select * from tbl where partition_name=value&quot;&lt;/li&gt;
	&lt;li&gt;implemented HiveResultSetMetadata, HiveDatabaseMetadata&lt;/li&gt;
	&lt;li&gt;HiveResultSet supported getXXX(columnName) now&lt;/li&gt;
	&lt;li&gt;removed JdbcSessionState hasnot been used&lt;/li&gt;
	&lt;li&gt;supported SQL Explorer for manipulate hive data by GUI&lt;/li&gt;
	&lt;li&gt;todo: implement HivePreparedStatement &amp;amp; HiveCallableStatement&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12729398" author="namit" created="Thu, 9 Jul 2009 20:07:49 +0000"  >&lt;p&gt;There are some fundamental issues with this patch. We are in the process of getting rid of DynamicSeDe altogether, once&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-553&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-553&lt;/a&gt; is in.&lt;/p&gt;

&lt;p&gt;Using open-source thrift is also on the cards - and getSchema() has already been modified to return List&amp;lt;FieldSchema&amp;gt;.&lt;/p&gt;

&lt;p&gt;After that, the schema for the table under consideration will be sent to clients. On the client side, you should not need a object-inspector.&lt;/p&gt;

&lt;p&gt;So, as it stands, the patch may need substantial modifications to be ready. Also, I would recommend doing it in stages which makes it easier to &lt;br/&gt;
review rather than one big transaction.&lt;/p&gt;</comment>
                            <comment id="12731825" author="coderplay" created="Thu, 16 Jul 2009 06:02:16 +0000"  >&lt;p&gt;@Namit&lt;br/&gt;
What&apos;s your suggestion?  which sub task shall we start? &lt;/p&gt;</comment>
                            <comment id="12731952" author="namit" created="Thu, 16 Jul 2009 14:13:30 +0000"  >&lt;p&gt;Now that, hive is using asf thrift, you can start with modifying getSchema() - remove the new object Schema() from the metastore.&lt;br/&gt;
The hive client can return hive types instead of thrift types.&lt;/p&gt;

&lt;p&gt;We can more discussion on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-604&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-604&lt;/a&gt;&lt;br/&gt;
I will assign that to you&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12427772">HIVE-559</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455156">HIVE-1126</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12411636" name="HIVE-576.1.patch" size="204773" author="coderplay" created="Wed, 24 Jun 2009 11:47:07 +0000"/>
                            <attachment id="12411637" name="HIVE-576.2.patch" size="205321" author="coderplay" created="Wed, 24 Jun 2009 11:54:07 +0000"/>
                            <attachment id="12411633" name="sqlexplorer.jpg" size="200684" author="coderplay" created="Wed, 24 Jun 2009 10:47:46 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12427772">HIVE-559</subtask>
                            <subtask id="12428768">HIVE-577</subtask>
                            <subtask id="12505893">HIVE-2140</subtask>
                            <subtask id="12506811">HIVE-2158</subtask>
                            <subtask id="12515339">HIVE-2304</subtask>
                            <subtask id="12515616">HIVE-2320</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Jul 2009 20:07:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48472</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-577] return correct comment of a column from ThriftHiveMetastore.Iface.get_fields</title>
                <link>https://issues.apache.org/jira/browse/HIVE-577</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;comment of each column hasnot been retrieved correct right now , &lt;br/&gt;
FieldSchema.getComment() will return a string &quot;from derserializer&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428768">HIVE-577</key>
            <summary>return correct comment of a column from ThriftHiveMetastore.Iface.get_fields</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12428762">HIVE-576</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="coderplay">Min Zhou</assignee>
                                    <reporter username="coderplay">Min Zhou</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 12:09:30 +0000</created>
                <updated>Wed, 1 Jul 2009 17:53:37 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12725074" author="coderplay" created="Mon, 29 Jun 2009 07:56:22 +0000"  >&lt;p&gt;can retrieve all columns&apos; comments now.&lt;/p&gt;</comment>
                            <comment id="12725276" author="prasadc" created="Mon, 29 Jun 2009 17:42:12 +0000"  >&lt;p&gt;this patch won&apos;t work for custom serdes where schema information stored in metastore is incorrect or incomplete. eg, thrift serdes. correct way of doing this is to get the fields from Deserializer and then look up the commet from the list in tbl.getSerDe().getCols().&lt;/p&gt;</comment>
                            <comment id="12725435" author="coderplay" created="Tue, 30 Jun 2009 02:18:25 +0000"  >&lt;p&gt;@Prasad &lt;br/&gt;
I considered that case you mentioned before uploaded a that patch,  just didn&apos;t know what is the meaning of code. &lt;/p&gt;

&lt;p&gt;this patch would cope the issue.&lt;/p&gt;</comment>
                            <comment id="12725446" author="prasadc" created="Tue, 30 Jun 2009 02:49:18 +0000"  >&lt;p&gt;looks sufficient for native tables but won&apos;t work for custom tables with comments. but that is ok, this part of code may actually get rewritten.&lt;/p&gt;</comment>
                            <comment id="12725450" author="coderplay" created="Tue, 30 Jun 2009 03:06:45 +0000"  >&lt;p&gt;I guessed it&apos;s cumbersome to deal with custom tables from the api provided by hive currently. &lt;/p&gt;

&lt;p&gt;DDL for table schema should changed from &lt;br/&gt;
  struct&lt;/p&gt;
{ type1 col1, type2 col2}
&lt;p&gt;to some format like&lt;br/&gt;
  struct{ struct&lt;/p&gt;
{type1 col1, string comment1}
&lt;p&gt;,  struct{type2 col2, string comment2}}&lt;/p&gt;

&lt;p&gt;however, MetaStoreUtils.getDDLFromFieldSchema(structName,  fieldSchemas) is not only for getSchema(table). &lt;/p&gt;
</comment>
                            <comment id="12725473" author="coderplay" created="Tue, 30 Jun 2009 05:17:38 +0000"  >&lt;p&gt;Any suggestions on this or accepting the 2nd patch, Prasad?&lt;/p&gt;</comment>
                            <comment id="12725474" author="prasadc" created="Tue, 30 Jun 2009 05:20:19 +0000"  >&lt;p&gt;actually i don&apos;t understand your comment above.&lt;/p&gt;</comment>
                            <comment id="12725475" author="coderplay" created="Tue, 30 Jun 2009 05:31:46 +0000"  >&lt;p&gt;see MetaStoreUtils.java: 437-457&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getDDLFromFieldSchema(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; structName, List&amp;lt;FieldSchema&amp;gt; fieldSchemas) {
    StringBuilder ddl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder();
    ddl.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;struct &quot;&lt;/span&gt;);
    ddl.append(structName);
    ddl.append(&lt;span class=&quot;code-quote&quot;&gt;&quot; { &quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; first = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FieldSchema col: fieldSchemas) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (first) {
        first = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        ddl.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;);
      }
      ddl.append(typeToThriftType(col.getType()));
      ddl.append(&lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt;);
      ddl.append(col.getName());
    }
    ddl.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;);
    
    LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;DDL: &quot;&lt;/span&gt; + ddl);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ddl.toString();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That method return a DDL struct&lt;/p&gt;
{ type1 col1, type2 col2, ...}
&lt;p&gt; ,  which should be struct{ struct&lt;/p&gt;
{type1 col1, string comment1}
&lt;p&gt;, struct&lt;/p&gt;
{type2 col2, string comment2}
&lt;p&gt;, ...} for retrieving comments of those columns.  but PlanUtils.getBinarySortableTableDesc() who also call that method  don&apos;t need any comments .&lt;/p&gt;</comment>
                            <comment id="12725477" author="prasadc" created="Tue, 30 Jun 2009 05:37:15 +0000"  >&lt;p&gt;ok. what i meant in my original comment is to get the field schemas without the comment from Deserializer and fill in the comments from the tbl.getSD().getCols(). But as I said, what you have in the second patch is good enough. so +1.&lt;/p&gt;</comment>
                            <comment id="12725564" author="coderplay" created="Tue, 30 Jun 2009 10:28:19 +0000"  >&lt;p&gt;Passed all testcase in hadoop 0.17.0 -0.19.1.   &lt;/p&gt;</comment>
                            <comment id="12725782" author="prasadc" created="Tue, 30 Jun 2009 20:11:22 +0000"  >&lt;p&gt;my dev server crashed where all of my hive trees are at. can anyone else take this up?&lt;/p&gt;</comment>
                            <comment id="12725797" author="rsm" created="Tue, 30 Jun 2009 20:41:03 +0000"  >&lt;p&gt;Check &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-590&quot; title=&quot;Pass type information in genFileSinkPlan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-590&quot;&gt;&lt;del&gt;HIVE-590&lt;/del&gt;&lt;/a&gt;. We are going to fix Driver.getSchema() to return a structure rather than return a string which needs to be parsed again in the client. &lt;/p&gt;

&lt;p&gt;I am wondering if we can get rid of duplicate logic of getting schema of table or query result in HiveMetaStore vs Driver. I couldnt find any place (other than thrift generated code) where we call get_fields(). So, do we really need this method at all given that Driver will provide this functionality?&lt;/p&gt;

&lt;p&gt;Regarding this patch, can you add a test?&lt;/p&gt;</comment>
                            <comment id="12725833" author="prasadc" created="Tue, 30 Jun 2009 22:14:38 +0000"  >&lt;p&gt;@raghu, we need this in metastore to for non CLI clients such PHP, Python etc. May be Driver.getSchema() use this?&lt;/p&gt;</comment>
                            <comment id="12725844" author="rsm" created="Tue, 30 Jun 2009 23:22:59 +0000"  >&lt;p&gt;@prasad. if we have a hiveserver, they can use describe statements to get the schema. Driver.getSchema() cannot really use get_fields() directly since all calls are done via a query string - i guess there is a different code path which extracts the fields/types and comments for describe queries. maybe, we should unify that as well.&lt;/p&gt;</comment>
                            <comment id="12726154" author="namit" created="Wed, 1 Jul 2009 17:53:37 +0000"  >&lt;p&gt;Today, describe goes through a different code path. I am not sure if Driver.getSchema() will work for describe. &lt;br/&gt;
Even if it does, it is not practical to assume a HiveServer. Due to the absence of HiveServer, we need this change as Prasad pointed out.&lt;/p&gt;

&lt;p&gt;Should we focus on a HiveServer, and eliminate the possibility of anyone contacting the metastore directly ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412044" name="HIVE-577.1.patch" size="735" author="coderplay" created="Mon, 29 Jun 2009 07:56:22 +0000"/>
                            <attachment id="12412119" name="HIVE-577.2.patch" size="1664" author="coderplay" created="Tue, 30 Jun 2009 02:18:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jun 2009 17:42:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lalb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-578] Refactor partition pruning code as an optimizer transformation</title>
                <link>https://issues.apache.org/jira/browse/HIVE-578</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Some bugs with partition pruning have been reported and the correct fix for many of them is to rewrite the partition pruning code as an optimizer transformation which gets kicked in after the predicate pushdown code. This refactor also uses the graph walker framework so that the partition pruning code gets consolidated well with the frameworks and does not work on the query block but rather works on the operator tree.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428788">HIVE-578</key>
            <summary>Refactor partition pruning code as an optimizer transformation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="athusoo">Ashish Thusoo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 15:29:41 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:21 +0000</updated>
                            <resolved>Tue, 11 Aug 2009 02:06:50 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12723603" author="athusoo" created="Wed, 24 Jun 2009 15:32:29 +0000"  >&lt;p&gt;This a preliminary code patch. I have not yet plugged this into the SemanticAnalyzer phase but comments are welcome in order to catch any early omissions. This introduces test diffs which I will upload with the final patch.&lt;/p&gt;</comment>
                            <comment id="12723804" author="namit" created="Wed, 24 Jun 2009 23:45:08 +0000"  >&lt;p&gt;Some high-level comments:&lt;/p&gt;

&lt;p&gt;1. Can you share some expression walker code from Predicate Pushdown ? seems like a lot of common stuff.&lt;br/&gt;
2. Can you always assume that the predicate to be filtered will always be after the tablescan ? &lt;/p&gt;

&lt;p&gt;     Currently, all optimizations are independent of each other, and can be turned off - this way, &lt;br/&gt;
     you are dependent on a new feature &amp;#8211; may have stability issues.&lt;/p&gt;

&lt;p&gt;     I don&apos;t remember exactly how does predicate pushdown work - if a filter is already present immediately after the table&lt;br/&gt;
     scan, will the pushed up filter be merged. Is it pushed across user defined mappers/reducers ? Cant these things change&lt;br/&gt;
     in the future ?&lt;/p&gt;

&lt;p&gt;     It might be a good idea to look for TS*FIL, and then keep some mapping - or probably use the same mapping that Predicate&lt;br/&gt;
     pushdown has to figure out whether the filter is for the table under consideration.&lt;/p&gt;</comment>
                            <comment id="12724786" author="athusoo" created="Sat, 27 Jun 2009 01:31:06 +0000"  >&lt;p&gt;Actually the walker is already shared. However, the actions encapsulated in the ExprProcFactory etc. are by definition different from predicate pushdown and partition pruning so there is no sharing there.&lt;/p&gt;

&lt;p&gt;For 2 I checked with Prasad, and this assumption is correct. Also if there are multiple filter predicates after TS, there are all merged together and a new filter predicate is generated under the TS node, so looking for TS%FIL% should be sufficient.&lt;/p&gt;

&lt;p&gt;Regarding the optimization, I will keep the old pruning code around and toggle this new functionality only when predicate pushdown in enabled. Also I am going to add a number of tests to this before it goes in.&lt;/p&gt;
</comment>
                            <comment id="12731540" author="rsm" created="Wed, 15 Jul 2009 16:19:59 +0000"  >&lt;p&gt;I am trying to make similar changes to input pruning for sampling. &lt;/p&gt;

&lt;p&gt;A few questions:&lt;/p&gt;

&lt;p&gt;How come we have both tableDesc and tableScanDesc? I see that tableDesc is used in FetchWork and tableScanDesc in TableScanOperator. Does it make sense to make FetchWork use TableScanOperator (FetchOperator is not really an operator)? Then, merge tableDesc and tableScanDesc? This will also allow us to have the same code path for select * queries as well. Right now it looks like FetchOperator is duplicating some code. Also, sample pruning can use the merged tableScanDesc object to store the sampling information.&lt;/p&gt;</comment>
                            <comment id="12731564" author="athusoo" created="Wed, 15 Jul 2009 17:14:09 +0000"  >&lt;p&gt;yes that makes sense. In fact that needs to be done to make pruning work with select * from T where T.part = xyz kind of queries and I ran into that a few days back. I have punted that for the first stage and still rely on the old pruning stuff for such queries and when predicate pushdown is switched off. I have it mostly passing the tests except for sampling tests where in the predicate pushdown code seems not to be merging the two filter operators and I have made that assumption in my code. Will update today with the version sans the new tests and some cleanup. That way we can see how sampling stuff can work with this as well.&lt;/p&gt;</comment>
                            <comment id="12731696" author="athusoo" created="Wed, 15 Jul 2009 21:20:05 +0000"  >&lt;p&gt;Actually semantics with table sampling is a bit tricky in case the sampling function is non deterministic e.g (rand()). In that case there are two possibilities:&lt;/p&gt;

&lt;p&gt;1. The sampling is done on the whole table and then the predicate is applied which implies no partition pruning.&lt;br/&gt;
or&lt;br/&gt;
2. The sampling is done after the partition predicate is applied ie. it is done after pruning.&lt;/p&gt;

&lt;p&gt;2 is what we do today - I am ok with keeping that, but just wanted to call that out as a special case in the partition pruning code.&lt;/p&gt;</comment>
                            <comment id="12734421" author="athusoo" created="Thu, 23 Jul 2009 01:48:43 +0000"  >&lt;p&gt;New patch. This is now passing all the tests. I am going to add some more tests and refactor some of the state from ParseContext to tableScanDesc.&lt;/p&gt;</comment>
                            <comment id="12734428" author="prasadc" created="Thu, 23 Jul 2009 02:15:56 +0000"  >&lt;p&gt;Some comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;for(String partName: Hive.get().getPartitionNames(MetaStoreUtils.DEFAULT_DATABASE_NAME, tab.getName(), (short) -1))&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;1. should use tab.getDbName() instead.&lt;/p&gt;

&lt;p&gt;2. PartitionPruner::prune() should return partSpecs or partNames instead of partition objects and avoid calling getPartition() on all partNames. this would lower the unnecessary load on metastore. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (HiveConf.getBoolVar(hiveConf, HiveConf.ConfVars.HIVEOPTPPD)) {
       transformations.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PredicatePushDown());
+      transformations.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PartitionPruner());
     }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;3. you should add new config param instead of piggybacking on PPD.&lt;/p&gt;

&lt;p&gt;4. isn&apos;t ColumnInfo.internalName unique among all tables? is tableName an additional information that is needed? Can&apos;t you get this info from RowResolver? Same question on exprNodeColDesc.&lt;/p&gt;

&lt;p&gt;5. don&apos;t understand the change in DefaultGraphWalker.java&lt;/p&gt;

&lt;p&gt;6. can&apos;t most of the functionality from ql/parse/PartitionPruner.java class can&apos;t be moved to the new class. atleast change the name so that it is not confusing as which pruner is doing what.&lt;/p&gt;

&lt;p&gt;7. import org.apache.hadoop.hive.ql.ppd.PredicatePushDown; is not needed in SemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;8. &lt;/p&gt;
</comment>
                            <comment id="12734800" author="namit" created="Thu, 23 Jul 2009 21:37:25 +0000"  >&lt;p&gt;Some more comments:&lt;/p&gt;

&lt;p&gt;1. Add lots of new tests&lt;br/&gt;
2. Wrong comments in OpProcFactory:&lt;/p&gt;

&lt;p&gt;      // If fop2 exists (i.e this is not the top level filter and fop2 is not&lt;br/&gt;
      // a sampling filter t1ehen we ignore the current filter&lt;br/&gt;
      if (fop2 != null &amp;amp;&amp;amp; !fop2.getConf().getIsSamplingPred())&lt;br/&gt;
        return null;&lt;/p&gt;

&lt;p&gt;      // ignore the predicate in case it is not a sampling predicate&lt;br/&gt;
      if (fop.getConf().getIsSamplingPred()) &lt;/p&gt;
{
        return null;
      }&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
should be:&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
      // If fop2 exists (i.e this is not the top level filter and fop2 is not&lt;br/&gt;
      // a sampling filter then we ignore the current filter&lt;br/&gt;
      if (fop2 != null &amp;amp;&amp;amp; !fop2.getConf().getIsSamplingPred())&lt;br/&gt;
        return null;&lt;br/&gt;
      &lt;br/&gt;
      // ignore the predicate in case it is a sampling predicate&lt;br/&gt;
      if (fop.getConf().getIsSamplingPred()) {        return null;      }


&lt;p&gt;3. ExprProcFactory.java:&lt;/p&gt;

&lt;p&gt;wrong parameters doc:&lt;br/&gt;
  /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Extracts pushdown predicates from the given list of predicate expression&lt;/li&gt;
	&lt;li&gt;@param opContext operator context used for resolving column references&lt;/li&gt;
	&lt;li&gt;@param op operator of the predicates being processed&lt;/li&gt;
	&lt;li&gt;@param preds&lt;/li&gt;
	&lt;li&gt;@return hasNonPartCols returns true/false depending upon whether this pred has a non partition column&lt;/li&gt;
	&lt;li&gt;@throws SemanticException&lt;br/&gt;
   */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;4. ExprProcFactory: 104/146/182&lt;br/&gt;
shouldnt you check for exprNodeNullDesc also&lt;/p&gt;


&lt;p&gt;5. wrong comment: 63&lt;br/&gt;
    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Converts the reference from child row resolver to current row resolver&lt;br/&gt;
     */&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12739946" author="athusoo" created="Thu, 6 Aug 2009 09:03:04 +0000"  >&lt;p&gt;@Namit&lt;br/&gt;
1. I have added a bunch of tests with the new patch.&lt;br/&gt;
2/3/5. Fixed the typos and wrong comments and javadocs&lt;br/&gt;
4. I don&apos;t think I have to check for exprNodeNullDesc. The unknown value of an operand is denoted by a null value in exprNodeConstantDesc. exprNodeNullDesc is used to denote the liternal NULL which should be treated as is for predicate pruning expression. e.g. if(ISNULL(NULL), 1, 0) should evaluate to 1 instead of unknown. So I think it is correct to not check the exprNodeNullDesc for the function processors. Thoughts?&lt;/p&gt;

&lt;p&gt;@Prasad&lt;br/&gt;
3. I have used the ppd parameter because I cannot do partition pruning without ppd. So even if I have a separate parameter it would still have to be checked along with ppd. At that point, it seems having a separate parameter for ppd does not add much value. Thoughts?&lt;br/&gt;
7. Removed&lt;br/&gt;
6. I have changed the name ot ASTPartitionPruner&lt;br/&gt;
5. This fixes a bug in DefaultGraphWalker. Due to this bug the operation stack would always get popped when you exited this call. As a result the stack would actually just contain the last node and not all the nodes on the path leading to the last node.&lt;br/&gt;
4. Which particular code file are you talking about here?&lt;br/&gt;
2. Not sure how that is different from what we were doing before?&lt;br/&gt;
1. Made the change&lt;/p&gt;
</comment>
                            <comment id="12739947" author="athusoo" created="Thu, 6 Aug 2009 09:05:09 +0000"  >&lt;p&gt;New patch with tests and changes.&lt;/p&gt;</comment>
                            <comment id="12740181" author="zshao" created="Thu, 6 Aug 2009 18:17:40 +0000"  >&lt;p&gt;We should add a separate parameter to enable the new partition pruner.&lt;/p&gt;

&lt;p&gt;Since the new partition pruner works only when ppd is enabled, we should have 3 possible modes instead of 4.&lt;br/&gt;
hive.opt.ppd=false, hive.partition.pruner=ast&lt;br/&gt;
hive.opt.ppd=true, hive.partition.pruner=ast&lt;br/&gt;
hive.opt.ppd=true, hive.partition.pruner=opt&lt;/p&gt;</comment>
                            <comment id="12740297" author="athusoo" created="Thu, 6 Aug 2009 22:56:13 +0000"  >&lt;p&gt;New patch where the ppr is controlled by a boolean parameter. It kicks in only if ppd and ppr are both true. If any one of them are not true the AST based approach is used.&lt;/p&gt;</comment>
                            <comment id="12741553" author="namit" created="Mon, 10 Aug 2009 21:09:25 +0000"  >&lt;p&gt;atching file ql/src/java/org/apache/hadoop/hive/ql/parse/PartitionPruner.java&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
can&apos;t find file to patch at input line 27070&lt;br/&gt;
Perhaps you used the wrong -p or --strip option?&lt;br/&gt;
The text leading up to this was:&lt;br/&gt;
--------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Index: ql/src/java/org/apache/hadoop/hive/ql/parse/ASTPartitionPruner.java&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;===================================================================&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212; ql/src/java/org/apache/hadoop/hive/ql/parse/ASTPartitionPruner.java	(revision 801363)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;+++ ql/src/java/org/apache/hadoop/hive/ql/parse/ASTPartitionPruner.java	(working copy)&lt;br/&gt;
--------------------------&lt;br/&gt;
File to patch: &lt;br/&gt;
Skip this patch? &lt;span class=&quot;error&quot;&gt;&amp;#91;y&amp;#93;&lt;/span&gt; &lt;br/&gt;
Skipping patch.&lt;br/&gt;
5 out of 5 hunks ignored&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file ql/src/java/org/apache/hadoop/hive/ql/parse/PrunedPartitionList.java&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;Problems in applying the patch - can you generate the patch again ?&lt;/p&gt;</comment>
                            <comment id="12741588" author="athusoo" created="Mon, 10 Aug 2009 22:10:08 +0000"  >&lt;p&gt;I think the patch is correct. Before applying the patch just do an svn mv on the old PartitionPruner.java to ASTPartitionPruner.java. Actually change the class name in eclipse and then apply the patch. That should work.&lt;/p&gt;</comment>
                            <comment id="12741660" author="namit" created="Tue, 11 Aug 2009 01:34:10 +0000"  >&lt;p&gt;Done - running tests right now&lt;/p&gt;</comment>
                            <comment id="12741663" author="namit" created="Tue, 11 Aug 2009 02:06:50 +0000"  >&lt;p&gt;Committed. Thanks Ashish&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12411888">HIVE-218</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12411658" name="patch-578.txt" size="69953" author="athusoo" created="Wed, 24 Jun 2009 15:32:29 +0000"/>
                            <attachment id="12414294" name="patch-578_1.txt" size="1079411" author="athusoo" created="Thu, 23 Jul 2009 01:48:43 +0000"/>
                            <attachment id="12415714" name="patch-578_2.txt" size="1283160" author="athusoo" created="Thu, 6 Aug 2009 09:05:09 +0000"/>
                            <attachment id="12415789" name="patch-578_3.txt" size="1311693" author="athusoo" created="Thu, 6 Aug 2009 22:56:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Jun 2009 23:45:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73434</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lalj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-579] join with a skew in does not work</title>
                <link>https://issues.apache.org/jira/browse/HIVE-579</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be good to figure out the join order - it can be based on statistics or sampling.&lt;/p&gt;

&lt;p&gt;Till that happens, it might be useful to integrate the hash table that the reducer maintains with jdbm. Atleast, the out of memory errors can be avoided.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428800">HIVE-579</key>
            <summary>join with a skew in does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 18:50:13 +0000</created>
                <updated>Mon, 26 Jul 2010 06:35:05 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12428739">HIVE-575</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lalr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-580] command to list available UDF names</title>
                <link>https://issues.apache.org/jira/browse/HIVE-580</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be great if there was some way to list all available UDF names in the CLI.&lt;/p&gt;

&lt;p&gt;Ideally, there would be some way for the UDFs themselves to provide a description/help that could also be displayed.&lt;/p&gt;

&lt;p&gt;Would also be nice if the UDF names were available for auto-completion (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-97&quot; title=&quot;tab completion for hive cli&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-97&quot;&gt;&lt;del&gt;HIVE-97&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;As a start, just having the names available would be great.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428814">HIVE-580</key>
            <summary>command to list available UDF names</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="schen">Scott Chen</assignee>
                                    <reporter username="ogrodnek">Larry Ogrodnek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 22:12:11 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:53 +0000</updated>
                            <resolved>Tue, 28 Jul 2009 01:25:35 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Clients</component>
                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12723800" author="zshao" created="Wed, 24 Jun 2009 23:31:19 +0000"  >&lt;p&gt;That&apos;s a good idea.&lt;br/&gt;
It should be pretty easy to do since FunctionRegistry has all the information needed.&lt;/p&gt;</comment>
                            <comment id="12724785" author="athusoo" created="Sat, 27 Jun 2009 01:25:46 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;Additionally I think we should support UDFs persistently as well (not just create temporary function but also create function)&lt;/p&gt;</comment>
                            <comment id="12730940" author="prasadc" created="Tue, 14 Jul 2009 16:18:13 +0000"  >&lt;p&gt;@yongqing, we are trying to move away from processing queries inside CliDriver.java. This just creates problems later on. Joydeep is planning to move all such commands/constructs (set, add, comments) from CliDriver into parser. I don&apos;t think we should add this command here.&lt;/p&gt;</comment>
                            <comment id="12730953" author="he yongqiang" created="Tue, 14 Jul 2009 16:33:11 +0000"  >&lt;p&gt;That&apos;s good.  We should avoid adding all command processing logics in one CliDriver.  I can see CliDriver will get fatter and fatter as new commands got in.&lt;/p&gt;</comment>
                            <comment id="12730962" author="namit" created="Tue, 14 Jul 2009 16:48:40 +0000"  >&lt;p&gt;Yes, it would be better to add a &apos;show functions&apos; command supported by the hive parser itself.&lt;/p&gt;</comment>
                            <comment id="12735348" author="schen" created="Sun, 26 Jul 2009 06:14:09 +0000"  >&lt;p&gt;&quot;SHOW FUNCTIONS;&quot; will list all the udf.&lt;br/&gt;
&quot;SHOW FUNCTIONS &apos;regular expression string&apos;;&quot; will list all the udf matches the regular expression.&lt;br/&gt;
Most of the logic in this patch follows &quot;SHOW TABLE&quot;.&lt;/p&gt;</comment>
                            <comment id="12735379" author="he yongqiang" created="Sun, 26 Jul 2009 11:56:59 +0000"  >&lt;p&gt;The patch looks good.  Can you use hadoop conversion for code format? (showFunctionsDesc and DDLSemanticAnalyzer)&lt;/p&gt;</comment>
                            <comment id="12735480" author="namit" created="Mon, 27 Jul 2009 06:02:04 +0000"  >&lt;p&gt;Also, can you add some property which shows the signature and the properties of the function (whether it is temporary or not).&lt;br/&gt;
You can add something like:&lt;/p&gt;

&lt;p&gt;describe function &lt;/p&gt;
{extended}

&lt;p&gt;You can also do the describe in a follow-up - in that case please file a JIRA for the same&lt;/p&gt;</comment>
                            <comment id="12735484" author="zshao" created="Mon, 27 Jul 2009 06:08:03 +0000"  >&lt;p&gt;Overall the patch looks pretty good. Some nitpicks:&lt;br/&gt;
@hive-580-2009-07-25.patch:&lt;br/&gt;
43,47: Can you add javadoc for all new functions? I know we don&apos;t have javadoc for all functions, but a while back we&apos;ve decided to add &quot;javadoc&quot; for all new functions (and gradually do that for all old functions as well).&lt;br/&gt;
141: LOG.warn instead of LOG.info. (Can you do the same change to showTables?)&lt;/p&gt;</comment>
                            <comment id="12735486" author="zshao" created="Mon, 27 Jul 2009 06:09:37 +0000"  >&lt;p&gt;Since we already have &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-691&quot; title=&quot;show documentation for user defined functions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-691&quot;&gt;&lt;del&gt;HIVE-691&lt;/del&gt;&lt;/a&gt;, let&apos;s use that one for &quot;describe function &lt;/p&gt;
{extended}
&lt;p&gt;&quot;.&lt;/p&gt;</comment>
                            <comment id="12735711" author="schen" created="Mon, 27 Jul 2009 18:52:22 +0000"  >&lt;p&gt;@Yongqing: Thanks. I have checked with the convention but I only changed few things. It would be good if you can point out the file and lineno.&lt;/p&gt;

&lt;p&gt;@Namit: That is a very good suggestion. But as Zheng mentioned there&apos;s hive-691 on this one.&lt;/p&gt;

&lt;p&gt;@Zheng: Thanks for the comments. I have add javadoc to 3 new functions that I added. And LOG.info has been changed to LOG.warn in both showFunctions and showTables.&lt;/p&gt;</comment>
                            <comment id="12735719" author="athusoo" created="Mon, 27 Jul 2009 19:11:56 +0000"  >&lt;p&gt;One question about this patch. This does not print out UDAFs - granted that we do not yet have the capability to register UDAFs but I think it would be good to be able to list out UDAFs as well considering that we are adding new ones soon. Also show_functions.q.out does not seem to be part of the patch.&lt;/p&gt;
</comment>
                            <comment id="12735764" author="schen" created="Mon, 27 Jul 2009 20:45:54 +0000"  >&lt;p&gt;@Ashish: Sorry I forgot to svn add show_function.q.out. The UDAF in FunctionRegistry will also be listed out. &lt;/p&gt;</comment>
                            <comment id="12735802" author="namit" created="Mon, 27 Jul 2009 22:03:08 +0000"  >&lt;p&gt;Since, mFunctions in FunctionRegistry is a hashmap - it does not guarantee any order.&lt;br/&gt;
So, output of show functions is non-deterministic.&lt;/p&gt;

&lt;p&gt;Please change mFuntions to a linkedhashmap.&lt;/p&gt;

&lt;p&gt;Otherwise, the changes look good.&lt;/p&gt;</comment>
                            <comment id="12735837" author="schen" created="Mon, 27 Jul 2009 23:31:34 +0000"  >&lt;p&gt;changed HashMap -&amp;gt; LinkedHashMap following Namit&apos;s suggestion&lt;/p&gt;</comment>
                            <comment id="12735847" author="namit" created="Mon, 27 Jul 2009 23:56:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Looks good - will run tests and merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12735880" author="namit" created="Tue, 28 Jul 2009 01:25:35 +0000"  >&lt;p&gt;Committed. Thanks Scott&lt;/p&gt;</comment>
                            <comment id="12735882" author="schen" created="Tue, 28 Jul 2009 01:32:20 +0000"  >&lt;p&gt;Thank you very much Namit.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12431463">HIVE-691</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12431573">HIVE-700</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12413442" name="hive-580-2009-07-15.patch" size="4178" author="he yongqiang" created="Tue, 14 Jul 2009 16:10:33 +0000"/>
                            <attachment id="12414537" name="hive-580-2009-07-25.patch" size="13331" author="schen" created="Sun, 26 Jul 2009 06:14:09 +0000"/>
                            <attachment id="12414659" name="hive-580-2009-07-26-1.patch" size="16055" author="schen" created="Mon, 27 Jul 2009 20:45:54 +0000"/>
                            <attachment id="12414679" name="hive-580-2009-07-26-2.patch" size="16749" author="schen" created="Mon, 27 Jul 2009 23:31:34 +0000"/>
                            <attachment id="12414651" name="hive-580-2009-07-26.patch" size="14619" author="schen" created="Mon, 27 Jul 2009 18:52:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Jun 2009 23:31:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lalz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-581] improve group by syntax</title>
                <link>https://issues.apache.org/jira/browse/HIVE-581</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be nice if group by allowed either column aliases or column position (like mysql).&lt;/p&gt;

&lt;p&gt;It can be burdensome to have to repeat UDFs both in the select and in the group by.&lt;/p&gt;

&lt;p&gt;e.g. instead of:&lt;br/&gt;
select f1(col1), f2(col2), f3(col3), count(1) group by f1(col1), f2(col2), f3(col3);&lt;/p&gt;

&lt;p&gt;it would allow:&lt;br/&gt;
select f1(col1), f2(col2), f3(col3), count(1) group by 1, 2, 3;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428817">HIVE-581</key>
            <summary>improve group by syntax</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="ogrodnek">Larry Ogrodnek</reporter>
                        <labels>
                            <label>features</label>
                    </labels>
                <created>Wed, 24 Jun 2009 22:29:02 +0000</created>
                <updated>Tue, 31 Mar 2015 05:38:20 +0000</updated>
                            <resolved>Thu, 27 Dec 2012 11:23:29 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Clients</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13262782" author="cwsteinbach" created="Thu, 26 Apr 2012 17:37:41 +0000"  >&lt;p&gt;@Weizhe: Glad to seem someone wants to work on this. Also wanted to suggest that it may be convenient to address &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1947&quot; title=&quot;ORDER BY should support column position expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1947&quot;&gt;&lt;del&gt;HIVE-1947&lt;/del&gt;&lt;/a&gt; in the same patch.&lt;/p&gt;</comment>
                            <comment id="13272965" author="kevinwilfong" created="Fri, 11 May 2012 01:11:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D2949&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2949&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13272976" author="slider" created="Fri, 11 May 2012 01:44:27 +0000"  >&lt;p&gt;But grouping by column position breaks existing scripts, right? Because currently &quot;group by 1&quot; is treated as grouping by the value 1.&lt;/p&gt;</comment>
                            <comment id="13273769" author="namit" created="Sat, 12 May 2012 00:58:55 +0000"  >&lt;p&gt;@Steven, the current behavior seems like a bug.&lt;br/&gt;
I dont think, we should support it.&lt;/p&gt;

&lt;p&gt;Adding a config for this seems like a bad idea.&lt;/p&gt;</comment>
                            <comment id="13273789" author="slider" created="Sat, 12 May 2012 01:41:19 +0000"  >&lt;p&gt;Namit,&lt;/p&gt;

&lt;p&gt;It may well be a bug. At least I never have a need to group by the value 1.&lt;/p&gt;

&lt;p&gt;What about &quot;sort/order/distribute/cluster by 1&quot;? It is sorting/... by the value 1 currently. Are those bugs too or valid use cases? It will be quite confusing if &quot;by 1&quot; means the column 1 in one clause and means the value 1 in another clause.&lt;/p&gt;</comment>
                            <comment id="13273792" author="shshanka" created="Sat, 12 May 2012 01:50:44 +0000"  >&lt;p&gt;AFAIK other databases (Oracle, and I believe SQL server) support GROUP BY 1 to mean group by constant. If you do change the meaning for 1, 2, 3, what about &lt;br/&gt;
select &quot;abc&quot;, count &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from .. group by &quot;abc&quot;;? &lt;/p&gt;

&lt;p&gt;A change like this is (potentially) a language inconsistency (since string constants are treated differently from integer constants) and having a config may not be a bad idea. &lt;/p&gt;</comment>
                            <comment id="13273845" author="namit" created="Sat, 12 May 2012 05:36:08 +0000"  >&lt;p&gt;Cant argue against making it configurable ?&lt;br/&gt;
In mysql, group by 1 means grouping by the first position.&lt;br/&gt;
But, keeping it configurable leaves all the interpretations open, and we can use the same config. variable for order by also&lt;/p&gt;</comment>
                            <comment id="13273876" author="slider" created="Sat, 12 May 2012 07:27:33 +0000"  >&lt;p&gt;I actually agree with Namit&apos;s first instinct that adding a config sounds like a bad idea. Having used MySQL a lot in the past, I never liked its syntax that allows column positions. Using column aliases is so much clearer, less error-prone, and still very succinct.&lt;/p&gt;</comment>
                            <comment id="13539750" author="zhenxiao" created="Wed, 26 Dec 2012 23:42:45 +0000"  >&lt;p&gt;Review Request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D7623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7623&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13539816" author="namit" created="Thu, 27 Dec 2012 03:38:03 +0000"  >&lt;p&gt;minor comments&lt;/p&gt;</comment>
                            <comment id="13539837" author="zhenxiao" created="Thu, 27 Dec 2012 05:36:36 +0000"  >&lt;p&gt;Hi Namit, I updated my patch at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D7623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7623&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13539869" author="namit" created="Thu, 27 Dec 2012 08:43:21 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Running tests&lt;/p&gt;</comment>
                            <comment id="13539913" author="namit" created="Thu, 27 Dec 2012 11:23:29 +0000"  >&lt;p&gt;Committed. Thanks Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13540079" author="hudson" created="Thu, 27 Dec 2012 17:58:50 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1881 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1881/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1881/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-581&quot; title=&quot;improve group by syntax&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-581&quot;&gt;&lt;del&gt;HIVE-581&lt;/del&gt;&lt;/a&gt; improve group by syntax&lt;br/&gt;
(Zhenxiao Luo via namit) (Revision 1426165)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1426165&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1426165&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/groupby_invalid_position.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/orderby_invalid_position.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/orderby_position_unsupported.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_position.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/groupby_invalid_position.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/orderby_invalid_position.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/orderby_position_unsupported.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_position.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548075" author="hudson" created="Wed, 9 Jan 2013 10:24:17 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-581&quot; title=&quot;improve group by syntax&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-581&quot;&gt;&lt;del&gt;HIVE-581&lt;/del&gt;&lt;/a&gt; improve group by syntax&lt;br/&gt;
(Zhenxiao Luo via namit) (Revision 1426165)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1426165&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1426165&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/groupby_invalid_position.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/orderby_invalid_position.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/orderby_position_unsupported.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_position.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/groupby_invalid_position.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/orderby_invalid_position.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/orderby_position_unsupported.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_position.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14388043" author="lefty@hortonworks.com" created="Tue, 31 Mar 2015 05:38:20 +0000"  >&lt;p&gt;Doc note:  This added configuration parameter &lt;b&gt;hive.groupby.orderby.position.alias&lt;/b&gt; to HiveConf.java in release 0.11.0.  It is documented in the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.groupby.orderby.position.alias&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.groupby.orderby.position.alias &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+GroupBy#LanguageManualGroupBy-GroupBySyntax&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Group By Syntax &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SortBy#LanguageManualSortBy-SyntaxofOrderBy&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Order By Syntax &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12746530">HIVE-8388</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12425752">HIVE-494</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12497522">HIVE-1947</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12562421" name="HIVE-581.1.patch.txt" size="60929" author="zhenxiao" created="Wed, 26 Dec 2012 23:43:37 +0000"/>
                            <attachment id="12562442" name="HIVE-581.2.patch.txt" size="61879" author="zhenxiao" created="Thu, 27 Dec 2012 05:36:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Apr 2012 17:37:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42796</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08npj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Allow the syntax of position alias in groupby expression.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-582] &quot;SELECT count(1) as cnt from src x&quot; not working for column pruning</title>
                <link>https://issues.apache.org/jira/browse/HIVE-582</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The query &quot;SELECT count(1) as cnt from src x&quot;  has some problems, even though nullgroup*.q passed in tests. &lt;br/&gt;
Will check and solve it in this jira.&lt;br/&gt;
A wrong plan sometimes can be generated due to some unknow factor:&lt;br/&gt;
Wrong plan:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;STAGE PLANS:
  Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        x 
            Select Operator
              Reduce Output Operator
                sort order: 
                tag: -1
      Reduce Operator Tree:
        Group By Operator
          aggregations:
                expr: count(VALUE._col0)
          mode: complete
          Select Operator
            expressions:
                  expr: _col0
                  type: bigint
            File Output Operator
              compressed: false
              GlobalTableId: 0
              table:
                  input format: org.apache.hadoop.mapred.TextInputFormat
                  output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat

  Stage: Stage-0
    Fetch Operator
      limit: -1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without unknow factor, correct plan can be generated:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;STAGE PLANS:
  Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        x 
            Select Operator
              Group By Operator
                aggregations:
                      expr: count(1)
                mode: hash
                Reduce Output Operator
                  sort order: 
                  tag: -1
                  value expressions:
                        expr: _col0
                        type: bigint
      Reduce Operator Tree:
        Group By Operator
          aggregations:
                expr: count(VALUE._col0)
          mode: mergepartial
          Select Operator
            expressions:
                  expr: _col0
                  type: bigint
            File Output Operator
              compressed: false
              GlobalTableId: 0
              table:
                  input format: org.apache.hadoop.mapred.TextInputFormat
                  output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12428844">HIVE-582</key>
            <summary>&quot;SELECT count(1) as cnt from src x&quot; not working for column pruning</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jun 2009 09:36:43 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:14 +0000</updated>
                            <resolved>Tue, 30 Jun 2009 00:54:54 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12723988" author="he yongqiang" created="Thu, 25 Jun 2009 09:55:41 +0000"  >&lt;p&gt;It seems that the wrong plan is generated when setting hive.map.aggr=false, and the reduce output nothing(because of the column pruning). Reducer got nothing, so the exception occured.&lt;/p&gt;</comment>
                            <comment id="12725364" author="namit" created="Mon, 29 Jun 2009 21:50:50 +0000"  >&lt;p&gt;looks good &lt;/p&gt;</comment>
                            <comment id="12725412" author="namit" created="Tue, 30 Jun 2009 00:54:54 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411811" name="hive-582-2009-06-25.patch" size="9873" author="he yongqiang" created="Thu, 25 Jun 2009 11:53:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jun 2009 21:50:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73432</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lam7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-583] spurious &apos;default database not found&apos;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-583</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;occasionally this exception is thrown which doesn&apos;t make sense since that db exists.&lt;/p&gt;

&lt;p&gt;09/06/25 16:52:58 INFO metastore.ObjectStore: Initialized ObjectStore&lt;br/&gt;
09/06/25 16:53:15 INFO metastore.HiveMetaStore: 0: get_table : db=default tbl=tmp_hipal_37888&lt;br/&gt;
09/06/25 16:53:51 ERROR JPOX.Transaction: Operation rollback failed on resource: org.jpox.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4f62198b, error code UNKNOWN and transaction: [JPOX Transaction, Transaction ID=Xid=&#65533;&#65533;&#65533;, enlisted resources=&lt;span class=&quot;error&quot;&gt;&amp;#91;org.jpox.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4f62198b&amp;#93;&lt;/span&gt;]&lt;br/&gt;
09/06/25 16:53:51 ERROR metastore.ObjectStore: NoSuchObjectException(message:There is no database named default)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.ObjectStore.getMDatabase(ObjectStore.java:309)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.ObjectStore.convertToMTable(ObjectStore.java:597)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.ObjectStore.createTable(ObjectStore.java:475)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table(HiveMetaStore.java:308)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:251)&lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:251)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:748)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:96)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:307)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:213)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:176)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:216)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:273)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at org.apache.hadoop.util.RunJar.main(RunJar.java:166)&lt;br/&gt;
at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)&lt;br/&gt;
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)&lt;br/&gt;
at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428916">HIVE-583</key>
            <summary>spurious &apos;default database not found&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2009 00:52:46 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:49 +0000</updated>
                            <resolved>Sun, 28 Jun 2009 22:49:19 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12724359" author="prasadc" created="Fri, 26 Jun 2009 00:54:17 +0000"  >&lt;p&gt;running tests, but should pass fine.&lt;/p&gt;</comment>
                            <comment id="12724360" author="prasadc" created="Fri, 26 Jun 2009 00:54:46 +0000"  >&lt;p&gt;this exposes the real exception instead of spurious one so that we can debug the actual problem.&lt;/p&gt;</comment>
                            <comment id="12725008" author="zshao" created="Sun, 28 Jun 2009 22:49:19 +0000"  >&lt;p&gt;Committed. Thanks Prasad!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411878" name="hive-583.patch" size="732" author="prasadc" created="Fri, 26 Jun 2009 00:54:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 Jun 2009 22:49:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lamf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122371</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-583&quot; title=&quot;spurious &amp;#39;default database not found&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-583&quot;&gt;&lt;strike&gt;HIVE-583&lt;/strike&gt;&lt;/a&gt;. Fix spurious &amp;#39;default database not found&amp;#39;. (Prasad Chakka via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-584] Clean up global and ThreadLocal variables in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-584</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently in Hive code there are several global and ThreadLocal variables that need to be cleaned.&lt;/p&gt;

&lt;p&gt;Specifically, the following classes are involved:&lt;br/&gt;
1. HiveConf: contains hive configurations (and a classloader)&lt;br/&gt;
2. Hive class: contains a static member Hive db. Hive class contains a member HiveConf conf, as well as a ThreadLocal storage of IMetaStoreClient.&lt;br/&gt;
3. SessionState: contains a static ThreadLocal storage of SessionState. SessionState class contains a Hive db, a HiveConf conf, a history logger, and a bunch of standard input/output streams&lt;br/&gt;
4. CliSessionState: SessionState plus some command options and the command file name.&lt;br/&gt;
5. All classes that try to get Hive db or HiveConf from global static Hive db, or SessionState.&lt;/p&gt;

&lt;p&gt;There are several problems with the current design. To name a few:&lt;br/&gt;
1. SessionState instances are ThreadLocal, but SessionState contains Hive db which also contains ThreadLocal storage. Not sure a db can be shared across different threads or not? What is the global static Hive db?&lt;br/&gt;
2. We pass HiveConf and Hive db in two ways to classes like Task: Sometimes through initialize(), sometimes through SessionState. This complicates the code a lot. It&apos;s hard to know which HiveConf and which db we should use.&lt;/p&gt;

&lt;p&gt;We need to think about a better way to do it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428950">HIVE-584</key>
            <summary>Clean up global and ThreadLocal variables in Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2009 11:49:32 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:10 +0000</updated>
                            <resolved>Fri, 11 Sep 2009 00:29:31 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12724639" author="prasadc" created="Fri, 26 Jun 2009 17:57:34 +0000"  >&lt;p&gt;db for Hive.java objects is a misnomer. If we are cleaning up code then we should rename it. All it does is do metadata access.&lt;/p&gt;

&lt;p&gt;Hive.java can be shared across multiple threads as long as they share same HiveConf. But that is useless since we do want multiple threads to have separate HiveConfs.&lt;/p&gt;

&lt;p&gt;We should make Hive.db, Hive.conf, Hive.metastoreClient all non-static, non-threadlocal variables and make Hive.java itself a thread local variable. We nedd Hive.java object independent of SessionState or CliSessionState in lot o code where these objects don&apos;t exist. Passing conf around on all of the calls makes code cumbersome.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Hive {

  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; HiveConf conf;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; IMetaStoreClient msc;

  /**
   * creates and returns Hive object representing metadata &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; thread. &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a Hive object already exists &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; thread, the passed HiveConf
   * is compared with the HiveConf stored in Hive object. If any parameters have changed then a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Hive object is created and returned.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Hive get(HiveConf c) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; HiveException {}
 
  /**
   * similar to get(HiveConf) but a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HiveConf object
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Hive get() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; HiveException {}
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SessionState {
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; getHive(HiveConf conf) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; HiveException {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Hive.getHive(conf);
   }
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; getDb() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; HiveException {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Hive.getHive();
   }
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HiveConf getConf() {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getDb().getConf();
   }

   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; SessionState(HiveConf conf) {
   }

   &lt;span class=&quot;code-comment&quot;&gt;/** returns thread local SessionState and creates it on first call */&lt;/span&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; get(HiveConf conf);
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; get();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;SessionState also refers to this thread local Hive object instead of storing it as a class variable.&lt;/p&gt;

&lt;p&gt;Would this work?&lt;/p&gt;</comment>
                            <comment id="12724645" author="appodictic" created="Fri, 26 Jun 2009 18:20:03 +0000"  >&lt;p&gt;I ran into a few of these issues with HWI, so I feel your pain. Passing the conf around is very cumbersome. I remember my case I wanted to get the Conf from a CLI session state. It would be nice if each object stored the conf as a private variable with a getter. It would help out the web interface code a lot. The implementation above seems to make sense.&lt;/p&gt;</comment>
                            <comment id="12724771" author="zshao" created="Sat, 27 Jun 2009 00:37:21 +0000"  >&lt;p&gt;Prasad and I had some offline discussions. First of all, some high-level conclusions:&lt;/p&gt;

&lt;p&gt;0. Lifetime of the objects: The lifetime of all hive operators are a part of the lifetime of their configuration. The lifetime of all Tasks (ExecDriver, MapRedTask, MoveTask, etc) are a part of the lifetime of the db connection. The lifetime of a CommandProcessor is also a part of the lifetime of the db connection (well in some CommandProcessor we want to switch and close the db connection, as the actual operation that we want to do). The CliDriver and HiveServerHandler should correspond to a session.&lt;br/&gt;
1. ThreadLocal is good for keeping thread-local variables for ease-of-use (don&apos;t need to pass the object around, or give it in the constructor), ease-of-debugging (because there is no chance that another thread will change the content of the thread-local storage), and security reasons (the same as debugging).&lt;br/&gt;
2. Passing objects in constructor (and add a getter) is good for easy understanding of the program flow, as well as allowing the same thread to have 2 different objects (e.g. db connection).  There is not such a strong need since all db connection calls are blocking. We can always switch the thread-local db connection to the correct one before we start every call.&lt;/p&gt;


&lt;p&gt;Second, we have to make a choice between the 3:&lt;br/&gt;
A. Make Hive consists of the db connection and the conf. Make it a thread local storage.  Tasks (including ExecDriver), CommandProcessors(including Driver), and also CliDriver/HiveServerHandler will access this thread-local db connection and conf.  Make SessionState consists of other seesion specific things like stdout, history, etc (but NOT Hive). SessionState is also thread-specific and CliDriver will access SessionState for these information, as well as access Hive for db connection etc. So both Hive and SessionState are independent and thread-local.&lt;/p&gt;

&lt;p&gt;B. Make Hive consists of the db connection and the conf. Pass Hive as a constructor/initialize parameter to all Tasks (including ExecDriver) and CommandProcessors(including Driver).  Make SessionState  consists of session specific things like stdout, history, and ALSO Hive. CliDriver/HiveServerHandler will use the thread-specific SessionState for all things.  So only SessionState is thread-local (while Hive is part of it).&lt;/p&gt;

&lt;p&gt;C. The same as B, except letting SessionState be a parameter to the constructor of CliDriver/HiveServerHandler. So there is no thread-local storage at all. So nothing is thread-local.&lt;/p&gt;

&lt;p&gt;The benefit shared by all these 3 is that Tasks (including ExecDriver) and CommandProcessors(including Driver) don&apos;t need to deal with Session - they just need a Hive.&lt;/p&gt;

&lt;p&gt;NOTE: All hive operators (at mapper and reducer) should continue to use the configuration that is passed, just to conform to hadoop model.&lt;/p&gt;
</comment>
                            <comment id="12724776" author="prasadc" created="Sat, 27 Jun 2009 00:54:39 +0000"  >&lt;p&gt;I would prefer option A because the other options are not really needed since only one object each of SessionState and Hive are needed at any time for a single thread. Using B and C, means the caller has to pass in these objects and find correct objects.&lt;/p&gt;

&lt;p&gt;But if we need, multiple Hive objects per thread at any point of time then, options B &amp;amp; C are better.&lt;/p&gt;</comment>
                            <comment id="12753517" author="he yongqiang" created="Thu, 10 Sep 2009 09:21:47 +0000"  >&lt;p&gt;Attach a fix with appoach A.&lt;/p&gt;</comment>
                            <comment id="12753813" author="zshao" created="Thu, 10 Sep 2009 21:02:02 +0000"  >&lt;p&gt;@hive-584-2009-9-10.patch:&lt;/p&gt;

&lt;p&gt;nitpick: This function should directly call &quot;hiveDb.remove()&quot;. We don&apos;t want duplicated code.&lt;br/&gt;
public static void closeCurrent()&lt;/p&gt;</comment>
                            <comment id="12753837" author="zshao" created="Thu, 10 Sep 2009 21:51:56 +0000"  >&lt;p&gt;@hive-584-2009-9-10.patch: &lt;/p&gt;

&lt;p&gt;Please remove &quot;SessionState.getDb()&quot; - nobody is calling it, and we should call &quot;Hive.get(conf)&quot; to get the db connection instead.&lt;/p&gt;</comment>
                            <comment id="12753851" author="zshao" created="Thu, 10 Sep 2009 22:06:57 +0000"  >&lt;p&gt;@hive-584-2009-9-10.patch: &lt;/p&gt;

&lt;p&gt;Tested. Once the 2 items above are addressed, I will test again and commit.&lt;/p&gt;</comment>
                            <comment id="12753905" author="he yongqiang" created="Thu, 10 Sep 2009 23:56:10 +0000"  >&lt;p&gt;Integrate Zheng&apos;s comments. Thanks, Zheng. &lt;/p&gt;</comment>
                            <comment id="12753920" author="zshao" created="Fri, 11 Sep 2009 00:29:31 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang!&lt;/p&gt;</comment>
                            <comment id="12754280" author="nzhang" created="Fri, 11 Sep 2009 18:55:04 +0000"  >&lt;p&gt;Just had an offline conversation with Zheng, trying to understand the concepts:&lt;/p&gt;

&lt;p&gt;Life time:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Session is the longest living object. It corresponds to the life time from user connecting to Hive using Hive CLI or Hive Server till closing it.&lt;/li&gt;
	&lt;li&gt;The DB connection life time is the time that Hive connects to the metastore. Currently its life time is always the same as that of the session. But going forward, it could be different since a session could be connecting to different metastores (by providing a different HiveConf). This is useful if there are multiple instances of Hadoop clusters, each of which maintain a different Hive DB.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12434115">HIVE-805</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12431185">HIVE-675</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12409298">HIVE-80</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12428732">HIVE-574</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12411735">HIVE-210</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12419155" name="hive-584-2009-9-10.patch" size="5667" author="he yongqiang" created="Thu, 10 Sep 2009 09:21:47 +0000"/>
                            <attachment id="12419243" name="hive-584-2009-9-11.patch" size="6169" author="he yongqiang" created="Thu, 10 Sep 2009 23:56:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Jun 2009 17:57:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73430</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lamn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122372</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-584&quot; title=&quot;Clean up global and ThreadLocal variables in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-584&quot;&gt;&lt;strike&gt;HIVE-584&lt;/strike&gt;&lt;/a&gt;. Clean up global and ThreadLocal variables in Hive. (Yonqqiang He via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-585] mapjoin may lead to timeouts</title>
                <link>https://issues.apache.org/jira/browse/HIVE-585</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;MapJoin reads the entire mapper-side tables before emitting any output. &lt;br/&gt;
This causes timeouts - &lt;/p&gt;

&lt;p&gt;I can employ similar approach to Script - any other suggestions !!!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429007">HIVE-585</key>
            <summary>mapjoin may lead to timeouts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2009 23:26:18 +0000</created>
                <updated>Sat, 27 Jun 2009 01:33:34 +0000</updated>
                            <resolved>Sat, 27 Jun 2009 01:33:34 +0000</resolved>
                                    <version>0.4.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12724782" author="zshao" created="Sat, 27 Jun 2009 01:14:13 +0000"  >&lt;p&gt;What is the current timeout? Is it 10 minutes?&lt;/p&gt;</comment>
                            <comment id="12724787" author="athusoo" created="Sat, 27 Jun 2009 01:32:45 +0000"  >&lt;p&gt;Write to stderr and use that as a proxy to send progress messages to the jobtracker.&lt;/p&gt;</comment>
                            <comment id="12724788" author="namit" created="Sat, 27 Jun 2009 01:33:34 +0000"  >&lt;p&gt;duplicate of 530&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 27 Jun 2009 01:14:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lamv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122373</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-586] Check and rethrow the exception from ScriptOperator.StreamThread in ScriptOperator.close()</title>
                <link>https://issues.apache.org/jira/browse/HIVE-586</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We are not checking and rethrowing the exception caught in ScriptOperator.StreamThread in ScriptOperator close() (we are already doing it in ScriptOperator process())&lt;br/&gt;
We should do that also in close().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429012">HIVE-586</key>
            <summary>Check and rethrow the exception from ScriptOperator.StreamThread in ScriptOperator.close()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Jun 2009 01:12:41 +0000</created>
                <updated>Sat, 27 Jun 2009 01:12:41 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lanb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-587] Duplicate result from multiple TIPs of the same task</title>
                <link>https://issues.apache.org/jira/browse/HIVE-587</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;On our cluster we found a job committed with duplicate output from different TIPs of the same Task (from FileSinkOperator).&lt;/p&gt;

&lt;p&gt;The reason is that FileSinkOperator.commit can be called at multiple TIPs of the same task.&lt;/p&gt;

&lt;p&gt;FileSinkOperator.jobClose() (which is called at the Hive Client side) should do either:&lt;br/&gt;
A. Get all successful TIPs and only move the output files of those TIPs to the output directory&lt;br/&gt;
B. Ignore TIPs from the JobInProgress, but only move one file out of potentially several output files &lt;/p&gt;

&lt;p&gt;B is preferred because A might be slow (if the job finished and immediately got moved out of the JobTracker memory). Since we control the file name by ourselves, we know exactly what the file names are.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429013">HIVE-587</key>
            <summary>Duplicate result from multiple TIPs of the same task</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Jun 2009 01:38:57 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:31 +0000</updated>
                            <resolved>Mon, 29 Jun 2009 20:43:23 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12725016" author="zshao" created="Mon, 29 Jun 2009 01:25:37 +0000"  >&lt;p&gt;This patch fixes the problem.&lt;/p&gt;</comment>
                            <comment id="12725333" author="namit" created="Mon, 29 Jun 2009 20:32:25 +0000"  >&lt;p&gt;I did not understand the changes in ScriptOperator&lt;/p&gt;</comment>
                            <comment id="12725338" author="namit" created="Mon, 29 Jun 2009 20:43:23 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412031" name="HIVE-587.1.patch" size="10449" author="zshao" created="Mon, 29 Jun 2009 01:25:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jun 2009 20:32:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73428</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lanj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122376</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-588] LIMIT n is slower than it needs to be</title>
                <link>https://issues.apache.org/jira/browse/HIVE-588</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;SELECT a FROM t LIMIT 10;&lt;br/&gt;
...simply prints the output of the first 10 lines of the first file in the database. That&apos;s good.&lt;/p&gt;

&lt;p&gt;However,&lt;br/&gt;
SELECT function(a) FROM t LIMIT 10;&lt;br/&gt;
appears to send all of t to the mappers, runs the function, and and then returns the first 10 rows from whatever mapper(s) finish first. This is very slow in some cases!&lt;/p&gt;

&lt;p&gt;Appropriate behavior for LIMIT would be to use ONE mapper, and to push files from the table into that mapper, and then auto-kill the mapper once it has output 10 rows...just take the first 10 rows and kill the whole task if necessary. On dying, throw some informative error message like, &quot;Dying intentionally; LIMIT has been reached.&quot; This should be the case even for TRANSFORMs in the mapper...the TRANSFORM could spit out 20 rows, but once it has split out 10, the whole task should die and the 10 should be returned immediately.&lt;/p&gt;

&lt;p&gt;The purpose of LIMIT is not just to have &quot;only one response,&quot; but it&apos;s also to speed up queries a whole lot. Running the function over the entire table is a big waste.&lt;/p&gt;

&lt;p&gt;Obviously, when a reduce step is necessary, the whole table will have to be pushed through mappers and then copied and then sorted--but in those cases, whenever 10 total rows have been output by any reducer(s), at which point all reduce tasks should be killed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429032">HIVE-588</key>
            <summary>LIMIT n is slower than it needs to be</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Jun 2009 22:06:52 +0000</created>
                <updated>Wed, 16 Dec 2009 17:18:07 +0000</updated>
                            <resolved>Wed, 16 Dec 2009 17:18:07 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12731253" author="he yongqiang" created="Wed, 15 Jul 2009 03:14:19 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;SELECT a FROM t LIMIT 10;&lt;br/&gt;
&amp;gt;&amp;gt;...simply prints the output of the first 10 lines of the first file in the database. That&apos;s good. &lt;br/&gt;
It seems this also requires a map-reduce job to scan the table.&lt;/p&gt;</comment>
                            <comment id="12731256" author="rsm" created="Wed, 15 Jul 2009 03:19:51 +0000"  >&lt;p&gt;Only queries of the following form dont require a map-reduce job.&lt;/p&gt;

&lt;p&gt;SELECT * FROM table WHERE predicate_with_only_partition_columns &lt;span class=&quot;error&quot;&gt;&amp;#91;LIMIT x&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="12731263" author="akramer" created="Wed, 15 Jul 2009 04:26:02 +0000"  >&lt;p&gt;This is because * allows you to output whole rows at a time, while specifying columns requires that rows be split and then certain indices returned, hence a map job. That&apos;s reasonable, but really, this could be optimized as well for straight-up selects with no transform necessary.&lt;/p&gt;

&lt;p&gt;But at least, when any mapper has printed 10 rows, Hive should print those 10 rows and kill the rest of the job.&lt;/p&gt;</comment>
                            <comment id="12731274" author="namit" created="Wed, 15 Jul 2009 05:20:33 +0000"  >&lt;p&gt;Different mappers dont communicate with each other - so all mappers are stopped after emitting 10 rows. &lt;/p&gt;</comment>
                            <comment id="12731277" author="he yongqiang" created="Wed, 15 Jul 2009 05:23:46 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;when any mapper has printed 10 rows, Hive should print those 10 rows and kill the rest of the job&lt;br/&gt;
it is not easy to implement with current hadoop map-reduce. You can not kill a whole job inside some mapper. &lt;br/&gt;
And hive does not know when enough rows have been collected. &lt;br/&gt;
Even though hive use a done flag to note the mapper&apos;s job is finished, the split scan for that mapper is not stopped. And new kv pairs are fed in to the mapper and are simply discarded when the done flag in mapper is set. &lt;/p&gt;

&lt;p&gt;I think a workaroud would be:&lt;br/&gt;
1) file an issue in mapreduce to add the ability to let a mapper and thus maprunner terminate itself when some done flag is set&lt;br/&gt;
or&lt;br/&gt;
2) extend a maprunner in hive to do the same, because issue in map-reduce may need a long time to review, commit, release etc.&lt;/p&gt;

&lt;p&gt;Even though the ability of terminating mapper is added, we can not share a global flag among all mappers. In order to do that, i think one potential method would be to narrow the mappers&apos; number and thus a larger split is fed for each mapper (we will only need to touch a small piece of the whole split).  &lt;/p&gt;</comment>
                            <comment id="12791453" author="namit" created="Wed, 16 Dec 2009 17:18:07 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-908&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-908&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12439455">HIVE-908</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jul 2009 03:14:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73427</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lanr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122377</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-589] Clean up &quot;abort&quot; logic in ExecMapper and ExecReducer.close().</title>
                <link>https://issues.apache.org/jira/browse/HIVE-589</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The &quot;abort&quot; logic is pretty complicated.  &lt;/p&gt;

&lt;p&gt;Instead of doing what we are doing now, we just need to wrap any Exception thrown from close() with an IOException(). Then it will be ignored by mapreduce framework in case this is a mandatory close() (close() in case there are exception thrown earlier).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429056">HIVE-589</key>
            <summary>Clean up &quot;abort&quot; logic in ExecMapper and ExecReducer.close().</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2009 00:43:26 +0000</created>
                <updated>Mon, 29 Jun 2009 00:43:26 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08osv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-590] Pass type information in genFileSinkPlan</title>
                <link>https://issues.apache.org/jira/browse/HIVE-590</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Right now only column names are being passed between semanticanalyzer and fetchtask. Once type information is passed, we can use LazySerDe to serialize the data (into json) in Driver.getResults().&lt;/p&gt;

&lt;p&gt;Driver.getSchema() should then return a new thrift type ResultSchema instead of String:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;struct ResultSchema {
  &lt;span class=&quot;code-comment&quot;&gt;// column names, types, comments
&lt;/span&gt; 1: list&amp;lt;hive_metastore.FieldSchema&amp;gt; fieldSchemas,
 &lt;span class=&quot;code-comment&quot;&gt;// delimiters etc
&lt;/span&gt; 2: map&amp;lt;string, string&amp;gt; properties
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once this is done, the jdbc client can instantiate a simplified serde from the ResultSchema and parse the query results.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429118">HIVE-590</key>
            <summary>Pass type information in genFileSinkPlan</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2009 19:25:11 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:53 +0000</updated>
                            <resolved>Thu, 2 Jul 2009 16:27:45 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12725347" author="namit" created="Mon, 29 Jun 2009 21:05:26 +0000"  >&lt;p&gt;This has the following requirements:&lt;/p&gt;

&lt;p&gt;1. Pass the type info. in getFileSinkPlan&lt;br/&gt;
2. Enhance LazySerde to use json to serialize for complex types under certain conditions&lt;br/&gt;
3. Return a new thrift type instead of string from Driver.getSchema()&lt;/p&gt;</comment>
                            <comment id="12726268" author="rsm" created="Wed, 1 Jul 2009 23:26:54 +0000"  >&lt;p&gt;changes look good for the most part. a few comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;we should provide an additional method in HiveInterface.java which returns a SerDe given a Schema. If we implement it once - we can reuse it in all the tests and in HiveResultSet.java instead of duplicating the serde creation logic everywhere (including the dsp.setProperty() calls). We can choose to do it in a later jira.&lt;/li&gt;
	&lt;li&gt;use standard name for get method:   public boolean isUseJSONSerialize() {&lt;/li&gt;
	&lt;li&gt;includes unnecessary changes to test results&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12726277" author="namit" created="Thu, 2 Jul 2009 00:10:44 +0000"  >&lt;p&gt; 1. Will do in a follow-up&lt;br/&gt;
 2. will do&lt;br/&gt;
 3. All those results have changed - since the plan has changed. There is no extra stuff &lt;/p&gt;</comment>
                            <comment id="12726279" author="namit" created="Thu, 2 Jul 2009 00:14:29 +0000"  >&lt;p&gt;2. I am already using a standard name - it was generated by eclipse&lt;/p&gt;</comment>
                            <comment id="12726312" author="namit" created="Thu, 2 Jul 2009 04:09:08 +0000"  >&lt;p&gt;resolved conflicts with 136&lt;/p&gt;</comment>
                            <comment id="12726536" author="rsm" created="Thu, 2 Jul 2009 16:27:45 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                            <comment id="12726569" author="prasadc" created="Thu, 2 Jul 2009 17:34:33 +0000"  >&lt;p&gt;I don&apos;t think the new Schema object should be in metastore as it is not going to be used by it. There is no corresponding object in metadb. It will be used only by HiveServer so it should be in the thrift interface of HiveServer. Namit and I had a chat about it and he agreed to move it there.&lt;/p&gt;</comment>
                            <comment id="12726572" author="prasadc" created="Thu, 2 Jul 2009 17:36:04 +0000"  >&lt;p&gt;IMO, HiveServer should return a Table object for the results set instead of this new object.&lt;/p&gt;</comment>
                            <comment id="12726576" author="rsm" created="Thu, 2 Jul 2009 17:50:34 +0000"  >&lt;p&gt;In most cases, HiveServer is called to get information about SELECT queries which dont create tables. Also, these transient query results dont have partitionkeys, bucketcols, sortcols etc. So a Table object seems to be an overkill. &lt;/p&gt;

&lt;p&gt;I do agree that we should support a getTableObject or some such metastore api call which returns the Table object for a table in the warehouse. This call can then be used instead of doing a &apos;describe extended&apos; query on a table and parsing that blob that gets returned.&lt;/p&gt;</comment>
                            <comment id="12726586" author="prasadc" created="Thu, 2 Jul 2009 17:59:24 +0000"  >&lt;p&gt;well, there is get_table() call that returns Table object. You can use that one.&lt;/p&gt;</comment>
                            <comment id="12726688" author="rsm" created="Thu, 2 Jul 2009 21:23:34 +0000"  >&lt;p&gt;Moving discussion to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-604&quot; title=&quot;remove Schema from metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-604&quot;&gt;HIVE-604&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412328" name="hive.590.1.patch" size="344992" author="namit" created="Wed, 1 Jul 2009 21:59:30 +0000"/>
                            <attachment id="12412353" name="hive.590.2.patch" size="341778" author="namit" created="Thu, 2 Jul 2009 04:09:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jun 2009 21:05:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lanz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Pass type information in genFileSinkPlan and improve getSchema call in Driver. (Namit Jain via rmurthy)&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-591] create new type of join ( 1 row for a given key from multiple tables) (UNIQUEJOIN)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-591</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It will be useful to support a new type of join:&lt;/p&gt;

&lt;p&gt;say:&lt;/p&gt;

&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;select .. from JOIN TABLES (A,B,C) WITH KEYS (A.key, B.key, C.key) where ....&lt;/p&gt;


&lt;p&gt;The semantics are that for a given key only 1 row is created - nulls are present for the the tables which do not contain a row for that key.&lt;br/&gt;
There is no limit on the number of tables, the number of keys should be the same as the number of tables.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429126">HIVE-591</key>
            <summary>create new type of join ( 1 row for a given key from multiple tables) (UNIQUEJOIN)</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eibrishimov">Emil Ibrishimov</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2009 21:15:36 +0000</created>
                <updated>Fri, 28 Jul 2017 03:20:16 +0000</updated>
                            <resolved>Thu, 10 Sep 2009 18:59:23 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12725357" author="rsm" created="Mon, 29 Jun 2009 21:22:20 +0000"  >&lt;p&gt;It might be better to associate the keys with the tables explicitly instead of implicitly via ordering. How about something like:&lt;/p&gt;

&lt;p&gt;SELECT ... FROM UNIQUEJOIN A(expr_with_A_cols), B(expr_with_B_cols), C(expr_with_C_cols) WHERE ...&lt;/p&gt;

&lt;p&gt;expr_with_&amp;lt;TAB&amp;gt;_cols will be the join key for the corresponding &amp;lt;TAB&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12725359" author="namit" created="Mon, 29 Jun 2009 21:25:28 +0000"  >&lt;p&gt;We can be closer to the current syntax::&lt;/p&gt;

&lt;p&gt;SELECT ... FROM A(expr_with_A_cols) UNIQUEJOIN  B(expr_with_B_cols) UNIQUEJOIN  C(expr_with_C_cols) WHERE ...&lt;/p&gt;</comment>
                            <comment id="12725367" author="rsm" created="Mon, 29 Jun 2009 22:01:44 +0000"  >&lt;p&gt;Well your syntax seems to indicate that UNIQUEJOIN is a binary operator - even though its not.&lt;/p&gt;</comment>
                            <comment id="12732627" author="namit" created="Fri, 17 Jul 2009 17:47:53 +0000"  >&lt;p&gt;I agree - &lt;/p&gt;

&lt;p&gt;SELECT ... FROM UNIQUEJOIN A(expr_with_A_cols), B(expr_with_B_cols), C(expr_with_C_cols) WHERE ...&lt;br/&gt;
expr_with_&amp;lt;TAB&amp;gt;_cols will be the join key for the corresponding &amp;lt;TAB&amp;gt;&lt;/p&gt;

&lt;p&gt;might be better&lt;/p&gt;</comment>
                            <comment id="12732668" author="prasadc" created="Fri, 17 Jul 2009 18:31:30 +0000"  >&lt;p&gt;this means that user will not be able to add unrelated predicates in the join clause similar to what can be done in regular join. wouldn&apos;t that be a good thing to have?&lt;/p&gt;</comment>
                            <comment id="12732704" author="namit" created="Fri, 17 Jul 2009 19:48:32 +0000"  >&lt;p&gt;But the workaround is to put the unrelated predicate in a subquery and then join&lt;/p&gt;</comment>
                            <comment id="12740438" author="akramer" created="Fri, 7 Aug 2009 07:44:47 +0000"  >&lt;p&gt;The other thing missing from this syntax is joining on multiple keys.&lt;/p&gt;

&lt;p&gt;So, ...FROM UNIQUEJOIN A(a.c1,a.c2), B(b.c1,b.c2), C(c.c1,c.c2) WHERE... would be very very useful in this implementation, matching all of the cited columns conjunctively.&lt;/p&gt;

&lt;p&gt;Also, is there any reason this needs to be trinary? Would it be possible to make this n-ary? I could see wanting to join 4 or 5 tables.&lt;/p&gt;</comment>
                            <comment id="12740457" author="rsm" created="Fri, 7 Aug 2009 09:09:42 +0000"  >&lt;p&gt;@Adam, i guess the plan is to support join on multiple keys. Also, the operator is not ternary, it is n-ary - just that we used only 3 tables in the examples.&lt;/p&gt;</comment>
                            <comment id="12752808" author="eibrishimov" created="Tue, 8 Sep 2009 22:50:25 +0000"  >&lt;p&gt;To support the Hive1 syntax, we will add a PRESERVE keyword to specify which tables to preserve.&lt;br/&gt;
For example, to preserve tables A and C:&lt;br/&gt;
FROM UNIQUEJOIN A(a.c1,a.c2) PRESERVE, B(b.c1,b.c2), C(c.c1,c.c2) PRESERVE...&lt;/p&gt;

&lt;p&gt;The sources of UNIQUEJOINs can only be tables (no subquery support for now)&lt;/p&gt;</comment>
                            <comment id="12753365" author="eibrishimov" created="Thu, 10 Sep 2009 01:30:15 +0000"  >&lt;p&gt;Simplified the main methods.&lt;/p&gt;

&lt;p&gt;Added PRESERVED, only the syntax is now:&lt;br/&gt;
UNIQUEJOIN PRESERVE T1 a (a.key), PRESERVE T2 b (b.key) ...&lt;/p&gt;

&lt;p&gt;Added some more tests&lt;/p&gt;</comment>
                            <comment id="12753372" author="namit" created="Thu, 10 Sep 2009 01:46:12 +0000"  >&lt;p&gt;1. Can you add more tests: one in which the join key is a expression ?&lt;/p&gt;</comment>
                            <comment id="12753375" author="eibrishimov" created="Thu, 10 Sep 2009 01:57:04 +0000"  >&lt;p&gt;Added.&lt;br/&gt;
Thank you&lt;/p&gt;</comment>
                            <comment id="12753380" author="namit" created="Thu, 10 Sep 2009 02:08:50 +0000"  >&lt;p&gt;SemanticAnalyzer.java:&lt;/p&gt;

&lt;p&gt;The following lines are not needed&lt;/p&gt;


&lt;p&gt;3079		  if(opParseCtx == null) throw new SemanticException(&quot;ctx&quot;);&lt;br/&gt;
3080 		  if(child == null) throw new SemanticException(&quot;diteto&quot;);&lt;br/&gt;
3081 		  if(opParseCtx.get(child) == null) throw new SemanticException(&quot;child &quot;+child.toString());&lt;/p&gt;

&lt;p&gt;Can you add more comments in CommonJoinOperator about the semantics of preserve etc. ?&lt;/p&gt;

&lt;p&gt;Otherwise, it looks good&lt;/p&gt;</comment>
                            <comment id="12753771" author="namit" created="Thu, 10 Sep 2009 18:59:23 +0000"  >&lt;p&gt;Committed. Thanks Emil&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12418965" name="HIVE-591.1.patch" size="15870" author="eibrishimov" created="Tue, 8 Sep 2009 20:46:17 +0000"/>
                            <attachment id="12419121" name="HIVE-591.2.patch" size="22309" author="eibrishimov" created="Thu, 10 Sep 2009 01:30:15 +0000"/>
                            <attachment id="12419122" name="HIVE-591.3.patch" size="22644" author="eibrishimov" created="Thu, 10 Sep 2009 01:57:04 +0000"/>
                            <attachment id="12419135" name="HIVE-591.4.patch" size="22245" author="eibrishimov" created="Thu, 10 Sep 2009 04:24:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jun 2009 21:22:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73425</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lao7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122379</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-592] renaming internal table should rename HDFS and also change path of the table and partitions accordingly.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-592</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;rename table changes just the name of the table in metastore but not hdfs. so if a table with old name is created, it uses the hdfs directory pointing to the renamed table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429128">HIVE-592</key>
            <summary>renaming internal table should rename HDFS and also change path of the table and partitions accordingly.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2009 21:22:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:15 +0000</updated>
                            <resolved>Sun, 19 Jul 2009 00:19:07 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12730698" author="prasadc" created="Tue, 14 Jul 2009 05:27:57 +0000"  >&lt;p&gt;fix is little bit involved since we don&apos;t want to overwrite existing data.&lt;/p&gt;</comment>
                            <comment id="12731311" author="zshao" created="Wed, 15 Jul 2009 07:17:52 +0000"  >&lt;p&gt;Can you remove MIndex.java? I think it belongs to a different transaction?&lt;/p&gt;</comment>
                            <comment id="12731324" author="prasadc" created="Wed, 15 Jul 2009 07:41:38 +0000"  >&lt;p&gt;here is the updated file&lt;/p&gt;</comment>
                            <comment id="12731815" author="prasadc" created="Thu, 16 Jul 2009 05:39:07 +0000"  >&lt;p&gt;this patch changes the way &apos;alter table old_tbl_name rename to new_tbl_name&apos; behaves which is quite different from before and may affect users that depend on older functionality.&lt;/p&gt;

&lt;p&gt;older behavior:&lt;br/&gt;
just the table name is changed but the underlying hdfs location (&amp;lt;warehouse_root&amp;gt;/old_tbl) is unchanged.&lt;/p&gt;


&lt;p&gt;new behavior:&lt;br/&gt;
following changed on a rename for tables that are not created as external tables&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;table name&lt;/li&gt;
	&lt;li&gt;move underlying data from &amp;lt;warehouse_root&amp;gt;/old_tbl to &amp;lt;warehouse_root&amp;gt;/new_tbl&lt;/li&gt;
	&lt;li&gt;location of table in metadata&lt;/li&gt;
	&lt;li&gt;location of partitions in metadata&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;rename fails in the following scenarios&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a table with a new name already exists&lt;/li&gt;
	&lt;li&gt;&amp;lt;warehouse_root&amp;gt;/new_tbl already exists or can&apos;t be created&lt;/li&gt;
	&lt;li&gt;&amp;lt;warehouse_root&amp;gt;/old_tbl is not accessible&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12732950" author="zshao" created="Sun, 19 Jul 2009 00:19:07 +0000"  >&lt;p&gt;Committed. Thanks Prasad.&lt;/p&gt;</comment>
                            <comment id="12806142" author="zshao" created="Thu, 28 Jan 2010 22:52:53 +0000"  >&lt;p&gt;Tried renaming table on both branch-0.4 and branch-0.5. Both worked as expected (locations are modified).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12423754">HIVE-445</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12422908">HIVE-419</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12446926">HIVE-1116</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12413382" name="hive-592.2.patch" size="34956" author="prasadc" created="Tue, 14 Jul 2009 05:27:10 +0000"/>
                            <attachment id="12413530" name="hive-592.3.patch" size="28842" author="prasadc" created="Wed, 15 Jul 2009 07:41:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jul 2009 07:17:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73424</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122380</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-592&quot; title=&quot;renaming internal table should rename HDFS and also change path of the table and partitions accordingly.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-592&quot;&gt;&lt;strike&gt;HIVE-592&lt;/strike&gt;&lt;/a&gt;. Renaming internal table should rename HDFS. (Prasad Chakka via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-593] UDF and GenericUDF clean-up</title>
                <link>https://issues.apache.org/jira/browse/HIVE-593</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We should deprecate ExprNodeIndexEvaluator and ExprNodeFieldEvaluator and use GenericUDF.&lt;br/&gt;
We should also clean up ExprNodeFuncEvaluator - there are a lot of hacks to be removed (hacks to get map, list and struct to work)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429145">HIVE-593</key>
            <summary>UDF and GenericUDF clean-up</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 01:24:44 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:13 +0000</updated>
                            <resolved>Thu, 2 Jul 2009 23:47:37 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12726227" author="zshao" created="Wed, 1 Jul 2009 21:03:49 +0000"  >&lt;p&gt;This patch replaces exprNodeIndexDesc and exprNodeIndexEvaluator with GenericUDF &quot;index&quot;.&lt;/p&gt;

&lt;p&gt;The removal of exprNodeFieldDesc will require some additional work (mainly that we need to serialize the field name together with the GenericUDF, but currently, GenericUDF is not serializable). I think we should move that to a separate JIRA, in which we will make GenericUDF optional implement Serializable, so that we can store compile-time information for use at the runtime.&lt;/p&gt;</comment>
                            <comment id="12726466" author="he yongqiang" created="Thu, 2 Jul 2009 12:56:06 +0000"  >&lt;p&gt;there is one error in line 97 of GenericUDFIndex, isWritable is not defined.&lt;/p&gt;</comment>
                            <comment id="12726591" author="zshao" created="Thu, 2 Jul 2009 18:03:10 +0000"  >&lt;p&gt;Updated with trunk and fixed the problem.&lt;/p&gt;</comment>
                            <comment id="12726702" author="prasadc" created="Thu, 2 Jul 2009 21:56:06 +0000"  >&lt;p&gt;looks good. submit once tests are passed.&lt;/p&gt;</comment>
                            <comment id="12726738" author="prasadc" created="Thu, 2 Jul 2009 23:47:37 +0000"  >&lt;p&gt;Thanks Zheng.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412316" name="HIVE-593.1.patch" size="59689" author="zshao" created="Wed, 1 Jul 2009 21:03:49 +0000"/>
                            <attachment id="12412410" name="HIVE-593.2.patch" size="59253" author="zshao" created="Thu, 2 Jul 2009 18:03:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Jul 2009 12:56:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73423</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122382</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-594] Add &quot;isNull&quot;, &quot;hashCode&quot;, &quot;equals&quot;, &quot;compareTo&quot; to ObjectInspector</title>
                <link>https://issues.apache.org/jira/browse/HIVE-594</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ObjectInspector should delegate all methods of the object, including &quot;isNull&quot;, &quot;hashCode&quot;, &quot;equals&quot;, &quot;compareTo&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429146">HIVE-594</key>
            <summary>Add &quot;isNull&quot;, &quot;hashCode&quot;, &quot;equals&quot;, &quot;compareTo&quot; to ObjectInspector</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 01:27:00 +0000</created>
                <updated>Fri, 29 Oct 2010 22:59:51 +0000</updated>
                                            <version>0.3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12732363" author="zshao" created="Fri, 17 Jul 2009 06:20:11 +0000"  >&lt;p&gt;Without this, we could not do complete object reuse.&lt;/p&gt;

&lt;p&gt;For example, if all columns in the first row are non-null, we need to create objects for each of the column.&lt;br/&gt;
Then the second row comes in and all columns are null, so we have to set all fields in the row object to &quot;null&quot;.&lt;br/&gt;
Then the third row comes in and all columns are non-null, we need to create new objects again.&lt;/p&gt;

&lt;p&gt;LazySimpleSerDe has a hack to avoid this by adding a special function &quot;getObject()&quot;.&lt;/p&gt;

&lt;p&gt;With &quot;isNull&quot; added to ObjectInspector, we don&apos;t need to set the field in the row object to null, instead, we can set a bit inside the field object so that it knows it is a null.&lt;/p&gt;


&lt;p&gt;We will need to replace the logic &quot;xxx == null&quot; and &quot;xxx != null&quot; in the code (Mainly, GenericUDFOPNull and GeneircUDFOPNonNull).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12430534">HIVE-640</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42793</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08odj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48548</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-595] copyFiles does not report errors in file rename operations</title>
                <link>https://issues.apache.org/jira/browse/HIVE-595</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ql/../Hive.java:copyFiles() does not catch failures reported by fs.rename. this may cause load commands to look successful when they actually failed&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429150">HIVE-595</key>
            <summary>copyFiles does not report errors in file rename operations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 03:05:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:42 +0000</updated>
                            <resolved>Fri, 18 Dec 2009 19:21:29 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12792264" author="zshao" created="Fri, 18 Dec 2009 01:07:31 +0000"  >&lt;p&gt;ql/../Hive.java:copyFiles()&lt;br/&gt;
Line number: 745&lt;/p&gt;</comment>
                            <comment id="12792544" author="namit" created="Fri, 18 Dec 2009 17:51:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12792597" author="namit" created="Fri, 18 Dec 2009 19:21:28 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12428396" name="HIVE-595.1.patch" size="852" author="zshao" created="Fri, 18 Dec 2009 04:22:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Dec 2009 01:07:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lap3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-596] parition pruning not working will nulls</title>
                <link>https://issues.apache.org/jira/browse/HIVE-596</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12429221">HIVE-596</key>
            <summary>parition pruning not working will nulls</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 19:16:33 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:14 +0000</updated>
                            <resolved>Tue, 30 Jun 2009 22:02:00 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12725756" author="zshao" created="Tue, 30 Jun 2009 19:23:31 +0000"  >&lt;p&gt;Code looks good. It might be good to add a test case for this.&lt;/p&gt;</comment>
                            <comment id="12725758" author="namit" created="Tue, 30 Jun 2009 19:27:55 +0000"  >&lt;p&gt;added test&lt;/p&gt;</comment>
                            <comment id="12725760" author="prasadc" created="Tue, 30 Jun 2009 19:28:44 +0000"  >&lt;p&gt;and also a comment as to what was the problem and the fix will be nice. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12725762" author="namit" created="Tue, 30 Jun 2009 19:30:27 +0000"  >&lt;p&gt;is null, null etc. were moved to generic udfs recently.&lt;br/&gt;
PartitionPruner had special handling for udfs, but not for generic udfs - Due to that, it was missing some parititions for queries like:&lt;/p&gt;

&lt;p&gt;select * from T where &amp;lt;part_col&amp;gt; = &apos;val1&apos; and col2 is not null;&lt;/p&gt;</comment>
                            <comment id="12725763" author="zshao" created="Tue, 30 Jun 2009 19:35:34 +0000"  >&lt;p&gt;+1. Testing. Will commit when passed.&lt;/p&gt;</comment>
                            <comment id="12725829" author="zshao" created="Tue, 30 Jun 2009 22:02:00 +0000"  >&lt;p&gt;Committed. Thanks Namit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412193" name="hive.596.1.patch" size="2902" author="namit" created="Tue, 30 Jun 2009 19:20:20 +0000"/>
                            <attachment id="12412194" name="hive.596.2.patch" size="35197" author="namit" created="Tue, 30 Jun 2009 19:27:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Jun 2009 19:23:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lapb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-596&quot; title=&quot;parition pruning not working will nulls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-596&quot;&gt;&lt;strike&gt;HIVE-596&lt;/strike&gt;&lt;/a&gt;. Fix PartitionPruner to work with GenericUDF. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-597] jdbc/src/java/org/apache/hadoop/hive/jdbc do not have the apache header</title>
                <link>https://issues.apache.org/jira/browse/HIVE-597</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12429233">HIVE-597</key>
            <summary>jdbc/src/java/org/apache/hadoop/hive/jdbc do not have the apache header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 21:09:34 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:46 +0000</updated>
                            <resolved>Mon, 10 Aug 2009 15:36:05 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12741031" author="rsm" created="Sun, 9 Aug 2009 06:08:14 +0000"  >&lt;p&gt;added license.&lt;/p&gt;</comment>
                            <comment id="12741328" author="namit" created="Mon, 10 Aug 2009 14:03:37 +0000"  >&lt;p&gt;+1&lt;/p&gt;


&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12741376" author="namit" created="Mon, 10 Aug 2009 15:36:05 +0000"  >&lt;p&gt;Committed. Thanks Raghu&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415982" name="hive-597.1.patch" size="12193" author="rsm" created="Sun, 9 Aug 2009 06:08:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 9 Aug 2009 06:08:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lapj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122385</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-598] Clean up ObjectInspectorFactory</title>
                <link>https://issues.apache.org/jira/browse/HIVE-598</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ObjectInspectorFactory.getReflectionObjectInspector was trying to support recursive types (which was never used).&lt;br/&gt;
We should clean it up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429241">HIVE-598</key>
            <summary>Clean up ObjectInspectorFactory</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 23:18:25 +0000</created>
                <updated>Fri, 29 Oct 2010 22:59:23 +0000</updated>
                                            <version>0.3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08oov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
