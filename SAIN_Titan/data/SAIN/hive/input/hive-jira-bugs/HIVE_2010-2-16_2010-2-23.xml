<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:15:22 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2010-2-16+AND+created+%3C%3D+2010-2-23+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="15" total="15"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-1174] Fix job counter error if &quot;hive.merge.mapfiles&quot; equals true</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1174</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;if hive.merge.mapfiles is set to true, the job counter will go to 3.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456472">HIVE-1174</key>
            <summary>Fix job counter error if &quot;hive.merge.mapfiles&quot; equals true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Feb 2010 19:40:14 +0000</created>
                <updated>Sat, 17 Dec 2011 00:04:01 +0000</updated>
                            <resolved>Wed, 17 Feb 2010 03:52:16 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12834529" author="zshao" created="Tue, 16 Feb 2010 22:41:04 +0000"  >&lt;p&gt;+1. Will test and commit.&lt;/p&gt;</comment>
                            <comment id="12834536" author="he yongqiang" created="Tue, 16 Feb 2010 23:01:11 +0000"  >&lt;p&gt;The problem in this jira is:&lt;br/&gt;
1) countJobs in Driver only count map-reduce tasks. &lt;br/&gt;
2) For mergeJob, there are two tasks (one dummyMove, and one merge task which is a MRTask). It will count 1 job because dummyMove is not a MapReduceTask&lt;br/&gt;
3) But a bug in ConditionalTask will  always inc jobCounter by 1 when removing a task from candidate task list, even though it is not a MRTask,&lt;/p&gt;</comment>
                            <comment id="12834629" author="zshao" created="Wed, 17 Feb 2010 03:52:16 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436031" name="hive-1174.1.patch" size="763" author="he yongqiang" created="Tue, 16 Feb 2010 21:31:03 +0000"/>
                            <attachment id="12436048" name="hive-1174.2.patch" size="786" author="he yongqiang" created="Tue, 16 Feb 2010 22:38:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Feb 2010 22:41:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1175] Enable automatic patch testing on Hudson</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1175</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;http://developer.yahoo.net/blogs/hadoop/2007/12/if_it_hurts_automate_it_1.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://developer.yahoo.net/blogs/hadoop/2007/12/if_it_hurts_automate_it_1.html&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12456508">HIVE-1175</key>
            <summary>Enable automatic patch testing on Hudson</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                            <label>test-patch</label>
                    </labels>
                <created>Wed, 17 Feb 2010 05:06:28 +0000</created>
                <updated>Mon, 8 Sep 2014 08:39:29 +0000</updated>
                            <resolved>Mon, 8 Sep 2014 08:39:29 +0000</resolved>
                                                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12834651" author="cwsteinbach" created="Wed, 17 Feb 2010 05:45:40 +0000"  >&lt;p&gt;The test-patch.sh script lives here: &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/core/nightly/test-patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/core/nightly/test-patch&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;We will need to configure svn:externals in order to get this pull in as part of hive trunk.&lt;/p&gt;

&lt;p&gt;Something like this:&lt;/p&gt;

&lt;p&gt;Check out hive trunk&lt;br/&gt;
cd &amp;lt;hive-trunk&amp;gt;&lt;br/&gt;
export EDITOR=emacs&lt;br/&gt;
svn propedit svn:externals testutils&lt;br/&gt;
[ the above step will open up the emacs. Type in the following line and save it]&lt;br/&gt;
test-patch &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/nightly/test-patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/nightly/test-patch&lt;/a&gt;&lt;br/&gt;
svn commit&lt;/p&gt;</comment>
                            <comment id="12890528" author="cwsteinbach" created="Wed, 21 Jul 2010 01:59:48 +0000"  >&lt;p&gt;Here&apos;s Nigel&apos;s original blog post describing the automatic patch testing setup for Hadoop: &lt;a href=&quot;http://developer.yahoo.net/blogs/hadoop/2007/12/if_it_hurts_automate_it_1.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://developer.yahoo.net/blogs/hadoop/2007/12/if_it_hurts_automate_it_1.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;All the Jira state changes are sent to the Hadoop mailing list. A daemon on the build machine is subscribed to the mailing list and processes the mail using the &lt;a href=&quot;https://svn.apache.org/viewvc/hadoop/nightly/processHadoopPatchEmail.sh?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;processHadoopPatchEmail.sh&lt;/a&gt; script. The patch &quot;queue&quot; created by that script is administered by the &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/Hadoop/job/Hadoop-Patch-Admin/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Hadoop-Patch-Admin&lt;/a&gt; build which runs the &lt;a href=&quot;http://svn.apache.org/viewvc/hadoop/nightly/hudsonPatchQueueAdmin.sh?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hudsonPatchQueueAdmin.sh&lt;/a&gt; script every few minutes. When there is a patch to test, the &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/Hadoop/job/Hadoop-Patch/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Hadoop-Patch&lt;/a&gt; build is kicked off running the &lt;a href=&quot;http://svn.apache.org/viewvc/hadoop/nightly/hudsonBuildHadoopPatch.sh?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hudsonBuildHadoopPatch.sh&lt;/a&gt; script.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m planning to adapt Pig&apos;s &lt;a href=&quot;https://svn.apache.org/viewvc/hadoop/pig/trunk/test/bin/test-patch.sh?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;test-patch.sh&lt;/a&gt; script and their test-patch specific ant targets to Hive, but it&apos;s clear we&apos;ll need to add some new Hudson jobs similar to the ones that Pig has, e.g. &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/Pig/job/Pig-Patch-Admin/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Pig-Patch-Admin&lt;/a&gt; and &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/Pig/job/Pig-Patch-h7.grid.sp2.yahoo.net/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Pig-Patch-h7.grid.sp2&lt;/a&gt;. Can someone with Hudson admin access please take a look at these jobs and try to determine whether or not it&apos;s feasible to set this up for Hive?&lt;/p&gt;
</comment>
                            <comment id="12890844" author="jvs" created="Wed, 21 Jul 2010 19:29:02 +0000"  >&lt;p&gt;Added Johan as watcher since I think he manages the Hudson setup.&lt;/p&gt;</comment>
                            <comment id="14125310" author="lars_francke" created="Mon, 8 Sep 2014 08:39:29 +0000"  >&lt;p&gt;The original link doesn&apos;t work anymore but from the title I assume that&apos;s already been fixed by the &quot;Hive QA&quot; bot.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 21 Jul 2010 19:29:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42600</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122886</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1176] &apos;create if not exists&apos; fails for a table name with &apos;select&apos; in it</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1176</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive&amp;gt; create table if not exists tmp_select(s string, c string, n int);&lt;br/&gt;
org.apache.hadoop.hive.ql.metadata.HiveException: MetaException(message:Got exception: javax.jdo.JDOUserException JDOQL Single-String query should always start with SELECT)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.metadata.Hive.getTablesForDb(Hive.java:441)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByPattern(Hive.java:423)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeCreateTable(SemanticAnalyzer.java:5538)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5192)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:287)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Caused by: MetaException(message:Got exception: javax.jdo.JDOUserException JDOQL Single-String query should always start with SELECT)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.MetaStoreUtils.logAndThrowMetaException(MetaStoreUtils.java:612)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:450)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.metadata.Hive.getTablesForDb(Hive.java:439)&lt;br/&gt;
        ... 15 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456570">HIVE-1176</key>
            <summary>&apos;create if not exists&apos; fails for a table name with &apos;select&apos; in it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aprabhakar">Arvind Prabhakar</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2010 18:15:00 +0000</created>
                <updated>Thu, 2 May 2013 02:29:33 +0000</updated>
                            <resolved>Thu, 24 Jun 2010 05:23:29 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Metastore</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12835323" author="athusoo" created="Thu, 18 Feb 2010 18:28:30 +0000"  >&lt;p&gt;Can you provide a reproducible test case for this bug?&lt;/p&gt;</comment>
                            <comment id="12835324" author="athusoo" created="Thu, 18 Feb 2010 18:31:43 +0000"  >&lt;p&gt;my bad. There is already a test case &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12858616" author="aprabhakar" created="Mon, 19 Apr 2010 18:15:03 +0000"  >&lt;p&gt;This problem is due to &lt;a href=&quot;http://www.jpox.org/servlet/jira/browse/NUCCORE-427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;a bug in Datanucleus JDOQL&lt;/a&gt; implementation and has been fixed in version 2.0.x.&lt;/p&gt;

&lt;p&gt;The fix is therefore to upgrade datanucleus plugins to the latest stable release.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Details:&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Replaced the old datanucleus plugins version 1.1.2 with the latest stable release.&lt;/li&gt;
	&lt;li&gt;Updated jdo2-api library with the version required by datanucleus - 2.3-0ec, available from datanucleus maven repository at &lt;a href=&quot;http://www.datanucleus.org/downloads/maven2/javax/jdo/jdo2-api/2.3-ec/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.datanucleus.org/downloads/maven2/javax/jdo/jdo2-api/2.3-ec/&lt;/a&gt;, Apache licensed&lt;/li&gt;
	&lt;li&gt;Modified the build files to suppress auto-enhancement of all complied classes, a new feature introduced in the latest version.&lt;/li&gt;
	&lt;li&gt;Modified the HiveMetaStoreClient implementation to create deep-copies of non-primitive objects being returned from the thrift server. Without this change, some collections were being fetched as semi-populated proxies with missing session context leading to NPEs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Testing Done:&lt;/b&gt;&lt;br/&gt;
Built and ran all tests. Only two failures were reported - clientpositive test for input20.q and input33.q. These tests appear to be failing on the trunk as well.&lt;/p&gt;</comment>
                            <comment id="12873555" author="aprabhakar" created="Mon, 31 May 2010 06:27:18 +0000"  >&lt;p&gt;This patch replaces the patch submitted before (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1176&quot; title=&quot;&amp;#39;create if not exists&amp;#39; fails for a table name with &amp;#39;select&amp;#39; in it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1176&quot;&gt;&lt;del&gt;HIVE-1176&lt;/del&gt;&lt;/a&gt;.lib-files.tar.gz and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1176&quot; title=&quot;&amp;#39;create if not exists&amp;#39; fails for a table name with &amp;#39;select&amp;#39; in it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1176&quot;&gt;&lt;del&gt;HIVE-1176&lt;/del&gt;&lt;/a&gt;.patch).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;HIVE-1176-1.patch:

#	modified:   build.properties
#	modified:   build.xml
#	modified:   eclipse-templates/.classpath
#	modified:   ivy/ivysettings.xml
#	deleted:    lib/datanucleus-core-1.1.2.LICENSE
#	deleted:    lib/datanucleus-core-1.1.2.jar
#	deleted:    lib/datanucleus-enhancer-1.1.2.LICENSE
#	deleted:    lib/datanucleus-enhancer-1.1.2.jar
#	deleted:    lib/datanucleus-rdbms-1.1.2.LICENSE
#	deleted:    lib/datanucleus-rdbms-1.1.2.jar
#	deleted:    lib/jdo2-api-2.3-SNAPSHOT.LICENSE
#	deleted:    lib/jdo2-api-2.3-SNAPSHOT.jar
#	modified:   metastore/ivy.xml
#	modified:   metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12873557" author="aprabhakar" created="Mon, 31 May 2010 06:39:47 +0000"  >&lt;p&gt;Updated the patch so that it cleanly applies to the trunk. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;Changes from Previous Patch:&lt;/b&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;This patch uses ivy to download the updated datanucleus plugins and other dependent libraries. There is no need to use the previously supplied tar.gz anymore.&lt;/li&gt;
	&lt;li&gt;At the time the previous patch was written, the enhancer plugin version was 2.0.1 which by default would enable annotation processing. Since then version 2.0.3 has been released which &lt;a href=&quot;http://www.datanucleus.org/servlet/jira/browse/NUCENHANCER-56&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;disables this behavior&lt;/a&gt;. Hence the previously submitted changes to &lt;tt&gt;javac.args&lt;/tt&gt; in build.properties file are no longer necessary. This patch uses the updated version of the datanucleus enhancer plugin.&lt;/li&gt;
	&lt;li&gt;The JDO2 API library used by datanucleus plugin is distributed by the datanucleus&apos;s public maven repository. This repository has been added to ivy configuration to automate the download.&lt;/li&gt;
	&lt;li&gt;The connection pool libraries have been updated to work with the newer datanucleus plugins. Library &lt;tt&gt;commons-dbcp&lt;/tt&gt; has been updated from 1.2.2 to 1.4, &lt;tt&gt;commons-pool&lt;/tt&gt; from 1.2 to 1.5.4, and &lt;tt&gt;datanucleus-connectionpool&lt;/tt&gt; from 1.0.2 to 2.0.1.&lt;/li&gt;
	&lt;li&gt;As with the previously submitted patch, &lt;tt&gt;HiveMetaStoreClient&lt;/tt&gt; implementation has been modified to create deep-copies of non-primitive objects being returned from the thrift server in order to avoid semi-populated proxies causing NPEs downstream.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Testing Done:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Built and ran all tests. Only two failures were reported as before - clientpositive test for input20.q and input33.q. These tests appear to be failing on the trunk as well.&lt;/p&gt;</comment>
                            <comment id="12874262" author="jvs" created="Tue, 1 Jun 2010 21:55:41 +0000"  >&lt;p&gt;What failures are you seeing on trunk for input20.q and input33.q?  I do see recent Hudson sporadic failures for the flaky negative tests script_broken_pipe1 and loadpart_err, but not input20.q and input33.q.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.20/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.20/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12875960" author="aprabhakar" created="Sat, 5 Jun 2010 22:38:29 +0000"  >&lt;p&gt;John - I debugged the failures that I was seeing for input20 and input33 and it turns out to be a subtle difference in the way the stream editor &lt;tt&gt;sed&lt;/tt&gt; works on Mac vs the regular linux distribution. I installed the GNU port for &lt;tt&gt;sed&lt;/tt&gt; and the failures no longer occur.&lt;/p&gt;

&lt;p&gt;I don&apos;t think this is related to the sporadic failures that are reported on hudson.&lt;/p&gt;</comment>
                            <comment id="12876106" author="cwsteinbach" created="Mon, 7 Jun 2010 01:22:25 +0000"  >&lt;p&gt;@Arvind: Can you explain what the difference is between OSX sed and GNU sed? Can we rewrite the sed script so that it works on both platforms? Seems like we are probably relying on a non-POSIX feature that is present in the GNU version.&lt;/p&gt;</comment>
                            <comment id="12876127" author="aprabhakar" created="Mon, 7 Jun 2010 05:13:09 +0000"  >&lt;p&gt;I think the difference is more likely a bug in Mac OSX version of &lt;tt&gt;sed&lt;/tt&gt;. Specifically, it fails to process directives with escaped tab sequence characters and instead treats it as unescaped. For example, the command to replace first occurrence of &lt;b&gt;b&lt;/b&gt; in the string &lt;b&gt;abc&lt;/b&gt; with a tab character &lt;b&gt;\t&lt;/b&gt; fails as shown below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ echo &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt; | /usr/bin/sed &lt;span class=&quot;code-quote&quot;&gt;&quot;s@b@\t@&quot;&lt;/span&gt;
atc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Whereas this works fine with the GNU distribution of sed&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ echo &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt; | /opt/local/bin/sed &lt;span class=&quot;code-quote&quot;&gt;&quot;s@b@\t@&quot;&lt;/span&gt;
a	c
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12879208" author="pauly" created="Wed, 16 Jun 2010 00:41:32 +0000"  >&lt;p&gt;Can you elaborate on what you mean by &apos;some collections were being fetched as semi-populated proxies with missing session context leading to NPEs&apos;? Is there something I can do to reproduce this?&lt;/p&gt;</comment>
                            <comment id="12879428" author="aprabhakar" created="Wed, 16 Jun 2010 18:03:06 +0000"  >&lt;p&gt;Updating the patch with latest trunk image. This is necessary since &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1373&quot; title=&quot;Missing connection pool plugin in Eclipse classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1373&quot;&gt;&lt;del&gt;HIVE-1373&lt;/del&gt;&lt;/a&gt; updated the eclipse classpath with connection pool libraries which will be outdated with the application of this patch. The updated version of the patch takes care of this problem by updating eclipse classpath to use the updated libraries instead. Tested out launch configuration via eclipse to make sure it is working.&lt;/p&gt;</comment>
                            <comment id="12879432" author="aprabhakar" created="Wed, 16 Jun 2010 18:12:34 +0000"  >&lt;p&gt;The updated patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1176&quot; title=&quot;&amp;#39;create if not exists&amp;#39; fails for a table name with &amp;#39;select&amp;#39; in it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1176&quot;&gt;&lt;del&gt;HIVE-1176&lt;/del&gt;&lt;/a&gt;-2.patch contains the following changes:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;modified:   build.properties&lt;/li&gt;
	&lt;li&gt;modified:   build.xml&lt;/li&gt;
	&lt;li&gt;modified:   eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;modified:   ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-core-1.1.2.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-core-1.1.2.jar&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-enhancer-1.1.2.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-enhancer-1.1.2.jar&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-rdbms-1.1.2.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-rdbms-1.1.2.jar&lt;/li&gt;
	&lt;li&gt;deleted:    lib/jdo2-api-2.3-SNAPSHOT.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/jdo2-api-2.3-SNAPSHOT.jar&lt;/li&gt;
	&lt;li&gt;modified:   metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;modified:   metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12879441" author="aprabhakar" created="Wed, 16 Jun 2010 18:36:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can you elaborate on what you mean by &apos;some collections were being fetched as semi-populated proxies with missing session context leading to NPEs&apos;? Is there something I can do to reproduce this?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;@Paul: Here are the steps to reproduce this problem:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Startout with a clean workspace checkout and apply the updated patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1176&quot; title=&quot;&amp;#39;create if not exists&amp;#39; fails for a table name with &amp;#39;select&amp;#39; in it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1176&quot;&gt;&lt;del&gt;HIVE-1176&lt;/del&gt;&lt;/a&gt;-2.patch.&lt;/li&gt;
	&lt;li&gt;Manually revert the file &lt;tt&gt;metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/tt&gt; to its previous state&lt;/li&gt;
	&lt;li&gt;run &lt;tt&gt;ant package&lt;/tt&gt; from the root of the workspace&lt;/li&gt;
	&lt;li&gt;run &lt;tt&gt;ant test&lt;/tt&gt; from within metastore&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;You should see failures like the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] testPartition() failed.
    [junit] java.lang.NullPointerException
    [junit] 	at org.datanucleus.store.mapped.scostore.AbstractMapStore.validateKeyForWriting(AbstractMapStore.java:333)
    [junit] 	at org.datanucleus.store.mapped.scostore.JoinMapStore.put(JoinMapStore.java:252)
    [junit] 	at org.datanucleus.sco.backed.Map.put(Map.java:640)
    [junit] 	at org.apache.hadoop.hive.metastore.api.Table.putToParameters(Table.java:359)
    [junit] 	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.alter_table(HiveMetaStore.java:1281)
    [junit] 	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.alter_table(HiveMetaStoreClient.java:140)
    [junit] 	at org.apache.hadoop.hive.metastore.TestHiveMetaStore.testAlterTable(TestHiveMetaStore.java:728)
    [junit] 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you look at &lt;tt&gt;src/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;/tt&gt; you would notice that the line causing this exception should ideally be a &lt;tt&gt;HashMap&lt;/tt&gt; and not an &lt;tt&gt;org.datanucleus.store.mapped.scostore.AbstractMapStore&lt;/tt&gt; as indicated by the stack trace. This happens because the datanucleus JDO framework replaces collections with its own implementation in order to allow lazy-dereferencing and optimize for database connections/queries/memory consumption etc.&lt;/p&gt;

&lt;p&gt;Lazy loading of collections (and second class objects in general) can be disabled at a global level or at entity level. Disabling this globally is generally not recommended unless there is evidence backed by extensive testing that supports that change. Disabling at an entity level is still OK provided the entity object graph is fully dereferenced at all times. This could lead to extensive memory consumption in the system in case the entity graph is huge. &lt;/p&gt;

&lt;p&gt;My approach towards fixing the problem was to &lt;b&gt;not&lt;/b&gt; change the default behavior in the general case. Instead I felt that it was better to circumvent this problem in the case of a remote metastore by creating a copy explicitly. If you have other suggestions on how to address this, please let me know.&lt;/p&gt;

&lt;p&gt;Also - more information on the lazy dereferencing mechanism used by datanucleus framework can be found &lt;a href=&quot;http://www.datanucleus.org/plugins/core/sco.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12881023" author="aprabhakar" created="Tue, 22 Jun 2010 02:22:39 +0000"  >&lt;p&gt;@Paul: Any updates on this from your end? Thanks.&lt;/p&gt;</comment>
                            <comment id="12881026" author="pauly" created="Tue, 22 Jun 2010 02:26:12 +0000"  >&lt;p&gt;I was going to look at it again today, but looks like I&apos;ll get to it around mid-day tomorrow? Will keep this posted.&lt;/p&gt;</comment>
                            <comment id="12881293" author="pauly" created="Tue, 22 Jun 2010 18:50:00 +0000"  >&lt;p&gt;For some reason, I don&apos;t see the JDO files being deleted after applying the patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;?      build.xml.orig
?      HIVE-1176-2.patch
?      test.log
M      eclipse-templates/.classpath
M      build.properties
M      build.xml
?      metastore/test.log
M      metastore/ivy.xml
M      metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java
!      lib/jdo2-api-2.3-SNAPSHOT.LICENSE
!      lib/datanucleus-rdbms-1.1.2.LICENSE
!      lib/datanucleus-enhancer-1.1.2.LICENSE
!      lib/datanucleus-core-1.1.2.LICENSE
M      ivy/ivysettings.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, the patch works for branch 0.6 but not for trunk. Can you regenerate it?&lt;/p&gt;</comment>
                            <comment id="12881296" author="pauly" created="Tue, 22 Jun 2010 18:55:13 +0000"  >&lt;p&gt;To clarify, I am referring to the jars under /lib that should be deleted along with the *.LICENSE files.&lt;/p&gt;</comment>
                            <comment id="12881304" author="pauly" created="Tue, 22 Jun 2010 19:09:48 +0000"  >&lt;p&gt;Nevermind - JVS pointed out that jars are skipped as they are binary files.&lt;/p&gt;</comment>
                            <comment id="12881381" author="aprabhakar" created="Tue, 22 Jun 2010 21:51:10 +0000"  >&lt;p&gt;@Paul: I just tested the patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1176&quot; title=&quot;&amp;#39;create if not exists&amp;#39; fails for a table name with &amp;#39;select&amp;#39; in it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1176&quot;&gt;&lt;del&gt;HIVE-1176&lt;/del&gt;&lt;/a&gt;-2.patch) on latest trunk and it seems to apply cleanly. Can you please try again and see if it works? Also, can you post the errors that you are seeing? If necessary, I can break down the patch into single-file units to help with applying it. Just let me know either way.&lt;/p&gt;</comment>
                            <comment id="12881446" author="pauly" created="Tue, 22 Jun 2010 23:21:24 +0000"  >&lt;p&gt;Tried it again, and yep, it works. Not sure what happened before. Anyway though, yeah I do see the NPE&apos;s that you mentioned. Why did this not occur before? Just changes in behavior between major versions?&lt;/p&gt;</comment>
                            <comment id="12881472" author="aprabhakar" created="Wed, 23 Jun 2010 00:09:07 +0000"  >&lt;p&gt;Yes - it appears that the change in behavior can be attributed to the difference in major versions.&lt;/p&gt;</comment>
                            <comment id="12881484" author="pauly" created="Wed, 23 Jun 2010 00:31:55 +0000"  >&lt;p&gt;One last thing, can you include a unit test to verify the fix?&lt;/p&gt;</comment>
                            <comment id="12881486" author="aprabhakar" created="Wed, 23 Jun 2010 00:35:47 +0000"  >&lt;p&gt;Sorry - it is not clear to me what unit test should I be writing. Can you give an example perhaps?&lt;/p&gt;

&lt;p&gt;From my perspective, any test that uses the metastore exercises this change. And together, all the tests form an exhaustive layer that ensures that there is no regression seeping into the system. Note that this is not a functionality change, only a change of underlying libraries. &lt;/p&gt;</comment>
                            <comment id="12881488" author="aprabhakar" created="Wed, 23 Jun 2010 00:37:32 +0000"  >&lt;p&gt;Also, for the specific change to &lt;tt&gt;HiveMetaStoreClient.java&lt;/tt&gt; - the tests under &lt;tt&gt;metastore&lt;/tt&gt; validate that the new libraries are working correctly. &lt;/p&gt;</comment>
                            <comment id="12881497" author="pauly" created="Wed, 23 Jun 2010 00:47:02 +0000"  >&lt;p&gt;Oh, but I thought the original problem (as per title) was an exception with &apos;create table if not exists tmp_select(s string, c string, n int)&apos;?&lt;/p&gt;

&lt;p&gt;So maybe something like:&lt;/p&gt;

&lt;p&gt;CREATE TABLE IF NOT EXISTS tmp_select(s STRING, c STRING, n INT);&lt;br/&gt;
DROP TABLE tmp_select;&lt;/p&gt;</comment>
                            <comment id="12881499" author="aprabhakar" created="Wed, 23 Jun 2010 00:49:00 +0000"  >&lt;p&gt;Makes sense. Will add a test case and update the patch soon. Sorry for the misunderstanding.&lt;/p&gt;</comment>
                            <comment id="12881538" author="aprabhakar" created="Wed, 23 Jun 2010 04:33:43 +0000"  >&lt;p&gt;Updated patch with a test case attached. Please use &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1176&quot; title=&quot;&amp;#39;create if not exists&amp;#39; fails for a table name with &amp;#39;select&amp;#39; in it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1176&quot;&gt;&lt;del&gt;HIVE-1176&lt;/del&gt;&lt;/a&gt;-3.patch. The changed files in this patch are as follows:&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;modified:   build.properties&lt;/li&gt;
	&lt;li&gt;modified:   build.xml&lt;/li&gt;
	&lt;li&gt;new file:   data/files/simple.txt&lt;/li&gt;
	&lt;li&gt;modified:   eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;modified:   ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-core-1.1.2.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-core-1.1.2.jar&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-enhancer-1.1.2.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-enhancer-1.1.2.jar&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-rdbms-1.1.2.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/datanucleus-rdbms-1.1.2.jar&lt;/li&gt;
	&lt;li&gt;deleted:    lib/jdo2-api-2.3-SNAPSHOT.LICENSE&lt;/li&gt;
	&lt;li&gt;deleted:    lib/jdo2-api-2.3-SNAPSHOT.jar&lt;/li&gt;
	&lt;li&gt;modified:   metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;modified:   metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;new file:   ql/src/test/queries/clientpositive/hive_1176.q&lt;/li&gt;
	&lt;li&gt;new file:   ql/src/test/results/clientpositive/hive_1176.q.out&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12881559" author="pauly" created="Wed, 23 Jun 2010 06:04:37 +0000"  >&lt;p&gt;@Arvind - While the test that you added is thorough, I think for this case, we might be able to get by with something simpler / faster? &lt;/p&gt;

&lt;p&gt;e.g.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Use one of the existing source files or insert from an existing table like &apos;src&apos;.&lt;/li&gt;
	&lt;li&gt;Limit to one select statement / table as we test select more extensively in other unit tests.&lt;/li&gt;
	&lt;li&gt;Remove the drop table statements in the beginning, as other tests aren&apos;t supposed to leave tables around at the end of their run.&lt;/li&gt;
	&lt;li&gt;Rename the query file to something more descriptive. This would help developers browsing the list of tests.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We don&apos;t want to sacrifice coverage, but at the same time, the whole suite of tests take quite a while to execute.&lt;/p&gt;</comment>
                            <comment id="12881562" author="jvs" created="Wed, 23 Jun 2010 06:10:06 +0000"  >&lt;p&gt;Paul, we currently do pre-drops in the test to avoid collisions in case other tests fail, or if a negative test happens to use the same table name since there&apos;s currently no way for a negative test to clean up after itself.  It would be better if our test framework automatically cleaned out the catalog at the beginning of each test, but until we have that, pre-drop is required.&lt;/p&gt;</comment>
                            <comment id="12881566" author="aprabhakar" created="Wed, 23 Jun 2010 06:32:49 +0000"  >&lt;p&gt;@Paul: You suggestions are fair enough. I have incorporated all changes you suggested except for the pre-drop based on @John&apos;s response. Let me know if you guys need any further tweaking of this patch.&lt;/p&gt;</comment>
                            <comment id="12881568" author="pauly" created="Wed, 23 Jun 2010 06:35:36 +0000"  >&lt;p&gt;@John - good point! In which case, we&apos;ll probably need to fix up some of the other unit tests with a create table.&lt;/p&gt;</comment>
                            <comment id="12881572" author="pauly" created="Wed, 23 Jun 2010 06:41:29 +0000"  >&lt;p&gt;Looks good to me&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12881936" author="jvs" created="Wed, 23 Jun 2010 22:44:25 +0000"  >&lt;p&gt;Just one more change needed...please add an ORDER BY to the select in the testcase.  This is required to avoid spurious diffs later since without ORDER BY, the query result order is non-deterministic.&lt;/p&gt;

&lt;p&gt;After that I&apos;ll run through tests and commit.&lt;/p&gt;</comment>
                            <comment id="12881946" author="aprabhakar" created="Wed, 23 Jun 2010 23:16:49 +0000"  >&lt;p&gt;@John: done. Please see the new patch attachment -  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1176&quot; title=&quot;&amp;#39;create if not exists&amp;#39; fails for a table name with &amp;#39;select&amp;#39; in it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1176&quot;&gt;&lt;del&gt;HIVE-1176&lt;/del&gt;&lt;/a&gt;-5.patch&lt;/p&gt;

&lt;p&gt;Since a lot of good points came out of the discussion on this jira, I took the liberty of adding them to the Hive wiki for posterity. You can find it &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/TipsForAddingNewTests&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;. Please add to it any other points that you feel contributors should take into consideration while adding new tests.&lt;/p&gt;</comment>
                            <comment id="12881950" author="jvs" created="Wed, 23 Jun 2010 23:24:37 +0000"  >&lt;p&gt;Thanks for the doc Arvind.  &lt;/p&gt;

&lt;p&gt;But for the patch:  we need the ORDER BY on the SELECT that produces results in the output log (not the INSERT).&lt;/p&gt;</comment>
                            <comment id="12881956" author="aprabhakar" created="Wed, 23 Jun 2010 23:35:09 +0000"  >&lt;p&gt;yes - thats what my intention was. Thanks for catching it.&lt;/p&gt;</comment>
                            <comment id="12881967" author="jvs" created="Wed, 23 Jun 2010 23:58:48 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="12882049" author="jvs" created="Thu, 24 Jun 2010 05:23:29 +0000"  >&lt;p&gt;Committed.  Thanks Arvind!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12434107">HIVE-802</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12434107">HIVE-802</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12445905" name="HIVE-1176-1.patch" size="61160" author="aprabhakar" created="Mon, 31 May 2010 06:27:17 +0000"/>
                            <attachment id="12447244" name="HIVE-1176-2.patch" size="62323" author="aprabhakar" created="Wed, 16 Jun 2010 18:03:06 +0000"/>
                            <attachment id="12447794" name="HIVE-1176-3.patch" size="67830" author="aprabhakar" created="Wed, 23 Jun 2010 04:32:02 +0000"/>
                            <attachment id="12447803" name="HIVE-1176-4.patch" size="70594" author="aprabhakar" created="Wed, 23 Jun 2010 06:31:41 +0000"/>
                            <attachment id="12447902" name="HIVE-1176-5.patch" size="70633" author="aprabhakar" created="Wed, 23 Jun 2010 23:14:21 +0000"/>
                            <attachment id="12447905" name="HIVE-1176-6.patch" size="70627" author="aprabhakar" created="Wed, 23 Jun 2010 23:34:29 +0000"/>
                            <attachment id="12442204" name="HIVE-1176.lib-files.tar.gz" size="3356113" author="aprabhakar" created="Mon, 19 Apr 2010 18:11:09 +0000"/>
                            <attachment id="12442203" name="HIVE-1176.patch" size="101450" author="aprabhakar" created="Mon, 19 Apr 2010 18:11:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Feb 2010 18:28:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122887</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1177] build should set flag or detect conditions to avoid duplicating work</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1177</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I made an ant target quick-test, which differs from test in that it&lt;br/&gt;
has no dependencies.&lt;br/&gt;
 &amp;lt;target name=&quot;quick-test&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;iterate target=&quot;test&quot;/&amp;gt;&lt;br/&gt;
 &amp;lt;/target&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;target name=&quot;test&quot; depends=&quot;clean-test,jar&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;iterate target=&quot;test&quot;/&amp;gt;&lt;br/&gt;
 &amp;lt;iterate-cpp target=&quot;test&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/target&amp;gt;&lt;/p&gt;

&lt;p&gt;time ant -Dhadoop.version=&apos;0.18.3&apos; -Doffline=true&lt;br/&gt;
-Dtestcase=TestCliDriver -Dqfile=alter1.q quick-test&lt;br/&gt;
BUILD SUCCESSFUL&lt;br/&gt;
Total time: 15 seconds&lt;/p&gt;

&lt;p&gt;real    0m16.250s&lt;br/&gt;
user    0m20.965s&lt;br/&gt;
sys     0m1.579s&lt;/p&gt;

&lt;p&gt;time ant -Dhadoop.version=&apos;0.18.3&apos; -Doffline=true&lt;br/&gt;
-Dtestcase=TestCliDriver -Dqfile=alter1.q test&lt;br/&gt;
BUILD SUCCESSFUL&lt;br/&gt;
Total time: 26 seconds&lt;/p&gt;

&lt;p&gt;real    0m26.564s&lt;br/&gt;
user    0m31.307s&lt;br/&gt;
sys     0m2.346s&lt;/p&gt;

&lt;p&gt;Some makefiles set flags files like &quot;make.ok&quot;, that allow the build process to intelligently skip steps that are already done. Currently, a target like test has no way of determining state and will re-issue dependent targets like clean-test,jar (and there dependents). &lt;/p&gt;

&lt;p&gt;Suggestion:&lt;br/&gt;
Hive should set flags or intelligently determine the state of the build and save cpu development time. Targets should not re-execute unless a clean is explicitly given. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12456591">HIVE-1177</key>
            <summary>build should set flag or detect conditions to avoid duplicating work</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2010 22:21:25 +0000</created>
                <updated>Wed, 17 Feb 2010 22:24:49 +0000</updated>
                                                                            <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1178] Enforce bucketing for a table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1178</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the table being inserted is a bucketed, currently hive does not try to enforce that.&lt;br/&gt;
An option should be added for checking that.&lt;/p&gt;

&lt;p&gt;Moreover, the number of buckets can be higher than the number of maximum reducers, in which&lt;br/&gt;
case a single reducer can write to multiple files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456600">HIVE-1178</key>
            <summary>Enforce bucketing for a table</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                            <label>Bucketing</label>
                    </labels>
                <created>Wed, 17 Feb 2010 23:36:21 +0000</created>
                <updated>Thu, 21 Jun 2012 21:49:28 +0000</updated>
                            <resolved>Fri, 19 Feb 2010 00:58:56 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12835351" author="namit" created="Thu, 18 Feb 2010 19:26:08 +0000"  >&lt;p&gt;Incorporated Yongqiang&apos;s comments&lt;/p&gt;</comment>
                            <comment id="12835353" author="zshao" created="Thu, 18 Feb 2010 19:28:50 +0000"  >&lt;p&gt;Can you explain what are the comments and changes?&lt;/p&gt;</comment>
                            <comment id="12835374" author="he yongqiang" created="Thu, 18 Feb 2010 20:00:21 +0000"  >&lt;p&gt;Sorry. Reviewed it with Namit this morning offline. &lt;br/&gt;
My comments for previous patch are:&lt;/p&gt;

&lt;p&gt;int totalFiles = 1;&lt;br/&gt;
int numFiles = 1;&lt;/p&gt;

&lt;p&gt;if (numBuckets &amp;gt; maxReducers) {&lt;br/&gt;
...&lt;br/&gt;
if (totalFiles % maxReducers == 0) {&lt;br/&gt;
...&lt;br/&gt;
}&lt;br/&gt;
else {&lt;br/&gt;
 numFiles = (totalFiles/maxReducers)+1&lt;br/&gt;
 maxReducers = totalFiles/numFiles;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;If numBuckets &amp;gt; maxReducer and is not a multiply, the code will try to find how many files need to be written for each reducer. And use that fileNumber to get a reducer number. Do we need to guarantee that the calculated reducer number multiply number of files in each reducer should be the bucket number? If so, it seems the above code can not guarantee that. For example (bucket number is 30, max reducer is 9), then numFiles will be 4, and maxReducer will be 7. And 4*7=28 != 30&lt;/p&gt;

&lt;p&gt;The new patch uses a loop to find the good reducer number.&lt;/p&gt;
</comment>
                            <comment id="12835397" author="he yongqiang" created="Thu, 18 Feb 2010 21:04:49 +0000"  >&lt;p&gt;bucket1, bucket2, bucket3, and input2 tests failed. Can you take a look?&lt;/p&gt;</comment>
                            <comment id="12835503" author="namit" created="Thu, 18 Feb 2010 23:45:22 +0000"  >&lt;p&gt;There was a problem with running unit tests with hadoop 17 - fixed that. &lt;br/&gt;
Thanks Yongqiang&lt;/p&gt;</comment>
                            <comment id="12835535" author="he yongqiang" created="Fri, 19 Feb 2010 00:58:56 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436158" name="hive.1178.1.patch" size="1153276" author="namit" created="Thu, 18 Feb 2010 01:35:37 +0000"/>
                            <attachment id="12436236" name="hive.1178.2.patch" size="1153909" author="namit" created="Thu, 18 Feb 2010 19:26:08 +0000"/>
                            <attachment id="12436268" name="hive.1178.3.patch" size="1152488" author="namit" created="Thu, 18 Feb 2010 23:45:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Feb 2010 19:28:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122888</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1179] Add UDF array_contains</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1179</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Returns true or false, depending on whether an element is in an array.&lt;br/&gt;
&lt;tt&gt;array_contains(T element, array&amp;lt;T&amp;gt; theArray)&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456689">HIVE-1179</key>
            <summary>Add UDF array_contains</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aprabhakar">Arvind Prabhakar</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2010 19:20:14 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:48 +0000</updated>
                            <resolved>Wed, 16 Jun 2010 05:38:39 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12840862" author="aprabhakar" created="Wed, 3 Mar 2010 20:27:10 +0000"  >&lt;p&gt;&lt;b&gt;Summary:&lt;/b&gt;&lt;br/&gt;
This patch implements the array_contains UDF. The signature of this UDF is array_contains(array, value). It returns true if value exists within the array. The comparison of value with array elements is done using the ObjectInspectorUtils&apos; compare method.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Special Case:&lt;/b&gt; &lt;br/&gt;
The implementation of ObjectInspectorUtils.compare() method currently does not handle map comparisons and raises a runtime exception when it encounters a map type. To avoid this exception, a call to compareSupported() method is made by the UDF during initialization. If this method returns false, a UDFArgumentException is raised stating that the argument type does not support comparison.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Implementation Details:&lt;/b&gt;&lt;br/&gt;
&lt;em&gt;GenericUDFArrayContains.java&lt;/em&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added to &lt;tt&gt;org.apache.hadoop.hive.ql.udf.generic&lt;/tt&gt; package&lt;/li&gt;
	&lt;li&gt;its initialize method does the following (a) checks to see if there are exactly two arguments specified, (b) if the first argument is of a LIST type, (c) if the type of list element and the type of value argument is identical, and (d) if comparison for such types is supported.&lt;/li&gt;
	&lt;li&gt;its evaluate method calls into &lt;tt&gt;ObjectInspectorUtils.compare()&lt;/tt&gt; method to test if the given value matches any of the elements of the given array.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;em&gt;ObjectInspectorUtils:&lt;/em&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added a new method called &lt;tt&gt;compareTypes(ObjectInspector, ObjectInspector)&lt;/tt&gt; which returns true if the two types represented are identical. This  comparison is done via recursive call to elements of the type until all elements are deemed identical down to their primitive constituents.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;em&gt;FunctionRegistry:&lt;/em&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Registered the &lt;tt&gt;GenericUDFArrayContains&lt;/tt&gt; as array_contains&lt;/li&gt;
	&lt;li&gt;Some whitespace formatting changes and removal of redundant casts&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;em&gt;package-info.java&lt;/em&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added the missing file to hive.ql.generic package.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;em&gt;Test cases:&lt;/em&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;client positive test: &lt;tt&gt;udf_array_contains.q&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;client negative tests: &lt;tt&gt;udf_array_contains_wrong1.q&lt;/tt&gt;, &lt;tt&gt;udf_array_contains_wrong2.q&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="12840865" author="aprabhakar" created="Wed, 3 Mar 2010 20:28:37 +0000"  >&lt;p&gt;Please see comments associated with the &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1179&quot; title=&quot;Add UDF array_contains&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1179&quot;&gt;&lt;del&gt;HIVE-1179&lt;/del&gt;&lt;/a&gt;.patch attachment.&lt;/p&gt;</comment>
                            <comment id="12840869" author="cwsteinbach" created="Wed, 3 Mar 2010 20:32:40 +0000"  >&lt;p&gt;+1 Patch looks good.&lt;/p&gt;</comment>
                            <comment id="12842237" author="zshao" created="Sat, 6 Mar 2010 10:29:34 +0000"  >&lt;p&gt;Hi Arvind, we have to restore the &quot;unnecessary&quot; type conversion for hadoop 0.17.&lt;br/&gt;
Try the following command and you will see why:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant -Dhadoop.version=0.17.2.1 clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12843270" author="aprabhakar" created="Tue, 9 Mar 2010 19:59:29 +0000"  >&lt;p&gt;Thanks for pointing that out Zheng. I will update and resubmit the patch soon.&lt;/p&gt;</comment>
                            <comment id="12843411" author="aprabhakar" created="Wed, 10 Mar 2010 03:00:21 +0000"  >&lt;p&gt;&lt;b&gt;Summary:&lt;/b&gt;&lt;br/&gt;
The previously submitted patch had changes that removed seemingly redundant casts needed by Hadoop 0.17.x. This change reverts the casts and also fixes what caused the removal of the casts.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Details:&lt;/b&gt;&lt;br/&gt;
Due to the default JDT preferences set for Eclipse, the &lt;em&gt;Clean Up&lt;/em&gt; code formatter automatically removes any redundant casts in the file being saved. This caused the casts to be removed from &lt;tt&gt;FunctionRegistry.java&lt;/tt&gt; for return value of calls to &lt;tt&gt;ReflectionUtils.newInstance()&lt;/tt&gt; method. &lt;/p&gt;

&lt;p&gt;The cast of this return value was deemed redundant because the newer version of &lt;tt&gt;ReflectionUtils.newInstance()&lt;/tt&gt;  returns a typed object of the expected type in call context. However, the previous version of &lt;tt&gt;ReflectionUtils.newInstance()&lt;/tt&gt; returned only &lt;tt&gt;java.lang.Object&lt;/tt&gt; instead. This caused the change to not compile against previous version of &lt;tt&gt;ReflectionUtils&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Changes from last patch:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;1. The &lt;tt&gt;FunctionRegistry.java&lt;/tt&gt; file has been edited to restore the previously removed casts.&lt;/p&gt;

&lt;p&gt;2. The default preferences for Eclipse JDT UI that controls the &lt;em&gt;Clean Up&lt;/em&gt; code formatter that cased this problem has been updated to not remove redundant casts from the file being saved.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Testing done:&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Compiled and tested the change against the default version of Hadoop.&lt;/li&gt;
	&lt;li&gt;Compiled and tested against 0.17.2.1 version as well.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12843412" author="aprabhakar" created="Wed, 10 Mar 2010 03:01:07 +0000"  >&lt;p&gt;Please see the comment associated with the updated patch file.&lt;/p&gt;</comment>
                            <comment id="12870265" author="pauly" created="Sat, 22 May 2010 03:17:24 +0000"  >&lt;p&gt;One minor point - can you make result a member variable of GenericUDFArrayContains? This will reduce object creation.&lt;/p&gt;

&lt;p&gt;The patch needs to be regenerated against the current trunk, but otherwise looks good.&lt;/p&gt;</comment>
                            <comment id="12870474" author="aprabhakar" created="Sun, 23 May 2010 23:51:35 +0000"  >&lt;p&gt;Updated the patch to work with current trunk.&lt;/p&gt;</comment>
                            <comment id="12870475" author="aprabhakar" created="Mon, 24 May 2010 00:00:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;One minor point - can you make result a member variable of GenericUDFArrayContains? This will reduce object creation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;While this will reduce object creation, it will cause correctness problems when this UDF is used in an aggregate operation. Using a member variable for &lt;tt&gt;result&lt;/tt&gt; would then mean that all values of aggregated output will always reflect the evaluated value of the last row. A similar problem would occur if there is a lag between collecting and processing of output values. Hence my preference is to keep the implementation as is (stateless).&lt;/p&gt;

&lt;p&gt;If you still would like to make it a member variable, please let me know and I can make that change. &lt;/p&gt;</comment>
                            <comment id="12870793" author="pauly" created="Mon, 24 May 2010 19:20:01 +0000"  >&lt;p&gt;I&apos;m not quite sure if I follow, as this is not an aggregation function. Can you give an example of a query that would trigger the error if we made it a member variable?&lt;/p&gt;</comment>
                            <comment id="12870952" author="aprabhakar" created="Tue, 25 May 2010 02:21:26 +0000"  >&lt;p&gt;Paul - I have updated the patch. I do not have any examples of queries that will produce this failure today as no UDAF that can be applied to boolean input today does batch processing. My concern was primarily for creating defensive objects to guard against inadvertent mutation. &lt;/p&gt;</comment>
                            <comment id="12870955" author="pauly" created="Tue, 25 May 2010 02:42:12 +0000"  >&lt;p&gt;It should be okay as several other UDF&apos;s have a member &apos;result&apos; variable to reduce object creation - see UDFAbs for example. Since UDFAbs outputs a double, could you use it to demonstrate the potential issue?&lt;/p&gt;</comment>
                            <comment id="12871331" author="aprabhakar" created="Tue, 25 May 2010 19:42:15 +0000"  >&lt;p&gt;I took a quick look at the various Operator implementations and found that the ones that store any evaluated expression results end up creating copies anyway - &lt;tt&gt;ObjectInspectorUtils.copyToStandardObject()&lt;/tt&gt;. So although it appears that the system is working normally by reusing the object instance at the UDF level, code elsewhere in the system is forced to do the defensive copying. &lt;/p&gt;

&lt;p&gt;To clarify, my concern is not regarding a problem that may currently exist - but the potential problems that could occur due to not making defensive copies of mutable objects. If you are certain that this is does not apply to Hive implementation, then the updated patch should be fine for pushing in.&lt;/p&gt;</comment>
                            <comment id="12871380" author="pauly" created="Tue, 25 May 2010 21:51:19 +0000"  >&lt;p&gt;Yeah, I see your concern, but we&apos;re using mutable objects for performance reasons in this case and I believe there is an assumption that you shouldn&apos;t keep references to objects passed through the operator DAG (in general).&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12879149" author="namit" created="Tue, 15 Jun 2010 22:25:49 +0000"  >&lt;p&gt;The patch applies cleanly - will commit if the tests pass&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12438361" name="HIVE-1179-1.patch" size="23584" author="aprabhakar" created="Wed, 10 Mar 2010 03:00:21 +0000"/>
                            <attachment id="12445273" name="HIVE-1179-2.patch" size="18255" author="aprabhakar" created="Sun, 23 May 2010 23:51:35 +0000"/>
                            <attachment id="12445411" name="HIVE-1179-3.patch" size="18306" author="aprabhakar" created="Tue, 25 May 2010 02:21:11 +0000"/>
                            <attachment id="12437786" name="HIVE-1179.patch" size="23126" author="aprabhakar" created="Wed, 3 Mar 2010 20:27:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Mar 2010 20:27:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73050</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1180] Support Common Table Expressions (CTEs) in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1180</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I&apos;ve seen some presentations from the PostgreSQL recently expounding the utility of CTEs (&lt;a href=&quot;http://en.wikipedia.org/wiki/Common_table_expressions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Common_table_expressions&lt;/a&gt;). Should we try to support these in Hive? I&apos;ve never used them in practice, so curious to hear if the community would find them useful.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456693">HIVE-1180</key>
            <summary>Support Common Table Expressions (CTEs) in Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhbutani">Harish Butani</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2010 19:28:49 +0000</created>
                <updated>Sat, 13 Aug 2016 15:56:00 +0000</updated>
                            <resolved>Thu, 6 Feb 2014 23:36:25 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>15</watches>
                                                                <comments>
                            <comment id="12835361" author="cwsteinbach" created="Thu, 18 Feb 2010 19:41:06 +0000"  >&lt;p&gt;&lt;a href=&quot;http://wiki.postgresql.org/wiki/CTEReadme&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PostgreSQL&apos;s CTE Readme &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12835456" author="nzhang" created="Thu, 18 Feb 2010 22:46:21 +0000"  >&lt;p&gt;It seems that he benefits of CTE are 1) its support of recursion and 2) query-level temp table materialization (if the optimizer chooses so). &lt;/p&gt;

&lt;p&gt;I think (2) is a good addition to Hive, given that we have views now and need to add the support of session-level temp tables.&lt;/p&gt;

&lt;p&gt;(1) is a major extension and it may be unsafe &amp;#8211; the query may never terminate (well UDFs are undeciable, but HiveQL itself is currently). I was wondering how many customers really need recursions given that we have UDF support.&lt;/p&gt;</comment>
                            <comment id="12835466" author="appodictic" created="Thu, 18 Feb 2010 23:09:40 +0000"  >&lt;p&gt;(2) is a good addition to Hive, given that we have views now and need to add the support of session-level temp tables.&lt;br/&gt;
Question, how are we going to support session level temp tables Files/tables in HDFS are going to be tied into SessionState or a session ID in someway?&lt;/p&gt;

&lt;p&gt;(1) From my experience map/reduce does not lend itself well to recursive work. Currently if each recursion was a map/reduce job that would be a major strain on hadoop. (JobHistory would have explosive growth from a few queries) Maybe there is a simple way around this.&lt;/p&gt;

&lt;p&gt;However it is possible/practical recursive processing does open up interesting queries on self joined tables.&lt;br/&gt;
id name parent&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1 adam null
2 caan 1
3 able 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Select &quot;ALL DESCENDANTS OF ADAM&quot;&lt;/p&gt;</comment>
                            <comment id="12835492" author="nzhang" created="Thu, 18 Feb 2010 23:28:57 +0000"  >&lt;p&gt;The session-level temp table has not been implemented yet or in the near-future roadmap, but with the metastore&apos;s extension to keep the type of an object (whether it is a table or a view), it is relatively straightforward to add a new &quot;temp table&quot; type. The only thing is to change the DDL to support &apos;create temporary table ...), and drop the temp table once a session ended. &lt;/p&gt;

&lt;p&gt;Agreed with your point about the recursive queries. It is easy for the user to write recursive queries, but hard for execution and bad for resource management. &lt;/p&gt;</comment>
                            <comment id="13883553" author="rhbutani" created="Tue, 28 Jan 2014 00:20:21 +0000"  >&lt;p&gt;As a first step have converted references to a CTE in the Query into a SubQuery invocation.&lt;br/&gt;
This doesn&apos;t address the issue of materializing a CTE, which can then be used in multiple parts of the Query.&lt;br/&gt;
But this issue exists for views today. For e.g. the following query:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create view v1 as
select key, min(value) as value 
from src
group by key
;
explain
select a.key, b.key
from v1 a join v1 b on a.key = b.key;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Does the Group by on src twice. &lt;/p&gt;

&lt;p&gt;Can we address the issue of materialization in a subsequent jira?&lt;/p&gt;

&lt;p&gt;Have attached a preliminary patch. &lt;/p&gt;</comment>
                            <comment id="13887010" author="hagleitn" created="Thu, 30 Jan 2014 20:14:44 +0000"  >&lt;p&gt;I think it&apos;s reasonable to do non-recursive, non-materialized CTEs in a first step. It still gives you some of the benefits of CTEs (temporary &quot;view&quot; without metastore, multiple refs to the same subquery, simpler to write queries.) It will, however, still be more efficient in some cases to create/drop table to avoid re-computation. We should probably document and create follow up jira right away.&lt;/p&gt;

&lt;p&gt;I&apos;ve gone through the initial patch and it looks good so far. Some questions/suggestions for test cases to add:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;CTAS/create table like: Should also be supported, right? Currently you won&apos;t be able to specify that.&lt;/li&gt;
	&lt;li&gt;Negative test: Multiple with statements in the same query&lt;/li&gt;
	&lt;li&gt;What about multiple CTEs, can they referencing one another? If not, is this caught?&lt;/li&gt;
	&lt;li&gt;Insert statement: From the grammar it looks like you might be able to specify the CTE as the target table also (negative test), otherwise we should probably test that you can use it as a source.&lt;/li&gt;
	&lt;li&gt;Order by, sort by: These don&apos;t really make sense in a CTE - should they be disallowed?&lt;/li&gt;
	&lt;li&gt;Top level union with CTE is probably worth a test.&lt;/li&gt;
	&lt;li&gt;CTE in view definition: Should be allowed too, right? Currently I don&apos;t think it is.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13887011" author="hagleitn" created="Thu, 30 Jan 2014 20:17:10 +0000"  >&lt;p&gt;Also, I think &apos;recursive&apos; would be really neat: &lt;a href=&quot;http://explainextended.com/2013/12/31/happy-new-year-5/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://explainextended.com/2013/12/31/happy-new-year-5/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13887061" author="rhbutani" created="Thu, 30 Jan 2014 21:18:57 +0000"  >&lt;p&gt;Thanks Gunther. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I will add the tests you suggest&lt;/li&gt;
	&lt;li&gt;yes multiple ctes are allowed, can refer to each other as long there are no cycles. There is a test for this.&lt;/li&gt;
	&lt;li&gt;yes i agree CTE should be allowed with CTAS/create table, views.  I thought by adding CTE support to queryStatExpr this should happen. Will look into this.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Will file a follow up jira to support sharing a plan across multiple references to CTEs/views.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13890340" author="rhbutani" created="Tue, 4 Feb 2014 03:40:21 +0000"  >&lt;p&gt;Review at &lt;a href=&quot;https://reviews.apache.org/r/17691/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17691/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13890517" author="hagleitn" created="Tue, 4 Feb 2014 09:24:11 +0000"  >&lt;p&gt;Looks good! Some comments on rb.&lt;/p&gt;</comment>
                            <comment id="13890821" author="hiveqa" created="Tue, 4 Feb 2014 16:32:34 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12626819/HIVE-1180.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12626819/HIVE-1180.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5001 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_parallel_orderby
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_invalid_priv_v1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1178/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1178/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1178/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1178/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12626819&lt;/p&gt;</comment>
                            <comment id="13891903" author="hagleitn" created="Wed, 5 Feb 2014 08:04:28 +0000"  >&lt;p&gt;+1 (assuming tests on .6 pass)&lt;/p&gt;</comment>
                            <comment id="13891978" author="hiveqa" created="Wed, 5 Feb 2014 10:34:36 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12627055/HIVE-1180.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12627055/HIVE-1180.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5014 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_auto_sortmerge_join_16
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_merge
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1197/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1197/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1197/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1197/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12627055&lt;/p&gt;</comment>
                            <comment id="13892365" author="rhbutani" created="Wed, 5 Feb 2014 17:57:18 +0000"  >&lt;p&gt;I checked that the failing Minimr tests pass locally. &lt;/p&gt;</comment>
                            <comment id="13893979" author="rhbutani" created="Thu, 6 Feb 2014 23:36:25 +0000"  >&lt;p&gt;thanks for the review Gunther&lt;/p&gt;</comment>
                            <comment id="13894022" author="lefty@hortonworks.com" created="Fri, 7 Feb 2014 00:19:12 +0000"  >&lt;p&gt;This needs to be documented in the wiki.  Is it only for SELECT statements?&lt;/p&gt;

&lt;p&gt;Wikipedia says it&apos;s for SELECT, INSERT, UPDATE (not an issue here), or DELETE.  The PostgreSQL doc just says SELECT.&lt;/p&gt;

&lt;p&gt;If it&apos;s just SELECT, it can be a new section in the Select doc or a separate section linked from Select like the Group By, Sort/Order/Cluster/Distribute, and Join docs.&lt;/p&gt;

&lt;p&gt;Quick ref:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Language Manual:  Select &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Common_table_expressions#Common_table_expression&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Wikipedia:  Common table expression &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://wiki.postgresql.org/wiki/CTEReadme&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PostgreSQL CTE readme &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13894054" author="rhbutani" created="Fri, 7 Feb 2014 00:55:32 +0000"  >&lt;p&gt;Yes only for Select.&lt;br/&gt;
Yes a section like Group By.&lt;br/&gt;
This is embarrassing, I don&apos;t have wiki access; never gotten around to getting edit privileges. &lt;br/&gt;
Once I get it, I will add a section, that you can  review.&lt;/p&gt;</comment>
                            <comment id="13894353" author="lefty@hortonworks.com" created="Fri, 7 Feb 2014 09:49:49 +0000"  >&lt;p&gt;Ordinarily I&apos;d say you can write something up in a text file and I&apos;ll format it for the wiki, but the more the merrier so welcome to wiki-land.&lt;/p&gt;</comment>
                            <comment id="13895297" author="rhbutani" created="Sat, 8 Feb 2014 00:19:10 +0000"  >&lt;p&gt;Can you review: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Common+Table+Expression&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Common+Table+Expression&lt;/a&gt;&lt;br/&gt;
Also added CTE to Select Page: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13937523" author="lefty@hortonworks.com" created="Mon, 17 Mar 2014 07:46:09 +0000"  >&lt;p&gt;Apologies for the delay, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhbutani&quot; class=&quot;user-hover&quot; rel=&quot;rhbutani&quot;&gt;Harish Butani&lt;/a&gt;.  I made these changes (please revert anything you disagree with):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/pages/diffpages.action?pageId=38572242&amp;amp;originalId=40504878&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;changes to Common Table Expression &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Common+Table+Expression&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;current CTE doc &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I also recommend changing COMMA to &quot;,&quot; in the syntax &amp;#8211; just because I recently got confused by DOT for &quot;.&quot; in the DDL wiki &amp;#8211; but since the examples show actual commas there shouldn&apos;t be any confusion here.&lt;/p&gt;</comment>
                            <comment id="13937867" author="rhbutani" created="Mon, 17 Mar 2014 14:39:59 +0000"  >&lt;p&gt;Looks good, thanks for editing.&lt;br/&gt;
Changed COMMA to &quot;,&quot;&lt;/p&gt;</comment>
                            <comment id="13941439" author="lefty@hortonworks.com" created="Thu, 20 Mar 2014 06:17:40 +0000"  >&lt;p&gt;For good measure, I mentioned CTEs in these sections, with links to the SELECT syntax and CTE doc:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Notes.1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DML:  Inserting data into Hive Tables from queries &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTableAsSelect(CTAS)&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DDL:  CTAS &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateView&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DDL:  Create View &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I also added a version note to the SELECT syntax:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select#LanguageManualSelect-SelectSyntax&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Select Syntax &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13991360" author="ccondit" created="Tue, 6 May 2014 23:50:03 +0000"  >&lt;p&gt;Just wanted to say thanks for all the work on this. This has allowed us to do complex joins on HBase tables without having the query optimizer mess with the filter expression pushed down to HBase (thereby destroying the STARTROW/ENDROW optimizations). &lt;/p&gt;

&lt;p&gt;Using CTE&apos;s is so far the only way we have been able to do this effectively.&lt;/p&gt;

&lt;p&gt;Will we be able to rely on this behavior in future versions (forcing CTE queries to be executed unmodified)?&lt;/p&gt;
</comment>
                            <comment id="13991931" author="rhbutani" created="Wed, 7 May 2014 15:41:22 +0000"  >&lt;p&gt;CTEs are handled in a manner similar to view expansion. So there are no explicit checks to prevent optimizations.&lt;br/&gt;
If you don&apos;t want predicate pushdown: you can set &apos;hive.optimize.ppd&apos; to false; though this will also turn off Column Pruning and Partition Pruning. &lt;br/&gt;
I doubt you are getting the behavior you want because of CTEs. Can you post your query and plan.&lt;/p&gt;</comment>
                            <comment id="15419977" author="yogeshpalrecha@gmail.com" created="Sat, 13 Aug 2016 15:56:00 +0000"  >&lt;p&gt;Is there a plan for supporting recursive queries? Its very helpful for financial calculations.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12693777">HIVE-6388</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12625478" name="HIVE-1180.1.patch" size="18177" author="rhbutani" created="Tue, 28 Jan 2014 00:20:36 +0000"/>
                            <attachment id="12626819" name="HIVE-1180.3.patch" size="28961" author="rhbutani" created="Tue, 4 Feb 2014 03:39:38 +0000"/>
                            <attachment id="12627055" name="HIVE-1180.6.patch" size="31242" author="rhbutani" created="Wed, 5 Feb 2014 02:22:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Feb 2010 19:41:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42598</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1181] Make it optional to check file format</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1181</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Until &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1504&quot; title=&quot;SequenceFile.Reader constructor leaking resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1504&quot;&gt;&lt;del&gt;MAPREDUCE-1504&lt;/del&gt;&lt;/a&gt; is fixed, we need to introduce a way to avoid leaking file descriptor because of file format check in the load command.&lt;/p&gt;

&lt;p&gt;We already have the option in &lt;tt&gt;MoveTask&lt;/tt&gt;. We just need to add a HiveConf var to make it configurable.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12456729">HIVE-1181</key>
            <summary>Make it optional to check file format</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2010 23:43:18 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:02 +0000</updated>
                            <resolved>Sat, 20 Feb 2010 02:36:42 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12835515" author="he yongqiang" created="Fri, 19 Feb 2010 00:08:46 +0000"  >&lt;p&gt;This is 0.5 specific issue, or we also  need to make it for trunk?&lt;/p&gt;</comment>
                            <comment id="12835533" author="zshao" created="Fri, 19 Feb 2010 00:56:12 +0000"  >&lt;p&gt;We want to make it available for trunk also.&lt;/p&gt;

&lt;p&gt;Let&apos;s give the parameter some more detailed descriptions. The current description is not useful.&lt;br/&gt;
Something like &quot;Whether to check file format or not when loading data files&quot; is much better.&lt;/p&gt;
</comment>
                            <comment id="12835920" author="zshao" created="Fri, 19 Feb 2010 19:54:06 +0000"  >&lt;p&gt;Talked with Yongqiang offline. We need to add a test to make sure the option can actually avoid the file format check.&lt;/p&gt;</comment>
                            <comment id="12836001" author="zshao" created="Fri, 19 Feb 2010 22:23:24 +0000"  >&lt;p&gt;The &quot;drop table&quot; command is dropping wrong tables. Also we should have a newline at the end of the file.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--- ql/src/test/queries/clientpositive/disable_file_format_check.q	(revision 0)
+++ ql/src/test/queries/clientpositive/disable_file_format_check.q	(revision 0)
@@ -0,0 +1,8 @@
+set hive.fileformat.check = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
+create table kv_fileformat_check_txt (key string, value string) stored as textfile;
+load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;../data/files/kv1.seq&apos;&lt;/span&gt; overwrite into table kv_fileformat_check_txt;
+
+create table kv_fileformat_check_seq (key string, value string) stored as sequencefile;
+load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;../data/files/kv1.txt&apos;&lt;/span&gt; overwrite into table kv_fileformat_check_seq;
+
+drop table kv_fileformat_check;
\ No newline at end of file
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12836106" author="zshao" created="Sat, 20 Feb 2010 02:36:42 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436271" name="hive-1181-branch0.5-1.patch" size="2802" author="he yongqiang" created="Fri, 19 Feb 2010 00:18:37 +0000"/>
                            <attachment id="12436386" name="hive-1181-branch0.5-2.patch" size="5332" author="he yongqiang" created="Fri, 19 Feb 2010 22:03:19 +0000"/>
                            <attachment id="12436393" name="hive-1181-branch0.5-3.patch" size="5613" author="he yongqiang" created="Fri, 19 Feb 2010 22:33:03 +0000"/>
                            <attachment id="12436387" name="hive-1181-trunk-1.patch" size="2832" author="he yongqiang" created="Fri, 19 Feb 2010 22:03:19 +0000"/>
                            <attachment id="12436394" name="hive-1181-trunk-3.patch" size="2832" author="he yongqiang" created="Fri, 19 Feb 2010 22:33:03 +0000"/>
                            <attachment id="12436395" name="hive-1181-trunk-4.patch" size="5619" author="he yongqiang" created="Fri, 19 Feb 2010 22:42:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Feb 2010 00:08:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1182] Fix TestCliDriver too many open file error</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1182</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There is a bug in TestCliDriver that loads all .q files for each of the .q test.&lt;br/&gt;
We only need to load the .q file for that particular .q test.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12456834">HIVE-1182</key>
            <summary>Fix TestCliDriver too many open file error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Feb 2010 20:21:18 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:09 +0000</updated>
                            <resolved>Sat, 20 Feb 2010 04:03:42 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12835939" author="zshao" created="Fri, 19 Feb 2010 20:32:00 +0000"  >&lt;p&gt;This patch fixes the problem.&lt;/p&gt;</comment>
                            <comment id="12835940" author="zshao" created="Fri, 19 Feb 2010 20:36:14 +0000"  >&lt;p&gt;Patches for 0.4 and 0.5.&lt;/p&gt;</comment>
                            <comment id="12835952" author="nzhang" created="Fri, 19 Feb 2010 21:15:38 +0000"  >&lt;p&gt;template file changes look fine. but I&apos;m sure about the changes to SessionState.start(session). This function now returns the old session and previously it returns the new session. It is called in other places as well. Can you make sure that this change of semantics doesn&apos;t break our design and other use cases? If what we need here is to be able to get the current session and close it, we can do it without changing the semantics of SessionState.start(session). &lt;/p&gt;</comment>
                            <comment id="12835960" author="zshao" created="Fri, 19 Feb 2010 21:29:06 +0000"  >&lt;p&gt;Adopted Ning&apos;s suggestions.&lt;/p&gt;</comment>
                            <comment id="12835987" author="nzhang" created="Fri, 19 Feb 2010 22:02:30 +0000"  >&lt;p&gt;+1. Will commit after tests. &lt;/p&gt;</comment>
                            <comment id="12836113" author="nzhang" created="Sat, 20 Feb 2010 04:03:42 +0000"  >&lt;p&gt;committed to branch 0.4, 0.5 and trunk. Thanks Zheng!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436370" name="HIVE-1182.1.branch-0.4.patch" size="5276" author="zshao" created="Fri, 19 Feb 2010 20:36:14 +0000"/>
                            <attachment id="12436371" name="HIVE-1182.1.branch-0.5.patch" size="5273" author="zshao" created="Fri, 19 Feb 2010 20:36:14 +0000"/>
                            <attachment id="12436369" name="HIVE-1182.1.patch" size="5209" author="zshao" created="Fri, 19 Feb 2010 20:31:59 +0000"/>
                            <attachment id="12436378" name="HIVE-1182.2.branch-0.4.patch" size="4155" author="zshao" created="Fri, 19 Feb 2010 21:29:06 +0000"/>
                            <attachment id="12436377" name="HIVE-1182.2.branch-0.5.patch" size="4155" author="zshao" created="Fri, 19 Feb 2010 21:29:06 +0000"/>
                            <attachment id="12436376" name="HIVE-1182.2.patch" size="4155" author="zshao" created="Fri, 19 Feb 2010 21:29:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Feb 2010 21:15:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73048</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122891</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1183] hive.hwi.war.file vanished from hive-default.xml. error message prints wrong variable. does not start by default.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1183</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive.hwi.war.file vanished from hive-default.xml.&lt;br/&gt;
error message prints wrong variable.&lt;br/&gt;
since the full path is no longer supplied. The old documentation no longer applies&lt;/p&gt;

&lt;p&gt; String hwiWAR = conf.getVar(HiveConf.ConfVars.HIVEHWIWARFILE);&lt;br/&gt;
 String hivehome = System.getenv().get(&quot;HIVE_HOME&quot;);&lt;br/&gt;
   File hwiWARFile = new File(hivehome, hwiWAR);&lt;br/&gt;
   if (!hwiWARFile.exists()) &lt;/p&gt;
{
     l4j.fatal(&quot;HWI WAR file not found at &quot; + hwiWAR);
     System.exit(1);
   }</description>
                <environment></environment>
        <key id="12456874">HIVE-1183</key>
            <summary>hive.hwi.war.file vanished from hive-default.xml. error message prints wrong variable. does not start by default.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Feb 2010 01:46:41 +0000</created>
                <updated>Tue, 29 Jul 2014 09:32:58 +0000</updated>
                            <resolved>Mon, 22 Feb 2010 06:37:19 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12836130" author="zshao" created="Sat, 20 Feb 2010 07:53:27 +0000"  >&lt;p&gt;There is a conflict when applying hive-1183.diff to branch-0.5.&lt;br/&gt;
Can you generate a patch for branch-0.5?&lt;/p&gt;</comment>
                            <comment id="12836133" author="zshao" created="Sat, 20 Feb 2010 08:03:10 +0000"  >&lt;p&gt;This is caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-978&quot; title=&quot;Hive jars should follow Hadoop naming and include version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-978&quot;&gt;&lt;del&gt;HIVE-978&lt;/del&gt;&lt;/a&gt;. We added the ${version} to the jar/war filenames.&lt;br/&gt;
Is there anything additional that we need to do?&lt;/p&gt;
</comment>
                            <comment id="12836201" author="appodictic" created="Sat, 20 Feb 2010 16:34:05 +0000"  >&lt;p&gt;Patch against 5 branch&lt;/p&gt;</comment>
                            <comment id="12836202" author="appodictic" created="Sat, 20 Feb 2010 16:42:48 +0000"  >&lt;p&gt;Build file was looking for war in build/ not build/hwi. Error message printed wrong path causing confusion. Added commented out description of variable since war finding logic has changed recently.&lt;/p&gt;</comment>
                            <comment id="12836262" author="zshao" created="Sat, 20 Feb 2010 20:40:44 +0000"  >&lt;p&gt;Thanks Edward.&lt;/p&gt;

&lt;p&gt;1. Shall we show a message that the user should set hiveconf &lt;tt&gt;hive.hwi.war.file&lt;/tt&gt; if the war file is not found?&lt;/p&gt;

&lt;p&gt;2. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1183&quot; title=&quot;hive.hwi.war.file vanished from hive-default.xml. error message prints wrong variable. does not start by default.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1183&quot;&gt;&lt;del&gt;HIVE-1183&lt;/del&gt;&lt;/a&gt;.showidea.diff. We can use &quot;filterset&quot; to change the file content when copying. This can help users get started without any manual changes to the conf file.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="12836295" author="appodictic" created="Sun, 21 Feb 2010 02:04:50 +0000"  >&lt;p&gt;It should never be the case that this file is not found. We should not need userspace checking as this was a buildfile *nd code error. &lt;/p&gt;</comment>
                            <comment id="12836333" author="zshao" created="Sun, 21 Feb 2010 06:33:28 +0000"  >&lt;p&gt;What do you think about &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1183&quot; title=&quot;hive.hwi.war.file vanished from hive-default.xml. error message prints wrong variable. does not start by default.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1183&quot;&gt;&lt;del&gt;HIVE-1183&lt;/del&gt;&lt;/a&gt;.showidea.diff then?&lt;/p&gt;</comment>
                            <comment id="12836463" author="appodictic" created="Sun, 21 Feb 2010 22:23:57 +0000"  >&lt;p&gt;hive-1183.showidea.diff is fine by me.  I am away from my normal setup on business so I do not have the tools to patch this up right now. If anyone else wants to that is fine by me. All I care is that HWI starts out of the box &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="12836465" author="zshao" created="Sun, 21 Feb 2010 22:28:55 +0000"  >&lt;p&gt;This is the patch for both trunk and branch-0.5.&lt;/p&gt;</comment>
                            <comment id="12836502" author="namit" created="Mon, 22 Feb 2010 03:41:21 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12836525" author="namit" created="Mon, 22 Feb 2010 06:37:19 +0000"  >&lt;p&gt;committed in 0.5 and trunk. Thanks Zheng&lt;/p&gt;</comment>
                            <comment id="12840879" author="appodictic" created="Wed, 3 Mar 2010 21:04:14 +0000"  >
&lt;p&gt;I assumed we were going to merge to the two patches. Zheng&apos;s work at finding the patch is good, but notice the FileNotFound is not displaying the correct var....So I will open another ticket on that.&lt;/p&gt;</comment>
                            <comment id="14077550" author="lefty@hortonworks.com" created="Tue, 29 Jul 2014 09:32:58 +0000"  >&lt;p&gt;The wiki had given &quot;${HIVE_HOME}/lib/hive_hwi.war&quot; as the default for &lt;b&gt;hive.hwi.war.file&lt;/b&gt; (note the underscore) so I changed it to  &quot;${HIVE_HOME}/lib/hive-hwi-&amp;lt;version&amp;gt;.war&quot; in the Hive Web Interface doc and gave both defaults with version information in the Configuration Properties doc.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveWebInterface#HiveWebInterface-Configuration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Hive Web Interface &amp;#8211; Configuration &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-HiveWebInterface(HWI)&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Hive Web Interface &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12443046">HIVE-978</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12436541" name="HIVE-1183.2.b-0.5_and_trunk.diff" size="1915" author="zshao" created="Sun, 21 Feb 2010 22:28:55 +0000"/>
                            <attachment id="12436460" name="HIVE-1183.showidea.diff" size="1915" author="zshao" created="Sat, 20 Feb 2010 20:40:44 +0000"/>
                            <attachment id="12436441" name="hive-1183-b5.0.diff" size="2130" author="appodictic" created="Sat, 20 Feb 2010 16:34:05 +0000"/>
                            <attachment id="12436442" name="hive-1183-trunk.diff" size="2125" author="appodictic" created="Sat, 20 Feb 2010 16:39:02 +0000"/>
                            <attachment id="12436415" name="hive-1183.diff" size="1447" author="appodictic" created="Sat, 20 Feb 2010 04:03:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 20 Feb 2010 07:53:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1184] Expression Not In Group By Key error is sometimes masked</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1184</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Depending on the order of expressions, the error message for a expression not in group key is not displayed; instead it is null.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; select concat(value, concat(value)) from src group by concat(value);
FAILED: Error in semantic analysis: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

hive&amp;gt; select concat(concat(value), value) from src group by concat(value);
FAILED: Error in semantic analysis: line 1:29 Expression Not In Group By Key value

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12456879">HIVE-1184</key>
            <summary>Expression Not In Group By Key error is sometimes masked</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Feb 2010 04:20:47 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:47 +0000</updated>
                            <resolved>Thu, 25 Feb 2010 08:40:17 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12837159" author="pauly" created="Tue, 23 Feb 2010 09:18:53 +0000"  >&lt;p&gt;The problem stems from DefaultExprProcessor:process(). During the AST walk, any error is cleared if a node matches a group by expression&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
      exprNodeDesc desc = TypeCheckProcFactory.processGByExpr(nd, procCtx);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (desc != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        ctx.setError(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; desc;
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Clearing the error was probably an attempt to address the generation of false errors during the DFS walk of the AST. Consider the AST fragment from the query&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT concat(src.key) FROM src GROUP BY concat(src.key)

        TOK_FUNCTION
            / \
           /   \
          /     \
     concat      .
                / \ 
               /   \
TOK_TABLE_OR_COL    key
         |
         |
        src
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;During the walk, process() will be called on src before TOK_FUNCTION. Because src is not a group by expression, an error will be set in ctx. However, when process() is called on TOK_FUNCTION, it matches the group by expression &apos;concat(src.key)&apos; and the error is cleared, producing the expected behavior.&lt;/p&gt;

&lt;p&gt;A problem arises with a query like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select concat(value, concat(value)) from src group by concat(value)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;as the AST is such that &apos;value&apos; (1st argument of outer concat) is processed before &apos;concat(value)&apos;. When process() acts on &apos;value&apos;, it sets an error because it is not a group by expression. But then the error is cleared when process() is called on &apos;concat(value)&apos;. The error should not really be cleared as it was generated outside of the group by expression.&lt;/p&gt;

&lt;p&gt;The proposed solution is to keep track of the ASTNode that generated the error and only clear the error when it was generated from a node within the group by expression.&lt;/p&gt;</comment>
                            <comment id="12837476" author="zshao" created="Tue, 23 Feb 2010 22:21:56 +0000"  >&lt;p&gt;The explanation looks good to me, but I am not convinced the solution will solve the problem.&lt;/p&gt;

&lt;p&gt;When processing &quot;concat(value, concat(value))&quot;. we will set &quot;error&quot; when processing the first &quot;value&quot;, then overwrite the &quot;error&quot; when processing the second &quot;value&quot;, correct?&lt;br/&gt;
I think the &quot;error&quot; should be part of the &quot;return value&quot; of the &quot;process&quot; function, instead of a global field in the &quot;context&quot;.&lt;/p&gt;

&lt;p&gt;Does that make sense?&lt;/p&gt;</comment>
                            <comment id="12838196" author="pauly" created="Thu, 25 Feb 2010 05:52:14 +0000"  >&lt;p&gt;From an offline conversation - the solution still works for cases like &quot;concat(value, concat(value))&quot; because the error is only set with the first &quot;value&quot; - node processors terminate early when the global error is set. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Added better comments.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12838250" author="zshao" created="Thu, 25 Feb 2010 08:40:17 +0000"  >&lt;p&gt;Committed. Thanks Paul!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436691" name="HIVE-1184.1.patch" size="6870" author="pauly" created="Tue, 23 Feb 2010 09:18:53 +0000"/>
                            <attachment id="12436951" name="HIVE-1184.2.patch" size="7920" author="pauly" created="Thu, 25 Feb 2010 05:52:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Feb 2010 22:21:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73046</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lduf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1185] Fix RCFile resource leak when opening a non-RCFile</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1185</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5476&quot; title=&quot;calling new SequenceFile.Reader(...) leaves an InputStream open, if the given sequence file is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-5476&quot;&gt;&lt;del&gt;HADOOP-5476&lt;/del&gt;&lt;/a&gt; for the bug in SequenceFile. We should do the same thing in RCFile.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456929">HIVE-1185</key>
            <summary>Fix RCFile resource leak when opening a non-RCFile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 Feb 2010 08:23:10 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:56 +0000</updated>
                            <resolved>Mon, 22 Feb 2010 23:15:16 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12836437" author="he yongqiang" created="Sun, 21 Feb 2010 20:15:25 +0000"  >&lt;p&gt;adopted the patch from hadoop-5476&lt;/p&gt;</comment>
                            <comment id="12836469" author="zshao" created="Sun, 21 Feb 2010 22:52:22 +0000"  >&lt;p&gt;+1. Will test and commit.&lt;br/&gt;
(Please do &quot;Submit Patch&quot; after you uploaded the patch file next time)&lt;/p&gt;</comment>
                            <comment id="12836471" author="zshao" created="Sun, 21 Feb 2010 22:58:54 +0000"  >&lt;p&gt;Unfortunately it does not compile with hadoop 0.17.&lt;/p&gt;

&lt;p&gt;Can you add &quot;IOUtils.cleanup&quot; to shims?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [javac] Compiling 22 source files to /data/users/zshao/hadoop_hive_trunk/build/ql/classes
    [javac] /data/users/zshao/hadoop_hive_trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java:988: cannot find symbol
    [javac] symbol  : method cleanup(org.apache.commons.logging.Log,org.apache.hadoop.fs.FSDataInputStream)
    [javac] location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.hadoop.io.IOUtils
    [javac]           IOUtils.cleanup(LOG, in);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12836768" author="he yongqiang" created="Mon, 22 Feb 2010 18:20:18 +0000"  >&lt;p&gt; we need to close that stream no matter what the current hadoop version is. So i just closed that stream inside rcfile reader.&lt;/p&gt;</comment>
                            <comment id="12836979" author="zshao" created="Mon, 22 Feb 2010 23:15:16 +0000"  >&lt;p&gt;Committed to both branch-0.5 and trunk. Thanks Yongqiang!&lt;/p&gt;</comment>
                            <comment id="12891540" author="cwsteinbach" created="Fri, 23 Jul 2010 09:45:16 +0000"  >&lt;p&gt;This was not backported to 0.5.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12416729">HADOOP-5476</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12456705">MAPREDUCE-1504</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12436535" name="hive-1185.1.patch" size="4502" author="he yongqiang" created="Sun, 21 Feb 2010 20:15:25 +0000"/>
                            <attachment id="12436602" name="hive-1185.2.patch" size="4742" author="he yongqiang" created="Mon, 22 Feb 2010 18:20:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 21 Feb 2010 20:15:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73045</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122894</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rcfile</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1186] testParse_groupby fail on openjdk6</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1186</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Using openjdk6 the testParse_groupby 1 through 6 fail. I installed the sun jdk and all the tests pass.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OpenJDK6 on debian&lt;/p&gt;</environment>
        <key id="12456980">HIVE-1186</key>
            <summary>testParse_groupby fail on openjdk6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Feb 2010 09:07:39 +0000</created>
                <updated>Wed, 16 Jun 2010 02:00:00 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lduv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1187] Implement ddldump utility for Hive Metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1187</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Implement a ddldump utility for the Hive metastore that will generate the QL DDL necessary to recreate the state of the current metastore on another metastore instance.&lt;/p&gt;

&lt;p&gt;A major use case for this utility is migrating a metastore from one database to another database, e.g. from an embedded Derby instanced to a MySQL instance.&lt;/p&gt;

&lt;p&gt;The ddldump utility should support the following features:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Ability to generate DDL for specific tables or all tables.&lt;/li&gt;
	&lt;li&gt;Ability to specify a table name prefix for the generated DDL, which will be useful for resolving table name conflicts.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12457032">HIVE-1187</key>
            <summary>Implement ddldump utility for Hive Metastore</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                            <label>ddl</label>
                            <label>derby</label>
                            <label>metastore</label>
                            <label>migration</label>
                            <label>mysql</label>
                    </labels>
                <created>Mon, 22 Feb 2010 16:51:16 +0000</created>
                <updated>Fri, 18 Nov 2011 18:31:56 +0000</updated>
                            <resolved>Thu, 10 Jun 2010 16:49:14 +0000</resolved>
                                    <version>0.6.0</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12837048" author="appodictic" created="Tue, 23 Feb 2010 02:54:33 +0000"  >&lt;p&gt;Do you want to team up on:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1161&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="12837563" author="cwsteinbach" created="Wed, 24 Feb 2010 01:28:30 +0000"  >&lt;p&gt;@Ed: I don&apos;t think there is much overlap between this enhancement and what is described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1161&quot; title=&quot;Hive Replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1161&quot;&gt;&lt;del&gt;HIVE-1161&lt;/del&gt;&lt;/a&gt;. I expect that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1161&quot; title=&quot;Hive Replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1161&quot;&gt;&lt;del&gt;HIVE-1161&lt;/del&gt;&lt;/a&gt; will involve triggering the transfer of metadata over Thrift or JDBC from one metastore to another, or via an agent that accesses both metastores via the client APIs. Dumping DDL from one metastore and replaying it on another seems like a hacky way to synchronize/transmit metadata.&lt;/p&gt;</comment>
                            <comment id="12837583" author="appodictic" created="Wed, 24 Feb 2010 02:43:03 +0000"  >&lt;p&gt;+1 Having &apos;show create table&apos; XXXX&apos;   will be very useful. I always seem to lose those table definitions.&lt;/p&gt;</comment>
                            <comment id="13152286" author="ashutoshc" created="Thu, 17 Nov 2011 20:05:27 +0000"  >&lt;p&gt;@Carl,&lt;br/&gt;
Has this been implemented? I cannot find any docs for this feature. Its resolved as duplicate but the second issue referred is not resolved either.&lt;/p&gt;</comment>
                            <comment id="13153026" author="cwsteinbach" created="Fri, 18 Nov 2011 18:31:56 +0000"  >&lt;p&gt;@Ashutosh: No, I don&apos;t think this feature has been implemented. This ticket was resolved as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-967&quot; title=&quot;Implement &amp;quot;show create table&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-967&quot;&gt;&lt;del&gt;HIVE-967&lt;/del&gt;&lt;/a&gt;, but I don&apos;t think there has been any work on 967 since then.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12442255">HIVE-967</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Feb 2010 02:54:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1188] NPE when running TestJdbcDriver/TestHiveServer</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1188</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;% ant test -Dtestcase=TestJdbcDriver

BUILD FAILED
/Users/carl/Projects/hive/hd11/hive/build.xml:154: The following error occurred while executing this line:
/Users/carl/Projects/hive/hd11/hive/build.xml:93: The following error occurred while executing this line:
/Users/carl/Projects/hive/hd11/hive/contrib/build.xml:77: java.lang.NullPointerException
	at java.util.Arrays$ArrayList.&amp;lt;init&amp;gt;(Arrays.java:3357)
	at java.util.Arrays.asList(Arrays.java:3343)
	at org.apache.hadoop.hive.ant.QTestGenTask.execute(QTestGenTask.java:248)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)
	at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1212)
	at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:441)
	at org.apache.tools.ant.taskdefs.SubAnt.execute(SubAnt.java:302)
	at org.apache.tools.ant.taskdefs.SubAnt.execute(SubAnt.java:221)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)
	at org.apache.tools.ant.Project.executeTarget(Project.java:1329)
	at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1212)
	at org.apache.tools.ant.Main.runBuild(Main.java:801)
	at org.apache.tools.ant.Main.startAnt(Main.java:218)
	at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
	at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TestHiveServer throws the same error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12457062">HIVE-1188</key>
            <summary>NPE when running TestJdbcDriver/TestHiveServer</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Feb 2010 19:47:25 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:30 +0000</updated>
                            <resolved>Tue, 23 Feb 2010 07:14:49 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12836945" author="nzhang" created="Mon, 22 Feb 2010 22:12:20 +0000"  >&lt;p&gt;I do not have this NPE on the latest trunk. But I did see errors for -Dstandalone=true. I&apos;m looking into that. &lt;/p&gt;</comment>
                            <comment id="12836954" author="cwsteinbach" created="Mon, 22 Feb 2010 22:25:12 +0000"  >&lt;p&gt;Git does recognize &lt;a href=&quot;http://git.wiki.kernel.org/index.php/GitFaq#Can_I_add_empty_directories.3F&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;empty directories&lt;/a&gt;. People who use the git mirror of the Hive subversion repository will not see the empty directories that exist in the Hive source tree, and as a result tests such as TestJdbcDriver and TestHiveServer will fail since they are unable to find the empty qfile directories that appear under contrib and ql. Following the advice given &lt;a href=&quot;http://stackoverflow.com/questions/115983/how-do-i-add-an-empty-directory-to-a-git-repository&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt; this patch adds a .gitignore file to each of the empty directories in the Hive source tree in order to force Git to create these directories.&lt;/p&gt;

</comment>
                            <comment id="12836975" author="nzhang" created="Mon, 22 Feb 2010 23:02:16 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="12836977" author="nzhang" created="Mon, 22 Feb 2010 23:13:46 +0000"  >&lt;p&gt;Carl, I got the following error when I apply your patch. &lt;/p&gt;

&lt;p&gt;patch -p0  -i ~/patches/&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1188&quot; title=&quot;NPE when running TestJdbcDriver/TestHiveServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1188&quot;&gt;&lt;del&gt;HIVE-1188&lt;/del&gt;&lt;/a&gt;.patch&lt;br/&gt;
patch: **** Only garbage was found in the patch input.&lt;/p&gt;

&lt;p&gt;It seems svn doesn&apos;t like the empty .gitignore file. Can you add some dummy lines in .gitignore to make it work? &lt;/p&gt;</comment>
                            <comment id="12836982" author="cwsteinbach" created="Mon, 22 Feb 2010 23:22:22 +0000"  >&lt;p&gt;Add a comment to each .gitignore file explaining its purpose.&lt;/p&gt;</comment>
                            <comment id="12836983" author="cwsteinbach" created="Mon, 22 Feb 2010 23:23:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can you add some dummy lines in .gitignore to make it work? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;</comment>
                            <comment id="12837118" author="nzhang" created="Tue, 23 Feb 2010 07:14:49 +0000"  >&lt;p&gt;Committed to branch-0.5 and trunk. Thanks Carl!&lt;/p&gt;</comment>
                            <comment id="12891541" author="cwsteinbach" created="Fri, 23 Jul 2010 09:47:06 +0000"  >&lt;p&gt;Not backported to 0.5.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12469832">HIVE-1475</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12436644" name="HIVE-1188.2.patch" size="5628" author="cwsteinbach" created="Mon, 22 Feb 2010 23:22:22 +0000"/>
                            <attachment id="12436636" name="HIVE-1188.patch" size="2131" author="cwsteinbach" created="Mon, 22 Feb 2010 22:23:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 22 Feb 2010 22:12:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ldvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>git</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
