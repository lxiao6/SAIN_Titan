<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:19:36 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-11-28+AND+created+%3C%3D+2011-12-6+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="16" total="16"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2611] Make index table output of create index command if index is table based</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2611</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If an index is table based, when that index is created a table is created to contain that index.  This should be listed in the output of the command.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533029">HIVE-2611</key>
            <summary>Make index table output of create index command if index is table based</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Nov 2011 23:21:54 +0000</created>
                <updated>Mon, 30 Apr 2012 21:11:25 +0000</updated>
                            <resolved>Thu, 15 Dec 2011 05:00:04 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Indexing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13159034" author="jiraposter@reviews.apache.org" created="Tue, 29 Nov 2011 01:57:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2953/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2953/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Yongqiang He and namit jain.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If an index is table based, when an index is created it creates a table for that index.  We should log that table as the output of an index creation command.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; title=&quot;Make index table output of create index command if index is table based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2611&quot;&gt;&lt;del&gt;HIVE-2611&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2611&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 1207723 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1207723 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/alter_concatenate_indexed_table.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/index_compact_entry_limit.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/index_compact_size_limit.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/merge_negative_1.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/alter_concatenate_indexed_table.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/alter_index.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auth.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_empty.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_file_format.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_multiple.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_partitioned.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_self_join.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_unused.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_update.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap1.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap2.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap3.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap_auto.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap_auto_partitioned.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap_compression.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap_rc.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_1.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_2.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_3.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compression.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_creation.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_stale.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_stale_partitioned.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/show_indexes_edge_cases.q.out 1207723 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/show_indexes_syntax.q.out 1207723 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2953/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2953/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Verified that the output of a create index command is now the index table.&lt;/p&gt;

&lt;p&gt;Ran the unit tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13166373" author="namit" created="Fri, 9 Dec 2011 18:01:21 +0000"  >&lt;p&gt;Kevin, can you use phabricator to submit a diff ?&lt;/p&gt;</comment>
                            <comment id="13166374" author="namit" created="Fri, 9 Dec 2011 18:01:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/Hive/phabricatorcodereview.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/Hive/phabricatorcodereview.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13166376" author="namit" created="Fri, 9 Dec 2011 18:03:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13166395" author="phabricator@reviews.facebook.net" created="Fri, 9 Dec 2011 18:22:39 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; title=&quot;Make index table output of create index command if index is table based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2611&quot;&gt;&lt;del&gt;HIVE-2611&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make index table output of create index command if index is table based&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  If an index is table based, when an index is created it creates a table for that index.  We should log that table as the output of an index creation command.&lt;/p&gt;

&lt;p&gt;  This differs from the review board diff only in that the Lint errors have been resolved.&lt;/p&gt;

&lt;p&gt;  If an index is table based, when that index is created a table is created to contain that index.  This should be listed in the output of the command.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D705&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientnegative/alter_concatenate_indexed_table.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/merge_negative_1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_update.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_auto_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_indexes_syntax.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_rc.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_indexes_edge_cases.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_concatenate_indexed_table.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_index.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_binary_search.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_self_join.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_creation.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_compression.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_auto.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_empty.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auth.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compression.q.out&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1545/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1545/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13166397" author="phabricator@reviews.facebook.net" created="Fri, 9 Dec 2011 18:24:39 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; title=&quot;Make index table output of create index command if index is table based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2611&quot;&gt;&lt;del&gt;HIVE-2611&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make index table output of create index command if index is table based&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D705&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientnegative/alter_concatenate_indexed_table.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/merge_negative_1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_update.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_auto_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_indexes_syntax.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_rc.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_indexes_edge_cases.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_concatenate_indexed_table.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_index.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_binary_search.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_self_join.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_creation.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_compression.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_auto.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_empty.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auth.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compression.q.out&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13166470" author="namit" created="Fri, 9 Dec 2011 19:23:00 +0000"  >&lt;p&gt;Can you refresh ? &lt;br/&gt;
I am getting some merge conflicts&lt;/p&gt;</comment>
                            <comment id="13167742" author="phabricator@reviews.facebook.net" created="Mon, 12 Dec 2011 20:03:30 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; title=&quot;Make index table output of create index command if index is table based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2611&quot;&gt;&lt;del&gt;HIVE-2611&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make index table output of create index command if index is table based&quot;.&lt;/p&gt;

&lt;p&gt;  The last update was to address the report of a merge conflict.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D705&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13167743" author="phabricator@reviews.facebook.net" created="Mon, 12 Dec 2011 20:03:31 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; title=&quot;Make index table output of create index command if index is table based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2611&quot;&gt;&lt;del&gt;HIVE-2611&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make index table output of create index command if index is table based&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D705&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D705&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientnegative/alter_concatenate_indexed_table.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/merge_negative_1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_update.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_file_format.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_auto_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_indexes_syntax.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_rc.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_unused.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_indexes_edge_cases.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_concatenate_indexed_table.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_index.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_binary_search.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale_partitioned.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_self_join.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_creation.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_compression.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_auto.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_empty.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compact_3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auto_multiple.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_auth.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/index_compression.q.out&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13168998" author="namit" created="Wed, 14 Dec 2011 02:08:33 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13169967" author="namit" created="Thu, 15 Dec 2011 05:00:04 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13169986" author="hudson" created="Thu, 15 Dec 2011 06:21:42 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.23.0 #25 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.23.0/25/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.23.0/25/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; title=&quot;Make index table output of create index command if index is table based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2611&quot;&gt;&lt;del&gt;HIVE-2611&lt;/del&gt;&lt;/a&gt; Make index table output of create index command if&lt;br/&gt;
index is table based (Kevin Wilfong via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214622&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214622&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_concatenate_indexed_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_compact_entry_limit.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_compact_size_limit.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/merge_negative_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_concatenate_indexed_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_index.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auth.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_empty.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_file_format.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_multiple.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_self_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_unused.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_update.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_auto.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_auto_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_compression.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_rc.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compression.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_creation.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_stale.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_stale_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_indexes_edge_cases.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_indexes_syntax.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13170230" author="hudson" created="Thu, 15 Dec 2011 14:11:34 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1148 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1148/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1148/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2611&quot; title=&quot;Make index table output of create index command if index is table based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2611&quot;&gt;&lt;del&gt;HIVE-2611&lt;/del&gt;&lt;/a&gt; Make index table output of create index command if&lt;br/&gt;
index is table based (Kevin Wilfong via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214622&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214622&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/alter_concatenate_indexed_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_compact_entry_limit.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_compact_size_limit.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/merge_negative_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_concatenate_indexed_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_index.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auth.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_empty.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_file_format.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_multiple.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_self_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_unused.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_auto_update.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_auto.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_auto_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_compression.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_rc.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_binary_search.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compression.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_creation.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_stale.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_stale_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_indexes_edge_cases.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_indexes_syntax.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265271" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:25 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506765" name="ASF.LICENSE.NOT.GRANTED--HIVE-2611.D705.1.patch" size="3028472" author="phabricator@reviews.facebook.net" created="Fri, 9 Dec 2011 18:22:40 +0000"/>
                            <attachment id="12506766" name="ASF.LICENSE.NOT.GRANTED--HIVE-2611.D705.2.patch" size="3028472" author="phabricator@reviews.facebook.net" created="Fri, 9 Dec 2011 18:24:40 +0000"/>
                            <attachment id="12507049" name="ASF.LICENSE.NOT.GRANTED--HIVE-2611.D705.3.patch" size="3028225" author="phabricator@reviews.facebook.net" created="Mon, 12 Dec 2011 20:03:31 +0000"/>
                            <attachment id="12505435" name="HIVE-2611.1.patch.txt" size="3025762" author="kevinwilfong" created="Tue, 29 Nov 2011 01:56:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Nov 2011 01:57:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218761</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i010af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2612] support hive table/partitions exists in more than one region</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2612</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;h2&gt;&lt;a name=&quot;Note%3ATheproposalhttps%3A%2F%2Fcwiki.apache.org%2Fconfluence%2Fdisplay%2FHive%2FHiveacrossMultipleDataCenters%2528PhysicalClusters%2529forthisfeaturewaswithdrawn%2CandthispatchwassubsequentlyrevertedinHIVE2965....&quot;&gt;&lt;/a&gt;Note: The &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+across+Multiple+Data+Centers+%28Physical+Clusters%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;proposal&lt;/a&gt; for this feature was withdrawn, and this patch was subsequently reverted in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2965&quot; title=&quot;Revert HIVE-2612&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2965&quot;&gt;&lt;del&gt;HIVE-2965&lt;/del&gt;&lt;/a&gt;. This feature does not appear in any official release of Hive.&lt;/h2&gt;

&lt;p&gt;1) add region object into hive metastore&lt;br/&gt;
2) each partition/table has a primary region and a list of living regions, and also data location in each region&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533036">HIVE-2612</key>
            <summary>support hive table/partitions exists in more than one region</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2011 00:55:21 +0000</created>
                <updated>Wed, 9 Jan 2013 10:25:10 +0000</updated>
                            <resolved>Sat, 11 Feb 2012 07:49:38 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="13188156" author="cwsteinbach" created="Wed, 18 Jan 2012 00:51:45 +0000"  >&lt;p&gt;This is a big feature to implement. I really think it needs a design document before we start committing patches. Yongqiang, do you think you can write something up?&lt;/p&gt;</comment>
                            <comment id="13188173" author="he yongqiang" created="Wed, 18 Jan 2012 01:23:40 +0000"  >&lt;p&gt;yeah. sure. internally we actually had some discussions around this. I can write something about it.&lt;/p&gt;

&lt;p&gt;Right now, our main concern is that the cluster feature may be not so useful for most people. So we want to know what other people think about the potential incompatibilities that this could introduce.&lt;/p&gt;

&lt;p&gt;actually sent out an discussion to dev@, copy it here:&lt;/p&gt;

&lt;p&gt;&quot;&lt;br/&gt;
We are planning to make hive run across multiple data centers&lt;br/&gt;
(physical clusters). We prefer to use hive metastore to provide a&lt;br/&gt;
unified namespace.&lt;br/&gt;
Tables/partitions can exist in more than one cluster. And one cluster&lt;br/&gt;
is defined as a primary cluster. A primary cluster is a table level&lt;br/&gt;
property. A table T1&apos;s primary cluster is C1 meaning :1) C1 contains&lt;br/&gt;
all data that is available in all other clusters. 2) write is only&lt;br/&gt;
allowed in this cluster for table C1. but need to allow exceptions&lt;br/&gt;
here 3) new partitions are only allowed to be created in C1.  4) all&lt;br/&gt;
data changes to T1 happened in the primary cluster should be&lt;br/&gt;
replicated to other clusters if there are any secondary clusters. but&lt;br/&gt;
there should be a conf to disable it as there are some exception&lt;br/&gt;
situations.&lt;/p&gt;

&lt;p&gt;The first thing that needs to be done is to make hive metastore have a&lt;br/&gt;
concept of cluster. And that also means all thrift communication calls&lt;br/&gt;
to metastore need to provide a cluster parameter. So we have there&lt;br/&gt;
options here:&lt;br/&gt;
1) add a cluster parameter to existing thrift interfaces&lt;br/&gt;
or&lt;br/&gt;
2) add new interfaces which do exactly the same set of functionalities&lt;br/&gt;
as old ones but using a different name (use _on_cluster suffifx&lt;br/&gt;
maybe?) and have a cluster parameter&lt;br/&gt;
or&lt;br/&gt;
3) overwrite database name for the purpose of cluster name. And allow&lt;br/&gt;
a table co-exist in multiple databases. But that require to promote&lt;br/&gt;
table to top level citizen, and degrade database. For example, &quot;show&lt;br/&gt;
tables&quot; used to scan all tables in current db, but now need to scan&lt;br/&gt;
all tables in all databases.&lt;/p&gt;

&lt;p&gt;We would like to get more ideas about which one to choose, and we are&lt;br/&gt;
definitely open to other alternatives that we missed here.&lt;/p&gt;

&lt;p&gt;We are also looking for other systems that have solved similar&lt;br/&gt;
problems. If anyone knows such a system, we would like to know.&lt;br/&gt;
Appreciate that!&lt;br/&gt;
&quot;&lt;/p&gt;</comment>
                            <comment id="13188183" author="slider" created="Wed, 18 Jan 2012 01:35:51 +0000"  >&lt;p&gt;Yongqiang, please clarify what you mean by option 3. Currently, databases contain tables (db1.foo is unrelated to db2.foo). Is option 3 saying make tables span databases (db1.foo is the same table as db2.foo) instead? That would be a radical change, so maybe I&apos;ve misunderstood it.&lt;/p&gt;</comment>
                            <comment id="13188220" author="he yongqiang" created="Wed, 18 Jan 2012 02:46:30 +0000"  >&lt;p&gt;yes. Your understanding is correct. db1.foo is the same table as db2.foo. It is listed as one potential option.&lt;/p&gt;</comment>
                            <comment id="13188322" author="slider" created="Wed, 18 Jan 2012 07:43:10 +0000"  >&lt;p&gt;Won&apos;t that conflict with authorization?&lt;/p&gt;</comment>
                            <comment id="13188589" author="he yongqiang" created="Wed, 18 Jan 2012 18:24:40 +0000"  >&lt;p&gt;Not just authorization. It requires a complete redesign of existing database feature. And the only benefit of doing that is the backward interface compatibility. &lt;/p&gt;

&lt;p&gt;@Carl, this should not be just a metastore change. We should also provide an utility to replicate data. but we can do it in a followup and focus on the metastore changes on this jira.&lt;/p&gt;</comment>
                            <comment id="13189526" author="cwsteinbach" created="Fri, 20 Jan 2012 00:19:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;A table T1&apos;s primary cluster is C1 meaning :1) C1 contains all data that is available in all other clusters.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Does this mean that if T1&apos;s primary cluster is C1, then all of the partitions in T1 must also have have their primary partition set to C1? If that&apos;s the case then primary cluster should probably be a table level property, and the list of replica clusters can be a table/partition level property.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;2) write is only allowed in this cluster for table C1. but need to allow exceptions here&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What are the exceptions?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;4) all data changes to T1 happened in the primary cluster should be replicated to other clusters if there are any secondary clusters. but there should be a conf to disable it as there are some exception situations.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What are the exceptions?&lt;/p&gt;

&lt;p&gt;How will dynamic partitions work? Where will new partitions get the list of replica clusters from? Will they inherit it from the table definition?&lt;/p&gt;

&lt;p&gt;Hive now supports insert-append into a partition (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-306&quot; title=&quot;Support &amp;quot;INSERT [INTO] destination&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-306&quot;&gt;&lt;del&gt;HIVE-306&lt;/del&gt;&lt;/a&gt;). Suppose that the metadata for a particular partition indicates that it is replicated to clusters C2 and C3. If I insert new data into the partition in the primary cluster C1, then the metadata is now invalid. How is this going to be handled?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;2) add new interfaces which do exactly the same set of functionalities as old ones but using a different name (use _on_cluster suffix maybe?) and have a cluster parameter&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is going to introduce new codepaths that need to be tested separately, and also double the amount of work people need to do every time a new metastore API call is created. I don&apos;t think this is a good approach.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;3) overwrite database name for the purpose of cluster name. And allow a table co-exist in multiple databases. But that require to promote table to top level citizen, and degrade database. For example, &quot;show tables&quot; used to scan all tables in current db, but now need to scan all tables in all databases.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think this is an option since it breaks backwards compatibility and effectively changes the whole notion of what a db/schema is. A lot of people in the community already depend on this feature.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;1) add a cluster parameter to existing thrift interfaces&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This sounds like the best option to me. I think Thrift supports API evolution via default values for missing parameters, but setting a default value in this case may be a little tricky.&lt;/p&gt;

&lt;p&gt;Also, instead of modifying the Thrift interface, is it possible that you could instead leverage the work that&apos;s being done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2720&quot; title=&quot;Merge MetaStoreListener and HiveMetaHook interfaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2720&quot;&gt;HIVE-2720&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13196422" author="namit" created="Mon, 30 Jan 2012 21:14:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;A table T1&apos;s primary cluster is C1 meaning :1) C1 contains all data that is available in all other clusters. Does this mean that if T1&apos;s primary cluster is C1, then all of the partitions in T1 must also have have their primary partition set to C1? If that&apos;s the case then primary cluster should probably be a table level property, and the list of replica clusters can be a table/partition level property.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree&lt;/p&gt;</comment>
                            <comment id="13196447" author="namit" created="Mon, 30 Jan 2012 21:37:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;write is only allowed in this cluster for table C1. but need to allow exceptions here. What are the exceptions ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Currently, there should be no exceptions. Eventually, if we provide something in hive to do a cross-cluster write, that should be like an exception. There may be a hive command like, Replicate T@P from cluster1 to c1uster2.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;all data changes to T1 happened in the primary cluster should be replicated to other clusters if there are any secondary clusters. but there should be a conf to disable it as there are some exception situations.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This question should not be relevant now. A much simpler to visualize this is: for every table, there is a primary cluster, and a list of secondary clusters. All the partitions belong to the primary cluster, and may belong to one or more secondary clusters. Every hive session has a current cluster, and the read happens from the current cluster. An error is thrown if the partition is missing from the current cluster, but is present in the primary cluster. I will write a new wiki, and attach it - it might be simpler to understand that way.&lt;/p&gt;

&lt;p&gt;Dynamic partitions should not require anything different.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;overwrite database name for the purpose of cluster name. And allow a table co-exist in multiple databases. But that require to promote table to top level citizen, and degrade database. For example, &quot;show tables&quot; used to scan all tables in current db, but now need to scan all tables in all databases. I don&apos;t think this is an option since it breaks backwards compatibility and effectively changes the whole notion of what a db/schema is. A lot of people in the community already depend on this feature.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;add a cluster parameter to existing thrift interfaces. This sounds like the best option to me. I think Thrift supports API evolution via default values for missing parameters, but setting a default value in this case may be a little tricky.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also, instead of modifying the Thrift interface, is it possible that you could instead leverage the work that&apos;s being done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2720&quot; title=&quot;Merge MetaStoreListener and HiveMetaHook interfaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2720&quot;&gt;HIVE-2720&lt;/a&gt;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will look into it&lt;/p&gt;</comment>
                            <comment id="13196729" author="he yongqiang" created="Tue, 31 Jan 2012 06:15:49 +0000"  >&lt;p&gt;a preliminary patch. Namit will take over the development. &lt;/p&gt;

&lt;p&gt;Things left:&lt;br/&gt;
1) finish drop table command&lt;br/&gt;
2) alter table add partition&lt;br/&gt;
3) drop partition&lt;br/&gt;
4) alter table add cluster&lt;br/&gt;
5) insert overwrite...&lt;br/&gt;
6) set table primary cluster&lt;/p&gt;</comment>
                            <comment id="13198175" author="namit" created="Wed, 1 Feb 2012 21:37:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+across+Multiple+Data+Centers+(Physical+Clusters&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Hive+across+Multiple+Data+Centers+(Physical+Clusters&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Added a new document which explains some of the thinking and the design.&lt;br/&gt;
Please comment&lt;/p&gt;</comment>
                            <comment id="13198289" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 22:53:52 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2612&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; Initial version - not for review&lt;/p&gt;

&lt;p&gt;  1) add cluster object into hive metastore&lt;br/&gt;
  2) each partition/table has a creation cluster and a list of living clusters, and also data location in each cluster&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MCluster.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/RawStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DDLWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ClusterDDLDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3291/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3291/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13200101" author="namit" created="Fri, 3 Feb 2012 22:16:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+across+Multiple+Data+Centers+%28Physical+Clusters%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Hive+across+Multiple+Data+Centers+%28Physical+Clusters%29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;is the correct link to the wiki&lt;/p&gt;</comment>
                            <comment id="13201070" author="phabricator@reviews.facebook.net" created="Mon, 6 Feb 2012 06:23:59 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MClusterStorageDescriptor.java&lt;/p&gt;</comment>
                            <comment id="13201673" author="phabricator@reviews.facebook.net" created="Mon, 6 Feb 2012 22:12:59 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MClusterStorageDescriptor.java&lt;/p&gt;</comment>
                            <comment id="13202003" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 02:18:58 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;br/&gt;
  metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13202019" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 02:34:57 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;br/&gt;
  metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13202719" author="kevinwilfong" created="Tue, 7 Feb 2012 20:04:35 +0000"  >&lt;p&gt;I attached a patch to this JIRA which provides scripts to update the metastore for derby, MySQL and postgres.&lt;/p&gt;

&lt;p&gt;It also changes the default cluster name to &apos;&apos; (empty string) and fixes an inconsistency where the size of PRIMARY_CLUSTER_NAME in SDS had a different size than the CLUSTER_NAME column in CLUSTER_SDS.&lt;/p&gt;</comment>
                            <comment id="13202724" author="namit" created="Tue, 7 Feb 2012 20:13:12 +0000"  >&lt;p&gt;Can everyone concerned please take a look ?&lt;/p&gt;

&lt;p&gt;For anyone not using clusters, they need to run the scripts provided in this patch to upgrade the metastore.&lt;br/&gt;
The time taken for the upgrade depends on the size of the metastore (number of tables/partitions), but it should&lt;br/&gt;
be fairly small - it is less than 10 minutes for facebook cluster.&lt;/p&gt;</comment>
                            <comment id="13202726" author="namit" created="Tue, 7 Feb 2012 20:13:29 +0000"  >&lt;p&gt;All the existing APIs will continue to work.&lt;/p&gt;</comment>
                            <comment id="13202729" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 20:14:58 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/scripts/upgrade/derby/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/derby/upgrade-0.9.0-to-0.10.0.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/derby/hive-schema-0.10.0.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/upgrade-0.9.0-to-0.10.0.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/hive-schema-0.10.0.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;br/&gt;
  metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13202783" author="kevinwilfong" created="Tue, 7 Feb 2012 21:05:26 +0000"  >&lt;p&gt;This change will require the user to update their metastore schema.  The scripts in the patch should be sufficient provided the schema is already up to date.&lt;/p&gt;

&lt;p&gt;The only schema changes needed are a new table and a new column is added to SDS, it should not take long, no more than five minutes depending on the size of the SDS table, to update.&lt;/p&gt;</comment>
                            <comment id="13202843" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 21:55:00 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/scripts/upgrade/derby/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/derby/upgrade-0.9.0-to-0.10.0.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/derby/hive-schema-0.10.0.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/upgrade-0.9.0-to-0.10.0.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/hive-schema-0.10.0.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;br/&gt;
  metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ClusterStorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13202935" author="kevinwilfong" created="Tue, 7 Feb 2012 23:19:05 +0000"  >&lt;p&gt;I attached a patch which fixes an error seen where JDO was looking for a column which doesn&apos;t exist in the schema in the update scripts provided.  The collection of MClusterStorageDescriptors was changed from a List to a Set, and a primary key was indicated in package.jdo.  This fixes the error by removing the need to order the MClusterStorageDescriptors and providing a way to uniquely identify them.  The primary key is already present in the upgrade scripts provided.&lt;/p&gt;</comment>
                            <comment id="13203200" author="kevinwilfong" created="Wed, 8 Feb 2012 02:48:43 +0000"  >&lt;p&gt;I attached a patch which adds checks in the metastore so that, for now, now table or partition can be created or altered to have a primary cluster name other than the default, as specified by the config variable hive.default.cluster.name  If the primary cluster name for a table or partition is not set, it defaults to that value as well.  I also changed the name of hive.use.default.cluster to hive.use.input.primary.cluster to better convert it&apos;s meaning.&lt;/p&gt;</comment>
                            <comment id="13205127" author="namit" created="Fri, 10 Feb 2012 01:03:48 +0000"  >&lt;p&gt;Since the word &apos;cluster&apos; is used for different purposes - DFS cluster, MR cluster etc., changing to &apos;region&apos;.&lt;br/&gt;
Region and data center can be used in the same way for the purpose of this jira. &lt;/p&gt;
</comment>
                            <comment id="13205688" author="namit" created="Fri, 10 Feb 2012 19:40:12 +0000"  >&lt;p&gt;Changed &apos;cluster&apos; to &apos;region&apos; and ran the testclidriver tests.&lt;br/&gt;
Overwrote a bunch of test files.&lt;/p&gt;

&lt;p&gt;Kevin, can you change the upgrade files, since the schema has changed.&lt;/p&gt;</comment>
                            <comment id="13205762" author="kevinwilfong" created="Fri, 10 Feb 2012 21:17:33 +0000"  >&lt;p&gt;Attached a patch containing the updated metastore upgrade scripts.&lt;/p&gt;</comment>
                            <comment id="13205793" author="kevinwilfong" created="Fri, 10 Feb 2012 22:01:37 +0000"  >&lt;p&gt;Updated the patch with some small changes:&lt;br/&gt;
cleaned up a few remaining mentions of cluster instead of region&lt;br/&gt;
always check/set the primary region name for a table in the metastore&lt;/p&gt;</comment>
                            <comment id="13205830" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 22:54:58 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexists in more than one region&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2612&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  1) add region object into hive metastore&lt;br/&gt;
  2) each partition/table has a primary region and a list of living regions, and also data location in each region&lt;/p&gt;

&lt;p&gt;  This is just an initial patch, it sets up the metastore so that we can begin to support multiple regions, it simply adds a default primary region to each table/partition and adds an empty list of secondary regions.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Ran most of the unit tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1707&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1707&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/scripts/upgrade/derby/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/derby/upgrade-0.9.0-to-0.10.0.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/derby/hive-schema-0.10.0.derby.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/upgrade-0.9.0-to-0.10.0.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/mysql/hive-schema-0.10.0.mysql.sql&lt;br/&gt;
  metastore/scripts/upgrade/postgres/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MRegionStorageDescriptor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;br/&gt;
  metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/RegionStorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  contrib/src/test/results/clientnegative/serde_regex.q.out&lt;br/&gt;
  contrib/src/test/results/clientpositive/serde_regex.q.out&lt;br/&gt;
  contrib/src/test/results/clientpositive/fileformat_base64.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/inputddl3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/rcfile_createas1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/input15.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union25.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/smb_mapjoin9.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/inputddl1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/symlink_text_input_format.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/create_union_table.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ctas.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/merge3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/fileformat_text.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/inputddl2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/fileformat_sequencefile.q.out&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3639/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3639/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13206050" author="namit" created="Sat, 11 Feb 2012 07:49:38 +0000"  >&lt;p&gt;Committed. Thanks Kevin and Yongqiang&lt;/p&gt;</comment>
                            <comment id="13206096" author="hudson" created="Sat, 11 Feb 2012 12:51:24 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1254 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1254/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1254/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; support hive table/partitions exists in more than one region&lt;br/&gt;
(Kevin Wilfong via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1243013&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1243013&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientnegative/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/fileformat_base64.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/hive-schema-0.10.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/upgrade-0.9.0-to-0.10.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/hive-schema-0.10.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/upgrade-0.9.0-to-0.10.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/RegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MRegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/package.jdo&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/metadata/TestHive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/create_union_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ctas.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_sequencefile.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_text.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input15.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/merge3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_createas1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin9.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/symlink_text_input_format.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union25.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13208958" author="ashutoshc" created="Wed, 15 Feb 2012 23:29:54 +0000"  >&lt;p&gt;@Kevin,&lt;/p&gt;

&lt;p&gt;You named the script upgrade-0.9.0-to-0.10.0.mysql.sql, upgrade-0.9.0-to-0.10.0.derby.sql, hive-schema-0.10.0.derby.sql, hive-schema-0.10.0.mysql.sql But we have not released 0.9 yet. These should be named upgrade-0.8.0-to-0.9.0.mysql.sql, upgrade-0.8.0-to-0.9.0.derby.sql, hive-schema-0.9.0.derby.sql, hive-schema-0.9.0.mysql.sql respectively. &lt;/p&gt;</comment>
                            <comment id="13208978" author="kevinwilfong" created="Wed, 15 Feb 2012 23:43:40 +0000"  >&lt;p&gt;@Ashutosh&lt;/p&gt;

&lt;p&gt;I&apos;m sorry about that, there already were scripts with the name upgrade-0.8.0-to-0.9.0.mysql.sql, I didn&apos;t realize those were Hive version numbers, I thought this was a metastore versioning system.&lt;/p&gt;

&lt;p&gt;I can move the sql commands in those files into the 0.8.0-to-0.9.0 scripts and rename the schema-0.10.0 scripts to schema-0.9.0&lt;/p&gt;</comment>
                            <comment id="13258735" author="hudson" created="Sat, 21 Apr 2012 01:40:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1386 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1386/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1386/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2965&quot; title=&quot;Revert HIVE-2612&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2965&quot;&gt;&lt;del&gt;HIVE-2965&lt;/del&gt;&lt;/a&gt; : Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; (hashutosh) (Revision 1328469)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328469&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328469&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientnegative/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/fileformat_base64.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/009-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/hive-schema-0.9.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/upgrade-0.8.0-to-0.9.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/009-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/hive-schema-0.9.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/upgrade-0.8.0-to-0.9.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/009-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/RegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MRegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/package.jdo&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/metadata/TestHive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/create_union_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ctas.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_sequencefile.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_text.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input15.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/merge3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_createas1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin9.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/symlink_text_input_format.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union25.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265287" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:31 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13266276" author="phabricator@reviews.facebook.net" created="Wed, 2 May 2012 01:14:46 +0000"  >&lt;p&gt;njain has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; support hive table/partitions coexistes in more than one clusters&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1569&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13286870" author="lars_francke" created="Thu, 31 May 2012 19:47:32 +0000"  >&lt;p&gt;Can anyone explain to me what this means/how it works or point me to some documentation?&lt;/p&gt;</comment>
                            <comment id="13286872" author="kevinwilfong" created="Thu, 31 May 2012 19:51:41 +0000"  >&lt;p&gt;I believe this was reverted prior to the Version 0.9.0&lt;/p&gt;</comment>
                            <comment id="13286874" author="kevinwilfong" created="Thu, 31 May 2012 19:52:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2965&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13286880" author="lars_francke" created="Thu, 31 May 2012 19:58:37 +0000"  >&lt;p&gt;Ah, okay, thank you.&lt;/p&gt;</comment>
                            <comment id="13548293" author="hudson" created="Wed, 9 Jan 2013 10:25:10 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2965&quot; title=&quot;Revert HIVE-2612&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2965&quot;&gt;&lt;del&gt;HIVE-2965&lt;/del&gt;&lt;/a&gt; : Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; (hashutosh) (Revision 1328469)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt; support hive table/partitions exists in more than one region&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1243013)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328469&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328469&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientnegative/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/fileformat_base64.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/009-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/hive-schema-0.9.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/upgrade-0.8.0-to-0.9.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/009-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/hive-schema-0.9.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/upgrade-0.8.0-to-0.9.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/009-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/RegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MRegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/package.jdo&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/metadata/TestHive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/create_union_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ctas.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_sequencefile.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_text.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input15.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/merge3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_createas1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin9.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/symlink_text_input_format.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union25.q.out&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1243013&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1243013&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientnegative/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/fileformat_base64.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientpositive/serde_regex.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/hive-schema-0.10.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/upgrade-0.9.0-to-0.10.0.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/hive-schema-0.10.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/upgrade-0.9.0-to-0.10.0.mysql.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/010-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2612&quot; title=&quot;support hive table/partitions exists in more than one region&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2612&quot;&gt;&lt;del&gt;HIVE-2612&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/RegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_constants.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MRegionStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MStorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/package.jdo&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/CreateTableDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/metadata/TestHive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/create_union_table.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ctas.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_sequencefile.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/fileformat_text.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input15.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/inputddl3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/merge3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_createas1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin9.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/symlink_text_input_format.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union25.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12551647">HIVE-2965</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12512863" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1569.1.patch" size="90132" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 22:53:53 +0000"/>
                            <attachment id="12513397" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1569.2.patch" size="9756" author="phabricator@reviews.facebook.net" created="Mon, 6 Feb 2012 06:24:03 +0000"/>
                            <attachment id="12513508" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1569.3.patch" size="9639" author="phabricator@reviews.facebook.net" created="Mon, 6 Feb 2012 22:12:59 +0000"/>
                            <attachment id="12513556" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1569.4.patch" size="1133675" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 02:18:59 +0000"/>
                            <attachment id="12513557" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1569.5.patch" size="1134383" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 02:34:58 +0000"/>
                            <attachment id="12513680" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1569.6.patch" size="1184547" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 20:14:59 +0000"/>
                            <attachment id="12513694" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1569.7.patch" size="1186306" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 21:55:01 +0000"/>
                            <attachment id="12514173" name="ASF.LICENSE.NOT.GRANTED--HIVE-2612.D1707.1.patch" size="1499540" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 22:54:58 +0000"/>
                            <attachment id="12512535" name="HIVE-2612.1.patch" size="1083704" author="he yongqiang" created="Tue, 31 Jan 2012 06:15:49 +0000"/>
                            <attachment id="12513672" name="HIVE-2612.2.patch.txt" size="1186300" author="kevinwilfong" created="Tue, 7 Feb 2012 19:56:05 +0000"/>
                            <attachment id="12513710" name="HIVE-2612.3.patch.txt" size="1188359" author="kevinwilfong" created="Tue, 7 Feb 2012 23:16:02 +0000"/>
                            <attachment id="12513749" name="HIVE-2612.4.patch.txt" size="1192869" author="kevinwilfong" created="Wed, 8 Feb 2012 02:46:42 +0000"/>
                            <attachment id="12514157" name="HIVE-2612.6.patch.txt" size="1633750" author="kevinwilfong" created="Fri, 10 Feb 2012 21:17:07 +0000"/>
                            <attachment id="12514165" name="HIVE-2612.7.patch.txt" size="1498136" author="kevinwilfong" created="Fri, 10 Feb 2012 22:00:30 +0000"/>
                            <attachment id="12514177" name="HIVE-2612.8.patch.txt" size="1501478" author="kevinwilfong" created="Fri, 10 Feb 2012 23:08:47 +0000"/>
                            <attachment id="12514146" name="hive.2612.5.patch" size="1448189" author="namit" created="Fri, 10 Feb 2012 19:39:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Jan 2012 00:51:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218768</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lksv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Requires a metastore upgrade.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2613] HiveCli eclipse launch configuration hangs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2613</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12533072">HIVE-2613</key>
            <summary>HiveCli eclipse launch configuration hangs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2011 06:53:45 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:05 +0000</updated>
                            <resolved>Wed, 30 Nov 2011 03:03:49 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13159125" author="cwsteinbach" created="Tue, 29 Nov 2011 06:58:50 +0000"  >&lt;p&gt;I&apos;m running Eclipse 3.7-linux-gtk-x86_64 on Ubuntu 11.04. Whenever I run the&lt;br/&gt;
HiveCli launch configuration from within Eclipse it causes Eclipse to freeze.&lt;/p&gt;

&lt;p&gt;I did some debugging and determined that the freeze is triggered by the&lt;br/&gt;
initialization of the jline ConsoleReader class in CliDriver. More digging&lt;br/&gt;
yielded the interesting fact that this behavior disappears when I remove&lt;br/&gt;
the -Dhive.root.logger=INFO,console setting from the launch configuration.&lt;/p&gt;
</comment>
                            <comment id="13159133" author="jiraposter@reviews.apache.org" created="Tue, 29 Nov 2011 07:11:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2958/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2958/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This is a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2613&quot; title=&quot;HiveCli eclipse launch configuration hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2613&quot;&gt;&lt;del&gt;HIVE-2613&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Set the encoding for the console appender in hive-log4j.properties&lt;/li&gt;
	&lt;li&gt;Add hive-log4j.properties to the classpath of the HiveCli launch configuration.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2613&quot; title=&quot;HiveCli eclipse launch configuration hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2613&quot;&gt;&lt;del&gt;HIVE-2613&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2613&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/conf/hive-log4j.properties 9e2a1cc &lt;br/&gt;
  eclipse-templates/HiveCLI.launchtemplate 40f68ac &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2958/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2958/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;
</comment>
                            <comment id="13159555" author="jvs" created="Tue, 29 Nov 2011 21:29:38 +0000"  >&lt;p&gt;+1, will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13159773" author="jvs" created="Wed, 30 Nov 2011 03:03:49 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Carl!&lt;/p&gt;</comment>
                            <comment id="13159896" author="hudson" created="Wed, 30 Nov 2011 08:14:57 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1113 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1113/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1113/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2613&quot; title=&quot;HiveCli eclipse launch configuration hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2613&quot;&gt;&lt;del&gt;HIVE-2613&lt;/del&gt;&lt;/a&gt;. HiveCli eclipse launch configuration hangs&lt;br/&gt;
(Carl Steinbach via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1208228&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1208228&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/conf/hive-log4j.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/eclipse-templates/HiveCLI.launchtemplate&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505459" name="HIVE-2613.1.patch.txt" size="2402" author="cwsteinbach" created="Tue, 29 Nov 2011 07:07:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Nov 2011 07:11:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124021</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2614] Thrift api to know if partition exists or not</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2614</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently if we want to know if a partition exists or not, we should call get_partition() which constructs the partition and returns. This would require joining multiple tables at the metastore end and it might not scale for many such operations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533080">HIVE-2614</key>
            <summary>Thrift api to know if partition exists or not</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="amareshwari">Amareshwari Sriramadasu</assignee>
                                    <reporter username="amareshwari">Amareshwari Sriramadasu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2011 08:13:47 +0000</created>
                <updated>Sat, 21 Apr 2012 16:22:14 +0000</updated>
                                                                            <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13250169" author="cwsteinbach" created="Mon, 9 Apr 2012 20:48:34 +0000"  >&lt;p&gt;@Amareshwari: Can you give a concrete example of a use-case for this new call? In general I think providing calls like this is a bad idea since it encourages people to accidentally add time-of-check-to-time-of-use bugs, e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2938&quot; title=&quot;ALTER TABLE ADD IF NOT EXISTS PARTITION is not atomic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2938&quot;&gt;HIVE-2938&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13251329" author="amareshwari" created="Wed, 11 Apr 2012 05:18:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;@Amareshwari: Can you give a concrete example of a use-case for this new call? In general I think providing calls like this is a bad idea since it encourages people to accidentally add time-of-check-to-time-of-use bugs, e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2938&quot; title=&quot;ALTER TABLE ADD IF NOT EXISTS PARTITION is not atomic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2938&quot;&gt;HIVE-2938&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Main motivation here is to improve performance of exists check, which would just return boolean instead of the full partition. The use-case we were looking mainly was filtering i.e. processing the partitions that do not exists yet and add them.&lt;/p&gt;</comment>
                            <comment id="13258875" author="ashutoshc" created="Sat, 21 Apr 2012 16:22:14 +0000"  >&lt;p&gt;Unlinking from 0.9 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 20:48:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2615] CTAS with literal NULL creates VOID type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2615</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Create the table with a column that always contains NULL:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;hive&amp;gt; create table bad as select 1 x, null z from dual;     &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because there&apos;s no type, Hive gives it the VOID type:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;hive&amp;gt; describe bad;&lt;br/&gt;
OK&lt;br/&gt;
x	int	&lt;br/&gt;
z	void	&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This seems weird, because AFAIK, there is no normal way to create a column of type VOID.  The problem is that the table can&apos;t be queried:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;hive&amp;gt; select * from bad;&lt;br/&gt;
OK&lt;br/&gt;
Failed with exception java.io.IOException:java.lang.RuntimeException: Internal error: no LazyObject for VOID&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Worse, even if you don&apos;t select that field, the query fails at runtime:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;hive&amp;gt; select x from bad;&lt;br/&gt;
...&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12533227">HIVE-2615</key>
            <summary>CTAS with literal NULL creates VOID type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="clarkyzl">Zhuoluo Yang</assignee>
                                    <reporter username="electrum">David Phillips</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2011 00:44:25 +0000</created>
                <updated>Tue, 9 May 2017 10:15:10 +0000</updated>
                            <resolved>Sun, 23 Mar 2014 02:25:33 +0000</resolved>
                                    <version>0.6.0</version>
                    <version>0.7.0</version>
                    <version>0.8.0</version>
                    <version>0.9.0</version>
                    <version>0.10.0</version>
                    <version>0.11.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13159720" author="electrum" created="Wed, 30 Nov 2011 00:54:40 +0000"  >&lt;p&gt;I see this as three different issues:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;The NULL literal produces a VOID type.&lt;/li&gt;
	&lt;li&gt;Tables with a VOID type cannot be queried at all.&lt;/li&gt;
	&lt;li&gt;Queries for tables with a VOID type fail at execution time rather than compile time.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Some potential solutions:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Treat a VOID type as always being NULL.  This is a non-backwards-compatible object inspector change that require changes all over the place, including third party code.&lt;/li&gt;
	&lt;li&gt;Pick a type for a NULL literal in CTAS.  There is no obvious choice for the type, but STRING seems like the best option.&lt;/li&gt;
	&lt;li&gt;Have the CTAS error out at compile time with a hint for the user to use CAST to specify the type.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13565006" author="clarkyzl" created="Tue, 29 Jan 2013 02:34:05 +0000"  >&lt;p&gt;I think option 3 is the better choice, from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=david.phillips&quot; class=&quot;user-hover&quot; rel=&quot;david.phillips&quot;&gt;David Phillips&lt;/a&gt; says.&lt;br/&gt;
Is any body working on this issue?&lt;/p&gt;</comment>
                            <comment id="13674132" author="clarkyzl" created="Tue, 4 Jun 2013 07:23:06 +0000"  >&lt;p&gt;Attach a patch.&lt;br/&gt;
The checks after result schema is generated.&lt;br/&gt;
if CTAS and contains void, it raise an exception and ask user to cast the type.&lt;/p&gt;</comment>
                            <comment id="13674136" author="clarkyzl" created="Tue, 4 Jun 2013 07:35:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/11622/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/11622/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13674138" author="clarkyzl" created="Tue, 4 Jun 2013 07:37:20 +0000"  >&lt;p&gt;Would any committer review this issue?&lt;/p&gt;</comment>
                            <comment id="13674388" author="ashutoshc" created="Tue, 4 Jun 2013 13:55:33 +0000"  >&lt;p&gt;Instead of in SemanticAnalyzer, better place to do this check is in TypeCheckProcFactory.java&lt;/p&gt;</comment>
                            <comment id="13771940" author="johndee" created="Thu, 19 Sep 2013 14:42:31 +0000"  >&lt;p&gt;An example of what the cast would look like: &lt;/p&gt;

&lt;p&gt;create table &amp;lt;new_table&amp;gt; as select &amp;lt;column&amp;gt;, cast(null as &amp;lt;type&amp;gt;) &amp;lt;column_name&amp;gt; from &amp;lt;table_name&amp;gt;;&lt;/p&gt;

&lt;p&gt;create table null_test as select user, cast(null as bigint) test from a;&lt;/p&gt;</comment>
                            <comment id="13944303" author="qwertymaniac" created="Sun, 23 Mar 2014 02:25:33 +0000"  >&lt;p&gt;This has been fixed via &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4172&quot; title=&quot;JDBC2 does not support VOID type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4172&quot;&gt;&lt;del&gt;HIVE-4172&lt;/del&gt;&lt;/a&gt;. Resolving as duplicate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12636967">HIVE-4172</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12586062" name="HIVE-2615.1.patch" size="2523" author="clarkyzl" created="Tue, 4 Jun 2013 07:23:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Jan 2013 02:34:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lktb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124022</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2616] Passing user identity from metastore client to server in non-secure mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2616</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently in unsecure mode client don&apos;t pass on user identity. As a result hdfs and other operations done by server gets executed by user running metastore process instead of being done in context of client. This results in problem as reported here: &lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hive-user/201111.mbox/%3CCAK0mCrRC3aPqtRHDe2J25Rm0JX6TS1KXxd7KPjqJjoqBjg=APA@mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/hive-user/201111.mbox/%3CCAK0mCrRC3aPqtRHDe2J25Rm0JX6TS1KXxd7KPjqJjoqBjg=APA@mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533237">HIVE-2616</key>
            <summary>Passing user identity from metastore client to server in non-secure mode</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2011 02:50:12 +0000</created>
                <updated>Mon, 14 Apr 2014 22:53:08 +0000</updated>
                            <resolved>Thu, 29 Dec 2011 22:59:46 +0000</resolved>
                                                    <fixVersion>0.8.1</fixVersion>
                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13159763" author="ashutoshc" created="Wed, 30 Nov 2011 02:52:31 +0000"  >&lt;p&gt;Here is a &quot;design&quot; patch which illustrate one approach to solve this. This is WIP. If anyone can take a look and provide a feedback, that will be greatly appreciated. &lt;/p&gt;</comment>
                            <comment id="13159862" author="ashutoshc" created="Wed, 30 Nov 2011 06:47:41 +0000"  >&lt;p&gt;Some details:&lt;br/&gt;
Currently metastore client when connecting with metastore server doesn&apos;t pass on its identity in unsecure mode. In secure mode connection is wrapped into sasl connection which does passes the user identity but only after doing kerberos based authentication. Hadoop also has similar requirements where dfsclient request namenode to perform certain operations on user&apos;s behalf. In secure mode, user identity is passed through sasl layer and in unsecure mode it is passed through connection header. Thrift metastore client-server connection however doesn&apos;t pass on any connection header at a time of a connection setup. So, mimicking what hadoop does can not yield desired result in backward compatible way. This patch takes an approach where it sends ugi information as a first rpc call from client to server straight after connection setup, which server then caches and uses for subsequent rpcs. As a result a new thrift api set_ugi() is added. This ensures backward compatibility since old client will never make this rpc, so server will continue with its previous behavior, but will perform doAs() when ugi information is indeed made available by new clients.  &lt;/p&gt;</comment>
                            <comment id="13159865" author="jiraposter@reviews.apache.org" created="Wed, 30 Nov 2011 06:51:40 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/if/hive_metastore.thrift 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1205119 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1205119 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1205119 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1207966 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIContainingTransport.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/UGIBasedProcessor.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Design patch, not much tested yet.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13160297" author="ashutoshc" created="Wed, 30 Nov 2011 20:13:50 +0000"  >&lt;p&gt;Previous patch had some bugs. Updated patch fixes them, all the test in metasore directory passes with this.&lt;/p&gt;</comment>
                            <comment id="13161930" author="ashutoshc" created="Fri, 2 Dec 2011 23:45:58 +0000"  >&lt;p&gt;Updated patch which does refactoring to better organize the code.&lt;/p&gt;</comment>
                            <comment id="13161934" author="jiraposter@reviews.apache.org" created="Fri, 2 Dec 2011 23:47:40 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-02 23:46:56.664874)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated patch&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1209772 &lt;br/&gt;
  trunk/metastore/if/hive_metastore.thrift 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1209772 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1209772 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1209772 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;br/&gt;
  trunk/shims/ivy.xml 1209772 &lt;br/&gt;
  trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1209772 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1209772 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1209772 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1209772 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java 1209772 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Design patch, not much tested yet.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13161942" author="ashutoshc" created="Sat, 3 Dec 2011 00:05:24 +0000"  >&lt;p&gt;Some design notes:&lt;/p&gt;

&lt;p&gt;MetaStoreClient makes a (newly introduced) rpc immediately after opening the connection called set_ugi() which sends ugi information to server. On the server side this patch introduces new transport called TUGIContainingTransport. This transport simply wraps underlying TSocket transport and stores UGI with it. Patch also introduces new processor called TUGIBasedProcessor which extends ThriftHiveMetaStoreProcessor. It annotates underlying transport with ugi information when first call by metastore client is made. It then subsequently executes following rpc in context of the ugi. &lt;/p&gt;

&lt;p&gt;Implementation Notes: Requires some shims gymnastics to make it work with both 20 and 20S shims because UserGroupInformation has changed significantly between two. &lt;/p&gt;</comment>
                            <comment id="13161945" author="jiraposter@reviews.apache.org" created="Sat, 3 Dec 2011 00:07:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-03 00:07:25.189092)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1209772 &lt;br/&gt;
  trunk/metastore/if/hive_metastore.thrift 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1209772 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1209772 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1209772 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1209772 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;br/&gt;
  trunk/shims/ivy.xml 1209772 &lt;br/&gt;
  trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1209772 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1209772 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1209772 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1209772 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java 1209772 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13168668" author="ashutoshc" created="Tue, 13 Dec 2011 20:05:16 +0000"  >&lt;p&gt;Any feedback on this will be appreciated. Since, it was easier to add a test case using hcatalog test harness, I have added a test there on &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-181&quot; title=&quot;Test for passing remote user identity in unsecure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-181&quot;&gt;HCATALOG-181&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13168782" author="jiraposter@reviews.apache.org" created="Tue, 13 Dec 2011 22:19:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3886&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3886&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8718&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8718&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Typos:  it&apos;s, don&apos;t&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8719&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8719&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Need ASF header on all new files.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8720&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8720&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    remove extra spaces&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8721&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8721&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t think we should commit this without at least a reference to a Thrift patch to get the necessary enhancement for making this brittle jankiness unnecessary.&lt;/p&gt;

&lt;p&gt;    Alternatively, is it possible to use a dynamic proxy to avoid this?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-12-03 00:07:25, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-03 00:07:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13169510" author="ashutoshc" created="Wed, 14 Dec 2011 17:16:48 +0000"  >&lt;p&gt;@John,&lt;br/&gt;
I don&apos;t see how Dynamic Proxy will be better then current approach. Would you like to expand a bit on that?&lt;/p&gt;</comment>
                            <comment id="13170507" author="ashutoshc" created="Thu, 15 Dec 2011 21:34:53 +0000"  >&lt;p&gt;Linking to thrift issue. Thrift-1465 . Bryan over there has offered to fix Thrift side of story which when available and after Hive upgrades to that version we can get rid of reflection ugliness here.&lt;/p&gt;</comment>
                            <comment id="13170521" author="jvs" created="Thu, 15 Dec 2011 22:01:10 +0000"  >&lt;p&gt;OK, can you submit the thrift patch?  If we&apos;ll be able to uptake that eventually, then I&apos;m fine with the current approach.  I was thinking dynamic proxy would allow us to do the necessary method interception without needing to futz with method accessibility.&lt;/p&gt;

&lt;p&gt;Carl, are you good with this?&lt;/p&gt;</comment>
                            <comment id="13170682" author="ashutoshc" created="Fri, 16 Dec 2011 01:56:33 +0000"  >&lt;p&gt;Sure. I uploaded the patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1465&quot; title=&quot;Visibility of methods in generated java code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1465&quot;&gt;&lt;del&gt;THRIFT-1465&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13170685" author="cwsteinbach" created="Fri, 16 Dec 2011 01:59:23 +0000"  >&lt;p&gt;@John: I&apos;m looking at the patch now. Will respond soon with some comments.&lt;/p&gt;</comment>
                            <comment id="13170726" author="jiraposter@reviews.apache.org" created="Fri, 16 Dec 2011 03:07:31 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3939&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8885&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8885&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    All properties that appear in HiveConf also need to appear in conf/hive-default.xml.template along with a description.&lt;/p&gt;




&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8893&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8893&lt;/a&gt;&amp;gt;&lt;/p&gt;


&lt;p&gt;    I think it would make sense to change the name to &apos;hive.metastore.client.enable.setugi&apos;. Also, I think this feature should be disabled by default.&lt;/p&gt;





&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8894&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8894&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please add a new property hive.metastore.server.enable.setugi that allows this RPC to be disabled on the server side, and set the default value to false.&lt;/p&gt;



&lt;p&gt;trunk/metastore/if/hive_metastore.thrift&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8895&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8895&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please add a comment explaining what this call does.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8886&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8886&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    When I apply your changes and run the thriftif ant target I see a small diff in this file. Did you use Thrift 0.7.0 to generate these files?&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8887&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8887&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Indentation.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8888&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8888&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    So instead of checking the hive.metastore.sasl.enabled property we now just check to see if we&apos;re using a security enabled shim, and if so assume that the user wants to enable security? I don&apos;t think this is correct behavior since the fact that we&apos;re using a secure version of Hadoop does not necessarily imply that we actually have security enabled.&lt;/p&gt;

&lt;p&gt;    Also, it looks like this change deprecates the hive.metastore.sasl.enabled configuration property. In line with my comment above I think it makes sense to leave this property in, but if you do remove it then you need to release note the change and remove this property from HiveConf and conf/hive-default.xml.template.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8896&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8896&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Indentation.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8897&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We&apos;re initializing SASL even if isSecure=false?&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8889&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8889&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Formatting.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8891&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8891&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Formatting: please add spaces.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8898&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8898&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &quot;new client talking to old metastore&quot; seems to imply that we&apos;re able to determine whether or not we&apos;re talking to an old server, which isn&apos;t true. In reality, the onus is on the admin to ensure that both sides support this feature. What happens if the client calls set_ugi(), but the server doesn&apos;t support it? Is the error message helpful?&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8892&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Should this be &quot;Failed to login to the MetaStore Server...&quot;?&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8901&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8901&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I think it&apos;s more accurate to say that the processor &quot;&lt;b&gt;checks&lt;/b&gt; to see if the first call is to set_ugi()...&quot; instead of saying that it &lt;b&gt;expects&lt;/b&gt; the first call to be to set_ugi().&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8902&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8902&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    +1 to referencing the THRIFT JIRA. I think the class comment should call out that this is a temporary workaround cite a TODO.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8899&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8899&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Formatting: &apos;} else {&apos;&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8900&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8900&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    There&apos;s a TAB here. Please remove.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8903&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8903&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Spacing.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8904&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8904&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please change the name of this method to isSecurityEnabled(), or create a new method with that name instead of modifying this method. The current name is misleading and will cause confusion (e.g. my comments in HiveMetaStore).&lt;/p&gt;



&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8905&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8905&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Spacing.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8906&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8906&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Spacing.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8907&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8907&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing ASF header.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8909&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8909&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    If this is client-specific code then maybe the package should be o.a.h.hive.thrift.client.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8908&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8908&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    What&apos;s the point of these assert statements? Remove?&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8910&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8910&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please add javadoc for doAs() and createRemoteUser().&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8911&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8911&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Spacing.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8912&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8912&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Spacing.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8913&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8913&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    ASF header.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-12-03 00:07:25, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-03 00:07:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13170879" author="jiraposter@reviews.apache.org" created="Fri, 16 Dec 2011 10:04:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3947&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3947&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;Instead of introducing set_ugi into the metastore thrift interface, could this not be solved through SASL (looks like a prime use case for SASL)? &lt;/p&gt;

&lt;p&gt;Have the server request transmission of ugi when configured to do so and the client react accordingly. Similar to how delegation token is transmitted (SaslClientCallbackHandler).&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Thomas&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-12-03 00:07:25, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-03 00:07:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13171419" author="jiraposter@reviews.apache.org" created="Sat, 17 Dec 2011 02:32:30 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 10:03:39, Thomas wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Instead of introducing set_ugi into the metastore thrift interface, could this not be solved through SASL (looks like a prime use case for SASL)? &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Have the server request transmission of ugi when configured to do so and the client react accordingly. Similar to how delegation token is transmitted (SaslClientCallbackHandler).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not sure, how SASL could be used to solve this problem. Furthermore, even if it does it will require lock-step upgrade of &lt;b&gt;all&lt;/b&gt; clients, which is not desirable, whereas current approach doesn&apos;t have this drawback. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ashutosh&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3947&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3947&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-12-03 00:07:25, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-03 00:07:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13171421" author="jiraposter@reviews.apache.org" created="Sat, 17 Dec 2011 02:42:30 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java, line 237&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61777#file61777line237&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61777#file61777line237&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     All properties that appear in HiveConf also need to appear in conf/hive-default.xml.template along with a description.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java, line 238&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61777#file61777line238&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61777#file61777line238&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I think it would make sense to change the name to &apos;hive.metastore.client.enable.setugi&apos;. Also, I think this feature should be disabled by default.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done. False by default.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java, line 239&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61777#file61777line239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61777#file61777line239&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Please add a new property hive.metastore.server.enable.setugi that allows this RPC to be disabled on the server side, and set the default value to false.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I reused same config hive.metastore.execute.setugi at both client and server which is off by default.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/if/hive_metastore.thrift, line 438&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61778#file61778line438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61778#file61778line438&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Please add a comment explaining what this call does.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Added comment.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java, line 145&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61782#file61782line145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61782#file61782line145&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     When I apply your changes and run the thriftif ant target I see a small diff in this file. Did you use Thrift 0.7.0 to generate these files?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not sure how that happened. I reran ant thriftif again. So, those should go away now.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 3589&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3589&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3589&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Indentation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 3743&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3743&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3743&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     So instead of checking the hive.metastore.sasl.enabled property we now just check to see if we&apos;re using a security enabled shim, and if so assume that the user wants to enable security? I don&apos;t think this is correct behavior since the fact that we&apos;re using a secure version of Hadoop does not necessarily imply that we actually have security enabled.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Also, it looks like this change deprecates the hive.metastore.sasl.enabled configuration property. In line with my comment above I think it makes sense to leave this property in, but if you do remove it then you need to release note the change and remove this property from HiveConf and conf/hive-default.xml.template.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Reverted back to use old config variables to avoid the issues outlined. &lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 3751&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3751&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Indentation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 3756&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3756&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3756&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     We&apos;re initializing SASL even if isSecure=false?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 3758&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3758&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61787#file61787line3758&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Formatting.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java, line 263&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61788#file61788line263&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61788#file61788line263&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Formatting: please add spaces.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java, line 280&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61788#file61788line280&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61788#file61788line280&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Should this be &quot;Failed to login to the MetaStore Server...&quot;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java, line 264&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61788#file61788line264&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61788#file61788line264&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &quot;new client talking to old metastore&quot; seems to imply that we&apos;re able to determine whether or not we&apos;re talking to an old server, which isn&apos;t true. In reality, the onus is on the admin to ensure that both sides support this feature. What happens if the client calls set_ugi(), but the server doesn&apos;t support it? Is the error message helpful?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If client calls set_ugi() and server doesn&apos;t support it then exception will be thrown to client which client will ignore and continue. So, effectively you will end up with old behavior.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java, line 32&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line32&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line32&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I think it&apos;s more accurate to say that the processor &quot;&lt;b&gt;checks&lt;/b&gt; to see if the first call is to set_ugi()...&quot; instead of saying that it &lt;b&gt;expects&lt;/b&gt; the first call to be to set_ugi().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java, line 50&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line50&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line50&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     +1 to referencing the THRIFT JIRA. I think the class comment should call out that this is a temporary workaround cite a TODO.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java, line 92&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line92&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line92&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Formatting: &apos;} else {&apos;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java, line 127&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line127&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61789#file61789line127&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     There&apos;s a TAB here. Please remove.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java, line 519&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61791#file61791line519&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61791#file61791line519&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Spacing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java, line 501&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61792#file61792line501&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61792#file61792line501&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Please change the name of this method to isSecurityEnabled(), or create a new method with that name instead of modifying this method. The current name is misleading and will cause confusion (e.g. my comments in HiveMetaStore).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Reverted this change as no longer required.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java, line 378&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61793#file61793line378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61793#file61793line378&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Spacing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java, line 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61794#file61794line1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61794#file61794line1&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Missing ASF header.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Added.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java, line 16&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61794#file61794line16&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61794#file61794line16&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     If this is client-specific code then maybe the package should be o.a.h.hive.thrift.client.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Moved.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java, line 44&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61794#file61794line44&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61794#file61794line44&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     What&apos;s the point of these assert statements? Remove?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Removed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java, line 78&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61796#file61796line78&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61796#file61796line78&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Spacing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Added.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java, line 83&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61796#file61796line83&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61796#file61796line83&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Spacing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-12-16 03:06:59, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java, line 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/2/?file=61797#file61797line1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/2/?file=61797#file61797line1&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     ASF header.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Added.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ashutosh&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3939&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-12-03 00:07:25, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-03 00:07:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge.java 1209772 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13171422" author="ashutoshc" created="Sat, 17 Dec 2011 02:43:34 +0000"  >&lt;p&gt;Updated patch to address Carl&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13171423" author="jiraposter@reviews.apache.org" created="Sat, 17 Dec 2011 02:44:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-17 02:42:36.039580)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated the patch to address Carl&apos;s comments.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1215380 &lt;br/&gt;
  trunk/conf/hive-default.xml.template 1215380 &lt;br/&gt;
  trunk/metastore/if/hive_metastore.thrift 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1215380 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1215380 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1215380 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1215380 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;br/&gt;
  trunk/shims/ivy.xml 1215380 &lt;br/&gt;
  trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1215380 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1215380 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1215380 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1215380 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13172662" author="ashutoshc" created="Mon, 19 Dec 2011 22:05:07 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;BUILD SUCCESSFUL
Total time: 302 minutes 28 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All the tests passed.&lt;/p&gt;</comment>
                            <comment id="13172668" author="jiraposter@reviews.apache.org" created="Mon, 19 Dec 2011 22:09:31 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3984&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3984&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Is it possible to add some testcases? Specifically I&apos;d like to see a test that has a client with setugi enabled connect to a server with setugi disabled and vice-versa.&lt;/p&gt;



&lt;p&gt;trunk/conf/hive-default.xml.template&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9004&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9004&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This describes the action instead of the effect. Please change to something like &quot;In unsecure mode, setting this property to true will cause the metastore to execute DFS operations using the client&apos;s reported user and group permissions. Note that this property must be set on both the client and server sides.&quot;&lt;/p&gt;

&lt;p&gt;    Also, it may be easier to understand if you separate this out into to separate properties: hive.metastore.client.setugi and hive.metastore.server.setugi&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9005&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Spacing.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9000&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The formatting/indentation in this method is still not correct. Please use 2 character indents, nested &apos;else&apos; operators, etc.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9009&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9009&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please add some logging statements here, e.g.&lt;/p&gt;

&lt;p&gt;    &quot;Starting DB backed MetaStore Server in Secure Mode&quot;&lt;/p&gt;

&lt;p&gt;    &quot;Starting DB backed MetaStore Server&quot;&lt;/p&gt;

&lt;p&gt;    &quot;Starting DB backed MetaStore Server with SetUGI enabled&quot;&lt;/p&gt;




&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9001&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9001&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    If the call to set_ugi() fails, is logging a message and continuing really the right behavior? Why not just fail outright?&lt;/p&gt;

&lt;p&gt;    Also, if you think that continuing is the correct behavior, then I think the description of metastore.execute.setugi should be updated to explain that this is a best effort approach, and it&apos;s possible that your setting will not be honored.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment8999&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment8999&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    There&apos;s a TAB character here and on line 285. Please remove.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9013&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9013&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Add a newline.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-12-17 02:42:36, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-17 02:42:36)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml.template 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13172691" author="jiraposter@reviews.apache.org" created="Mon, 19 Dec 2011 22:35:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3985&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3985&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;About testing, see my earlier comment. To do any real tests for this, one needs to do &apos;sudo&apos; and then run tests. I have not found an easy way to do that in Hive. HCatalog has test infrastructure which makes this kind of thing possible, where I am adding these tests. See, &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-181&quot; title=&quot;Test for passing remote user identity in unsecure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-181&quot;&gt;HCATALOG-181&lt;/a&gt; Also, I have manually verified all four combinations of new/old client and new/old server and results were of my satisfaction. &lt;/p&gt;


&lt;p&gt;trunk/conf/hive-default.xml.template&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9018&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9018&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I will update the text. But, I think splitting it in two properties will be more confusing then useful. If ever some one uses them and both client and server somehow uses same hive-site.xml, then having one property make sure its either turned on or off for both client and server. &lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9019&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9019&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    will fix&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9020&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9020&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    will fix&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9024&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9024&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Will add.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9021&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9021&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    In my opinion thats a right behavior because you dont want existing application to break when server is upgraded and is running with setugi on. I will update the text about best effort.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9022&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9022&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Will remove.&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9023&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9023&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Will add.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ashutosh&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-12-17 02:42:36, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-17 02:42:36)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml.template 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13172698" author="jiraposter@reviews.apache.org" created="Mon, 19 Dec 2011 22:47:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3987&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3987&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/#comment9030&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#comment9030&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; you dont want existing application to break when server is upgraded and is running with setugi on&lt;/p&gt;

&lt;p&gt;    Right, but this is the client-side, which is a little different. If the client requests set_ugi and doesn&apos;t get it I think it may be better to throw an exception. Right now it doesn&apos;t seem like the client has any way of knowing whether or not their set_ugi request has been honored.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-12-17 02:42:36, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-17 02:42:36)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml.template 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13172703" author="jiraposter@reviews.apache.org" created="Mon, 19 Dec 2011 22:53:30 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-12-19 22:45:48, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java, line 279&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2975/diff/3/?file=65044#file65044line279&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff/3/?file=65044#file65044line279&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &amp;gt; you dont want existing application to break when server is upgraded and is running with setugi on&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Right, but this is the client-side, which is a little different. If the client requests set_ugi and doesn&apos;t get it I think it may be better to throw an exception. Right now it doesn&apos;t seem like the client has any way of knowing whether or not their set_ugi request has been honored.&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;Right, but this is the client-side, which is a little different. If the client requests set_ugi and doesn&apos;t get it I think it may be better to throw an exception. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Since this is a current behavior, I am inclined to keep it that way. If we throw an exception, this will be change of behavior and will surprise those apps. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Right now it doesn&apos;t seem like the client has any way of knowing whether or not their set_ugi request has been honored.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Client catches TException and logs it, so client can know about it, if it wants to.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ashutosh&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3987&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3987&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-12-17 02:42:36, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-17 02:42:36)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml.template 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13172705" author="jiraposter@reviews.apache.org" created="Mon, 19 Dec 2011 22:55:30 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-12-19 22:35:15, Ashutosh Chauhan wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; About testing, see my earlier comment. To do any real tests for this, one needs to do &apos;sudo&apos; and then run tests. I have not found an easy way to do that in Hive. HCatalog has test infrastructure which makes this kind of thing possible, where I am adding these tests. See, &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-181&quot; title=&quot;Test for passing remote user identity in unsecure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-181&quot;&gt;HCATALOG-181&lt;/a&gt; Also, I have manually verified all four combinations of new/old client and new/old server and results were of my satisfaction.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wouldn&apos;t it make more sense to add this test infrastructure directly to Hive where the feature is implemented? Also, manually testing this feature today does nothing to prevent someone from breaking it tomorrow. That&apos;s why we need automated test coverage for this patch.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/#review3985&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/#review3985&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-12-17 02:42:36, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-12-17 02:42:36)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml.template 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/if/hive_metastore.thrift 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/ivy.xml 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1215380 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13172820" author="ashutoshc" created="Tue, 20 Dec 2011 01:19:57 +0000"  >&lt;p&gt;Patch incorporating latest Carl&apos;s comments. &lt;br/&gt;
I also added/modified following tests which Carl suggested:&lt;/p&gt;

&lt;p&gt;Test                       |     Client setugi setting  | Server setugi setting&lt;br/&gt;
TestRemoteHiveMetaStore    |     false                  | false&lt;br/&gt;
TestSetUGIBothClientServer |     true                   | true &lt;br/&gt;
TestSetUGIOnlyServer       |     false                  | true&lt;br/&gt;
TestSetUGIOnlyClient       |     true                   | false&lt;/p&gt;</comment>
                            <comment id="13172848" author="jiraposter@reviews.apache.org" created="Tue, 20 Dec 2011 02:05:31 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-20 02:05:22.736212)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated patch incorporating Carl&apos;s comments.&lt;br/&gt;
Also added tests as requested by Carl.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Pass user identity in metastore connection in unsecure mode&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2616&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1221059 &lt;br/&gt;
  trunk/conf/hive-default.xml.template 1221059 &lt;br/&gt;
  trunk/metastore/if/hive_metastore.thrift 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py 1221059 &lt;br/&gt;
  trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb 1221059 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1221059 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1221059 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java 1221059 &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnBothClientServer.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyClient.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyServer.java PRE-CREATION &lt;br/&gt;
  trunk/shims/ivy.xml 1221059 &lt;br/&gt;
  trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1221059 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1221059 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java 1221059 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1221059 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2975/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2975/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;All the tests in metastore dir passes. Manually tested that file on hdfs is owned by user running the client and not by user running metastore server.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13175345" author="cwsteinbach" created="Fri, 23 Dec 2011 09:13:25 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13177447" author="ashutoshc" created="Thu, 29 Dec 2011 22:59:46 +0000"  >&lt;p&gt;Thanks, Carl for the review. Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13177573" author="hudson" created="Fri, 30 Dec 2011 06:45:09 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1176 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1176/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1176/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt; : Passing user identity from metastore client to server in non-secure mode (Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1225683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1225683&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnBothClientServer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyServer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13188297" author="amareshwari" created="Wed, 18 Jan 2012 06:15:53 +0000"  >&lt;p&gt;Would like to commit this to branch-0.8. Patch applies as is. Will run tests and commit, if there are no objections.&lt;/p&gt;</comment>
                            <comment id="13188313" author="cwsteinbach" created="Wed, 18 Jan 2012 07:13:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13189024" author="amareshwari" created="Thu, 19 Jan 2012 09:19:34 +0000"  >&lt;p&gt;Committed this to branch-0.8-r2&lt;/p&gt;</comment>
                            <comment id="13189119" author="hudson" created="Thu, 19 Jan 2012 14:05:06 +0000"  >&lt;p&gt;Integrated in Hive-0.8.1-SNAPSHOT-h0.21 #166 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.8.1-SNAPSHOT-h0.21/166/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-0.8.1-SNAPSHOT-h0.21/166/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt;. Merge -r 1225682:1225683 &lt;a href=&quot;https://svn.apache.org/repos/asf/hive/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/hive/trunk&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;amareshwari : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1233260&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1233260&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnBothClientServer.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyClient.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyServer.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8-r2/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265261" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:23 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548289" author="hudson" created="Wed, 9 Jan 2013 10:25:09 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2616&quot; title=&quot;Passing user identity from metastore client to server in non-secure mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2616&quot;&gt;&lt;del&gt;HIVE-2616&lt;/del&gt;&lt;/a&gt; : Passing user identity from metastore client to server in non-secure mode (Ashutosh Chauhan) (Revision 1225683)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1225683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1225683&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnBothClientServer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestSetUGIOnOnlyServer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/thrift/client/TUGIAssumingTransport.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TFilterTransport.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13660463" author="clarkyzl" created="Fri, 17 May 2013 08:16:29 +0000"  >&lt;p&gt;Hi!&lt;br/&gt;
I am curious about this patch, what will happen if &quot;hive.metastore.sasl.enabled&quot; is NOT enabled and &quot;hive.metastore.execute.setugi&quot; is set.&lt;br/&gt;
Look into it from the code, I think the ugi is passed to the HMS and meaning nothing. The HMS will create/delete HDFS dir use the server side UGI.&lt;br/&gt;
Is there a way to use client side ugi to let HMS manipulate HDFS without hive.metastore.sasl.enabled?&lt;/p&gt;</comment>
                            <comment id="13660466" author="clarkyzl" created="Fri, 17 May 2013 08:24:19 +0000"  >&lt;p&gt;Is there a way to let user create their table/part dir based on their own UGI?&lt;/p&gt;</comment>
                            <comment id="13660474" author="clarkyzl" created="Fri, 17 May 2013 08:32:11 +0000"  >&lt;p&gt;I think I&apos;ve got the point. &lt;br/&gt;
Is TUGIBasedProcessor.process() doing this?&lt;/p&gt;

&lt;p&gt;      try &lt;/p&gt;
{
        shim.doAs(clientUgi, pvea);
        return true;
      }
&lt;p&gt; catch (RuntimeException rte) {&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12535231">THRIFT-1465</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12708312">HIVE-6903</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12505571" name="hive-2616.patch" size="90090" author="ashutoshc" created="Wed, 30 Nov 2011 02:52:31 +0000"/>
                            <attachment id="12505655" name="hive-2616_1.patch" size="91164" author="ashutoshc" created="Wed, 30 Nov 2011 20:13:50 +0000"/>
                            <attachment id="12505945" name="hive-2616_3.patch" size="114883" author="ashutoshc" created="Fri, 2 Dec 2011 23:45:58 +0000"/>
                            <attachment id="12507763" name="hive-2616_4.patch" size="116130" author="ashutoshc" created="Sat, 17 Dec 2011 02:43:34 +0000"/>
                            <attachment id="12508013" name="hive-2616_5.patch" size="122774" author="ashutoshc" created="Tue, 20 Dec 2011 01:19:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Nov 2011 06:51:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09z8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2617] Insert overwrite table db.tname fails if partition already exists </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2617</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Insert Overwrite table db.tname fails if partition already exists.&lt;br/&gt;
For example-&lt;br/&gt;
insert overwrite table db.tname PARTITION(part=&apos;p&apos;) select .. from t2 where part=&apos;p&apos;; fails if partition &apos;p&apos; already exists. Workaround is - use db; and the fire the command.&lt;br/&gt;
From the source code-&lt;br/&gt;
alterPartition(tbl.getTableName(), new Partition(tbl, tpart)); takes String tablename as argument and loses db information. Table table = newTable(tablename) is called to retrieve table from name. But, it relies on currentDatabase value (hence the workaround).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533321">HIVE-2617</key>
            <summary>Insert overwrite table db.tname fails if partition already exists </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chinnalalam">Chinna Rao Lalam</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2011 18:03:35 +0000</created>
                <updated>Mon, 30 Apr 2012 21:11:12 +0000</updated>
                            <resolved>Thu, 15 Dec 2011 02:05:23 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Database/Schema</component>
                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13163691" author="jiraposter@reviews.apache.org" created="Tue, 6 Dec 2011 16:43:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3026/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3026/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Insert Overwrite table db.tname fails if partition already exists.&lt;br/&gt;
 For example-&lt;br/&gt;
 insert overwrite table db.tname PARTITION(part=&apos;p&apos;) select .. from t2 where part=&apos;p&apos;; fails if partition &apos;p&apos; already exists. &lt;/p&gt;

&lt;p&gt;Internal of the code not consider the database name of the table and it is continued with the default database.&lt;/p&gt;

&lt;p&gt;Changed the code like if table contains the database name called the alter partition using the dbname and tablename.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2617&quot; title=&quot;Insert overwrite table db.tname fails if partition already exists &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2617&quot;&gt;&lt;del&gt;HIVE-2617&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2617&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2617&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java 1210917 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/insert2_overwrite_partitions.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/insert2_overwrite_partitions.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3026/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3026/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added new testcase and all unit tests are passed&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;chinna&lt;/p&gt;
</comment>
                            <comment id="13163692" author="chinnalalam" created="Tue, 6 Dec 2011 16:43:43 +0000"  >&lt;p&gt;Changed the code like if table contains the database name called the alter partition using the dbname and tablename.&lt;/p&gt;</comment>
                            <comment id="13169103" author="namit" created="Wed, 14 Dec 2011 06:04:21 +0000"  >&lt;p&gt;The code changes look good - but the test is failing for me.&lt;br/&gt;
Can you reduce the testcase by selecting fewer rows from the table or creating new data &lt;br/&gt;
files with fewer rows ?&lt;/p&gt;</comment>
                            <comment id="13169104" author="phabricator@reviews.facebook.net" created="Wed, 14 Dec 2011 06:04:30 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2617&quot; title=&quot;Insert overwrite table db.tname fails if partition already exists &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2617&quot;&gt;&lt;del&gt;HIVE-2617&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Insert overwrite table db.tname fails if partition already exists&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2617&quot; title=&quot;Insert overwrite table db.tname fails if partition already exists &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2617&quot;&gt;&lt;del&gt;HIVE-2617&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Insert Overwrite table db.tname fails if partition already exists.&lt;br/&gt;
  For example-&lt;br/&gt;
  insert overwrite table db.tname PARTITION(part=&apos;p&apos;) select .. from t2 where part=&apos;p&apos;; fails if partition &apos;p&apos; already exists. Workaround is - use db; and the fire the command.&lt;br/&gt;
  From the source code-&lt;br/&gt;
  alterPartition(tbl.getTableName(), new Partition(tbl, tpart)); takes String tablename as argument and loses db information. Table table = newTable(tablename) is called to retrieve table from name. But, it relies on currentDatabase value (hence the workaround).&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D843&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D843&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/insert2_overwrite_partitions.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/insert2_overwrite_partitions.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1803/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1803/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13169382" author="chinnalalam" created="Wed, 14 Dec 2011 14:12:35 +0000"  >&lt;p&gt;Rebased and uploaded the patch&lt;/p&gt;</comment>
                            <comment id="13169655" author="namit" created="Wed, 14 Dec 2011 20:14:49 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13169917" author="namit" created="Thu, 15 Dec 2011 02:05:23 +0000"  >&lt;p&gt;Committed. Thanks Chinna&lt;/p&gt;</comment>
                            <comment id="13169962" author="hudson" created="Thu, 15 Dec 2011 04:42:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.23.0 #24 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.23.0/24/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.23.0/24/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2617&quot; title=&quot;Insert overwrite table db.tname fails if partition already exists &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2617&quot;&gt;&lt;del&gt;HIVE-2617&lt;/del&gt;&lt;/a&gt; Insert overwrite table db.tname fails if partition already exists&lt;br/&gt;
(Chinna Rao Lalam via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214592&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214592&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/insert2_overwrite_partitions.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/insert2_overwrite_partitions.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13170054" author="hudson" created="Thu, 15 Dec 2011 09:04:30 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1147 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1147/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1147/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2617&quot; title=&quot;Insert overwrite table db.tname fails if partition already exists &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2617&quot;&gt;&lt;del&gt;HIVE-2617&lt;/del&gt;&lt;/a&gt; Insert overwrite table db.tname fails if partition already exists&lt;br/&gt;
(Chinna Rao Lalam via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214592&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214592&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/insert2_overwrite_partitions.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/insert2_overwrite_partitions.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265224" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:12 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12507307" name="ASF.LICENSE.NOT.GRANTED--HIVE-2617.D843.1.patch" size="24647" author="phabricator@reviews.facebook.net" created="Wed, 14 Dec 2011 06:04:31 +0000"/>
                            <attachment id="12507354" name="HIVE-2617.1.patch" size="16289" author="chinnalalam" created="Wed, 14 Dec 2011 14:12:09 +0000"/>
                            <attachment id="12506277" name="HIVE-2617.patch" size="25051" author="chinnalalam" created="Tue, 6 Dec 2011 16:35:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Dec 2011 16:43:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lktj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2618] Describe partition returns table columns but should return partition columns</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2618</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If a partitioned table and some partitions are created, and then the table is altered adding a columns, if describe is called on the partitions created before the columns were added it will show the new columns, even though it should not.  In particular, in the metastore, the partition will not have these columns.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533329">HIVE-2618</key>
            <summary>Describe partition returns table columns but should return partition columns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2011 18:54:21 +0000</created>
                <updated>Fri, 28 Sep 2012 22:53:32 +0000</updated>
                            <resolved>Fri, 28 Sep 2012 22:53:24 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13160661" author="namit" created="Thu, 1 Dec 2011 05:49:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D105&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D105&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13165013" author="he yongqiang" created="Thu, 8 Dec 2011 05:55:47 +0000"  >&lt;p&gt;+1, running tests.&lt;/p&gt;</comment>
                            <comment id="13165671" author="he yongqiang" created="Thu, 8 Dec 2011 23:26:24 +0000"  >&lt;p&gt;already committed, thanks namit!&lt;/p&gt;</comment>
                            <comment id="13207379" author="cwsteinbach" created="Tue, 14 Feb 2012 00:10:38 +0000"  >&lt;p&gt;Looks like this patch was included in the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1003&quot; title=&quot;optimize metadata only queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1003&quot;&gt;&lt;del&gt;HIVE-1003&lt;/del&gt;&lt;/a&gt;. Resolving as a duplicate.&lt;/p&gt;</comment>
                            <comment id="13465981" author="cwsteinbach" created="Fri, 28 Sep 2012 22:53:24 +0000"  >&lt;p&gt;Turns out this is not a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1003&quot; title=&quot;optimize metadata only queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1003&quot;&gt;&lt;del&gt;HIVE-1003&lt;/del&gt;&lt;/a&gt;. The commit message for the patch accidentally referenced &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1003&quot; title=&quot;optimize metadata only queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1003&quot;&gt;&lt;del&gt;HIVE-1003&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;5c60e89 2011-12-08 HIVE-1003 [jira] optimize metadata only queries (Namit Jain via Yongqiang He)
c0bbc1f 2011-10-31 HIVE-1003: optimize metadata only queries (Marcin Kurczych, Namit Jain via He Yongqiang)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Dec 2011 05:49:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lktr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2619] Add hook to run in metastore&apos;s endFunction which can collect more fb303 counters</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2619</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Create the potential for hooks to run in the endFunction method of HMSHandler which take the name of a function and whether or not it succeeded.  Also, override getCounters from fb303 to allow these hooks to add counters which they collect, should this be desired.  These hooks can be similar to EventListeners, but they should be more generic.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533390">HIVE-2619</key>
            <summary>Add hook to run in metastore&apos;s endFunction which can collect more fb303 counters</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Dec 2011 01:38:01 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:03 +0000</updated>
                            <resolved>Fri, 2 Dec 2011 05:55:55 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13160651" author="namit" created="Thu, 1 Dec 2011 05:31:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D561&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D561&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13160658" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 05:45:39 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add hook to run in meatastore&apos;s endFunction which can collect more fb303 counters&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D561&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D561&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13160659" author="kevinwilfong" created="Thu, 1 Dec 2011 05:45:54 +0000"  >&lt;p&gt;I also created a diff here &lt;a href=&quot;https://reviews.facebook.net/D555&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D555&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I thought it was supposed to update here automatically.&lt;/p&gt;</comment>
                            <comment id="13160660" author="namit" created="Thu, 1 Dec 2011 05:47:51 +0000"  >&lt;p&gt;I thought so too - but it did not for some reason.&lt;br/&gt;
John, do you know ?&lt;/p&gt;

&lt;p&gt;I did:&lt;/p&gt;

&lt;p&gt;ant arc-setup&lt;br/&gt;
arc diff --jira &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13160663" author="namit" created="Thu, 1 Dec 2011 05:56:30 +0000"  >&lt;p&gt;It did show up for me - a little delayed. I should have been more patient.&lt;/p&gt;</comment>
                            <comment id="13160664" author="jvs" created="Thu, 1 Dec 2011 05:58:33 +0000"  >&lt;p&gt;It should have added JIRA as one of the reviewers on the diff (that&apos;s how the comments get forwarded).  Did you remove JIRA from the reviewers list?&lt;/p&gt;

&lt;p&gt;You can add it back on manually by editing the diff, and then arc diff again to update the diff and it should add info here.  +Marek.&lt;/p&gt;

&lt;p&gt;Mmmmmm...meatastore.  Can I get bacon with that?&lt;/p&gt;</comment>
                            <comment id="13160671" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 06:11:39 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add hook to run in meatastore&apos;s endFunction which can collect more fb303 counters&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreEndFunctionListener.java:41 Looks good - do you want to pass a metastoreContext to the endFunction.&lt;/p&gt;

&lt;p&gt;  This can be a empty class right now, but in future if we need to add&lt;br/&gt;
  anything, it would be useful&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D561&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D561&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13160672" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 06:11:40 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add hook to run in meatastore&apos;s endFunction which can collect more fb303 counters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Create the potential for hooks to run in the endFunction method of HMSHandler which take the name of a function and whether or not it succeeded.  Also, override getCounters from fb303 to allow these hooks to add counters which they collect, should this be desired.  These hooks can be similar to EventListeners, but they should be more generic.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D561&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D561&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreEndFunctionListener.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1251/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1251/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13161036" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 18:58:40 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add hook to run in meatastore&apos;s endFunction which can collect more fb303 counters&quot;.&lt;br/&gt;
Reviewers: njain, heyongqiang, JIRA&lt;/p&gt;

&lt;p&gt;  I added a new type of listener called MetaStoreEndFunctionListener, which is called by endFunction in HMSHandler and takes the method&apos;s name, and whether it succeeded.   I also overrode FacebookBase&apos;s getCounters method to include counters from these listeners.&lt;/p&gt;

&lt;p&gt;  These new listeners are configurable in the same way as EventListeners.&lt;/p&gt;

&lt;p&gt;  I had to modify endFunction and all calls to it to pass in whether or not the method succeeded.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  I created an implementation of MetaStoreEndFunctionListener and verified it ran without exceptions, and it could add fb303 counters.&lt;/p&gt;

&lt;p&gt;  I also ran the unit tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D555&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D555&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreEndFunctionListener.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/p&gt;</comment>
                            <comment id="13161043" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 19:04:40 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add hook to run in meatastore&apos;s endFunction which can collect more fb303 counters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Namit made the following comment here &lt;a href=&quot;https://reviews.facebook.net/D561&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D561&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &quot;Looks good - do you want to pass a metastoreContext to the endFunction.&lt;/p&gt;

&lt;p&gt;  This can be a empty class right now, but in future if we need to add&lt;br/&gt;
  anything, it would be useful&quot;&lt;/p&gt;

&lt;p&gt;  That&apos;s a good idea, we can put perf data there later.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D555&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D555&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreEndFunctionContext.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreEndFunctionListener.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/p&gt;</comment>
                            <comment id="13161261" author="namit" created="Thu, 1 Dec 2011 22:39:14 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13161440" author="namit" created="Fri, 2 Dec 2011 05:55:55 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13161453" author="hudson" created="Fri, 2 Dec 2011 06:47:48 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1118 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1118/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1118/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2619&quot; title=&quot;Add hook to run in metastore&amp;#39;s endFunction which can collect more fb303 counters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2619&quot;&gt;&lt;del&gt;HIVE-2619&lt;/del&gt;&lt;/a&gt; Add hook to run in metastore&apos;s endFunction which can collect more fb303 counters&lt;br/&gt;
(Kevin Wilfong via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1209368&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1209368&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreEndFunctionContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreEndFunctionListener.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505790" name="ASF.LICENSE.NOT.GRANTED--HIVE-2619.D555.1.patch" size="33980" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 18:58:40 +0000"/>
                            <attachment id="12505791" name="ASF.LICENSE.NOT.GRANTED--HIVE-2619.D555.2.patch" size="35851" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 19:04:41 +0000"/>
                            <attachment id="12505725" name="ASF.LICENSE.NOT.GRANTED--HIVE-2619.D561.1.patch" size="34247" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 06:11:41 +0000"/>
                            <attachment id="12505701" name="HIVE-2619.1.patch.txt" size="34142" author="kevinwilfong" created="Thu, 1 Dec 2011 01:44:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Dec 2011 05:31:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219118</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lktz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2620] LIKE incorrectly transforms expression to regex (does not escape &quot;+&quot; and possibly other special chars)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2620</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Whenever you have a LIKE expression that contains &quot;|+&quot; (the culprit) and &quot;%&quot; (so it gets converted to regex), hive throws an exception that crashes the whole job.&lt;/p&gt;

&lt;p&gt;Possibly related: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2594&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2594&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select &apos;foo |+18| bar&apos; like &apos;foo |+18% bar&apos; from akramer_one_row;
FAILED: Error in semantic analysis: Line 1:7 Wrong arguments &apos;&apos;foo |+18% bar&apos;&apos;: org.apache.hadoop.hive.ql.metadata.HiveException: Unable to execute method public org.apache.hadoop.io.BooleanWritable org.apache.hadoop.hive.ql.udf.UDFLike.evaluate(org.apache.hadoop.io.Text,org.apache.hadoop.io.Text)  on object org.apache.hadoop.hive.ql.udf.UDFLike@292e2fba of class org.apache.hadoop.hive.ql.udf.UDFLike with arguments {foo |+18| bar:org.apache.hadoop.io.Text, foo |+% bar:org.apache.hadoop.io.Text} of size 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stack trace from the real world example with which I found this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Unable to execute method public org.apache.hadoop.io.BooleanWritable org.apache.hadoop.hive.ql.udf.UDFLike.evaluate(org.apache.hadoop.io.Text,org.apache.hadoop.io.Text)  on object org.apache.hadoop.hive.ql.udf.UDFLike@4a7baf7d of class org.apache.hadoop.hive.ql.udf.UDFLike with arguments {ewt.arkadaslar pazartesinden sonra ozel escortlar sayfam&#305;z&#305; z&#305;yaret etcek lutfn kaba dawranm&#305;yal&#305;m escortlar&#305;m&#305;z resml&#305; olcak s&#305;z begen&#305;ceks&#305;n&#305;z escortunuzu escortlar&#305;m&#305; &#305;l &#305;l olackt&#305;r b&#305;lgn&#305;ze:org.apache.hadoop.io.Text, %&#231;&#305;t&#305;R%k&#305;zLar%escort%k&#305;zLar&#305;%burda%|+%18%|%:org.apache.hadoop.io.Text} of size 2
	at org.apache.hadoop.hive.ql.exec.FunctionRegistry.invoke(FunctionRegistry.java:836)
	at org.apache.hadoop.hive.ql.udf.generic.GenericUDFBridge.evaluate(GenericUDFBridge.java:180)
	at org.apache.hadoop.hive.ql.exec.ExprNodeGenericFuncEvaluator.evaluate(ExprNodeGenericFuncEvaluator.java:163)
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.updateAggregations(GroupByOperator.java:575)
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processHashAggr(GroupByOperator.java:767)
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:722)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:765)
	at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:765)
	at org.apache.hadoop.hive.ql.exec.UnionOperator.processOp(UnionOperator.java:129)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:765)
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:531)
	... 5 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.GeneratedMethodAccessor32.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.hive.ql.exec.FunctionRegistry.invoke(FunctionRegistry.java:812)
	... 19 more
Caused by: java.util.regex.PatternSyntaxException: Dangling meta character &apos;+&apos; near index 42
.*&#231;&#305;t&#305;R.*k&#305;zLar.*escort.*k&#305;zLar&#305;.*burda.*|+.*18.*|.*
                                          ^
	at java.util.regex.Pattern.error(Pattern.java:1713)
	at java.util.regex.Pattern.sequence(Pattern.java:1878)
	at java.util.regex.Pattern.expr(Pattern.java:1752)
	at java.util.regex.Pattern.compile(Pattern.java:1460)
	at java.util.regex.Pattern.&amp;amp;lt;init&amp;amp;gt;(Pattern.java:1133)
	at java.util.regex.Pattern.compile(Pattern.java:823)
	at org.apache.hadoop.hive.ql.udf.UDFLike.evaluate(UDFLike.java:186)
	... 23 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12533483">HIVE-2620</key>
            <summary>LIKE incorrectly transforms expression to regex (does not escape &quot;+&quot; and possibly other special chars)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mitjat">Mitja Trampus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Dec 2011 18:29:24 +0000</created>
                <updated>Mon, 18 May 2015 20:42:09 +0000</updated>
                            <resolved>Mon, 18 May 2015 20:42:09 +0000</resolved>
                                                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14549180" author="apivovarov" created="Mon, 18 May 2015 20:41:07 +0000"  >&lt;p&gt;It works fine in 1.3.0&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select &lt;span class=&quot;code-quote&quot;&gt;&apos;foo |+18| bar&apos;&lt;/span&gt; like &lt;span class=&quot;code-quote&quot;&gt;&apos;foo |+18% bar&apos;&lt;/span&gt;;
OK
&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 May 2015 20:41:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219211</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lku7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2621] Allow multiple group bys with the same input data and spray keys to be run on the same reducer.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2621</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, when a user runs a query, such as a multi-insert, where each insertion subclause consists of a simple query followed by a group by, the group bys for each clause are run on a separate reducer.  This requires writing the data for each group by clause to an intermediate file, and then reading it back.  This uses a significant amount of the total CPU consumed by the query for an otherwise simple query.&lt;/p&gt;

&lt;p&gt;If the subclauses are grouped by their distinct expressions and group by keys, with all of the group by expressions for a group of subclauses run on a single reducer, this would reduce the amount of reading/writing to intermediate files for some queries.&lt;/p&gt;

&lt;p&gt;To do this, for each group of subclauses, in the mapper we would execute a the filters for each subclause &apos;or&apos;d together (provided each subclause has a filter) followed by a reduce sink.  In the reducer, the child operators would be each subclauses filter followed by the group by and any subsequent operations.&lt;/p&gt;

&lt;p&gt;Note that this would require turning off map aggregation, so we would need to make using this type of plan configurable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533560">HIVE-2621</key>
            <summary>Allow multiple group bys with the same input data and spray keys to be run on the same reducer.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Dec 2011 02:13:05 +0000</created>
                <updated>Wed, 23 Apr 2014 21:08:21 +0000</updated>
                            <resolved>Tue, 3 Jan 2012 18:10:26 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13161368" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 02:36:39 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  The meaningful changes are all in how the plan is generated.&lt;/p&gt;

&lt;p&gt;  If the conf variable has been set, the subclauses are first grouped by their group by keys and distinct keys.  To facilitate this I added a wrapper class to ExprNodeDesc which makes equals like the isSame method.&lt;/p&gt;

&lt;p&gt;  If the conf variable is not set, I create a single group of all the subqueries.&lt;/p&gt;

&lt;p&gt;  Then, provided certain conditions are met, e.g. the conf variable is set, there is a group by and there are aggregations, the skew conf variable hasn&apos;t been set, I create the new plan for each group, otherwise the old plan is produced.&lt;/p&gt;

&lt;p&gt;  To start I generate the common filter by &apos;or&apos;ing the group&apos;s clauses&apos; filters.  This goes into a select operator, which goes into a new reduce operator.  The reduce operator is like the typical 1 MR group by reduce operator, except that to generate the reduce values it loops over each of the group&apos;s subclauses&apos; aggregations and the columns used in the where clauses.&lt;/p&gt;

&lt;p&gt;  This goes into a forward operator and for each subclause the forward operator has a child filter operator, if the subclause has a filter, and a group by operator.  Each group by operator is followed by the operators which would normally follow it in a plan.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  I added some unit tests.&lt;/p&gt;

&lt;p&gt;  I verified these unit tests and the old unit tests all passed.&lt;/p&gt;

&lt;p&gt;  I created a sample query which consisted of a multi-insert from a table with 1,000,000 rows, going into 6 tables, each of which&apos;s subclause consisted of a group by, and a count distinct, as well as some other aggregations and havings.  The subclauses were constructed such that they could be grouped into two reducers using the new plan.  I also ensured that the data was such that map aggregation was turned of early using the existing plan.  I verified that this query saw a significant improvement in its CPU usage.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  conf/hive-default.xml&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby7_noskew_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_complex_types_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_complex_types_multi_single_reducer.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1269/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1269/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13161369" author="kevinwilfong" created="Fri, 2 Dec 2011 02:36:41 +0000"  >&lt;p&gt;diff is here &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13161371" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 02:46:39 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:6296 The code in this method should be the same as what followed the code to generate a group by plan in the existing code.  The diff just didn&apos;t seem to match them up.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:5693 The string was not being used in this method.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13170539" author="phabricator@reviews.facebook.net" created="Thu, 15 Dec 2011 22:39:30 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Updated to avoid merge conflicts.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby7_noskew_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_complex_types_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_complex_types_multi_single_reducer.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13173907" author="phabricator@reviews.facebook.net" created="Wed, 21 Dec 2011 06:33:30 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q:12 A general comment for all the tests.&lt;/p&gt;

&lt;p&gt;  Instead of loading 500 rows to src - create a new table - load some 10 rows of src into it, and use that for all tests.&lt;/p&gt;

&lt;p&gt;  The test outputs are really long, and difficult to review&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13174557" author="phabricator@reviews.facebook.net" created="Thu, 22 Dec 2011 01:27:30 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Updated the diff again to prevent conflicts.&lt;/p&gt;

&lt;p&gt;  Added limits in the test cases to prevent the output from getting too long.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby7_noskew_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_complex_types_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_complex_types_multi_single_reducer.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13174671" author="phabricator@reviews.facebook.net" created="Thu, 22 Dec 2011 07:38:31 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q:12 This does not look right.&lt;/p&gt;

&lt;p&gt;  We would like to make hive.multigroupby.singlereducer as true by default.&lt;/p&gt;

&lt;p&gt;  But, we are un-necessarily generating 3 MR jobs for this query (with no distinct). I think, we can get it in 2 MR jobs today (not 100% sure)&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:6273 It would be good to merge the code path with the above if block&lt;/p&gt;

&lt;p&gt;  (optimizeMultiGroupBy).&lt;/p&gt;

&lt;p&gt;  The common distinct expression should return the common distinct&lt;br/&gt;
  checking for the parameter HIVEMULTIGROUPBYSINGLEREDUCER.&lt;/p&gt;

&lt;p&gt;  Or, it might be simpler to remove the above if block (the optimizeMultiGroupby should be covered by this block).&lt;br/&gt;
  Anyway, the above if block (6253-6272) seems broken&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:6211 I think this code can be simplified.&lt;/p&gt;

&lt;p&gt;  The function getCommonDistinctExprs can be removed&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13174730" author="phabricator@reviews.facebook.net" created="Thu, 22 Dec 2011 09:56:30 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q:12 I actually had it in one MR job originally, but the addition of the limits caused the addition of an extra job for each insert.  The code to do that is at line 6379 of the SemanticAnalyzer.  I assume it does this to ensure all the rows go to a single reducer, so the limit can be enforced.&lt;/p&gt;

&lt;p&gt;  As for making hive.multigroupby.singlereducer true by default, currently map aggregation is set to true by default, and setting this new variable causes the map aggregation variable to be ignored for any group by that can go to the same reducer as at least one other.&lt;/p&gt;

&lt;p&gt;  I&apos;ll turn it on by default, I just wanted to make that clear.&lt;/p&gt;

&lt;p&gt;  Also, in that case this test isn&apos;t needed as I just copied another test and turned on hive.multigroupby.singlereducer&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:6211 This code looks at all the group bys in the query block and allows for only some of the distinct expressions and group by keys to be the same.&lt;/p&gt;

&lt;p&gt;  The new code looks for sets of group by subqueries where all of the distinct expressions and group by keys are the same.&lt;/p&gt;

&lt;p&gt;  I&apos;ll go back and see if I reused as much of the definitions of the two functions getCommonDistinctExprs and getCommonGroupByKeys as I could have, but I don&apos;t think this code here could be simplified using my new code.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:6273 The above if block guarantees the job can be performed using only 2 MR jobs provided that there are no filter operators, and the distinct keys are the same across all subqueries.&lt;/p&gt;

&lt;p&gt;  If my new code were used, there is no hard limit on the number of MR jobs because it depends on how many variations there are on the group by keys.&lt;/p&gt;

&lt;p&gt;  I think it is possible that we could first look at the set of subqueries without filters, see how they split on both distinct and group by keys, and for any of these groups where two or more have the same distinct keys run this other method on them.  However, this could have been done much more easily before (without the comparison, just group queries with the same distinct keys together), and it wasn&apos;t, so I suspect the gains are not that great, so I&apos;d much rather do this as part of a separate patch once we have queries that would benefit from it.&lt;/p&gt;

&lt;p&gt;  I&apos;m not sure whether or not the code is broken, but I would like to leave it for now, to be fixed, or modified as I described above as part of a separate patch.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13174891" author="namit" created="Thu, 22 Dec 2011 16:48:12 +0000"  >&lt;p&gt;Let me take a look at the code again:&lt;/p&gt;

&lt;p&gt;But the general flow should be as follows:&lt;/p&gt;

&lt;p&gt;if  hive.multigroupby.singlereducer is true (which should always be),&lt;br/&gt;
  find common distincts. &lt;br/&gt;
    (or the check hive.multigroupby.singlereducer can be done inside find common distincts function itself)&lt;br/&gt;
  if common distincts == null&lt;br/&gt;
     old (current) approach - map side aggr should be used&lt;br/&gt;
  else:&lt;br/&gt;
     new code path&lt;/p&gt;

&lt;p&gt;What do you think ? That way, we are guaranteed that the existing behavior is not changed.&lt;br/&gt;
This new parameter is only affecting distincts, and we it is very easy to turn it off&lt;/p&gt;

&lt;p&gt;I know the code is kind of messy here, but can you spend some time to modularize it,&lt;br/&gt;
and reuse as much as possible ?&lt;/p&gt;
</comment>
                            <comment id="13174922" author="phabricator@reviews.facebook.net" created="Thu, 22 Dec 2011 17:43:31 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;  otherwise it looks good&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:5925 can you give an example in the comments ?&lt;/p&gt;

&lt;p&gt;  Sorry, but it is not clear to me.&lt;/p&gt;

&lt;p&gt;  Do you want to return 2 lists - one for the common distincts ?&lt;br/&gt;
  I am missing something: what else do you want to return ?&lt;/p&gt;


&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3469 thanks for creating this function and re-using this code&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13174927" author="phabricator@reviews.facebook.net" created="Thu, 22 Dec 2011 17:49:30 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:5925 I return a list of lists of clause names (which map to subqueries) where the queries mapped to by each clause name in a list all have the same distinct and group by keys.&lt;/p&gt;

&lt;p&gt;  It doesn&apos;t return common distincts.&lt;/p&gt;

&lt;p&gt;  I&apos;ll try to make the comment clearer.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13174945" author="kevinwilfong" created="Thu, 22 Dec 2011 18:13:00 +0000"  >&lt;p&gt;There are currently two ways of getting common distincts, the current way checks that all distinct expressions in the subqueries are the same.  My new code doesn&apos;t depend on this, it tries to construct subsets of the subqueries such that this is true for each subset.&lt;/p&gt;

&lt;p&gt;The advantage of doing it in the form&lt;br/&gt;
if (optimizeMultiGroupBy) {&lt;br/&gt;
  ...&lt;br/&gt;
} else {&lt;br/&gt;
  &amp;lt;group queries by common distinct and group by expressions&amp;gt;&lt;br/&gt;
  for each group:&lt;br/&gt;
    if (size of group &amp;gt; 1 &amp;amp;&amp;amp; etc.) &lt;/p&gt;
{
      &amp;lt;new code&amp;gt;
    }
&lt;p&gt; else &lt;/p&gt;
{
      &amp;lt;old code&amp;gt;
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;is that the block of code inside the optimizeMultiGroupBy if statement can produce 2 map reduce jobs where the new code might produce many.&lt;/p&gt;

&lt;p&gt;After looking at it more carefully, I can get rid of the singlemrMultiGroupBy if statement and the code within the block because it produces the same result that my new code would except that the new code can handle filters as well.&lt;/p&gt;

&lt;p&gt;After removing that code, the only remaining code above the if statement will be the poorly named getCommonDistinctExprs (as it only returns the common distinct expressions provided a lot of conditions are met including a requirement that all the distinct expressions are common), which I should be able to modify to use my new code.&lt;/p&gt;</comment>
                            <comment id="13175201" author="phabricator@reviews.facebook.net" created="Fri, 23 Dec 2011 00:41:30 +0000"  >&lt;p&gt;heyongqiang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;  can u add a testcase which includes a subquery in one group by clause?&lt;br/&gt;
   still reviewing&lt;/p&gt;


&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:6290 the check here is confusing. It is not very clear which cases should come in, and which cases should not. Can u try to reduce the size of check list by moving some up?&lt;/p&gt;

&lt;p&gt;  or add some comments here&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13175205" author="phabricator@reviews.facebook.net" created="Fri, 23 Dec 2011 00:51:30 +0000"  >&lt;p&gt;heyongqiang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:6284 can u add here comments that you just explained to me offline?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13175207" author="phabricator@reviews.facebook.net" created="Fri, 23 Dec 2011 00:59:30 +0000"  >&lt;p&gt;heyongqiang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3411 can we do some simple de-duplication here?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13175209" author="phabricator@reviews.facebook.net" created="Fri, 23 Dec 2011 01:03:30 +0000"  >&lt;p&gt;heyongqiang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;  otherwise, looks good to me.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3015 Instead of a lot duplicate code here, can we just pass one dest to  genGroupByPlanReduceSinkOperator()?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13175241" author="phabricator@reviews.facebook.net" created="Fri, 23 Dec 2011 02:55:30 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Addressed Namit&apos;s and Yongqiang&apos;s comments as follows:&lt;/p&gt;

&lt;p&gt;  Removed code for singlemrMultiGroupBy optimization, and all related methods, as the new code should produce similar results and can handle more cases, such as filters.&lt;/p&gt;

&lt;p&gt;  Shared code between getCommonDistinctExprs and getCommonGroupByDestGroups, as well as between genCommonGroupByPlanReduceSinkOperator and genGroupByPlanReduceSinkOperator.&lt;/p&gt;

&lt;p&gt;  Added comments where requested.&lt;/p&gt;

&lt;p&gt;  Deduplicated filters in common filter used before a common group by reduce sink.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby9.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby7_noskew_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby10.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/parallel.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/multigroupby_singlemr.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/multi_insert.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby8.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_complex_types_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby7_map_multi_single_reducer.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby10.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/multigroupby_singlemr.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_map.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby8.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby9.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby7_map_multi_single_reducer.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_complex_types_multi_single_reducer.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13175775" author="phabricator@reviews.facebook.net" created="Sat, 24 Dec 2011 21:49:30 +0000"  >&lt;p&gt;heyongqiang has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13178883" author="he yongqiang" created="Tue, 3 Jan 2012 18:10:27 +0000"  >&lt;p&gt;committed, thanks Kevin!&lt;/p&gt;</comment>
                            <comment id="13179136" author="hudson" created="Tue, 3 Jan 2012 23:41:40 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1182 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1182/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1182/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt;:Allow multiple group bys with the same input data and spray keys to be run on the same reducer. (Kevin via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226903&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226903&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby10.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_map.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_map_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_noskew.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby8.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby9.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_complex_types_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/multigroupby_singlemr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby10.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby7_map_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby7_noskew_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby8.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby9.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_complex_types_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/multi_insert.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/multigroupby_singlemr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/parallel.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265303" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:38 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548328" author="hudson" created="Wed, 9 Jan 2013 10:25:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2621&quot; title=&quot;Allow multiple group bys with the same input data and spray keys to be run on the same reducer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2621&quot;&gt;&lt;del&gt;HIVE-2621&lt;/del&gt;&lt;/a&gt;:Allow multiple group bys with the same input data and spray keys to be run on the same reducer. (Kevin via He Yongqiang) (Revision 1226903)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226903&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226903&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby10.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_map.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_map_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_noskew.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby7_noskew_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby8.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby9.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_complex_types_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_multi_single_reducer.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/multigroupby_singlemr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby10.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby7_map_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby7_noskew_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby8.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby9.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_complex_types_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_multi_single_reducer.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/multi_insert.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/multigroupby_singlemr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/parallel.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13961641" author="lefty@hortonworks.com" created="Mon, 7 Apr 2014 04:43:58 +0000"  >&lt;p&gt;This jira removed the configuration property &lt;b&gt;hive.multigroupby.singlemr&lt;/b&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2056&quot; title=&quot;Generate single MR job for multi groupby query if hive.multigroupby.singlemr is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2056&quot;&gt;&lt;del&gt;HIVE-2056&lt;/del&gt;&lt;/a&gt;) and added &lt;b&gt;hive.multigroupby.singlereducer&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="13961645" author="lefty@hortonworks.com" created="Mon, 7 Apr 2014 05:01:42 +0000"  >&lt;p&gt;I added &lt;b&gt;hive.multigroupby.singlereducer&lt;/b&gt; to the Configuration Properties wikidoc.  It has the same definition as the defunct &lt;b&gt;hive.multigroupby.singlemr&lt;/b&gt; &amp;#8211; is that correct?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Whether to optimize multi group by query to generate a single M/R  job plan. If the multi group by query has common group by keys, it will be optimized to generate a single M/R job.&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.multigroupby.singlemr&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties:  hive.multigroupby.singlemr &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.multigroupby.singlereducer&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties:  hive.multigroupby.singlereducer &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13976525" author="lefty@hortonworks.com" created="Tue, 22 Apr 2014 08:13:03 +0000"  >&lt;p&gt;Asking again:  Is the definition of &lt;b&gt;hive.multigroupby.singlereducer&lt;/b&gt; correct or was it just held over from &lt;b&gt;hive.multigroupby.singlemr&lt;/b&gt;?  (See previous comment.)&lt;/p&gt;</comment>
                            <comment id="13978736" author="kevinwilfong" created="Wed, 23 Apr 2014 19:22:30 +0000"  >&lt;p&gt;It&apos;s been a while, but I the definition you posted looks correct.&lt;/p&gt;</comment>
                            <comment id="13978907" author="lefty@hortonworks.com" created="Wed, 23 Apr 2014 21:08:21 +0000"  >&lt;p&gt;Thanks Kevin.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12501480">HIVE-2056</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12505843" name="ASF.LICENSE.NOT.GRANTED--HIVE-2621.D567.1.patch" size="166426" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 02:36:40 +0000"/>
                            <attachment id="12507611" name="ASF.LICENSE.NOT.GRANTED--HIVE-2621.D567.2.patch" size="165816" author="phabricator@reviews.facebook.net" created="Thu, 15 Dec 2011 22:39:31 +0000"/>
                            <attachment id="12508334" name="ASF.LICENSE.NOT.GRANTED--HIVE-2621.D567.3.patch" size="154127" author="phabricator@reviews.facebook.net" created="Thu, 22 Dec 2011 01:27:30 +0000"/>
                            <attachment id="12508481" name="ASF.LICENSE.NOT.GRANTED--HIVE-2621.D567.4.patch" size="468283" author="phabricator@reviews.facebook.net" created="Fri, 23 Dec 2011 02:55:31 +0000"/>
                            <attachment id="12505842" name="HIVE-2621.1.patch.txt" size="166746" author="kevinwilfong" created="Fri, 2 Dec 2011 02:35:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Dec 2011 02:36:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2622] Hive POMs reference the wrong Hadoop artifacts</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2622</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12533561">HIVE-2622</key>
            <summary>Hive POMs reference the wrong Hadoop artifacts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Dec 2011 02:16:33 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:39 +0000</updated>
                            <resolved>Wed, 7 Dec 2011 02:16:50 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13161364" author="cwsteinbach" created="Fri, 2 Dec 2011 02:17:02 +0000"  >&lt;p&gt;Comment from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The currently published pom.xml seems to indicate the following:&lt;br/&gt;
(from &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/hive/hive-metastore/0.8.0-SNAPSHOT/hive-metastore-0.8.0-20111130.194742-149.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/hive/hive-metastore/0.8.0-SNAPSHOT/hive-metastore-0.8.0-20111130.194742-149.pom&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&amp;lt;dependency&amp;gt;&lt;br/&gt;
&amp;lt;groupId&amp;gt;hadoop&amp;lt;/groupId&amp;gt;&lt;br/&gt;
&amp;lt;artifactId&amp;gt;core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
&amp;lt;version&amp;gt;0.20.1&amp;lt;/version&amp;gt;&lt;br/&gt;
&amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;&lt;br/&gt;
&amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;Could the pom please be corrected to reference the hadoop-core jar correctly? (Unless of course I&apos;m missing something, in which case, may I please know which repository this artifact might be pulled from?)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13163934" author="jvs" created="Tue, 6 Dec 2011 22:37:06 +0000"  >&lt;p&gt;Can you create a review request in Phabricator?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13163983" author="phabricator@reviews.facebook.net" created="Tue, 6 Dec 2011 23:56:39 +0000"  >&lt;p&gt;cwsteinbach requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2622&quot; title=&quot;Hive POMs reference the wrong Hadoop artifacts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2622&quot;&gt;&lt;del&gt;HIVE-2622&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive POMs reference the wrong Hadoop artifacts&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Fix Hadoop dependency in ivy.xml files&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D633&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D633&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  shims/ivy.xml&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1395/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1395/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13164071" author="ashutoshc" created="Wed, 7 Dec 2011 02:16:50 +0000"  >&lt;p&gt;+1 Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13164114" author="hudson" created="Wed, 7 Dec 2011 03:40:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.23.0 #5 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.23.0/5/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.23.0/5/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2622&quot; title=&quot;Hive POMs reference the wrong Hadoop artifacts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2622&quot;&gt;&lt;del&gt;HIVE-2622&lt;/del&gt;&lt;/a&gt; : Hive POMs reference the wrong Hadoop artifacts (Carl Steinbach via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211271&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211271&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13164269" author="hudson" created="Wed, 7 Dec 2011 10:15:16 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1129 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1129/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1129/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2622&quot; title=&quot;Hive POMs reference the wrong Hadoop artifacts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2622&quot;&gt;&lt;del&gt;HIVE-2622&lt;/del&gt;&lt;/a&gt; : Hive POMs reference the wrong Hadoop artifacts (Carl Steinbach via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211271&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211271&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12519222">HIVE-2391</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12506338" name="ASF.LICENSE.NOT.GRANTED--HIVE-2622.D633.1.patch" size="5457" author="phabricator@reviews.facebook.net" created="Tue, 6 Dec 2011 23:56:40 +0000"/>
                            <attachment id="12506170" name="HIVE-2622.1.patch.txt" size="5285" author="cwsteinbach" created="Mon, 5 Dec 2011 21:48:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Dec 2011 22:37:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2623] Add Integer type compressors</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2623</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Type-specific compressors for integers.&lt;/p&gt;

&lt;p&gt;Starting with elias gamma which prefers small values as per a power-law like distribution. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12533847">HIVE-2623</key>
            <summary>Add Integer type compressors</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12503539">HIVE-2097</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="n_krishna_kumar">Krishna Kumar</assignee>
                                    <reporter username="n_krishna_kumar">Krishna Kumar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Dec 2011 08:08:36 +0000</created>
                <updated>Tue, 21 Aug 2012 03:45:03 +0000</updated>
                                                                            <component>Contrib</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13162665" author="n_krishna_kumar" created="Mon, 5 Dec 2011 08:10:40 +0000"  >&lt;p&gt;Elias gamma for a two-sided distribution. Draft only - tests and one-side support to be added.&lt;/p&gt;</comment>
                            <comment id="13162667" author="n_krishna_kumar" created="Mon, 5 Dec 2011 08:14:44 +0000"  >&lt;p&gt;Synthetic data for elias gamma.&lt;/p&gt;

&lt;p&gt;Storage size when stored as rc files (single field record):&lt;/p&gt;

&lt;p&gt;plain: 188320&lt;br/&gt;
gzip: 61280&lt;br/&gt;
bzip2: 44023&lt;br/&gt;
uber+eliasgamma: 35963&lt;/p&gt;

&lt;p&gt;Actual gains in production will depend upon actual probability distributions + size of other columns.&lt;/p&gt;</comment>
                            <comment id="13163433" author="n_krishna_kumar" created="Tue, 6 Dec 2011 08:25:47 +0000"  >&lt;p&gt;synthetic datasets for the four compressors&lt;/p&gt;</comment>
                            <comment id="13163434" author="n_krishna_kumar" created="Tue, 6 Dec 2011 08:28:08 +0000"  >&lt;p&gt;Added 3 three more elias gamma compressors - so now supporting one-sided, two-sided distributions about 0, and two compressors for delta coding one-sided and two-sided differences.&lt;/p&gt;</comment>
                            <comment id="13163437" author="n_krishna_kumar" created="Tue, 6 Dec 2011 08:32:31 +0000"  >&lt;p&gt;RCFile size stats:&lt;/p&gt;

&lt;p&gt;   gzip/bzip2/uber+compressor&lt;/p&gt;

&lt;p&gt;steppedpowerlaw1S 49455/45746/36168(IntegerEliasGamma1S)&lt;br/&gt;
steppedpowerlaw2S 61425/56546/35998(IntegerEliasGamma2S) &lt;br/&gt;
steppedpowerlawTimestamp 120895/201378/35875(DeltaIntegerEliasGamma1S)&lt;br/&gt;
steppedpowerlawIQ 84818/54463/36125(DeltaIntegerEliasGamma2S)&lt;/p&gt;</comment>
                            <comment id="13174815" author="n_krishna_kumar" created="Thu, 22 Dec 2011 14:22:54 +0000"  >&lt;p&gt;Added another simple integer coder (unary) and the four variants of compressors based on that. &lt;/p&gt;</comment>
                            <comment id="13174817" author="n_krishna_kumar" created="Thu, 22 Dec 2011 14:24:47 +0000"  >&lt;p&gt;Artificial data sets for the 8 integer compressors.&lt;/p&gt;</comment>
                            <comment id="13174824" author="n_krishna_kumar" created="Thu, 22 Dec 2011 14:34:55 +0000"  >&lt;p&gt;Compression efficiency stats (unary is optimal for geometric_0.5, eliasgamma for steppedpowerlaw):&lt;/p&gt;

&lt;p&gt;geometric_0.5 : gzip/bzip2/uber+Unary/uber+EliasGamma&lt;/p&gt;

&lt;p&gt;1s  : 32628/31185/25640/28976&lt;br/&gt;
2s  : 51155/46444/39476/42789&lt;br/&gt;
D1s : 109133/172441/25300/28625&lt;br/&gt;
D2s : 85525/99032/25395/28719&lt;/p&gt;

&lt;p&gt;steppedpowerlaw : gzip/bzip2/uber+Unary/uber+EliasGamma&lt;/p&gt;

&lt;p&gt;1s  : 52082/48239/163440/45798&lt;br/&gt;
2s  : 63938/59270/165574/53033&lt;br/&gt;
D1s : 123481/205486/172697/37669&lt;br/&gt;
D2s : 94362/106407/178985/38004 &lt;/p&gt;</comment>
                            <comment id="13205722" author="he yongqiang" created="Fri, 10 Feb 2012 20:30:15 +0000"  >&lt;p&gt;Krishna Kumar, this is awesome number. Do you have some CPU information about this? How much more CPU it requires for compression and decompression?&lt;/p&gt;</comment>
                            <comment id="13206967" author="n_krishna_kumar" created="Mon, 13 Feb 2012 16:30:15 +0000"  >&lt;p&gt;I will attach cpu usage information for compression/decompression.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Note that this compression/decompression is trivial compared to the work done as part of bzip2 etc. The numbers are converted to bits one  item at a time, with no lookback/sorting etc.&lt;/li&gt;
	&lt;li&gt;The numbers above are specific to a particular distribution, for which the encoding is optimal. I have a few other integer compressors coded (eliasdelta, eliasomega, Vint, Continuation Bit, Golomb/Rice) each of which will have its own sweet spot. (The last is parametric, the parameter being estimated on the block, which means that it will have several optimal distributions.) I need to do the analysis and get the numbers for these too.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13433937" author="umamaheswararao" created="Tue, 14 Aug 2012 06:27:35 +0000"  >&lt;p&gt;Hi Krishna, any update on your further analysis?&lt;/p&gt;</comment>
                            <comment id="13438434" author="n_krishna_kumar" created="Tue, 21 Aug 2012 03:45:03 +0000"  >&lt;p&gt;Hi Rao,&lt;/p&gt;

&lt;p&gt;  I have not been able to do much further work on this. But all the code that I did have has been attached to the various jiras, so if anyone else wants to take this forward, that&apos;ll be great.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
 Krishna&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506097" name="HIVE-2623.v0.patch" size="18703" author="n_krishna_kumar" created="Mon, 5 Dec 2011 08:10:40 +0000"/>
                            <attachment id="12506231" name="HIVE-2623.v1.patch" size="24534" author="n_krishna_kumar" created="Tue, 6 Dec 2011 08:28:08 +0000"/>
                            <attachment id="12508392" name="HIVE-2623.v2.patch" size="144064" author="n_krishna_kumar" created="Thu, 22 Dec 2011 14:22:54 +0000"/>
                            <attachment id="12508394" name="data.tar.gz" size="607948" author="n_krishna_kumar" created="Thu, 22 Dec 2011 14:24:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2012 20:30:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2624] Fix eclipse classpath template broken in HIVE-2523</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2624</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12533930">HIVE-2624</key>
            <summary>Fix eclipse classpath template broken in HIVE-2523</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Dec 2011 19:58:34 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:06 +0000</updated>
                            <resolved>Mon, 5 Dec 2011 20:05:14 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13162991" author="jvs" created="Mon, 5 Dec 2011 20:05:14 +0000"  >&lt;p&gt;+1, committed to trunk.  Thanks Carl!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506151" name="HIVE-2624.1.patch.txt" size="636" author="cwsteinbach" created="Mon, 5 Dec 2011 19:59:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Dec 2011 20:05:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2625] Fix maven-build Ant target</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2625</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This was broken by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2523&quot; title=&quot;add a new builtins subproject&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2523&quot;&gt;&lt;del&gt;HIVE-2523&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533944">HIVE-2625</key>
            <summary>Fix maven-build Ant target</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Dec 2011 21:34:54 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:49 +0000</updated>
                            <resolved>Mon, 5 Dec 2011 22:07:38 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13163093" author="jvs" created="Mon, 5 Dec 2011 22:07:38 +0000"  >&lt;p&gt;+1, committed to trunk.  Thanks Carl for fixing all my copy/paste errors!  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13163171" author="hudson" created="Mon, 5 Dec 2011 23:31:10 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.23.0 #2 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.23.0/2/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.23.0/2/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2625&quot; title=&quot;Fix maven-build Ant target&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2625&quot;&gt;&lt;del&gt;HIVE-2625&lt;/del&gt;&lt;/a&gt;. Fix maven-build Ant target&lt;br/&gt;
(Carl Steinbach via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1210665&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1210665&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13163353" author="hudson" created="Tue, 6 Dec 2011 05:23:33 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1126 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1126/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1126/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2625&quot; title=&quot;Fix maven-build Ant target&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2625&quot;&gt;&lt;del&gt;HIVE-2625&lt;/del&gt;&lt;/a&gt;. Fix maven-build Ant target&lt;br/&gt;
(Carl Steinbach via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1210665&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1210665&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506169" name="HIVE-2625.1.patch.txt" size="534" author="cwsteinbach" created="Mon, 5 Dec 2011 21:40:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Dec 2011 22:07:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lkvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124032</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2626] Hive CLI should issue warning if JARs were changed after starting the CLI.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2626</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If a user starts a CLI and ADDs a JAR and then the JAR changes, the classes generated by the query plan may use an older version of the JAR than what gets shipped to the nodes.  A warning should be thrown up if this happens. (Note this is really bad for some of us who keep really long running Hive CLI sessions).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533952">HIVE-2626</key>
            <summary>Hive CLI should issue warning if JARs were changed after starting the CLI.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Dec 2011 22:57:15 +0000</created>
                <updated>Mon, 5 Dec 2011 22:57:15 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
