<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 03:42:01 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2016-10-26+AND+created+%3C%3D+2016-11-2+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="44" total="44"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-15064] fix explain for MM tables - don&apos;t output for non-MM tables</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15064</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13015280">HIVE-15064</key>
            <summary>fix explain for MM tables - don&apos;t output for non-MM tables</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12997110">HIVE-14535</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 00:46:11 +0000</created>
                <updated>Fri, 24 Feb 2017 01:13:37 +0000</updated>
                            <resolved>Wed, 26 Oct 2016 00:52:02 +0000</resolved>
                                                    <fixVersion>hive-14535</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35e93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15065] SimpleFetchOptimizer should decide based on metastore stats when available</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15065</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently the decision to use fetch optimizer or not is based on scanning the filesystem for file lengths and see if the aggregated size is less the fetch task threshold. This can be very expensive for cloud environment. This issue is mitigated to some extent by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14920&quot; title=&quot;S3: Optimize SimpleFetchOptimizer::checkThreshold()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14920&quot;&gt;&lt;del&gt;HIVE-14920&lt;/del&gt;&lt;/a&gt; but still that requires file system scan. We can make decision based on the stats from metastore and falling back when stats is not available. Since fast stats (numRows and fileSize) is always available this should work most of the time. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13015282">HIVE-15065</key>
            <summary>SimpleFetchOptimizer should decide based on metastore stats when available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasanth_j">Prasanth Jayachandran</assignee>
                                    <reporter username="prasanth_j">Prasanth Jayachandran</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 01:10:06 +0000</created>
                <updated>Wed, 26 Jul 2017 00:03:28 +0000</updated>
                            <resolved>Thu, 27 Oct 2016 21:23:33 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Logical Optimizer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15607127" author="prasanth_j" created="Wed, 26 Oct 2016 02:17:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; can you please review?&lt;/p&gt;</comment>
                            <comment id="15607364" author="hiveqa" created="Wed, 26 Oct 2016 04:19:53 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835238/HIVE-15065.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835238/HIVE-15065.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10622 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver[hbase_bulk] (batchId=89)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1804/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1804/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1804/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1804/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1804/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1804/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835238 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15612199" author="ashutoshc" created="Thu, 27 Oct 2016 15:25:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15613261" author="prasanth_j" created="Thu, 27 Oct 2016 21:22:02 +0000"  >&lt;p&gt;Test failures have been happening in master for awhile and are unrelated to this patch.&lt;/p&gt;</comment>
                            <comment id="15613268" author="prasanth_j" created="Thu, 27 Oct 2016 21:23:34 +0000"  >&lt;p&gt;Committed to master&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835238" name="HIVE-15065.1.patch" size="19483" author="prasanth_j" created="Wed, 26 Oct 2016 02:16:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Oct 2016 04:19:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35e9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15066] push down projection is mismatched in HiveInputFormat</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15066</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;if HiveInputFormat.getSplits() is called with more than one table, inputFormatClass.getSplits() for the first table will be called with read column information for the second table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015291">HIVE-15066</key>
            <summary>push down projection is mismatched in HiveInputFormat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="Jeongdae Kim">Jeongdae Kim</assignee>
                                    <reporter username="Jeongdae Kim">Jeongdae Kim</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 02:12:28 +0000</created>
                <updated>Wed, 7 Dec 2016 22:10:44 +0000</updated>
                                            <version>2.1.0</version>
                                                    <component>File Formats</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15607684" author="hiveqa" created="Wed, 26 Oct 2016 07:12:17 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835265/HIVE-15066.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835265/HIVE-15066.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10621 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver[hbase_bulk] (batchId=89)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1809/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1809/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1809/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1809/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1809/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1809/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835265 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15607788" author="hiveqa" created="Wed, 26 Oct 2016 07:55:22 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835265/HIVE-15066.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835265/HIVE-15066.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10621 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
org.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=272)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1810/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1810/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1810/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1810/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1810/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1810/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835265 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15643756" author="jeongdae kim" created="Mon, 7 Nov 2016 10:24:10 +0000"  >&lt;p&gt;failed tests are not related to this patch. could anyone give me reviews for this patch?&lt;br/&gt;
created a review request(&lt;a href=&quot;https://reviews.apache.org/r/53524/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;#53524&lt;/a&gt;) for this patch.&lt;/p&gt;</comment>
                            <comment id="15645287" author="sershe" created="Mon, 7 Nov 2016 20:13:04 +0000"  >&lt;p&gt;Patch looks good to me. I am not sure why pushDownProjections call was initially postponed with a boolean setting. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;Prasanth Jayachandran&lt;/a&gt; do you remember?&lt;br/&gt;
If there&apos;s no reason, I&apos;ll +1 and commit tomorrow.&lt;/p&gt;</comment>
                            <comment id="15708408" author="jeongdae kim" created="Wed, 30 Nov 2016 12:11:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;Prasanth Jayachandran&lt;/a&gt; Do you remember anything about &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;&apos;s comments?&lt;br/&gt;
Could you please review when you get a chance?&lt;/p&gt;</comment>
                            <comment id="15710427" author="prasanth_j" created="Thu, 1 Dec 2016 01:06:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7052&quot; title=&quot;Optimize split calculation time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7052&quot;&gt;&lt;del&gt;HIVE-7052&lt;/del&gt;&lt;/a&gt; have more context to it. Appending values to config object is very CPU intensive and increases split computation time.&lt;/p&gt;</comment>
                            <comment id="15730076" author="sershe" created="Wed, 7 Dec 2016 22:04:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;Prasanth Jayachandran&lt;/a&gt; should this be committed? I can commit if you think that is ok&lt;/p&gt;</comment>
                            <comment id="15730091" author="prasanth_j" created="Wed, 7 Dec 2016 22:10:44 +0000"  >&lt;p&gt;I think this will again introduce the perf issue that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajesh.balamohan&quot; class=&quot;user-hover&quot; rel=&quot;rajesh.balamohan&quot;&gt;Rajesh Balamohan&lt;/a&gt;&apos;s patch fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7052&quot; title=&quot;Optimize split calculation time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7052&quot;&gt;&lt;del&gt;HIVE-7052&lt;/del&gt;&lt;/a&gt;. Since we can&apos;t catch perf regression easily I think we should be cautious that this doesn&apos;t introduce the perf issue again. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835265" name="HIVE-15066.1.patch" size="2881" author="Jeongdae Kim" created="Wed, 26 Oct 2016 05:35:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Oct 2016 07:12:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ebj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15067] Flaky test: TestMiniHiveKdc#testLogin</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15067</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;it seems that this test is fluctuating&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1799/testReport/org.apache.hive.minikdc/TestMiniHiveKdc/testLogin/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1799/testReport/org.apache.hive.minikdc/TestMiniHiveKdc/testLogin/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1799/testReport/org.apache.hive.minikdc/TestMiniHiveKdc/testLogin/history/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1799/testReport/org.apache.hive.minikdc/TestMiniHiveKdc/testLogin/history/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015314">HIVE-15067</key>
            <summary>Flaky test: TestMiniHiveKdc#testLogin</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13015210">HIVE-15058</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kgyrtkirk">Zoltan Haindrich</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 05:59:17 +0000</created>
                <updated>Wed, 26 Oct 2016 20:39:58 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15609547" author="kgyrtkirk" created="Wed, 26 Oct 2016 20:18:35 +0000"  >&lt;p&gt;it seems to me that MiniHiveKdc starts with a default port...in case that&apos;s the default kdc port - and there are multiple kdc tests are running in parallel - some of them may fail with a bindexception...&lt;/p&gt;

&lt;p&gt;however...this doesn&apos;t seem to be the case...there are random ports in there...which should be fine&lt;/p&gt;

&lt;p&gt;hmm.. it seems that &lt;tt&gt;MiniHS2#getBaseDir()&lt;/tt&gt; returns the same directory in case of parallel execution. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35egn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15068] Run ClearDanglingScratchDir periodically inside HS2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15068</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13429&quot; title=&quot;Tool to remove dangling scratch dir&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13429&quot;&gt;&lt;del&gt;HIVE-13429&lt;/del&gt;&lt;/a&gt;, we introduce a tool which clear dangling scratch directory. In this ticket, we want to invoke the tool automatically on a Hive cluster. Options are:&lt;br/&gt;
1. cron job, which would involve manual cron job setup&lt;br/&gt;
2. As a metastore thread. However, it is possible we run metastore without hdfs in the future (eg, managing s3 files). ClearDanglingScratchDir needs support which only exists in hdfs, it won&apos;t work if the above scenario happens&lt;br/&gt;
3. As a HS2 thread. The downside is if no HS2 is running, the tool will not run automatically. But we expect HS2 will be a required component down the road&lt;/p&gt;

&lt;p&gt;Here I choose approach 3 in the implementation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015329">HIVE-15068</key>
            <summary>Run ClearDanglingScratchDir periodically inside HS2</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                            <label>TODOC1.3</label>
                            <label>TODOC2.2</label>
                    </labels>
                <created>Wed, 26 Oct 2016 07:11:14 +0000</created>
                <updated>Wed, 26 Jul 2017 00:03:27 +0000</updated>
                            <resolved>Wed, 2 Nov 2016 00:42:08 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15607969" author="hiveqa" created="Wed, 26 Oct 2016 09:24:20 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835280/HIVE-15068.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835280/HIVE-15068.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10622 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver[hbase_bulk] (batchId=89)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1814/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1814/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1814/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1814/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1814/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1814/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835280 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15617146" author="thejas" created="Sat, 29 Oct 2016 01:20:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; Can you please add a reviewboard link or pull request ?&lt;/p&gt;</comment>
                            <comment id="15626418" author="daijy" created="Tue, 1 Nov 2016 19:24:42 +0000"  >&lt;p&gt;Address &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;&apos;s review comments.&lt;/p&gt;</comment>
                            <comment id="15626496" author="daijy" created="Tue, 1 Nov 2016 19:55:33 +0000"  >&lt;p&gt;I misunderstood the review comments in the test. Attach another patch.&lt;/p&gt;</comment>
                            <comment id="15626537" author="thejas" created="Tue, 1 Nov 2016 20:14:06 +0000"  >&lt;p&gt;Thanks for the updates.&lt;br/&gt;
+1 pending tests.&lt;/p&gt;
</comment>
                            <comment id="15626770" author="daijy" created="Tue, 1 Nov 2016 21:48:09 +0000"  >&lt;p&gt;Another change suggested by Thejas to add a random initial wait.&lt;/p&gt;</comment>
                            <comment id="15626828" author="thejas" created="Tue, 1 Nov 2016 22:10:32 +0000"  >&lt;p&gt;+1 to the update, pending tests.&lt;/p&gt;</comment>
                            <comment id="15626927" author="hiveqa" created="Tue, 1 Nov 2016 22:47:22 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836432/HIVE-15068.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836432/HIVE-15068.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10628 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_5] (batchId=90)
org.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=272)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1907/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1907/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1907/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1907/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1907/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1907/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836432 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15627055" author="hiveqa" created="Tue, 1 Nov 2016 23:33:41 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836444/HIVE-15068.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836444/HIVE-15068.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 10628 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1908/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1908/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1908/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1908/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1908/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1908/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836444 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15627204" author="daijy" created="Wed, 2 Nov 2016 00:36:52 +0000"  >&lt;p&gt;The same patch for branch-1.&lt;/p&gt;</comment>
                            <comment id="15627215" author="daijy" created="Wed, 2 Nov 2016 00:42:09 +0000"  >&lt;p&gt;Patch pushed to both branch-1 and master.&lt;/p&gt;</comment>
                            <comment id="15627522" author="lefty@hortonworks.com" created="Wed, 2 Nov 2016 03:22:13 +0000"  >&lt;p&gt;Doc note:  This adds &lt;b&gt;hive.server2.clear.dangling.scratchdir&lt;/b&gt; and &lt;b&gt;hive.server2.clear.dangling.scratchdir.interval&lt;/b&gt; to HiveConf.java.  They need to be documented in the wiki for releases 1.3.0 and 2.2.0.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-HiveServer2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; HiveServer2 &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added TODOC1.3 and TODOC2.2 labels.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835280" name="HIVE-15068.1.patch" size="16951" author="daijy" created="Wed, 26 Oct 2016 07:12:22 +0000"/>
                            <attachment id="12836428" name="HIVE-15068.2.patch" size="17669" author="daijy" created="Tue, 1 Nov 2016 19:40:54 +0000"/>
                            <attachment id="12836432" name="HIVE-15068.3.patch" size="17893" author="daijy" created="Tue, 1 Nov 2016 20:05:02 +0000"/>
                            <attachment id="12836481" name="HIVE-15068.4.branch-1.patch" size="17956" author="daijy" created="Wed, 2 Nov 2016 00:37:27 +0000"/>
                            <attachment id="12836444" name="HIVE-15068.4.patch" size="18131" author="daijy" created="Tue, 1 Nov 2016 21:48:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Oct 2016 09:24:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ejz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12332154</customfieldvalue>
    <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15069] Optimize MetaStoreDirectSql:: aggrColStatsForPartitions during query compilation</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15069</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13015334">HIVE-15069</key>
            <summary>Optimize MetaStoreDirectSql:: aggrColStatsForPartitions during query compilation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh.balamohan">Rajesh Balamohan</assignee>
                                    <reporter username="rajesh.balamohan">Rajesh Balamohan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 07:37:06 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:27 +0000</updated>
                            <resolved>Tue, 15 Nov 2016 05:02:32 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15607744" author="rajesh.balamohan" created="Wed, 26 Oct 2016 07:39:16 +0000"  >&lt;p&gt;With patch, compilation time comes down to &quot;2.62&quot; seconds vs 4-5 seconds earlier (1 node LLAP in my environment).  Also tried with Q-55 in single node LLAP. Without patch, it took ~1.3-1.5 seconds for query compilation. With the patch it takes 0.80 seconds.&lt;/p&gt;</comment>
                            <comment id="15608051" author="hiveqa" created="Wed, 26 Oct 2016 10:08:05 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835281/HIVE-15069.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835281/HIVE-15069.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 10621 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[annotate_stats_part] (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[extrapolate_part_stats_date] (batchId=18)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[extrapolate_part_stats_partial] (batchId=43)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testStatsFastTrivial (batchId=190)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testStatsFastTrivial (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testStatsFastTrivial (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testStatsFastTrivial (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testStatsFastTrivial (batchId=198)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1815/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1815/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1815/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1815/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1815/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1815/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835281 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15608756" author="hiveqa" created="Wed, 26 Oct 2016 15:19:54 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835339/HIVE-15069.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835339/HIVE-15069.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 41 failed/errored test(s), 10621 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[annotate_stats_part] (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_join0] (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[explain_logical] (batchId=58)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[extrapolate_part_stats_date] (batchId=18)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[extrapolate_part_stats_full] (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[extrapolate_part_stats_partial] (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join28] (batchId=75)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join32] (batchId=17)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join33] (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join_parse] (batchId=37)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mapjoin_mapjoin] (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mapjoin_subquery] (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[stats_ppr_all] (batchId=52)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[tez_join_hash] (batchId=47)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[bucket6] (batchId=131)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[explainuser_2] (batchId=134)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr1] (batchId=131)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[columnStatsUpdateForStatsOptimizer_1] (batchId=142)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[explainuser_1] (batchId=142)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[hybridgrace_hashjoin_2] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join32_lessSize] (batchId=136)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_dyn_part1] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_dyn_part2] (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_dyn_part3] (batchId=137)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[mapjoin_mapjoin] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[optimize_nullscan] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sample1] (batchId=137)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[tez_join_hash] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[hybridgrace_hashjoin_2] (batchId=90)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join28] (batchId=128)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join32] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join32_lessSize] (batchId=95)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join33] (batchId=99)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[mapjoin_mapjoin] (batchId=113)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[mapjoin_subquery] (batchId=113)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1822/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1822/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1822/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1822/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1822/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1822/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 41 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835339 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15612664" author="sershe" created="Thu, 27 Oct 2016 18:12:49 +0000"  >&lt;p&gt;I am assuming it&apos;s too much to ask to have most of it moved out of directsql &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;+1 pending tests&lt;/p&gt;</comment>
                            <comment id="15626367" author="daijy" created="Tue, 1 Nov 2016 19:06:41 +0000"  >&lt;p&gt;partsFoundForPartitions can be removed. Just curious is the most saving from skipping partsFoundForPartitions, or by using cache in RelOptHiveTable?&lt;/p&gt;</comment>
                            <comment id="15626943" author="rajesh.balamohan" created="Tue, 1 Nov 2016 22:53:52 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;. I have enqueued a jenkin test for the latest patch (not sure why jenkins was not run earlier).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; - &lt;tt&gt;partsFoundForPartitions&lt;/tt&gt; is needed as there can be instances, when it is not available in the &lt;tt&gt;aggrStatsCache&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15627145" author="daijy" created="Wed, 2 Nov 2016 00:11:31 +0000"  >&lt;p&gt;Oh, I was looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15069&quot; title=&quot;Optimize MetaStoreDirectSql:: aggrColStatsForPartitions during query compilation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15069&quot;&gt;&lt;del&gt;HIVE-15069&lt;/del&gt;&lt;/a&gt;.2.patch. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15069&quot; title=&quot;Optimize MetaStoreDirectSql:: aggrColStatsForPartitions during query compilation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15069&quot;&gt;&lt;del&gt;HIVE-15069&lt;/del&gt;&lt;/a&gt;.3.patch is much simplified.&lt;/p&gt;</comment>
                            <comment id="15627195" author="hiveqa" created="Wed, 2 Nov 2016 00:31:23 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835525/HIVE-15069.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835525/HIVE-15069.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 10627 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1910/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1910/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1910/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1910/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1910/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1910/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835525 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15666094" author="prasanth_j" created="Tue, 15 Nov 2016 05:02:32 +0000"  >&lt;p&gt;Patch committed to master. Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajesh.balamohan&quot; class=&quot;user-hover&quot; rel=&quot;rajesh.balamohan&quot;&gt;Rajesh Balamohan&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835281" name="HIVE-15069.1.patch" size="10483" author="rajesh.balamohan" created="Wed, 26 Oct 2016 07:39:16 +0000"/>
                            <attachment id="12835339" name="HIVE-15069.2.patch" size="35334" author="rajesh.balamohan" created="Wed, 26 Oct 2016 14:05:28 +0000"/>
                            <attachment id="12835525" name="HIVE-15069.3.patch" size="7358" author="rajesh.balamohan" created="Thu, 27 Oct 2016 09:01:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Oct 2016 10:08:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35el3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15070] HIVE-13062 causes the HMS schema upgrade tests to not work</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15070</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hive/blob/master/testutils/metastore/metastore-upgrade-test.sh#L124&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/master/testutils/metastore/metastore-upgrade-test.sh#L124&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; read script
&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ $begin_upgrade_test = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; ] || echo upgrade-$name | grep &lt;span class=&quot;code-quote&quot;&gt;&quot;upgrade-$VERSION_BASE&quot;&lt;/span&gt;; then
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above code, the bash variable &quot;name&quot; is never initialized and hence the entire if condition is never true which prevents the script from triggering any test scripts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015428">HIVE-15070</key>
            <summary>HIVE-13062 causes the HMS schema upgrade tests to not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ngangam">Naveen Gangam</assignee>
                                    <reporter username="ngangam">Naveen Gangam</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 14:11:29 +0000</created>
                <updated>Wed, 26 Jul 2017 00:03:14 +0000</updated>
                            <resolved>Wed, 26 Oct 2016 15:29:02 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15608761" author="ngangam" created="Wed, 26 Oct 2016 15:21:30 +0000"  >&lt;p&gt;The value of the upgrade script filenames are being read into variable &quot;script&quot;. So &lt;tt&gt;$name&lt;/tt&gt; should be &lt;tt&gt;$script&lt;/tt&gt;. Currently this is preventing the script from iterating over all the upgrade scripts. It just installs the base schema for hive-0.10.0 and never upgrades.&lt;/p&gt;

&lt;p&gt;Attaching a patch that will fix this.&lt;/p&gt;</comment>
                            <comment id="15608765" author="ngangam" created="Wed, 26 Oct 2016 15:23:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; Could you please review this? I understand the HMS pre-commit build doesnt exist anymore but this is a simple fix. Thanks&lt;/p&gt;</comment>
                            <comment id="15608773" author="spena" created="Wed, 26 Oct 2016 15:25:57 +0000"  >&lt;p&gt;LGTM +1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835357" name="HIVE-15070.patch" size="720" author="ngangam" created="Wed, 26 Oct 2016 15:21:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Oct 2016 15:25:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35f5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15071] Support alias on target table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15071</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;merge into target T using ....  should be supported&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015505">HIVE-15071</key>
            <summary>Support alias on target table</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12835256">HIVE-10924</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 17:37:32 +0000</created>
                <updated>Fri, 28 Oct 2016 01:19:09 +0000</updated>
                            <resolved>Fri, 28 Oct 2016 01:19:08 +0000</resolved>
                                                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15613909" author="ekoifman" created="Fri, 28 Oct 2016 01:19:09 +0000"  >&lt;p&gt;rolled this into &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14943&quot; title=&quot;Base Implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14943&quot;&gt;&lt;del&gt;HIVE-14943&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35fn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15072] Schematool should recognize missing tables in metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15072</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When Install a new database failed half way(for some other reasons), not all of the metastore tables are installed. This caused HMS server failed to start up due to missing tables. Re-run the Schematool, It ran successfully, and in the stdout log said: &quot;Database already has tables. Skipping table creation&quot;.&lt;br/&gt;
However, restarting HMS getting the same error reporting missing tables.&lt;br/&gt;
Schematool should detect missing tables and provide options to go ahead and recreate missing tables in the case of new installation&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015524">HIVE-15072</key>
            <summary>Schematool should recognize missing tables in metastore</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13020822">HIVE-15206</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ngangam">Naveen Gangam</assignee>
                                    <reporter username="ychena">Yongzhi Chen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 18:43:52 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:22 +0000</updated>
                            <resolved>Mon, 21 Nov 2016 01:26:06 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15677621" author="ngangam" created="Fri, 18 Nov 2016 20:11:43 +0000"  >&lt;p&gt;Attaching a patch that compares tables from the HMS Metastore DB to the tables from the hive schema files for that version of the DB.&lt;/p&gt;</comment>
                            <comment id="15677624" author="ngangam" created="Fri, 18 Nov 2016 20:12:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ychena&quot; class=&quot;user-hover&quot; rel=&quot;ychena&quot;&gt;Yongzhi Chen&lt;/a&gt; Could you please review? Thanks&lt;/p&gt;</comment>
                            <comment id="15677647" author="aihuaxu" created="Fri, 18 Nov 2016 20:23:07 +0000"  >&lt;p&gt;Looks good to me. +1 pending test.&lt;/p&gt;</comment>
                            <comment id="15677657" author="ngangam" created="Fri, 18 Nov 2016 20:27:36 +0000"  >&lt;p&gt;Published the patch to reviewboard.&lt;/p&gt;</comment>
                            <comment id="15677785" author="hiveqa" created="Fri, 18 Nov 2016 21:21:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12839609/HIVE-15072.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12839609/HIVE-15072.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 10 failed/errored test(s), 10579 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=1)
	[udf_upper.q,ctas_date.q,schema_evol_orc_acidvec_table_update.q,groupby_grouping_sets3.q,vector_decimal_5.q,bucket_map_join_spark4.q,select_unquote_and.q,timestamp_2.q,date_join1.q,constprog_type.q,timestamp_ints_casts.q,udf_negative.q,orc_merge_diff_fs.q,udf_substring_index.q,newline.q,diff_part_input_formats.q,auto_join_without_localtask.q,tez_bmj_schema_evolution.q,bucketmapjoin4.q,udf_date_sub.q,udf_context_aware.q,groupby2_noskew.q,authorization_non_id.q,sample_islocalmode_hook_hadoop20.q,auto_sortmerge_join_3.q,mapjoin_test_outer.q,vectorization_9.q,input15.q,groupby6_noskew.q,udf_PI.q]
TestCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=13)
	[avro_joins.q,authorization_create_temp_table.q,exim_00_nonpart_empty.q,annotate_stats_join_pkfk.q,describe_comment_nonascii.q,orc_analyze.q,subquery_views.q,partition_date.q,tez_join_result_complex.q,input36.q,alter_numbuckets_partitioned_table2_h23.q,transform_ppr1.q,spark_vectorized_dynamic_partition_pruning.q,load_orc_part.q,compute_stats_double.q,authorization_index.q,auto_join14.q,vectorization_14.q,authorization_1.q,windowing_udaf2.q,fold_case.q,stats1.q,list_bucket_dml_3.q,alter_table_partition_drop.q,cbo_stats.q,parquet_types_vectorization.q,union_view.q,insert_dir_distcp.q,smb_mapjoin_22.q,autoColumnStats_8.q]
TestCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=17)
	[encryption_move_tbl.q,ppd_join3.q,auto_join23.q,list_bucket_dml_11.q,join10.q,cbo_rp_udf_percentile2.q,udf_lower.q,constprog_dp.q,create_struct_table.q,groupby_multi_single_reducer2.q,skewjoin_mapjoin9.q,offset_limit_global_optimizer.q,hook_context_cs.q,exim_22_import_exist_authsuccess.q,create_func1.q,create_skewed_table1.q,partition_wise_fileformat.q,authorization_view_1.q,show_tables.q,orc_empty_files.q,union_ppr.q,stats_partial_size.q,join32.q,list_bucket_dml_14.q,exim_24_import_nonexist_authsuccess.q,udf_parse_url.q,ansi_sql_arithmetic.q,join26.q,schema_evol_text_nonvec_part.q,ctas_char.q]
TestCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=3)
	[join_cond_pushdown_unqual4.q,join13.q,list_bucket_query_oneskew_2.q,explainanalyze_1.q,ppr_pushdown2.q,sample3.q,druid_topn.q,tablename_with_select.q,smb_mapjoin_19.q,subquery_in_explain_rewrite.q,union23.q,subquery_exists_having.q,partition_wise_fileformat5.q,udf_trunc.q,llapdecider.q,avro_partitioned.q,orc_null_check.q,view_inputs.q,union31.q,ptf_decimal.q,extract.q,dynpart_sort_optimization2.q,cbo_rp_auto_join1.q,display_colstats_tbllvl.q,macro.q,split.q,authorization_explain.q,hook_order.q,pointlookup.q,bucketmapjoin2.q]
TestCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=5)
	[ptf_general_queries.q,correlationoptimizer9.q,auto_join_reordering_values.q,sample2.q,decimal_join.q,mapjoin_subquery2.q,join43.q,bucket_if_with_path_filter.q,udf_month.q,mapjoin1.q,avro_partitioned_native.q,join25.q,nullformatdir.q,authorization_admin_almighty1.q,udf_avg.q,cte_mat_4.q,groupby3.q,cbo_rp_union.q,udaf_covar_samp.q,exim_03_nonpart_over_compat.q,udf_logged_in_user.q,index_stale.q,union12.q,skewjoinopt2.q,skewjoinopt18.q,colstats_all_nulls.q,bucketsortoptimize_insert_2.q,quote2.q,udf_classloader.q,authorization_owner_actions.q]
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_3] (batchId=90)
org.apache.hadoop.hive.thrift.TestHadoopAuthBridge23.testSaslWithHiveMetaStore (batchId=216)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2199/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2199/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2199/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2199/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2199/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2199/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12839609 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15677853" author="ngangam" created="Fri, 18 Nov 2016 21:47:02 +0000"  >&lt;p&gt;The test failures do not appear to be related to the proposed patch. The newly added unit test in this patch seems to have passed. So +1 for me.&lt;/p&gt;</comment>
                            <comment id="15678421" author="ctang.ma" created="Sat, 19 Nov 2016 02:33:00 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15682183" author="ctang.ma" created="Mon, 21 Nov 2016 01:26:06 +0000"  >&lt;p&gt;Committed to 2.2.0. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt; for the patch. If you want the patch to be committed to 2.1.1, please modify your patch accordingly since I think the test case is not proper. Thanks&lt;/p&gt;</comment>
                            <comment id="15684025" author="ngangam" created="Mon, 21 Nov 2016 16:33:00 +0000"  >&lt;p&gt;Thanks for the review and commit &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt;. I do not think this is needed for older releases. However, I would like to understand why the unit test would not work for older releases. The unit test uses the schema version from the HMS metastore to determine the version of the file to parse and determine the table list. I have tested this against older schema versions too. Do you see this not working for any reason? Thanks&lt;/p&gt;</comment>
                            <comment id="15684611" author="ctang.ma" created="Mon, 21 Nov 2016 20:19:44 +0000"  >&lt;p&gt;Your unit test case is to upgrade to 2.2.0 (see the line of code in the test: schemaTool.doUpgrade(&quot;2.2.0&quot;)&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; version 2.2.0 is the current Hive version, so I think it might not work for old versions, no?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12839609" name="HIVE-15072.patch" size="7335" author="ngangam" created="Fri, 18 Nov 2016 20:11:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Nov 2016 20:11:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35frb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15073] Schematool should detect malformed URIs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15073</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For some causes(most unknown), HMS DB tables sometimes has invalid entries, for example URI missing scheme for SDS table&apos;s LOCATION column or DBS&apos;s DB_LOCATION_URI column. These malformed URIs lead to hard to analyze errors in HIVE and SENTRY. Schematool need to provide a command to detect these malformed URI, give a warning and provide an option to fix the URIs&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015541">HIVE-15073</key>
            <summary>Schematool should detect malformed URIs</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13020822">HIVE-15206</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ychena">Yongzhi Chen</assignee>
                                    <reporter username="ychena">Yongzhi Chen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 19:13:42 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:37 +0000</updated>
                            <resolved>Tue, 22 Nov 2016 15:24:59 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15684032" author="ychena" created="Mon, 21 Nov 2016 16:35:18 +0000"  >&lt;p&gt;Add check URIs for DB, tables and partitions. &lt;/p&gt;</comment>
                            <comment id="15684035" author="ychena" created="Mon, 21 Nov 2016 16:35:39 +0000"  >&lt;p&gt;Need code review&lt;/p&gt;</comment>
                            <comment id="15684281" author="hiveqa" created="Mon, 21 Nov 2016 18:10:13 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12839827/HIVE-15073.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12839827/HIVE-15073.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10715 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=117)
	[stats2.q,groupby4_noskew.q,groupby3_map_skew.q,join_cond_pushdown_2.q,union19.q,union24.q,union_remove_5.q,groupby7_noskew_multi_single_reducer.q,index_auto_self_join.q,auto_smb_mapjoin_14.q,script_env_var2.q,pcr.q,auto_join_filters.q,join0.q,join37.q]
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2227/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2227/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2227/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2227/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2227/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2227/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12839827 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15684288" author="ychena" created="Mon, 21 Nov 2016 18:12:31 +0000"  >&lt;p&gt;The failures are not related.&lt;/p&gt;</comment>
                            <comment id="15684887" author="hiveqa" created="Mon, 21 Nov 2016 22:08:25 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12839886/HIVE-15073.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12839886/HIVE-15073.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10717 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=107)
	[groupby_grouping_id2.q,input17.q,bucketmapjoin12.q,ppd_gby_join.q,auto_join10.q,ptf_rcfile.q,vectorized_rcfile_columnar.q,vector_elt.q,ppd_join5.q,ppd_join.q,join_filters_overlap.q,join_cond_pushdown_1.q,timestamp_3.q,load_dyn_part6.q,stats_noscan_2.q]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[index_auto_mult_tables] (batchId=77)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hive.hcatalog.mapreduce.TestHCatPartitionPublish.testPartitionPublish (batchId=172)
org.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=272)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2231/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2231/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2231/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2231/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2231/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2231/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12839886 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15684894" author="aihuaxu" created="Mon, 21 Nov 2016 22:13:01 +0000"  >&lt;p&gt;Looks good to me. +1.&lt;/p&gt;</comment>
                            <comment id="15685836" author="ychena" created="Tue, 22 Nov 2016 06:22:22 +0000"  >&lt;p&gt;The failures are not related.&lt;/p&gt;</comment>
                            <comment id="15687025" author="ychena" created="Tue, 22 Nov 2016 15:25:00 +0000"  >&lt;p&gt;Committed to master.&lt;br/&gt;
Thanks Aihua for reviewing the code.&lt;/p&gt;</comment>
                            <comment id="15689178" author="lefty@hortonworks.com" created="Wed, 23 Nov 2016 07:14:28 +0000"  >&lt;p&gt;Does this need to be documented in the wiki?&lt;/p&gt;

&lt;p&gt;The issue description says &quot;Schematool need to provide a command to detect these malformed URI&quot; but I don&apos;t see a new command in the patch.&lt;/p&gt;

&lt;p&gt;Here&apos;s the wikidoc:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+Schema+Tool#HiveSchemaTool-TheHiveSchemaTool&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;The Hive Schema Tool &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12839827" name="HIVE-15073.1.patch" size="17953" author="ychena" created="Mon, 21 Nov 2016 16:35:18 +0000"/>
                            <attachment id="12839886" name="HIVE-15073.2.patch" size="18225" author="ychena" created="Mon, 21 Nov 2016 20:53:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Nov 2016 18:10:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35fv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15074] Schematool provides a way to detect invalid entries in VERSION table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15074</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For some unknown reason, we see customer&apos;s HMS can not start because there are multiple entries in their HMS VERSION table. Schematool should provide a way to validate the HMS db and provide warning and fix options for this kind of issues. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13015543">HIVE-15074</key>
            <summary>Schematool provides a way to detect invalid entries in VERSION table</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13020822">HIVE-15206</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctang.ma">Chaoyu Tang</assignee>
                                    <reporter username="ychena">Yongzhi Chen</reporter>
                        <labels>
                            <label>TODOC2.2</label>
                    </labels>
                <created>Wed, 26 Oct 2016 19:22:08 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:19 +0000</updated>
                            <resolved>Mon, 5 Dec 2016 14:02:11 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15703325" author="ctang.ma" created="Mon, 28 Nov 2016 22:22:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ychena&quot; class=&quot;user-hover&quot; rel=&quot;ychena&quot;&gt;Yongzhi Chen&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt;, could you help to review the patch, thanks&lt;/p&gt;</comment>
                            <comment id="15703362" author="ngangam" created="Mon, 28 Nov 2016 22:38:52 +0000"  >&lt;p&gt;Functionally, it looks good to me. &lt;/p&gt;

&lt;p&gt;Just for semantics to make it consistent with other verify* calls, do we want to make it return a boolean to indicate success/failure instead of throwing an exception? maybe overload &lt;tt&gt;verifySchemaVersion()&lt;/tt&gt; that catches the exception and returns a boolean? I will defer to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt; for the final call on this.&lt;/p&gt;</comment>
                            <comment id="15703834" author="hiveqa" created="Tue, 29 Nov 2016 01:44:25 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12840735/HIVE-15074.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12840735/HIVE-15074.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2312/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2312/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2312/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2312/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2312/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2312/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2016-11-29 01:44:23.550
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-2312/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2016-11-29 01:44:23.553
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 63bdfa6 HIVE-15284: Add junit test to test replication scenarios (Sushanth Sowmyan reviewed by Vaibhav Gumashta)
+ git clean -f -d
Removing ql/src/test/queries/clientpositive/specialChar.q
Removing ql/src/test/results/clientpositive/specialChar.q.out
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 63bdfa6 HIVE-15284: Add junit test to test replication scenarios (Sushanth Sowmyan reviewed by Vaibhav Gumashta)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2016-11-29 01:44:24.497
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/beeline/src/java/org/apache/hive/beeline/HiveSchemaTool.java: No such file or directory
error: a/itests/hive-unit/src/test/java/org/apache/hive/beeline/TestSchemaTool.java: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12840735 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15705406" author="aihuaxu" created="Tue, 29 Nov 2016 14:16:38 +0000"  >&lt;p&gt;That&apos;s right. We are trying to return boolean rather than throwing exceptions since we will continue the following functions to detect other issues. &lt;/p&gt;</comment>
                            <comment id="15705839" author="ctang.ma" created="Tue, 29 Nov 2016 16:54:56 +0000"  >&lt;p&gt;Should not we stop the validations if there are some schema version issues (incompatible, duplicated invalid entries, no version etc)? Otherwise, the following schema validations, especially those based on the version like validateSchemaTables, will become meaningless since the based schema is already not right. I can put the validateSchemaVersions as the first validation point. Any thought? &lt;/p&gt;</comment>
                            <comment id="15706394" author="ctang.ma" created="Tue, 29 Nov 2016 20:08:47 +0000"  >&lt;p&gt;Provide a new patch based on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt;&apos;s, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;&apos;s comments, though not totally convinced that we should still continue the validations if the version has already be detected not right &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, could you review the patch? Thanks&lt;/p&gt;</comment>
                            <comment id="15706625" author="hiveqa" created="Tue, 29 Nov 2016 21:41:45 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12840920/HIVE-15074.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12840920/HIVE-15074.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10747 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample2] (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample4] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample6] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample7] (batchId=59)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample9] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2329/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2329/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2329/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2329/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2329/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2329/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12840920 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15706688" author="ctang.ma" created="Tue, 29 Nov 2016 22:05:48 +0000"  >&lt;p&gt;The failed tests are not related to this patch.&lt;/p&gt;</comment>
                            <comment id="15706741" author="hiveqa" created="Tue, 29 Nov 2016 22:25:44 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12840920/HIVE-15074.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12840920/HIVE-15074.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10747 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample2] (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample4] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample6] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample7] (batchId=59)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample9] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2330/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2330/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2330/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2330/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2330/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2330/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12840920 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15713034" author="aihuaxu" created="Thu, 1 Dec 2016 20:46:49 +0000"  >&lt;p&gt;The patch looks good. + 1.&lt;/p&gt;</comment>
                            <comment id="15722339" author="ctang.ma" created="Mon, 5 Dec 2016 14:02:12 +0000"  >&lt;p&gt;Committed to 2.2.0. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt; for review.&lt;/p&gt;</comment>
                            <comment id="15737508" author="lefty@hortonworks.com" created="Sat, 10 Dec 2016 08:38:07 +0000"  >&lt;p&gt;Does this need to be documented in the wiki?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+Schema+Tool#HiveSchemaTool-TheHiveSchemaTool&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;The Hive Schema Tool &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15742167" author="aihuaxu" created="Mon, 12 Dec 2016 14:38:43 +0000"  >&lt;p&gt;Yes. It should get documented in SchemaTool section. I will try to doc it after the child tasks are done and doc it along with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15206&quot; title=&quot;Add a validation functionality to hiveSchemaTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15206&quot;&gt;HIVE-15206&lt;/a&gt;. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; for reminding.&lt;/p&gt;</comment>
                            <comment id="15744480" author="lefty@hortonworks.com" created="Tue, 13 Dec 2016 07:51:36 +0000"  >&lt;p&gt;Okay, I added a TODOC2.2 label.  Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12840920" name="HIVE-15074.1.patch" size="4499" author="ctang.ma" created="Tue, 29 Nov 2016 20:22:40 +0000"/>
                            <attachment id="12840735" name="HIVE-15074.patch" size="2690" author="ctang.ma" created="Mon, 28 Nov 2016 22:27:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 28 Nov 2016 22:22:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35fvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15075] Alter table change/replace unnecessarily drops stats</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15075</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The &apos;alter table&apos; command with &apos;change&apos; or &apos;replace&apos;  appears to unconditionally drop the column stats for the columns that are affected. If the new column has the same type as the old column, though, this is effectively just a rename of the column and the stats shouldn&apos;t be affected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015556">HIVE-15075</key>
            <summary>Alter table change/replace unnecessarily drops stats</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="twmarshall">Thomas Tauber-Marshall</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 20:00:33 +0000</created>
                <updated>Wed, 26 Oct 2016 20:00:33 +0000</updated>
                                            <version>1.1.0</version>
                                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35fyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15076] Improve scalability of LDAP authentication provider group filter</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15076</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Current implementation uses following algorithm:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;For a given user find all groups that user is a member of. (A list of LDAP groups is constructed as a result of that request)&lt;/li&gt;
	&lt;li&gt;Match this list of groups with provided group filter.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Time/Memory complexity of this approach is O(N) on client side, where N &#8211; is a number of groups the user has membership in. On a large directory (800+ groups per user) we can observe up to 2x performance degradation and failures because of size of LDAP response (LDAP: error code 4 - Sizelimit Exceeded).&lt;/p&gt;

&lt;p&gt;Some Directory Services (Microsoft Active Directory for instance) provide a virtual attribute for User Object that contains a list of groups that user belongs to. This attribute can be used to quickly determine whether this user passes or fails the group filter.   &lt;/p&gt;</description>
                <environment></environment>
        <key id="13015564">HIVE-15076</key>
            <summary>Improve scalability of LDAP authentication provider group filter</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yalovyyi">Illya Yalovyy</assignee>
                                    <reporter username="yalovyyi">Illya Yalovyy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 20:17:02 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:36 +0000</updated>
                            <resolved>Mon, 9 Jan 2017 20:40:05 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15610260" author="hiveqa" created="Thu, 27 Oct 2016 01:14:33 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835413/HIVE-15076.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835413/HIVE-15076.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 6 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10644 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
org.apache.hive.hcatalog.pig.TestHCatLoaderComplexSchema.testMapNullKey[2] (batchId=170)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1832/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1832/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1832/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1832/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1832/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1832/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835413 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15610553" author="yalovyyi" created="Thu, 27 Oct 2016 03:48:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;None of failed tests seem to be related.&lt;/p&gt;

&lt;p&gt;I have opened a CR:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/53204/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/53204/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15615313" author="yalovyyi" created="Fri, 28 Oct 2016 12:58:27 +0000"  >&lt;p&gt;Tiny style update&lt;/p&gt;</comment>
                            <comment id="15628913" author="yalovyyi" created="Wed, 2 Nov 2016 13:08:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Could you please take a look at this CR?&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/53204/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/53204/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15649058" author="yalovyyi" created="Tue, 8 Nov 2016 22:52:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Could you please take a look at this CR?&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/53204/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/53204/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15654299" author="aihuaxu" created="Thu, 10 Nov 2016 15:14:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt; Can you help review the patch since you have worked on this? &lt;/p&gt;</comment>
                            <comment id="15683749" author="yalovyyi" created="Mon, 21 Nov 2016 14:46:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Could you please take a look at this CR?&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/53204/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/53204/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15684120" author="ngangam" created="Mon, 21 Nov 2016 17:09:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; I will start looking at this. What tests have you done with this refactoring? What LDAP implementations have you tested this against? Can you also comment a bit on the scale you have tested with, given that the reason for this change is making it scale for large LDAP directories? Thanks&lt;/p&gt;</comment>
                            <comment id="15684244" author="yalovyyi" created="Mon, 21 Nov 2016 17:56:00 +0000"  >&lt;p&gt;Naveen,&lt;br/&gt;
Thank you for taking a look.&lt;/p&gt;

&lt;p&gt;1. There is a new integration test in TestLdapAtnProviderWithMiniDS.java&lt;br/&gt;
2. I have tested it manually with Microsoft AD&lt;br/&gt;
3. Each user is a member of 100, 500, 1000 groups&lt;/p&gt;</comment>
                            <comment id="15697376" author="yalovyyi" created="Sat, 26 Nov 2016 06:17:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt;&lt;br/&gt;
Any update?&lt;/p&gt;</comment>
                            <comment id="15702529" author="ngangam" created="Mon, 28 Nov 2016 17:15:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; I have been sidetracks with some high priority items and it was a short week, so I did not have a whole lot of time to take a deep look. I just took a quick look and commented on reviewboard on some cosmetic stuff. I will get to the functional side over the next couple of days. So please bear with my schedule.&lt;/p&gt;

&lt;p&gt;Also can you share any metrics you may have recorded on performance? Thanks&lt;/p&gt;</comment>
                            <comment id="15702942" author="yalovyyi" created="Mon, 28 Nov 2016 19:54:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for the feedback on this CR.&lt;/p&gt;

&lt;p&gt;Here is some performance results (what I can share):&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; User member of # groups &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; GroupMembershipKeyFilter &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; UserMembershipKeyFilter &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 200 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.118 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.103 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 400 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.135 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.106 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 600 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.171 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.113 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 800 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.230 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.119 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; FAIL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 0.129 &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;GroupMembershipKeyFilter fails with &quot;javax.naming.SizeLimitExceededException: &lt;span class=&quot;error&quot;&gt;&amp;#91;LDAP: error code 4 - Sizelimit Exceeded&amp;#93;&lt;/span&gt;&quot; when number of groups greater than 800. The particular number of groups when the default implementation fails depends on record size for each group, so in real production it will be much less.&lt;/p&gt;</comment>
                            <comment id="15731664" author="hiveqa" created="Thu, 8 Dec 2016 09:30:41 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12842254/HIVE-15076.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12842254/HIVE-15076.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 6 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10805 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample2] (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample4] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample6] (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample7] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample9] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=132)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=134)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[stats_based_fetch_decision] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=92)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2483/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2483/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2483/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2483/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2483/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2483/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12842254 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15732584" author="aihuaxu" created="Thu, 8 Dec 2016 15:57:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; I left some comments in the review board. &lt;/p&gt;</comment>
                            <comment id="15734511" author="hiveqa" created="Fri, 9 Dec 2016 06:45:40 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12842462/HIVE-15076.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12842462/HIVE-15076.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 6 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10814 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample2] (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample4] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample6] (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample7] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample9] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=134)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[stats_based_fetch_decision] (batchId=150)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2511/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2511/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2511/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2511/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2511/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2511/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12842462 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15745376" author="yalovyyi" created="Tue, 13 Dec 2016 15:11:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt; I have addressed your concerns. Please see my latest patch.&lt;/p&gt;</comment>
                            <comment id="15783013" author="aihuaxu" created="Wed, 28 Dec 2016 14:42:05 +0000"  >&lt;p&gt;Sorry for the late review. I didn&apos;t see your message. &lt;/p&gt;

&lt;p&gt;Looks good to me. +1.&lt;/p&gt;</comment>
                            <comment id="15812763" author="yalovyyi" created="Mon, 9 Jan 2017 20:29:49 +0000"  >&lt;p&gt;Than you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Is anything else expected from my side? &lt;/p&gt;</comment>
                            <comment id="15812779" author="aihuaxu" created="Mon, 9 Jan 2017 20:36:52 +0000"  >&lt;p&gt;Not really. I will commit for you later.&lt;/p&gt;</comment>
                            <comment id="15812788" author="aihuaxu" created="Mon, 9 Jan 2017 20:40:05 +0000"  >&lt;p&gt;Pushed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; for your work.&lt;/p&gt;</comment>
                            <comment id="15839129" author="sladymon" created="Thu, 26 Jan 2017 03:40:05 +0000"  >&lt;p&gt;This patch updated &lt;b&gt;hive.server2.authentication.ldap.groupMembershipKey&lt;/b&gt; and added &lt;b&gt;hive.server2.authentication.ldap.userMembershipKey&lt;/b&gt;. These configuration parameters have been added to the wiki:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.authentication.ldap.groupMembershipKey&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties - hive.server2.authentication.ldap.groupMembershipKey &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.authentication.ldap.userMembershipKey&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties - hive.server2.authentication.ldap.userMembershipKey &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835413" name="HIVE-15076.1.patch" size="43664" author="yalovyyi" created="Wed, 26 Oct 2016 20:19:49 +0000"/>
                            <attachment id="12835796" name="HIVE-15076.2.patch" size="43651" author="yalovyyi" created="Fri, 28 Oct 2016 12:58:27 +0000"/>
                            <attachment id="12842254" name="HIVE-15076.3.patch" size="43790" author="yalovyyi" created="Thu, 8 Dec 2016 00:46:25 +0000"/>
                            <attachment id="12842462" name="HIVE-15076.4.patch" size="45815" author="yalovyyi" created="Fri, 9 Dec 2016 01:03:37 +0000"/>
                            <attachment id="12842830" name="HIVE-15076.5.patch" size="45989" author="yalovyyi" created="Mon, 12 Dec 2016 17:52:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Oct 2016 01:14:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35g07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15077] Acid LockManager is unfair</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15077</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10242&quot; title=&quot;ACID: insert overwrite prevents create table command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10242&quot;&gt;&lt;del&gt;HIVE-10242&lt;/del&gt;&lt;/a&gt; made the acid LM unfair.&lt;/p&gt;

&lt;p&gt;In TxnHandler.checkLock(), suppose we are trying to acquire SR5  (the number is extLockId).  &lt;/p&gt;

&lt;p&gt;Then &lt;br/&gt;
LockInfo[] locks = lockSet.toArray(new LockInfo&lt;span class=&quot;error&quot;&gt;&amp;#91;lockSet.size()&amp;#93;&lt;/span&gt;);&lt;/p&gt;

&lt;p&gt;may look like this (all explicitly listed locks are in Waiting state)&lt;/p&gt;

{...., SR5 SW3 X4}

&lt;p&gt;So the algorithm will find SR5 in the list and start looking backwards (to the left).&lt;br/&gt;
According to IDs, SR5 should wait for X4 to be granted but X4 won&apos;t even be examined and so SR5 may be granted.&lt;/p&gt;

&lt;p&gt;Theoretically, this could cause starvation.&lt;/p&gt;

&lt;p&gt;The query that generates the list already has&lt;br/&gt;
query.append(&quot; and hl_lock_ext_id &amp;lt;= &quot;).append(extLockId);&lt;/p&gt;

&lt;p&gt;but it should use &quot;&amp;lt;&quot; rather than &quot;&amp;lt;=&quot; to exclude the locks being checked from &quot;locks&quot; list which will make the algorithm look at all locks &quot;in front&quot; of a given lock.&lt;/p&gt;

&lt;p&gt;Here is an example (add to TestDbTxnManager2)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  @Test
  public void testFairness2() throws Exception {
    dropTable(new String[]{&quot;T7&quot;});
    CommandProcessorResponse cpr = driver.run(&quot;create table if not exists T7 (a int) partitioned by (p int) stored as orc TBLPROPERTIES (&apos;transactional&apos;=&apos;true&apos;)&quot;);
    checkCmdOnDriver(cpr);
    checkCmdOnDriver(driver.run(&quot;insert into T7 partition(p) values(1,1),(1,2)&quot;));//create 2 partitions
    cpr = driver.compileAndRespond(&quot;select a from T7 &quot;);
    checkCmdOnDriver(cpr);
    txnMgr.acquireLocks(driver.getPlan(), ctx, &quot;Fifer&quot;);//gets S lock on T7
    HiveTxnManager txnMgr2 = TxnManagerFactory.getTxnManagerFactory().getTxnManager(conf);
    swapTxnManager(txnMgr2);
    cpr = driver.compileAndRespond(&quot;alter table T7 drop partition (p=1)&quot;);
    checkCmdOnDriver(cpr);
    //tries to get X lock on T7.p=1 and gets Waiting state
    LockState lockState = ((DbTxnManager) txnMgr2).acquireLocks(driver.getPlan(), ctx, &quot;Fiddler&quot;, false);
    List&amp;lt;ShowLocksResponseElement&amp;gt; locks = getLocks();
    Assert.assertEquals(&quot;Unexpected lock count&quot;, 4, locks.size());
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, null, locks);
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, &quot;p=1&quot;, locks);
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, &quot;p=2&quot;, locks);
    checkLock(LockType.EXCLUSIVE, LockState.WAITING, &quot;default&quot;, &quot;T7&quot;, &quot;p=1&quot;, locks);

    HiveTxnManager txnMgr3 = TxnManagerFactory.getTxnManagerFactory().getTxnManager(conf);
    swapTxnManager(txnMgr3);
    //this should block behind the X lock on  T7.p=1
    cpr = driver.compileAndRespond(&quot;select a from T7&quot;);
    checkCmdOnDriver(cpr);
    txnMgr3.acquireLocks(driver.getPlan(), ctx, &quot;Fifer&quot;);//gets S lock on T6
    locks = getLocks();
    Assert.assertEquals(&quot;Unexpected lock count&quot;, 7, locks.size());
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, null, locks);
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, &quot;p=1&quot;, locks);
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, &quot;p=2&quot;, locks);
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, null, locks);
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, &quot;p=1&quot;, locks);
    checkLock(LockType.SHARED_READ, LockState.ACQUIRED, &quot;default&quot;, &quot;T7&quot;, &quot;p=2&quot;, locks);
    checkLock(LockType.EXCLUSIVE, LockState.WAITING, &quot;default&quot;, &quot;T7&quot;, &quot;p=1&quot;, locks);

  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The 2nd &lt;tt&gt;locks = getLocks();&lt;/tt&gt; output shows that all locks for the 2nd &lt;tt&gt;select * from T7&lt;/tt&gt; are all acquired while they should block behind the X lock to be fair.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015576">HIVE-15077</key>
            <summary>Acid LockManager is unfair</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 20:37:45 +0000</created>
                <updated>Wed, 23 May 2018 00:00:44 +0000</updated>
                            <resolved>Fri, 23 Feb 2018 21:35:49 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15609622" author="ekoifman" created="Wed, 26 Oct 2016 20:46:41 +0000"  >&lt;p&gt;a side note: change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10483&quot; title=&quot;insert overwrite partition deadlocks on itself with DbTxnManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10483&quot;&gt;&lt;del&gt;HIVE-10483&lt;/del&gt;&lt;/a&gt; to skip conflicts in the same txn should probably be moved to before&lt;/p&gt;

&lt;p&gt;if (locks&lt;span class=&quot;error&quot;&gt;&amp;#91;index&amp;#93;&lt;/span&gt;.state == LockState.ACQUIRED) {&lt;/p&gt;
</comment>
                            <comment id="16364990" author="hiveqa" created="Thu, 15 Feb 2018 00:13:52 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; findbugs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Findbugs executables are not available. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; mvndep &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m 44s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Maven dependency ordering for branch &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  7m 11s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 54s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 43s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; mvndep &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m  8s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Maven dependency ordering for patch &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 39s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 39s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m 44s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; ql: The patch generated 7 new + 426 unchanged - 0 fixed = 433 total (was 426) &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m 20s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; standalone-metastore: The patch generated 2 new + 510 unchanged - 3 fixed = 512 total (was 513) &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 42s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; asflicense &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m 14s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch generated 49 ASF License warnings. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 20m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  asflicense  javac  javadoc  findbugs  checkstyle  compile  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; maven &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /data/hiveptest/working/yetus/dev-support/hive-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / a2d22b4 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; checkstyle &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus/diff-checkstyle-ql.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus/diff-checkstyle-ql.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; checkstyle &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus/diff-checkstyle-standalone-metastore.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus/diff-checkstyle-standalone-metastore.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; asflicense &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus/patch-asflicense-problems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus/patch-asflicense-problems.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: ql standalone-metastore U: . &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-9219/yetus.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus    &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16365017" author="hiveqa" created="Thu, 15 Feb 2018 01:04:01 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12910632/HIVE-15077.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12910632/HIVE-15077.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 27 failed/errored test(s), 13101 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_queries] (batchId=240)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ppd_join5] (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[row__id] (batchId=78)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_move_tbl] (batchId=174)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=166)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[llap_acid] (batchId=170)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[llap_acid_fast] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[resourceplan] (batchId=163)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_1] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sysdb] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_opt_shuffle_serde] (batchId=179)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[ppd_join5] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkPerfCliDriver.testCliDriver[query1] (batchId=250)
org.apache.hadoop.hive.cli.control.TestDanglingQOuts.checkDanglingQOut (batchId=221)
org.apache.hadoop.hive.metastore.TestAcidTableSetup.testTransactionalValidation (batchId=223)
org.apache.hadoop.hive.metastore.client.TestAddPartitionsFromPartSpec.testAddPartitionSpecChangeRootPathToNull[Embedded] (batchId=205)
org.apache.hadoop.hive.ql.TestAcidOnTez.testGetSplitsLocks (batchId=224)
org.apache.hadoop.hive.ql.metadata.TestHive.testTable (batchId=278)
org.apache.hive.beeline.cli.TestHiveCli.testNoErrorDB (batchId=187)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.alterIndex (batchId=242)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.createIndex (batchId=242)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.dropIndex (batchId=242)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatStorer.testWriteSmallint (batchId=192)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd (batchId=235)
org.apache.hive.jdbc.TestSSL.testConnectionMismatch (batchId=234)
org.apache.hive.jdbc.TestSSL.testConnectionWrongCertCN (batchId=234)
org.apache.hive.jdbc.TestSSL.testMetastoreConnectionWrongCertCN (batchId=234)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/9219/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/9219/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/9219/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/9219/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-9219/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-9219/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 27 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12910632 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16366255" author="ekoifman" created="Thu, 15 Feb 2018 21:01:55 +0000"  >&lt;p&gt;no related failures&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alangates&quot; class=&quot;user-hover&quot; rel=&quot;alangates&quot;&gt;Alan Gates&lt;/a&gt; could you review please&lt;/p&gt;</comment>
                            <comment id="16373155" author="alangates" created="Thu, 22 Feb 2018 17:49:27 +0000"  >&lt;p&gt;I haven&apos;t fully understood this patch yet, but I&apos;m confused by its intent.&#160; So some questions to clarify that first.&lt;/p&gt;

&lt;p&gt;Pre &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10242&quot; title=&quot;ACID: insert overwrite prevents create table command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10242&quot;&gt;&lt;del&gt;HIVE-10242&lt;/del&gt;&lt;/a&gt; the lock manager was fair but too restrictive.&#160; To solve that you made it unfair in favor of shared locks.&#160; There are reasonable arguments for either option.&#160; But the choice seems binary.&#160; What middle ground are you aiming for?&lt;/p&gt;

&lt;p&gt;One thing I can see that would work is changing the locking mechanism to understand the database.table.partition hierarchy.&#160; In your &apos;insert overwrite&apos; example it seems to me that what is broken is that the xlock on DB.T1 extends up to DB.&#160; It should be a xlock on T1 and a slock on DB.&lt;/p&gt;</comment>
                            <comment id="16373307" author="ekoifman" created="Thu, 22 Feb 2018 19:32:06 +0000"  >&lt;p&gt;I did make it unfair in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10242&quot; title=&quot;ACID: insert overwrite prevents create table command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10242&quot;&gt;&lt;del&gt;HIVE-10242&lt;/del&gt;&lt;/a&gt; but that was not intentional.&#160; (To ensure fairness the requested lock is only checked against locks with smaller extLockId.&#160; The problem was that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10242&quot; title=&quot;ACID: insert overwrite prevents create table command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10242&quot;&gt;&lt;del&gt;HIVE-10242&lt;/del&gt;&lt;/a&gt; made it such that not all locks with smaller extLockId that should have been checked, were checked.)&#160; I had to sort locks by weight in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10242&quot; title=&quot;ACID: insert overwrite prevents create table command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10242&quot;&gt;&lt;del&gt;HIVE-10242&lt;/del&gt;&lt;/a&gt; because the jumpTable doesn&apos;t have any info about the resource and so the logic that says &quot;if looking to get S lock and see acquired S lock in front, acquire&quot; doesn&apos;t work because the S lock in front may be on a different resource.&#160; The issue this caused is demonstrated in &lt;tt&gt;testFairness2()&lt;/tt&gt; in the Description of this ticket.&lt;/p&gt;

&lt;p&gt;So I&apos;m aiming for a lock manager that is fair, correct and not more strict than necessary.&#160; The last part is a work in progress.&lt;/p&gt;

&lt;p&gt;What I think we really need is the use of Intention locks.&#160; That way what you are suggesting is possible.&#160; Right now we just &quot;infer&quot; a lock (which is not physically there) up/down the resource hierarchy based on the lock that is actually asked for (and of the same type).&#160; This way you&apos;d only have to compare locks on resources with the same path.&#160; This is a bigger change.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16374883" author="alangates" created="Fri, 23 Feb 2018 19:33:43 +0000"  >&lt;p&gt;+1.&#160; The previous code was trying to save time by only comparing against some of the locks, but since the sort or was changed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10242&quot; title=&quot;ACID: insert overwrite prevents create table command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10242&quot;&gt;&lt;del&gt;HIVE-10242&lt;/del&gt;&lt;/a&gt; that no longer works.&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="16374990" author="ekoifman" created="Fri, 23 Feb 2018 21:35:49 +0000"  >&lt;p&gt;committed to master&lt;/p&gt;

&lt;p&gt;thanks Alan for the review&lt;/p&gt;</comment>
                            <comment id="16486450" author="vgarg" created="Wed, 23 May 2018 00:00:44 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12823883">HIVE-10483</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12819034">HIVE-10242</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12910632" name="HIVE-15077.02.patch" size="14666" author="ekoifman" created="Wed, 14 Feb 2018 21:47:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Feb 2018 00:13:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35g2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15078] Flaky dummy</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15078</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I think it would be intresting to see what will happen if all currently known flaky test would be ignored...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015584">HIVE-15078</key>
            <summary>Flaky dummy</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kgyrtkirk">Zoltan Haindrich</assignee>
                                    <reporter username="kgyrtkirk">Zoltan Haindrich</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 21:05:16 +0000</created>
                <updated>Mon, 10 Dec 2018 18:39:08 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15610214" author="sseth" created="Thu, 27 Oct 2016 00:53:45 +0000"  >&lt;p&gt;The next set of flaky tests will surface &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Honestly, I think some of these actually point to a product bug - potential races. It could ofcourse also be bugs in the tests / test framework.&lt;/p&gt;</comment>
                            <comment id="15610233" author="sseth" created="Thu, 27 Oct 2016 01:02:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kgyrtkirk&quot; class=&quot;user-hover&quot; rel=&quot;kgyrtkirk&quot;&gt;Zoltan Haindrich&lt;/a&gt; - as a data point. When I changed the ptest configuration to remove some isolated tests, and convert them over to just skipBatching, as well as some batchSize changes - the number of failures changed. Nothing should have changed with this config change, except for test runs being several minutes faster.&lt;br/&gt;
I&apos;m going to try that change again one of these days.&lt;/p&gt;</comment>
                            <comment id="15610353" author="hiveqa" created="Thu, 27 Oct 2016 01:59:12 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835427/HIVE-15078.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835427/HIVE-15078.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 6 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10530 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestSemanticAnalysis - did not produce a TEST-*.xml file (likely timed out) (batchId=171)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_bucket_pruning] (batchId=29)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1833/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1833/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1833/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1833/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1833/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1833/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835427 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15616509" author="kgyrtkirk" created="Fri, 28 Oct 2016 20:45:05 +0000"  >&lt;p&gt;i&apos;ve forgot to re-attach the patch...&lt;/p&gt;

&lt;p&gt;very intresting...i suspect that there are a few problematic cases in there which when get into the same batch will fail - but these unstable tests may even help bugs to play hide and seek &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I will start some standalone mvn test executions...which will probably take a few days - but there outputs might be intresting...&lt;br/&gt;
until then...i will reschedule this a few times...because this doesn&apos;t contain any real change; just some disabled tests - this may detect some fluctuating tests&lt;/p&gt;</comment>
                            <comment id="15616692" author="sseth" created="Fri, 28 Oct 2016 21:45:39 +0000"  >&lt;p&gt;For CliDriver tests - Tez/Spark sessions are re-used across tests. I believe the Hive Client session gets resset each time - and this is supposed to make sure tests start with a clean base, and whatever settings are in the qfile get applied. I wonder if this is not working as it should.&lt;br/&gt;
Also, I read a comment somewhere about tests modifying and writing the configuration back to disk. That would cause all kinds of problems when running in a batch.&lt;/p&gt;

&lt;p&gt;Thanks for looking into this.&lt;/p&gt;</comment>
                            <comment id="16497870" author="hiveqa" created="Fri, 1 Jun 2018 11:30:53 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  6m  7s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m 27s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  5m  6s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  5m 28s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m 27s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m 27s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; xml &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m  1s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch has 1 ill-formed XML file(s). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  5m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; asflicense &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 10s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not generate ASF License warnings. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 31m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  asflicense  javac  javadoc  xml  compile  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; maven &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /data/hiveptest/working/yetus_PreCommit-HIVE-Build-11407/dev-support/hive-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 28779d2 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; xml &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-11407/yetus/xml.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-11407/yetus/xml.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: . U: . &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-11407/yetus.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-11407/yetus.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus    &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16497901" author="hiveqa" created="Fri, 1 Jun 2018 12:04:49 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12925615/HIVE-15078.01-branch-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12925615/HIVE-15078.01-branch-3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 14371 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestUpgradeTool - did not produce a TEST-*.xml file (likely timed out) (batchId=309)
org.apache.hadoop.hive.cli.TestMiniDruidCliDriver.testCliDriver[druidkafkamini_basic] (batchId=253)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[insertsel_fail] (batchId=95)
org.apache.hive.jdbc.TestJdbcWithMiniLlapArrow.testDataTypes (batchId=240)
org.apache.hive.spark.client.rpc.TestRpc.testServerPort (batchId=304)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/11407/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/11407/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/11407/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/11407/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-11407/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-11407/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12925615 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16715328" author="hiveqa" created="Mon, 10 Dec 2018 18:39:08 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12951221/some.file.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12951221/some.file.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/15245/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/15245/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/15245/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/15245/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-15245/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-15245/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2018-12-10 18:38:30.034
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-15245/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2018-12-10 18:38:30.037
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   b42fdc2..9493dcf  master     -&amp;gt; origin/master
+ git reset --hard HEAD
HEAD is now at b42fdc2 HIVE-21018: Grouping/distinct on more than 64 columns should be possible (Zoltan Haindrich reviewed by Jesus Camacho Rodriguez)
+ git clean -f -d
Removing standalone-metastore/metastore-server/src/gen/
+ git checkout master
Already on &apos;master&apos;
Your branch is behind &apos;origin/master&apos; by 1 commit, and can be fast-forwarded.
  (use &quot;git pull&quot; to update your local branch)
+ git reset --hard origin/master
HEAD is now at 9493dcf HIVE-21007: Semi join + Union can lead to wrong plans (Vineet Garg, reviewed by Jesus Camacho Rodriguez)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2018-12-10 18:38:31.369
+ rm -rf ../yetus_PreCommit-HIVE-Build-15245
+ mkdir ../yetus_PreCommit-HIVE-Build-15245
+ git gc
+ cp -R . ../yetus_PreCommit-HIVE-Build-15245
+ mkdir /data/hiveptest/logs/PreCommit-HIVE-Build-15245/yetus
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
fatal: unrecognized input
fatal: unrecognized input
fatal: unrecognized input
The patch does not appear to apply with p0, p1, or p2
+ result=1
+ &apos;[&apos; 1 -ne 0 &apos;]&apos;
+ rm -rf yetus_PreCommit-HIVE-Build-15245
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12951221 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12925615" name="HIVE-15078.01-branch-3.patch" size="226" author="kgyrtkirk" created="Tue, 29 May 2018 18:36:12 +0000"/>
                            <attachment id="12835882" name="HIVE-15078.1.patch" size="14039" author="kgyrtkirk" created="Fri, 28 Oct 2016 20:33:21 +0000"/>
                            <attachment id="12835427" name="HIVE-15078.1.patch" size="14039" author="kgyrtkirk" created="Wed, 26 Oct 2016 23:02:36 +0000"/>
                            <attachment id="12951221" name="some.file.patch" size="7" author="kgyrtkirk" created="Mon, 10 Dec 2018 16:08:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Oct 2016 00:53:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35g4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15079] Hive cannot read Parquet string timetamps as TIMESTAMP data type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15079</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The Hive Wiki for timestamps specifies that strings timestamps can be read by Hive. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types#LanguageManualTypes-Timestamps&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types#LanguageManualTypes-Timestamps&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Supported conversions:
Integer numeric types: Interpreted as UNIX timestamp in seconds
Floating point numeric types: Interpreted as UNIX timestamp in seconds with decimal precision
Strings: JDBC compliant java.sql.Timestamp format &quot;YYYY-MM-DD HH:MM:SS.fffffffff&quot; (9 decimal place precision)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This works fine with Text table formats, but when Parquet is used, then it throws the following exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.ClassCastException: org.apache.hadoop.io.Text cannot be cast to org.apache.hadoop.hive.serde2.io.TimestampWritable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;How to reproduce&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; create table t1 (id int, time string) stored as parquet;
&amp;gt; insert into table t1 values (1,&apos;2016-07-17 14:42:18&apos;);
&amp;gt; alter table t1 replace columns (id int, time timestamp);
&amp;gt; select * from t1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example will run fine if you use a TEXT format instead of PARQUET.&lt;/p&gt;

&lt;p&gt;This issue was raised on &lt;a href=&quot;https://issues.apache.org/jira/browse/PARQUET-723&quot; title=&quot;parquet is not storing the type for the column.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PARQUET-723&quot;&gt;&lt;del&gt;PARQUET-723&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015592">HIVE-15079</key>
            <summary>Hive cannot read Parquet string timetamps as TIMESTAMP data type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="spena">Sergio Pe&#241;a</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 21:31:25 +0000</created>
                <updated>Tue, 19 Sep 2017 14:00:06 +0000</updated>
                                                                            <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="16171734" author="kam338uk" created="Tue, 19 Sep 2017 13:55:28 +0000"  >&lt;p&gt;Hi, is this issue still active or has it been fixed and just not updated? Thank you.&lt;/p&gt;</comment>
                            <comment id="16171748" author="gszadovszky" created="Tue, 19 Sep 2017 14:00:06 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kam338uk&quot; class=&quot;user-hover&quot; rel=&quot;kam338uk&quot;&gt;Tenya Iida&lt;/a&gt;. Unfortunately, I don&apos;t have time to work on Hive anymore. I don&apos;t think it&apos;s fixed. Feel free to contribute &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Sep 2017 13:55:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35g6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15080] Remove unnecessary jars from jdbc standalone jar</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15080</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13015670">HIVE-15080</key>
            <summary>Remove unnecessary jars from jdbc standalone jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="taoli-hwx">Tao Li</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 04:22:40 +0000</created>
                <updated>Thu, 27 Oct 2016 04:22:40 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35gnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15081] RetryingMetaStoreClient.getProxy(HiveConf, Boolean) doesn&apos;t match constructor of HiveMetaStoreClient</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15081</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Calling RetryingMetaStoreClient.getProxy(HiveConf, Boolean) will result in error&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.RuntimeException: Unable to instantiate org.apache.hadoop.hive.metastore.HiveMetaStoreClient
	at org.apache.hadoop.hive.metastore.MetaStoreUtils.newInstance(MetaStoreUtils.java:1661)
	at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.&amp;lt;init&amp;gt;(RetryingMetaStoreClient.java:81)
	at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(RetryingMetaStoreClient.java:131)
	at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(RetryingMetaStoreClient.java:87)
Caused by: java.lang.NoSuchMethodException: org.apache.hadoop.hive.metastore.HiveMetaStoreClient.&amp;lt;init&amp;gt;(org.apache.hadoop.hive.conf.HiveConf, java.lang.Boolean)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13015680">HIVE-15081</key>
            <summary>RetryingMetaStoreClient.getProxy(HiveConf, Boolean) doesn&apos;t match constructor of HiveMetaStoreClient</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="lirui">Rui Li</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 05:33:28 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:36 +0000</updated>
                            <resolved>Mon, 31 Oct 2016 07:32:36 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15610887" author="hiveqa" created="Thu, 27 Oct 2016 06:33:37 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835481/HIVE-15081.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835481/HIVE-15081.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10623 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.pig.TestHCatLoaderComplexSchema.testSyntheticComplexSchema[3] (batchId=170)
org.apache.hive.hcatalog.pig.TestHCatLoaderComplexSchema.testTupleInBagInTupleInBag[2] (batchId=170)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1840/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1840/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1840/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1840/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1840/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1840/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835481 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15614392" author="lirui" created="Fri, 28 Oct 2016 05:48:42 +0000"  >&lt;p&gt;The failed test can&apos;t be reproduced.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;, would you mind take a look? Thank you.&lt;/p&gt;</comment>
                            <comment id="15616193" author="sershe" created="Fri, 28 Oct 2016 18:42:57 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15621508" author="lirui" created="Mon, 31 Oct 2016 07:32:37 +0000"  >&lt;p&gt;Committed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; for the review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835481" name="HIVE-15081.1.patch" size="1738" author="lirui" created="Thu, 27 Oct 2016 05:35:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Oct 2016 06:33:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35gpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15082] Hive-1.2 cannot read data from complex data types with TIMESTAMP column, stored in Parquet</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15082</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;b&gt;STEP 1. Create test data&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;dual&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;EXPECTED RESULT:&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Pretty_UnIQUe_StrinG
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; test_parquet1(&lt;span class=&quot;code-keyword&quot;&gt;login&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;timestamp&lt;/span&gt;) stored &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; parquet;
&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; overwrite &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; test_parquet1 &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; from_unixtime(unix_timestamp()) &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;dual&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; test_parquet1 &lt;span class=&quot;code-keyword&quot;&gt;limit&lt;/span&gt; 1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;EXPECTED RESULT:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;No exceptions. Current timestamp as result.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-10-27 10:58:19
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;STEP 2. Store timestamp in array in parquet file&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; test_parquet2(x &lt;span class=&quot;code-keyword&quot;&gt;array&lt;/span&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;timestamp&lt;/span&gt;&amp;gt;) stored &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; parquet;
&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; overwrite &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; test_parquet2 &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;login&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; test_parquet1;
&lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; test_parquet2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;EXPECTED RESULT:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;No exceptions. Current timestamp in brackets as result.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[&quot;2016-10-27 10:58:19&quot;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;ACTUAL RESULT:&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR [main]: CliDriver (SessionState.java:printError(963)) - Failed with exception java.io.IOException:parquet.io.ParquetDecodingException: Can not read value at 0 in block -1 in file hdfs:///user/hive/warehouse/test_parquet2/000000_0
java.io.IOException: parquet.io.ParquetDecodingException: Can not read value at 0 in block -1 in file hdfs:///user/hive/warehouse/test_parquet2/000000_0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;b&gt;ROOT-CAUSE:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Incorrect initialization of &lt;tt&gt;metadata&lt;/tt&gt; &lt;tt&gt;HashMap&lt;/tt&gt; causes that it has &lt;tt&gt;null&lt;/tt&gt; value in enumeration &lt;tt&gt;org.apache.hadoop.hive.ql.io.parquet.convert.ETypeConverter&lt;/tt&gt; when executing following line:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; skipConversion = &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.valueOf(metadata.get(HiveConf.ConfVars.HIVE_PARQUET_TIMESTAMP_SKIP_CONVERSION.varname));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in element &lt;tt&gt;ETIMESTAMP_CONVERTER&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;JVM throws NPE and parquet library can not read data from file and throws &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException:parquet.io.ParquetDecodingException: Can not read value at 0 in block -1 in file hdfs:///user/hive/warehouse/test_parquet2/000000_0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;for its turn.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;SOLUTION:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Perform initialization in separate method to skip overriding it with &lt;tt&gt;null&lt;/tt&gt; value in block of code&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (parent != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
     setMetadata(parent.getMetadata());
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13015740">HIVE-15082</key>
            <summary>Hive-1.2 cannot read data from complex data types with TIMESTAMP column, stored in Parquet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="osayankin">Oleksiy Sayankin</assignee>
                                    <reporter username="osayankin">Oleksiy Sayankin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 08:57:20 +0000</created>
                <updated>Mon, 20 Mar 2017 23:31:38 +0000</updated>
                                            <version>1.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15631096" author="vgumashta" created="Thu, 3 Nov 2016 00:59:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=osayankin&quot; class=&quot;user-hover&quot; rel=&quot;osayankin&quot;&gt;Oleksiy Sayankin&lt;/a&gt; Thanks for the patch. Can you submit this again for a QA run against branch-1.2&lt;/p&gt;</comment>
                            <comment id="15643658" author="osayankin" created="Mon, 7 Nov 2016 09:50:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;Vaibhav Gumashta&lt;/a&gt;, I have already attached the patch with name &lt;b&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15082&quot; title=&quot;Hive-1.2 cannot read data from complex data types with TIMESTAMP column, stored in Parquet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15082&quot;&gt;HIVE-15082&lt;/a&gt;-branch-1.2.patch&lt;/b&gt; according to pattern &lt;/p&gt;

&lt;p&gt;HIVE-&amp;lt;JIRA-NUMBER&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;lt;patch-num&amp;gt;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;-&amp;lt;branch-name&amp;gt;&amp;#93;&lt;/span&gt;.patch&lt;/p&gt;

&lt;p&gt;For some reason it gave no effect and patch is not applied. So if you know what is wrong here with patch name and how to fix it, please advise.&lt;/p&gt;
</comment>
                            <comment id="15653262" author="lefty@hortonworks.com" created="Thu, 10 Nov 2016 07:07:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=osayankin&quot; class=&quot;user-hover&quot; rel=&quot;osayankin&quot;&gt;Oleksiy Sayankin&lt;/a&gt;, it looks like you swapped the locations of patch-num and branch-name on patch 2, unless you meant it to be for branch-1.2 (but it still needs a patch-num).&lt;/p&gt;</comment>
                            <comment id="15654301" author="osayankin" created="Thu, 10 Nov 2016 15:16:18 +0000"  >&lt;p&gt;Thanks for helping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I have found an issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15007&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-15007&lt;/a&gt;. Please see the list of patches attached there. You can see that they used the name &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15007&quot; title=&quot;Hive 1.2.2 release planning&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15007&quot;&gt;&lt;del&gt;HIVE-15007&lt;/del&gt;&lt;/a&gt;-branch-1.2.patch and so did I in my case. I do not know why, but their patch was applied. According to this pattern:&lt;/p&gt;

&lt;p&gt;HIVE-&amp;lt;JIRA-NUMBER&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;lt;patch-num&amp;gt;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;-&amp;lt;branch-name&amp;gt;&amp;#93;&lt;/span&gt;.patch&lt;/p&gt;

&lt;p&gt;I have filled the gaps:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&amp;lt;JIRA-NUMBER&amp;gt; is 15082&lt;/li&gt;
	&lt;li&gt;&amp;lt;patch-num&amp;gt; is empty in my case&lt;/li&gt;
	&lt;li&gt;&amp;lt;branch-name&amp;gt; is branch-1.2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The pattern is from here: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-CreatingaPatch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-CreatingaPatch&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="15655093" author="lefty@hortonworks.com" created="Thu, 10 Nov 2016 20:44:05 +0000"  >&lt;p&gt;Okay, then your syntax looks correct although you might need a patch-num because it isn&apos;t the first patch submitted, even though the first patch is for a different branch.&lt;/p&gt;

&lt;p&gt;Also, did you cancel the patch and resubmit it with the button at the top of the page?&lt;/p&gt;</comment>
                            <comment id="15656755" author="osayankin" created="Fri, 11 Nov 2016 10:53:48 +0000"  >&lt;p&gt;I added &amp;lt;patch-num&amp;gt; to file name and yes, I canceled patch and resubmitted it again each time I attached new patch to the issue.&lt;/p&gt;</comment>
                            <comment id="15657314" author="hiveqa" created="Fri, 11 Nov 2016 15:19:57 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12838537/HIVE-15082.1-branch-1.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12838537/HIVE-15082.1-branch-1.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 125 failed/errored test(s), 7910 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=340)
TestAuthorizationPreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=371)
TestAuthzApiEmbedAuthorizerInEmbed - did not produce a TEST-*.xml file (likely timed out) (batchId=350)
TestAuthzApiEmbedAuthorizerInRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=356)
TestBeeLineWithArgs - did not produce a TEST-*.xml file (likely timed out) (batchId=378)
TestCLIAuthzSessionContext - did not produce a TEST-*.xml file (likely timed out) (batchId=394)
TestClientSideAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=370)
TestCompactor - did not produce a TEST-*.xml file (likely timed out) (batchId=360)
TestCreateUdfEntities - did not produce a TEST-*.xml file (likely timed out) (batchId=359)
TestCustomAuthentication - did not produce a TEST-*.xml file (likely timed out) (batchId=379)
TestDBTokenStore - did not produce a TEST-*.xml file (likely timed out) (batchId=325)
TestDDLWithRemoteMetastoreSecondNamenode - did not produce a TEST-*.xml file (likely timed out) (batchId=358)
TestDynamicSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=328)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=337)
TestEmbeddedThriftBinaryCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=382)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestFolderPermissions - did not produce a TEST-*.xml file (likely timed out) (batchId=365)
TestHS2AuthzContext - did not produce a TEST-*.xml file (likely timed out) (batchId=397)
TestHS2AuthzSessionContext - did not produce a TEST-*.xml file (likely timed out) (batchId=398)
TestHS2ImpersonationWithRemoteMS - did not produce a TEST-*.xml file (likely timed out) (batchId=386)
TestHiveAuthorizerCheckInvocation - did not produce a TEST-*.xml file (likely timed out) (batchId=374)
TestHiveAuthorizerShowFilters - did not produce a TEST-*.xml file (likely timed out) (batchId=373)
TestHiveHistory - did not produce a TEST-*.xml file (likely timed out) (batchId=376)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=352)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=342)
TestHiveMetaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=355)
TestHiveServer2 - did not produce a TEST-*.xml file (likely timed out) (batchId=400)
TestHiveServer2SessionTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=401)
TestHiveSessionImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=383)
TestHs2Hooks - did not produce a TEST-*.xml file (likely timed out) (batchId=357)
TestJdbcDriver2 - did not produce a TEST-*.xml file (likely timed out) (batchId=388)
TestJdbcMetadataApiAuth - did not produce a TEST-*.xml file (likely timed out) (batchId=399)
TestJdbcWithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=393)
TestJdbcWithMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=390)
TestJdbcWithMiniMr - did not produce a TEST-*.xml file (likely timed out) (batchId=389)
TestJdbcWithSQLAuthUDFBlacklist - did not produce a TEST-*.xml file (likely timed out) (batchId=395)
TestJdbcWithSQLAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=396)
TestLocationQueries - did not produce a TEST-*.xml file (likely timed out) (batchId=363)
TestMTQueries - did not produce a TEST-*.xml file (likely timed out) (batchId=361)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=349)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=353)
TestMetaStoreAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=338)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=336)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=335)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=345)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=348)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=351)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=347)
TestMetaStoreUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=329)
TestMetastoreAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=367)
TestMetastoreVersion - did not produce a TEST-*.xml file (likely timed out) (batchId=344)
TestMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=402)
TestMiniSparkOnYarnCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=430)
TestMultiAuthorizationPreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=368)
TestMultiSessionsHS2WithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=392)
TestNoSaslAuth - did not produce a TEST-*.xml file (likely timed out) (batchId=391)
TestOperationLoggingAPIWithMr - did not produce a TEST-*.xml file (likely timed out) (batchId=384)
TestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file (likely timed out) (batchId=385)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=333)
TestPasswordWithConfig - did not produce a TEST-*.xml file (likely timed out) (batchId=369)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=341)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=346)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=339)
TestSSL - did not produce a TEST-*.xml file (likely timed out) (batchId=387)
TestSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=377)
TestSemanticAnalyzerHookLoading - did not produce a TEST-*.xml file (likely timed out) (batchId=362)
TestSerdeWithFieldComments - did not produce a TEST-*.xml file (likely timed out) (batchId=327)
TestServerSpecificConfig - did not produce a TEST-*.xml file (likely timed out) (batchId=343)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=331)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=354)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=178)
	[bucketmapjoin4.q,bucket_map_join_spark2.q,bucket_map_join_spark4.q,union21.q,timestamp_2.q,date_join1.q,mergejoins.q,smb_mapjoin_11.q,auto_sortmerge_join_3.q,mapjoin_test_outer.q,vectorization_9.q,merge2.q,auto_join_without_localtask.q,bucketmapjoin2.q,multi_join_union.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=179)
	[parallel_join1.q,join_cond_pushdown_unqual4.q,union_remove_7.q,join13.q,join_vc.q,groupby_cube1.q,join_reorder4.q,sample3.q,smb_mapjoin_19.q,stats16.q,union23.q,union.q,union31.q,cbo_udf_udaf.q,ptf_decimal.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=180)
	[union27.q,mapjoin_subquery2.q,union12.q,groupby7_map_multi_single_reducer.q,varchar_join1.q,join7.q,mapjoin1.q,skewjoinopt2.q,bucketsortoptimize_insert_2.q,smb_mapjoin_17.q,script_env_var1.q,groupby7_map.q,groupby3.q,bucketsortoptimize_insert_8.q,union20.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=181)
	[ptf_general_queries.q,auto_join_reordering_values.q,sample2.q,join1.q,decimal_join.q,join32_lessSize.q,order2.q,skewjoinopt18.q,union_remove_18.q,join25.q,union_remove_4.q,smb_mapjoin_25.q,groupby9.q,bucketsortoptimize_insert_6.q,ctas.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=182)
	[skewjoinopt15.q,list_bucket_dml_2.q,groupby_map_ppr.q,join_rc.q,union14.q,load_dyn_part3.q,smb_mapjoin_12.q,vector_cast_constant.q,auto_sortmerge_join_15.q,union10.q,auto_join11.q,load_dyn_part7.q,vectorization_12.q,groupby_sort_skew_1_23.q,skewjoinopt12.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=183)
	[auto_join18.q,input1_limit.q,auto_join26.q,union_remove_14.q,auto_sortmerge_join_14.q,stats_counter_partitioned.q,union22.q,bucket_map_join_tez2.q,smb_mapjoin_22.q,join_reorder.q,stats15.q,transform_ppr1.q,sample1.q,bucketmapjoin8.q,union34.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=184)
	[avro_joins.q,skewjoinopt16.q,bucket3.q,skewjoinopt13.q,auto_join14.q,vectorization_14.q,stats1.q,cbo_stats.q,auto_sortmerge_join_6.q,auto_join15.q,union_remove_24.q,union_view.q,join22.q,join33.q,ptf_matchpath.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=185)
	[vector_decimal_aggregate.q,skewjoin_noskew.q,leftsemijoin_mr.q,auto_join23.q,bucketmapjoin9.q,input18.q,cbo_simple_select.q,ptf.q,vectorized_nested_mapjoin.q,sample4.q,union18.q,multi_insert_gby.q,groupby1.q,join_reorder2.q,join_cond_pushdown_unqual2.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=186)
	[order.q,ppd_join3.q,join10.q,union_remove_11.q,vectorized_math_funcs.q,union_ppr.q,skewjoinopt6.q,union_remove_19.q,join14.q,join32.q,groupby_multi_single_reducer2.q,stats3.q,parquet_join.q,outer_join_ppr.q,join26.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=187)
	[skewjoinopt3.q,skewjoinopt19.q,timestamp_comparison.q,join_merge_multi_expressions.q,skewjoinopt10.q,union5.q,insert_into1.q,vectorization_4.q,stats_counter.q,vectorization_2.q,vector_left_outer_join.q,semijoin.q,skewjoinopt9.q,rcfile_bigdata.q,load_dyn_part10.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=188)
	[multi_insert_mixed.q,smb_mapjoin_4.q,join_cond_pushdown_3.q,insert1.q,union_remove_10.q,mapreduce2.q,bucketmapjoin_negative.q,udf_in_file.q,skewjoinopt5.q,auto_join12.q,skewjoin.q,vectorization_part_project.q,vector_count_distinct.q,smb_mapjoin_3.q,stats10.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=189)
	[bucketsortoptimize_insert_4.q,skewjoinopt8.q,vectorization_10.q,auto_join18_multi_distinct.q,custom_input_output_format.q,insert_into3.q,vectorization_6.q,skewjoinopt4.q,count.q,stats9.q,auto_join7.q,parallel.q,timestamp_1.q,union33.q,union_lateralview.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=190)
	[skewjoin_union_remove_2.q,avro_decimal_native.q,timestamp_null.q,bucketmapjoin_negative3.q,union32.q,groupby_ppr.q,smb_mapjoin_18.q,vector_varchar_4.q,stats6.q,stats_only_null.q,join18_multi_distinct.q,cross_join.q,sample8.q,join24.q,join_star.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=191)
	[auto_join30.q,union_remove_1.q,ppd_outer_join2.q,date_udf.q,join16.q,smb_mapjoin_13.q,bucketmapjoin7.q,join19.q,smb_mapjoin_6.q,metadata_only_queries.q,union6.q,cbo_subq_in.q,vectorization_part.q,groupby3_map_multi_distinct.q,vectorized_timestamp_funcs.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=192)
	[bucketmapjoin12.q,auto_join10.q,ptf_rcfile.q,join20.q,vector_elt.q,multi_insert.q,groupby_rollup1.q,ppd_join5.q,join_filters_overlap.q,vector_string_concat.q,join_empty.q,auto_sortmerge_join_12.q,load_dyn_part6.q,groupby_bigdata.q,innerjoin.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=193)
	[tez_joins_explain.q,input17.q,ppd_gby_join.q,vectorized_rcfile_columnar.q,ppd_join.q,join_cond_pushdown_1.q,union_remove_6_subq.q,timestamp_3.q,load_dyn_part9.q,multi_insert_gby2.q,vectorization_11.q,groupby_position.q,avro_compression_enabled_native.q,stats_noscan_2.q,transform1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=194)
	[smb_mapjoin_21.q,load_dyn_part15.q,transform2.q,mapjoin_memcheck.q,subquery_exists.q,cbo_semijoin.q,bucketmapjoin13.q,join27.q,alter_merge_stats_orc.q,union_remove_2.q,join12.q,smb_mapjoin_8.q,join21.q,auto_join16.q,union9.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=195)
	[vectorization_16.q,enforce_order.q,join_casesensitive.q,join23.q,ppd_join2.q,ppd_outer_join5.q,create_merge_compressed.q,louter_join_ppr.q,sample9.q,smb_mapjoin_16.q,vectorization_not.q,having.q,ppd_outer_join1.q,vector_orderby_5.q,union_remove_12.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=196)
	[bucketmapjoin3.q,load_dyn_part5.q,transform_ppr2.q,groupby7_map_skew.q,cbo_gby.q,auto_join31.q,auto_sortmerge_join_1.q,join_cond_pushdown_unqual1.q,bucket_map_join_spark3.q,union28.q,statsfs.q,escape_sortby1.q,leftsemijoin.q,union_remove_6.q,join29.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=197)
	[escape_distributeby1.q,join9.q,groupby2.q,vectorization_pushdown.q,union_date.q,cbo_gby_empty.q,join_cond_pushdown_unqual3.q,join8.q,sample10.q,ppd_outer_join3.q,cross_product_check_1.q,auto_sortmerge_join_2.q,auto_join_stats.q,input_part2.q,groupby_multi_single_reducer3.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=198)
	[groupby_map_ppr_multi_distinct.q,vectorization_13.q,mapjoin_mapjoin.q,union2.q,join41.q,groupby8_map.q,cbo_subq_not_in.q,vectorization_short_regress.q,identity_project_remove_skip.q,stats5.q,groupby8_map_skew.q,mapjoin_subquery.q,bucket2.q,smb_mapjoin_1.q,union_remove_8.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=199)
	[join39.q,bucketsortoptimize_insert_7.q,vector_distinct_2.q,bucketmapjoin10.q,join11.q,auto_sortmerge_join_16.q,windowing.q,join40.q,union_remove_3.q,skewjoinopt7.q,stats7.q,annotate_stats_join.q,multi_insert_lateral_view.q,ptf_streaming.q,join_1to1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=200)
	[timestamp_lazy.q,ppd_join4.q,union29.q,runtime_skewjoin_mapjoin_spark.q,auto_join22.q,union8.q,union13.q,stats0.q,auto_join29.q,merge1.q,mapjoin_distinct.q,vector_decimal_mapjoin.q,sample5.q,multi_insert_move_tasks_share_dependencies.q,join_array.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=201)
	[load_dyn_part2.q,smb_mapjoin_7.q,vectorization_5.q,smb_mapjoin_2.q,ppd_join_filter.q,column_access_stats.q,vector_between_in.q,vectorized_string_funcs.q,vectorization_1.q,bucket_map_join_2.q,auto_join_filters.q,temp_table_join1.q,join0.q,vectorized_case.q,stats_noscan_1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=202)
	[groupby4.q,stats2.q,groupby3_map_skew.q,mapjoin_filter_on_outerjoin.q,join_cond_pushdown_2.q,union19.q,union24.q,union_remove_5.q,groupby7_noskew_multi_single_reducer.q,groupby_multi_single_reducer.q,index_auto_self_join.q,auto_smb_mapjoin_14.q,script_env_var2.q,pcr.q,join37.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=203)
	[stats12.q,union_top_level.q,groupby10.q,subquery_in.q,stats14.q,auto_sortmerge_join_4.q,limit_partition_metadataonly.q,load_dyn_part4.q,union3.q,smb_mapjoin_14.q,vectorized_ptf.q,auto_join2.q,groupby3_noskew_multi_distinct.q,stats18.q,union_remove_21.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=204)
	[auto_sortmerge_join_13.q,join4.q,join35.q,union26.q,join_reorder3.q,auto_join19.q,sample7.q,vectorization_15.q,union7.q,vectorization_nested_udf.q,ppd_outer_join4.q,load_dyn_part8.q,vector_groupby_3.q,alter_merge_orc.q,bucket_map_join_1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=205)
	[groupby_complex_types.q,groupby3_map.q,union11.q,groupby7.q,mapreduce1.q,mapjoin_addjar.q,bucketmapjoin_negative2.q,bucket_map_join_spark1.q,udf_example_add.q,vectorization_div0.q,union_remove_17.q,auto_join_nulls.q,metadata_only_queries_with_filters.q,sample6.q,auto_sortmerge_join_9.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=206)
	[multigroupby_singlemr.q,bucketmapjoin11.q,auto_join4.q,mapjoin_decimal.q,join34.q,join5.q,sort.q,auto_join28.q,join17.q,union_script.q,add_part_multiple.q,limit_pushdown.q,uniquejoin.q,union25.q,load_dyn_part13.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=207)
	[table_access_keys_stats.q,union_remove_9.q,mergejoins_mixed.q,join_nullsafe.q,stats8.q,skewjoinopt14.q,vectorized_mapjoin.q,union17.q,auto_join5.q,vectorized_shufflejoin.q,groupby8_noskew.q,auto_sortmerge_join_10.q,groupby11.q,skewjoinopt11.q,load_dyn_part11.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=208)
	[script_pipe.q,auto_join24.q,ptf_seqfile.q,union_remove_23.q,filter_join_breaktask.q,parallel_join0.q,ppd_multi_insert.q,join_thrift.q,multi_insert_gby3.q,groupby8.q,union4.q,smb_mapjoin_20.q,groupby_multi_insert_common_distinct.q,join6.q,union_remove_16.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=209)
	[ppd_transform.q,smb_mapjoin_15.q,auto_join9.q,vector_data_types.q,input13.q,bucket4.q,skewjoinopt20.q,input12.q,vectorization_3.q,join_map_ppr.q,auto_sortmerge_join_8.q,cbo_union.q,escape_clusterby1.q,reduce_deduplicate_exclude_join.q,filter_join_breaktask2.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=210)
	[auto_join1.q,input14.q,union30.q,vector_mapjoin_reduce.q,stats20.q,union_remove_22.q,ptf_register_tblfn.q,union_date_trim.q,disable_merge_for_bucketing.q,join3.q,skewjoinopt1.q,join_alt_syntax.q,join30.q,groupby_sort_1_23.q,timestamp_udf.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=211)
	[stats13.q,router_join_ppr.q,join15.q,auto_join13.q,join_hive_626.q,tez_join_tests.q,auto_join21.q,join_view.q,join_merging.q,union_null.q,groupby3_noskew.q,optimize_nullscan.q,join38.q,auto_join3.q,vectorization_decimal_date.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=212)
	[load_dyn_part12.q,bucket_map_join_tez1.q,scriptfile1.q,groupby7_noskew.q,bucketmapjoin1.q,auto_join17.q,subquery_multiinsert.q,lateral_view_explode2.q,join28.q,join_cond_pushdown_4.q,vectorization_0.q,load_dyn_part1.q,skewjoinopt17.q,union_remove_20.q,bucketmapjoin5.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=213)
	[join36.q,join18.q,union_remove_15.q,smb_mapjoin_10.q,temp_table.q,union_remove_13.q,auto_join8.q,auto_join6.q,auto_sortmerge_join_5.q,auto_join0.q,auto_join_stats2.q,skewjoin_union_remove_1.q,union16.q,auto_join32.q,join_literals.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=214)
	[join2.q,avro_joins_native.q,auto_join20.q,smb_mapjoin_5.q,vector_char_4.q,cross_product_check_2.q,union_remove_25.q,insert_into2.q,join31.q,auto_join27.q,escape_orderby1.q,cbo_limit.q,stats_partscan_1_23.q,groupby_complex_types_multi_single_reducer.q,load_dyn_part14.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=215)
	[union15.q,auto_sortmerge_join_7.q]
TestStorageBasedClientSideAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=375)
TestStorageBasedMetastoreAuthorizationDrops - did not produce a TEST-*.xml file (likely timed out) (batchId=366)
TestStorageBasedMetastoreAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=364)
TestStorageBasedMetastoreAuthorizationReads - did not produce a TEST-*.xml file (likely timed out) (batchId=372)
TestThriftBinaryCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=380)
TestThriftHttpCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=381)
TestZooKeeperTokenStore - did not produce a TEST-*.xml file (likely timed out) (batchId=326)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ivyDownload (batchId=36)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_merge_multi_expressions (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_corr (batchId=113)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez1 (batchId=176)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_empty (batchId=165)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_auto_smb_mapjoin_14 (batchId=164)
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_exchgpartition2lel (batchId=136)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import (batchId=144)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2087/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2087/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2087/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2087/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2087/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2087/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 125 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12838537 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15657922" author="lefty@hortonworks.com" created="Fri, 11 Nov 2016 19:36:33 +0000"  >&lt;p&gt;Hooray, it worked!&lt;/p&gt;</comment>
                            <comment id="15658102" author="osayankin" created="Fri, 11 Nov 2016 20:31:56 +0000"  >&lt;p&gt;Yeah, great, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;! You were absolutely right saying to add a patch number! Next is to understand why some tests are failed. &lt;/p&gt;

&lt;p&gt;To be continued... &lt;/p&gt;</comment>
                            <comment id="15930680" author="vgumashta" created="Fri, 17 Mar 2017 20:37:12 +0000"  >&lt;p&gt;Submitting again for QA run&lt;/p&gt;</comment>
                            <comment id="15930682" author="vgumashta" created="Fri, 17 Mar 2017 20:38:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=osayankin&quot; class=&quot;user-hover&quot; rel=&quot;osayankin&quot;&gt;Oleksiy Sayankin&lt;/a&gt; Sorry for the delay on this. I&apos;ve started working again on release planning for 1.2.2 and have submitted the patch again for QA run.&lt;/p&gt;</comment>
                            <comment id="15931347" author="vgumashta" created="Sat, 18 Mar 2017 19:20:54 +0000"  >&lt;p&gt;No extra failures with this patch: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4224/#showFailuresLink&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4224/#showFailuresLink&lt;/a&gt;, when compared with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15007&quot; title=&quot;Hive 1.2.2 release planning&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15007&quot;&gt;&lt;del&gt;HIVE-15007&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_from_utc_timestamp&lt;br/&gt;
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_merge_multi_expressions&lt;br/&gt;
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_to_utc_timestamp&lt;br/&gt;
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ivyDownload&lt;br/&gt;
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_exchgpartition2lel&lt;br/&gt;
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import&lt;br/&gt;
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_auto_smb_mapjoin_14&lt;br/&gt;
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_empty&lt;br/&gt;
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez1&lt;br/&gt;
org.apache.hive.minikdc.TestMiniHiveKdc.testLogin&lt;br/&gt;
org.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForMemoryTokenStore&lt;br/&gt;
org.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForDBTokenStore&lt;/p&gt;

&lt;p&gt;This however needs a review as well. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=osayankin&quot; class=&quot;user-hover&quot; rel=&quot;osayankin&quot;&gt;Oleksiy Sayankin&lt;/a&gt; Do you know if this is a bug in master as well? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=csun&quot; class=&quot;user-hover&quot; rel=&quot;csun&quot;&gt;Chao Sun&lt;/a&gt; would you like to take a look?&lt;/p&gt;

&lt;p&gt;I&apos;ll keep the target as 1.2.2 for now if we&apos;re able to resolve it in time.&lt;/p&gt;</comment>
                            <comment id="15933792" author="vgumashta" created="Mon, 20 Mar 2017 23:30:45 +0000"  >&lt;p&gt;Removing target 1.2.2 and moving to 1.3.0. Please feel free to revert if you think this should go in 1.2.2 (or if this gets reviewed before RC for 1.2.2 is cut). Also would be great to determine if branch-2 needs this fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835756" name="HIVE-15082-branch-1.2.patch" size="2728" author="osayankin" created="Fri, 28 Oct 2016 07:09:16 +0000"/>
                            <attachment id="12835527" name="HIVE-15082-branch-1.patch" size="2728" author="osayankin" created="Thu, 27 Oct 2016 09:05:08 +0000"/>
                            <attachment id="12859349" name="HIVE-15082.1-branch-1.2.patch" size="2728" author="vgumashta" created="Fri, 17 Mar 2017 20:37:12 +0000"/>
                            <attachment id="12838537" name="HIVE-15082.1-branch-1.2.patch" size="2728" author="osayankin" created="Fri, 11 Nov 2016 10:50:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Nov 2016 00:59:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35h3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12332154</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>


<item>
            <title>[HIVE-15083] tez hsql response different from mr </title>
                <link>https://issues.apache.org/jira/browse/HIVE-15083</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;newdb.dwd_devices_ds stored as orc&lt;/p&gt;

&lt;p&gt;hsql like this:&lt;br/&gt;
select count(t.lattice_id)&lt;br/&gt;
from&lt;br/&gt;
(select a.lattice_id,&lt;br/&gt;
        case when sum(a.box_count) = 0 then 0 else (sum(a.max_box_orders+a.medium_box_orders+a.min_box_orders+a.ice_box_orders)/sum(a.box_count)) end as c_order_rate&lt;br/&gt;
from&lt;br/&gt;
(select lattice_id,device_id,box_count,max_box_orders,medium_box_orders,min_box_orders,ice_box_orders from newdb.dwd_devices_ds where device_id NOT IN (1060988,1047539,1043597,1033836,1019976,1019941,1019391,1000019,1000018,4306,1000018,1000019,1001681,1006552,1019391,1019941,1019976,1031750,1033836,1043597,1047539,1047549,1060312,1060988,1061884,1062811) &lt;br/&gt;
     and  (deleted_at is null) and day &amp;gt;= &apos;2016-09-26&apos; and day &amp;lt;= &apos;2016-10-25&apos;) a&lt;br/&gt;
left join&lt;br/&gt;
(select distinct device_id from newdb.dwd_devices_ds where deleted_at is not null and day &amp;gt;= &apos;2016-09-26&apos; and day &amp;lt;= &apos;2016-10-25&apos;) as b on a.device_id = b.device_id&lt;br/&gt;
where b.device_id is null&lt;br/&gt;
group by a.lattice_id) t&lt;br/&gt;
where c_order_rate&amp;lt;0.05&lt;/p&gt;

&lt;p&gt;hive on tez result:12815&lt;br/&gt;
hive on mr result:12530&lt;/p&gt;

&lt;p&gt;hive on mr result  Should be correct&lt;/p&gt;</description>
                <environment>&lt;p&gt;centos5.6,hdp2.4.2.0,hadoop2.7.1,hive1.2.1&lt;/p&gt;</environment>
        <key id="13015783">HIVE-15083</key>
            <summary>tez hsql response different from mr </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yinsong">yinsong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 11:45:13 +0000</created>
                <updated>Fri, 28 Oct 2016 09:08:41 +0000</updated>
                                            <version>1.2.1</version>
                                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35hcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15084] Flaky test: TestMiniTezCliDriver:explainanalyze_1,2, 3, 4, 5</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15084</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Example diffs:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;explainanalyze_2.q.out&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1881c1881
&amp;lt;                                     Group By Operator [GBY_2] (rows=1/500 width=8)
---
&amp;gt;                                     Group By Operator [GBY_2] (rows=1/1 width=8)
2227c2227
&amp;lt;                       Group By Operator [GBY_11] (rows=250/392 width=280)
---
&amp;gt;                       Group By Operator [GBY_11] (rows=250/310 width=280)
2237c2237
&amp;lt;                       Group By Operator [GBY_17] (rows=501/392 width=464)
---
&amp;gt;                       Group By Operator [GBY_17] (rows=501/310 width=464)
2243c2243
&amp;lt;                       Group By Operator [GBY_11] (rows=250/392 width=280)
---
&amp;gt;                       Group By Operator [GBY_11] (rows=250/310 width=280)
2260c2260
&amp;lt;                       Group By Operator [GBY_17] (rows=501/392 width=464)
---
&amp;gt;                       Group By Operator [GBY_17] (rows=501/310 width=464)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;explainanalyze_2.q.out&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;367c367
&amp;lt;                                                       Group By Operator [GBY_78] (rows=262/334 width=178)
---
&amp;gt;                                                       Group By Operator [GBY_78] (rows=262/331 width=178)
378c378
&amp;lt;                                                       Group By Operator [GBY_78] (rows=262/334 width=178)
---
&amp;gt;                                                       Group By Operator [GBY_78] (rows=262/331 width=178)
2135c2135
&amp;lt;                                 Group By Operator [GBY_2] (rows=1/241 width=8)
---
&amp;gt;                                 Group By Operator [GBY_2] (rows=1/1 width=8)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2295/testReport/:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2295/testReport/:&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;explainanalyze_4.q.out&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;248c248
&amp;lt;                 Group By Operator [GBY_10] (rows=615/10 width=12)
---
&amp;gt;                 Group By Operator [GBY_10] (rows=615/5 width=12)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;explainanalyze_5.q.out&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;143c143
&amp;lt;                                       Group By Operator [GBY_9] (rows=262/522 width=178)
---
&amp;gt;                                       Group By Operator [GBY_9] (rows=262/331 width=178)
154c154
&amp;lt;                                       Group By Operator [GBY_9] (rows=262/522 width=178)
---
&amp;gt;                                       Group By Operator [GBY_9] (rows=262/331 width=178)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13015959">HIVE-15084</key>
            <summary>Flaky test: TestMiniTezCliDriver:explainanalyze_1,2, 3, 4, 5</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13015210">HIVE-15058</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pxiong">Pengcheng Xiong</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 20:26:35 +0000</created>
                <updated>Wed, 26 Jul 2017 00:02:58 +0000</updated>
                            <resolved>Tue, 3 Jan 2017 22:04:43 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15616581" author="sershe" created="Fri, 28 Oct 2016 21:06:08 +0000"  >&lt;p&gt;Same for 3 and 4&lt;/p&gt;</comment>
                            <comment id="15785736" author="thejas" created="Thu, 29 Dec 2016 17:30:52 +0000"  >&lt;p&gt;explainanalyze_1  as similar diff as well, as mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15480&quot; title=&quot;Failing test : TestMiniTezCliDriver.testCliDriver : explainanalyze_1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15480&quot;&gt;&lt;del&gt;HIVE-15480&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15785739" author="thejas" created="Thu, 29 Dec 2016 17:33:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pxiong&quot; class=&quot;user-hover&quot; rel=&quot;pxiong&quot;&gt;Pengcheng Xiong&lt;/a&gt;&lt;br/&gt;
Can you please take a look at this ? These tests have been flaky for a while now.&lt;/p&gt;</comment>
                            <comment id="15785808" author="pxiong" created="Thu, 29 Dec 2016 18:19:37 +0000"  >&lt;p&gt;I  will take a look today.&lt;/p&gt;</comment>
                            <comment id="15787130" author="pxiong" created="Fri, 30 Dec 2016 07:43:10 +0000"  >&lt;p&gt;L816 in GroupbyOperator:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( shouldBeFlushed(newKeys)) {
      flushHashTable(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sounds like not every key is flushed and it depends on the shouldBeFlushed which depends on the system memory.&lt;/p&gt;</comment>
                            <comment id="15796330" author="pxiong" created="Tue, 3 Jan 2017 22:04:28 +0000"  >&lt;p&gt;Pushed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt; for the discussion and suggestion!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13023607">HIVE-15288</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13019127">HIVE-15150</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13029594">HIVE-15480</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12993073">HIVE-14362</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12845436" name="HIVE-15084.01.patch" size="145296" author="pxiong" created="Tue, 3 Jan 2017 22:04:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2016 21:06:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ifr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15085] Reduce the memory used by unit tests, MiniCliDriver, MiniLlapLocal, MiniSpark</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15085</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13015960">HIVE-15085</key>
            <summary>Reduce the memory used by unit tests, MiniCliDriver, MiniLlapLocal, MiniSpark</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12958604">HIVE-13503</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseth">Siddharth Seth</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 20:28:00 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:26 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 19:34:14 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15613366" author="sseth" created="Thu, 27 Oct 2016 22:00:48 +0000"  >&lt;p&gt;Down to 1GB heap for the mvn testrunner process instead of 2GB&amp;gt;&lt;/p&gt;</comment>
                            <comment id="15617529" author="hiveqa" created="Sat, 29 Oct 2016 06:04:50 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835680/HIVE-15085.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835680/HIVE-15085.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10626 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=131)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_1] (batchId=90)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1878/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1878/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1878/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1878/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1878/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1878/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835680 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15623046" author="hiveqa" created="Mon, 31 Oct 2016 19:01:00 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835680/HIVE-15085.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835680/HIVE-15085.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10627 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=131)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1887/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1887/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1887/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1887/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1887/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1887/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835680 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15644954" author="sseth" created="Mon, 7 Nov 2016 18:24:59 +0000"  >&lt;p&gt;Updated.&lt;/p&gt;</comment>
                            <comment id="15645104" author="hiveqa" created="Mon, 7 Nov 2016 19:12:28 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10628 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2005/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2005/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2005/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2005/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2005/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2005/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837816 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15645256" author="hiveqa" created="Mon, 7 Nov 2016 20:00:33 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10628 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[columnstats_part_coltype] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2006/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2006/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2006/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2006/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2006/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2006/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837816 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15649524" author="hiveqa" created="Wed, 9 Nov 2016 02:00:43 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10632 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[limit_pushdown] (batchId=121)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2042/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2042/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2042/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2042/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2042/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2042/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837816 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15651903" author="hiveqa" created="Wed, 9 Nov 2016 20:02:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837816/HIVE-15085.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10632 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2051/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2051/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2051/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2051/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2051/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2051/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837816 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15652156" author="sseth" created="Wed, 9 Nov 2016 21:53:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;Prasanth Jayachandran&lt;/a&gt; - could you please take a look. The test failures are unrelated - tracked under &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15058&quot; title=&quot;[Umbrella] Current Flaky Tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15058&quot;&gt;HIVE-15058&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15653687" author="prasanth_j" created="Thu, 10 Nov 2016 10:29:38 +0000"  >&lt;p&gt;+1. As we no longer run ptest in jdk7. Should we remove MaxPermSize? To avoid jdk8 warning.&lt;/p&gt;</comment>
                            <comment id="15654906" author="sseth" created="Thu, 10 Nov 2016 19:33:05 +0000"  >&lt;p&gt;The permSize setting was added back in a recent jira. Will leave the removal for the jira which moves the minimum version in the pom to 0.8.&lt;br/&gt;
Thanks for the review. Committing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835680" name="HIVE-15085.01.patch" size="628" author="sseth" created="Thu, 27 Oct 2016 22:00:48 +0000"/>
                            <attachment id="12837816" name="HIVE-15085.02.patch" size="670" author="sseth" created="Mon, 7 Nov 2016 18:24:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Oct 2016 06:04:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ifz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15086] Add test to cover data encryption when HMS is configured to authenticate  kerberos </title>
                <link>https://issues.apache.org/jira/browse/HIVE-15086</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We are missing the test coverage to test the cases when HMS is configured to authenticate with kerberos. For such case, the communication can be encrypted. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13015964">HIVE-15086</key>
            <summary>Add test to cover data encryption when HMS is configured to authenticate  kerberos </summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13013945">HIVE-15025</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aihuaxu">Aihua Xu</assignee>
                                    <reporter username="aihuaxu">Aihua Xu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 20:36:27 +0000</created>
                <updated>Wed, 26 Jul 2017 15:14:57 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35igv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15087] integrate MM tables into ACID: replace &quot;hivecommit&quot; property with ACID property</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15087</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Previously declared DDL&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table t1 (key &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, key2 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)  tblproperties(&lt;span class=&quot;code-quote&quot;&gt;&quot;hivecommit&quot;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;should be replaced with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table t1 (key &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, key2 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)  tblproperties(&lt;span class=&quot;code-quote&quot;&gt;&quot;transactional&quot;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;transactional_properties&quot;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;insert_only&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13015971">HIVE-15087</key>
            <summary>integrate MM tables into ACID: replace &quot;hivecommit&quot; property with ACID property</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12997110">HIVE-14535</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wzheng">Wei Zheng</assignee>
                                    <reporter username="wzheng">Wei Zheng</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 21:04:35 +0000</created>
                <updated>Fri, 24 Feb 2017 01:13:31 +0000</updated>
                            <resolved>Thu, 27 Oct 2016 21:29:38 +0000</resolved>
                                                    <fixVersion>hive-14535</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15613976" author="ekoifman" created="Fri, 28 Oct 2016 01:57:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzheng&quot; class=&quot;user-hover&quot; rel=&quot;wzheng&quot;&gt;Wei Zheng&lt;/a&gt;  why did you ignore AcidUtils.AcidOperationalProperties and TransactionalValidationListener?&lt;br/&gt;
The idea there is that it encapsulates legal values for &quot;transactional_properties&quot; and does validation&lt;/p&gt;

&lt;p&gt;Why can&apos;t this be extended with 1 more valid value?&lt;/p&gt;</comment>
                            <comment id="15613985" author="sershe" created="Fri, 28 Oct 2016 02:00:10 +0000"  >&lt;p&gt;nit: setting the fixed version to the branch&lt;/p&gt;

&lt;p&gt;Also: I just committed another patch with a lot of changes to ACID checks (basically I replaced all the isAcidTable calls with isFullAcidTable calls, that also check that the table is not insert only, because otherwise I had a lot of failures for inserts due to txn manager, and for alter calls). &lt;br/&gt;
You might want to take a look at callers of isFullAcidTable if changing it as per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; s comment.&lt;/p&gt;</comment>
                            <comment id="15614226" author="wzheng" created="Fri, 28 Oct 2016 04:07:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; I&apos;m not sure if I understand you correctly. I&apos;m already extending AcidOperationalProperties and TransactionalValidationListener by adding a third valid value &quot;insert_only&quot;, besides the existing two &quot;default&quot; and &quot;legacy&quot;. Do you mean we shouldn&apos;t use this approach?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Thanks for introducing the isFullAcidTable. The reason I left some of those isAcidTable be is for the same reason. Those are the &quot;actual&quot; ACID tables and we shouldn&apos;t apply mm logic on them. But yes now it&apos;s more clearer. Btw all those tests passed when I checked in &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15616038" author="ekoifman" created="Fri, 28 Oct 2016 17:38:22 +0000"  >&lt;p&gt;AcidOperationalProperties defines constants for valid table types.&lt;br/&gt;
I don&apos;t see any new ones added.  The only change in this patch that I see in AcidUtils.java is removal of some code...&lt;/p&gt;</comment>
                            <comment id="15616054" author="wzheng" created="Fri, 28 Oct 2016 17:42:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; All the changes were committed to branch hive-14535&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hive/blob/hive-14535/ql/src/java/org/apache/hadoop/hive/ql/io/AcidUtils.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/hive-14535/ql/src/java/org/apache/hadoop/hive/ql/io/AcidUtils.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please let me know if anything has to be changed.&lt;/p&gt;</comment>
                            <comment id="15616071" author="ekoifman" created="Fri, 28 Oct 2016 17:51:13 +0000"  >&lt;p&gt;I see now.  The patch attached here is not what was committed...&lt;/p&gt;</comment>
                            <comment id="15616083" author="wzheng" created="Fri, 28 Oct 2016 17:55:27 +0000"  >&lt;p&gt;No it is. There was an earlier commit that added the new property. But at that time I didn&apos;t touch existing &quot;hivecommit&quot;=&quot;true&quot; tblproperty that Sergey created.&lt;/p&gt;

&lt;p&gt;In this JIRA I removed all those &quot;hivecommit&quot; and did the replacement. This can be seen as part 2 of 2.&lt;/p&gt;</comment>
                            <comment id="15616086" author="wzheng" created="Fri, 28 Oct 2016 17:55:51 +0000"  >&lt;p&gt;Forgot the jira number &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14878&quot; title=&quot;integrate MM tables into ACID: add separate ACID type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14878&quot;&gt;&lt;del&gt;HIVE-14878&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15616090" author="ekoifman" created="Fri, 28 Oct 2016 17:56:44 +0000"  >&lt;p&gt;never mind.  The changes I was expecting to see were in another check in in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14878&quot; title=&quot;integrate MM tables into ACID: add separate ACID type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14878&quot;&gt;&lt;del&gt;HIVE-14878&lt;/del&gt;&lt;/a&gt;...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13009337">HIVE-14878</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12835674" name="HIVE-15087.1.patch" size="66600" author="wzheng" created="Thu, 27 Oct 2016 21:24:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2016 01:57:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35iif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15088] PartitionPruner#getPartitionsFromServer can sometimes fail</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15088</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When &lt;tt&gt;hive.optimize.ppd&lt;/tt&gt; is set to true, HS2 may contact HMS to prune partitions. However, this may fail in somecases. And on the HMS side, there&apos;s stackoverflow:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 399270 2016-10-27 20:07:14,556 ERROR org.apache.hadoop.hive.metastore.RetryingHMSHandler: [pool-3-thread-14799]: java.lang.StackOverflowError
 399271         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:338)
 399272         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399273         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399274         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399275         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399276         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399277         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399278         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399279         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399280         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399281         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399282         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399283         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399284         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399285         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399286         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399287         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399288         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399289         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399290         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399291         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399292         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399293         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399294         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399295         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399296         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399297         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399298         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399299         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399300         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399301         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399302         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399303         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
 399304         at org.datanucleus.store.rdbms.sql.SQLText.toSQL(SQLText.java:339)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13015997">HIVE-15088</key>
            <summary>PartitionPruner#getPartitionsFromServer can sometimes fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="csun">Chao Sun</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2016 22:44:23 +0000</created>
                <updated>Thu, 27 Oct 2016 22:44:23 +0000</updated>
                                            <version>1.1.0</version>
                                                    <component>Physical Optimizer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35io7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15089] Error: java.lang.RuntimeException: Hive Runtime Error while closing operators: java.lang.Integer cannot be cast to java.lang.Boolean</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15089</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;SELECT userid , gamename , SUM(times) AS sumtimes&lt;br/&gt;
FROM user_fenci_sumcount A &lt;br/&gt;
RIGHT JOIN need_recommende_game B&lt;br/&gt;
ON (TRUE) &lt;br/&gt;
WHERE LOCATE(A.fenci,B.gamename) &lt;br/&gt;
GROUP BY userid , gamename&lt;br/&gt;
ORDER BY A.userid , sumtimes DESC&lt;/p&gt;


&lt;p&gt;Error: java.lang.RuntimeException: Hive Runtime Error while closing operators: java.lang.Integer cannot be cast to java.lang.Boolean&lt;/p&gt;

&lt;p&gt;How can I solve it ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016025">HIVE-15089</key>
            <summary>Error: java.lang.RuntimeException: Hive Runtime Error while closing operators: java.lang.Integer cannot be cast to java.lang.Boolean</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="CLJ0918">chen cong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 03:02:27 +0000</created>
                <updated>Fri, 28 Oct 2016 13:47:37 +0000</updated>
                            <resolved>Fri, 28 Oct 2016 07:57:46 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15614364" author="kgyrtkirk" created="Fri, 28 Oct 2016 05:31:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=CLJ0918&quot; class=&quot;user-hover&quot; rel=&quot;CLJ0918&quot;&gt;chen cong&lt;/a&gt; can you check that, instead:&lt;tt&gt;LOCATE(A.fenci,B.gamename)&lt;/tt&gt; , try using &lt;tt&gt;LOCATE(A.fenci,B.gamename) &amp;gt; 0&lt;/tt&gt;&lt;/p&gt;
</comment>
                            <comment id="15614611" author="clj0918" created="Fri, 28 Oct 2016 07:31:48 +0000"  >&lt;p&gt;Thank you very much&#65281;I solved the problem&#65281;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12469874">HIVE-1478</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2016 05:31:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35iuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Warning: Shuffle Join JOIN[4][tables = [a, b]] in Stage &amp;#39;Stage-1:MAPRED&amp;#39; is a cross product&lt;br/&gt;
Query ID = ubuntu_20161028024059_c1f407e0-47e1-4a44-8da2-968b55e6f2fd&lt;br/&gt;
Total jobs = 3&lt;br/&gt;
Stage-1 is selected by condition resolver.&lt;br/&gt;
Launching Job 1 out of 3&lt;br/&gt;
Number of reduce tasks determined at compile time: 1&lt;br/&gt;
In order to change the average load for a reducer (in bytes):&lt;br/&gt;
&amp;nbsp;&amp;nbsp;set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to limit the maximum number of reducers:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;set hive.exec.reducers.max=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to set a constant number of reducers:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;set mapreduce.job.reduces=&amp;lt;number&amp;gt;&lt;br/&gt;
Starting Job = job_1477557082231_0016, Tracking URL = &lt;a href=&quot;http://master:8088/proxy/application_1477557082231_0016/&quot;&gt;http://master:8088/proxy/application_1477557082231_0016/&lt;/a&gt;&lt;br/&gt;
Kill Command = /home/ubuntu/cloud/hadoop-2.7.2/bin/hadoop job  -kill job_1477557082231_0016&lt;br/&gt;
Hadoop job information for Stage-1: number of mappers: 2; number of reducers: 1&lt;br/&gt;
2016-10-28 02:41:07,953 Stage-1 map = 0%,  reduce = 0%&lt;br/&gt;
2016-10-28 02:41:15,256 Stage-1 map = 50%,  reduce = 0%, Cumulative CPU 1.52 sec&lt;br/&gt;
2016-10-28 02:41:23,573 Stage-1 map = 90%,  reduce = 0%, Cumulative CPU 10.95 sec&lt;br/&gt;
2016-10-28 02:41:24,606 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 12.18 sec&lt;br/&gt;
2016-10-28 02:41:29,766 Stage-1 map = 100%,  reduce = 85%, Cumulative CPU 19.38 sec&lt;br/&gt;
2016-10-28 02:41:32,878 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 21.93 sec&lt;br/&gt;
2016-10-28 02:41:38,026 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 12.18 sec&lt;br/&gt;
2016-10-28 02:41:48,349 Stage-1 map = 100%,  reduce = 85%, Cumulative CPU 20.76 sec&lt;br/&gt;
2016-10-28 02:41:51,438 Stage-1 map = 100%,  reduce = 99%, Cumulative CPU 23.95 sec&lt;br/&gt;
2016-10-28 02:41:54,518 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 26.97 sec&lt;br/&gt;
2016-10-28 02:41:57,604 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 12.18 sec&lt;br/&gt;
2016-10-28 02:42:07,871 Stage-1 map = 100%,  reduce = 84%, Cumulative CPU 20.84 sec&lt;br/&gt;
2016-10-28 02:42:10,959 Stage-1 map = 100%,  reduce = 99%, Cumulative CPU 23.98 sec&lt;br/&gt;
2016-10-28 02:42:14,034 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 27.32 sec&lt;br/&gt;
2016-10-28 02:42:17,104 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 12.18 sec&lt;br/&gt;
2016-10-28 02:42:27,380 Stage-1 map = 100%,  reduce = 87%, Cumulative CPU 19.79 sec&lt;br/&gt;
2016-10-28 02:42:30,474 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 22.61 sec&lt;br/&gt;
MapReduce Total cumulative CPU time: 22 seconds 610 msec&lt;br/&gt;
Ended Job = job_1477557082231_0016 with errors&lt;br/&gt;
Error during job, obtaining debugging information...&lt;br/&gt;
Examining task ID: task_1477557082231_0016_m_000001 (and more) from job job_1477557082231_0016&lt;br/&gt;
&lt;br/&gt;
Task with the most failures(4):&lt;br/&gt;
-----&lt;br/&gt;
Task ID:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;task_1477557082231_0016_r_000000&lt;br/&gt;
&lt;br/&gt;
URL:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;a href=&quot;http://master:8088/taskdetails.jsp?jobid=job_1477557082231_0016&amp;tipid=task_1477557082231_0016_r_000000&quot;&gt;http://master:8088/taskdetails.jsp?jobid=job_1477557082231_0016&amp;amp;tipid=task_1477557082231_0016_r_000000&lt;/a&gt;&lt;br/&gt;
-----&lt;br/&gt;
Diagnostic Messages for this Task:&lt;br/&gt;
Error: java.lang.RuntimeException: Hive Runtime Error while closing operators: java.lang.Integer cannot be cast to java.lang.Boolean&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.mr.ExecReducer.close(ExecReducer.java:286)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.io.IOUtils.cleanup(IOUtils.java:244)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:459)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:392)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:164)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at javax.security.auth.Subject.doAs(Subject.java:422)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158)&lt;br/&gt;
Caused by: java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Boolean&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.FilterOperator.process(FilterOperator.java:119)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.internalForward(CommonJoinOperator.java:644)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.genUniqueJoinObject(CommonJoinOperator.java:657)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.genUniqueJoinObject(CommonJoinOperator.java:660)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.checkAndGenObject(CommonJoinOperator.java:756)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.JoinOperator.endGroup(JoinOperator.java:256)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.hadoop.hive.ql.exec.mr.ExecReducer.close(ExecReducer.java:275)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... 8 more&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.mr.MapRedTask&lt;br/&gt;
MapReduce Jobs Launched:&lt;br/&gt;
Stage-Stage-1: Map: 2  Reduce: 1   Cumulative CPU: 22.61 sec   HDFS Read: 41921254 HDFS Write: 0 FAIL&lt;br/&gt;
Total MapReduce CPU Time Spent: 22 seconds 610 msec&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15090] Temporary DB failure can stop ExpiredTokenRemover thread</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15090</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13090&quot; title=&quot;Hive metastore crashes on NPE with ZooKeeperTokenStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13090&quot;&gt;&lt;del&gt;HIVE-13090&lt;/del&gt;&lt;/a&gt; we decided that we should not close the metastore if there is an unexpected exception during the expired token removal process, but that fix leaves a running metastore without ExpiredTokenRemover thread.&lt;/p&gt;

&lt;p&gt;To fix this I will move the catch inside the running loop, and hope the thread could recover from the exception&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016129">HIVE-15090</key>
            <summary>Temporary DB failure can stop ExpiredTokenRemover thread</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pvary">Peter Vary</assignee>
                                    <reporter username="pvary">Peter Vary</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 12:11:18 +0000</created>
                <updated>Thu, 8 Dec 2016 14:10:17 +0000</updated>
                            <resolved>Thu, 17 Nov 2016 17:06:31 +0000</resolved>
                                    <version>1.3.0</version>
                    <version>2.0.1</version>
                    <version>2.1.0</version>
                    <version>2.2.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15615454" author="pvary" created="Fri, 28 Oct 2016 13:45:18 +0000"  >&lt;p&gt;Moved the try/catch into the while cycle, so the thread will keep running after the exception.&lt;br/&gt;
Added an extra sleep when there is an exception so we do not end up busy waiting for the solution of the problem which caused the exception&lt;/p&gt;</comment>
                            <comment id="15615471" author="pvary" created="Fri, 28 Oct 2016 13:52:56 +0000"  >&lt;p&gt;I have tested with the following configuration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;property&amp;gt;
  &amp;lt;!-- So the tokens are stored in database --&amp;gt;
  &amp;lt;name&amp;gt;hive.cluster.delegation.token.store.&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;org.apache.hadoop.hive.thrift.DBTokenStore&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
   &amp;lt;!-- So the removal happens often --&amp;gt;
   &amp;lt;name&amp;gt;hive.cluster.delegation.token.gc-interval&amp;lt;/name&amp;gt;
   &amp;lt;value&amp;gt;10&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Started the Metastore, and after a while I have stopped the database. When the database was turned off the metastore logged the &lt;tt&gt;ExpiredTokenRemover thread received unexpected exception&lt;/tt&gt; message, after the database restarted the messages are stopped, and everything become normal. In the debugger I have verified the thread is running.&lt;/p&gt;</comment>
                            <comment id="15615490" author="pvary" created="Fri, 28 Oct 2016 13:56:42 +0000"  >&lt;p&gt;Added it to the review board:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/53261/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/53261/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15615573" author="pvary" created="Fri, 28 Oct 2016 14:31:56 +0000"  >&lt;p&gt;Spelling issues fixed&lt;/p&gt;</comment>
                            <comment id="15615594" author="aihuaxu" created="Fri, 28 Oct 2016 14:40:29 +0000"  >&lt;p&gt;+1. The patch looks good to me. &lt;/p&gt;</comment>
                            <comment id="15637581" author="aihuaxu" created="Fri, 4 Nov 2016 20:29:39 +0000"  >&lt;p&gt;Reattach the same patch.&lt;/p&gt;</comment>
                            <comment id="15637991" author="hiveqa" created="Fri, 4 Nov 2016 23:04:19 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837282/HIVE-15090.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837282/HIVE-15090.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10628 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1973/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1973/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1973/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1973/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1973/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1973/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837282 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15643551" author="pvary" created="Mon, 7 Nov 2016 08:56:49 +0000"  >&lt;p&gt;The failed tests are flaky. See:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15084&quot; title=&quot;Flaky test: TestMiniTezCliDriver:explainanalyze_1,2, 3, 4, 5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15084&quot;&gt;&lt;del&gt;HIVE-15084&lt;/del&gt;&lt;/a&gt; Flaky test: TestMiniTezCliDriver:explainanalyze_2, 3, 4&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15115&quot; title=&quot;Flaky test: TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15115&quot;&gt;HIVE-15115&lt;/a&gt; Flaky test: TestMiniLlapLocalCliDriver.testCliDriver union_fast_stats&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15116&quot; title=&quot;Flaky test: TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15116&quot;&gt;&lt;del&gt;HIVE-15116&lt;/del&gt;&lt;/a&gt; Flaky test: TestMiniLlapLocalCliDriver.testCliDriver join_acid_non_acid&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15644272" author="aihuaxu" created="Mon, 7 Nov 2016 14:10:17 +0000"  >&lt;p&gt;Pushed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pvary&quot; class=&quot;user-hover&quot; rel=&quot;pvary&quot;&gt;Peter Vary&lt;/a&gt; for your work.&lt;/p&gt;</comment>
                            <comment id="15647100" author="pvary" created="Tue, 8 Nov 2016 09:57:07 +0000"  >&lt;p&gt;I think we should backport this at least to 2.1&lt;/p&gt;</comment>
                            <comment id="15647132" author="pvary" created="Tue, 8 Nov 2016 10:07:42 +0000"  >&lt;p&gt;Reopen to backport it to branch2.1&lt;/p&gt;</comment>
                            <comment id="15647466" author="hiveqa" created="Tue, 8 Nov 2016 12:43:54 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837943/HIVE-15090.2-branch-2.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837943/HIVE-15090.2-branch-2.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 66 failed/errored test(s), 10462 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestJdbcWithMiniHA - did not produce a TEST-*.xml file (likely timed out) (batchId=494)
TestJdbcWithMiniMr - did not produce a TEST-*.xml file (likely timed out) (batchId=491)
TestMsgBusConnection - did not produce a TEST-*.xml file (likely timed out) (batchId=362)
TestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file (likely timed out) (batchId=484)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_table_stats (batchId=92)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_values_orig_table_use_metadata (batchId=109)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=97)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=68)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part (batchId=142)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table (batchId=77)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part (batchId=84)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table (batchId=65)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table (batchId=126)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part (batchId=76)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part (batchId=136)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table (batchId=58)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part (batchId=112)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part (batchId=6)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table (batchId=132)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_null_optimizer (batchId=154)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_between_in (batchId=99)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_orc_ppd_basic (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table (batchId=521)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_constprog_partitioner (batchId=539)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_basic (batchId=187)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=198)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=193)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table (batchId=182)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part (batchId=206)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table (batchId=195)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part (batchId=196)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table (batchId=192)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part (batchId=183)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table (batchId=203)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part (batchId=195)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table (batchId=182)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part (batchId=205)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table (batchId=191)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part (batchId=201)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table (batchId=188)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part (batchId=182)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table (batchId=204)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_between_in (batchId=199)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_cast_constant (batchId=183)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_complex_all (batchId=200)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_between_in (batchId=233)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd (batchId=487)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2023/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2023/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2023/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2023/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2023/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2023/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 66 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837943 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15648745" author="thejas" created="Tue, 8 Nov 2016 20:49:15 +0000"  >&lt;p&gt;We shouldn&apos;t be catching all throwables, that will include errors like OOM where retrying doesn&apos;t make sense. Can we limit it to certain exceptions that can be realistically thrown ?&lt;/p&gt;</comment>
                            <comment id="15651254" author="pvary" created="Wed, 9 Nov 2016 15:40:17 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I was thinking about the same lines as you, but finally decided against it.&lt;br/&gt;
My reasoning was that the METASTORE_CLUSTER_DELEGATION_TOKEN_STORE_CLS is a configuration variable and could be set by the administrator to any class, that is why we will never be able to handle every future exception here correctly. So finally I decided to stick to a clean, easily understandable solution rather than create a partial solution for the DBTokenStore only.&lt;/p&gt;

&lt;p&gt;Since this one is already committed to master, I think if we find a better approach I think we should open another jira to handle it.&lt;br/&gt;
I would be happy to help out there too.&lt;/p&gt;

&lt;p&gt;Thanks again for taking a look at this!&lt;/p&gt;

&lt;p&gt;Peter&lt;/p&gt;</comment>
                            <comment id="15651265" author="pvary" created="Wed, 9 Nov 2016 15:45:46 +0000"  >&lt;p&gt;Retriggering the patch, and hoping to get only the same failing tests as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15094&quot; title=&quot;Fix test failures for 2.1.1 regarding schema evolution with DECIMAL types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15094&quot;&gt;&lt;del&gt;HIVE-15094&lt;/del&gt;&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15651344" author="thejas" created="Wed, 9 Nov 2016 16:23:28 +0000"  >&lt;p&gt;Some options are - &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Defining the exceptions that can be thrown by DelegationTokenStore that are not fatal and can be ignored.&lt;/li&gt;
	&lt;li&gt;Updating DBTokenStore to not thrown what could be transient errors, and just log those&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pvary&quot; class=&quot;user-hover&quot; rel=&quot;pvary&quot;&gt;Peter Vary&lt;/a&gt; What are your thoughts ?&lt;/p&gt;</comment>
                            <comment id="15651499" author="pvary" created="Wed, 9 Nov 2016 17:19:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; You are thinking like me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;Defining the exceptions that can be thrown by DelegationTokenStore that are not fatal and can be ignored.&lt;/cite&gt;&lt;br/&gt;
I have chickened out of this since it is a compatibility change - at least in my unpracticed view. If I change the DelegationTokenStore interface to add the new type of exception, then if someone has implemented his own DelegationTokenStore, it has to be changed to work with the new version of hive.&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;Updating DBTokenStore to not thrown what could be transient errors, and just log those&lt;/cite&gt;&lt;br/&gt;
ExpiredTokenRemover uses the following DelegationTokenStore methods: updateMasterKey, removeMasterKey, getAllDelegationTokenIdentifiers, removeToken, getToken. Changing the behavior of these methods could cause unexpected results.&lt;/p&gt;

&lt;p&gt;So I leaned for your first suggestion, but &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13090&quot; title=&quot;Hive metastore crashes on NPE with ZooKeeperTokenStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13090&quot;&gt;&lt;del&gt;HIVE-13090&lt;/del&gt;&lt;/a&gt; was a longstanding issue (introduced at Dec 7, 2011) with very visible effects and with only two jiras for it. I thought it is not that common to warrant the compatibility change.&lt;/p&gt;

&lt;p&gt;What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;? Is it worth to change the DelegationTokenStore interface? You have more experience with Hive than me.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Peter&lt;/p&gt;</comment>
                            <comment id="15651643" author="hiveqa" created="Wed, 9 Nov 2016 18:16:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12838189/HIVE-15090.3-branch-2.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12838189/HIVE-15090.3-branch-2.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 20 failed/errored test(s), 10462 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestJdbcWithMiniHA - did not produce a TEST-*.xml file (likely timed out) (batchId=494)
TestJdbcWithMiniMr - did not produce a TEST-*.xml file (likely timed out) (batchId=491)
TestMsgBusConnection - did not produce a TEST-*.xml file (likely timed out) (batchId=362)
TestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file (likely timed out) (batchId=484)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_table_stats (batchId=92)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_values_orig_table_use_metadata (batchId=109)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_12 (batchId=87)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=97)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_null_optimizer (batchId=154)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_between_in (batchId=99)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_orc_ppd_basic (batchId=521)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_constprog_partitioner (batchId=539)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_basic (batchId=187)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=198)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_between_in (batchId=199)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_cast_constant (batchId=183)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_complex_all (batchId=200)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_between_in (batchId=233)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching (batchId=492)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd (batchId=487)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2049/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2049/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2049/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2049/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2049/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2049/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 20 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12838189 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15654432" author="pvary" created="Thu, 10 Nov 2016 16:13:34 +0000"  >&lt;p&gt;We have an ongoing discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; about a followup patch, but since this patch is already committed to master and the test results are good for the branch 2.1, I think it would be ok to submit this to branch 2.1 anyway.&lt;/p&gt;

&lt;p&gt;Any objections?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Peter &lt;/p&gt;</comment>
                            <comment id="15656279" author="thejas" created="Fri, 11 Nov 2016 06:17:38 +0000"  >&lt;p&gt;I haven&apos;t come across any DelegationTokenStore implementation outside of hive. I think that is highly unlikely to exist. Even if it exists, the user would be sophisticated enough to update the implementation. Also, we haven&apos;t documented that as a public interface. So, changing the interface if needed is OK.&lt;/p&gt;</comment>
                            <comment id="15656284" author="thejas" created="Fri, 11 Nov 2016 06:19:33 +0000"  >&lt;p&gt;Looks like DBTokenStore methods all call DBTokenStore.invokeOnTokenStore , which would throw TokenStoreException on these transient errors. Catching and retrying on that seems like a reasonable option.&lt;/p&gt;</comment>
                            <comment id="15660683" author="lefty@hortonworks.com" created="Sun, 13 Nov 2016 02:19:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pvary&quot; class=&quot;user-hover&quot; rel=&quot;pvary&quot;&gt;Peter Vary&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, please update the status of this issue.  It was committed to master on November 7 (commit dfb868d1af5bcc0db517c4a7d3675d1971284ef3).  Thanks.&lt;/p&gt;</comment>
                            <comment id="15663268" author="pvary" created="Mon, 14 Nov 2016 09:26:41 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15184&quot; title=&quot;Add the possibility to separate recoverable and not recoverable errors in DelegationTokenStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15184&quot;&gt;HIVE-15184&lt;/a&gt; to track this improvement. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;, could you please check there?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Peter&lt;/p&gt;</comment>
                            <comment id="15663277" author="pvary" created="Mon, 14 Nov 2016 09:28:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;: Reopened this, so we could backport to branch 2.1.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;: Could you please commit the patch to the 2.1 branch? Both of them are the same, only submitted twice to check the test results.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Peter&lt;/p&gt;</comment>
                            <comment id="15674250" author="aihuaxu" created="Thu, 17 Nov 2016 17:06:33 +0000"  >&lt;p&gt;Pushed to branch 2.1 as well. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13020094">HIVE-15184</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12940299">HIVE-13090</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12837943" name="HIVE-15090.2-branch-2.1.patch" size="1985" author="pvary" created="Tue, 8 Nov 2016 09:57:07 +0000"/>
                            <attachment id="12837282" name="HIVE-15090.2.patch" size="1985" author="aihuaxu" created="Fri, 4 Nov 2016 20:29:09 +0000"/>
                            <attachment id="12835821" name="HIVE-15090.2.patch" size="1985" author="pvary" created="Fri, 28 Oct 2016 14:31:56 +0000"/>
                            <attachment id="12838189" name="HIVE-15090.3-branch-2.1.patch" size="1985" author="pvary" created="Wed, 9 Nov 2016 15:45:46 +0000"/>
                            <attachment id="12835807" name="HIVE-15090.patch" size="1787" author="pvary" created="Fri, 28 Oct 2016 13:45:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2016 14:40:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35jhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15091] Master: Update errata.txt for the missing JIRA number in HIVE-14909 commit msg</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15091</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Missing the JIRA number in commit msg for master branch, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14909?focusedCommentId=15614056&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15614056&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-14909?focusedCommentId=15614056&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15614056&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016155">HIVE-15091</key>
            <summary>Master: Update errata.txt for the missing JIRA number in HIVE-14909 commit msg</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctang.ma">Chaoyu Tang</assignee>
                                    <reporter username="ctang.ma">Chaoyu Tang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 13:31:21 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:37 +0000</updated>
                            <resolved>Fri, 28 Oct 2016 13:37:11 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13010388">HIVE-14909</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35jnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15092] WebHCat doesn&apos;t support RM HA</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15092</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We have two resource managers in our environment. For testing purpose, the first resourcemanager has been turned off. In that case, launching a job through webhcat will not work. The webhcat server returns the stacktrace below:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Oct 27 14:32:19 webhcat01.bigdata.fr webhcat INFO - org.apache.hadoop.io.retry.RetryInvocationHandlerException while invoking getDelegationToken of class ApplicationClientProtocolPBClientImpl over rm1 after 8 fail over attempts. Trying to fail over after sleeping for 23697ms.
java.net.ConnectException: Call From webhcat01.bigdata.fr/192.168.200.214 to resourcemanager01.bigdata.fr:8032 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:1.7.0_101]
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) ~[?:1.7.0_101]
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[?:1.7.0_101]
        at java.lang.reflect.Constructor.newInstance(Constructor.java:526) ~[?:1.7.0_101]
        at org.apache.hadoop.net.NetUtils.wrapWithMessage(NetUtils.java:792) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.net.NetUtils.wrapException(NetUtils.java:732) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.Client.call(Client.java:1479) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.Client.call(Client.java:1412) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:229) ~[hadoop-common-2.7.2.jar:?]
        at com.sun.proxy.$Proxy79.getDelegationToken(Unknown Source) ~[?:?]
        at org.apache.hadoop.yarn.api.impl.pb.client.ApplicationClientProtocolPBClientImpl.getDelegationToken(ApplicationClientProtocolPBClientImpl.java:310) ~[hadoop-yarn-common-2.7.2.jar:?]
        at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source) ~[?:?]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_101]
        at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_101]
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:191) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:102) [hadoop-common-2.7.2.jar:?]
        at com.sun.proxy.$Proxy80.getDelegationToken(Unknown Source) [?:?]
        at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.getRMDelegationToken(YarnClientImpl.java:513) [hadoop-yarn-client-2.7.2.jar:?]
        at org.apache.hadoop.mapred.ResourceMgrDelegate.getDelegationToken(ResourceMgrDelegate.java:175) [spark-assembly-1.4.1-hadoop2.7.1.jar:?]
        at org.apache.hadoop.mapred.YARNRunner.getDelegationToken(YARNRunner.java:221) [spark-assembly-1.4.1-hadoop2.7.1.jar:?]
        at org.apache.hadoop.mapreduce.Cluster.getDelegationToken(Cluster.java:401) [hadoop-mapreduce-client-core-2.7.2.jar:?]
        at org.apache.hadoop.mapred.JobClient$16.run(JobClient.java:1232) [hadoop-mapreduce-client-core-2.7.2.jar:?]
        at org.apache.hadoop.mapred.JobClient$16.run(JobClient.java:1229) [hadoop-mapreduce-client-core-2.7.2.jar:?]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.7.0_101]
        at javax.security.auth.Subject.doAs(Subject.java:415) [?:1.7.0_101]
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657) [hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.mapred.JobClient.getDelegationToken(JobClient.java:1228) [hadoop-mapreduce-client-core-2.7.2.jar:?]
        at org.apache.hive.hcatalog.templeton.tool.TempletonControllerJob.run(TempletonControllerJob.java:137) [hive-webhcat-2.1.0.jar:2.1.0]
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70) [hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84) [hadoop-common-2.7.2.jar:?]
        at org.apache.hive.hcatalog.templeton.LauncherDelegator$1.run(LauncherDelegator.java:111) [hive-webhcat-2.1.0.jar:2.1.0]
        at org.apache.hive.hcatalog.templeton.LauncherDelegator$1.run(LauncherDelegator.java:107) [hive-webhcat-2.1.0.jar:2.1.0]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.7.0_101]
        at javax.security.auth.Subject.doAs(Subject.java:415) [?:1.7.0_101]
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657) [hadoop-common-2.7.2.jar:?]
        at org.apache.hive.hcatalog.templeton.LauncherDelegator.queueAsUser(LauncherDelegator.java:107) [hive-webhcat-2.1.0.jar:2.1.0]
        at org.apache.hive.hcatalog.templeton.LauncherDelegator.enqueueController(LauncherDelegator.java:85) [hive-webhcat-2.1.0.jar:2.1.0]
        at org.apache.hive.hcatalog.templeton.PigDelegator.run(PigDelegator.java:60) [hive-webhcat-2.1.0.jar:2.1.0]
        at org.apache.hive.hcatalog.templeton.Server.pig(Server.java:778) [hive-webhcat-2.1.0.jar:2.1.0]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.7.0_101]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[?:1.7.0_101]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_101]
        at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_101]
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1480) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1411) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1360) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1350) [jersey-server-1.14.jar:1.14]
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416) [jersey-servlet-1.14.jar:1.14]
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538) [jersey-servlet-1.14.jar:1.14]
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716) [jersey-servlet-1.14.jar:1.14]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) [servlet-api-2.5.jar:2.5]
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:565) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1360) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.apache.hadoop.security.authentication.server.AuthenticationFilter.doFilter(AuthenticationFilter.java:595) [hadoop-auth-2.7.2.jar:?]
        at org.apache.hadoop.security.authentication.server.AuthenticationFilter.doFilter(AuthenticationFilter.java:554) [hadoop-auth-2.7.2.jar:?]
        at org.apache.hadoop.hdfs.web.AuthFilter.doFilter(AuthFilter.java:88) [hadoop-hdfs-2.7.2.jar:?]
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1331) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:477) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1031) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:965) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.handler.HandlerList.handle(HandlerList.java:47) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.Server.handle(Server.java:349) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:449) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:925) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:857) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:76) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:609) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534) [jetty-all-7.6.0.v20120127.jar:7.6.0.v20120127]
        at java.lang.Thread.run(Thread.java:745) [?:1.7.0_101]
Caused by: java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:1.7.0_101]
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:744) ~[?:1.7.0_101]
        at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:531) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:495) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:614) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:712) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.Client$Connection.access$2900(Client.java:375) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.Client.getConnection(Client.java:1528) ~[hadoop-common-2.7.2.jar:?]
        at org.apache.hadoop.ipc.Client.call(Client.java:1451) ~[hadoop-common-2.7.2.jar:?]
        ... 76 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Hadoop 2.7.2, Hive 2.1.0&lt;/p&gt;</environment>
        <key id="13016157">HIVE-15092</key>
            <summary>WebHCat doesn&apos;t support RM HA</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="BigDataOrange">Alexandre Linte</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 13:41:03 +0000</created>
                <updated>Fri, 28 Oct 2016 13:41:03 +0000</updated>
                                            <version>2.1.0</version>
                                                    <component>WebHCat</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35jnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15093] S3-to-S3 Renames: Files should be moved individually rather than at a directory level</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15093</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive&apos;s MoveTask uses the Hive.moveFile method to move data within a distributed filesystem as well as blobstore filesystems.&lt;/p&gt;

&lt;p&gt;If the move is done within the same filesystem:&lt;/p&gt;

&lt;p&gt;1: If the source path is a subdirectory of the destination path, files will be moved one by one using a threapool of workers&lt;/p&gt;

&lt;p&gt;2: If the source path is not a subdirectory of the destination path, a single rename operation is used to move the entire directory&lt;/p&gt;

&lt;p&gt;The second option may not work well on blobstores such as S3. Renames are not metadata operations and require copying all the data. Client connectors to blobstores may not efficiently rename directories. Worst case, the connector will copy each file one by one, sequentially rather than using a threadpool of workers to copy the data (e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Hive already has code to rename files using a threadpool of workers, but this only occurs in case number 1.&lt;/p&gt;

&lt;p&gt;This JIRA aims to modify the code so that case 1 is triggered when copying within a blobstore. The focus is on copies within a blobstore because needToCopy will return true if the src and target filesystems are different, in which case a different code path is triggered.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016195">HIVE-15093</key>
            <summary>S3-to-S3 Renames: Files should be moved individually rather than at a directory level</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12990523">HIVE-14269</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="stakiar">Sahil Takiar</assignee>
                                    <reporter username="stakiar">Sahil Takiar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 15:50:23 +0000</created>
                <updated>Fri, 6 Jan 2017 18:48:43 +0000</updated>
                            <resolved>Fri, 6 Jan 2017 18:48:42 +0000</resolved>
                                    <version>2.1.0</version>
                                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="15616031" author="poeppt" created="Fri, 28 Oct 2016 17:34:24 +0000"  >&lt;p&gt;Shouldn&apos;t this be implemented in s3a? There could be many other instances where Hive attempts to rename a directory, and there is much potential in the future for this to be implemented wrongly.&lt;br/&gt;
In addition, other Hadoop-stack applications may also have a use case for blobstore-&amp;gt;blobstore renames. Should we place the burden on them to implement this themselves?&lt;br/&gt;
Also, what if there is some new type of filesystem coming in the future, that requires some other implementation of move. Do we want to set the precedent of a large tree of if/else based on filesystem?&lt;/p&gt;

&lt;p&gt;Seems that the more correct solution would be to allow s3a to be smart about seeing that it&apos;s a rename from blobstore directory-&amp;gt;blobstore directory, and use a threadpool in that case.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="15616281" author="spena" created="Fri, 28 Oct 2016 19:18:51 +0000"  >&lt;p&gt;Agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt;. We should have some implementation of renames between S3 -&amp;gt; S3 on the BlobstorageUtils class. There might be other cases in the Hive code where renames are handled serially, and we won&apos;t like to repeat code for those cases are found.&lt;/p&gt;

&lt;p&gt;Also, if this serial copies happen at the rename() level, then probably having this work on the Hadoop side may be beneficial for other components.&lt;/p&gt;</comment>
                            <comment id="15616344" author="stakiar" created="Fri, 28 Oct 2016 19:46:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I agree that ideally this should be fixed in s3a. This patch is more of a stop-gap solution until this is fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt;. However, that could be a while. I don&apos;t know when the fix in s3a will land, the current JIRA has a Target Version of 2.9.0 and I don&apos;t know when that will be released.&lt;/p&gt;

&lt;p&gt;I think it&apos;s still worth adding this to Hive even if it will be reverted once Hadoop 2.9.0 is released (whenever that will be). We have seen this portion of the code become a bottleneck for any Hive questions on S3, because all data on S3 needs to be renamed sequentially, by a single process.&lt;/p&gt;

&lt;p&gt;I think the burden is still on the blobstore connectors to implement efficient rename of directories. We can just make this specific patch s3a specific.&lt;/p&gt;

&lt;p&gt;I like the idea of moving the logic into the BlobStorageUtils class so that other components can re-use this optimization. This should make it much easier to remove in the future too.&lt;/p&gt;</comment>
                            <comment id="15616362" author="spena" created="Fri, 28 Oct 2016 19:52:16 +0000"  >&lt;p&gt;I&apos;m good with moving the logic to BlobStorageUtils for now.&lt;/p&gt;</comment>
                            <comment id="15623359" author="stakiar" created="Mon, 31 Oct 2016 20:41:34 +0000"  >&lt;p&gt;Patch is still a WIP, had to re-attach version 2 again because ptest was failing for some reason.&lt;/p&gt;</comment>
                            <comment id="15623569" author="stakiar" created="Mon, 31 Oct 2016 22:07:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; - patch is ready for review. I created an RB and linked it to this JIRA.&lt;/p&gt;</comment>
                            <comment id="15627092" author="stakiar" created="Tue, 1 Nov 2016 23:46:59 +0000"  >&lt;p&gt;Addressed a few comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15627548" author="hiveqa" created="Wed, 2 Nov 2016 03:33:12 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836469/HIVE-15093.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836469/HIVE-15093.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 189 failed/errored test(s), 7089 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_custom_key2] (batchId=215)
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_custom_key] (batchId=215)
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_joins] (batchId=215)
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_predicate_pushdown] (batchId=215)
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_queries] (batchId=215)
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_single_sourced_multi_insert] (batchId=215)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=1)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=10)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=13)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=16)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=17)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=18)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=19)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=2)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=20)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=21)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=23)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=24)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=25)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=27)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=28)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=29)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=30)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=32)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=33)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=34)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=36)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=37)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=38)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=40)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=41)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=42)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=46)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=48)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=49)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=50)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=51)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=52)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=53)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=54)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=55)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=56)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=57)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=58)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=59)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=6)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=62)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=63)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=64)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=65)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=66)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=67)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=68)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=69)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=7)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=72)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=73)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=74)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=75)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=76)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=77)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=79)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=8)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=80)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=9)
org.apache.hadoop.hive.cli.TestCompareCliDriver.org.apache.hadoop.hive.cli.TestCompareCliDriver (batchId=220)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[fileformat_base64] (batchId=218)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[serde_typedbytes2] (batchId=218)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[serde_typedbytes3] (batchId=218)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[serde_typedbytes4] (batchId=218)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[serde_typedbytes5] (batchId=218)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[serde_typedbytes] (batchId=218)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[serde_typedbytes_null] (batchId=218)
org.apache.hadoop.hive.cli.TestContribNegativeCliDriver.org.apache.hadoop.hive.cli.TestContribNegativeCliDriver (batchId=221)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_unencrypted_nonhdfs_external_tables] (batchId=153)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=85)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=86)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=87)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=88)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=89)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[cascade_dbdrop] (batchId=222)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[generatehfiles_require_family_path] (batchId=222)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_merge_diff_fs] (batchId=131)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[orc_merge_diff_fs] (batchId=156)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=83)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=102)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=104)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=105)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=107)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=108)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=109)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=110)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=111)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=112)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=113)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=114)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=116)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=117)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=118)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=120)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=122)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=123)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=124)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=125)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=126)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=127)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=128)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=129)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=130)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=92)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=93)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=94)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=95)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=96)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=97)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=98)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=99)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=226)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.insertIntoPartitionTable (batchId=191)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.insertIntoTable (batchId=191)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.partitionedTable (batchId=191)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.table (batchId=191)
org.apache.hadoop.hive.ql.TestLocationQueries.testAlterTablePartitionLocation_alter5 (batchId=204)
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1 (batchId=202)
org.apache.hadoop.hive.ql.exec.TestOperators.testFetchOperatorContext (batchId=257)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.checkExpectedLocks2 (batchId=268)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testCompletedTxnComponents (batchId=268)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMultiInsert (batchId=268)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[ambiguous_join_col] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[duplicate_alias] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[garbage] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[insert_wrong_number_columns] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_create_table] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_dot] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_function_param2] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_index] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_select] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[macro_reserved_word] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[missing_overwrite] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[nonkey_groupby] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[quoted_string] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column1] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column2] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column3] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column4] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column5] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column6] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function1] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function2] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function3] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function4] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table1] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table2] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct1] (batchId=223)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct2] (batchId=223)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testBasicReplEximCommands (batchId=166)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testMetadataReplEximCommands (batchId=166)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.sqlCTAS (batchId=217)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.sqlInsertPartition (batchId=217)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.sqlInsertTable (batchId=217)
org.apache.hive.jdbc.TestJdbcDriver2.org.apache.hive.jdbc.TestJdbcDriver2 (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1913/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1913/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1913/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1913/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1913/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1913/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 189 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836469 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15627872" author="stakiar" created="Wed, 2 Nov 2016 06:01:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; comments addressed, updated the RB.&lt;/p&gt;

&lt;p&gt;Bunch of failed tests because &lt;tt&gt;ProxyLocalFileSystem&lt;/tt&gt; does not support the &lt;tt&gt;FileSystem.getScheme()&lt;/tt&gt;, which is used by &lt;tt&gt;BlobStorageUtils.isBlobStorageFileSystem&lt;/tt&gt;. Updated the code so that it uses &lt;tt&gt;FileSystem.getURI().getScheme()&lt;/tt&gt; instead.&lt;/p&gt;</comment>
                            <comment id="15628369" author="hiveqa" created="Wed, 2 Nov 2016 09:35:32 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836508/HIVE-15093.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836508/HIVE-15093.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10630 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_3] (batchId=90)
org.apache.hadoop.hive.ql.util.TestBlobStorageUtils.testValidAndInvalidFileSystems (batchId=236)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1920/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1920/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1920/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1920/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1920/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1920/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836508 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15629420" author="stakiar" created="Wed, 2 Nov 2016 16:07:17 +0000"  >&lt;p&gt;&lt;tt&gt;TestBlobStorageUtils.testValidAndInvalidFileSystems&lt;/tt&gt; was failing because the &lt;tt&gt;FileSystem.getScheme()&lt;/tt&gt; was being mocked. Since the &lt;tt&gt;BlobStorageUtils.isBlobStorageFileSystem()&lt;/tt&gt; method was changed to use &lt;tt&gt;FileSystem.getURI()&lt;/tt&gt; instead, I changed the mocking logic.&lt;/p&gt;</comment>
                            <comment id="15629478" author="yalovyyi" created="Wed, 2 Nov 2016 16:26:08 +0000"  >&lt;p&gt;-1&lt;br/&gt;
This approach will block any possible optimization in a connector library. File system level operation should not be re-implemented in application. Thread pool is not the only option here, different blob stores have different ways to optimize move use case. An application should be blobstore agnostic. Does it make sense?&lt;/p&gt;</comment>
                            <comment id="15630078" author="hiveqa" created="Wed, 2 Nov 2016 19:04:01 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836600/HIVE-15093.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836600/HIVE-15093.7.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10630 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1930/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1930/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1930/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1930/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1930/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1930/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836600 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15630600" author="stakiar" created="Wed, 2 Nov 2016 21:31:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; thanks for your comments, a few thoughts:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This approach will block any possible optimization in a connector library.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure how this blocks optimizations in connector libraries. The connectors are external to Hive and are free to implement any optimizations they want. Once they do implement those optimizations, we can modify to Hive to pick them up. In this case, that just requires making a config change.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;File system level operation should not be re-implemented in application. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Generally agree, but I would argue that this isn&apos;t re-implementing any native bloblstore operations. Blobstores don&apos;t allow renames in the first place. This patch just uses a different methodology for simulating renames.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Thread pool is not the only option here, different blob stores have different ways to optimize move use case. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m only familiar with the s3a connector, what do other blob store connectors do?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;An application should be blobstore agnostic.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Generally agree, which is why this change is configurable. It can be turned off by default it that makes things better.&lt;/p&gt;

&lt;p&gt;If the community feels like this isn&apos;t a reasonable patch, then I&apos;m open to discussing alternatives.&lt;/p&gt;</comment>
                            <comment id="15630761" author="ashutoshc" created="Wed, 2 Nov 2016 22:34:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt; For clarity, what Hive statement may result in this issue? Is it into into directory? or something else.&lt;/p&gt;</comment>
                            <comment id="15630823" author="stakiar" created="Wed, 2 Nov 2016 22:58:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This occurs when running &lt;tt&gt;CREATE TABLE ... AS SELECT ...&lt;/tt&gt; or &lt;tt&gt;INSERT OVERWRITE TABLE ... SELECT ...&lt;/tt&gt; queries, when both the scratch directory and destination directory are both S3. These queries will move a directory from the scratch dir to the final table location (e..g &lt;tt&gt;/user/hive/warehouse/table1/&lt;/tt&gt;). If the scratch dir is on S3 and the final table location is on S3, then the &lt;tt&gt;S3AFileSystem.rename&lt;/tt&gt; method will be used to move the data. Since you cannot rename files on S3, this operation basically copies all the data from the source directory to the destination directory. The way it does this copy is pretty inefficient: for each file under the source directory, it issues a copy request to S3 (a copy request is basically just an HTTP request), waits for S3 to finish copying the data, and then moves on to the next file.&lt;/p&gt;</comment>
                            <comment id="15635405" author="stakiar" created="Fri, 4 Nov 2016 06:17:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; any more comments?&lt;/p&gt;</comment>
                            <comment id="15637570" author="spena" created="Fri, 4 Nov 2016 20:24:52 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; that we should leave file system operations to HDFS and just use the rename() API, but currently Hadoop is leaving Hive behind on performance because the rename() on S3 is slow due to serial copies. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; Do you happen to know if Hadoop 2.8.0 will make renames() perform better on blobstore systems? When will Hadoop 2.8.0 be released to the public?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt; I don&apos;t know if Hadoop will perform different when doing renames on other blobstores. I think we would need to create a configuration flag specific for each blobstore in case S3 is slow but Azure blobstore is fast. We would want users to use Hive parallel copies with S3, but leave Azure use their own rename() operation.&lt;/p&gt;</comment>
                            <comment id="15638075" author="stakiar" created="Fri, 4 Nov 2016 23:43:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; yes one possibility is to just make this optimization S3 specific. I&apos;m not aware of how other blobstore connectors implement rename operations. I&apos;m not even aware of what other blobstore connectors exist. The supported blobstore schemes in Hive are all S3 specific.&lt;/p&gt;</comment>
                            <comment id="15645575" author="stakiar" created="Mon, 7 Nov 2016 21:50:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; comments addressed. Added some q tests also.&lt;/p&gt;</comment>
                            <comment id="15646025" author="hiveqa" created="Tue, 8 Nov 2016 00:58:37 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837843/HIVE-15093.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837843/HIVE-15093.8.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10628 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hadoop.hive.common.TestBlobStorageUtils.testValidAndInvalidFileSystems (batchId=235)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2012/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2012/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2012/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2012/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2012/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2012/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837843 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15646545" author="hiveqa" created="Tue, 8 Nov 2016 05:19:30 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837895/HIVE-15093.9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837895/HIVE-15093.9.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 3 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10628 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hive.service.cli.TestEmbeddedThriftBinaryCLIService.testTaskStatus (batchId=207)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2017/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2017/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2017/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2017/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2017/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2017/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837895 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15651394" author="stevel@apache.org" created="Wed, 9 Nov 2016 16:44:38 +0000"  >&lt;p&gt;-1 (non binding)&lt;/p&gt;

&lt;p&gt;Doing parallel rename is a stop-gap solution which will be obsolete the moment someone sits down to do it in s3a with an implementation that its more efficient in its scheduling of copies calls, and, with tests and broader use, more tested.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt; proposes parallel renames. Nobody has written that yet, &#8212;but I promise to review a patch people provide, with tests. Get that patch into Hadoop and there&apos;s only one place to maintain this stuff, no need to document/test another switch, maintain the option, have another codepath to keep alive, etc. &lt;br/&gt;
The algorithm I proposed there would initially sorts the files by size, so the larger renames are scheduled first. Given a thread pool smaller than the list of files to rename, this should ensure that the scheduling is more optimal. the listing. If you really, really, want to do this in a separate piece of code, you should do the same.&lt;/p&gt;

&lt;p&gt;Also, there are enough other s3a speedups that you should be testing against Hadoop 2.8+, both to avoid optimising against a now-obsolete codepath, but also to help find and report any problems in our code.&lt;/p&gt;

&lt;p&gt;To summarise: go on, fix the code in Hadoop, simplify everyone&apos;s lives. &lt;/p&gt;</comment>
                            <comment id="15651540" author="stakiar" created="Wed, 9 Nov 2016 17:40:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_l&quot; class=&quot;user-hover&quot; rel=&quot;steve_l&quot;&gt;Steve Loughran&lt;/a&gt; thanks for your input.&lt;/p&gt;

&lt;p&gt;I&apos;m happy to start looking into &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt; if everyone agrees that is the better approach. I do have some questions though:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Is Hadoop 2.8+ released anywhere? I don&apos;t see artifacts published on Maven Central, Hive is currently using version 2.7.2&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt; is targeted for Hadoop 2.9.0 do we know when that would be released?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;My main question is, if we do this in Hadoop when will the optimization actually make it into Hive?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; any chance you, or maybe someone on the PMC could comment on this? In addition to Steve&apos;s concerns, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; had similar concerns expressed in earlier comments in this JIRA.&lt;/p&gt;</comment>
                            <comment id="15653694" author="stevel@apache.org" created="Thu, 10 Nov 2016 10:31:36 +0000"  >&lt;ol&gt;
	&lt;li&gt;I&apos;ve just started &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt;, though busy with preparation and attendance at ApacheCon big data means expect no real progress for the next 10 days&lt;/li&gt;
	&lt;li&gt;there&apos;s a recent discussion on common dev about when 2.8 RC comes out&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;as far as HDP goes, all the s3a phase II read pipeline work is in HDP-2.5; the HDP-cloud in AWS product adds the &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13560&quot; title=&quot;S3ABlockOutputStream to support huge (many GB) file writes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13560&quot;&gt;&lt;del&gt;HADOOP-13560&lt;/del&gt;&lt;/a&gt; write pipeline; with a faster update cycle it&apos;d be out the door fairly rapidly too (disclaimer, no forward looking statements, etc etc). CDH hasn&apos;t shipped with any of the phase II changes in yet, that&apos;s something to discuss with your colleagues. Given the emphasis on Impala &amp;amp; S3, I&apos;d expect it sooner rather than later&lt;/p&gt;

&lt;p&gt;Here&apos;s &lt;a href=&quot;https://github.com/steveloughran/hadoop/blob/s3/HADOOOP-13600-rename/hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java#L802&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the work in progress&lt;/a&gt;; as I note in the code, I&apos;m not doing it right. We should have the list and delete operations working in parallel too, because list is pretty slow too, and I want to eliminate all sequential points in the code.&lt;/p&gt;

&lt;p&gt;I know it&apos;s complicated, but it shows why this routine is so much better down in the layers beneath: we can optimise every single HTTP request to S3a, order the copy calls for maximum overlapping operations, &lt;b&gt;and write functional tests against real s3 endpoints&lt;/b&gt;. object stores are so different from filesystems that testing against localfs is misleading.&lt;/p&gt;</comment>
                            <comment id="15654784" author="stakiar" created="Thu, 10 Nov 2016 18:36:24 +0000"  >&lt;p&gt;Thanks Steve,&lt;/p&gt;

&lt;p&gt;I can actually spend some time on &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt; too, I wrote a preliminary patch yesterday that I was going to post today.&lt;/p&gt;

&lt;p&gt;Hive does have some S3 testing (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14373&quot; title=&quot;Add integration tests for hive on S3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14373&quot;&gt;&lt;del&gt;HIVE-14373&lt;/del&gt;&lt;/a&gt;), its similar to how S3 testing is done in Hadoop, its up to the developer to run the tests. However, these are probably not as robust as the Hadoop S3 tests since they just run Hive queries against S3.&lt;/p&gt;

&lt;p&gt;That being said, I would still like to see this patch go through, but I will leave that up the Hive community to decide.&lt;/p&gt;</comment>
                            <comment id="15805279" author="stakiar" created="Fri, 6 Jan 2017 18:48:43 +0000"  >&lt;p&gt;Closing as Won&apos;t Fix - will be fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13600&quot; title=&quot;S3a rename() to copy files in a directory in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13600&quot;&gt;HADOOP-13600&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13004562">HADOOP-13600</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12835837" name="HIVE-15093.1.patch" size="3199" author="stakiar" created="Fri, 28 Oct 2016 15:52:15 +0000"/>
                            <attachment id="12836183" name="HIVE-15093.2.patch" size="22844" author="stakiar" created="Mon, 31 Oct 2016 17:27:19 +0000"/>
                            <attachment id="12836222" name="HIVE-15093.3.patch" size="22844" author="stakiar" created="Mon, 31 Oct 2016 20:40:50 +0000"/>
                            <attachment id="12836234" name="HIVE-15093.4.patch" size="27102" author="stakiar" created="Mon, 31 Oct 2016 22:03:57 +0000"/>
                            <attachment id="12836469" name="HIVE-15093.5.patch" size="27665" author="stakiar" created="Tue, 1 Nov 2016 23:46:59 +0000"/>
                            <attachment id="12836508" name="HIVE-15093.6.patch" size="27674" author="stakiar" created="Wed, 2 Nov 2016 05:58:40 +0000"/>
                            <attachment id="12836600" name="HIVE-15093.7.patch" size="27773" author="stakiar" created="Wed, 2 Nov 2016 16:07:17 +0000"/>
                            <attachment id="12837843" name="HIVE-15093.8.patch" size="21160" author="stakiar" created="Mon, 7 Nov 2016 21:38:50 +0000"/>
                            <attachment id="12837895" name="HIVE-15093.9.patch" size="22317" author="stakiar" created="Tue, 8 Nov 2016 02:38:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2016 17:34:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35jw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15094] Fix test failures for 2.1.1 regarding schema evolution with DECIMAL types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15094</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Several tests failures related to schema evolution are happening on branch-2.1 due to a patch reverted in the past.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is due to the following commits:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# This reverted patch about DECIMAL conversion to FLOAT and DOUBLE
6ab5f85299539aeb49bb02edfa142e4d4133f10e 
Revert &quot;HIVE-13380 : Decimal should have lower precedence than double in type hierachy (Ashutosh Chauhan via Jason Dere)&quot;
...
# This added test cases for DECIMAL schema evolution
d5285d8ebaf5bef2a13b2c2338be2fe683804b02
HIVE-12878: Support Vectorization for TEXTFILE and other formats (Matt McCline, reviewed by Sergey Shelukhin)
...
# This added DECIMAL conversion to FLOAT and DOUBLE
b507520e17811c8e059aa7d30490d29b984e2e96 
HIVE-13380 : Decimal should have lower precedence than double in type hierachy (Ashutosh Chauhan via Jason Dere)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because DECIMAL conversion is not supported on branch-2.1, then we should update the test cases and remove or update those tests causing the failure.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016260">HIVE-15094</key>
            <summary>Fix test failures for 2.1.1 regarding schema evolution with DECIMAL types</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13009556">HIVE-14884</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcamachorodriguez">Jesus Camacho Rodriguez</assignee>
                                    <reporter username="spena">Sergio Pe&#241;a</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 20:32:39 +0000</created>
                <updated>Thu, 8 Dec 2016 14:10:17 +0000</updated>
                            <resolved>Tue, 8 Nov 2016 17:12:26 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15616474" author="spena" created="Fri, 28 Oct 2016 20:33:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcamachorodriguez&quot; class=&quot;user-hover&quot; rel=&quot;jcamachorodriguez&quot;&gt;Jesus Camacho Rodriguez&lt;/a&gt; I dig a little more, and this is what is causing all those failures. We just need to update the .q files to remove or change the tests causing the failures with DECIMAL -&amp;gt; FLOAT,DOUBLE&lt;/p&gt;</comment>
                            <comment id="15616501" author="spena" created="Fri, 28 Oct 2016 20:42:45 +0000"  >&lt;p&gt;It&apos;s interesting though that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13380&quot; title=&quot;Decimal should have lower precedence than double in type hierachy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13380&quot;&gt;&lt;del&gt;HIVE-13380&lt;/del&gt;&lt;/a&gt; was also reverted from Master, but the tests are not failing there. What was it fixed there? &lt;/p&gt;</comment>
                            <comment id="15622818" author="jcamachorodriguez" created="Mon, 31 Oct 2016 17:35:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13380&quot; title=&quot;Decimal should have lower precedence than double in type hierachy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13380&quot;&gt;&lt;del&gt;HIVE-13380&lt;/del&gt;&lt;/a&gt; does not seem to be reverted from Master, can you point me to the commit?&lt;/p&gt;</comment>
                            <comment id="15622943" author="spena" created="Mon, 31 Oct 2016 18:23:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcamachorodriguez&quot; class=&quot;user-hover&quot; rel=&quot;jcamachorodriguez&quot;&gt;Jesus Camacho Rodriguez&lt;/a&gt; Sorry, my mistake. The commit is not reverted from master, so that&apos;s why the tests are not failing there.&lt;/p&gt;</comment>
                            <comment id="15623304" author="jcamachorodriguez" created="Mon, 31 Oct 2016 20:23:47 +0000"  >&lt;p&gt;I almost have the fix for this one &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt; (changing tests and regenerating q files).&lt;/p&gt;</comment>
                            <comment id="15623307" author="aihuaxu" created="Mon, 31 Oct 2016 20:25:41 +0000"  >&lt;p&gt;Cool. Can you take it then? &lt;/p&gt;</comment>
                            <comment id="15623313" author="jcamachorodriguez" created="Mon, 31 Oct 2016 20:27:44 +0000"  >&lt;p&gt;Sure. In case you want to help, there are still a few issues (some of them look like just regenerating q files) in last ptest run in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14884&quot; title=&quot;Test result cleanup before 2.1.1 release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14884&quot;&gt;&lt;del&gt;HIVE-14884&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15623431" author="aihuaxu" created="Mon, 31 Oct 2016 21:10:01 +0000"  >&lt;p&gt;Sure. Sergio asked me to check this. Didn&apos;t notice you already started.&lt;/p&gt;</comment>
                            <comment id="15629387" author="spena" created="Wed, 2 Nov 2016 15:54:43 +0000"  >&lt;p&gt;Hopefully HiveQA will work this time. I had to make some configuration changes on ptest to make it work.&lt;/p&gt;</comment>
                            <comment id="15629879" author="hiveqa" created="Wed, 2 Nov 2016 18:13:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836594/HIVE-15094-branch-2.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836594/HIVE-15094-branch-2.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 15 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 23 failed/errored test(s), 10462 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestJdbcWithMiniHA - did not produce a TEST-*.xml file (likely timed out) (batchId=494)
TestJdbcWithMiniMr - did not produce a TEST-*.xml file (likely timed out) (batchId=491)
TestMsgBusConnection - did not produce a TEST-*.xml file (likely timed out) (batchId=362)
TestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file (likely timed out) (batchId=484)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_table_stats (batchId=92)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_values_orig_table_use_metadata (batchId=109)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_12 (batchId=87)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=97)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=68)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket (batchId=118)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_null_optimizer (batchId=154)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_between_in (batchId=99)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_orc_ppd_basic (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_constprog_partitioner (batchId=539)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_basic (batchId=187)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=198)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=193)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_between_in (batchId=199)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_cast_constant (batchId=183)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_complex_all (batchId=200)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_between_in (batchId=233)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd (batchId=487)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1929/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1929/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1929/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1929/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1929/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1929/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 23 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836594 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15647413" author="jcamachorodriguez" created="Tue, 8 Nov 2016 12:19:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;, can you review the patch? This should fix the schema evolution issues. Thanks&lt;/p&gt;</comment>
                            <comment id="15647765" author="hiveqa" created="Tue, 8 Nov 2016 14:53:42 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837961/HIVE-15094.1-branch-2.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837961/HIVE-15094.1-branch-2.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 16 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 23 failed/errored test(s), 10462 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestJdbcWithMiniHA - did not produce a TEST-*.xml file (likely timed out) (batchId=494)
TestJdbcWithMiniMr - did not produce a TEST-*.xml file (likely timed out) (batchId=491)
TestMsgBusConnection - did not produce a TEST-*.xml file (likely timed out) (batchId=362)
TestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file (likely timed out) (batchId=484)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_table_stats (batchId=92)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_values_orig_table_use_metadata (batchId=109)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_13 (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=97)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket (batchId=118)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_null_optimizer (batchId=154)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_between_in (batchId=99)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_orc_ppd_basic (batchId=521)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=521)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_constprog_partitioner (batchId=539)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_basic (batchId=187)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_schema_evol_3a (batchId=198)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=193)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_between_in (batchId=199)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_cast_constant (batchId=183)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_complex_all (batchId=200)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_between_in (batchId=233)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching (batchId=492)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd (batchId=487)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2024/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2024/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2024/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2024/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2024/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2024/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 23 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837961 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15647904" author="spena" created="Tue, 8 Nov 2016 15:47:06 +0000"  >&lt;p&gt;Patch looks good. +1&lt;/p&gt;

&lt;p&gt;However, there are still 2 schema evol tests failing:&lt;br/&gt;
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=521)&lt;br/&gt;
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part (batchId=193)&lt;/p&gt;

&lt;p&gt;Once this patch is committed, should we revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13380&quot; title=&quot;Decimal should have lower precedence than double in type hierachy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13380&quot;&gt;&lt;del&gt;HIVE-13380&lt;/del&gt;&lt;/a&gt; from master as well? &lt;/p&gt;</comment>
                            <comment id="15648130" author="jcamachorodriguez" created="Tue, 8 Nov 2016 17:07:14 +0000"  >&lt;p&gt;There is an ongoing discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14077&quot; title=&quot;add implicit decimal arithmetic q test, fix issues if found &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14077&quot;&gt;&lt;del&gt;HIVE-14077&lt;/del&gt;&lt;/a&gt; to decide how to proceed.&lt;/p&gt;</comment>
                            <comment id="15648143" author="jcamachorodriguez" created="Tue, 8 Nov 2016 17:12:27 +0000"  >&lt;p&gt;Regenerated those two q files and pushed to branch-2.1. Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836594" name="HIVE-15094-branch-2.1.patch" size="478988" author="jcamachorodriguez" created="Wed, 2 Nov 2016 15:31:44 +0000"/>
                            <attachment id="12837961" name="HIVE-15094.1-branch-2.1.patch" size="489495" author="jcamachorodriguez" created="Tue, 8 Nov 2016 12:18:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Oct 2016 17:35:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35kan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15095] TestHiveDruidQueryBasedInputFormat.testCreateSplitsIntervals fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15095</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;junit.framework.AssertionFailedError: expected:&amp;lt;[[2009-12-31T16:00:00.000-08:00/2010-04-01T23:00:00.000-07:00], [2010-04-01T23:00:00.000-07:00/2010-07-02T05:00:00.000-07:00], [2010-07-02T05:00:00.000-07:00/2010-10-01T11:00:00.000-07:00], [2010-10-01T11:00:00.000-07:00/2010-12-31T16:00:00.000-08:00]]&amp;gt; but was:&amp;lt;[[2010-01-01T00:00:00.000Z/2010-04-02T06:00:00.000Z], [2010-04-02T06:00:00.000Z/2010-07-02T12:00:00.000Z], [2010-07-02T12:00:00.000Z/2010-10-01T18:00:00.000Z], [2010-10-01T18:00:00.000Z/2011-01-01T00:00:00.000Z]]&amp;gt;	at org.apache.hadoop.hive.druid.TestHiveDruidQueryBasedInputFormat.testCreateSplitsIntervals(TestHiveDruidQueryBasedInputFormat.java:54)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Seems offset by 7-8 hours.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016274">HIVE-15095</key>
            <summary>TestHiveDruidQueryBasedInputFormat.testCreateSplitsIntervals fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcamachorodriguez">Jesus Camacho Rodriguez</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 21:16:57 +0000</created>
                <updated>Wed, 26 Jul 2017 00:02:46 +0000</updated>
                            <resolved>Sat, 29 Oct 2016 00:22:29 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15616616" author="sershe" created="Fri, 28 Oct 2016 21:18:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcamachorodriguez&quot; class=&quot;user-hover&quot; rel=&quot;jcamachorodriguez&quot;&gt;Jesus Camacho Rodriguez&lt;/a&gt; fyi&lt;/p&gt;</comment>
                            <comment id="15617039" author="sershe" created="Sat, 29 Oct 2016 00:20:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15617044" author="jcamachorodriguez" created="Sat, 29 Oct 2016 00:21:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;, forgot to add a file to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15046&quot; title=&quot;Multiple fixes for Druid handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15046&quot;&gt;&lt;del&gt;HIVE-15046&lt;/del&gt;&lt;/a&gt; addendum; I am pushing the fix since it is only test changes.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835926" name="HIVE-15095.patch" size="7723" author="jcamachorodriguez" created="Sat, 29 Oct 2016 00:19:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Oct 2016 00:21:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35kdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15096] hplsql registerUDF conflicts with pom.xml</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15096</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;in hplsql code, registerUDF code is&lt;/p&gt;

&lt;p&gt;    sql.add(&quot;ADD JAR &quot; + dir + &quot;hplsql.jar&quot;);&lt;br/&gt;
    sql.add(&quot;ADD JAR &quot; + dir + &quot;antlr-runtime-4.5.jar&quot;);&lt;br/&gt;
    sql.add(&quot;ADD FILE &quot; + dir + Conf.SITE_XML);&lt;/p&gt;

&lt;p&gt;but pom configufation is&lt;/p&gt;

&lt;p&gt;  &amp;lt;parent&amp;gt;&lt;br/&gt;
    &amp;lt;groupId&amp;gt;org.apache.hive&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    &amp;lt;artifactId&amp;gt;hive&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    &amp;lt;version&amp;gt;2.2.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
    &amp;lt;relativePath&amp;gt;../pom.xml&amp;lt;/relativePath&amp;gt;&lt;br/&gt;
  &amp;lt;/parent&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;artifactId&amp;gt;hive-hplsql&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;&lt;br/&gt;
  &amp;lt;name&amp;gt;Hive HPL/SQL&amp;lt;/name&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;dependency&amp;gt;&lt;br/&gt;
       &amp;lt;groupId&amp;gt;org.antlr&amp;lt;/groupId&amp;gt;&lt;br/&gt;
       &amp;lt;artifactId&amp;gt;antlr4-runtime&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
       &amp;lt;version&amp;gt;4.5&amp;lt;/version&amp;gt;&lt;br/&gt;
    &amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;when run hplsql , errors occur as below&lt;/p&gt;

&lt;p&gt; Error while processing statement: /opt/apps/apache-hive-2.0.0-bin/lib/hplsql.jar does not exist&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016317">HIVE-15096</key>
            <summary>hplsql registerUDF conflicts with pom.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ferhui">Fei Hui</assignee>
                                    <reporter username="ferhui">Fei Hui</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Oct 2016 03:00:20 +0000</created>
                <updated>Fri, 21 Jul 2017 18:26:26 +0000</updated>
                            <resolved>Sun, 13 Nov 2016 03:17:53 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.1</version>
                    <version>2.1.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>hpl/sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15617288" author="ferhui" created="Sat, 29 Oct 2016 03:02:58 +0000"  >&lt;p&gt;diff --git a/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java b/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java&lt;br/&gt;
index 6da4f5b..1e14361 100644&lt;br/&gt;
&amp;#8212; a/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java&lt;br/&gt;
+++ b/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java&lt;br/&gt;
@@ -615,9 +615,13 @@ public void registerUdf() {&lt;br/&gt;
     }&lt;br/&gt;
     ArrayList&amp;lt;String&amp;gt; sql = new ArrayList&amp;lt;String&amp;gt;();&lt;br/&gt;
     String dir = Utils.getExecDir();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sql.add(&quot;ADD JAR &quot; + dir + &quot;hplsql.jar&quot;);&lt;/li&gt;
	&lt;li&gt;sql.add(&quot;ADD JAR &quot; + dir + &quot;antlr-runtime-4.5.jar&quot;);&lt;/li&gt;
	&lt;li&gt;sql.add(&quot;ADD FILE &quot; + dir + Conf.SITE_XML);&lt;br/&gt;
+    sql.add(&quot;ADD JAR &quot; + dir + &quot;hive-hplsql-2.2.0-SNAPSHOT.jar&quot;);&lt;br/&gt;
+    sql.add(&quot;ADD JAR &quot; + dir + &quot;antlr4-runtime-4.5.jar&quot;);&lt;br/&gt;
+    if(!conf.getLocation().equals(&quot;&quot;)) 
{
+      sql.add(&quot;ADD FILE &quot; + conf.getLocation());
+    }
&lt;p&gt; else &lt;/p&gt;
{
+      sql.add(&quot;ADD FILE &quot; + dir + Conf.SITE_XML);
+    }
&lt;p&gt;     if (dotHplsqlrcExists) &lt;/p&gt;
{
       sql.add(&quot;ADD FILE &quot; + dir + Conf.DOT_HPLSQLRC);
     }&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15617292" author="ferhui" created="Sat, 29 Oct 2016 03:05:08 +0000"  >&lt;p&gt;anyone review it&#65311;&lt;/p&gt;</comment>
                            <comment id="15621151" author="ferhui" created="Mon, 31 Oct 2016 04:02:42 +0000"  >&lt;p&gt;fix hpl/sql registerUDF,consistent with pom.xml&lt;/p&gt;</comment>
                            <comment id="15621397" author="ferd" created="Mon, 31 Oct 2016 06:21:47 +0000"  >&lt;p&gt;LGTM +1 pending to the test.&lt;/p&gt;</comment>
                            <comment id="15621622" author="dmtolpeko" created="Mon, 31 Oct 2016 08:39:25 +0000"  >&lt;p&gt;-1 why to hardcode the version???? hive-hplsql-2.2.0-SNAPSHOT.jar &lt;br/&gt;
you will need to change this file with every Hive realease.&lt;/p&gt;</comment>
                            <comment id="15624106" author="ferhui" created="Tue, 1 Nov 2016 02:29:55 +0000"  >&lt;p&gt;there is no hplsql.jar with hive release. users don&apos;t know how to  change this file if they have no source code&lt;/p&gt;</comment>
                            <comment id="15624446" author="ferhui" created="Tue, 1 Nov 2016 05:41:09 +0000"  >&lt;p&gt;update the patch, remove the hardcode version 2.2.0-SNAPSHOT.&lt;br/&gt;
can you review it again? give suggestions&lt;/p&gt;</comment>
                            <comment id="15624802" author="dmtolpeko" created="Tue, 1 Nov 2016 08:43:59 +0000"  >&lt;p&gt;+1 looks good, thanks.&lt;/p&gt;</comment>
                            <comment id="15658954" author="ferhui" created="Sat, 12 Nov 2016 04:07:27 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt; . could you please commit this patch to master branch?&lt;/p&gt;</comment>
                            <comment id="15660745" author="ferd" created="Sun, 13 Nov 2016 03:17:54 +0000"  >&lt;p&gt;Committed to the master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ferhui&quot; class=&quot;user-hover&quot; rel=&quot;ferhui&quot;&gt;Fei Hui&lt;/a&gt; for the contribution and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt; for the review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836285" name="HIVE-15096.1.patch" size="1170" author="ferhui" created="Tue, 1 Nov 2016 05:32:23 +0000"/>
                            <attachment id="12836110" name="HIVE-15096.patch" size="949" author="ferhui" created="Mon, 31 Oct 2016 04:02:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Oct 2016 06:21:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35knb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15097] Error: java.lang.RuntimeException: Error in configuring object  Caused by: java.lang.OutOfMemoryError: GC overhead limit exceeded</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15097</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive&amp;gt; CREATE TABLE user_tag_pre AS &lt;br/&gt;
    &amp;gt; SELECT A.userid , A.tag , A.single_tag_sumcount/B.sum_tag_sumcount_avg as pre&lt;br/&gt;
    &amp;gt; FROM  user_tag_sumcount A , user_tag_avg B&lt;br/&gt;
    &amp;gt; WHERE A.userid = B.userid;&lt;br/&gt;
Query ID = ubuntu_20161101091124_753d511e-c7b8-4d31-bf97-cf0c04203ddc&lt;br/&gt;
Total jobs = 1&lt;br/&gt;
Execution log at: /tmp/ubuntu/ubuntu_20161101091124_753d511e-c7b8-4d31-bf97-cf0c04203ddc.log&lt;br/&gt;
2016-11-01 09:11:28     Starting to launch local task to process map join;      maximum memory = 477626368&lt;br/&gt;
2016-11-01 09:11:30     Processing rows:        200000  Hashtable size: 199999  Memory usage:   106513696       percentage:     0.223&lt;br/&gt;
2016-11-01 09:11:31     Processing rows:        300000  Hashtable size: 299999  Memory usage:   92688064        percentage:     0.194&lt;br/&gt;
2016-11-01 09:11:31     Processing rows:        400000  Hashtable size: 399999  Memory usage:   152547912       percentage:     0.319&lt;br/&gt;
2016-11-01 09:11:31     Processing rows:        500000  Hashtable size: 499999  Memory usage:   149501320       percentage:     0.313&lt;br/&gt;
2016-11-01 09:11:32     Processing rows:        600000  Hashtable size: 599999  Memory usage:   170749448       percentage:     0.357&lt;br/&gt;
2016-11-01 09:11:32     Dump the side-table for tag: 1 with group count: 675226 into file: &lt;a href=&quot;file:/tmp/ubuntu/9b365431-aea2-41fa-bebe-602435a22612/hive_2016-11-01_09-11-2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/ubuntu/9b365431-aea2-41fa-bebe-602435a22612/hive_2016-11-01_09-11-2&lt;/a&gt;                             4_333_5456525982690482779-1/&lt;del&gt;local-10003/HashTable-Stage-4/MapJoin-mapfile01&lt;/del&gt;-.hashtable&lt;br/&gt;
2016-11-01 09:11:33     Uploaded 1 File to: &lt;a href=&quot;file:/tmp/ubuntu/9b365431-aea2-41fa-bebe-602435a22612/hive_2016-11-01_09-11-24_333_5456525982690482779-1/-local-10003/HashTa&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/ubuntu/9b365431-aea2-41fa-bebe-602435a22612/hive_2016-11-01_09-11-24_333_5456525982690482779-1/-local-10003/HashTa&lt;/a&gt;                             ble-Stage-4/MapJoin-mapfile01--.hashtable (22302233 bytes)&lt;br/&gt;
2016-11-01 09:11:33     End of local task; Time Taken: 5.334 sec.&lt;br/&gt;
Execution completed successfully&lt;br/&gt;
MapredLocal task succeeded&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks is set to 0 since there&apos;s no reduce operator&lt;br/&gt;
Starting Job = job_1477989556419_0006, Tracking URL = &lt;a href=&quot;http://master:8088/proxy/application_1477989556419_0006/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://master:8088/proxy/application_1477989556419_0006/&lt;/a&gt;&lt;br/&gt;
Kill Command = /home/ubuntu/cloud/hadoop-2.7.2/bin/hadoop job  -kill job_1477989556419_0006&lt;br/&gt;
Hadoop job information for Stage-4: number of mappers: 1; number of reducers: 0&lt;br/&gt;
2016-11-01 09:11:43,429 Stage-4 map = 0%,  reduce = 0%&lt;br/&gt;
2016-11-01 09:12:44,257 Stage-4 map = 0%,  reduce = 0%&lt;br/&gt;
2016-11-01 09:13:44,706 Stage-4 map = 0%,  reduce = 0%&lt;br/&gt;
2016-11-01 09:14:32,819 Stage-4 map = 100%,  reduce = 0%&lt;br/&gt;
Ended Job = job_1477989556419_0006 with errors&lt;br/&gt;
Error during job, obtaining debugging information...&lt;br/&gt;
Examining task ID: task_1477989556419_0006_m_000000 (and more) from job job_1477989556419_0006&lt;/p&gt;

&lt;p&gt;Task with the most failures(4):&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Task ID:&lt;br/&gt;
  task_1477989556419_0006_m_000000&lt;/p&gt;

&lt;p&gt;URL:&lt;br/&gt;
  &lt;a href=&quot;http://master:8088/taskdetails.jsp?jobid=job_1477989556419_0006&amp;amp;tipid=task_1477989556419_0006_m_000000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://master:8088/taskdetails.jsp?jobid=job_1477989556419_0006&amp;amp;tipid=task_1477989556419_0006_m_000000&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Diagnostic Messages for this Task:&lt;br/&gt;
Error: java.lang.RuntimeException: Error in configuring object&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:112)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:78)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:136)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:449)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)&lt;br/&gt;
        at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:164)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.Subject.doAs(Subject.java:422)&lt;br/&gt;
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657)&lt;br/&gt;
        at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158)&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)&lt;br/&gt;
        ... 9 more&lt;br/&gt;
Caused by: java.lang.RuntimeException: Error in configuring object&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:112)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:78)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:136)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:38)&lt;br/&gt;
        ... 14 more&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)&lt;br/&gt;
        ... 17 more&lt;br/&gt;
Caused by: java.lang.OutOfMemoryError: GC overhead limit exceeded&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.persistence.MapJoinTableContainerSerDe.load(MapJoinTableContainerSerDe.java:82)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.mr.HashTableLoader.load(HashTableLoader.java:98)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator.loadHashTable(MapJoinOperator.java:288)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator$1.call(MapJoinOperator.java:173)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator$1.call(MapJoinOperator.java:169)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.mr.ObjectCache.retrieve(ObjectCache.java:55)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.mr.ObjectCache.retrieveAsync(ObjectCache.java:63)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator.initializeOp(MapJoinOperator.java:166)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:362)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:481)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:438)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:375)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:131)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:78)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:136)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:38)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:78)&lt;br/&gt;
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:136)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:449)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)&lt;br/&gt;
        at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:164)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;/p&gt;


&lt;p&gt;FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.mr.MapRedTask&lt;br/&gt;
MapReduce Jobs Launched:&lt;br/&gt;
Stage-Stage-4: Map: 1   HDFS Read: 0 HDFS Write: 0 FAIL&lt;br/&gt;
Total MapReduce CPU Time Spent: 0 msec&lt;/p&gt;


&lt;p&gt;How can I solve it ? Need  help!!!&lt;/p&gt;</description>
                <environment>&lt;p&gt;hive 1.2.1&lt;/p&gt;</environment>
        <key id="13016611">HIVE-15097</key>
            <summary>Error: java.lang.RuntimeException: Error in configuring object  Caused by: java.lang.OutOfMemoryError: GC overhead limit exceeded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="CLJ0918">chen cong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Oct 2016 14:11:56 +0000</created>
                <updated>Fri, 25 May 2018 09:37:44 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16490475" author="fanfan" created="Fri, 25 May 2018 09:37:44 +0000"  >&lt;p&gt;turn off map join will make your query normal!!!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;hive.auto.convert.join=false&lt;/p&gt;

&lt;p&gt;hive.ignore.mapjoin.hint=false&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 May 2018 09:37:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35mgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>HIVE   ERROE</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15098] SELECT DISTINCT w/o CBO produces incorrect results</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15098</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For the following simple (yet nonsense) query:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT  DISTINCT 
    UNIX_TIMESTAMP(&lt;span class=&quot;code-quote&quot;&gt;&apos;2016-10-02&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-mm-dd&apos;&lt;/span&gt;) AS col1,
    UNIX_TIMESTAMP(&lt;span class=&quot;code-quote&quot;&gt;&apos;2016-10-02&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-MM-dd&apos;&lt;/span&gt;) AS col2
FROM 
    &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.dummy;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With CBO, this generate correct results:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+-------------+-------------+
|    col1     |    col2     |
+-------------+-------------+
| 1451722200  | 1475391600  |
+-------------+-------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, if CBO is turned off, the result no longer make sense:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+-------+-------+
| col1  | col2  |
+-------+-------+
| NULL  | NULL  |
+-------+-------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13016677">HIVE-15098</key>
            <summary>SELECT DISTINCT w/o CBO produces incorrect results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="csun">Chao Sun</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Oct 2016 18:00:39 +0000</created>
                <updated>Mon, 31 Oct 2016 18:01:19 +0000</updated>
                                                                            <component>Query Planning</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35mvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15099] PTFOperator.PTFInvocation didn&apos;t properly reset the input partition</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15099</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There is an issue with PTFOperator.PTFInvocation where the inputPart is not reset properly. The inputPart has been closed and its content (member variables) has been cleaned up, but since itself is not nullified, it&apos;s reused in the next round and caused NPE issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016681">HIVE-15099</key>
            <summary>PTFOperator.PTFInvocation didn&apos;t properly reset the input partition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wzheng">Wei Zheng</assignee>
                                    <reporter username="wzheng">Wei Zheng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Oct 2016 18:07:29 +0000</created>
                <updated>Thu, 8 Dec 2016 14:10:10 +0000</updated>
                            <resolved>Tue, 1 Nov 2016 00:36:28 +0000</resolved>
                                    <version>1.3.0</version>
                    <version>1.2.1</version>
                    <version>2.1.0</version>
                    <version>2.2.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>Hive</component>
                    <component>PTF-Windowing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15622899" author="wzheng" created="Mon, 31 Oct 2016 18:08:18 +0000"  >&lt;p&gt;Sample query that can reproduce the issue&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT 1
FROM ( 
  SELECT   a,
           b, 
           row_number() OVER ( partition BY a ORDER BY c DESC ) AS rank
  FROM     t1) x 
JOIN 
 ( 
  SELECT   a, 
           row_number() OVER ( partition BY a ORDER BY c DESC ) AS rank
  FROM     t2) y 
ON y.a=x.a
LEFT OUTER JOIN 
 ( 
  SELECT   a, 
           row_number() OVER ( partition BY a ORDER BY c DESC ) AS rank
  FROM     t3) z
ON y.a=z.a
WHERE x.rank = 1 
AND y.rank=1 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15623153" author="hiveqa" created="Mon, 31 Oct 2016 19:44:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836191/HIVE-15099.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836191/HIVE-15099.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 10627 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1888/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1888/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1888/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1888/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1888/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1888/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836191 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15623430" author="wzheng" created="Mon, 31 Oct 2016 21:09:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Can you take a look please?&lt;/p&gt;</comment>
                            <comment id="15623742" author="ashutoshc" created="Mon, 31 Oct 2016 23:13:23 +0000"  >&lt;p&gt;Patch looks good to me. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzheng&quot; class=&quot;user-hover&quot; rel=&quot;wzheng&quot;&gt;Wei Zheng&lt;/a&gt; Can you add a test case for it as well?&lt;/p&gt;</comment>
                            <comment id="15623868" author="wzheng" created="Tue, 1 Nov 2016 00:11:56 +0000"  >&lt;p&gt;The problematic plan can only be reproduced with specific environment and dataset&lt;/p&gt;</comment>
                            <comment id="15623870" author="ashutoshc" created="Tue, 1 Nov 2016 00:12:14 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15623912" author="wzheng" created="Tue, 1 Nov 2016 00:36:29 +0000"  >&lt;p&gt;Committed to master, branch-2.1 and branch-1. Thanks Ashutosh for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836191" name="HIVE-15099.1.patch" size="537" author="wzheng" created="Mon, 31 Oct 2016 18:14:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Oct 2016 19:44:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35mw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12332154</customfieldvalue>
    <customfieldvalue>12335838</customfieldvalue>
    <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15100] HiveSQLException: Invalid OperationHandle: OperationHandle [opType=EXECUTE_STATEMENT, getHandleIdentifier</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15100</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I am using hue + hiveserver2. &lt;br/&gt;
First I execute sql through Hue, this can be done correctly. But when I export the result as csv file or excel file, an exception will appear in hiveserver2.log:&lt;/p&gt;

&lt;p&gt;2016-11-01 14:54:11,622 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;HiveServer2-Handler-Pool: Thread-47&amp;#93;&lt;/span&gt;: thrift.ThriftCLIService (ThriftCLIService.java:FetchResults(681)) - Error fetching results: &lt;br/&gt;
org.apache.hive.service.cli.HiveSQLException: Invalid OperationHandle: OperationHandle &lt;span class=&quot;error&quot;&gt;&amp;#91;opType=EXECUTE_STATEMENT, getHandleIdentifier()=feb55386-72f0-445c-9774-dd8780acf442&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.hive.service.cli.operation.OperationManager.getOperation(OperationManager.java:154)&lt;br/&gt;
	at org.apache.hive.service.cli.CLIService.fetchResults(CLIService.java:456)&lt;br/&gt;
	at org.apache.hive.service.cli.thrift.ThriftCLIService.FetchResults(ThriftCLIService.java:672)&lt;br/&gt;
	at org.apache.hive.service.cli.thrift.TCLIService$Processor$FetchResults.getResult(TCLIService.java:1557)&lt;br/&gt;
	at org.apache.hive.service.cli.thrift.TCLIService$Processor$FetchResults.getResult(TCLIService.java:1542)&lt;br/&gt;
	at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)&lt;br/&gt;
	at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)&lt;br/&gt;
	at org.apache.hive.service.auth.TSetIpAddressProcessor.process(TSetIpAddressProcessor.java:56)&lt;br/&gt;
	at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:285)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;


&lt;p&gt;I add a few session related configurations:&lt;/p&gt;

&lt;p&gt;hive.server2.idle.operatoin.timeout = 1 day&lt;br/&gt;
hive.server2.idle.session.timeout = 3 days&lt;br/&gt;
hive.server2.session.check.interval = 1 hour&lt;/p&gt;

&lt;p&gt;And my operations log config like this:&lt;/p&gt;

&lt;p&gt;hive.server2.loggging.operation.enabled=true&lt;br/&gt;
hive.server2.loggging.operation.log.location=/tmp/hive/operation_logs&lt;/p&gt;


&lt;p&gt;I try to remove all files in my operation_logs dir(/tmp/hive/operation_logs)&#65292; and clean all session data in hue tables(beeswax_session, django_session), then restart hiveserver2 and hue. But nothing getting better..&lt;/p&gt;

&lt;p&gt;Begging for ur help~&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016817">HIVE-15100</key>
            <summary>HiveSQLException: Invalid OperationHandle: OperationHandle [opType=EXECUTE_STATEMENT, getHandleIdentifier</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="WillCup">Will Chen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 06:53:15 +0000</created>
                <updated>Fri, 18 Nov 2016 03:53:06 +0000</updated>
                                            <version>1.2.1</version>
                                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15644462" author="andybraslavskiy" created="Mon, 7 Nov 2016 15:21:57 +0000"  >&lt;p&gt;I have the same exceptions, when doing any interactions from Hue to Hive.&lt;br/&gt;
This problems I have only on kerberised cluster, with Hadoop in Classic mode, and Hue 3.10.&lt;br/&gt;
But, everything works fine with Hue 3.9 / non kerberised cluster / Hadoop in YARN mode.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=WillCup&quot; class=&quot;user-hover&quot; rel=&quot;WillCup&quot;&gt;Will Chen&lt;/a&gt;, can you provide any details, of your configuration?&lt;/p&gt;</comment>
                            <comment id="15647510" author="andybraslavskiy" created="Tue, 8 Nov 2016 13:03:08 +0000"  >&lt;p&gt;This problem may be related to Hue.&lt;/p&gt;

&lt;p&gt;I found hack in Hortonworks community: &lt;a href=&quot;https://community.hortonworks.com/answers/51998/view.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://community.hortonworks.com/answers/51998/view.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;By doing some research, I&apos;ve found that in sasl library that is used in Hue for working with Kerberos, there is buffer with default size equals to 65535 bytes.&lt;br/&gt;
But sometimes, Hive produces more than 64 kilobytes of data (i.e. for query &quot;SET -v&quot;).&lt;br/&gt;
So this problem may be caused by buffer overflow in sasl library.&lt;/p&gt;

&lt;p&gt;For me this problem was fixed by modifying desktop/core/src/desktop/lib/thrift_util.py.&lt;br/&gt;
Inside function&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;def connect_to_thrift(conf):&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;after saslc creation&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;saslc = sasl.Client()&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;i&apos;ve added&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;saslc.setAttr(&quot;maxbufsize&quot;, 2**17 - 1)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15675650" author="willcup" created="Fri, 18 Nov 2016 03:53:06 +0000"  >&lt;p&gt;Thanks for ur attention. &lt;/p&gt;

&lt;p&gt;I think you are right : this is not related to hiveserver, but hue. I did nothing but rebuild hue, and deploy hue on another host, then everything works fine.....&lt;/p&gt;


&lt;p&gt;I don&apos;t know the exact reason for now, but not ur Kerberos problem.&lt;/p&gt;

&lt;p&gt;Thanks for your suggestion&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Nov 2016 15:21:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35nq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15101] Spark client process can be stuck when UNHEALTHY NodeManager exists</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15101</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a Hive-on-Spark job is executed on YARN environment where UNHEALTHY NodeManager exists, Spark client can be stuck in RUNNING state.&lt;/p&gt;

&lt;p&gt;thread dump:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;008ee7b6-b083-4ac9-ae1c-b6097d9bf761 main&quot;&lt;/span&gt; #1 prio=5 os_prio=0 tid=0x00007f14f4013800 nid=0x3855 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007f14fd9b1000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000f6615550&amp;gt; (a io.netty.util.concurrent.DefaultPromise)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:502)
	at io.netty.util.concurrent.DefaultPromise.await(DefaultPromise.java:254)
	- locked &amp;lt;0x00000000f6615550&amp;gt; (a io.netty.util.concurrent.DefaultPromise)
	at io.netty.util.concurrent.DefaultPromise.await(DefaultPromise.java:32)
	at io.netty.util.concurrent.AbstractFuture.get(AbstractFuture.java:31)
	at org.apache.hive.spark.client.SparkClientImpl.&amp;lt;init&amp;gt;(SparkClientImpl.java:104)
	at org.apache.hive.spark.client.SparkClientFactory.createClient(SparkClientFactory.java:80)
	- locked &amp;lt;0x00000000f21b8e08&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; org.apache.hive.spark.client.SparkClientFactory)
	at org.apache.hadoop.hive.ql.exec.spark.RemoteHiveSparkClient.createRemoteClient(RemoteHiveSparkClient.java:99)
	at org.apache.hadoop.hive.ql.exec.spark.RemoteHiveSparkClient.&amp;lt;init&amp;gt;(RemoteHiveSparkClient.java:95)
	at org.apache.hadoop.hive.ql.exec.spark.HiveSparkClientFactory.createHiveSparkClient(HiveSparkClientFactory.java:67)
	at org.apache.hadoop.hive.ql.exec.spark.session.SparkSessionImpl.open(SparkSessionImpl.java:62)
	at org.apache.hadoop.hive.ql.exec.spark.session.SparkSessionManagerImpl.getSession(SparkSessionManagerImpl.java:114)
	at org.apache.hadoop.hive.ql.exec.spark.SparkUtilities.getSparkSession(SparkUtilities.java:136)
	at org.apache.hadoop.hive.ql.exec.spark.SparkTask.execute(SparkTask.java:89)
	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:197)
	at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:100)
	at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1858)
	at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1562)
	at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1313)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1084)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1072)
	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:232)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:183)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:399)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:335)
	at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:742)
	at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:714)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:641)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.hadoop.util.RunJar.run(RunJar.java:239)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:153)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Hive 2.1.0&lt;br/&gt;
Spark 1.6.2&lt;/p&gt;</environment>
        <key id="13016901">HIVE-15101</key>
            <summary>Spark client process can be stuck when UNHEALTHY NodeManager exists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="iijima_satoshi">Satoshi Iijima</assignee>
                                    <reporter username="iijima_satoshi">Satoshi Iijima</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 13:52:10 +0000</created>
                <updated>Wed, 7 Jun 2017 05:05:04 +0000</updated>
                                            <version>2.0.0</version>
                    <version>2.1.0</version>
                                                    <component>Spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15625526" author="ferd" created="Tue, 1 Nov 2016 14:12:44 +0000"  >&lt;p&gt;What&apos;s Spark version and Hive version you&apos;re using? Can you also attach node manager related log as well? Thank you!&lt;/p&gt;</comment>
                            <comment id="15628706" author="iijima_satoshi" created="Wed, 2 Nov 2016 11:46:53 +0000"  >&lt;p&gt;I have added version info to environment and attached node manager log.&lt;/p&gt;</comment>
                            <comment id="15629148" author="ferd" created="Wed, 2 Nov 2016 14:35:09 +0000"  >&lt;p&gt;Thank you for attaching the log. Looks like container is exiting with error. Can you also attach application log as well? Thank you!&lt;/p&gt;</comment>
                            <comment id="15631069" author="lirui" created="Thu, 3 Nov 2016 00:49:14 +0000"  >&lt;p&gt;Maybe RemoteDriver&apos;s log is more useful. For yarn-client, you should find it in hive.log on the node which runs the query. For yarn-cluster, it&apos;s in the AM log - usually the 1st container of the application.&lt;/p&gt;</comment>
                            <comment id="15635874" author="iijima_satoshi" created="Fri, 4 Nov 2016 10:02:54 +0000"  >&lt;p&gt;I have attached hive.log.&lt;br/&gt;
Although I have confirmed this issue again, container has exited with error not RUNNING state, but the hive process on client server has still remained forever.&lt;br/&gt;
I&apos;m sorry that the subject and description were not correct.&lt;/p&gt;</comment>
                            <comment id="15635882" author="iijima_satoshi" created="Fri, 4 Nov 2016 10:06:08 +0000"  >&lt;p&gt;I have attached a patch that set timeout to future.get().&lt;br/&gt;
Applying this patch, hive process has not been stuck and has come to exit.&lt;/p&gt;</comment>
                            <comment id="15643327" author="hiveqa" created="Mon, 7 Nov 2016 07:00:43 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837090/HIVE-15101.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837090/HIVE-15101.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10628 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=272)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1994/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1994/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1994/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1994/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1994/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1994/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837090 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15643390" author="iijima_satoshi" created="Mon, 7 Nov 2016 07:34:29 +0000"  >&lt;p&gt;This patch does not cause these test errors because these errors have existed in the previous PreCommit-HIVE-Build.&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1991/#showFailuresLink&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1991/#showFailuresLink&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15644257" author="ferd" created="Mon, 7 Nov 2016 14:06:49 +0000"  >&lt;p&gt;Thank you for the contribution. LGTM +1. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, do you have any further comments? &lt;/p&gt;</comment>
                            <comment id="15644300" author="lirui" created="Mon, 7 Nov 2016 14:21:01 +0000"  >&lt;p&gt;The comments state that RPC server will take care of timeout. If it&apos;s not working as expected, I think we&apos;d better find out why.&lt;/p&gt;</comment>
                            <comment id="15652934" author="tzenmyo" created="Thu, 10 Nov 2016 03:50:45 +0000"  >&lt;p&gt;I have encountered the same issue on a testing environment without UNHEALTHY nodes (all of the nodes had been active).&lt;br/&gt;
I found that spark-submit.sh had failed due to resource shortage (spark.driver.memory &amp;gt; yarn.scheduler.maximum-allocation-mb).&lt;br/&gt;
The server-side timeout seems to not work in case of failures on spark-submit.sh and the patch introducing client-side timeout would make it safer.&lt;/p&gt;</comment>
                            <comment id="15653187" author="lirui" created="Thu, 10 Nov 2016 06:28:28 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzenmyo&quot; class=&quot;user-hover&quot; rel=&quot;tzenmyo&quot;&gt;Teruyoshi Zenmyo&lt;/a&gt;, thanks for your input. I&apos;ll try your scenario and see what I can find.&lt;/p&gt;

&lt;p&gt;We already take care of timeout in the Rpc code. Adding another timeout as in the patch may be no harm, but we should at least figure out why the existing logic doesn&apos;t work as expected.&lt;/p&gt;</comment>
                            <comment id="16038869" author="hiveqa" created="Tue, 6 Jun 2017 13:20:36 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12837090/HIVE-15101.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12837090/HIVE-15101.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10820 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query78] (batchId=232)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5547/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5547/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5547/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5547/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5547/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5547/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12837090 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12837090" name="HIVE-15101.patch" size="1724" author="iijima_satoshi" created="Fri, 4 Nov 2016 10:05:10 +0000"/>
                            <attachment id="12836546" name="hadoop-yarn-nodemanager.log" size="775551" author="iijima_satoshi" created="Wed, 2 Nov 2016 11:46:15 +0000"/>
                            <attachment id="12837088" name="hive.log.gz" size="234056" author="iijima_satoshi" created="Fri, 4 Nov 2016 10:02:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Nov 2016 14:12:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35o8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15102] Hiveptest is killing nodes where IP is reused after previous node termination</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15102</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;NO PRECOMMIT TESTS&lt;/p&gt;

&lt;p&gt;The Hiveptest framework has a background thread that runs every hour, and attempts to kill zombie nodes that are not being used by the test execution anymore. &lt;/p&gt;

&lt;p&gt;These killed nodes are kept in a list of terminated nodes, and next time the background thread is executed, it will attempt to kill all those nodes again because Hiveptest consider them as zombie nodes.&lt;/p&gt;

&lt;p&gt;The problem is that cloud providers can give you the same IP numbers for new nodes, and when the background thread runs, it will kill those nodes that may still be in used by Hiveptest.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016925">HIVE-15102</key>
            <summary>Hiveptest is killing nodes where IP is reused after previous node termination</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="spena">Sergio Pe&#241;a</assignee>
                                    <reporter username="spena">Sergio Pe&#241;a</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 15:32:07 +0000</created>
                <updated>Thu, 4 Jan 2018 16:34:39 +0000</updated>
                            <resolved>Thu, 4 Jan 2018 16:34:21 +0000</resolved>
                                    <version>2.2.0</version>
                                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15625786" author="spena" created="Tue, 1 Nov 2016 15:58:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;Siddharth Seth&lt;/a&gt; Could you do a quick review?&lt;/p&gt;

&lt;p&gt;The patch contains:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;New test case to verify new nodes with resued IPs are not destroyed by performing the background check (see TestCloudExecutionContextProvider)&lt;/li&gt;
	&lt;li&gt;Remove the destroyed node from the terminatedHosts set (See CloudExecutionContextProvider)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15625799" author="ferd" created="Tue, 1 Nov 2016 15:59:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;, thank you for working on this. Is this the root cause for recent failures in precommit&#65311;&lt;/p&gt;</comment>
                            <comment id="15625821" author="spena" created="Tue, 1 Nov 2016 16:07:00 +0000"  >&lt;p&gt;It could be. This is one of 2 issues found. The other is due to a possible thread leak on tomcat. However, the thread leak has been there for a while without causing other issues. I need to dig more on this one, and try to reproduce it.&lt;/p&gt;

&lt;p&gt;For more context, we recently moved the ptest server from Amazon to Google Compute. Amazon was giving us different IPs all the time, but GCE is giving us only IPs on the range of 10.0.0.x; so only 255 possible values, and reusing those is happening too often.&lt;/p&gt;</comment>
                            <comment id="15625874" author="spena" created="Tue, 1 Nov 2016 16:26:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; Could you take a look at this patch? We moved ptest from AWS to GCE, and I started seeing ptest killing nodes that are still in use.&lt;/p&gt;</comment>
                            <comment id="15626046" author="szehon" created="Tue, 1 Nov 2016 17:18:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I think Brock wrote this original code so he might know more, but yes it does look like a bug to me.  Only small comment is, you can annotate this method with @VisibleForTesting annotation.&lt;/p&gt;</comment>
                            <comment id="15626080" author="sseth" created="Tue, 1 Nov 2016 17:30:54 +0000"  >&lt;p&gt;Looks like performBackgroundWork is meant to clean up nodes for which previous destroy invocations may have failed. If we&apos;re committing this change, that entire thread can be removed. Also the tracking variable mTerminatedHosts.&lt;/p&gt;

&lt;p&gt;The intent of the background work could be achieved by ensuring IPs in mTerminatedHosts don&apos;t exist in the live host list (mLiveHosts).&lt;/p&gt;</comment>
                            <comment id="16259726" author="ashutoshc" created="Mon, 20 Nov 2017 19:34:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; Any reason to not commit this? I think we might be hitting this again.&lt;/p&gt;</comment>
                            <comment id="16261005" author="spena" created="Tue, 21 Nov 2017 16:34:52 +0000"  >&lt;p&gt;This is not an issue anymore. I thought it was killing nodes with the same IP that weren&apos;t part of Hive ptest, but during my tests and more understanding of the code I found that Hive ptest was getting those IPs related only to Hive ptest labels, so this is not an issue.&lt;/p&gt;

&lt;p&gt;I will close the jira.&lt;/p&gt;</comment>
                            <comment id="16261008" author="spena" created="Tue, 21 Nov 2017 16:35:30 +0000"  >&lt;p&gt;Btw, why do you think we are hitting this issue again? If so, then maybe this is related? &lt;/p&gt;</comment>
                            <comment id="16261509" author="ashutoshc" created="Tue, 21 Nov 2017 21:26:38 +0000"  >&lt;p&gt;In some of the recent test runs some batches are timing out (ofcourse randomly but rarely). I looked into log of one such failure and found it contains following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2017-11-18T10:30:01,231  WARN [Fetcher_O {Map_1} #0] orderedgrouped.FetcherOrderedGrouped: Failed to connect to hive-ptest-slaves-aff.c.gcp-hive-upstream.internal:0 with 1 inputs
java.io.IOException: Failed to connect to http:&lt;span class=&quot;code-comment&quot;&gt;//hive-ptest-slaves-aff.c.gcp-hive-upstream.internal:0/mapOutput?job=job_1511029513075_0001&amp;amp;dag=203&amp;amp;reduce=0&amp;amp;map=attempt_1511029513075_0001_203_00_000000_0_11576, #connectionFailures=3
&lt;/span&gt;        at org.apache.tez.http.HttpConnection.connect(HttpConnection.java:168) ~[tez-runtime-library-0.9.1-SNAPSHOT.jar:0.9.1-SNAPSHOT]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above suggested to me that some slaves went away in middle of test execution resulting in those time outs.&lt;/p&gt;</comment>
                            <comment id="16310311" author="spena" created="Wed, 3 Jan 2018 21:32:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szita&quot; class=&quot;user-hover&quot; rel=&quot;szita&quot;&gt;Adam Szita&lt;/a&gt; I see you fixed this issue on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-18263&quot; title=&quot;Ptest execution are multiple times slower sometimes due to dying executor slaves&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-18263&quot;&gt;&lt;del&gt;HIVE-18263&lt;/del&gt;&lt;/a&gt;, can I close this issue as duplicate or this issue still exists?&lt;/p&gt;</comment>
                            <comment id="16311079" author="szita" created="Thu, 4 Jan 2018 09:33:28 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;, as I can see it, ptest executions seem to have stabilised, they take around 75 mins. I think this ticket can be closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13124184">HIVE-18263</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12836379" name="HIVE-15102.1.patch" size="9156" author="spena" created="Tue, 1 Nov 2016 15:57:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Nov 2016 15:59:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35oe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15103] Error when inserting into hive table with HBase storage handler</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15103</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Exceptions are returned when executing the following simple insert statement in hive on tez.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;insert into table accounts  select * from temp_account;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where table accounts is a hive external table, stored in hbase:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create external table accounts (key:string, value:string)
stored by &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos;&lt;/span&gt;
with serdeproperties (&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.columns.mapping&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;:key,0:val&quot;&lt;/span&gt;)
tblproperties (&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.table.name&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;accounts_hbase&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.mapred.output.outputtable&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;accounts_hbase&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The SQL could be executed when hive.execution.engine=mr, however, when set hive.execution.engine=tez, we got following error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Status: Failed
Vertex failed, vertexName=Map 1, vertexId=vertex_1475059990829_1927_1_00, diagnostics=[Task failed, taskId=task_1475059990829_1927_1_00_000099, diagnostics=[TaskAttempt 0 failed, info=[Error: Failure &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; running task:java.lang.RuntimeException: java.lang.RuntimeException: Map &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; initialization failed
        at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:173)
        at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:139)
        at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:344)
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable$1.run(TezTaskRunner.java:181)
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable$1.run(TezTaskRunner.java:172)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:422)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1709)
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable.callInternal(TezTaskRunner.java:172)
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable.callInternal(TezTaskRunner.java:168)
        at org.apache.tez.common.CallableWithNdc.call(CallableWithNdc.java:36)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.RuntimeException: Map &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; initialization failed
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.init(MapRecordProcessor.java:265)
        at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:149)
        ... 14 more
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.IllegalArgumentException: Must specify table name
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.createHiveOutputFormat(FileSinkOperator.java:1139)
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.initializeOp(FileSinkOperator.java:346)
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:363)
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:482)
        at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:439)
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:376)
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:482)
        at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:439)
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:376)
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:482)
        at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:439)
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:376)
        at org.apache.hadoop.hive.ql.exec.MapOperator.initializeMapOperator(MapOperator.java:486)
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.init(MapRecordProcessor.java:234)
        ... 15 more
Caused by: java.lang.IllegalArgumentException: Must specify table name
        at org.apache.hadoop.hbase.mapreduce.TableOutputFormat.setConf(TableOutputFormat.java:195)
        at org.apache.hive.common.util.ReflectionUtil.setConf(ReflectionUtil.java:101)
        at org.apache.hive.common.util.ReflectionUtil.newInstance(ReflectionUtil.java:87)
        at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getHiveOutputFormat(HiveFileFormatUtils.java:277)
        at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getHiveOutputFormat(HiveFileFormatUtils.java:267)
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.createHiveOutputFormat(FileSinkOperator.java:1137)
        ... 28 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;HDP 2.4.2 on centos 6.8 x64&lt;/p&gt;</environment>
        <key id="13016823">HIVE-15103</key>
            <summary>Error when inserting into hive table with HBase storage handler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="edward">Edward Chen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 07:41:33 +0000</created>
                <updated>Fri, 11 Nov 2016 20:36:09 +0000</updated>
                                                                                <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="15624667" author="edward" created="Tue, 1 Nov 2016 07:47:45 +0000"  >&lt;p&gt;A similar issue could be found in hive on spark: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10073&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HIVE-10073 &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15625727" author="hitesh" created="Tue, 1 Nov 2016 15:38:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edward&quot; class=&quot;user-hover&quot; rel=&quot;edward&quot;&gt;Edward Chen&lt;/a&gt; I am moving this to the Hive project as this seems like a bug in Hive and not in Tez. &lt;/p&gt;</comment>
                            <comment id="15657800" author="seva_ostapenko" created="Fri, 11 Nov 2016 18:51:11 +0000"  >&lt;p&gt;The same issue can be observed on Hive 1.2 with Tez in HDP 2.5. Property hbase.mapred.output.outputtable is set to the name of the destination HBase table.&lt;/p&gt;

&lt;p&gt;Hive with MR execution engine works as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Nov 2016 15:38:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35nrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15104] Hive on Spark generate more shuffle data than hive on mr</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15104</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;the same sql,  running on spark  and mr engine, will generate different size of shuffle data.&lt;/p&gt;

&lt;p&gt;i think it is because of hive on mr just serialize part of HiveKey, but hive on spark which using kryo will serialize full of Hivekey object.  &lt;/p&gt;

&lt;p&gt;what is your opionion?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016935">HIVE-15104</key>
            <summary>Hive on Spark generate more shuffle data than hive on mr</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="wenli">wangwenli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 16:08:42 +0000</created>
                <updated>Tue, 22 May 2018 23:58:02 +0000</updated>
                            <resolved>Wed, 25 Oct 2017 03:11:47 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="15626085" author="aihuaxu" created="Tue, 1 Nov 2016 17:32:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wenli&quot; class=&quot;user-hover&quot; rel=&quot;wenli&quot;&gt;wangwenli&lt;/a&gt; Can you give an example that I can run and compare? &lt;/p&gt;</comment>
                            <comment id="15627812" author="wenli" created="Wed, 2 Nov 2016 05:34:40 +0000"  >&lt;p&gt;try select count(distinct col1), count (distinct col2) from table,   and see the statistic for shuffle data size.&lt;/p&gt;

&lt;p&gt;if you cann&apos;t reproduce, let me know.    i will find one table in tpch, and reproduce , then tell the details step.  &lt;/p&gt;

&lt;p&gt;thank you~&lt;/p&gt;</comment>
                            <comment id="15628605" author="lirui" created="Wed, 2 Nov 2016 11:02:02 +0000"  >&lt;p&gt;Seems MR can just serialize the key as BytesWritable instead of HiveKey. We once hit some problem when only serializing the BytesWritable part. But I think it&apos;s worth investigating whether we can improve.&lt;/p&gt;</comment>
                            <comment id="15630435" author="aihuaxu" created="Wed, 2 Nov 2016 20:48:21 +0000"  >&lt;p&gt;This is changed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8017&quot; title=&quot;Use HiveKey instead of BytesWritable as key type of the pair RDD [Spark Branch]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8017&quot;&gt;&lt;del&gt;HIVE-8017&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt; Do you recall what kind of issues it caused?&lt;/p&gt;</comment>
                            <comment id="15631053" author="lirui" created="Thu, 3 Nov 2016 00:42:47 +0000"  >&lt;p&gt;We need to use HiveKey because it holds the proper hash code to be used for partitioning. MR also uses HiveKey, but in OutputCollector, seems it only serializes the BytesWritable part. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wenli&quot; class=&quot;user-hover&quot; rel=&quot;wenli&quot;&gt;wangwenli&lt;/a&gt;, is this what you mean?&lt;br/&gt;
I suspect we&apos;ll need help from Spark if we want to do something similar.&lt;/p&gt;</comment>
                            <comment id="15631376" author="xuefuz" created="Thu, 3 Nov 2016 03:14:14 +0000"  >&lt;p&gt;This is rather interesting. I know I originally reviewed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8017&quot; title=&quot;Use HiveKey instead of BytesWritable as key type of the pair RDD [Spark Branch]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8017&quot;&gt;&lt;del&gt;HIVE-8017&lt;/del&gt;&lt;/a&gt;, but I didn&apos;t really know why ByteWritable works for MR while we need HiveKey for Spark. Since Spark is stable now, it would be interesting to find out at least why, whether we can optimize or not.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ruili&quot; class=&quot;user-hover&quot; rel=&quot;ruili&quot;&gt;Rui Li&lt;/a&gt;, since you originally discovered the problem, could you revisit the issue? Thanks.&lt;/p&gt;</comment>
                            <comment id="15632244" author="lirui" created="Thu, 3 Nov 2016 09:52:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, here&apos;s what I find so far.&lt;br/&gt;
Firstly, MR uses HiveKey as the &lt;a href=&quot;https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java#L253&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;key type&lt;/a&gt;. So we&apos;re inline with MR. HiveKey extends BytesWritable. I think the main reason we need HiveKey is we don&apos;t want the hash code simply computed from the internal bytes. Instead, we somehow compute the hash code elsewhere and set it into HiveKey.&lt;/p&gt;

&lt;p&gt;During shuffle, MR passes the HiveKey to OutputCollector. OutputCollector computes the proper partition for HiveKey (using the hash code), and uses &lt;a href=&quot;https://github.com/apache/hadoop/blob/release-2.7.2-RC2/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/WritableSerialization.java#L97&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;WritableSerialization&lt;/a&gt; to serialize it. At this point, it&apos;s OK to just serialize the BytesWritable part since the partition has already been figured out.&lt;/p&gt;

&lt;p&gt;On reduce side, WritableSerialization is used again to deserialize input key as HiveKey, then feed it to ExecReducer. Of course at this point, the HiveKey&apos;s hash code is just 0. But it doesn&apos;t matter because it&apos;s not needed any more. And ExecReducer just cast the input key as BytesWritable.&lt;/p&gt;

&lt;p&gt;Therefore, I think whether we can achieve the same depends on how Spark deals with the HiveKey we pass to it. If that&apos;s possible, we can register a custom Serializer for HiveKey and only ser/de the BytesWritable part. Here&apos;re some docs regarding how to do that:&lt;br/&gt;
&lt;a href=&quot;http://spark.apache.org/docs/latest/configuration.html#compression-and-serialization&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;spark.kryo.registrator&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/EsotericSoftware/kryo#registration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;kryo registration&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15632623" author="aihuaxu" created="Thu, 3 Nov 2016 12:44:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt; So what you are saying is, it depends on how spark shuffles the data and whether spark relies on such hashCode to shuffle the data? &lt;/p&gt;</comment>
                            <comment id="15633820" author="xuefuz" created="Thu, 3 Nov 2016 18:52:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, thanks for sharing your findings. Can you confirm that Spark also uses BytesWritable.hashcode() to partition the RS output rows? If this is true, then there is no difference for Spark because the actual object Hive passed to Spark by RS is HiveKey, whose hashcode will be used for partitioning. &lt;/p&gt;

&lt;p&gt;If this is the case, then we should be able to define the output of our map function and reduce function just as &amp;lt;BytesWritable, BytesWritable&amp;gt;, for which we don&apos;t need a custom serializer because we don&apos;t need to declare the type as &amp;lt;HiveKey, BytesWritable&amp;gt;. It seems that there is still a gap in our understanding.&lt;/p&gt;
</comment>
                            <comment id="15634112" author="xuefuz" created="Thu, 3 Nov 2016 20:18:48 +0000"  >&lt;p&gt;I checked the source code and it seems that both Spark (Partitioner.scala) and MapReduce (HashPartitioner.java) calls key.hashCode() to get the partition number.&lt;/p&gt;</comment>
                            <comment id="15634914" author="lirui" created="Fri, 4 Nov 2016 01:48:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, both MR and Spark need HiveKey.hashCode to compute the partition number. HiveKey&apos;s &lt;a href=&quot;https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/io/HiveKey.java#L58&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hashCode&lt;/a&gt; is not computed on demand. Instead it&apos;s a field we set to the HiveKey.&lt;br/&gt;
I think what we need to investigate is, whether the hash code is still needed after the HiveKey is serialized, e.g. Spark somehow deserialize the HiveKey and access the hash code again. If not, we can just ser/de the BytesWritable part of HiveKey because the hash code is not needed any more.&lt;/p&gt;</comment>
                            <comment id="15644296" author="aihuaxu" created="Mon, 7 Nov 2016 14:20:15 +0000"  >&lt;p&gt;I will take a look at Spark to see if it&apos;s needed after it&apos;s serialized.&lt;/p&gt;</comment>
                            <comment id="15960146" author="lirui" created="Fri, 7 Apr 2017 01:45:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;, are you still working on this? If not, do you mind if I take over?&lt;/p&gt;</comment>
                            <comment id="15960801" author="aihuaxu" created="Fri, 7 Apr 2017 13:34:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt; I didn&apos;t have time to work on that . Feel free to take it over. &lt;/p&gt;</comment>
                            <comment id="15998177" author="lirui" created="Fri, 5 May 2017 11:18:29 +0000"  >&lt;p&gt;I looked at the shuffle writers of Spark and none of them seem to need the hashCode/partitionId after the HiveKey is serialized. But I got a problem during implementation. The plan is to implement this Spark trait:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;trait KryoRegistrator {
  def registerClasses(kryo: Kryo): Unit
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then we set this implementing class to &lt;tt&gt;spark.kryo.registrator&lt;/tt&gt;. At runtime, Spark will use reflection to instantiate our class and call its registerClasses to register the optimized SerDe for HiveKey.&lt;br/&gt;
However, Kryo is relocated in Hive. After build, the method signature of our class will actually be:&lt;br/&gt;
&lt;tt&gt;public void registerClasses(org.apache.hive.com.esotericsoftware.kryo.Kryo kryo)&lt;/tt&gt;.&lt;br/&gt;
When Spark calls the method, we get an &lt;tt&gt;AbstractMethodError&lt;/tt&gt;. I suppose this is because the &lt;tt&gt;public void registerClasses(com.esotericsoftware.kryo.Kryo kryo)&lt;/tt&gt; method is not really implemented.&lt;br/&gt;
Does anybody know how this can be resolved?&lt;/p&gt;</comment>
                            <comment id="15998437" author="lirui" created="Fri, 5 May 2017 14:56:28 +0000"  >&lt;p&gt;Tried disabling relocation locally. It does solve the AbstractMethodError. However, seems Spark still needs the hashCode on reducer side. Will dig more ...&lt;/p&gt;</comment>
                            <comment id="16007788" author="lirui" created="Fri, 12 May 2017 08:26:13 +0000"  >&lt;p&gt;Spark needs the hash code on reducer side for the groupBy shuffling. Since groupBy does no ordering, reducer needs to put the shuffled data into a map to combine values by key, thus needing the hash code. We just need to keep the hash code during SerDe if groupBy shuffle is used.&lt;/p&gt;

&lt;p&gt;Upload a PoC patch to demonstrate the idea. It disables kryo relocation which should not be acceptable.&lt;/p&gt;

&lt;p&gt;Also did simple test to see the improvement. The test is to run a query: &lt;tt&gt;select key, count ( * ) from A group by key order by key;&lt;/tt&gt;, where A contains 40000000 records with 20 distinct keys. The measurement is the number of bytes written during shuffle. I tested optimize HiveKey alone, as well as optimize HiveKey and BytesWritable. We can see even for simple classes like BytesWritable, the custom SerDe does better than a generic one.&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Opt(N)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Opt(Y, Key)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Opt(Y, Key + Value)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;GBY(Y)&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2269&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1953&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1699&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;GBY(N)&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2269&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1713&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1460&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="16008107" author="xuefuz" created="Fri, 12 May 2017 13:16:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, great progress! Thanks for keeping up the effort.&lt;/p&gt;

&lt;p&gt;As to Kryo class relocation, I think Hive did that to avoid version difference between Spark and Hive. (git history might confirm this.) I&apos;m concerned that class conflicts might come back if we stop relocating Kryo. Any thoughts?&lt;/p&gt;</comment>
                            <comment id="16008502" author="hiveqa" created="Fri, 12 May 2017 18:10:54 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12867727/HIVE-15104.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12867727/HIVE-15104.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10688 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_3] (batchId=97)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3] (batchId=97)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=89)
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testSparkQuery (batchId=225)
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testTempTable (batchId=225)
org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery (batchId=225)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5226/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5226/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5226/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5226/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5226/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5226/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12867727 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16009026" author="lirui" created="Sat, 13 May 2017 01:34:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, kryo was relocated in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5915&quot; title=&quot;Shade Kryo dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5915&quot;&gt;&lt;del&gt;HIVE-5915&lt;/del&gt;&lt;/a&gt;. So it&apos;s not intended for Spark. Actually, we&apos;re on the same version as Spark-2.0.0: kryo-shaded-3.0.3.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I&apos;m concerned that class conflicts might come back if we stop relocating Kryo&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You&apos;re right. I&apos;m not sure whether it&apos;s a conflict or loading issue, but when I tried to run some TPC-H benchmark, I got a ClassNotFoundException, although the class is there in hive-exec.jar. I&apos;ll see how to workaround this.&lt;/p&gt;

&lt;p&gt;BTW, the test in my last comment shuffles very little data. That&apos;s why optimizing the overhead can have a significant improvement. I guess this won&apos;t be the case in real world query. That&apos;s why I want to run some more serious benchmark.&lt;/p&gt;</comment>
                            <comment id="16010348" author="lirui" created="Mon, 15 May 2017 11:29:43 +0000"  >&lt;p&gt;The CNF is due to how kryo is loaded in &lt;tt&gt;KryoMessageCodec&lt;/tt&gt;. W/ relocation, kryo is in package &lt;tt&gt;org.apache.hive.com.esotericsoftware&lt;/tt&gt;. So it&apos;s loaded from hive-exec.jar. Spark adds hive-exec.jar at runtime with some URL class loader. W/o relocation, we&apos;re using same kryo as Spark. Kryo&apos;s class loader is by default the one that loads it - therefore the AppClassLoader. However, AppClassLoader cannot load classes from hive-exec.jar and thus the CNF.&lt;br/&gt;
To solve it, we can make &lt;tt&gt;KryoMessageCodec&lt;/tt&gt; use the current context loader.&lt;/p&gt;</comment>
                            <comment id="16010433" author="hiveqa" created="Mon, 15 May 2017 12:49:08 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12868055/HIVE-15104.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12868055/HIVE-15104.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10698 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[parquet_ppd_decimal] (batchId=9)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=144)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testConcurrentStatements (batchId=225)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5260/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5260/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5260/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5260/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5260/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12868055 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16017527" author="hiveqa" created="Fri, 19 May 2017 15:17:58 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12868935/HIVE-15104.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12868935/HIVE-15104.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10738 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_3] (batchId=97)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3] (batchId=97)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query24] (batchId=231)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5349/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5349/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5349/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5349/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5349/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5349/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12868935 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16017621" author="lirui" created="Fri, 19 May 2017 16:27:10 +0000"  >&lt;p&gt;Patch v3 compiles the registrators at runtime, so that we don&apos;t have to disable kryo relocation. I&apos;ve also put it on RB. Will upload a benchmark result later.&lt;/p&gt;</comment>
                            <comment id="16018496" author="lirui" created="Sat, 20 May 2017 15:12:05 +0000"  >&lt;p&gt;Attaching TPC-H benchmark result. It shows the improvement is more obvious for long queries when we need to shuffle a lot of data. And it&apos;s better to use with groupBy shuffle disabled.&lt;/p&gt;</comment>
                            <comment id="16018507" author="hiveqa" created="Sat, 20 May 2017 15:31:34 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12869112/TPC-H%20100G.xlsx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12869112/TPC-H%20100G.xlsx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5367/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5367/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5367/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5367/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5367/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5367/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-05-20 15:31:32.562
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-5367/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-05-20 15:31:32.564
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 7429f5f HIVE-16717: Extend shared scan optimizer to handle partitions (Jesus Camacho Rodriguez, reviewed by Ashutosh Chauhan)
+ git clean -f -d
Removing ql/src/gen/vectorization/UDAFTemplates/VectorUDAFAvgDecimal.txt
Removing ql/src/gen/vectorization/UDAFTemplates/VectorUDAFAvgDecimalMerge.txt
Removing ql/src/gen/vectorization/UDAFTemplates/VectorUDAFAvgMerge.txt
Removing ql/src/gen/vectorization/UDAFTemplates/VectorUDAFAvgTimestamp.txt
Removing ql/src/java/org/apache/hadoop/hive/ql/exec/vector/expressions/aggregates/VectorUDAFSumTimestamp.java
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 7429f5f HIVE-16717: Extend shared scan optimizer to handle partitions (Jesus Camacho Rodriguez, reviewed by Ashutosh Chauhan)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-05-20 15:31:33.510
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
patch: **** Only garbage was found in the patch input.
patch: **** Only garbage was found in the patch input.
patch: **** Only garbage was found in the patch input.
fatal: unrecognized input
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12869112 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16052006" author="lirui" created="Fri, 16 Jun 2017 14:59:55 +0000"  >&lt;p&gt;The approach here can cause problem when we cache RDDs, e.g. combining equivalent works. The cached RDDs will be serialized when stored to disk or transferred via network, then we need the hash code after the data is deserialized. I think we have to ser/de the hash code anyway to be safe.&lt;/p&gt;</comment>
                            <comment id="16085271" author="lirui" created="Thu, 13 Jul 2017 06:44:46 +0000"  >&lt;p&gt;Update patch v4:&lt;br/&gt;
1. Moved the registrator code to a resource file. Hopefully the patch is more readable.&lt;br/&gt;
2. To be safe, we still have to store the hash code. But that&apos;s still better than the generic serializer.&lt;/p&gt;</comment>
                            <comment id="16085276" author="lirui" created="Thu, 13 Jul 2017 06:51:11 +0000"  >&lt;p&gt;I also run another round of TPC-DS. The overall shuffle data is reduced by 12%. The query time improvement is however negligible - about 1.5%.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; do you think it&apos;s worth the effort?&lt;/p&gt;</comment>
                            <comment id="16085324" author="xuefuz" created="Thu, 13 Jul 2017 07:53:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, I&apos;m wondering if there is anything new (other than moving code around). Last time we benchmarked and found there was actual performance degradation. We can do that again, and if the perf degradation still exists, we may not want this at lest not by default. I wasn&apos;t able to figure out why this degradation might happen.&lt;/p&gt;</comment>
                            <comment id="16085384" author="lirui" created="Thu, 13 Jul 2017 08:41:42 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, I can&apos;t reproduce the perf degradation on my side. Some case runs slower with the patch which I think is just variations. The overall perf (total time taken to run the benchmark) is still slightly improved. I don&apos;t have physical nodes to run the benchmark so it&apos;s done on VMs. It&apos;d be great if you could rerun your benchmark, and we can take a closer look at the degradation. Thanks.&lt;/p&gt;</comment>
                            <comment id="16085465" author="hiveqa" created="Thu, 13 Jul 2017 09:46:24 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877028/HIVE-15104.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877028/HIVE-15104.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10889 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6004/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6004/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6004/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6004/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6004/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6004/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12877028 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16129871" author="lirui" created="Thu, 17 Aug 2017 04:13:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17114&quot; title=&quot;HoS: Possible skew in shuffling when data is not really skewed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17114&quot;&gt;&lt;del&gt;HIVE-17114&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17321&quot; title=&quot;HoS: analyze ORC table doesn&amp;#39;t compute raw data size when noscan/partialscan is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17321&quot;&gt;&lt;del&gt;HIVE-17321&lt;/del&gt;&lt;/a&gt; the benchmark results become more stable and the improvement is a little higher. Here&apos;s the latest &lt;a href=&quot;https://docs.google.com/spreadsheets/d/1ba-AbUpJOHNb0_5PZyWQHzrH4wfRljMxQP9vA9JACHg/edit?usp=sharing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;100GB TPC-DS result&lt;/a&gt;.&lt;br/&gt;
Would you mind share your benchmark tool so that I can look into the perf degradation? Thanks.&lt;/p&gt;</comment>
                            <comment id="16129895" author="xuefuz" created="Thu, 17 Aug 2017 04:26:12 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, thanks for continuing the work here. The improvement is impressive and not much perf degradation is observed. Let me get back my old benchmarks and see if those patches help.&lt;/p&gt;</comment>
                            <comment id="16133290" author="xuefuz" created="Fri, 18 Aug 2017 17:10:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, I found it difficulty to backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17114&quot; title=&quot;HoS: Possible skew in shuffling when data is not really skewed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17114&quot;&gt;&lt;del&gt;HIVE-17114&lt;/del&gt;&lt;/a&gt; to our code base, so I had to give up. However, since you have a configuration to turn this on/off, I think it&apos;s find to have this and postpone the verification on my side later until we upgrade our Hive.&lt;/p&gt;

&lt;p&gt;I need some time to review your latest patch as it&apos;s different from the previous has some low-level class/jar manipulations.&lt;/p&gt;</comment>
                            <comment id="16134639" author="lirui" created="Mon, 21 Aug 2017 02:28:06 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; and take your time. I guess we can also run a round of QA test with the switch turned on.&lt;/p&gt;</comment>
                            <comment id="16134983" author="lirui" created="Mon, 21 Aug 2017 10:01:26 +0000"  >&lt;p&gt;Run tests with the switch on.&lt;/p&gt;</comment>
                            <comment id="16141431" author="hiveqa" created="Fri, 25 Aug 2017 09:47:29 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12883637/HIVE-15104.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12883637/HIVE-15104.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 11001 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=61)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=169)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testHttpRetryOnServerIdleTimeout (batchId=228)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6535/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6535/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6535/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6535/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6535/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6535/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12883637 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16148174" author="xuefuz" created="Wed, 30 Aug 2017 22:47:59 +0000"  >&lt;p&gt;The patch looks good to me. My only concern is about the reliability of the runtime compilation and jar creating. I&apos;d think it&apos;s best if we can avoid that.&lt;/p&gt;

&lt;p&gt;I&apos;m not 100% sure of the class loading problem we faced. If we define class HiveKryoRegistrator in Hive, with relocation, Spark&apos;s unrelocated kryo isn&apos;t able to find it?&lt;/p&gt;</comment>
                            <comment id="16148340" author="lirui" created="Thu, 31 Aug 2017 02:03:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, my previous &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15104?focusedCommentId=15998177&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15998177&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment&lt;/a&gt; has some explanations about the relocation problem. Basically, the problem is we need to implement some method defined by Spark, and the method accepts a kryo parameter. With relocation, Hive&apos;s kryo and Spark&apos;s kryo are in different packages. If we compile the class in Hive and runs it in Spark, Spark will find the method not implemented because it has a different signature.&lt;/p&gt;</comment>
                            <comment id="16148351" author="xuefuz" created="Thu, 31 Aug 2017 02:17:34 +0000"  >&lt;p&gt;I see. It might be possible to put this class in a new package (jar), for which we don&apos;t relocate kryo? &lt;/p&gt;</comment>
                            <comment id="16148485" author="lirui" created="Thu, 31 Aug 2017 05:46:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, I&apos;ll try if that&apos;s feasible. Do you think it&apos;s OK to create a package just for one single class?&lt;/p&gt;</comment>
                            <comment id="16149777" author="xuefuz" created="Thu, 31 Aug 2017 23:27:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, I think creating a trivial package is still better than the runtime compilation/packaging. Plus, non-hos developers doesn&apos;t need to bother with that package. I don&apos;t foresee any problem with a separate project.&lt;/p&gt;</comment>
                            <comment id="16201405" author="lirui" created="Thu, 12 Oct 2017 03:57:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, sorry for taking so long to update. I tried out your proposal. The idea is to build the trivial package and add it with the &lt;tt&gt;--jars&lt;/tt&gt; config when we launch the Spark app. So we need to locate the jar at runtime. To locate the jar, we can use reflection to get the class and call &lt;tt&gt;SparkContext.jarOfClass&lt;/tt&gt; to get the URI. But since kryo is shaded, we don&apos;t have &lt;tt&gt;com.esotericsoftware.kryo.Kryo&lt;/tt&gt; in our class path on Hive side. When I try to get the registrator class, I get a &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt; for &lt;tt&gt;com.esotericsoftware.kryo.Kryo&lt;/tt&gt;.&lt;br/&gt;
I guess one workaround is to let user specify the path to the jar, but that seems not very friendly. Any suggestions?&lt;/p&gt;</comment>
                            <comment id="16201695" author="lirui" created="Thu, 12 Oct 2017 09:32:00 +0000"  >&lt;p&gt;One correction: the &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt; is for &lt;tt&gt;com.esotericsoftware.kryo.Serializer&lt;/tt&gt;. That&apos;s because our HiveKey and BytesWritable serializer extend kryo&apos;s Serializer. When loading our classes, the super class also needs to be loaded and thus the error.&lt;/p&gt;

&lt;p&gt;Since the serializers are static nested classes of HiveKryoRegistrator, I tried loading the class w/o linking it, i.e. by calling &lt;tt&gt;ClassLoader.loadClass()&lt;/tt&gt;. And that can avoid the NoClassDefFoundError. But not sure whether this is reliable and independent from JVM implementations.&lt;/p&gt;</comment>
                            <comment id="16202897" author="xuefuz" created="Fri, 13 Oct 2017 01:01:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, to locate the jar, can we assume that the jar is located somewhere in Hive&apos;s installation path? I&apos;m not sure where (Hive, spark-submit, or remote driver) we need to find the location of the jar.&lt;/p&gt;</comment>
                            <comment id="16203332" author="lirui" created="Fri, 13 Oct 2017 09:59:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, we need to locate the jar on Hive side, before we call spark-submit. I made Hive include it in the &lt;tt&gt;HIVE_HOME/lib&lt;/tt&gt; directory. I guess we can find the path to hive-exec.jar (which is also under lib) and search for the registrator jar under the same path (or relative ones). But that will totally depend on how Hive is installed.&lt;/p&gt;</comment>
                            <comment id="16203867" author="xuefuz" created="Fri, 13 Oct 2017 17:07:30 +0000"  >&lt;p&gt;I think it&apos;s fairly safe to assume that hive-exec.jar and the new jar are in the same location. We can error out if the jar cannot be found in that location.&lt;/p&gt;</comment>
                            <comment id="16205846" author="lirui" created="Mon, 16 Oct 2017 12:54:28 +0000"  >&lt;p&gt;Update patch v6 based on Xuefu&apos;s suggestions.&lt;/p&gt;</comment>
                            <comment id="16205863" author="hiveqa" created="Mon, 16 Oct 2017 13:13:40 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12892380/HIVE-15104.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12892380/HIVE-15104.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7323/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7323/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7323/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7323/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-7323/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-7323/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-10-16 13:13:35.520
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-7323/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-10-16 13:13:35.522
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   6339936..da304ef  master     -&amp;gt; origin/master
+ git reset --hard HEAD
HEAD is now at 6339936 HIVE-17749: Multiple class have missed the ASF header (Saijin Huang via Rui)
+ git clean -f -d
Removing standalone-metastore/src/gen/org/
+ git checkout master
Already on &apos;master&apos;
Your branch is behind &apos;origin/master&apos; by 2 commits, and can be fast-forwarded.
  (use &quot;git pull&quot; to update your local branch)
+ git reset --hard origin/master
HEAD is now at da304ef HIVE-17798: When replacing the src table names in BeeLine testing, the table names shouldn&apos;t be changed to lower case (Marta Kuczora, via Peter Vary)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-10-16 13:13:39.565
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java: No such file or directory
error: a/itests/src/test/resources/testconfiguration.properties: No such file or directory
error: a/packaging/pom.xml: No such file or directory
error: a/pom.xml: No such file or directory
error: a/ql/src/java/org/apache/hadoop/hive/ql/exec/spark/HiveSparkClientFactory.java: No such file or directory
error: a/ql/src/java/org/apache/hadoop/hive/ql/exec/spark/LocalHiveSparkClient.java: No such file or directory
error: a/spark-client/src/main/java/org/apache/hive/spark/client/SparkClientImpl.java: No such file or directory
error: a/spark-client/src/main/java/org/apache/hive/spark/client/SparkClientUtilities.java: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12892380 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16207028" author="hiveqa" created="Tue, 17 Oct 2017 05:23:56 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12892511/HIVE-15104.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12892511/HIVE-15104.7.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7341/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7341/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7341/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7341/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-7341/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-7341/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;**** This message was trimmed, see log for full details ****
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-7341/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-10-17 05:22:03.427
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 8c3f0e4 HIVE-17815: prevent OOM with Atlas Hive hook (Anishek Agarwal reviewed by Thejas Nair)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 8c3f0e4 HIVE-17815: prevent OOM with Atlas Hive hook (Anishek Agarwal reviewed by Thejas Nair)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-10-17 05:22:03.911
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
Going to apply patch with: patch -p0
patching file common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
patching file hive-kryo-registrator/pom.xml
patching file hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java
patching file itests/src/test/resources/testconfiguration.properties
patching file packaging/pom.xml
patching file pom.xml
patching file ql/src/java/org/apache/hadoop/hive/ql/exec/spark/HiveSparkClientFactory.java
patching file ql/src/java/org/apache/hadoop/hive/ql/exec/spark/LocalHiveSparkClient.java
patching file ql/src/test/queries/clientpositive/spark_opt_shuffle_serde.q
patching file ql/src/test/results/clientpositive/spark/spark_opt_shuffle_serde.q.out
patching file spark-client/src/main/java/org/apache/hive/spark/client/SparkClientImpl.java
patching file spark-client/src/main/java/org/apache/hive/spark/client/SparkClientUtilities.java
+ [[ maven == \m\a\v\e\n ]]
+ rm -rf /data/hiveptest/working/maven/org/apache/hive
+ mvn -B clean install -DskipTests -T 4 -q -Dmaven.repo.local=/data/hiveptest/working/maven
protoc-jar: protoc version: 250, detected platform: linux/amd64
protoc-jar: executing: [/tmp/protoc9130095883787762036.exe, -I/data/hiveptest/working/apache-github-source-source/standalone-metastore/src/main/protobuf/org/apache/hadoop/hive/metastore, --java_out=/data/hiveptest/working/apache-github-source-source/standalone-metastore/target/generated-sources, /data/hiveptest/working/apache-github-source-source/standalone-metastore/src/main/protobuf/org/apache/hadoop/hive/metastore/metastore.proto]
ANTLR Parser Generator  Version 3.5.2
Output file /data/hiveptest/working/apache-github-source-source/standalone-metastore/target/generated-sources/antlr3/org/apache/hadoop/hive/metastore/parser/FilterParser.java does not exist: must build /data/hiveptest/working/apache-github-source-source/standalone-metastore/src/main/java/org/apache/hadoop/hive/metastore/parser/Filter.g
org/apache/hadoop/hive/metastore/parser/Filter.g
DataNucleus Enhancer (version 4.1.17) for API &quot;JDO&quot;
DataNucleus Enhancer : Classpath
&amp;gt;&amp;gt;  /usr/share/maven/boot/plexus-classworlds-2.x.jar
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MDatabase
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MFieldSchema
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MType
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MTable
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MConstraint
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MSerDeInfo
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MOrder
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MColumnDescriptor
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MStringList
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MStorageDescriptor
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MPartition
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MIndex
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MRole
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MRoleMap
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MGlobalPrivilege
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MDBPrivilege
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MTablePrivilege
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MPartitionPrivilege
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MTableColumnPrivilege
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MPartitionColumnPrivilege
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MPartitionEvent
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MMasterKey
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MDelegationToken
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MTableColumnStatistics
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MPartitionColumnStatistics
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MVersionTable
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MMetastoreDBProperties
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MResourceUri
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MFunction
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MNotificationLog
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MNotificationNextId
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MWMResourcePlan
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MWMPool
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MWMTrigger
ENHANCED (Persistable) : org.apache.hadoop.hive.metastore.model.MWMMapping
DataNucleus Enhancer completed with success for 35 classes. Timings : input=193 ms, enhance=178 ms, total=371 ms. Consult the log for full details
ANTLR Parser Generator  Version 3.5.2
Output file /data/hiveptest/working/apache-github-source-source/ql/target/generated-sources/antlr3/org/apache/hadoop/hive/ql/parse/HiveLexer.java does not exist: must build /data/hiveptest/working/apache-github-source-source/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g
org/apache/hadoop/hive/ql/parse/HiveLexer.g
Output file /data/hiveptest/working/apache-github-source-source/ql/target/generated-sources/antlr3/org/apache/hadoop/hive/ql/parse/HiveParser.java does not exist: must build /data/hiveptest/working/apache-github-source-source/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g
org/apache/hadoop/hive/ql/parse/HiveParser.g
Output file /data/hiveptest/working/apache-github-source-source/ql/target/generated-sources/antlr3/org/apache/hadoop/hive/ql/parse/HintParser.java does not exist: must build /data/hiveptest/working/apache-github-source-source/ql/src/java/org/apache/hadoop/hive/ql/parse/HintParser.g
org/apache/hadoop/hive/ql/parse/HintParser.g
Generating vector expression code
Generating vector expression test code
ERROR StatusLogger No log4j2 configuration file found. Using default configuration: logging only errors to the console.
[ERROR] COMPILATION ERROR : 
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[20,33] package com.esotericsoftware.kryo does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[21,33] package com.esotericsoftware.kryo does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[22,36] package com.esotericsoftware.kryo.io does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[23,36] package com.esotericsoftware.kryo.io does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[26,35] package org.apache.spark.serializer does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[34,45] cannot find symbol
  symbol: class KryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[36,31] cannot find symbol
  symbol:   class Kryo
  location: class org.apache.hive.spark.HiveKryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[41,50] cannot find symbol
  symbol:   class Serializer
  location: class org.apache.hive.spark.HiveKryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[43,23] cannot find symbol
  symbol:   class Kryo
  location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[43,34] cannot find symbol
  symbol:   class Output
  location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[49,25] cannot find symbol
  symbol:   class Kryo
  location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[49,36] cannot find symbol
  symbol:   class Input
  location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[57,56] cannot find symbol
  symbol:   class Serializer
  location: class org.apache.hive.spark.HiveKryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[59,23] cannot find symbol
  symbol:   class Kryo
  location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[59,34] cannot find symbol
  symbol:   class Output
  location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[64,31] cannot find symbol
  symbol:   class Kryo
  location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[64,42] cannot find symbol
  symbol:   class Input
  location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.6.1:compile (default-compile) on project hive-kryo-registrator: Compilation failure: Compilation failure:
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[20,33] package com.esotericsoftware.kryo does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[21,33] package com.esotericsoftware.kryo does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[22,36] package com.esotericsoftware.kryo.io does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[23,36] package com.esotericsoftware.kryo.io does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[26,35] package org.apache.spark.serializer does not exist
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[34,45] cannot find symbol
[ERROR] symbol: class KryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[36,31] cannot find symbol
[ERROR] symbol:   class Kryo
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[41,50] cannot find symbol
[ERROR] symbol:   class Serializer
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[43,23] cannot find symbol
[ERROR] symbol:   class Kryo
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[43,34] cannot find symbol
[ERROR] symbol:   class Output
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[49,25] cannot find symbol
[ERROR] symbol:   class Kryo
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[49,36] cannot find symbol
[ERROR] symbol:   class Input
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.HiveKeySerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[57,56] cannot find symbol
[ERROR] symbol:   class Serializer
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[59,23] cannot find symbol
[ERROR] symbol:   class Kryo
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[59,34] cannot find symbol
[ERROR] symbol:   class Output
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[64,31] cannot find symbol
[ERROR] symbol:   class Kryo
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] /data/hiveptest/working/apache-github-source-source/hive-kryo-registrator/src/main/java/org/apache/hive/spark/HiveKryoRegistrator.java:[64,42] cannot find symbol
[ERROR] symbol:   class Input
[ERROR] location: class org.apache.hive.spark.HiveKryoRegistrator.BytesWritableSerializer
[ERROR] -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn &amp;lt;goals&amp;gt; -rf :hive-kryo-registrator
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12892511 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16207094" author="lirui" created="Tue, 17 Oct 2017 06:59:33 +0000"  >&lt;p&gt;Fix dependencies&lt;/p&gt;</comment>
                            <comment id="16207563" author="hiveqa" created="Tue, 17 Oct 2017 12:26:06 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12892549/HIVE-15104.9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12892549/HIVE-15104.9.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 13 failed/errored test(s), 11276 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[optimize_nullscan] (batchId=163)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[subquery_multi] (batchId=110)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[subquery_notin] (batchId=133)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[subquery_scalar] (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[subquery_select] (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[subquery_views] (batchId=108)
org.apache.hadoop.hive.cli.TestSparkPerfCliDriver.testCliDriver[query16] (batchId=243)
org.apache.hadoop.hive.cli.TestSparkPerfCliDriver.testCliDriver[query94] (batchId=243)
org.apache.hadoop.hive.cli.TestTezPerfCliDriver.testCliDriver[query16] (batchId=241)
org.apache.hadoop.hive.cli.TestTezPerfCliDriver.testCliDriver[query94] (batchId=241)
org.apache.hadoop.hive.cli.control.TestDanglingQOuts.checkDanglingQOut (batchId=204)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerHighShuffleBytes (batchId=229)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7348/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7348/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7348/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7348/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-7348/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-7348/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 13 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12892549 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16208904" author="lirui" created="Wed, 18 Oct 2017 07:05:23 +0000"  >&lt;p&gt;The sub-query failures are tracked by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17823&quot; title=&quot;Fix subquery Qtest of Hive on Spark&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17823&quot;&gt;HIVE-17823&lt;/a&gt;. Others are not related.&lt;br/&gt;
I&apos;ve put the 9th patch on RB. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, could you take another look? Thanks.&lt;/p&gt;</comment>
                            <comment id="16216271" author="lirui" created="Tue, 24 Oct 2017 04:16:04 +0000"  >&lt;p&gt;Update to address review comments. Also changed the default switch back to false.&lt;/p&gt;</comment>
                            <comment id="16217431" author="xuefuz" created="Tue, 24 Oct 2017 18:42:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16217849" author="hiveqa" created="Tue, 24 Oct 2017 23:01:03 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12893666/HIVE-15104.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12893666/HIVE-15104.10.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 11319 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[subquery_multi] (batchId=110)
org.apache.hadoop.hive.cli.control.TestDanglingQOuts.checkDanglingQOut (batchId=205)
org.apache.hadoop.hive.ql.parse.TestReplicationScenarios.testConstraints (batchId=222)
org.apache.hadoop.hive.ql.parse.authorization.plugin.sqlstd.TestOperation2Privilege.checkHiveOperationTypeMatch (batchId=270)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerHighShuffleBytes (batchId=229)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7456/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7456/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7456/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7456/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-7456/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-7456/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12893666 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16218038" author="lirui" created="Wed, 25 Oct 2017 03:11:47 +0000"  >&lt;p&gt;Pushed to master. Thanks Xuefu for the review!&lt;/p&gt;</comment>
                            <comment id="16219861" author="lefty@hortonworks.com" created="Thu, 26 Oct 2017 02:22:39 +0000"  >&lt;p&gt;Doc note:  This adds &lt;b&gt;hive.spark.optimize.shuffle.serde&lt;/b&gt; to HiveConf.java, so it needs to be documented in the wiki.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Spark&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Spark &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added a TODOC3.0 label.&lt;/p&gt;</comment>
                            <comment id="16224326" author="lirui" created="Mon, 30 Oct 2017 02:36:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; for the reminder. I&apos;ve updated the wiki.&lt;/p&gt;</comment>
                            <comment id="16233602" author="lefty@hortonworks.com" created="Wed, 1 Nov 2017 03:15:07 +0000"  >&lt;p&gt;Good doc, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;.  I removed the TODOC3.0 label.&lt;/p&gt;

&lt;p&gt;Here&apos;s a direct link to the doc:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.spark.optimize.shuffle.serde&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.spark.optimize.shuffle.serde &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16388551" author="stakiar" created="Tue, 6 Mar 2018 21:23:10 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt; I found some time to do some internal testing of this patch. I ran a 1 TB Parquet TPC-DS benchmark (subset of 49 queries, run three times each) on a physical cluster and found similar results to your TPC-DS benchmark.&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&#160;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Baseline Run (default configuration)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Optimized Serde&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Optimized Serde + No GroupBy&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Shuffle Bytes Read&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;699.5 GB&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;530.7 GB&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;531.6 GB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Shuffle Bytes Written&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;690 GB&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;529.5 GB&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;530.3 GB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Total Latency (min)&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;202&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;190&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;So about a 25% improvement on shuffle data and 5% performance improvement. I think the improvement for the shuffle data is significant and is a good&#160;improvement.&lt;/p&gt;

&lt;p&gt;A few questions on the implementation.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The &lt;tt&gt;HiveKryoRegistrator&lt;/tt&gt; still seems to be serializing the &lt;tt&gt;hashCode&lt;/tt&gt; so where are the actual savings coming from?&lt;/li&gt;
	&lt;li&gt;I&apos;m not sure I understand why the performance should improve when &lt;tt&gt;hive.spark.use.groupby.shuffle&lt;/tt&gt; is set to &lt;tt&gt;false&lt;/tt&gt;. It&apos;s still using the same registrator right?&lt;/li&gt;
	&lt;li&gt;You said that we need to serialize the &lt;tt&gt;hashCode&lt;/tt&gt; because &quot;&lt;tt&gt;The cached RDDs will be serialized when stored to disk or transferred via network, then we need the hash code after the data is deserialized&quot;&lt;/tt&gt; - why do we need the &lt;tt&gt;hashCode&lt;/tt&gt; after deserializing the data?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16388915" author="lirui" created="Wed, 7 Mar 2018 02:37:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt;, thanks for trying this out.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The HiveKryoRegistrator still seems to be serializing the hashCode so where are the actual savings coming from?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I didn&apos;t look deeply into kryo, but I think the reason is generic kryo SerDe has some overhead to store class meta info, while &lt;br/&gt;
 in &lt;tt&gt;HiveKryoRegistrator&lt;/tt&gt; we just store the data. My earlier &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15104?focusedCommentId=16007788&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16007788&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment&lt;/a&gt; shows custom SerDe can bring improvements for BytesWritable too.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure I understand why the performance should improve when hive.spark.use.groupby.shuffle is set to false.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I guess the difference is due to the different shuffle we used &amp;#8211; if &lt;tt&gt;hive.spark.use.groupby.shuffle&lt;/tt&gt; is false, group-by-key shuffle is replaced with repartition-and-sort-within-partition shuffle. And yes, the registrator is same for the two cases.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;why do we need the hashCode after deserializing the data?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For MR, the hash code is not needed for deserialized HiveKey (see HiveKey::hashCode), because when HiveKey is deserialized, it&apos;s already been distributed to the proper reducer. For Spark, RDDs may get cached during the execution. So if we deserialize a cached RDD and try to partition it to a downstream reducer, we&apos;ll need the hash code available after deserialization.&lt;/p&gt;</comment>
                            <comment id="16485871" author="vgarg" created="Tue, 22 May 2018 23:58:02 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12867727" name="HIVE-15104.1.patch" size="7779" author="lirui" created="Fri, 12 May 2017 08:26:13 +0000"/>
                            <attachment id="12893666" name="HIVE-15104.10.patch" size="20208" author="lirui" created="Tue, 24 Oct 2017 04:14:57 +0000"/>
                            <attachment id="12868055" name="HIVE-15104.2.patch" size="8456" author="lirui" created="Mon, 15 May 2017 11:29:43 +0000"/>
                            <attachment id="12868935" name="HIVE-15104.3.patch" size="23631" author="lirui" created="Fri, 19 May 2017 12:37:37 +0000"/>
                            <attachment id="12877028" name="HIVE-15104.4.patch" size="21416" author="lirui" created="Thu, 13 Jul 2017 06:42:31 +0000"/>
                            <attachment id="12883637" name="HIVE-15104.5.patch" size="21425" author="lirui" created="Fri, 25 Aug 2017 01:24:54 +0000"/>
                            <attachment id="12892380" name="HIVE-15104.6.patch" size="20488" author="lirui" created="Mon, 16 Oct 2017 12:54:12 +0000"/>
                            <attachment id="12892511" name="HIVE-15104.7.patch" size="20027" author="lirui" created="Tue, 17 Oct 2017 02:28:51 +0000"/>
                            <attachment id="12892544" name="HIVE-15104.8.patch" size="20187" author="lirui" created="Tue, 17 Oct 2017 06:59:22 +0000"/>
                            <attachment id="12892549" name="HIVE-15104.9.patch" size="20248" author="lirui" created="Tue, 17 Oct 2017 07:41:03 +0000"/>
                            <attachment id="12869112" name="TPC-H 100G.xlsx" size="30724" author="lirui" created="Sat, 20 May 2017 15:12:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Nov 2016 17:32:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ogf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15105] Hive shell runs out of memory on Tez</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15105</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive 2.0.1&lt;br/&gt;
Hadoop 2.7.2&lt;br/&gt;
Tex 0.8.4&lt;/p&gt;

&lt;p&gt;We have a UDF in hive which take in some values and outputs a score. When running a query on a table which calls the score function on every row, looks like tez is not running the query on YARN, but trying to run it in local mode. It then runs out of memory trying to insert that data into a table.&lt;/p&gt;

&lt;p&gt;Here&apos;s the query&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ADD JAR score.jar;
CREATE TEMPORARY FUNCTION score AS &apos;hive.udf.ScoreUDF&apos;;

CREATE TABLE abc AS
SELECT
    id,
    score(col1, col2) as score
    , &apos;2016-10-11&apos; AS dt
FROM input_table
;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the output of the shell&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Query ID = hadoop_20161028232841_5a06db96-ffaa-4e75-a657-c7cb46ccb3f5
Total jobs = 1
Launching Job 1 out of 1
java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOf(Arrays.java:3332)
        at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:137)
        at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:121)
        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:622)
        at java.lang.StringBuilder.append(StringBuilder.java:202)
        at com.google.protobuf.TextFormat.escapeBytes(TextFormat.java:1283)
        at com.google.protobuf.TextFormat$Printer.printFieldValue(TextFormat.java:394)
        at com.google.protobuf.TextFormat$Printer.printSingleField(TextFormat.java:327)
        at com.google.protobuf.TextFormat$Printer.printField(TextFormat.java:286)
        at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:273)
        at com.google.protobuf.TextFormat$Printer.printFieldValue(TextFormat.java:404)
        at com.google.protobuf.TextFormat$Printer.printSingleField(TextFormat.java:327)
        at com.google.protobuf.TextFormat$Printer.printField(TextFormat.java:286)
        at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:273)
        at com.google.protobuf.TextFormat$Printer.printFieldValue(TextFormat.java:404)
        at com.google.protobuf.TextFormat$Printer.printSingleField(TextFormat.java:327)
        at com.google.protobuf.TextFormat$Printer.printField(TextFormat.java:286)
        at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:273)
        at com.google.protobuf.TextFormat$Printer.printFieldValue(TextFormat.java:404)
        at com.google.protobuf.TextFormat$Printer.printSingleField(TextFormat.java:327)
        at com.google.protobuf.TextFormat$Printer.printField(TextFormat.java:283)
        at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:273)
        at com.google.protobuf.TextFormat$Printer.printFieldValue(TextFormat.java:404)
        at com.google.protobuf.TextFormat$Printer.printSingleField(TextFormat.java:327)
        at com.google.protobuf.TextFormat$Printer.printField(TextFormat.java:283)
        at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:273)
        at com.google.protobuf.TextFormat$Printer.printFieldValue(TextFormat.java:404)
        at com.google.protobuf.TextFormat$Printer.printSingleField(TextFormat.java:327)
        at com.google.protobuf.TextFormat$Printer.printField(TextFormat.java:286)
        at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:273)
        at com.google.protobuf.TextFormat$Printer.access$400(TextFormat.java:248)
        at com.google.protobuf.TextFormat.shortDebugString(TextFormat.java:88)
FAILED: Execution Error, return code -101 from org.apache.hadoop.hive.ql.exec.tez.TezTask. Java heap space
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It looks like the job is not getting submitted to the cluster, but running locally. We can&apos;t get tez to run the query on the cluster. &lt;br/&gt;
The hive shell starts with an Xmx of 4G. &lt;/p&gt;

&lt;p&gt;If I set hive.execution.engine = mr, then the query works, because it runs on the hadoop cluster. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13016946">HIVE-15105</key>
            <summary>Hive shell runs out of memory on Tez</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="premal">Premal Shah</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 17:20:21 +0000</created>
                <updated>Thu, 9 Mar 2017 08:46:42 +0000</updated>
                            <resolved>Thu, 9 Mar 2017 08:46:42 +0000</resolved>
                                    <version>2.0.1</version>
                                                    <component>Tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15637550" author="cartershanklin" created="Fri, 4 Nov 2016 20:16:06 +0000"  >&lt;p&gt;Can you see if &quot;set hive.exec.mode.local.auto=false;&quot;  helps?&lt;/p&gt;</comment>
                            <comment id="15645476" author="prasanth_j" created="Mon, 7 Nov 2016 21:14:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11751&quot; title=&quot;hive-exec-log4j2.xml settings causes DEBUG messages to be generated and ignored&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11751&quot;&gt;&lt;del&gt;HIVE-11751&lt;/del&gt;&lt;/a&gt; should fix this.&lt;/p&gt;</comment>
                            <comment id="15655685" author="premal" created="Fri, 11 Nov 2016 00:46:46 +0000"  >&lt;p&gt;That seems to have fixed it. Thanx.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Nov 2016 20:16:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35oiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Once DEBUG logging was turned off, the memory issue was resolved.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15106] Hive 1.0 returning only date part of a timestamp</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15106</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive 1.0 is returning only the date part of a timestamp.&lt;/p&gt;

&lt;p&gt;This is working properly on Hive 0.13 and Hive 2.1.0&lt;/p&gt;

&lt;p&gt;Reproduction steps:&lt;/p&gt;

&lt;p&gt;In Hive 0.13 and Hive 2.1.0:&lt;br/&gt;
hive&amp;gt; create table test_order as select timestamp(&apos;2016-11-07 09:29:59.000000&apos;) as event_ts;&lt;br/&gt;
hive&amp;gt; select * from test_order;&lt;br/&gt;
2016-11-07 09:29:59&lt;/p&gt;

&lt;p&gt;hive&amp;gt; select event_ts from test_order where CAST(event_ts AS DATE ) = CAST(&apos;2016-11-07&apos; AS DATE );&lt;br/&gt;
2016-11-07 09:29:59&lt;/p&gt;

&lt;p&gt;But, in Hive 1.0:&lt;br/&gt;
hive&amp;gt; select event_ts from test_order where CAST(event_ts AS DATE ) = CAST(&apos;2016-11-07&apos; AS DATE );&lt;br/&gt;
2016-11-07 00:00:00&lt;/p&gt;</description>
                <environment>&lt;p&gt;Amazon EMR 4.8&lt;/p&gt;</environment>
        <key id="13017009">HIVE-15106</key>
            <summary>Hive 1.0 returning only date part of a timestamp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hvivani">Hernan Vivani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 21:35:41 +0000</created>
                <updated>Fri, 4 Nov 2016 13:46:42 +0000</updated>
                                            <version>1.0.0</version>
                                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15636373" author="yalovyyi" created="Fri, 4 Nov 2016 13:45:59 +0000"  >&lt;p&gt;This is a bug in Constant propagation optimizer. It does &quot;unsafe&quot; casting that causes data corruption in some cases. &lt;br/&gt;
It was fixed for Hive 2.x by patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12749&quot; title=&quot;Constant propagate returns string values in incorrect format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12749&quot;&gt;&lt;del&gt;HIVE-12749&lt;/del&gt;&lt;/a&gt;. I don&apos;t see a patch for Hive 1.x line.&lt;/p&gt;

&lt;p&gt;Please keep in mind that there are several very simple workarounds:&lt;/p&gt;

&lt;p&gt;1. set hive.optimize.constant.propagation=false;&lt;br/&gt;
2. select event_ts from test_order where to_date(event_ts) = to_date(&apos;2016-11-07&apos;); &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12924299">HIVE-12749</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Nov 2016 13:45:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35owv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15107] HiveLexer can throw NPE in allowQuoteId</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15107</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In HiveLexer.allowQuoteId we reference the HiveConf field, which may be null.  The configuration field is set in ParseDriver only if the hive.ql.Context variable is not null. ParseDriver exposes API such as org.apache.hadoop.hive.ql.parse.ParseDriver#parse(java.lang.String) which can result in the hive.ql.Context field to be null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13017015">HIVE-15107</key>
            <summary>HiveLexer can throw NPE in allowQuoteId</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rdsr">Ratandeep Ratti</assignee>
                                    <reporter username="rdsr">Ratandeep Ratti</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 21:51:02 +0000</created>
                <updated>Wed, 2 Nov 2016 20:37:40 +0000</updated>
                                            <version>1.1.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15627061" author="hiveqa" created="Tue, 1 Nov 2016 23:35:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12836451/HIVE-15107.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12836451/HIVE-15107.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1909/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1909/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1909/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1909/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1909/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1909/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2016-11-01 23:35:54.245
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-1909/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2016-11-01 23:35:54.247
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 95b17e5 HIVE-15099 : PTFOperator.PTFInvocation didn&apos;t properly reset the input partition (Wei Zheng, reviewed by Ashutosh Chauhan)
+ git clean -f -d
Removing common/src/java/org/apache/hadoop/hive/conf/HiveConf.java.orig
Removing itests/hive-unit/src/test/java/org/apache/hive/service/server/
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 95b17e5 HIVE-15099 : PTFOperator.PTFInvocation didn&apos;t properly reset the input partition (Wei Zheng, reviewed by Ashutosh Chauhan)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2016-11-01 23:35:55.138
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: patch failed: ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g:31
error: ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g: patch does not apply
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12836451 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15630383" author="rdsr" created="Wed, 2 Nov 2016 20:37:13 +0000"  >&lt;p&gt;Seems like this has been fixed here &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13101&quot; title=&quot;NullPointerException in HiveLexer.g&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13101&quot;&gt;&lt;del&gt;HIVE-13101&lt;/del&gt;&lt;/a&gt;. In &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13101&quot; title=&quot;NullPointerException in HiveLexer.g&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13101&quot;&gt;&lt;del&gt;HIVE-13101&lt;/del&gt;&lt;/a&gt; by default &lt;tt&gt;false&lt;/tt&gt; is returned if Configuration is null.  But isn&apos;t the more appropriate default response  &lt;tt&gt;true&lt;/tt&gt; since the default value of HiveConf.ConfVars.HIVE_QUOTEDID_SUPPORT is &lt;tt&gt;column&lt;/tt&gt;??&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12940671">HIVE-13101</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12836451" name="HIVE-15107.patch" size="782" author="rdsr" created="Tue, 1 Nov 2016 22:13:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Nov 2016 23:35:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35oy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
