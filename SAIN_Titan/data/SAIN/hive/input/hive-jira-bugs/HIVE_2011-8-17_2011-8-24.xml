<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:18:51 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-8-17+AND+created+%3C%3D+2011-8-24+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="19" total="19"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2382] Invalid predicate pushdown from incorrect column expression map for select operator generated by GROUP BY operation</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2382</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a GROUP BY is specified, a select operator is added before the GROUP BY in SemanticAnalyzer.insertSelectAllPlanForGroupBy.  Currently, the column expression map for this is set to the column expression map for the parent operator.  This behavior is incorrect as, for example, the parent operator could rearrange the order of the columns (_col0 =&amp;gt; _col0, _col1 =&amp;gt; _col2, _col2 =&amp;gt; _col1) and the new operator should not repeat this.&lt;/p&gt;

&lt;p&gt;The predicate pushdown optimization uses the column expression map to track which columns a filter expression refers to at different operators.  This results in a filter on incorrect columns.&lt;/p&gt;

&lt;p&gt;Here is a simple case of this going wrong: Using&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create table invites (id int, foo int, bar int);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;executing the query&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;explain select * from (select foo, bar from (select bar, foo from invites c union all select bar, foo from invites d) b) a group by bar, foo having bar=1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;results in&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;STAGE DEPENDENCIES:
  Stage-1 is a root stage
  Stage-0 is a root stage

STAGE PLANS:
  Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        a-subquery1:b-subquery1:c 
          TableScan
            alias: c
            Filter Operator
              predicate:
                  expr: (foo = 1)
                  type: boolean
              Select Operator
                expressions:
                      expr: bar
                      type: int
                      expr: foo
                      type: int
                outputColumnNames: _col0, _col1
                Union
                  Select Operator
                    expressions:
                          expr: _col1
                          type: int
                          expr: _col0
                          type: int
                    outputColumnNames: _col0, _col1
                    Select Operator
                      expressions:
                            expr: _col0
                            type: int
                            expr: _col1
                            type: int
                      outputColumnNames: _col0, _col1
                      Group By Operator
                        bucketGroup: false
                        keys:
                              expr: _col1
                              type: int
                              expr: _col0
                              type: int
                        mode: hash
                        outputColumnNames: _col0, _col1
                        Reduce Output Operator
                          key expressions:
                                expr: _col0
                                type: int
                                expr: _col1
                                type: int
                          sort order: ++
                          Map-reduce partition columns:
                                expr: _col0
                                type: int
                                expr: _col1
                                type: int
                          tag: -1
        a-subquery2:b-subquery2:d 
          TableScan
            alias: d
            Filter Operator
              predicate:
                  expr: (foo = 1)
                  type: boolean
              Select Operator
                expressions:
                      expr: bar
                      type: int
                      expr: foo
                      type: int
                outputColumnNames: _col0, _col1
                Union
                  Select Operator
                    expressions:
                          expr: _col1
                          type: int
                          expr: _col0
                          type: int
                    outputColumnNames: _col0, _col1
                    Select Operator
                      expressions:
                            expr: _col0
                            type: int
                            expr: _col1
                            type: int
                      outputColumnNames: _col0, _col1
                      Group By Operator
                        bucketGroup: false
                        keys:
                              expr: _col1
                              type: int
                              expr: _col0
                              type: int
                        mode: hash
                        outputColumnNames: _col0, _col1
                        Reduce Output Operator
                          key expressions:
                                expr: _col0
                                type: int
                                expr: _col1
                                type: int
                          sort order: ++
                          Map-reduce partition columns:
                                expr: _col0
                                type: int
                                expr: _col1
                                type: int
                          tag: -1
      Reduce Operator Tree:
        Group By Operator
          bucketGroup: false
          keys:
                expr: KEY._col0
                type: int
                expr: KEY._col1
                type: int
          mode: mergepartial
          outputColumnNames: _col0, _col1
          Select Operator
            expressions:
                  expr: _col0
                  type: int
                  expr: _col1
                  type: int
            outputColumnNames: _col0, _col1
            File Output Operator
              compressed: false
              GlobalTableId: 0
              table:
                  input format: org.apache.hadoop.mapred.TextInputFormat
                  output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat

  Stage: Stage-0
    Fetch Operator
      limit: -1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note that the filter is now &quot;foo = 1&quot;, while the correct behavior is to have &quot;bar = 1&quot;.  If we remove the group by, the behavior is correct.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519059">HIVE-2382</key>
            <summary>Invalid predicate pushdown from incorrect column expression map for select operator generated by GROUP BY operation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="charleschen">Charles Chen</assignee>
                                    <reporter username="charleschen">Charles Chen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 00:55:51 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:56 +0000</updated>
                            <resolved>Tue, 30 Aug 2011 22:18:24 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13086525" author="jiraposter@reviews.apache.org" created="Wed, 17 Aug 2011 19:15:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1566/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1566/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2382&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; title=&quot;Invalid predicate pushdown from incorrect column expression map for select operator generated by GROUP BY operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2382&quot;&gt;&lt;del&gt;HIVE-2382&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2382&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/a&gt; 1157990 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby_ppd.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby_ppd.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby_ppd.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby_ppd.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1566/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1566/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13087264" author="jiraposter@reviews.apache.org" created="Thu, 18 Aug 2011 20:31:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1566/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1566/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-18 20:29:54.207958)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Unit tests passed&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2382&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; title=&quot;Invalid predicate pushdown from incorrect column expression map for select operator generated by GROUP BY operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2382&quot;&gt;&lt;del&gt;HIVE-2382&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2382&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/a&gt; 1157990 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby_ppd.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby_ppd.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby_ppd.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby_ppd.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1566/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1566/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Unit tests passed&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13087934" author="cwsteinbach" created="Fri, 19 Aug 2011 20:13:59 +0000"  >&lt;p&gt;@Charles: Please make sure the patch applies cleanly with &apos;patch -p0&apos;. Thanks!&lt;/p&gt;</comment>
                            <comment id="13087937" author="cwsteinbach" created="Fri, 19 Aug 2011 20:21:01 +0000"  >&lt;p&gt;@Charles: Ignore my previous comment &amp;#8211; sorry.&lt;/p&gt;</comment>
                            <comment id="13093366" author="jvs" created="Tue, 30 Aug 2011 01:49:14 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13094102" author="jiraposter@reviews.apache.org" created="Tue, 30 Aug 2011 21:09:10 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1566/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1566/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-30 21:07:18.651251)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;TestParse test output different&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2382&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; title=&quot;Invalid predicate pushdown from incorrect column expression map for select operator generated by GROUP BY operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2382&quot;&gt;&lt;del&gt;HIVE-2382&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2382&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/a&gt; 1163362 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby_ppd.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/groupby_ppd.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby_ppd.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/groupby_ppd.q.out&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby1.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby1.q.xml&lt;/a&gt; 1163362 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby2.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby2.q.xml&lt;/a&gt; 1163362 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby3.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby3.q.xml&lt;/a&gt; 1163362 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby4.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby4.q.xml&lt;/a&gt; 1163362 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby5.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby5.q.xml&lt;/a&gt; 1163362 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby6.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/groupby6.q.xml&lt;/a&gt; 1163362 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1566/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1566/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Unit tests passed&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13094157" author="jvs" created="Tue, 30 Aug 2011 22:18:24 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Charles!&lt;/p&gt;</comment>
                            <comment id="13094343" author="hudson" created="Wed, 31 Aug 2011 06:46:07 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #925 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/925/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/925/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2382&quot; title=&quot;Invalid predicate pushdown from incorrect column expression map for select operator generated by GROUP BY operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2382&quot;&gt;&lt;del&gt;HIVE-2382&lt;/del&gt;&lt;/a&gt;. Invalid predicate pushdown from incorrect column expression&lt;br/&gt;
map for select operator generated by GROUP BY operation&lt;br/&gt;
(Charles Chen via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163437&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163437&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_ppd.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_ppd.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/groupby1.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/groupby2.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/groupby3.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/groupby4.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/groupby5.q.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/plan/groupby6.q.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12464329">HIVE-1342</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490687" name="HIVE-2382v1.patch" size="8995" author="charleschen" created="Wed, 17 Aug 2011 19:26:33 +0000"/>
                            <attachment id="12492369" name="HIVE-2382v2.patch" size="61378" author="charleschen" created="Tue, 30 Aug 2011 21:25:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Aug 2011 19:15:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2383] Incorrect alias filtering for predicate pushdown</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2383</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The predicate pushdown optimizer starts at the topmost operators traverses the operator tree, at each stage collecting predicates to be pushed down.  At each operator, ive.ql.ppd.OpProcFactory.DefaultPPD.mergeWithChildrenPred is called, which merges the predicates of the children nodes into the current node.  The predicates are stored in hive.ql.ppd.ExprWalkerInfo.pushdownPreds as a map from the alias a predicate refers to (a predicate may only refer to one alias at a time as only such predicates can be pushed) to a list of such predicates.  Since at each stage the alias the predicate refers to may change (subqueries may change aliases), this is updated for each operator (hive.ql.ppd.ExprWalkerProcFactory.extractPushdownPreds is called which walks the ExprNodeDesc for each predicate). When a JoinOperator is encountered, mergeWithChildrenPred is passed an optional parameter &quot;aliases&quot; which contains a set of aliases that can be pushed per ansi semantics (see hive.ql.ppd.OpProcFactory.JoinPPD.getQualifiedAliases).  The part that is incorrect is that aliases are filtered in mergeWithChildrenPred before extractPushdownPreds is called, which associates the predicates with the correct alias in the current operator&apos;s context while the filtering should happen after.&lt;/p&gt;

&lt;p&gt;In test case Q2 below, when the predicate &quot;a.bar=3&quot; comes into the JoinOperator, the alias is &quot;a&quot; coming in so it is accepted for pushdown.  When brought into the JoinOperator&apos;s context, however, since the predicate refers to b.foo in the inner scope, we should not actually accept this for pushdown.&lt;/p&gt;

&lt;p&gt;With the test cases&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-- Q1: predicate should not be pushed on the right side of a left outer join (this is correct in trunk)
explain
SELECT a.foo as foo1, b.foo as foo2, b.bar
FROM pokes a LEFT OUTER JOIN pokes2 b
ON a.foo=b.foo
WHERE b.bar=3;

-- Q2: predicate should not be pushed on the right side of a left outer join (this is broken in trunk)
explain
SELECT * FROM
    (SELECT a.foo as foo1, b.foo as foo2, b.bar
    FROM pokes a LEFT OUTER JOIN pokes2 b
    ON a.foo=b.foo) a
WHERE a.bar=3;

-- Q3: predicate should be pushed (this is correct in trunk)
explain
SELECT * FROM
    (SELECT a.foo as foo1, b.foo as foo2, a.bar
    FROM pokes a JOIN pokes2 b
    ON a.foo=b.foo) a
WHERE a.bar=3;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The current output is&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; 
    &amp;gt; -- Q1: predicate should not be pushed on the right side of a left outer join
    &amp;gt; explain
    &amp;gt; SELECT a.foo as foo1, b.foo as foo2, b.bar
    &amp;gt; FROM pokes a LEFT OUTER JOIN pokes2 b
    &amp;gt; ON a.foo=b.foo
    &amp;gt; WHERE b.bar=3;
OK
ABSTRACT SYNTAX TREE:
  (TOK_QUERY (TOK_FROM (TOK_LEFTOUTERJOIN (TOK_TABREF (TOK_TABNAME pokes) a) (TOK_TABREF (TOK_TABNAME pokes2) b) (= (. (TOK_TABLE_OR_COL a) foo) (. (TOK_TABLE_OR_COL b) foo)))) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (. (TOK_TABLE_OR_COL a) foo) foo1) (TOK_SELEXPR (. (TOK_TABLE_OR_COL b) foo) foo2) (TOK_SELEXPR (. (TOK_TABLE_OR_COL b) bar))) (TOK_WHERE (= (. (TOK_TABLE_OR_COL b) bar) 3))))

STAGE DEPENDENCIES:
  Stage-1 is a root stage
  Stage-0 is a root stage

STAGE PLANS:
  Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        a 
          TableScan
            alias: a
            Reduce Output Operator
              key expressions:
                    expr: foo
                    type: int
              sort order: +
              Map-reduce partition columns:
                    expr: foo
                    type: int
              tag: 0
              value expressions:
                    expr: foo
                    type: int
        b 
          TableScan
            alias: b
            Reduce Output Operator
              key expressions:
                    expr: foo
                    type: int
              sort order: +
              Map-reduce partition columns:
                    expr: foo
                    type: int
              tag: 1
              value expressions:
                    expr: foo
                    type: int
                    expr: bar
                    type: int
      Reduce Operator Tree:
        Join Operator
          condition map:
               Left Outer Join0 to 1
          condition expressions:
            0 {VALUE._col0}
            1 {VALUE._col0} {VALUE._col1}
          handleSkewJoin: false
          outputColumnNames: _col0, _col4, _col5
          Filter Operator
            predicate:
                expr: (_col5 = 3)
                type: boolean
            Select Operator
              expressions:
                    expr: _col0
                    type: int
                    expr: _col4
                    type: int
                    expr: _col5
                    type: int
              outputColumnNames: _col0, _col1, _col2
              File Output Operator
                compressed: false
                GlobalTableId: 0
                table:
                    input format: org.apache.hadoop.mapred.TextInputFormat
                    output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat

  Stage: Stage-0
    Fetch Operator
      limit: -1


Time taken: 0.113 seconds
hive&amp;gt; 
    &amp;gt; -- Q2: predicate should not be pushed on the right side of a left outer join
    &amp;gt; explain
    &amp;gt; SELECT * FROM
    &amp;gt;     (SELECT a.foo as foo1, b.foo as foo2, b.bar
    &amp;gt;     FROM pokes a LEFT OUTER JOIN pokes2 b
    &amp;gt;     ON a.foo=b.foo) a
    &amp;gt; WHERE a.bar=3;
OK
ABSTRACT SYNTAX TREE:
  (TOK_QUERY (TOK_FROM (TOK_SUBQUERY (TOK_QUERY (TOK_FROM (TOK_LEFTOUTERJOIN (TOK_TABREF (TOK_TABNAME pokes) a) (TOK_TABREF (TOK_TABNAME pokes2) b) (= (. (TOK_TABLE_OR_COL a) foo) (. (TOK_TABLE_OR_COL b) foo)))) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (. (TOK_TABLE_OR_COL a) foo) foo1) (TOK_SELEXPR (. (TOK_TABLE_OR_COL b) foo) foo2) (TOK_SELEXPR (. (TOK_TABLE_OR_COL b) bar))))) a)) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR TOK_ALLCOLREF)) (TOK_WHERE (= (. (TOK_TABLE_OR_COL a) bar) 3))))

STAGE DEPENDENCIES:
  Stage-1 is a root stage
  Stage-0 is a root stage

STAGE PLANS:
  Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        a:a 
          TableScan
            alias: a
            Reduce Output Operator
              key expressions:
                    expr: foo
                    type: int
              sort order: +
              Map-reduce partition columns:
                    expr: foo
                    type: int
              tag: 0
              value expressions:
                    expr: foo
                    type: int
        a:b 
          TableScan
            alias: b
            Filter Operator
              predicate:
                  expr: (bar = 3)
                  type: boolean
              Reduce Output Operator
                key expressions:
                      expr: foo
                      type: int
                sort order: +
                Map-reduce partition columns:
                      expr: foo
                      type: int
                tag: 1
                value expressions:
                      expr: foo
                      type: int
                      expr: bar
                      type: int
      Reduce Operator Tree:
        Join Operator
          condition map:
               Left Outer Join0 to 1
          condition expressions:
            0 {VALUE._col0}
            1 {VALUE._col0} {VALUE._col1}
          handleSkewJoin: false
          outputColumnNames: _col0, _col4, _col5
          Select Operator
            expressions:
                  expr: _col0
                  type: int
                  expr: _col4
                  type: int
                  expr: _col5
                  type: int
            outputColumnNames: _col0, _col1, _col2
            Select Operator
              expressions:
                    expr: _col0
                    type: int
                    expr: _col1
                    type: int
                    expr: _col2
                    type: int
              outputColumnNames: _col0, _col1, _col2
              File Output Operator
                compressed: false
                GlobalTableId: 0
                table:
                    input format: org.apache.hadoop.mapred.TextInputFormat
                    output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat

  Stage: Stage-0
    Fetch Operator
      limit: -1


Time taken: 0.101 seconds
hive&amp;gt; 
    &amp;gt; -- Q3: predicate should be pushed
    &amp;gt; explain
    &amp;gt; SELECT * FROM
    &amp;gt;     (SELECT a.foo as foo1, b.foo as foo2, a.bar
    &amp;gt;     FROM pokes a JOIN pokes2 b
    &amp;gt;     ON a.foo=b.foo) a
    &amp;gt; WHERE a.bar=3;
OK
ABSTRACT SYNTAX TREE:
  (TOK_QUERY (TOK_FROM (TOK_SUBQUERY (TOK_QUERY (TOK_FROM (TOK_JOIN (TOK_TABREF (TOK_TABNAME pokes) a) (TOK_TABREF (TOK_TABNAME pokes2) b) (= (. (TOK_TABLE_OR_COL a) foo) (. (TOK_TABLE_OR_COL b) foo)))) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (. (TOK_TABLE_OR_COL a) foo) foo1) (TOK_SELEXPR (. (TOK_TABLE_OR_COL b) foo) foo2) (TOK_SELEXPR (. (TOK_TABLE_OR_COL a) bar))))) a)) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR TOK_ALLCOLREF)) (TOK_WHERE (= (. (TOK_TABLE_OR_COL a) bar) 3))))

STAGE DEPENDENCIES:
  Stage-1 is a root stage
  Stage-0 is a root stage

STAGE PLANS:
  Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        a:a 
          TableScan
            alias: a
            Filter Operator
              predicate:
                  expr: (bar = 3)
                  type: boolean
              Reduce Output Operator
                key expressions:
                      expr: foo
                      type: int
                sort order: +
                Map-reduce partition columns:
                      expr: foo
                      type: int
                tag: 0
                value expressions:
                      expr: foo
                      type: int
                      expr: bar
                      type: int
        a:b 
          TableScan
            alias: b
            Reduce Output Operator
              key expressions:
                    expr: foo
                    type: int
              sort order: +
              Map-reduce partition columns:
                    expr: foo
                    type: int
              tag: 1
              value expressions:
                    expr: foo
                    type: int
      Reduce Operator Tree:
        Join Operator
          condition map:
               Inner Join 0 to 1
          condition expressions:
            0 {VALUE._col0} {VALUE._col1}
            1 {VALUE._col0}
          handleSkewJoin: false
          outputColumnNames: _col0, _col1, _col4
          Select Operator
            expressions:
                  expr: _col0
                  type: int
                  expr: _col4
                  type: int
                  expr: _col1
                  type: int
            outputColumnNames: _col0, _col1, _col2
            Select Operator
              expressions:
                    expr: _col0
                    type: int
                    expr: _col1
                    type: int
                    expr: _col2
                    type: int
              outputColumnNames: _col0, _col1, _col2
              File Output Operator
                compressed: false
                GlobalTableId: 0
                table:
                    input format: org.apache.hadoop.mapred.TextInputFormat
                    output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat

  Stage: Stage-0
    Fetch Operator
      limit: -1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note that Q2 is incorrect because the predicate &quot;bar = 3&quot; is incorrectly pushed to the right side of the left outer join (Q1 and Q3 are correct).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519060">HIVE-2383</key>
            <summary>Incorrect alias filtering for predicate pushdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="charleschen">Charles Chen</assignee>
                                    <reporter username="charleschen">Charles Chen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 00:55:55 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:06 +0000</updated>
                            <resolved>Wed, 31 Aug 2011 23:42:00 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13086530" author="jiraposter@reviews.apache.org" created="Wed, 17 Aug 2011 19:29:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; title=&quot;Incorrect alias filtering for predicate pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2383&quot;&gt;&lt;del&gt;HIVE-2383&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/a&gt; 1158484 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1568/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13086723" author="charleschen" created="Thu, 18 Aug 2011 01:18:58 +0000"  >&lt;p&gt;This bug also currently prevents pushing predicates past joins in subqueries:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;explain select * from (select a.foo, b.bar from invites a join invites2 b on a.foo=b.foo) c join invites d on a.foo=d.bar where d.bar=&apos;10&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13087268" author="jiraposter@reviews.apache.org" created="Thu, 18 Aug 2011 20:35:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-18 20:35:12.369972)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated unit tests&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; title=&quot;Incorrect alias filtering for predicate pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2383&quot;&gt;&lt;del&gt;HIVE-2383&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/union.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/union.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf6.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf6.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf_case.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf_case.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf_when.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf_when.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf1.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf1.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf4.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/udf4.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/subq.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/subq.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample7.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample7.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample6.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample6.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample5.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample5.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample4.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample4.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample3.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample3.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/udf_named_struct.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/udf_named_struct.q.out&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample1.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample1.q.xml&lt;/a&gt; 1158993 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample2.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/sample2.q.xml&lt;/a&gt; 1158993 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1568/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13087932" author="cwsteinbach" created="Fri, 19 Aug 2011 20:11:35 +0000"  >&lt;p&gt;Please rebase the patch against trunk and also make sure that it&apos;s in a form that applies cleanly with &apos;patch -p0&apos; from the src root directory. See the HowToContribute section on the wiki for more details:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HowToContribute&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HowToContribute&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13087947" author="cwsteinbach" created="Fri, 19 Aug 2011 20:29:50 +0000"  >&lt;p&gt;Ignore my previous comment.&lt;/p&gt;</comment>
                            <comment id="13094171" author="jiraposter@reviews.apache.org" created="Tue, 30 Aug 2011 22:48:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-30 22:46:54.310929)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; title=&quot;Incorrect alias filtering for predicate pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2383&quot;&gt;&lt;del&gt;HIVE-2383&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1568/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13094183" author="jiraposter@reviews.apache.org" created="Tue, 30 Aug 2011 23:30:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-30 23:30:03.671952)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;fixed nullpointer&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; title=&quot;Incorrect alias filtering for predicate pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2383&quot;&gt;&lt;del&gt;HIVE-2383&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1568/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13094307" author="jiraposter@reviews.apache.org" created="Wed, 31 Aug 2011 05:03:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-31 05:01:19.947004)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fix filter creation when not pushed down&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; title=&quot;Incorrect alias filtering for predicate pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2383&quot;&gt;&lt;del&gt;HIVE-2383&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/auto_join8.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/auto_join8.q.out&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join8.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join8.q.out&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/udf_bitmap_empty.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/udf_bitmap_empty.q.out&lt;/a&gt; 1163438 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/join8.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/join8.q.xml&lt;/a&gt; 1163438 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1568/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Charles&lt;/p&gt;
</comment>
                            <comment id="13094320" author="jiraposter@reviews.apache.org" created="Wed, 31 Aug 2011 05:49:12 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1568/#review1700&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/#review1700&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1568/#comment3855&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/#comment3855&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The predicates are already cloned in ExprWalkerProcFactory.extractPushdownPreds() and this behavior is inconsistent with addPushdowns() which doesn&apos;t clone the predicates.  Moreover, not cloning the expressions is convenient for the newToOldExprMap so that now the ExprNodeDesc&apos;s can be compared with == instead of a deep comparison of the tree.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1568/#comment3856&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/#comment3856&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    From what I understand, currently, when the PPD encounters a JoinOperator, mergeChildrenPred is used to find the filters that are not being pushed down past that operator based on the alias and these should be the same filters that are stored in ExprWalkerInfo.nonFinalPreds (except the filters we want filter on the output columns of the JoinOperator while the nonFinalPreds filter on its input).  The bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; title=&quot;Incorrect alias filtering for predicate pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2383&quot;&gt;&lt;del&gt;HIVE-2383&lt;/del&gt;&lt;/a&gt; is that alias filtering should be done in the context of the JoinOperator, not on its children, so now mergeChildrenPred doesn&apos;t return the correct filters to create.  I changed the JoinPPD to use the nonFinalPreds to figure out which filters to create and added a map in ExprWalkerInfo.newToOldExprMap to store the mapping from each filter in the operator&apos;s context to the filter that it came from in the children&apos;s context (this is populated during ExprWalkerProcFactory.extractPushdownPreds()).&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Charles&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-31 05:01:19, Charles Chen wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-31 05:01:19)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; title=&quot;Incorrect alias filtering for predicate pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2383&quot;&gt;&lt;del&gt;HIVE-2383&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2383&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerInfo.java&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/queries/clientpositive/ppd_repeated_alias.q&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/auto_join8.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/auto_join8.q.out&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join8.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/join8.q.out&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/udf_bitmap_empty.q.out&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/clientpositive/udf_bitmap_empty.q.out&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/join8.q.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hive/trunk/ql/src/test/results/compiler/plan/join8.q.xml&lt;/a&gt; 1163438 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1568/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1568/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Charles&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13094995" author="jvs" created="Wed, 31 Aug 2011 23:42:00 +0000"  >&lt;p&gt;Passed tests and committed to trunk.  Thanks Charles!&lt;/p&gt;</comment>
                            <comment id="13095020" author="jvs" created="Thu, 1 Sep 2011 00:15:43 +0000"  >&lt;p&gt;Oh, um, also:  +1.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12464329">HIVE-1342</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490688" name="HIVE-2383v1.patch" size="14934" author="charleschen" created="Wed, 17 Aug 2011 19:28:38 +0000"/>
                            <attachment id="12490858" name="HIVE-2383v2.patch" size="235484" author="charleschen" created="Thu, 18 Aug 2011 20:36:01 +0000"/>
                            <attachment id="12492415" name="HIVE-2383v5.patch" size="71837" author="charleschen" created="Wed, 31 Aug 2011 05:01:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Aug 2011 19:29:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2384] import of multiple partitions from a partitioned table with external location overwrites files</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2384</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;when we import multiple partitions from an exported partitioned table, if we import it with a specified external location, then the partitions end up overwriting.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519090">HIVE-2384</key>
            <summary>import of multiple partitions from a partitioned table with external location overwrites files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="n_krishna_kumar">Krishna Kumar</assignee>
                                    <reporter username="n_krishna_kumar">Krishna Kumar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 08:46:12 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:06 +0000</updated>
                            <resolved>Thu, 25 Aug 2011 11:38:22 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13086226" author="n_krishna_kumar" created="Wed, 17 Aug 2011 09:53:29 +0000"  >&lt;p&gt;Patch with tests&lt;/p&gt;</comment>
                            <comment id="13090874" author="amareshwari" created="Thu, 25 Aug 2011 08:54:05 +0000"  >&lt;p&gt;+1.&lt;br/&gt;
Will commit once tests pass.&lt;/p&gt;</comment>
                            <comment id="13090952" author="amareshwari" created="Thu, 25 Aug 2011 11:38:22 +0000"  >&lt;p&gt;I just committed this. Thanks Krishna !&lt;/p&gt;</comment>
                            <comment id="13091113" author="hudson" created="Thu, 25 Aug 2011 16:37:12 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #915 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/915/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/915/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2384&quot; title=&quot;import of multiple partitions from a partitioned table with external location overwrites files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2384&quot;&gt;&lt;del&gt;HIVE-2384&lt;/del&gt;&lt;/a&gt;. Fixes overwriting of files in case of import of multiple partitions from a partitioned table with external location. (Krishna Kumar via amareshwari)&lt;/p&gt;

&lt;p&gt;amareshwari : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161516&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161516&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/test2.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/exim_19_00_part_external_location.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/exim_19_00_part_external_location.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490632" name="HIVE-2384.v0.patch" size="12266" author="n_krishna_kumar" created="Wed, 17 Aug 2011 09:53:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 25 Aug 2011 08:54:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2385] Local Mode can be more aggressive if LIMIT optimization is on</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2385</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Local mode now depends on total input data, but for LIMIT queries with no filtering, the data actually scanned can be much less and it&apos;s relatively predictable. We can place local mode more aggressively.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519172">HIVE-2385</key>
            <summary>Local Mode can be more aggressive if LIMIT optimization is on</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sdong">Siying Dong</assignee>
                                    <reporter username="sdong">Siying Dong</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 19:26:17 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:49 +0000</updated>
                            <resolved>Fri, 26 Aug 2011 18:37:43 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13086537" author="sdong" created="Wed, 17 Aug 2011 19:39:53 +0000"  >&lt;p&gt;Further estimate input for LIMIT when deciding local mode. Also fix a bug (won&apos;t cause wrong result) of the LIMIT optimization.&lt;/p&gt;</comment>
                            <comment id="13086539" author="sdong" created="Wed, 17 Aug 2011 19:45:13 +0000"  >&lt;p&gt;I don&apos;t know why but I can&apos;t create review board using this patch.&lt;/p&gt;</comment>
                            <comment id="13089256" author="cwsteinbach" created="Tue, 23 Aug 2011 04:34:40 +0000"  >&lt;p&gt;@Siying: I get a test failure in TestNegativeCliDriver.autlocal1. Can you please take a look? Thanks.&lt;/p&gt;</comment>
                            <comment id="13089644" author="sdong" created="Tue, 23 Aug 2011 18:25:35 +0000"  >&lt;p&gt;Fix the bug and it passes autolocal1.q. I&apos;m running the whole test suites now.&lt;/p&gt;</comment>
                            <comment id="13090397" author="sdong" created="Wed, 24 Aug 2011 18:40:36 +0000"  >&lt;p&gt;It passed all the tests.&lt;/p&gt;</comment>
                            <comment id="13091305" author="sdong" created="Thu, 25 Aug 2011 20:31:29 +0000"  >&lt;p&gt;@Carl, are you still seeing tests failing?&lt;/p&gt;</comment>
                            <comment id="13091333" author="cwsteinbach" created="Thu, 25 Aug 2011 21:15:20 +0000"  >&lt;p&gt;@Siying: autolocal1 now passes. +1. Will commit if full tests pass.&lt;/p&gt;</comment>
                            <comment id="13091940" author="cwsteinbach" created="Fri, 26 Aug 2011 18:37:43 +0000"  >&lt;p&gt;Committed to trunk. Thanks Siying!&lt;/p&gt;</comment>
                            <comment id="13092112" author="hudson" created="Fri, 26 Aug 2011 22:51:34 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #918 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/918/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/918/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2385&quot; title=&quot;Local Mode can be more aggressive if LIMIT optimization is on&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2385&quot;&gt;&lt;del&gt;HIVE-2385&lt;/del&gt;&lt;/a&gt;. Local Mode can be more aggressive if LIMIT optimization is on (Siying Dong via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1162202&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1162202&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/LimitOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490691" name="HIVE-2385.1.patch" size="6629" author="sdong" created="Wed, 17 Aug 2011 19:39:53 +0000"/>
                            <attachment id="12491373" name="HIVE-2385.2.patch" size="6626" author="sdong" created="Tue, 23 Aug 2011 18:25:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Aug 2011 04:34:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2386] Add Mockito to LICENSE file</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2386</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Mockito was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt;, but not added to the license file.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12519185">HIVE-2386</key>
            <summary>Add Mockito to LICENSE file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jghoman">Jakob Homan</assignee>
                                    <reporter username="jghoman">Jakob Homan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 21:13:54 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:55 +0000</updated>
                            <resolved>Fri, 19 Aug 2011 18:58:18 +0000</resolved>
                                    <version>0.7.1</version>
                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13086599" author="jghoman" created="Wed, 17 Aug 2011 21:14:22 +0000"  >&lt;p&gt;Quick patch to add mockito&apos;s license text to LICENSE.  &lt;/p&gt;</comment>
                            <comment id="13086600" author="jghoman" created="Wed, 17 Aug 2011 21:14:41 +0000"  >&lt;p&gt;No tests, etc. as just some text.&lt;/p&gt;</comment>
                            <comment id="13087895" author="cwsteinbach" created="Fri, 19 Aug 2011 18:58:18 +0000"  >&lt;p&gt;Committed to trunk. Thanks Jakob!&lt;/p&gt;</comment>
                            <comment id="13088071" author="hudson" created="Fri, 19 Aug 2011 23:34:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #907 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/907/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/907/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2386&quot; title=&quot;Add Mockito to LICENSE file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2386&quot;&gt;&lt;del&gt;HIVE-2386&lt;/del&gt;&lt;/a&gt;. Add Mockito to LICENSE file (Jakob Homan via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159744&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159744&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/LICENSE&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490701" name="mockito-license.patch" size="1546" author="jghoman" created="Wed, 17 Aug 2011 21:14:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 18:58:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43492</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123852</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2387] Facing issues while executing commands on hive shell. The system throws following error</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2387</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12519192">HIVE-2387</key>
            <summary>Facing issues while executing commands on hive shell. The system throws following error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tiwari.siddharth">Siddharth tiwari</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 21:51:02 +0000</created>
                <updated>Wed, 17 Aug 2011 22:23:37 +0000</updated>
                            <resolved>Wed, 17 Aug 2011 21:53:34 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13086620" author="jghoman" created="Wed, 17 Aug 2011 21:53:28 +0000"  >&lt;p&gt;Hey Siddharth, I&apos;m going to close this and redirect you to the hive-users list.  JIRA is reserved for tracking patches and improvements.  You&apos;ll be much more likely to get help on the users list.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13086635" author="tiwari.siddharth" created="Wed, 17 Aug 2011 22:11:42 +0000"  >&lt;p&gt;Thankyou Jakob !!&lt;/p&gt;</comment>
                            <comment id="13086644" author="tiwari.siddharth" created="Wed, 17 Aug 2011 22:21:38 +0000"  >&lt;p&gt;Please provide me link to users-list&lt;/p&gt;</comment>
                            <comment id="13086646" author="jghoman" created="Wed, 17 Aug 2011 22:23:37 +0000"  >&lt;p&gt;&lt;a href=&quot;http://hive.apache.org/mailing_lists.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hive.apache.org/mailing_lists.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Aug 2011 21:53:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2388] Facing issues while executing commands on hive shell. The system throws following error: only on Windows Cygwin setup</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2388</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;DDL runs well but the following command describes throw error pls help with resolution and how to get about it&lt;/p&gt;


&lt;p&gt;hive&amp;gt; show tables&lt;br/&gt;
    &amp;gt; ;&lt;br/&gt;
FAILED: Hive Internal Error: java.lang.IllegalArgumentException(java.net.URISyntaxException: Relative path in absolute URI: &lt;a href=&quot;file:C:/cygwin/tmp//siddharth/hive_2011-08-18_&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:C:/cygwin/tmp//siddharth/hive_2011-08-18_&lt;/a&gt;&lt;br/&gt;
03-11-05_208_1818592223695168110)&lt;br/&gt;
java.lang.IllegalArgumentException: java.net.URISyntaxException: Relative path in absolute URI: &lt;a href=&quot;file:C:/cygwin/tmp//siddharth/hive_2011-08-18_03-11-05_208_181859222369516&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:C:/cygwin/tmp//siddharth/hive_2011-08-18_03-11-05_208_181859222369516&lt;/a&gt;&lt;br/&gt;
8110&lt;br/&gt;
        at org.apache.hadoop.fs.Path.initialize(Path.java:140)&lt;br/&gt;
        at org.apache.hadoop.fs.Path.&amp;lt;init&amp;gt;(Path.java:132)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Context.getScratchDir(Context.java:142)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Context.getLocalScratchDir(Context.java:168)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Context.getLocalTmpFileURI(Context.java:282)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer.analyzeInternal(DDLSemanticAnalyzer.java:205)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:238)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:340)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:736)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:164)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:241)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:456)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Caused by: java.net.URISyntaxException: Relative path in absolute URI: &lt;a href=&quot;file:C:/cygwin/tmp//siddharth/hive_2011-08-18_03-11-05_208_1818592223695168110&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:C:/cygwin/tmp//siddharth/hive_2011-08-18_03-11-05_208_1818592223695168110&lt;/a&gt;&lt;br/&gt;
        at java.net.URI.checkPath(URI.java:1787)&lt;br/&gt;
        at java.net.URI.&amp;lt;init&amp;gt;(URI.java:735)&lt;br/&gt;
        at org.apache.hadoop.fs.Path.initialize(Path.java:137)&lt;br/&gt;
        ... 16 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;Cygwin Windows&lt;/p&gt;</environment>
        <key id="12519193">HIVE-2388</key>
            <summary>Facing issues while executing commands on hive shell. The system throws following error: only on Windows Cygwin setup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tiwari.siddharth">Siddharth tiwari</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 17 Aug 2011 21:53:20 +0000</created>
                <updated>Fri, 16 Dec 2011 23:58:26 +0000</updated>
                            <resolved>Thu, 1 Dec 2011 19:21:35 +0000</resolved>
                                    <version>0.7.1</version>
                                                    <component>CLI</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="1641600">456h</timeoriginalestimate>
                            <timeestimate seconds="1641600">456h</timeestimate>
                                        <comments>
                            <comment id="13095052" author="tiwari.siddharth" created="Thu, 1 Sep 2011 01:22:46 +0000"  >&lt;p&gt;use this file to start hive on cygwin&lt;/p&gt;

&lt;p&gt;bin/start.sh&lt;/p&gt;</comment>
                            <comment id="13160839" author="bhavesh25shah" created="Thu, 1 Dec 2011 11:50:52 +0000"  >&lt;p&gt;Initially it works with bin/start.sh but after closing cygwin it is not working.&lt;br/&gt;
It is not showing any kind of output.&lt;br/&gt;
And one more problem is with select query , that it is giving Execution error on Cygwin.&lt;br/&gt;
Pls help me.&lt;/p&gt;</comment>
                            <comment id="13161059" author="cwsteinbach" created="Thu, 1 Dec 2011 19:21:35 +0000"  >&lt;p&gt;Running Hive on Cygwin is not a supported configuration. In the past some people have gotten this to work by tweaking different parts of the code, but we don&apos;t test Hive on Cygwin, and consequently have no way of insuring that this configuration works. Please run Hive on Linux instead.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12492593" name="start.sh" size="40" author="tiwari.siddharth" created="Thu, 1 Sep 2011 12:24:40 +0000"/>
                            <attachment id="12492561" name="start.sh" size="57" author="tiwari.siddharth" created="Thu, 1 Sep 2011 01:22:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Dec 2011 11:50:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123854</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>For cygwin and windows pls use the attached start.sh to start hive rather than hive.sh&lt;br/&gt;
it calls internally the same. version 2 patch would be uploaded soon with permanent solutin in the jar.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2389] Hive could use a binary field</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2389</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently hive has no notion of binary data. This makes importing from sql difficult. Any reason why we wouldn&apos;t have a binary type?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519204">HIVE-2389</key>
            <summary>Hive could use a binary field</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="posix4e">Alex Newman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 22:58:04 +0000</created>
                <updated>Thu, 18 Aug 2011 02:03:59 +0000</updated>
                            <resolved>Thu, 18 Aug 2011 02:03:59 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13086740" author="ashutoshc" created="Thu, 18 Aug 2011 02:03:59 +0000"  >&lt;p&gt;@Alex,&lt;/p&gt;

&lt;p&gt;There is already a jira open for this at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt; where I have a preliminary patch up. Closing this as duplicate for that. Lets discuss this over there.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Aug 2011 02:03:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2390] Add UNIONTYPE serialization support to LazyBinarySerDe</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2390</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When the union type was introduced, full support for it wasn&apos;t provided.  For instance, when working with a union that gets passed to LazyBinarySerde: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.RuntimeException: Unrecognized type: UNION
	at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serialize(LazyBinarySerDe.java:468)
	at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serializeStruct(LazyBinarySerDe.java:230)
	at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serialize(LazyBinarySerDe.java:184)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12519221">HIVE-2390</key>
            <summary>Add UNIONTYPE serialization support to LazyBinarySerDe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="suma.shivaprasad">Suma Shivaprasad</assignee>
                                    <reporter username="jghoman">Jakob Homan</reporter>
                        <labels>
                            <label>TODOC14</label>
                            <label>uniontype</label>
                    </labels>
                <created>Thu, 18 Aug 2011 00:50:39 +0000</created>
                <updated>Thu, 13 Nov 2014 19:39:35 +0000</updated>
                            <resolved>Tue, 9 Sep 2014 09:07:13 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>7</votes>
                                    <watches>16</watches>
                                                                <comments>
                            <comment id="13086714" author="jghoman" created="Thu, 18 Aug 2011 00:55:55 +0000"  >&lt;p&gt;Part of the problem is that the term union has been overloaded.  In SQL it means the actual set union of two compatible data types, whereas in Avro and programming languages it means one value that can be at any one time an instance of two or different types.  Union was added as a full-on, first-class type by its inclusion in ObjectInspector&apos;s Category enum.  Is there any reason not to expand this use to be more along the line of programming language&apos;s take on unions?  If so, it should be marked as not really being a first-class type.  If not, support for unions in all the serdes, in the grammar and in the documentation should be provided.&lt;/p&gt;

&lt;p&gt;I would lobby for expanding its support as it&apos;s an important type in Avro and we&apos;re quite hobbled by the inability to manipulate unioned values. (Avro handles nullable values by unioning them with their type T and null, but Haivvreo transparently converts these just to the type and returns null where appropriate. The problem lies in actual unions of non-null types, which are less frequent but still valid.)&lt;/p&gt;
</comment>
                            <comment id="13086715" author="jghoman" created="Thu, 18 Aug 2011 00:56:37 +0000"  >&lt;p&gt;Changing name of JIRA to be more representative of what needs to be done.  If reaction is positive, will open subtasks for individual items.&lt;/p&gt;</comment>
                            <comment id="13086777" author="amareshwari" created="Thu, 18 Aug 2011 03:45:55 +0000"  >&lt;p&gt;+1. I agree that when Union type was added, complete support for it was not added. We should extend its usage in all the serdes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Part of the problem is that the term union has been overloaded. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The type is called &apos;uniontype&apos; in Hive to resolve ambiguities.&lt;/p&gt;</comment>
                            <comment id="13758922" author="navis" created="Thu, 5 Sep 2013 09:15:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4765&quot; title=&quot;Improve HBase bulk loading facility&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4765&quot;&gt;HIVE-4765&lt;/a&gt; included LazyBinaryUnion type. Could you check that?&lt;/p&gt;</comment>
                            <comment id="13880067" author="chewiebacca" created="Thu, 23 Jan 2014 16:49:50 +0000"  >&lt;p&gt;I wanted to see about the current status, and if there are any ETAs for resolution?  I can assure there are quite a few efforts needing to qualify on data within uniontypes in Hive (Impala, etc), as soon as possible.  I&apos;ve been informed my effort will not accept uniontype usage (with more than one non-null type) unless there is built-in Hive support (which is very unfortunate, but not without point)... meaning the types have to be split into separate fields, which obviously is less semantically correct, more clunky (in the Avro model and Java), and provides no benefit other than a workaround for clean query ability.&lt;/p&gt;

&lt;p&gt;Something else that needs addressed is how to reference nested fields / structs / etc in the query.  Currently &apos;.&apos; (period) is used, can this be kept for union?  Ambiguity can arise if more than one type has the same field, in all other cases it can be implicitly unambiguous.  This could actually be validated before query execution.  When more than one type could have the same field, what would the syntax be? Possibly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;unionobject.object.[2]unionobject.unionobject.[1]unionobject.object.....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the above example, any ambiguous object types being reference can be qualified by the int value of the type in square brackets [].&lt;/p&gt;</comment>
                            <comment id="14118197" author="suma.shivaprasad" created="Tue, 2 Sep 2014 13:37:04 +0000"  >&lt;p&gt;I have a patch for this ready. Will be submitting this shortly.&lt;/p&gt;</comment>
                            <comment id="14124249" author="hiveqa" created="Sat, 6 Sep 2014 01:55:57 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12666766/HIVE-2390.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12666766/HIVE-2390.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6171 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_lazyserde
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-660/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-660/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12666766&lt;/p&gt;</comment>
                            <comment id="14124734" author="hiveqa" created="Sun, 7 Sep 2014 01:47:02 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667013/HIVE-2390.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667013/HIVE-2390.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6184 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_handler_snapshot
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-674/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-674/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667013&lt;/p&gt;</comment>
                            <comment id="14125210" author="amareshwari" created="Mon, 8 Sep 2014 04:36:44 +0000"  >&lt;p&gt;+1 Changes look fine to me.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=suma.shivaprasad&quot; class=&quot;user-hover&quot; rel=&quot;suma.shivaprasad&quot;&gt;Suma Shivaprasad&lt;/a&gt;, Test failure seems unrelated to me. Can you look into and confirm?&lt;/p&gt;</comment>
                            <comment id="14125239" author="suma.shivaprasad" created="Mon, 8 Sep 2014 05:58:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amareshwari&quot; class=&quot;user-hover&quot; rel=&quot;amareshwari&quot;&gt;Amareshwari Sriramadasu&lt;/a&gt; Yes Test Case failure is unrelated to the patch&lt;/p&gt;</comment>
                            <comment id="14125738" author="thejas" created="Mon, 8 Sep 2014 16:48:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=suma.shivaprasad&quot; class=&quot;user-hover&quot; rel=&quot;suma.shivaprasad&quot;&gt;Suma Shivaprasad&lt;/a&gt; Can you please add information to the release notes section (click on edit jira to find it), that can be used to document the change from this jira in wiki ?&lt;/p&gt;</comment>
                            <comment id="14126781" author="amareshwari" created="Tue, 9 Sep 2014 09:07:13 +0000"  >&lt;p&gt;I just committed this. Thanks Suma!&lt;/p&gt;</comment>
                            <comment id="14128124" author="cwsteinbach" created="Wed, 10 Sep 2014 06:16:18 +0000"  >&lt;p&gt;I updated the description of this ticket to accurately reflect the change that was made in this patch.&lt;/p&gt;

&lt;p&gt;My impression is that this patch doesn&apos;t really change the situation in Hive with respect to UNIONTYPEs &amp;#8211; this feature is still unusable. If I&apos;m wrong about this I would appreciate someone setting me straight.&lt;/p&gt;</comment>
                            <comment id="14128486" author="suma.shivaprasad" created="Wed, 10 Sep 2014 13:58:37 +0000"  >&lt;p&gt;Carl,&lt;/p&gt;

&lt;p&gt;I am working on a related feature to support UNIONTYPE in ThriftDeserializer as well.&lt;br/&gt;
Since I am a fairly new contributor to Hive and not aware of the existing issues in UNIONTYPE feature, if someone could identify the missing pieces and raise jiras, i can take a stab at it.&lt;/p&gt;</comment>
                            <comment id="14210206" author="thejas" created="Thu, 13 Nov 2014 19:39:35 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12738423">HIVE-7936</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12527562">HIVE-2508</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12738423">HIVE-7936</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12427012">HIVE-537</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12527873">HIVE-2517</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12667013" name="HIVE-2390.1.patch" size="29402" author="suma.shivaprasad" created="Sat, 6 Sep 2014 12:29:48 +0000"/>
                            <attachment id="12666766" name="HIVE-2390.patch" size="22162" author="suma.shivaprasad" created="Fri, 5 Sep 2014 09:25:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Aug 2011 03:45:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds UnionType support in LazyBinarySerde</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2391] published POMs in Maven repo are incorrect</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2391</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The Hive artifacts published in Apache Maven SNAPSHOTS repo are incorrect. &lt;/p&gt;

&lt;p&gt;Dependencies are not complete.&lt;/p&gt;

&lt;p&gt;Even after adding as dependencies ALL the Hive artifacts it is not possible to compile a project using Hive JARs (I&apos;m trying to integrate Oozie Hive Action using Apache Hive).&lt;/p&gt;

&lt;p&gt;As a reference the Hive CDH POMs dependencies could be used (Using those artifacts I&apos;m able to compile/test/run Hive from within Oozie).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12519222">HIVE-2391</key>
            <summary>published POMs in Maven repo are incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="tucu00">Alejandro Abdelnur</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Aug 2011 01:08:42 +0000</created>
                <updated>Thu, 2 May 2013 02:29:46 +0000</updated>
                            <resolved>Fri, 18 Nov 2011 02:17:37 +0000</resolved>
                                    <version>0.7.1</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13091573" author="amareshwari" created="Fri, 26 Aug 2011 04:38:31 +0000"  >&lt;p&gt;Can you give more details on what dependencies are missing and etc?&lt;/p&gt;</comment>
                            <comment id="13091574" author="tucu00" created="Fri, 26 Aug 2011 04:39:57 +0000"  >&lt;p&gt;As a reference, I&apos;m attaching the dependencies that CDH Hive POMs have.&lt;/p&gt;

&lt;p&gt;Ignoring the versions, they should be pretty much the same. Also note that the ones to be declared are the first level ones only, the deeper ones come transitively.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive common 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-common ---
[INFO] org.apache.hadoop.hive:hive-common:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- commons-cli:commons-cli:jar:1.2:compile
[INFO] +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] +- org.json:json:jar:20090211:compile
[INFO] +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  \- javax.transaction:jta:jar:1.1:compile
[INFO] +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] +- asm:asm:jar:3.1:compile
[INFO] +- commons-codec:commons-codec:jar:1.4:compile
[INFO] +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] +- commons-lang:commons-lang:jar:2.5:compile
[INFO] +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] +- jline:jline:jar:0.9.94:compile
[INFO] +- junit:junit:jar:4.8.1:test (scope not updated to compile)
[INFO] +- log4j:log4j:jar:1.2.16:compile
[INFO] +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] +- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive anttasks 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-anttasks ---
[INFO] org.apache.hadoop.hive:hive-anttasks:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive contrib 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-contrib ---
[INFO] org.apache.hadoop.hive:hive-contrib:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive exec 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-exec ---
[INFO] org.apache.hadoop.hive:hive-exec:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive hwi 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-hwi ---
[INFO] org.apache.hadoop.hive:hive-hwi:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive jdbc 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-jdbc ---
[INFO] org.apache.hadoop.hive:hive-jdbc:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive metastore 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-metastore ---
[INFO] org.apache.hadoop.hive:hive-metastore:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive serde 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-serde ---
[INFO] org.apache.hadoop.hive:hive-serde:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive service 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-service ---
[INFO] org.apache.hadoop.hive:hive-service:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive shims 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-shims ---
[INFO] org.apache.hadoop.hive:hive-shims:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive cli 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-cli ---
[INFO] org.apache.hadoop.hive:hive-cli:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-contrib:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] +- org.apache.hadoop.hive:hive-anttasks:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-exec:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-hwi:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-jdbc:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-metastore:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-serde:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-service:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-shims:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive hbase-handler 0.7.1-cdh3u2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ hive-hbase-handler ---
[INFO] org.apache.hadoop.hive:hive-hbase-handler:pom:0.7.1-cdh3u2-SNAPSHOT
[INFO] +- com.cloudera.cdh:hive-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-common:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO] |  +- org.apache.thrift:libfb303:jar:0.5.0-cdh:compile
[INFO] |  +- org.apache.thrift:libthrift:jar:0.5.0-cdh:compile
[INFO] |  +- org.json:json:jar:20090211:compile
[INFO] |  +- javax.jdo:jdo2-api:jar:2.3-ec:compile
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.0.1:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.1-b1:compile
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.5:compile
[INFO] |  +- commons-logging:commons-logging-api:jar:1.0.4:compile
[INFO] |  +- org.datanucleus:datanucleus-core:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-enhancer:jar:2.0.3:compile
[INFO] |  +- org.datanucleus:datanucleus-rdbms:jar:2.0.3:compile
[INFO] |  +- org.apache.derby:derby:jar:10.6.1.0:compile
[INFO] |  +- jline:jline:jar:0.9.94:compile
[INFO] |  |  \- junit:junit:jar:4.8.1:compile (version managed from 3.8.1)
[INFO] |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO] |  \- com.google.guava:guava:jar:r06:compile
[INFO] +- org.apache.hadoop.hive:hive-serde:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop.hive:hive-exec:jar:0.7.1-cdh3u2-SNAPSHOT:compile
[INFO] +- org.apache.hadoop:hadoop-core:jar:0.20.2-cdh3u2-SNAPSHOT:compile
[INFO] |  +- com.cloudera.cdh:hadoop-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] |  +- xmlenc:xmlenc:jar:0.52:compile
[INFO] |  +- commons-httpclient:commons-httpclient:jar:3.1:compile
[INFO] |  +- commons-net:commons-net:jar:1.4.1:compile
[INFO] |  +- org.mortbay.jetty:jetty:jar:6.1.26:compile
[INFO] |  |  \- org.mortbay.jetty:servlet-api:jar:2.5-20081211:compile
[INFO] |  +- org.mortbay.jetty:jetty-util:jar:6.1.26:compile
[INFO] |  +- tomcat:jasper-runtime:jar:5.5.23:compile
[INFO] |  +- tomcat:jasper-compiler:jar:5.5.23:compile
[INFO] |  |  +- javax.servlet:jsp-api:jar:2.0:compile
[INFO] |  |  \- ant:ant:jar:1.6.5:compile
[INFO] |  +- org.codehaus.jackson:jackson-core-asl:jar:1.5.2:compile
[INFO] |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.5.2:compile
[INFO] |  +- javax.servlet.jsp:jsp-api:jar:2.1:compile
[INFO] |  +- commons-el:commons-el:jar:1.0:compile
[INFO] |  +- net.java.dev.jets3t:jets3t:jar:0.6.1:compile
[INFO] |  +- javax.servlet:servlet-api:jar:2.5:compile
[INFO] |  +- hsqldb:hsqldb:jar:1.8.0.7:compile
[INFO] |  +- oro:oro:jar:2.0.8:compile
[INFO] |  \- org.eclipse.jdt:core:jar:3.1.1:compile
[INFO] +- org.apache.hbase:hbase:jar:0.90.3-cdh3u2-SNAPSHOT:compile
[INFO] |  +- org.apache.hadoop:avro:jar:1.3.2:compile (version managed from 1.3.3)
[INFO] |  +- org.apache.zookeeper:zookeeper:jar:3.3.3-cdh3u2-SNAPSHOT:compile
[INFO] |  |  \- com.cloudera.cdh:zookeeper-ant:pom:3.0-u2-SNAPSHOT:compile
[INFO] |  +- org.apache.thrift:thrift:jar:0.2.0:compile
[INFO] |  +- org.jruby:jruby-complete:jar:1.0.3:compile (version managed from 1.6.0)
[INFO] |  +- org.mortbay.jetty:jsp-2.1:jar:6.1.14:compile
[INFO] |  +- org.mortbay.jetty:jsp-api-2.1:jar:6.1.14:compile
[INFO] |  +- org.mortbay.jetty:servlet-api-2.5:jar:6.1.14:compile
[INFO] |  +- org.slf4j:slf4j-api:jar:1.5.8:compile
[INFO] |  +- org.slf4j:slf4j-log4j12:jar:1.5.8:runtime
[INFO] |  +- org.jamon:jamon-runtime:jar:2.3.1:compile
[INFO] |  +- com.google.protobuf:protobuf-java:jar:2.3.0:compile
[INFO] |  +- com.sun.jersey:jersey-core:jar:1.4:compile
[INFO] |  +- com.sun.jersey:jersey-json:jar:1.4:compile
[INFO] |  |  +- org.codehaus.jettison:jettison:jar:1.1:compile
[INFO] |  |  +- com.sun.xml.bind:jaxb-impl:jar:2.1.12:compile
[INFO] |  |  +- org.codehaus.jackson:jackson-jaxrs:jar:1.5.5:compile
[INFO] |  |  \- org.codehaus.jackson:jackson-xc:jar:1.5.5:compile
[INFO] |  +- com.sun.jersey:jersey-server:jar:1.4:compile
[INFO] |  +- javax.ws.rs:jsr311-api:jar:1.1.1:compile
[INFO] |  +- javax.xml.bind:jaxb-api:jar:2.1:compile
[INFO] |  |  \- javax.activation:activation:jar:1.1:compile
[INFO] |  \- stax:stax-api:jar:1.0.1:compile
[INFO] +- commons-logging:commons-logging:jar:1.0.4:compile
[INFO] \- com.cloudera.cdh:hadoop-root:pom:3.0-u2-SNAPSHOT:compile
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13091711" author="amareshwari" created="Fri, 26 Aug 2011 11:06:53 +0000"  >&lt;p&gt;I tried the following (correct me if I&apos;m wrong here):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removed all the jar from lib/ directory&lt;/li&gt;
	&lt;li&gt;Tried to build each artifact with proper ivy dependencies.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Could build some modules properly after adding missing ivy dependencies. But I think we need to wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2376&quot; title=&quot;Upgrade Hive&amp;#39;s Thrift dependency to version 0.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2376&quot;&gt;&lt;del&gt;HIVE-2376&lt;/del&gt;&lt;/a&gt; to bump up thrift version from 0.5, I did not find any repo for thrift 0.5. &lt;/p&gt;</comment>
                            <comment id="13091746" author="tucu00" created="Fri, 26 Aug 2011 12:44:11 +0000"  >&lt;p&gt;Amareshwari,&lt;/p&gt;

&lt;p&gt;I&apos;m not following why you worry about building Hive, that is working fine. Unless you want to see what JARs end up in each build/lib directory of every module (in case Hive build does that).&lt;/p&gt;

&lt;p&gt;You don&apos;t need Thrift 0.5, you need the correct version of Thrift used by Hive. CDH Hive uses v0.5 because at the time the Thrift JAR was unversioned and we needed a version number.&lt;/p&gt;</comment>
                            <comment id="13092708" author="amareshwari" created="Mon, 29 Aug 2011 08:55:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;You don&apos;t need Thrift 0.5, you need the correct version of Thrift used by Hive. CDH Hive uses v0.5 because at the time the Thrift JAR was unversioned and we needed a version number.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Hive currently uses Thrift 0.5 as far as I know. I could confirm the same from ivy/library.properties and lib/ directory. Also, there is an open issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2376&quot; title=&quot;Upgrade Hive&amp;#39;s Thrift dependency to version 0.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2376&quot;&gt;&lt;del&gt;HIVE-2376&lt;/del&gt;&lt;/a&gt; to move it up. Correct me if I&apos;m wrong.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not following why you worry about building Hive, that is working fine. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could not find any other way to test this. By removing the jars from lib/ directory and build each hive artifact from ivy dependencies, I thought I could add/test the missing dependencies properly. Do you know any other way of testing/reproducing this?&lt;/p&gt;</comment>
                            <comment id="13093155" author="tucu00" created="Mon, 29 Aug 2011 20:18:00 +0000"  >&lt;p&gt;What you could do to easily test this is to checkout the Oozie branch with the patch for Hive action.&lt;/p&gt;

&lt;p&gt;You&apos;ll need Java6 and Maven3.&lt;/p&gt;

&lt;p&gt;GitHub repo: &lt;a href=&quot;https://github.com/tucu00/oozie&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/tucu00/oozie&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Branch: GH-0022bp23&lt;/p&gt;

&lt;p&gt;Edit Oozie&apos;s main POM to use Apache Hive version:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.hadoop.hive&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;hive-cli&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;0.6.0-CDH3B4-SNAPSHOT&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then run &apos;mvn test -Dtest=TestHiveActionExecutor&quot;&lt;/p&gt;

</comment>
                            <comment id="13093262" author="cwsteinbach" created="Mon, 29 Aug 2011 22:19:39 +0000"  >&lt;p&gt;Getting this to work will require a major refactoring of the Ant build files.&lt;br/&gt;
Right now if you try to let Ivy resolve all of the dependencies you&apos;ll find that&lt;br/&gt;
the build fails with a OOM PermGen space error. Apparently this is because we&lt;br/&gt;
define some taskdefs in build-common.xml, and these are effectively&lt;br/&gt;
redefined in each subant call.&lt;/p&gt;</comment>
                            <comment id="13093268" author="tucu00" created="Mon, 29 Aug 2011 22:32:01 +0000"  >&lt;p&gt;@Carl, What does that mean from the resolution of this bug? Will this be addressed or not by Apache Hive?&lt;/p&gt;</comment>
                            <comment id="13093270" author="cwsteinbach" created="Mon, 29 Aug 2011 22:35:51 +0000"  >&lt;p&gt;@Alejandro: It means that the work required to resolve this ticket involves a lot more&lt;br/&gt;
than simply updating the list of dependencies in the various ivy.xml files.&lt;/p&gt;</comment>
                            <comment id="13097207" author="amareshwari" created="Mon, 5 Sep 2011 16:41:07 +0000"  >&lt;p&gt;Once all the missing dependencies are updated in ivy.xml files, I&apos;m seeing the error OOM PermGen space error as Carl stated above. Can you point me to any discussion around this, about the cause and alternative fixes?  &lt;/p&gt;</comment>
                            <comment id="13103968" author="cwsteinbach" created="Tue, 13 Sep 2011 20:48:12 +0000"  >&lt;p&gt;@Amareshwari: The OOM exception is a result of&lt;br/&gt;
taskdefs being repeatedly defined in subant calls. It turns out that these&lt;br/&gt;
taskdefs eat up memory since Ant does not free them when the subant call&lt;br/&gt;
completes. The solution is to move these taskdefs out of build-common.xml&lt;br/&gt;
(which gets sourced by each subant call) and into the top-level build.xml&lt;br/&gt;
file. In fact, I was able to eliminate the OOM exception by moving the&lt;br/&gt;
getversionpref taskdef into build.xml. Please see the attached patch for more&lt;br/&gt;
details.&lt;/p&gt;</comment>
                            <comment id="13104260" author="amareshwari" created="Wed, 14 Sep 2011 05:28:08 +0000"  >&lt;p&gt;Thanks Carl for the patch. I&apos;m able to compile without any OOM problems now.&lt;br/&gt;
One question though, what&apos;s the significance of the new directory deps? It seems difficult to make sure the content in deps directory is correct.&lt;/p&gt;

&lt;p&gt;I&apos;m trying to test the patch by the way Alejandro described above. Will update results soon.&lt;/p&gt;

&lt;p&gt;Minor comment in the patch: ql/build.xml, use velocity version property for velocity jar.&lt;/p&gt;</comment>
                            <comment id="13104263" author="amareshwari" created="Wed, 14 Sep 2011 05:32:11 +0000"  >&lt;p&gt;I wish this should go into 0.8&lt;/p&gt;</comment>
                            <comment id="13104314" author="cwsteinbach" created="Wed, 14 Sep 2011 07:03:12 +0000"  >&lt;p&gt;@Amareshwari: sorry for the confusion. I was planning to&lt;br/&gt;
remove the deps/ directory before the final patch, hence&lt;br/&gt;
the work-in-progress patch name. I generated the files&lt;br/&gt;
in deps by greping through each of the project subdirectories&lt;br/&gt;
for imported packages. I think the resulting lists provide&lt;br/&gt;
a pretty good first-approximation of the actual dependencies,&lt;br/&gt;
but I agree that they are not completely accurate. Also,&lt;br/&gt;
I didn&apos;t finish updating the list of dependencies in each&lt;br/&gt;
of the subprojects.&lt;/p&gt;</comment>
                            <comment id="13133040" author="jiraposter@reviews.apache.org" created="Fri, 21 Oct 2011 20:32:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2391&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ant/build.xml c4351d0 &lt;br/&gt;
  ant/ivy.xml deb96f0 &lt;br/&gt;
  build-common.xml 37b32ec &lt;br/&gt;
  build.properties fc80b03 &lt;br/&gt;
  build.xml 20494ca &lt;br/&gt;
  cli/ivy.xml 0595d94 &lt;br/&gt;
  cli/lib/README 446b0e6 &lt;br/&gt;
  cli/lib/jline-0.9.94.LICENSE 246f54f &lt;br/&gt;
  cli/lib/jline-0.9.94.jar dafca7c &lt;br/&gt;
  common/ivy.xml 722249e &lt;br/&gt;
  contrib/build.xml 14e1e20 &lt;br/&gt;
  contrib/ivy.xml 100cc03 &lt;br/&gt;
  contrib/src/test/queries/clientpositive/dboutput.q dbbcfcb &lt;br/&gt;
  hbase-handler/build.xml f45dbfc &lt;br/&gt;
  hbase-handler/ivy.xml 9b4b38f &lt;br/&gt;
  hwi/build.xml 4919570 &lt;br/&gt;
  hwi/ivy.xml 1860b66 &lt;br/&gt;
  ivy/libraries.properties 8d88562 &lt;br/&gt;
  jdbc/build.xml 641938a &lt;br/&gt;
  jdbc/ivy.xml bc9c69e &lt;br/&gt;
  lib/README 6e993ee &lt;br/&gt;
  lib/asm-3.1.LICENSE 75ad085 &lt;br/&gt;
  lib/asm-3.1.jar b3baf3f &lt;br/&gt;
  lib/commons-collections-3.2.1.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-collections-3.2.1.jar c35fa1f &lt;br/&gt;
  lib/commons-lang-2.4.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-lang-2.4.jar 532939e &lt;br/&gt;
  lib/commons-logging-1.0.4.jar b73a80f &lt;br/&gt;
  lib/commons-logging-api-1.0.4.jar ade9a13 &lt;br/&gt;
  lib/derby.LICENSE 261eeb9 &lt;br/&gt;
  lib/derby.jar dbdc454 &lt;br/&gt;
  lib/json-LICENSE.txt a8c1705 &lt;br/&gt;
  lib/json-README.txt 67b8909 &lt;br/&gt;
  lib/json.jar 219760c &lt;br/&gt;
  lib/log4j-1.2.15.jar c930a6a &lt;br/&gt;
  lib/velocity-1.5.jar 7c7f2c4 &lt;br/&gt;
  lib/velocity.LICENSE 261eeb9 &lt;br/&gt;
  metastore/build.xml af46bc9 &lt;br/&gt;
  metastore/ivy.xml 7d90b25 &lt;br/&gt;
  odbc/ivy.xml PRE-CREATION &lt;br/&gt;
  pdk/build.xml 374e5d1 &lt;br/&gt;
  pdk/ivy.xml 411e126 &lt;br/&gt;
  ql/build.xml 8b22508 &lt;br/&gt;
  ql/ivy.xml a09e970 &lt;br/&gt;
  ql/lib/README d11400e &lt;br/&gt;
  ql/lib/antlr-2.7.7.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-2.7.7.jar 5e5f14b &lt;br/&gt;
  ql/lib/antlr-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-3.0.1.jar 7d37952 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.jar b2efb5b &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.jar 096f863 &lt;br/&gt;
  serde/build.xml 471c43d &lt;br/&gt;
  serde/ivy.xml 290cb6c &lt;br/&gt;
  service/build.xml 10e8cf1 &lt;br/&gt;
  service/ivy.xml c37efdc &lt;br/&gt;
  shims/build.xml 3930ca2 &lt;br/&gt;
  shims/ivy.xml c1785aa &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2529/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Verified that &apos;ant clean package&apos; works. Also ran some testcases. Currently running full regression tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;
</comment>
                            <comment id="13133042" author="cwsteinbach" created="Fri, 21 Oct 2011 20:34:00 +0000"  >&lt;p&gt;Review request: &lt;a href=&quot;https://reviews.apache.org/r/2529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Directions for applying patch:&lt;br/&gt;
1) apply the patch&lt;br/&gt;
2) svn remove everything in lib/ except javaewah* and README&lt;br/&gt;
3) svn remove everything in cli/lib&lt;br/&gt;
4) svn remove everything in ql/lib&lt;/p&gt;</comment>
                            <comment id="13133109" author="cwsteinbach" created="Fri, 21 Oct 2011 21:59:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.2.patch.txt:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Bump ivy.version to 2.2.0 in order work around &lt;a href=&quot;https://issues.apache.org/jira/browse/IVY-1148&quot; title=&quot;Encountered &amp;#39;multiple artifacts retrieved to same file&amp;#39; error when module does not have multiple artifacts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IVY-1148&quot;&gt;&lt;del&gt;IVY-1148&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13133110" author="jiraposter@reviews.apache.org" created="Fri, 21 Oct 2011 22:00:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-21 22:02:10.187459)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updating the diff with new Ivy version number.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2391&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ant/build.xml c4351d0 &lt;br/&gt;
  ant/ivy.xml deb96f0 &lt;br/&gt;
  build-common.xml 37b32ec &lt;br/&gt;
  build.properties fc80b03 &lt;br/&gt;
  build.xml 20494ca &lt;br/&gt;
  cli/ivy.xml 0595d94 &lt;br/&gt;
  cli/lib/README 446b0e6 &lt;br/&gt;
  cli/lib/jline-0.9.94.LICENSE 246f54f &lt;br/&gt;
  cli/lib/jline-0.9.94.jar dafca7c &lt;br/&gt;
  common/ivy.xml 722249e &lt;br/&gt;
  contrib/build.xml 14e1e20 &lt;br/&gt;
  contrib/ivy.xml 100cc03 &lt;br/&gt;
  contrib/src/test/queries/clientpositive/dboutput.q dbbcfcb &lt;br/&gt;
  hbase-handler/build.xml f45dbfc &lt;br/&gt;
  hbase-handler/ivy.xml 9b4b38f &lt;br/&gt;
  hwi/build.xml 4919570 &lt;br/&gt;
  hwi/ivy.xml 1860b66 &lt;br/&gt;
  ivy/libraries.properties 8d88562 &lt;br/&gt;
  jdbc/build.xml 641938a &lt;br/&gt;
  jdbc/ivy.xml bc9c69e &lt;br/&gt;
  lib/README 6e993ee &lt;br/&gt;
  lib/asm-3.1.LICENSE 75ad085 &lt;br/&gt;
  lib/asm-3.1.jar b3baf3f &lt;br/&gt;
  lib/commons-collections-3.2.1.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-collections-3.2.1.jar c35fa1f &lt;br/&gt;
  lib/commons-lang-2.4.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-lang-2.4.jar 532939e &lt;br/&gt;
  lib/commons-logging-1.0.4.jar b73a80f &lt;br/&gt;
  lib/commons-logging-api-1.0.4.jar ade9a13 &lt;br/&gt;
  lib/derby.LICENSE 261eeb9 &lt;br/&gt;
  lib/derby.jar dbdc454 &lt;br/&gt;
  lib/json-LICENSE.txt a8c1705 &lt;br/&gt;
  lib/json-README.txt 67b8909 &lt;br/&gt;
  lib/json.jar 219760c &lt;br/&gt;
  lib/log4j-1.2.15.jar c930a6a &lt;br/&gt;
  lib/velocity-1.5.jar 7c7f2c4 &lt;br/&gt;
  lib/velocity.LICENSE 261eeb9 &lt;br/&gt;
  metastore/build.xml af46bc9 &lt;br/&gt;
  metastore/ivy.xml 7d90b25 &lt;br/&gt;
  odbc/ivy.xml PRE-CREATION &lt;br/&gt;
  pdk/build.xml 374e5d1 &lt;br/&gt;
  pdk/ivy.xml 411e126 &lt;br/&gt;
  ql/build.xml 8b22508 &lt;br/&gt;
  ql/ivy.xml a09e970 &lt;br/&gt;
  ql/lib/README d11400e &lt;br/&gt;
  ql/lib/antlr-2.7.7.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-2.7.7.jar 5e5f14b &lt;br/&gt;
  ql/lib/antlr-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-3.0.1.jar 7d37952 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.jar b2efb5b &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.jar 096f863 &lt;br/&gt;
  serde/build.xml 471c43d &lt;br/&gt;
  serde/ivy.xml 290cb6c &lt;br/&gt;
  service/build.xml 10e8cf1 &lt;br/&gt;
  service/ivy.xml c37efdc &lt;br/&gt;
  shims/build.xml 3930ca2 &lt;br/&gt;
  shims/ivy.xml c1785aa &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2529/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Verified that &apos;ant clean package&apos; works. Also ran some testcases. Currently running full regression tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;
</comment>
                            <comment id="13133600" author="amareshwari" created="Sun, 23 Oct 2011 09:51:14 +0000"  >&lt;p&gt;Thanks Carl. Patch looks good. But, Alejandro was expecting the individual poms to contain dependencies within other hive artifacts also. For example, pom for cli would contain shims, serde, exec, metastore etc.  But, the current patch is not so. Alejandro, are you fine with the current patch, to resolve external dependencies?&lt;/p&gt;</comment>
                            <comment id="13133602" author="jiraposter@reviews.apache.org" created="Sun, 23 Oct 2011 09:56:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2529/#review2783&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/#review2783&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;build.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2529/#comment6244&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/#comment6244&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Minor : Can you remove the commented code, if not required?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Amareshwari&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-21 22:02:10, Carl Steinbach wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-21 22:02:10)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2391&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ant/build.xml c4351d0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ant/ivy.xml deb96f0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 37b32ec &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build.properties fc80b03 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build.xml 20494ca &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/ivy.xml 0595d94 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/lib/README 446b0e6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/lib/jline-0.9.94.LICENSE 246f54f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/lib/jline-0.9.94.jar dafca7c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/ivy.xml 722249e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;contrib/build.xml 14e1e20 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;contrib/ivy.xml 100cc03 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;contrib/src/test/queries/clientpositive/dboutput.q dbbcfcb &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hbase-handler/build.xml f45dbfc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hbase-handler/ivy.xml 9b4b38f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hwi/build.xml 4919570 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hwi/ivy.xml 1860b66 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ivy/libraries.properties 8d88562 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;jdbc/build.xml 641938a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;jdbc/ivy.xml bc9c69e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/README 6e993ee &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/asm-3.1.LICENSE 75ad085 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/asm-3.1.jar b3baf3f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-collections-3.2.1.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-collections-3.2.1.jar c35fa1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-lang-2.4.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-lang-2.4.jar 532939e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-logging-1.0.4.jar b73a80f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-logging-api-1.0.4.jar ade9a13 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/derby.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/derby.jar dbdc454 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/json-LICENSE.txt a8c1705 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/json-README.txt 67b8909 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/json.jar 219760c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/log4j-1.2.15.jar c930a6a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/velocity-1.5.jar 7c7f2c4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/velocity.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;metastore/build.xml af46bc9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;metastore/ivy.xml 7d90b25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;odbc/ivy.xml PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pdk/build.xml 374e5d1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pdk/ivy.xml 411e126 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 8b22508 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/ivy.xml a09e970 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/README d11400e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-2.7.7.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-2.7.7.jar 5e5f14b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-3.0.1.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-3.0.1.jar 7d37952 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-runtime-3.0.1.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-runtime-3.0.1.jar b2efb5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/stringtemplate-3.1b1.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/stringtemplate-3.1b1.jar 096f863 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;serde/build.xml 471c43d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;serde/ivy.xml 290cb6c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/build.xml 10e8cf1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/ivy.xml c37efdc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;shims/build.xml 3930ca2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;shims/ivy.xml c1785aa &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2529/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Verified that &apos;ant clean package&apos; works. Also ran some testcases. Currently running full regression tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Carl&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13137396" author="jvs" created="Thu, 27 Oct 2011 19:00:58 +0000"  >&lt;p&gt;Carl, I tried running ant tar, and got an error&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
docs:
     [echo] Project: hive

ivy-init-settings:
     [echo] Project: hive

ivy-docs:
     [echo] Project: hive
[ivy:resolve] :: loading settings :: file = /data/users/jsichi/open/test-trunk/ivy/ivysettings.xml

BUILD FAILED
/data/users/jsichi/open/test-trunk/build.xml:614: The following error occurred while executing this line:
/data/users/jsichi/open/test-trunk/build.xml:800: impossible to configure ivy:settings with given file: /data/users/jsichi/open/test-trunk/ivy/ivysettings.xml : java.text.ParseException: failed to load settings from file:/data/users/jsichi/open/test-trunk/ivy/ivysettings.xml: unknown cache manager ${ivy.cache.name}
	at org.apache.ivy.core.settings.XmlSettingsParser.doParse(XmlSettingsParser.java:165)
	at org.apache.ivy.core.settings.XmlSettingsParser.parse(XmlSettingsParser.java:150)
	at org.apache.ivy.core.settings.IvySettings.load(IvySettings.java:388)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13143803" author="jiraposter@reviews.apache.org" created="Fri, 4 Nov 2011 07:30:59 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-10-23 09:56:59, Amareshwari Sriramadasu wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; build.xml, line 719&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2529/diff/2/?file=52288#file52288line719&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/diff/2/?file=52288#file52288line719&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Minor : Can you remove the commented code, if not required?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2529/#review2783&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/#review2783&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-10-21 22:02:10, Carl Steinbach wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-21 22:02:10)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2391&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ant/build.xml c4351d0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ant/ivy.xml deb96f0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 37b32ec &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build.properties fc80b03 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build.xml 20494ca &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/ivy.xml 0595d94 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/lib/README 446b0e6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/lib/jline-0.9.94.LICENSE 246f54f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/lib/jline-0.9.94.jar dafca7c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/ivy.xml 722249e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;contrib/build.xml 14e1e20 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;contrib/ivy.xml 100cc03 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;contrib/src/test/queries/clientpositive/dboutput.q dbbcfcb &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hbase-handler/build.xml f45dbfc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hbase-handler/ivy.xml 9b4b38f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hwi/build.xml 4919570 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hwi/ivy.xml 1860b66 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ivy/libraries.properties 8d88562 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;jdbc/build.xml 641938a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;jdbc/ivy.xml bc9c69e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/README 6e993ee &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/asm-3.1.LICENSE 75ad085 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/asm-3.1.jar b3baf3f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-collections-3.2.1.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-collections-3.2.1.jar c35fa1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-lang-2.4.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-lang-2.4.jar 532939e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-logging-1.0.4.jar b73a80f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/commons-logging-api-1.0.4.jar ade9a13 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/derby.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/derby.jar dbdc454 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/json-LICENSE.txt a8c1705 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/json-README.txt 67b8909 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/json.jar 219760c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/log4j-1.2.15.jar c930a6a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/velocity-1.5.jar 7c7f2c4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/velocity.LICENSE 261eeb9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;metastore/build.xml af46bc9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;metastore/ivy.xml 7d90b25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;odbc/ivy.xml PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pdk/build.xml 374e5d1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pdk/ivy.xml 411e126 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 8b22508 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/ivy.xml a09e970 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/README d11400e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-2.7.7.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-2.7.7.jar 5e5f14b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-3.0.1.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-3.0.1.jar 7d37952 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-runtime-3.0.1.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/antlr-runtime-3.0.1.jar b2efb5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/stringtemplate-3.1b1.LICENSE 1d1d5d6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/lib/stringtemplate-3.1b1.jar 096f863 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;serde/build.xml 471c43d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;serde/ivy.xml 290cb6c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/build.xml 10e8cf1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/ivy.xml c37efdc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;shims/build.xml 3930ca2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;shims/ivy.xml c1785aa &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2529/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Verified that &apos;ant clean package&apos; works. Also ran some testcases. Currently running full regression tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Carl&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13143804" author="jiraposter@reviews.apache.org" created="Fri, 4 Nov 2011 07:31:01 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-04 07:30:29.507801)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Include cross-project dependencies.&lt;/li&gt;
	&lt;li&gt;Remove commented code in build.xml&lt;/li&gt;
	&lt;li&gt;Updated Eclipse classpath template&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Verified that the following Ant targets work: jar, package, tar, binary, checkstyle, eclipse-files, maven-build, maven-publish.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2391&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ant/build.xml c4351d0 &lt;br/&gt;
  ant/ivy.xml deb96f0 &lt;br/&gt;
  build-common.xml 37b32ec &lt;br/&gt;
  build.properties fc80b03 &lt;br/&gt;
  build.xml a3a95a5 &lt;br/&gt;
  cli/build.xml 958cfe7 &lt;br/&gt;
  cli/ivy.xml 0595d94 &lt;br/&gt;
  cli/lib/README 446b0e6 &lt;br/&gt;
  cli/lib/jline-0.9.94.LICENSE 246f54f &lt;br/&gt;
  cli/lib/jline-0.9.94.jar dafca7c &lt;br/&gt;
  common/build.xml 66322dc &lt;br/&gt;
  common/ivy.xml 722249e &lt;br/&gt;
  contrib/build.xml 14e1e20 &lt;br/&gt;
  contrib/ivy.xml 100cc03 &lt;br/&gt;
  contrib/src/test/queries/clientpositive/dboutput.q dbbcfcb &lt;br/&gt;
  eclipse-templates/.classpath 1b97ae9 &lt;br/&gt;
  hbase-handler/build.xml f45dbfc &lt;br/&gt;
  hbase-handler/ivy.xml 9b4b38f &lt;br/&gt;
  hwi/build.xml 4919570 &lt;br/&gt;
  hwi/ivy.xml 1860b66 &lt;br/&gt;
  ivy.xml 566bb40 &lt;br/&gt;
  ivy/common-configurations.xml PRE-CREATION &lt;br/&gt;
  ivy/ivysettings.xml a2587c7 &lt;br/&gt;
  ivy/libraries.properties 8d88562 &lt;br/&gt;
  jdbc/build.xml 641938a &lt;br/&gt;
  jdbc/ivy.xml bc9c69e &lt;br/&gt;
  lib/README 6e993ee &lt;br/&gt;
  lib/asm-3.1.LICENSE 75ad085 &lt;br/&gt;
  lib/asm-3.1.jar b3baf3f &lt;br/&gt;
  lib/commons-collections-3.2.1.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-collections-3.2.1.jar c35fa1f &lt;br/&gt;
  lib/commons-lang-2.4.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-lang-2.4.jar 532939e &lt;br/&gt;
  lib/commons-logging-1.0.4.jar b73a80f &lt;br/&gt;
  lib/commons-logging-api-1.0.4.jar ade9a13 &lt;br/&gt;
  lib/derby.LICENSE 261eeb9 &lt;br/&gt;
  lib/derby.jar dbdc454 &lt;br/&gt;
  lib/json-LICENSE.txt a8c1705 &lt;br/&gt;
  lib/json-README.txt 67b8909 &lt;br/&gt;
  lib/json.jar 219760c &lt;br/&gt;
  lib/log4j-1.2.15.jar c930a6a &lt;br/&gt;
  lib/velocity-1.5.jar 7c7f2c4 &lt;br/&gt;
  lib/velocity.LICENSE 261eeb9 &lt;br/&gt;
  metastore/build.xml af46bc9 &lt;br/&gt;
  metastore/ivy.xml 7d90b25 &lt;br/&gt;
  odbc/ivy.xml PRE-CREATION &lt;br/&gt;
  pdk/build.xml 374e5d1 &lt;br/&gt;
  pdk/ivy.xml 411e126 &lt;br/&gt;
  ql/build.xml 8b22508 &lt;br/&gt;
  ql/ivy.xml a09e970 &lt;br/&gt;
  ql/lib/README d11400e &lt;br/&gt;
  ql/lib/antlr-2.7.7.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-2.7.7.jar 5e5f14b &lt;br/&gt;
  ql/lib/antlr-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-3.0.1.jar 7d37952 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.jar b2efb5b &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.jar 096f863 &lt;br/&gt;
  serde/build.xml 471c43d &lt;br/&gt;
  serde/ivy.xml 290cb6c &lt;br/&gt;
  service/build.xml 10e8cf1 &lt;br/&gt;
  service/ivy.xml c37efdc &lt;br/&gt;
  shims/build.xml 3930ca2 &lt;br/&gt;
  shims/ivy.xml c1785aa &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2529/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Verified that &apos;ant clean package&apos; works. Also ran some testcases. Currently running full regression tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;
</comment>
                            <comment id="13144307" author="cwsteinbach" created="Fri, 4 Nov 2011 20:25:11 +0000"  >&lt;p&gt;I got a couple diffs when running query tests. &lt;/p&gt;</comment>
                            <comment id="13144421" author="cwsteinbach" created="Fri, 4 Nov 2011 22:37:42 +0000"  >&lt;p&gt;Ok, the new version of the patch fixes the test failures I encountered. Running full tests now.&lt;/p&gt;

&lt;p&gt;Please review. Thanks!&lt;/p&gt;</comment>
                            <comment id="13144422" author="jiraposter@reviews.apache.org" created="Fri, 4 Nov 2011 22:37:51 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-04 22:36:42.714354)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated patch. Fixes test failures caused by classpath issue affecting stats db, and set_processor_namespaces.q&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2391&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ant/build.xml c4351d0 &lt;br/&gt;
  ant/ivy.xml deb96f0 &lt;br/&gt;
  build-common.xml 37b32ec &lt;br/&gt;
  build.properties fc80b03 &lt;br/&gt;
  build.xml a3a95a5 &lt;br/&gt;
  cli/build.xml 958cfe7 &lt;br/&gt;
  cli/ivy.xml 0595d94 &lt;br/&gt;
  cli/lib/README 446b0e6 &lt;br/&gt;
  cli/lib/jline-0.9.94.LICENSE 246f54f &lt;br/&gt;
  cli/lib/jline-0.9.94.jar dafca7c &lt;br/&gt;
  common/build.xml 66322dc &lt;br/&gt;
  common/ivy.xml 722249e &lt;br/&gt;
  contrib/build.xml 14e1e20 &lt;br/&gt;
  contrib/ivy.xml 100cc03 &lt;br/&gt;
  contrib/src/test/queries/clientpositive/dboutput.q dbbcfcb &lt;br/&gt;
  eclipse-templates/.classpath 1b97ae9 &lt;br/&gt;
  hbase-handler/build.xml f45dbfc &lt;br/&gt;
  hbase-handler/ivy.xml 9b4b38f &lt;br/&gt;
  hwi/build.xml 4919570 &lt;br/&gt;
  hwi/ivy.xml 1860b66 &lt;br/&gt;
  ivy.xml 566bb40 &lt;br/&gt;
  ivy/common-configurations.xml PRE-CREATION &lt;br/&gt;
  ivy/ivysettings.xml a2587c7 &lt;br/&gt;
  ivy/libraries.properties 8d88562 &lt;br/&gt;
  jdbc/build.xml 641938a &lt;br/&gt;
  jdbc/ivy.xml bc9c69e &lt;br/&gt;
  lib/README 6e993ee &lt;br/&gt;
  lib/asm-3.1.LICENSE 75ad085 &lt;br/&gt;
  lib/asm-3.1.jar b3baf3f &lt;br/&gt;
  lib/commons-collections-3.2.1.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-collections-3.2.1.jar c35fa1f &lt;br/&gt;
  lib/commons-lang-2.4.LICENSE 261eeb9 &lt;br/&gt;
  lib/commons-lang-2.4.jar 532939e &lt;br/&gt;
  lib/commons-logging-1.0.4.jar b73a80f &lt;br/&gt;
  lib/commons-logging-api-1.0.4.jar ade9a13 &lt;br/&gt;
  lib/derby.LICENSE 261eeb9 &lt;br/&gt;
  lib/derby.jar dbdc454 &lt;br/&gt;
  lib/json-LICENSE.txt a8c1705 &lt;br/&gt;
  lib/json-README.txt 67b8909 &lt;br/&gt;
  lib/json.jar 219760c &lt;br/&gt;
  lib/log4j-1.2.15.jar c930a6a &lt;br/&gt;
  lib/velocity-1.5.jar 7c7f2c4 &lt;br/&gt;
  lib/velocity.LICENSE 261eeb9 &lt;br/&gt;
  metastore/build.xml af46bc9 &lt;br/&gt;
  metastore/ivy.xml 7d90b25 &lt;br/&gt;
  odbc/ivy.xml PRE-CREATION &lt;br/&gt;
  pdk/build.xml 374e5d1 &lt;br/&gt;
  pdk/ivy.xml 411e126 &lt;br/&gt;
  ql/build.xml 8b22508 &lt;br/&gt;
  ql/ivy.xml a09e970 &lt;br/&gt;
  ql/lib/README d11400e &lt;br/&gt;
  ql/lib/antlr-2.7.7.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-2.7.7.jar 5e5f14b &lt;br/&gt;
  ql/lib/antlr-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-3.0.1.jar 7d37952 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/antlr-runtime-3.0.1.jar b2efb5b &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.LICENSE 1d1d5d6 &lt;br/&gt;
  ql/lib/stringtemplate-3.1b1.jar 096f863 &lt;br/&gt;
  ql/src/test/queries/clientpositive/set_processor_namespaces.q 8fe2eb8 &lt;br/&gt;
  ql/src/test/results/clientpositive/set_processor_namespaces.q.out a365e2c &lt;br/&gt;
  serde/build.xml 471c43d &lt;br/&gt;
  serde/ivy.xml 290cb6c &lt;br/&gt;
  service/build.xml 10e8cf1 &lt;br/&gt;
  service/ivy.xml c37efdc &lt;br/&gt;
  shims/build.xml 3930ca2 &lt;br/&gt;
  shims/ivy.xml c1785aa &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2529/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2529/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Verified that &apos;ant clean package&apos; works. Also ran some testcases. Currently running full regression tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;
</comment>
                            <comment id="13145117" author="jvs" created="Sun, 6 Nov 2011 21:28:16 +0000"  >&lt;p&gt;Running through tests again now.&lt;/p&gt;</comment>
                            <comment id="13145667" author="tucu00" created="Mon, 7 Nov 2011 18:17:08 +0000"  >&lt;p&gt;I&apos;m trying to test the Maven artifacts created by the patch, but I don&apos;t see an Ant target to install the JARs/POms in the local Maven cache. Am I missing something?&lt;/p&gt;</comment>
                            <comment id="13145781" author="jvs" created="Mon, 7 Nov 2011 20:41:02 +0000"  >&lt;p&gt;Tests passed cleanly on trunk.  I tried applying &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;.5.patch.txt on 0.8 and got conflicts; Carl, do you want to give me a backport for that and then I can commit both?&lt;/p&gt;</comment>
                            <comment id="13145806" author="tucu00" created="Mon, 7 Nov 2011 21:07:58 +0000"  >&lt;p&gt;John, Carl, any answer to my previous comment? Thxs&lt;/p&gt;</comment>
                            <comment id="13146126" author="cwsteinbach" created="Tue, 8 Nov 2011 07:47:57 +0000"  >&lt;p&gt;@John: Please go ahead and commit this to trunk. I will handle doing the backport myself next week.&lt;/p&gt;

&lt;p&gt;@Alejandro: The target you&apos;re looking for does not exist. Please file a ticket if you think we need one. Thanks.&lt;/p&gt;</comment>
                            <comment id="13146488" author="jvs" created="Tue, 8 Nov 2011 19:28:54 +0000"  >&lt;p&gt;OK, +1, committed to trunk.  I&apos;ll leave this open and you can mark it resolved once you commit the backport?&lt;/p&gt;</comment>
                            <comment id="13146669" author="hudson" created="Tue, 8 Nov 2011 23:57:27 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1069 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1069/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1069/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;. Published POMs in Maven repo are incorrect&lt;br/&gt;
(Carl Steinbach via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199399&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199399&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ant/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ant/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/lib/README&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/lib/jline-0.9.94.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/lib/jline-0.9.94.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/queries/clientpositive/dboutput.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/common-configurations.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/README&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/asm-3.1.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/asm-3.1.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/commons-collections-3.2.1.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/commons-collections-3.2.1.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/commons-lang-2.4.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/commons-lang-2.4.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/commons-logging-1.0.4.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/commons-logging-api-1.0.4.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/derby.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/derby.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/json-LICENSE.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/json-README.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/json.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/velocity-1.5.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/velocity.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/odbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/README&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/antlr-2.7.7.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/antlr-2.7.7.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/antlr-3.0.1.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/antlr-3.0.1.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/antlr-runtime-3.0.1.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/antlr-runtime-3.0.1.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/stringtemplate-3.1b1.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/lib/stringtemplate-3.1b1.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/set_processor_namespaces.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/set_processor_namespaces.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13148108" author="tucu00" created="Thu, 10 Nov 2011 23:31:06 +0000"  >&lt;p&gt;Sorry to pop the ballon but the published POMs (in Apache snapshots repo) are still wrong. Including hive-cli should pull all necessary dependencies to run Hive programmatically.&lt;/p&gt;

&lt;p&gt;However:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;somewhere a hadoop:core artifact is being referenced (it should be org.apache.hadoop:hadoop-core)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;hive-cli does not depend on other Hive JARs, thus things fail (building Oozie Hive action) with:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveMain.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;30,44&amp;#93;&lt;/span&gt; package org.apache.hadoop.hive.contrib.serde2 does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveMain.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;40,30&amp;#93;&lt;/span&gt; package org.apache.velocity.app does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveActionExecutor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;45,44&amp;#93;&lt;/span&gt; package org.apache.hadoop.hive.contrib.serde2 does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveActionExecutor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;67,30&amp;#93;&lt;/span&gt; package org.apache.velocity.app does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveMain.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;121,51&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol  : class VelocityEngine&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.oozie.action.hadoop.TestHiveMain&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveMain.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;131,55&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol  : class RegexSerDe&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.oozie.action.hadoop.TestHiveMain&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveActionExecutor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;271,47&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol  : class VelocityEngine&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.oozie.action.hadoop.TestHiveActionExecutor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tucu/src/apache/oozie/git/core/src/test/java/org/apache/oozie/action/hadoop/TestHiveActionExecutor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;279,51&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol  : class RegexSerDe&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.oozie.action.hadoop.TestHiveActionExecutor&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If I use the Hive artifacts from Cloudera&apos;s maven repo things work as expected.&lt;/p&gt;</comment>
                            <comment id="13148958" author="cwsteinbach" created="Sat, 12 Nov 2011 02:46:54 +0000"  >&lt;p&gt;@Alejandro: Which snapshot POM did you look at? I&apos;m looking at the one here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/service/local/repositories/snapshots/content/org/apache/hive/hive-cli/0.9.0-SNAPSHOT/hive-cli-0.9.0-20111111.234949-97.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/service/local/repositories/snapshots/content/org/apache/hive/hive-cli/0.9.0-SNAPSHOT/hive-cli-0.9.0-20111111.234949-97.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems to have the correct Hive dependencies.&lt;/p&gt;

&lt;p&gt;Also, hive-contrib, which contains the RegexSerDe, is not on the Hive classpath by default. You have to add this manually. If an Oozie testcase references this directly then you need to add hive-contrib as one of your dependencies.&lt;/p&gt;</comment>
                            <comment id="13148962" author="cwsteinbach" created="Sat, 12 Nov 2011 02:52:58 +0000"  >&lt;p&gt;@Alejandro: Also, it doesn&apos;t look like Apache Oozie includes the HiveActionExecutor. Which repo/branch do I need to look in to find this code?&lt;/p&gt;</comment>
                            <comment id="13150081" author="tucu00" created="Mon, 14 Nov 2011 23:39:23 +0000"  >&lt;p&gt;Adding &apos;hive-contrib&apos; as an explicit dependency fixes things and I&apos;m able to use Hive 0.9.0-SNAPSHOT, THXS!!!!!&lt;/p&gt;

&lt;p&gt;Still, hive POMs refer to an invalid dependency, groupId=hadoop &amp;amp; artifactId=core. Iit should be &apos;org.apache.hadoop&apos; and &apos;hadoop-core&apos; respectively.&lt;/p&gt;
</comment>
                            <comment id="13152692" author="hudson" created="Fri, 18 Nov 2011 06:54:07 +0000"  >&lt;p&gt;Integrated in Hive-0.8.0-SNAPSHOT-h0.21 #100 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/100/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/100/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt;. Published POMs in Maven repo are incorrect (Carl Steinbach via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1203462&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1203462&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ant/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ant/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/cli/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/cli/lib&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/common/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/contrib/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/contrib/src/test/queries/clientpositive/dboutput.q&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/hwi/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ivy/common-configurations.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/jdbc/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/jdbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/README&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/asm-3.1.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/asm-3.1.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/commons-collections-3.2.1.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/commons-collections-3.2.1.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/commons-lang-2.4.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/commons-lang-2.4.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/commons-logging-1.0.4.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/commons-logging-api-1.0.4.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/derby.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/derby.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/json-LICENSE.txt&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/json-README.txt&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/json.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/velocity-1.5.jar&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/lib/velocity.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/metastore/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/odbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/pdk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/pdk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ql/lib&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ql/src/test/queries/clientpositive/set_processor_namespaces.q&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/ql/src/test/results/clientpositive/set_processor_namespaces.q.out&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/serde/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/service/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/service/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/shims/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/shims/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13161361" author="mithun" created="Fri, 2 Dec 2011 02:02:19 +0000"  >&lt;p&gt;The currently published pom.xml seems to indicate the following:&lt;br/&gt;
(from &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/hive/hive-metastore/0.8.0-SNAPSHOT/hive-metastore-0.8.0-20111130.194742-149.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/hive/hive-metastore/0.8.0-SNAPSHOT/hive-metastore-0.8.0-20111130.194742-149.pom&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&amp;lt;dependency&amp;gt;&lt;br/&gt;
&amp;lt;groupId&amp;gt;hadoop&amp;lt;/groupId&amp;gt;&lt;br/&gt;
&amp;lt;artifactId&amp;gt;core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
&amp;lt;version&amp;gt;0.20.1&amp;lt;/version&amp;gt;&lt;br/&gt;
&amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;&lt;br/&gt;
&amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;Could the pom please be corrected to reference the hadoop-core jar correctly? (Unless of course I&apos;m missing something, in which case, may I please know which repository this artifact might be pulled from?)&lt;/p&gt;</comment>
                            <comment id="13161365" author="cwsteinbach" created="Fri, 2 Dec 2011 02:18:03 +0000"  >&lt;p&gt;@Mithun: Thanks for pointing this out. I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2622&quot; title=&quot;Hive POMs reference the wrong Hadoop artifacts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2622&quot;&gt;&lt;del&gt;HIVE-2622&lt;/del&gt;&lt;/a&gt; to track this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12533561">HIVE-2622</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12526534">HCATALOG-132</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12530735">HIVE-2559</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12500238" name="HIVE-2391.1.patch.txt" size="147024" author="cwsteinbach" created="Fri, 21 Oct 2011 20:30:22 +0000"/>
                            <attachment id="12500255" name="HIVE-2391.2.patch.txt" size="147024" author="cwsteinbach" created="Fri, 21 Oct 2011 21:59:08 +0000"/>
                            <attachment id="12502365" name="HIVE-2391.3.patch.txt" size="168326" author="cwsteinbach" created="Fri, 4 Nov 2011 07:26:48 +0000"/>
                            <attachment id="12502368" name="HIVE-2391.4.patch.txt" size="168271" author="cwsteinbach" created="Fri, 4 Nov 2011 07:31:08 +0000"/>
                            <attachment id="12502541" name="HIVE-2391.5.patch.txt" size="170337" author="cwsteinbach" created="Fri, 4 Nov 2011 22:35:25 +0000"/>
                            <attachment id="12494309" name="HIVE-2391.wip.1.patch.txt" size="199497" author="cwsteinbach" created="Tue, 13 Sep 2011 20:38:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Aug 2011 04:38:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35789</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123857</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2392] HiveConnection should support passing clientInfo Properties</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2392</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When calling&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;DriverManager.getConnection(String url, Properties clientInfo)&lt;/tt&gt; &lt;/p&gt;

&lt;p&gt;hive should pass &lt;tt&gt;clientInfo&lt;/tt&gt; to the &lt;/p&gt;

&lt;p&gt;&lt;tt&gt;this.session = new JdbcSessionState(new HiveConf(SessionState.class))&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;call in &lt;tt&gt;HiveConnection(String uri, Properties info)&lt;/tt&gt; to allow setting hive variables such as &lt;tt&gt;hive.session.silent&lt;/tt&gt;. This will avoid the use of &lt;tt&gt;System.setProperty&lt;/tt&gt; in the client and conform to expected JDBC usage patterns&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519308">HIVE-2392</key>
            <summary>HiveConnection should support passing clientInfo Properties</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="btiernay">Bob Tiernay</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Aug 2011 15:48:30 +0000</created>
                <updated>Sun, 18 Jan 2015 00:50:31 +0000</updated>
                                            <version>0.7.0</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14281608" author="btiernay" created="Sun, 18 Jan 2015 00:50:31 +0000"  >&lt;p&gt;Any update here?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ocv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48545</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2393] Fix whitespace test diff accidentally introduced in HIVE-1360</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2393</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12519344">HIVE-2393</key>
            <summary>Fix whitespace test diff accidentally introduced in HIVE-1360</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Aug 2011 21:27:04 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:57 +0000</updated>
                            <resolved>Fri, 19 Aug 2011 03:47:59 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13087312" author="cwsteinbach" created="Thu, 18 Aug 2011 21:34:25 +0000"  >&lt;p&gt;This is a single-character update to udf_named_struct.q.out which fixes a test diff I introduced when I committed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;. I think the diff was introduced by a pre-commit whitespace trigger in svn.&lt;/p&gt;</comment>
                            <comment id="13087499" author="amareshwari" created="Fri, 19 Aug 2011 03:47:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;The diff only for the testcase. The testcase passes after the patch. &lt;/p&gt;

&lt;p&gt;I just committed this. Thanks Carl!&lt;/p&gt;</comment>
                            <comment id="13087676" author="hudson" created="Fri, 19 Aug 2011 12:23:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #905 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/905/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/905/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2393&quot; title=&quot;Fix whitespace test diff accidentally introduced in HIVE-1360&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2393&quot;&gt;&lt;del&gt;HIVE-2393&lt;/del&gt;&lt;/a&gt;. Fix whitespace test diff accidentally introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;. (Carl Steinbach via amareshwari)&lt;/p&gt;

&lt;p&gt;amareshwari : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159496&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159496&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_named_struct.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490869" name="HIVE-2393.1.patch.txt" size="482" author="cwsteinbach" created="Thu, 18 Aug 2011 21:33:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 03:47:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123858</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2394] Improve test coverage for ALTER TABLE PARTITION statements</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2394</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12519361">HIVE-2394</key>
            <summary>Improve test coverage for ALTER TABLE PARTITION statements</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2011 01:05:38 +0000</created>
                <updated>Fri, 19 Aug 2011 01:15:22 +0000</updated>
                                                                            <component>Metastore</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13087446" author="cwsteinbach" created="Fri, 19 Aug 2011 01:15:08 +0000"  >&lt;p&gt;It&apos;s possible to alter the properties of individual partitions using&lt;br/&gt;
the ALTER TABLE statement, but we currently have very little test&lt;br/&gt;
coverage for these scenarios.&lt;/p&gt;

&lt;p&gt;We should add tests (both positive and negative) for the following cases:&lt;/p&gt;

&lt;p&gt;ALTER TABLE tbl PARTITION partspec alter_op&lt;/p&gt;

&lt;p&gt;where alter_op ==&lt;br/&gt;
SET FILEFORMAT&lt;br/&gt;
SET LOCATION&lt;br/&gt;
SET TBLPROPERTIES (shouldn&apos;t work?)&lt;br/&gt;
DROP PARTITION (shouldn&apos;t work)&lt;br/&gt;
ADD PARTITION (shouldn&apos;t work)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2395] Misleading &quot;No LZO codec found, cannot run.&quot; exception when using external table and LZO / DeprecatedLzoTextInputFormat</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2395</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We have a &lt;tt&gt;/tables/&lt;/tt&gt; directory containing .lzo files with our data, compressed using lzop.&lt;/p&gt;

&lt;p&gt;We &lt;tt&gt;CREATE EXTERNAL TABLE&lt;/tt&gt; on top of this directory, using &lt;tt&gt;STORED AS INPUTFORMAT &quot;com.hadoop.mapred.DeprecatedLzoTextInputFormat&quot;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;.lzo files require that an LzoIndexer is run on them. When this is done, .lzo.index file is created for every .lzo file, so we end up with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/tables/ourdata_2011-08-19.lzo
/tables/ourdata_2011-08-19.lzo.index
/tables/ourdata_2011-08-18.lzo
/tables/ourdata_2011-08-18.lzo.index
..etc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issue is that org.apache.hadoop.hive.ql.io.CombineHiveRecordReader is attempting to getRecordReader() for .lzo.index files. This throws a pretty confusing exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.io.IOException: No LZO codec found, cannot run.
        at com.hadoop.mapred.DeprecatedLzoLineRecordReader.&amp;lt;init&amp;gt;(DeprecatedLzoLineRecordReader.java:53)
        at com.hadoop.mapred.DeprecatedLzoTextInputFormat.getRecordReader(DeprecatedLzoTextInputFormat.java:128)
        at org.apache.hadoop.hive.ql.io.CombineHiveRecordReader.&amp;lt;init&amp;gt;(CombineHiveRecordReader.java:68)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;More precisely, it dies on second invocation of getRecordReader() - here is some System.out.println() output:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DeprecatedLzoTextInputFormat.getRecordReader(): split=/tables/ourdata_2011-08-19.lzo:0+616479
DeprecatedLzoTextInputFormat.getRecordReader(): split=/tables/ourdata_2011-08-19.lzo.index:0+64
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;DeprecatedLzoTextInputFormat contains the following code which causes the ultimate exception and death of query, as it obviously doesn&apos;t have a codec to read .lzo.index files.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    final CompressionCodec codec = codecFactory.getCodec(file);
    if (codec == null) {
      throw new IOException(&quot;No LZO codec found, cannot run.&quot;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I understand that the way things are right now is that Hive considers all files within a directory to be part of a table. There is an open patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-951&quot; title=&quot;Selectively include EXTERNAL TABLE source files via REGEX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-951&quot;&gt;HIVE-951&lt;/a&gt; which would allow a quick workaround for this problem.&lt;/p&gt;

&lt;p&gt;Does it make sense to add some hooks so that CombineHiveRecordReader or its parents are more aware of what files should be considered instead of blindly trying to read everything?&lt;/p&gt;

&lt;p&gt;Any suggestions for a quick workaround to make it skip .index files?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Cloudera 3u1 with &lt;a href=&quot;https://github.com/kevinweil/hadoop-lzo&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kevinweil/hadoop-lzo&lt;/a&gt; or &lt;a href=&quot;https://github.com/kevinweil/elephant-bird&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kevinweil/elephant-bird&lt;/a&gt;&lt;/p&gt;</environment>
        <key id="12519372">HIVE-2395</key>
            <summary>Misleading &quot;No LZO codec found, cannot run.&quot; exception when using external table and LZO / DeprecatedLzoTextInputFormat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vitaliy.fuks">Vitaliy Fuks</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2011 05:07:54 +0000</created>
                <updated>Sat, 1 Sep 2012 16:26:55 +0000</updated>
                            <resolved>Sat, 1 Sep 2012 16:26:55 +0000</resolved>
                                    <version>0.7.1</version>
                                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13089612" author="rangadi" created="Tue, 23 Aug 2011 17:41:50 +0000"  >&lt;p&gt;&amp;gt; .lzo files require that an LzoIndexer is run on them.&lt;/p&gt;

&lt;p&gt;This is not a requirement. You need the index file only if you want split large lzo files. You could just remove the index files as a quick workaround (in which case you might as well use just TextInputFormat ).&lt;/p&gt;</comment>
                            <comment id="13089907" author="vitaliy.fuks" created="Wed, 24 Aug 2011 00:47:03 +0000"  >&lt;p&gt;Right, of course, and that&apos;s the workaround we went with. With smaller-than-block files it really doesn&apos;t matter.&lt;/p&gt;

&lt;p&gt;After I filed this ticket I did a quick and dirty hack on DeprecatedLzoTextInputFormat to ignore .lzo.index files. However, I actually found that it doesn&apos;t read larger-than-block-size .lzo files correctly at all - it either crashes with things like ArrayIndexOutOfBoundsException in LzoDecompressor.setInput() or just outright ignores all data beyond the block size. This would happen even if .lzo.index files were absent.&lt;/p&gt;

&lt;p&gt;So then I recreated tables without using INPUTFORMAT &quot;DeprecatedLzoTextInputFormat&quot; and it&apos;s returning correct data. It still attempts to read .lzo.index files as data so we are going un-indexed as a workaround (with the lack of splitting as the side effect, obviously). At this point, I wasn&apos;t sure why we were using DeprecatedLzoTextInputFormat in the first place, other than Google &quot;told&quot; us to. Maybe Hive codebase moved beyond needing it?&lt;/p&gt;

&lt;p&gt;I will try code changes from &lt;a href=&quot;https://github.com/kevinweil/hadoop-lzo/pull/28&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kevinweil/hadoop-lzo/pull/28&lt;/a&gt; when I have some free time.&lt;/p&gt;

&lt;p&gt;PS. Our hadoop-lzo.jar is from January 2011 release (v0.4.8) built by Gerrit.&lt;/p&gt;</comment>
                            <comment id="13446757" author="vitaliy.fuks" created="Sat, 1 Sep 2012 16:26:55 +0000"  >&lt;p&gt;Latest hadoop-lzo libraries do not exhibit this behavior.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12409298">HIVE-80</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Aug 2011 17:41:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123860</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2396] RCFileReader Buffer Reuse</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2396</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Minor tweak to RCFile$Reader which improves read performance by reusing value buffers.  This reduces object allocation.&lt;/p&gt;

&lt;p&gt;Depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2350&quot; title=&quot;Improve RCFile Read Speed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2350&quot;&gt;&lt;del&gt;HIVE-2350&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519434">HIVE-2396</key>
            <summary>RCFileReader Buffer Reuse</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tarmstrong">Tim Armstrong</assignee>
                                    <reporter username="tarmstrong">Tim Armstrong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2011 17:30:03 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:51 +0000</updated>
                            <resolved>Wed, 24 Aug 2011 04:54:55 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13087821" author="tarmstrong" created="Fri, 19 Aug 2011 17:35:32 +0000"  >&lt;p&gt;This passes the unit test suite.&lt;/p&gt;</comment>
                            <comment id="13087949" author="cwsteinbach" created="Fri, 19 Aug 2011 20:32:40 +0000"  >&lt;p&gt;@Tim: That patch doesn&apos;t apply cleanly. Can you please rebase it? Thanks.&lt;/p&gt;</comment>
                            <comment id="13087970" author="tarmstrong" created="Fri, 19 Aug 2011 21:01:56 +0000"  >&lt;p&gt;It depends on the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2350&quot; title=&quot;Improve RCFile Read Speed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2350&quot;&gt;&lt;del&gt;HIVE-2350&lt;/del&gt;&lt;/a&gt;, which haven&apos;t shown up in trunk yet, I&apos;ll wait until trunk is updated then submit a clean patch.&lt;/p&gt;</comment>
                            <comment id="13087981" author="he yongqiang" created="Fri, 19 Aug 2011 21:21:33 +0000"  >&lt;p&gt;@Carl, can you verify that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2350&quot; title=&quot;Improve RCFile Read Speed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2350&quot;&gt;&lt;del&gt;HIVE-2350&lt;/del&gt;&lt;/a&gt; is committed to trunk or not, and if not, can u commit to trunk? Thanks!&lt;/p&gt;</comment>
                            <comment id="13088971" author="cwsteinbach" created="Mon, 22 Aug 2011 20:02:44 +0000"  >&lt;p&gt;@Yongqiang: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2350&quot; title=&quot;Improve RCFile Read Speed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2350&quot;&gt;&lt;del&gt;HIVE-2350&lt;/del&gt;&lt;/a&gt; was not committed. Closing that ticket was a mistake on my part. Yes, I&apos;ll commit it to trunk.&lt;/p&gt;</comment>
                            <comment id="13089555" author="nzhang" created="Tue, 23 Aug 2011 16:00:52 +0000"  >&lt;p&gt;Tim, could you create a review board request (reviews.apache.org) and upload the patch there (after necessary rebasing)? It would be much easier for review there. &lt;/p&gt;</comment>
                            <comment id="13089598" author="tarmstrong" created="Tue, 23 Aug 2011 17:19:26 +0000"  >&lt;p&gt;Review board request is now online: &lt;a href=&quot;https://reviews.apache.org/r/1628/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1628/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13089814" author="cwsteinbach" created="Tue, 23 Aug 2011 22:12:18 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13090004" author="cwsteinbach" created="Wed, 24 Aug 2011 04:54:55 +0000"  >&lt;p&gt;Committed to trunk. Thanks Tim!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491366" name="rcfile_bufreuse-2011-08-23.patch" size="3044" author="tarmstrong" created="Tue, 23 Aug 2011 17:18:47 +0000"/>
                            <attachment id="12490973" name="rcfile_bufreuse_2011-08-19.patch" size="2962" author="tarmstrong" created="Fri, 19 Aug 2011 17:34:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 20:32:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123861</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2397] Support with rollup option for group by</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2397</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We should support the ROLLUP operator similar to the way MySQL is implemented. &lt;/p&gt;

&lt;p&gt;Exerted from MySQL documents:&lt;/p&gt;

&lt;p&gt;mysql&amp;gt; SELECT year, country, product, SUM(profit)&lt;br/&gt;
    -&amp;gt; FROM sales&lt;br/&gt;
    -&amp;gt; GROUP BY year, country, product WITH ROLLUP;&lt;br/&gt;
&lt;ins&gt;-----&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; year &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; country &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; product    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; SUM(profit) &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;-----&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Finland &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Computer   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        1500 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Finland &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Phone      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;         100 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Finland &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        1600 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; India   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Calculator &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;         150 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; India   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Computer   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        1200 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; India   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        1350 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; USA     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Calculator &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;          75 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; USA     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Computer   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        1500 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; USA     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        1575 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        4525 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2001 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Finland &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Phone      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;          10 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2001 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Finland &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;          10 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2001 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; USA     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Calculator &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;          50 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2001 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; USA     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Computer   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        2700 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2001 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; USA     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; TV         &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;         250 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2001 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; USA     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        3000 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2001 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        3010 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; NULL       &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        7535 &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;-----&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------+&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519459">HIVE-2397</key>
            <summary>Support with rollup option for group by</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                            <label>TODOC10</label>
                    </labels>
                <created>Fri, 19 Aug 2011 19:32:50 +0000</created>
                <updated>Sat, 23 Jun 2018 16:44:56 +0000</updated>
                            <resolved>Mon, 17 Sep 2012 04:24:08 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13090361" author="jiraposter@reviews.apache.org" created="Wed, 24 Aug 2011 17:42:33 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Ning Zhang and Siying Dong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If a user runs a query that includes group by ... with rollup, the behavior is like that of MySQL, see the task.&lt;/p&gt;

&lt;p&gt;I had to implement 4 different ways of providing this behavior to fit in with the 4 different ways of implementing group by depending on whether map aggregation is allowed, and whether the data is known to be skewed.&lt;/p&gt;

&lt;p&gt;If map aggregation is allowed, it is a simple matter of adding new keys with an increasing number of NULLs to the hash map to collect the data for the new rows as part of the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is not skewed, I perform a reduce job which performs a hash aggregation very similar to the way it is performed on the map side.  I then perform a mergepartial reduce job to perform a final aggregation on the hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are no distinct aggregations for the group by, I aggregate data for the new rows with NULLs as part of the non-hash aggregation.  This was as simple as adding the new functionality to the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are distinct aggregations fro the group by, I perform a reduce job which performs  a hash aggregation, and then use the same implementation that is used when there is no rollup option set.&lt;/p&gt;

&lt;p&gt;I have done my best not to detract from any optimizations that were made for each of the four different implementations of group by, but, r for the ones where I add a new reduce job, I am not sure how successful I was.&lt;/p&gt;

&lt;p&gt;Currently, the optimizations for multiple group bys is not supported for queries with the rollup option set, but I am continuing to look into this.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; title=&quot;Support with rollup option for group by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2397&quot;&gt;&lt;del&gt;HIVE-2397&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapper.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapperFactory.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/GroupByDesc.java 1160895 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby10_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby11_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_nomap_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby9_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_neg_float_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_nomap_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_neg_float_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ListObjectsEqualComparer.java 1160895 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1637/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;For each existing group by test that looked like it might be relevant, I added a corresponding test with the rollup option set.  (I had found a number of bugs as I was implementing this with these tests, so I am satisfied that they are indeed relevant)&lt;/p&gt;

&lt;p&gt;I also added a new test which provides good coverage of having multiple group by keys with both distinct and non-distinct aggregations in each of the four different implementations with the rollup operator set.&lt;/p&gt;

&lt;p&gt;I also ran the original group by tests to verify I did not break anything.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13091244" author="jiraposter@reviews.apache.org" created="Thu, 25 Aug 2011 19:24:29 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-25 19:23:58.241135)&lt;/p&gt;


&lt;p&gt;Review request for hive, Ning Zhang and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Ning pointed out to me that the hash based aggregation was being done in the mapper when map aggregation was turned off.&lt;/p&gt;

&lt;p&gt;I fixed this, so now it is being done in the reducer.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If a user runs a query that includes group by ... with rollup, the behavior is like that of MySQL, see the task.&lt;/p&gt;

&lt;p&gt;I had to implement 4 different ways of providing this behavior to fit in with the 4 different ways of implementing group by depending on whether map aggregation is allowed, and whether the data is known to be skewed.&lt;/p&gt;

&lt;p&gt;If map aggregation is allowed, it is a simple matter of adding new keys with an increasing number of NULLs to the hash map to collect the data for the new rows as part of the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is not skewed, I perform a reduce job which performs a hash aggregation very similar to the way it is performed on the map side.  I then perform a mergepartial reduce job to perform a final aggregation on the hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are no distinct aggregations for the group by, I aggregate data for the new rows with NULLs as part of the non-hash aggregation.  This was as simple as adding the new functionality to the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are distinct aggregations fro the group by, I perform a reduce job which performs  a hash aggregation, and then use the same implementation that is used when there is no rollup option set.&lt;/p&gt;

&lt;p&gt;I have done my best not to detract from any optimizations that were made for each of the four different implementations of group by, but, r for the ones where I add a new reduce job, I am not sure how successful I was.&lt;/p&gt;

&lt;p&gt;Currently, the optimizations for multiple group bys is not supported for queries with the rollup option set, but I am continuing to look into this.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; title=&quot;Support with rollup option for group by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2397&quot;&gt;&lt;del&gt;HIVE-2397&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapper.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapperFactory.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/GroupByDesc.java 1160895 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby10_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby11_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_nomap_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby9_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_neg_float_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_nomap_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_neg_float_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ListObjectsEqualComparer.java 1160895 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1637/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;For each existing group by test that looked like it might be relevant, I added a corresponding test with the rollup option set.  (I had found a number of bugs as I was implementing this with these tests, so I am satisfied that they are indeed relevant)&lt;/p&gt;

&lt;p&gt;I also added a new test which provides good coverage of having multiple group by keys with both distinct and non-distinct aggregations in each of the four different implementations with the rollup operator set.&lt;/p&gt;

&lt;p&gt;I also ran the original group by tests to verify I did not break anything.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13091377" author="jiraposter@reviews.apache.org" created="Thu, 25 Aug 2011 22:32:28 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-25 22:30:34.960572)&lt;/p&gt;


&lt;p&gt;Review request for hive, Ning Zhang and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fixes a bug.&lt;/p&gt;

&lt;p&gt;Previously, if hash aggregation wasn&apos;t reducing the number of entries, the aggregation was switched to sort based.  However, if rollup is being used, hash aggregation needs to be kept on regardless because only hash aggregation can handle distincts.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If a user runs a query that includes group by ... with rollup, the behavior is like that of MySQL, see the task.&lt;/p&gt;

&lt;p&gt;I had to implement 4 different ways of providing this behavior to fit in with the 4 different ways of implementing group by depending on whether map aggregation is allowed, and whether the data is known to be skewed.&lt;/p&gt;

&lt;p&gt;If map aggregation is allowed, it is a simple matter of adding new keys with an increasing number of NULLs to the hash map to collect the data for the new rows as part of the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is not skewed, I perform a reduce job which performs a hash aggregation very similar to the way it is performed on the map side.  I then perform a mergepartial reduce job to perform a final aggregation on the hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are no distinct aggregations for the group by, I aggregate data for the new rows with NULLs as part of the non-hash aggregation.  This was as simple as adding the new functionality to the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are distinct aggregations fro the group by, I perform a reduce job which performs  a hash aggregation, and then use the same implementation that is used when there is no rollup option set.&lt;/p&gt;

&lt;p&gt;I have done my best not to detract from any optimizations that were made for each of the four different implementations of group by, but, r for the ones where I add a new reduce job, I am not sure how successful I was.&lt;/p&gt;

&lt;p&gt;Currently, the optimizations for multiple group bys is not supported for queries with the rollup option set, but I am continuing to look into this.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; title=&quot;Support with rollup option for group by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2397&quot;&gt;&lt;del&gt;HIVE-2397&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapper.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapperFactory.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/GroupByDesc.java 1160895 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby10_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby11_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_nomap_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby9_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_neg_float_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_nomap_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_neg_float_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ListObjectsEqualComparer.java 1160895 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1637/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;For each existing group by test that looked like it might be relevant, I added a corresponding test with the rollup option set.  (I had found a number of bugs as I was implementing this with these tests, so I am satisfied that they are indeed relevant)&lt;/p&gt;

&lt;p&gt;I also added a new test which provides good coverage of having multiple group by keys with both distinct and non-distinct aggregations in each of the four different implementations with the rollup operator set.&lt;/p&gt;

&lt;p&gt;I also ran the original group by tests to verify I did not break anything.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13098523" author="kevinwilfong" created="Wed, 7 Sep 2011 01:32:30 +0000"  >&lt;p&gt;I create a Design Doc in the Hive Wiki describing the changes to the query plan produced by this change. &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/GroupByWithRollup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/GroupByWithRollup&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13098530" author="jiraposter@reviews.apache.org" created="Wed, 7 Sep 2011 01:36:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-07 01:34:25.870854)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and Siying Dong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If a user runs a query that includes group by ... with rollup, the behavior is like that of MySQL, see the task.&lt;/p&gt;

&lt;p&gt;I had to implement 4 different ways of providing this behavior to fit in with the 4 different ways of implementing group by depending on whether map aggregation is allowed, and whether the data is known to be skewed.&lt;/p&gt;

&lt;p&gt;If map aggregation is allowed, it is a simple matter of adding new keys with an increasing number of NULLs to the hash map to collect the data for the new rows as part of the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is not skewed, I perform a reduce job which performs a hash aggregation very similar to the way it is performed on the map side.  I then perform a mergepartial reduce job to perform a final aggregation on the hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are no distinct aggregations for the group by, I aggregate data for the new rows with NULLs as part of the non-hash aggregation.  This was as simple as adding the new functionality to the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are distinct aggregations fro the group by, I perform a reduce job which performs  a hash aggregation, and then use the same implementation that is used when there is no rollup option set.&lt;/p&gt;

&lt;p&gt;I have done my best not to detract from any optimizations that were made for each of the four different implementations of group by, but, r for the ones where I add a new reduce job, I am not sure how successful I was.&lt;/p&gt;

&lt;p&gt;Currently, the optimizations for multiple group bys is not supported for queries with the rollup option set, but I am continuing to look into this.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; title=&quot;Support with rollup option for group by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2397&quot;&gt;&lt;del&gt;HIVE-2397&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapper.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapperFactory.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1160895 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/GroupByDesc.java 1160895 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby10_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby11_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_nomap_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby9_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_neg_float_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_nomap_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_neg_float_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ListObjectsEqualComparer.java 1160895 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1637/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;For each existing group by test that looked like it might be relevant, I added a corresponding test with the rollup option set.  (I had found a number of bugs as I was implementing this with these tests, so I am satisfied that they are indeed relevant)&lt;/p&gt;

&lt;p&gt;I also added a new test which provides good coverage of having multiple group by keys with both distinct and non-distinct aggregations in each of the four different implementations with the rollup operator set.&lt;/p&gt;

&lt;p&gt;I also ran the original group by tests to verify I did not break anything.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13099593" author="jiraposter@reviews.apache.org" created="Wed, 7 Sep 2011 21:49:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-07 21:47:48.620408)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Two changes:&lt;/p&gt;

&lt;p&gt;1) Added groupby_withrollup.q.out, but forgot to add groupby_withrollup.q&lt;/p&gt;

&lt;p&gt;2) I modified the method modifyAggregations in GroupbyOperator to take a list of AggregationBuffer[]&apos;s.  This makes it so that we only need to evaluate each row of input once, and then we can update all the rollup aggregations at once, instead of reevaluating the same row of input for each rollup row.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If a user runs a query that includes group by ... with rollup, the behavior is like that of MySQL, see the task.&lt;/p&gt;

&lt;p&gt;I had to implement 4 different ways of providing this behavior to fit in with the 4 different ways of implementing group by depending on whether map aggregation is allowed, and whether the data is known to be skewed.&lt;/p&gt;

&lt;p&gt;If map aggregation is allowed, it is a simple matter of adding new keys with an increasing number of NULLs to the hash map to collect the data for the new rows as part of the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is not skewed, I perform a reduce job which performs a hash aggregation very similar to the way it is performed on the map side.  I then perform a mergepartial reduce job to perform a final aggregation on the hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are no distinct aggregations for the group by, I aggregate data for the new rows with NULLs as part of the non-hash aggregation.  This was as simple as adding the new functionality to the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are distinct aggregations fro the group by, I perform a reduce job which performs  a hash aggregation, and then use the same implementation that is used when there is no rollup option set.&lt;/p&gt;

&lt;p&gt;I have done my best not to detract from any optimizations that were made for each of the four different implementations of group by, but, r for the ones where I add a new reduce job, I am not sure how successful I was.&lt;/p&gt;

&lt;p&gt;Currently, the optimizations for multiple group bys is not supported for queries with the rollup option set, but I am continuing to look into this.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; title=&quot;Support with rollup option for group by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2397&quot;&gt;&lt;del&gt;HIVE-2397&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java 1166376 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapper.java 1166376 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapperFactory.java 1166376 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1166376 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1166376 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/GroupByDesc.java 1166376 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby10_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby11_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_nomap_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby9_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_neg_float_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_nomap_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_neg_float_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ListObjectsEqualComparer.java 1166376 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1637/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;For each existing group by test that looked like it might be relevant, I added a corresponding test with the rollup option set.  (I had found a number of bugs as I was implementing this with these tests, so I am satisfied that they are indeed relevant)&lt;/p&gt;

&lt;p&gt;I also added a new test which provides good coverage of having multiple group by keys with both distinct and non-distinct aggregations in each of the four different implementations with the rollup operator set.&lt;/p&gt;

&lt;p&gt;I also ran the original group by tests to verify I did not break anything.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13127866" author="jiraposter@reviews.apache.org" created="Fri, 14 Oct 2011 21:14:11 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-14 21:14:02.700645)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;It&apos;s been a while, so I ran svn up.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If a user runs a query that includes group by ... with rollup, the behavior is like that of MySQL, see the task.&lt;/p&gt;

&lt;p&gt;I had to implement 4 different ways of providing this behavior to fit in with the 4 different ways of implementing group by depending on whether map aggregation is allowed, and whether the data is known to be skewed.&lt;/p&gt;

&lt;p&gt;If map aggregation is allowed, it is a simple matter of adding new keys with an increasing number of NULLs to the hash map to collect the data for the new rows as part of the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is not skewed, I perform a reduce job which performs a hash aggregation very similar to the way it is performed on the map side.  I then perform a mergepartial reduce job to perform a final aggregation on the hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are no distinct aggregations for the group by, I aggregate data for the new rows with NULLs as part of the non-hash aggregation.  This was as simple as adding the new functionality to the map side hash aggregation.&lt;/p&gt;

&lt;p&gt;If map aggregation is not allowed and the data is skewed and there are distinct aggregations fro the group by, I perform a reduce job which performs  a hash aggregation, and then use the same implementation that is used when there is no rollup option set.&lt;/p&gt;

&lt;p&gt;I have done my best not to detract from any optimizations that were made for each of the four different implementations of group by, but, r for the ones where I add a new reduce job, I am not sure how successful I was.&lt;/p&gt;

&lt;p&gt;Currently, the optimizations for multiple group bys is not supported for queries with the rollup option set, but I am continuing to look into this.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; title=&quot;Support with rollup option for group by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2397&quot;&gt;&lt;del&gt;HIVE-2397&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java 1183502 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapper.java 1183502 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/KeyWrapperFactory.java 1183502 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1183502 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1183502 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/GroupByDesc.java 1183502 &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby10_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby11_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_nomap_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby1_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_limit_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby2_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby7_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_skew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_map_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_noskew_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby8_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby9_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_map_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_neg_float_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_multi_distinct_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_ppr_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/groupby_withrollup.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_nomap_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_limit_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby7_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_map_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_neg_float_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_multi_distinct_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_ppr_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby_withrollup.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ListObjectsEqualComparer.java 1183502 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1637/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1637/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;For each existing group by test that looked like it might be relevant, I added a corresponding test with the rollup option set.  (I had found a number of bugs as I was implementing this with these tests, so I am satisfied that they are indeed relevant)&lt;/p&gt;

&lt;p&gt;I also added a new test which provides good coverage of having multiple group by keys with both distinct and non-distinct aggregations in each of the four different implementations with the rollup operator set.&lt;/p&gt;

&lt;p&gt;I also ran the original group by tests to verify I did not break anything.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13456752" author="namit" created="Mon, 17 Sep 2012 04:24:08 +0000"  >&lt;p&gt;duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3433&quot; title=&quot;Implement CUBE and ROLLUP operators in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3433&quot;&gt;&lt;del&gt;HIVE-3433&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12606252">HIVE-3433</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13167833">IMPALA-7204</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12491681" name="HIVE-2397.2.patch.txt" size="722264" author="kevinwilfong" created="Thu, 25 Aug 2011 19:29:52 +0000"/>
                            <attachment id="12491699" name="HIVE-2397.3.patch.txt" size="722759" author="kevinwilfong" created="Thu, 25 Aug 2011 22:39:48 +0000"/>
                            <attachment id="12493516" name="HIVE-2397.4.patch.txt" size="739918" author="kevinwilfong" created="Wed, 7 Sep 2011 21:48:14 +0000"/>
                            <attachment id="12499099" name="HIVE-2397.5.patch.txt" size="739868" author="kevinwilfong" created="Fri, 14 Oct 2011 21:14:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Aug 2011 17:42:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42136</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2398] Hive server doesn&apos;t return schema for &apos;set&apos; command</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2398</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The Hive server does process the CLI commands like &apos;set&apos;, &apos;set -v&apos; sent by ODBC or JDBC clients. But currently only the data is returned to client but not schema for that resultset. This makes it unusable for a ODBC or JDBC client to use this option.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519477">HIVE-2398</key>
            <summary>Hive server doesn&apos;t return schema for &apos;set&apos; command</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadm">Prasad Mujumdar</assignee>
                                    <reporter username="prasadm">Prasad Mujumdar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2011 22:18:23 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:40 +0000</updated>
                            <resolved>Thu, 15 Sep 2011 20:16:55 +0000</resolved>
                                    <version>0.7.1</version>
                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13088036" author="jiraposter@reviews.apache.org" created="Fri, 19 Aug 2011 22:39:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The Hive server currently has the framework to process the Cli commands like &apos;set&apos;. But it returns an empty schema definition for these resultsets. The patch here is to add a getSchema() to the CommandResponse interface. The SetProcessor is modified to build a schema object which is returned with getSchema.&lt;br/&gt;
HiveServer is modified to call the getSchema for command cases as well.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2398&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/processors/CommandProcessorResponse.java 4f7f472 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java 97fa1ab &lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java c4b041f &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested with ODBC program to execute the set command. Ran Hive unit tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Prasad&lt;/p&gt;
</comment>
                            <comment id="13088037" author="prasadm" created="Fri, 19 Aug 2011 22:39:54 +0000"  >&lt;p&gt;Review request - &lt;a href=&quot;https://reviews.apache.org/r/1605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13102909" author="jiraposter@reviews.apache.org" created="Mon, 12 Sep 2011 18:45:12 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1605/#review1857&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#review1857&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Please add a testcase. Also, I tried running &apos;set -v&apos; from the CLI after setting hive.cli.print.header=true, and I don&apos;t see the column name in the output. This seems like a bug?&lt;/p&gt;


&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1605/#comment4245&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#comment4245&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Checkstyle: static final variable names should appear in ALL CAPS&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1605/#comment4248&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#comment4248&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    bld? Might be good to change the name to getSchema. Also, since setColName is a constant there&apos;s no need for this method to have an input parameter.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1605/#comment4247&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#comment4247&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please add static imports for STRING_TYPE_NAME, SERIALIZATION_NULL_FORMAT, and defaultNullString.&lt;/p&gt;



&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1605/#comment4249&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#comment4249&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This comment is no longer valid. Also, it might be cleaner to remove the else clause.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-19 22:37:45, Prasad Mujumdar wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-19 22:37:45)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The Hive server currently has the framework to process the Cli commands like &apos;set&apos;. But it returns an empty schema definition for these resultsets. The patch here is to add a getSchema() to the CommandResponse interface. The SetProcessor is modified to build a schema object which is returned with getSchema.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HiveServer is modified to call the getSchema for command cases as well.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2398&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/CommandProcessorResponse.java 4f7f472 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java 97fa1ab &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java c4b041f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested with ODBC program to execute the set command. Ran Hive unit tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Prasad&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13103945" author="jiraposter@reviews.apache.org" created="Tue, 13 Sep 2011 20:05:08 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-13 20:03:48.343559)&lt;/p&gt;


&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Changes per review comments. &lt;br/&gt;
Added a JDBC test.&lt;/p&gt;

&lt;p&gt;The CLI behaviour does look like a but. The JDBC and ODBC client are working fine, but CLI is not printing the header. I will go ahead and log a separate Jira for that. &lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The Hive server currently has the framework to process the Cli commands like &apos;set&apos;. But it returns an empty schema definition for these resultsets. The patch here is to add a getSchema() to the CommandResponse interface. The SetProcessor is modified to build a schema object which is returned with getSchema.&lt;br/&gt;
HiveServer is modified to call the getSchema for command cases as well.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2398&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java e744d11 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/processors/CommandProcessorResponse.java 4f7f472 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java 9ca5ca4 &lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java 95f322a &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested with ODBC program to execute the set command. Ran Hive unit tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Prasad&lt;/p&gt;
</comment>
                            <comment id="13104738" author="jiraposter@reviews.apache.org" created="Wed, 14 Sep 2011 18:11:08 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1605/#review1895&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#review1895&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1605/#comment4376&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#comment4376&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Need to assert that the size of the resultset is &amp;gt; 0. Might also be good to log the contents of the resultset.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-09-13 20:03:48, Prasad Mujumdar wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-09-13 20:03:48)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The Hive server currently has the framework to process the Cli commands like &apos;set&apos;. But it returns an empty schema definition for these resultsets. The patch here is to add a getSchema() to the CommandResponse interface. The SetProcessor is modified to build a schema object which is returned with getSchema.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HiveServer is modified to call the getSchema for command cases as well.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2398&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java e744d11 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/CommandProcessorResponse.java 4f7f472 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java 9ca5ca4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java 95f322a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested with ODBC program to execute the set command. Ran Hive unit tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Prasad&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13104817" author="jiraposter@reviews.apache.org" created="Wed, 14 Sep 2011 19:42:08 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-14 19:41:13.647029)&lt;/p&gt;


&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added check for resultset non empty. &lt;br/&gt;
The full &quot;set -v&quot; output would be too long, also most of the rows will different in each test setup. Hence I am suggesting not to do that. Let me know if you disagree.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The Hive server currently has the framework to process the Cli commands like &apos;set&apos;. But it returns an empty schema definition for these resultsets. The patch here is to add a getSchema() to the CommandResponse interface. The SetProcessor is modified to build a schema object which is returned with getSchema.&lt;br/&gt;
HiveServer is modified to call the getSchema for command cases as well.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2398&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java e744d11 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/processors/CommandProcessorResponse.java 4f7f472 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java 9ca5ca4 &lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java 95f322a &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested with ODBC program to execute the set command. Ran Hive unit tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Prasad&lt;/p&gt;
</comment>
                            <comment id="13104818" author="prasadm" created="Wed, 14 Sep 2011 19:42:47 +0000"  >&lt;p&gt;New patch that with changes per review comments.&lt;/p&gt;</comment>
                            <comment id="13104819" author="prasadm" created="Wed, 14 Sep 2011 19:43:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;.patch.1 is the new patch&lt;/p&gt;</comment>
                            <comment id="13104986" author="jiraposter@reviews.apache.org" created="Wed, 14 Sep 2011 23:10:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1605/#review1903&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/#review1903&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-09-14 19:41:13, Prasad Mujumdar wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-09-14 19:41:13)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The Hive server currently has the framework to process the Cli commands like &apos;set&apos;. But it returns an empty schema definition for these resultsets. The patch here is to add a getSchema() to the CommandResponse interface. The SetProcessor is modified to build a schema object which is returned with getSchema.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HiveServer is modified to call the getSchema for command cases as well.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2398&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java e744d11 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/CommandProcessorResponse.java 4f7f472 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java 9ca5ca4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java 95f322a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1605/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1605/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested with ODBC program to execute the set command. Ran Hive unit tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Prasad&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13105658" author="cwsteinbach" created="Thu, 15 Sep 2011 20:16:56 +0000"  >&lt;p&gt;Committed to trunk. Thanks Prasad!&lt;/p&gt;</comment>
                            <comment id="13105807" author="hudson" created="Fri, 16 Sep 2011 01:41:37 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #957 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/957/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/957/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2398&quot; title=&quot;Hive server doesn&amp;#39;t return schema for &amp;#39;set&amp;#39; command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2398&quot;&gt;&lt;del&gt;HIVE-2398&lt;/del&gt;&lt;/a&gt;. Hive server doesn&apos;t return schema for &apos;set&apos; command (Prasad Mujumdar via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1171253&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1171253&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/processors/CommandProcessorResponse.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/processors/SetProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12494306" name="HIVE-2398.patch" size="7129" author="prasadm" created="Tue, 13 Sep 2011 20:06:22 +0000"/>
                            <attachment id="12491014" name="HIVE-2398.patch" size="5758" author="prasadm" created="Fri, 19 Aug 2011 22:40:52 +0000"/>
                            <attachment id="12494493" name="HIVE-2398.patch.1" size="7165" author="prasadm" created="Wed, 14 Sep 2011 19:42:47 +0000"/>
                            <attachment id="12494686" name="HIVE-2398.patch.2" size="7165" author="prasadm" created="Thu, 15 Sep 2011 20:09:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 22:39:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2399] when use &quot;PARTITION&quot;&#65292;can not execute select statement</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2399</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;when add &quot;PARTITION&quot; to create table statment, select statement of bad form data is not good.&lt;/p&gt;

&lt;p&gt;create table statment&lt;br/&gt;
==========================&lt;br/&gt;
CREATE  TABLE pplive(&lt;br/&gt;
  ip STRING,&lt;br/&gt;
  n1 STRING,&lt;br/&gt;
  n2 STRING,&lt;br/&gt;
  log_date  STRING,&lt;br/&gt;
  method STRING,&lt;br/&gt;
  uri STRING,&lt;br/&gt;
  version STRING,&lt;br/&gt;
  status STRING,&lt;br/&gt;
  flux STRING,&lt;br/&gt;
  n3 STRING,&lt;br/&gt;
  n4 STRING&lt;br/&gt;
  )&lt;br/&gt;
  PARTITIONED BY(path STRING)&lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.contrib.serde2.RegexSerDe&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
  &quot;input.regex&quot; = &quot;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;ins&gt;)\\s&lt;/ins&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;ins&gt;)\\s&lt;/ins&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;ins&gt;)\\s&lt;/ins&gt;\\[(.&lt;ins&gt;)\\]\\s&lt;/ins&gt;\&quot;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;ins&gt;)\\s&lt;/ins&gt;(.&lt;ins&gt;)\\s(.&lt;/ins&gt;)\&quot;\\s+(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;ins&gt;)\\s&lt;/ins&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;ins&gt;)\\s&lt;/ins&gt;\&quot;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;ins&gt;)\&quot;\\s&lt;/ins&gt;\&quot;(.+)\&quot;&quot;,&lt;br/&gt;
  &quot;output.format.string&quot; = &quot;%1$s %2$s %3$s %4$s&quot;&lt;br/&gt;
 )  ;&lt;/p&gt;

&lt;p&gt;hive.bb.txt&lt;br/&gt;
==========================&lt;br/&gt;
Error line1.&lt;br/&gt;
Error line2.&lt;br/&gt;
Error line3.&lt;/p&gt;

&lt;p&gt;Load data&lt;br/&gt;
==========================&lt;br/&gt;
LOAD DATA INPATH &apos;/user/hive/warehouse/input/hive.bb.txt&apos; OVERWRITE INTO TABLE pplive PARTITION(path=&apos;haha&apos;) ;&lt;/p&gt;

&lt;p&gt;cli comand&lt;br/&gt;
==========================&lt;br/&gt;
&amp;gt; select * from pplive;&lt;br/&gt;
Failed with exception java.io.IOException:java.lang.NullPointerException&lt;/p&gt;

&lt;p&gt;hive log error:&lt;br/&gt;
==========================&lt;/p&gt;

&lt;p&gt;2011-08-22 15:54:19,451 WARN  serde2.RegexSerDe (RegexSerDe.java:deserialize(180)) - 1 unmatched rows are found: Error line1.&lt;br/&gt;
2011-08-22 15:54:19,453 ERROR CliDriver (SessionState.java:printError(343)) - Failed with exception java.io.IOException:java.lang.NullPointerException&lt;br/&gt;
java.io.IOException: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:150)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:1114)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:187)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:241)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:456)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at java.util.ArrayList.addAll(ArrayList.java:472)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector.getStructFieldsDataAsList(UnionStructObjectInspector.java:144)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.serialize(LazySimpleSerDe.java:357)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:142)&lt;br/&gt;
        ... 9 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: Red Hat Enterprise Linux AS release 4 (Nahant Update 5)&lt;br/&gt;
Hadoop: 0.20.2&lt;br/&gt;
hive: 0.7.0&lt;/p&gt;</environment>
        <key id="12519651">HIVE-2399</key>
            <summary>when use &quot;PARTITION&quot;&#65292;can not execute select statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="heipark">yue.zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Aug 2011 08:01:39 +0000</created>
                <updated>Thu, 25 Aug 2011 07:23:24 +0000</updated>
                                            <version>0.7.0</version>
                                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13088683" author="chinnalalam" created="Mon, 22 Aug 2011 13:22:53 +0000"  >&lt;p&gt;This issue related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2111&quot; title=&quot;NullPointerException on select * with table using RegexSerDe and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2111&quot;&gt;&lt;del&gt;HIVE-2111&lt;/del&gt;&lt;/a&gt;. Pls check this issue for more information.&lt;/p&gt;</comment>
                            <comment id="13090842" author="heipark" created="Thu, 25 Aug 2011 07:23:24 +0000"  >&lt;p&gt;An alternative solution is &#65306; &quot;select * from tablename where t.time is not null&quot;&lt;/p&gt;

&lt;p&gt;ps. In my usage scenarios,t.time is not null&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 22 Aug 2011 13:22:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lju7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123864</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2400] Update unittests Hadoop version</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2400</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hadoop 0.20.1 used in unittests contains bugs that were fixed in later versions of Hadoop, for example&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;har:// connections cannot be indexed by (scheme, authority, username) - the path is significant as well. Caching them in this way limits a hadoop client to opening one archive per filesystem. It seems to be safe not to cache them, since they wrap another connection that does the actual networking.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6231&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-6231&lt;/a&gt; .&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519875">HIVE-2400</key>
            <summary>Update unittests Hadoop version</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="marcink">Marcin Kurczych</assignee>
                                    <reporter username="marcink">Marcin Kurczych</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2011 20:22:27 +0000</created>
                <updated>Thu, 2 May 2013 02:29:44 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13093907" author="nzhang" created="Tue, 30 Aug 2011 17:15:35 +0000"  >&lt;p&gt;+1 on upgrading to a higher hadoop version. It seems the apache repo only hold upto 0.20.3. Maybe we need to upgradt to that version. Also we&apos;ll need to upgrade all the mirrows (facebook and cloudera&apos;s). &lt;/p&gt;

&lt;p&gt;Any other thoughts?  &lt;/p&gt;</comment>
                            <comment id="13093933" author="ashutoshc" created="Tue, 30 Aug 2011 17:47:31 +0000"  >&lt;p&gt;Now that hadoop artifacts are published and available from apache repo, we should use them. hadoop-0.20.203.0 and hadoop-0.20.3 is a good idea.&lt;/p&gt;</comment>
                            <comment id="13093935" author="ashutoshc" created="Tue, 30 Aug 2011 17:49:01 +0000"  >&lt;p&gt;Linking to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2162&quot; title=&quot;Upgrade dependencies to Hadoop 0.20.2 and 0.20.203.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2162&quot;&gt;&lt;del&gt;HIVE-2162&lt;/del&gt;&lt;/a&gt; which has bit more details.&lt;/p&gt;</comment>
                            <comment id="13093950" author="nzhang" created="Tue, 30 Aug 2011 18:06:48 +0000"  >&lt;p&gt;@Marcin, can you download and test if hadoop 0.20.3 indeed solves the har issue you mentioned.&lt;/p&gt;</comment>
                            <comment id="13094999" author="marcink" created="Wed, 31 Aug 2011 23:46:18 +0000"  >&lt;p&gt;I&apos;ve manually replaced hadoop-core and hadoop-tools jars to Hadoop 0.20.3 ones and everything almost worked (all tests, including new ones, which were failing because of Hadoop 0.20.1 bugs). There&apos;s &quot;almost&quot;, because I&apos;ve run into a problem: VersionInfo.getVersion() was returning &quot;Unknown&quot; so I hardcoded something like if(&quot;Unknown&quot;.equals(vers)) vers=&quot;0.20.3&quot;; for testing and then everything went perfect. This must be problem with jars, I&apos;ve used ones from &lt;a href=&quot;https://repository.apache.org/index.html#nexus-search;quick~hadoop&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/index.html#nexus-search;quick~hadoop&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="13138632" author="ashutoshc" created="Fri, 28 Oct 2011 18:49:24 +0000"  >&lt;p&gt;We should also make sure that in newer version tests pass in minimr mode too.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12471954">HIVE-1562</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12507041">HIVE-2162</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Aug 2011 17:15:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48403</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
